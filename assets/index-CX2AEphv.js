(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ff(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function R1(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Sm={exports:{}},Tu={},km={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function N1(){if(Ew)return $e;Ew=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=v&&K[v]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,j={};function A(K,ee,Ee){this.props=K,this.context=ee,this.refs=j,this.updater=Ee||E}A.prototype.isReactComponent={},A.prototype.setState=function(K,ee){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ee,"setState")},A.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function D(){}D.prototype=A.prototype;function F(K,ee,Ee){this.props=K,this.context=ee,this.refs=j,this.updater=Ee||E}var $=F.prototype=new D;$.constructor=F,C($,A.prototype),$.isPureReactComponent=!0;var B=Array.isArray,U=Object.prototype.hasOwnProperty,V={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function b(K,ee,Ee){var Le,ie={},q=null,Q=null;if(ee!=null)for(Le in ee.ref!==void 0&&(Q=ee.ref),ee.key!==void 0&&(q=""+ee.key),ee)U.call(ee,Le)&&!I.hasOwnProperty(Le)&&(ie[Le]=ee[Le]);var te=arguments.length-2;if(te===1)ie.children=Ee;else if(1<te){for(var fe=Array(te),ge=0;ge<te;ge++)fe[ge]=arguments[ge+2];ie.children=fe}if(K&&K.defaultProps)for(Le in te=K.defaultProps,te)ie[Le]===void 0&&(ie[Le]=te[Le]);return{$$typeof:n,type:K,key:q,ref:Q,props:ie,_owner:V.current}}function S(K,ee){return{$$typeof:n,type:K.type,key:ee,ref:K.ref,props:K.props,_owner:K._owner}}function R(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function M(K){var ee={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Ee){return ee[Ee]})}var W=/\/+/g;function O(K,ee){return typeof K=="object"&&K!==null&&K.key!=null?M(""+K.key):ee.toString(36)}function re(K,ee,Ee,Le,ie){var q=typeof K;(q==="undefined"||q==="boolean")&&(K=null);var Q=!1;if(K===null)Q=!0;else switch(q){case"string":case"number":Q=!0;break;case"object":switch(K.$$typeof){case n:case e:Q=!0}}if(Q)return Q=K,ie=ie(Q),K=Le===""?"."+O(Q,0):Le,B(ie)?(Ee="",K!=null&&(Ee=K.replace(W,"$&/")+"/"),re(ie,ee,Ee,"",function(ge){return ge})):ie!=null&&(R(ie)&&(ie=S(ie,Ee+(!ie.key||Q&&Q.key===ie.key?"":(""+ie.key).replace(W,"$&/")+"/")+K)),ee.push(ie)),1;if(Q=0,Le=Le===""?".":Le+":",B(K))for(var te=0;te<K.length;te++){q=K[te];var fe=Le+O(q,te);Q+=re(q,ee,Ee,fe,ie)}else if(fe=_(K),typeof fe=="function")for(K=fe.call(K),te=0;!(q=K.next()).done;)q=q.value,fe=Le+O(q,te++),Q+=re(q,ee,Ee,fe,ie);else if(q==="object")throw ee=String(K),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Q}function he(K,ee,Ee){if(K==null)return K;var Le=[],ie=0;return re(K,Le,"","",function(q){return ee.call(Ee,q,ie++)}),Le}function Ne(K){if(K._status===-1){var ee=K._result;ee=ee(),ee.then(function(Ee){(K._status===0||K._status===-1)&&(K._status=1,K._result=Ee)},function(Ee){(K._status===0||K._status===-1)&&(K._status=2,K._result=Ee)}),K._status===-1&&(K._status=0,K._result=ee)}if(K._status===1)return K._result.default;throw K._result}var xe={current:null},le={transition:null},me={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:le,ReactCurrentOwner:V};function pe(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:he,forEach:function(K,ee,Ee){he(K,function(){ee.apply(this,arguments)},Ee)},count:function(K){var ee=0;return he(K,function(){ee++}),ee},toArray:function(K){return he(K,function(ee){return ee})||[]},only:function(K){if(!R(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},$e.Component=A,$e.Fragment=t,$e.Profiler=s,$e.PureComponent=F,$e.StrictMode=r,$e.Suspense=d,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,$e.act=pe,$e.cloneElement=function(K,ee,Ee){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Le=C({},K.props),ie=K.key,q=K.ref,Q=K._owner;if(ee!=null){if(ee.ref!==void 0&&(q=ee.ref,Q=V.current),ee.key!==void 0&&(ie=""+ee.key),K.type&&K.type.defaultProps)var te=K.type.defaultProps;for(fe in ee)U.call(ee,fe)&&!I.hasOwnProperty(fe)&&(Le[fe]=ee[fe]===void 0&&te!==void 0?te[fe]:ee[fe])}var fe=arguments.length-2;if(fe===1)Le.children=Ee;else if(1<fe){te=Array(fe);for(var ge=0;ge<fe;ge++)te[ge]=arguments[ge+2];Le.children=te}return{$$typeof:n,type:K.type,key:ie,ref:q,props:Le,_owner:Q}},$e.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:o,_context:K},K.Consumer=K},$e.createElement=b,$e.createFactory=function(K){var ee=b.bind(null,K);return ee.type=K,ee},$e.createRef=function(){return{current:null}},$e.forwardRef=function(K){return{$$typeof:u,render:K}},$e.isValidElement=R,$e.lazy=function(K){return{$$typeof:g,_payload:{_status:-1,_result:K},_init:Ne}},$e.memo=function(K,ee){return{$$typeof:h,type:K,compare:ee===void 0?null:ee}},$e.startTransition=function(K){var ee=le.transition;le.transition={};try{K()}finally{le.transition=ee}},$e.unstable_act=pe,$e.useCallback=function(K,ee){return xe.current.useCallback(K,ee)},$e.useContext=function(K){return xe.current.useContext(K)},$e.useDebugValue=function(){},$e.useDeferredValue=function(K){return xe.current.useDeferredValue(K)},$e.useEffect=function(K,ee){return xe.current.useEffect(K,ee)},$e.useId=function(){return xe.current.useId()},$e.useImperativeHandle=function(K,ee,Ee){return xe.current.useImperativeHandle(K,ee,Ee)},$e.useInsertionEffect=function(K,ee){return xe.current.useInsertionEffect(K,ee)},$e.useLayoutEffect=function(K,ee){return xe.current.useLayoutEffect(K,ee)},$e.useMemo=function(K,ee){return xe.current.useMemo(K,ee)},$e.useReducer=function(K,ee,Ee){return xe.current.useReducer(K,ee,Ee)},$e.useRef=function(K){return xe.current.useRef(K)},$e.useState=function(K){return xe.current.useState(K)},$e.useSyncExternalStore=function(K,ee,Ee){return xe.current.useSyncExternalStore(K,ee,Ee)},$e.useTransition=function(){return xe.current.useTransition()},$e.version="18.3.1",$e}var Tw;function y0(){return Tw||(Tw=1,km.exports=N1()),km.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function j1(){if(Sw)return Tu;Sw=1;var n=y0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var g,v={},_=null,E=null;h!==void 0&&(_=""+h),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(E=d.ref);for(g in d)r.call(d,g)&&!o.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:u,key:_,ref:E,props:v,_owner:s.current}}return Tu.Fragment=t,Tu.jsx=l,Tu.jsxs=l,Tu}var kw;function D1(){return kw||(kw=1,Sm.exports=j1()),Sm.exports}var p=D1(),P=y0();const Lt=ff(P);var Xd={},Cm={exports:{}},Pn={},Pm={exports:{}},Am={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function O1(){return Cw||(Cw=1,function(n){function e(le,me){var pe=le.length;le.push(me);e:for(;0<pe;){var K=pe-1>>>1,ee=le[K];if(0<s(ee,me))le[K]=me,le[pe]=ee,pe=K;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var me=le[0],pe=le.pop();if(pe!==me){le[0]=pe;e:for(var K=0,ee=le.length,Ee=ee>>>1;K<Ee;){var Le=2*(K+1)-1,ie=le[Le],q=Le+1,Q=le[q];if(0>s(ie,pe))q<ee&&0>s(Q,ie)?(le[K]=Q,le[q]=pe,K=q):(le[K]=ie,le[Le]=pe,K=Le);else if(q<ee&&0>s(Q,pe))le[K]=Q,le[q]=pe,K=q;else break e}}return me}function s(le,me){var pe=le.sortIndex-me.sortIndex;return pe!==0?pe:le.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],h=[],g=1,v=null,_=3,E=!1,C=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(le){for(var me=t(h);me!==null;){if(me.callback===null)r(h);else if(me.startTime<=le)r(h),me.sortIndex=me.expirationTime,e(d,me);else break;me=t(h)}}function B(le){if(j=!1,$(le),!C)if(t(d)!==null)C=!0,Ne(U);else{var me=t(h);me!==null&&xe(B,me.startTime-le)}}function U(le,me){C=!1,j&&(j=!1,D(b),b=-1),E=!0;var pe=_;try{for($(me),v=t(d);v!==null&&(!(v.expirationTime>me)||le&&!M());){var K=v.callback;if(typeof K=="function"){v.callback=null,_=v.priorityLevel;var ee=K(v.expirationTime<=me);me=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(d)&&r(d),$(me)}else r(d);v=t(d)}if(v!==null)var Ee=!0;else{var Le=t(h);Le!==null&&xe(B,Le.startTime-me),Ee=!1}return Ee}finally{v=null,_=pe,E=!1}}var V=!1,I=null,b=-1,S=5,R=-1;function M(){return!(n.unstable_now()-R<S)}function W(){if(I!==null){var le=n.unstable_now();R=le;var me=!0;try{me=I(!0,le)}finally{me?O():(V=!1,I=null)}}else V=!1}var O;if(typeof F=="function")O=function(){F(W)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,he=re.port2;re.port1.onmessage=W,O=function(){he.postMessage(null)}}else O=function(){A(W,0)};function Ne(le){I=le,V||(V=!0,O())}function xe(le,me){b=A(function(){le(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Ne(U))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(le){switch(_){case 1:case 2:case 3:var me=3;break;default:me=_}var pe=_;_=me;try{return le()}finally{_=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,me){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var pe=_;_=le;try{return me()}finally{_=pe}},n.unstable_scheduleCallback=function(le,me,pe){var K=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?K+pe:K):pe=K,le){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=pe+ee,le={id:g++,callback:me,priorityLevel:le,startTime:pe,expirationTime:ee,sortIndex:-1},pe>K?(le.sortIndex=pe,e(h,le),t(d)===null&&le===t(h)&&(j?(D(b),b=-1):j=!0,xe(B,pe-K))):(le.sortIndex=ee,e(d,le),C||E||(C=!0,Ne(U))),le},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(le){var me=_;return function(){var pe=_;_=me;try{return le.apply(this,arguments)}finally{_=pe}}}}(Am)),Am}var Pw;function L1(){return Pw||(Pw=1,Pm.exports=O1()),Pm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function M1(){if(Aw)return Pn;Aw=1;var n=y0(),e=L1();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function _(i){return d.call(v,i)?!0:d.call(g,i)?!1:h.test(i)?v[i]=!0:(g[i]=!0,!1)}function E(i,a,c,m){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,a,c,m){if(a===null||typeof a>"u"||E(i,a,c,m))return!0;if(m)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function j(i,a,c,m,y,x,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=x,this.removeEmptyString=k}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new j(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];A[a]=new j(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new j(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new j(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new j(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new j(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new j(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new j(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new j(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function F(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,F);A[a]=new j(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,F);A[a]=new j(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,F);A[a]=new j(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new j(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new j(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,a,c,m){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(C(a,c,y,m)&&(c=null),m||y===null?_(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):y.mustUseProperty?i[y.propertyName]=c===null?y.type===3?!1:"":c:(a=y.attributeName,m=y.attributeNamespace,c===null?i.removeAttribute(a):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,m?i.setAttributeNS(m,a,c):i.setAttribute(a,c))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U=Symbol.for("react.element"),V=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),le=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var pe=Object.assign,K;function ee(i){if(K===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);K=a&&a[1]||""}return`
`+K+i}var Ee=!1;function Le(i,a){if(!i||Ee)return"";Ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var m=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){m=X}i.call(a.prototype)}else{try{throw Error()}catch(X){m=X}i()}}catch(X){if(X&&m&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),x=m.stack.split(`
`),k=y.length-1,L=x.length-1;1<=k&&0<=L&&y[k]!==x[L];)L--;for(;1<=k&&0<=L;k--,L--)if(y[k]!==x[L]){if(k!==1||L!==1)do if(k--,L--,0>L||y[k]!==x[L]){var z=`
`+y[k].replace(" at new "," at ");return i.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",i.displayName)),z}while(1<=k&&0<=L);break}}}finally{Ee=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?ee(i):""}function ie(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Le(i.type,!1),i;case 11:return i=Le(i.type.render,!1),i;case 1:return i=Le(i.type,!0),i;default:return""}}function q(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case V:return"Portal";case S:return"Profiler";case b:return"StrictMode";case O:return"Suspense";case re:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case W:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case he:return a=i.displayName||null,a!==null?a:q(i.type)||"Memo";case Ne:a=i._payload,i=i._init;try{return q(i(a))}catch{}}return null}function Q(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function fe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ge(i){var a=fe(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(k){m=""+k,x.call(this,k)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function We(i){i._valueTracker||(i._valueTracker=ge(i))}function He(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),m="";return i&&(m=fe(i)?i.checked?"true":"false":i.value),i=m,i!==c?(a.setValue(i),!0):!1}function At(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Dn(i,a){var c=a.checked;return pe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function ns(i,a){var c=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;c=te(a.value!=null?a.value:c),i._wrapperState={initialChecked:m,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function $t(i,a){a=a.checked,a!=null&&$(i,"checked",a,!1)}function rs(i,a){$t(i,a);var c=te(a.value),m=a.type;if(c!=null)m==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Uo(i,a.type,c):a.hasOwnProperty("defaultValue")&&Uo(i,a.type,te(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Mc(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Uo(i,a,c){(a!=="number"||At(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var ss=Array.isArray;function is(i,a,c,m){if(i=i.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=a.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&m&&(i[c].defaultSelected=!0)}else{for(c=""+te(c),a=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Nl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return pe({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Bo(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(ss(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:te(c)}}function zo(i,a){var c=te(a.value),m=te(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),m!=null&&(i.defaultValue=""+m)}function jl(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function It(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?It(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var os,Dl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,m,y){MSApp.execUnsafeLocalFunction(function(){return i(a,c,m,y)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=os.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ms(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ui=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(i){Ui.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Fi[a]=Fi[i]})});function Ol(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Fi.hasOwnProperty(i)&&Fi[i]?(""+a).trim():a+"px"}function Ll(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var m=c.indexOf("--")===0,y=Ol(c,a[c],m);c==="float"&&(c="cssFloat"),m?i.setProperty(c,y):i[c]=y}}var Ml=pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(i,a){if(a){if(Ml[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function $l(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function Wo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ho=null,Kn=null,Rr=null;function qo(i){if(i=uu(i)){if(typeof Ho!="function")throw Error(t(280));var a=i.stateNode;a&&(a=fd(a),Ho(i.stateNode,i.type,a))}}function Nr(i){Kn?Rr?Rr.push(i):Rr=[i]:Kn=i}function Fl(){if(Kn){var i=Kn,a=Rr;if(Rr=Kn=null,qo(i),a)for(i=0;i<a.length;i++)qo(a[i])}}function zi(i,a){return i(a)}function Ul(){}var as=!1;function Bl(i,a,c){if(as)return i(a,c);as=!0;try{return zi(i,a,c)}finally{as=!1,(Kn!==null||Rr!==null)&&(Ul(),Fl())}}function xt(i,a){var c=i.stateNode;if(c===null)return null;var m=fd(c);if(m===null)return null;c=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Ko=!1;if(u)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Ko=!1}function Wi(i,a,c,m,y,x,k,L,z){var X=Array.prototype.slice.call(arguments,3);try{a.apply(c,X)}catch(oe){this.onError(oe)}}var Hi=!1,Go=null,dr=!1,zl=null,Zf={onError:function(i){Hi=!0,Go=i}};function Qo(i,a,c,m,y,x,k,L,z){Hi=!1,Go=null,Wi.apply(Zf,arguments)}function Vc(i,a,c,m,y,x,k,L,z){if(Qo.apply(this,arguments),Hi){if(Hi){var X=Go;Hi=!1,Go=null}else throw Error(t(198));dr||(dr=!0,zl=X)}}function hr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function qi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function fr(i){if(hr(i)!==i)throw Error(t(188))}function $c(i){var a=i.alternate;if(!a){if(a=hr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,m=a;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return fr(y),i;if(x===m)return fr(y),a;x=x.sibling}throw Error(t(188))}if(c.return!==m.return)c=y,m=x;else{for(var k=!1,L=y.child;L;){if(L===c){k=!0,c=y,m=x;break}if(L===m){k=!0,m=y,c=x;break}L=L.sibling}if(!k){for(L=x.child;L;){if(L===c){k=!0,c=x,m=y;break}if(L===m){k=!0,m=x,c=y;break}L=L.sibling}if(!k)throw Error(t(189))}}if(c.alternate!==m)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Wl(i){return i=$c(i),i!==null?Jo(i):null}function Jo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Jo(i);if(a!==null)return a;i=i.sibling}return null}var Yo=e.unstable_scheduleCallback,Hl=e.unstable_cancelCallback,Fc=e.unstable_shouldYield,ep=e.unstable_requestPaint,tt=e.unstable_now,Uc=e.unstable_getCurrentPriorityLevel,Ki=e.unstable_ImmediatePriority,Vs=e.unstable_UserBlockingPriority,Gn=e.unstable_NormalPriority,ql=e.unstable_LowPriority,Bc=e.unstable_IdlePriority,Gi=null,On=null;function zc(i){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Gi,i,void 0,(i.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:Hc,Kl=Math.log,Wc=Math.LN2;function Hc(i){return i>>>=0,i===0?32:31-(Kl(i)/Wc|0)|0}var Xo=64,Zo=4194304;function $s(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qi(i,a){var c=i.pendingLanes;if(c===0)return 0;var m=0,y=i.suspendedLanes,x=i.pingedLanes,k=c&268435455;if(k!==0){var L=k&~y;L!==0?m=$s(L):(x&=k,x!==0&&(m=$s(x)))}else k=c&~y,k!==0?m=$s(k):x!==0&&(m=$s(x));if(m===0)return 0;if(a!==0&&a!==m&&!(a&y)&&(y=m&-m,x=a&-a,y>=x||y===16&&(x&4194240)!==0))return a;if(m&4&&(m|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)c=31-mn(a),y=1<<c,m|=i[c],a&=~y;return m}function tp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ls(i,a){for(var c=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes;0<x;){var k=31-mn(x),L=1<<k,z=y[k];z===-1?(!(L&c)||L&m)&&(y[k]=tp(L,a)):z<=a&&(i.expiredLanes|=L),x&=~L}}function Ln(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ji(){var i=Xo;return Xo<<=1,!(Xo&4194240)&&(Xo=64),i}function Fs(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Us(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-mn(a),i[a]=c}function et(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<c;){var y=31-mn(c),x=1<<y;a[y]=0,m[y]=-1,i[y]=-1,c&=~x}}function Bs(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var m=31-mn(c),y=1<<m;y&a|i[m]&a&&(i[m]|=a),c&=~y}}var ze=0;function zs(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var qc,ea,Kc,Gc,Qc,Gl=!1,jr=[],Kt=null,pr=null,mr=null,Ws=new Map,Qn=new Map,Dr=[],np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jc(i,a){switch(i){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ws.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(a.pointerId)}}function xn(i,a,c,m,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:a,domEventName:c,eventSystemFlags:m,nativeEvent:x,targetContainers:[y]},a!==null&&(a=uu(a),a!==null&&ea(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function rp(i,a,c,m,y){switch(a){case"focusin":return Kt=xn(Kt,i,a,c,m,y),!0;case"dragenter":return pr=xn(pr,i,a,c,m,y),!0;case"mouseover":return mr=xn(mr,i,a,c,m,y),!0;case"pointerover":var x=y.pointerId;return Ws.set(x,xn(Ws.get(x)||null,i,a,c,m,y)),!0;case"gotpointercapture":return x=y.pointerId,Qn.set(x,xn(Qn.get(x)||null,i,a,c,m,y)),!0}return!1}function Yc(i){var a=to(i.target);if(a!==null){var c=hr(a);if(c!==null){if(a=c.tag,a===13){if(a=qi(c),a!==null){i.blockedOn=a,Qc(i.priority,function(){Kc(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function us(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=ta(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var m=new c.constructor(c.type,c);Bi=m,c.target.dispatchEvent(m),Bi=null}else return a=uu(c),a!==null&&ea(a),i.blockedOn=c,!1;a.shift()}return!0}function Yi(i,a,c){us(i)&&c.delete(a)}function Xc(){Gl=!1,Kt!==null&&us(Kt)&&(Kt=null),pr!==null&&us(pr)&&(pr=null),mr!==null&&us(mr)&&(mr=null),Ws.forEach(Yi),Qn.forEach(Yi)}function gr(i,a){i.blockedOn===a&&(i.blockedOn=null,Gl||(Gl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xc)))}function yr(i){function a(y){return gr(y,i)}if(0<jr.length){gr(jr[0],i);for(var c=1;c<jr.length;c++){var m=jr[c];m.blockedOn===i&&(m.blockedOn=null)}}for(Kt!==null&&gr(Kt,i),pr!==null&&gr(pr,i),mr!==null&&gr(mr,i),Ws.forEach(a),Qn.forEach(a),c=0;c<Dr.length;c++)m=Dr[c],m.blockedOn===i&&(m.blockedOn=null);for(;0<Dr.length&&(c=Dr[0],c.blockedOn===null);)Yc(c),c.blockedOn===null&&Dr.shift()}var cs=B.ReactCurrentBatchConfig,Hs=!0;function lt(i,a,c,m){var y=ze,x=cs.transition;cs.transition=null;try{ze=1,Ql(i,a,c,m)}finally{ze=y,cs.transition=x}}function sp(i,a,c,m){var y=ze,x=cs.transition;cs.transition=null;try{ze=4,Ql(i,a,c,m)}finally{ze=y,cs.transition=x}}function Ql(i,a,c,m){if(Hs){var y=ta(i,a,c,m);if(y===null)mp(i,a,m,Xi,c),Jc(i,m);else if(rp(y,i,a,c,m))m.stopPropagation();else if(Jc(i,m),a&4&&-1<np.indexOf(i)){for(;y!==null;){var x=uu(y);if(x!==null&&qc(x),x=ta(i,a,c,m),x===null&&mp(i,a,m,Xi,c),x===y)break;y=x}y!==null&&m.stopPropagation()}else mp(i,a,m,null,c)}}var Xi=null;function ta(i,a,c,m){if(Xi=null,i=Wo(m),i=to(i),i!==null)if(a=hr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=qi(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Xi=i,null}function Jl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uc()){case Ki:return 1;case Vs:return 4;case Gn:case ql:return 16;case Bc:return 536870912;default:return 16}default:return 16}}var Mn=null,na=null,bn=null;function Yl(){if(bn)return bn;var i,a=na,c=a.length,m,y="value"in Mn?Mn.value:Mn.textContent,x=y.length;for(i=0;i<c&&a[i]===y[i];i++);var k=c-i;for(m=1;m<=k&&a[c-m]===y[x-m];m++);return bn=y.slice(i,1<m?1-m:void 0)}function ra(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Or(){return!0}function Xl(){return!1}function Gt(i){function a(c,m,y,x,k){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Or:Xl,this.isPropagationStopped=Xl,this}return pe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),a}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Gt(vr),Lr=pe({},vr,{view:0,detail:0}),ip=Gt(Lr),ia,ds,qs,Zi=pe({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qs&&(qs&&i.type==="mousemove"?(ia=i.screenX-qs.screenX,ds=i.screenY-qs.screenY):ds=ia=0,qs=i),ia)},movementY:function(i){return"movementY"in i?i.movementY:ds}}),oa=Gt(Zi),Zl=pe({},Zi,{dataTransfer:0}),Zc=Gt(Zl),aa=pe({},Lr,{relatedTarget:0}),la=Gt(aa),ed=pe({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),hs=Gt(ed),td=pe({},vr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nd=Gt(td),rd=pe({},vr,{data:0}),eu=Gt(rd),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function id(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=sd[i])?!!a[i]:!1}function Mr(){return id}var f=pe({},Lr,{key:function(i){if(i.key){var a=ua[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ra(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(i){return i.type==="keypress"?ra(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ra(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Gt(f),T=pe({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Gt(T),G=pe({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),Z=Gt(G),de=pe({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ye=Gt(de),Nt=pe({},Zi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Gt(Nt),Ft=[9,13,27,32],kt=u&&"CompositionEvent"in window,Jn=null;u&&"documentMode"in document&&(Jn=document.documentMode);var Vn=u&&"TextEvent"in window&&!Jn,eo=u&&(!kt||Jn&&8<Jn&&11>=Jn),ca=" ",yv=!1;function vv(i,a){switch(i){case"keyup":return Ft.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _v(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var da=!1;function PA(i,a){switch(i){case"compositionend":return _v(a);case"keypress":return a.which!==32?null:(yv=!0,ca);case"textInput":return i=a.data,i===ca&&yv?null:i;default:return null}}function AA(i,a){if(da)return i==="compositionend"||!kt&&vv(i,a)?(i=Yl(),bn=na=Mn=null,da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return eo&&a.locale!=="ko"?null:a.data;default:return null}}var IA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!IA[i.type]:a==="textarea"}function xv(i,a,c,m){Nr(m),a=cd(a,"onChange"),0<a.length&&(c=new sa("onChange","change",null,c,m),i.push({event:c,listeners:a}))}var tu=null,nu=null;function RA(i){$v(i,0)}function od(i){var a=ga(i);if(He(a))return i}function NA(i,a){if(i==="change")return a}var bv=!1;if(u){var op;if(u){var ap="oninput"in document;if(!ap){var Ev=document.createElement("div");Ev.setAttribute("oninput","return;"),ap=typeof Ev.oninput=="function"}op=ap}else op=!1;bv=op&&(!document.documentMode||9<document.documentMode)}function Tv(){tu&&(tu.detachEvent("onpropertychange",Sv),nu=tu=null)}function Sv(i){if(i.propertyName==="value"&&od(nu)){var a=[];xv(a,nu,i,Wo(i)),Bl(RA,a)}}function jA(i,a,c){i==="focusin"?(Tv(),tu=a,nu=c,tu.attachEvent("onpropertychange",Sv)):i==="focusout"&&Tv()}function DA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return od(nu)}function OA(i,a){if(i==="click")return od(a)}function LA(i,a){if(i==="input"||i==="change")return od(a)}function MA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var _r=typeof Object.is=="function"?Object.is:MA;function ru(i,a){if(_r(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),m=Object.keys(a);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!d.call(a,y)||!_r(i[y],a[y]))return!1}return!0}function kv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Cv(i,a){var c=kv(i);i=0;for(var m;c;){if(c.nodeType===3){if(m=i+c.textContent.length,i<=a&&m>=a)return{node:c,offset:a-i};i=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=kv(c)}}function Pv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Pv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Av(){for(var i=window,a=At();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=At(i.document)}return a}function lp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function VA(i){var a=Av(),c=i.focusedElem,m=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&Pv(c.ownerDocument.documentElement,c)){if(m!==null&&lp(c)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=c.textContent.length,x=Math.min(m.start,y);m=m.end===void 0?x:Math.min(m.end,y),!i.extend&&x>m&&(y=m,m=x,x=y),y=Cv(c,x);var k=Cv(c,m);y&&k&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),x>m?(i.addRange(a),i.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var $A=u&&"documentMode"in document&&11>=document.documentMode,ha=null,up=null,su=null,cp=!1;function Iv(i,a,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;cp||ha==null||ha!==At(m)||(m=ha,"selectionStart"in m&&lp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),su&&ru(su,m)||(su=m,m=cd(up,"onSelect"),0<m.length&&(a=new sa("onSelect","select",null,a,c),i.push({event:a,listeners:m}),a.target=ha)))}function ad(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var fa={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},dp={},Rv={};u&&(Rv=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function ld(i){if(dp[i])return dp[i];if(!fa[i])return i;var a=fa[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Rv)return dp[i]=a[c];return i}var Nv=ld("animationend"),jv=ld("animationiteration"),Dv=ld("animationstart"),Ov=ld("transitionend"),Lv=new Map,Mv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ks(i,a){Lv.set(i,a),o(a,[i])}for(var hp=0;hp<Mv.length;hp++){var fp=Mv[hp],FA=fp.toLowerCase(),UA=fp[0].toUpperCase()+fp.slice(1);Ks(FA,"on"+UA)}Ks(Nv,"onAnimationEnd"),Ks(jv,"onAnimationIteration"),Ks(Dv,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(Ov,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BA=new Set("cancel close invalid load scroll toggle".split(" ").concat(iu));function Vv(i,a,c){var m=i.type||"unknown-event";i.currentTarget=c,Vc(m,a,void 0,i),i.currentTarget=null}function $v(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var m=i[c],y=m.event;m=m.listeners;e:{var x=void 0;if(a)for(var k=m.length-1;0<=k;k--){var L=m[k],z=L.instance,X=L.currentTarget;if(L=L.listener,z!==x&&y.isPropagationStopped())break e;Vv(y,L,X),x=z}else for(k=0;k<m.length;k++){if(L=m[k],z=L.instance,X=L.currentTarget,L=L.listener,z!==x&&y.isPropagationStopped())break e;Vv(y,L,X),x=z}}}if(dr)throw i=zl,dr=!1,zl=null,i}function ot(i,a){var c=a[xp];c===void 0&&(c=a[xp]=new Set);var m=i+"__bubble";c.has(m)||(Fv(a,i,2,!1),c.add(m))}function pp(i,a,c){var m=0;a&&(m|=4),Fv(c,i,m,a)}var ud="_reactListening"+Math.random().toString(36).slice(2);function ou(i){if(!i[ud]){i[ud]=!0,r.forEach(function(c){c!=="selectionchange"&&(BA.has(c)||pp(c,!1,i),pp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[ud]||(a[ud]=!0,pp("selectionchange",!1,a))}}function Fv(i,a,c,m){switch(Jl(a)){case 1:var y=lt;break;case 4:y=sp;break;default:y=Ql}c=y.bind(null,a,c,i),y=void 0,!Ko||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(a,c,{capture:!0,passive:y}):i.addEventListener(a,c,!0):y!==void 0?i.addEventListener(a,c,{passive:y}):i.addEventListener(a,c,!1)}function mp(i,a,c,m,y){var x=m;if(!(a&1)&&!(a&2)&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var L=m.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(k===4)for(k=m.return;k!==null;){var z=k.tag;if((z===3||z===4)&&(z=k.stateNode.containerInfo,z===y||z.nodeType===8&&z.parentNode===y))return;k=k.return}for(;L!==null;){if(k=to(L),k===null)return;if(z=k.tag,z===5||z===6){m=x=k;continue e}L=L.parentNode}}m=m.return}Bl(function(){var X=x,oe=Wo(c),ue=[];e:{var se=Lv.get(i);if(se!==void 0){var ye=sa,we=i;switch(i){case"keypress":if(ra(c)===0)break e;case"keydown":case"keyup":ye=w;break;case"focusin":we="focus",ye=la;break;case"focusout":we="blur",ye=la;break;case"beforeblur":case"afterblur":ye=la;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Z;break;case Nv:case jv:case Dv:ye=hs;break;case Ov:ye=Ye;break;case"scroll":ye=ip;break;case"wheel":ye=qe;break;case"copy":case"cut":case"paste":ye=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=N}var be=(a&4)!==0,bt=!be&&i==="scroll",J=be?se!==null?se+"Capture":null:se;be=[];for(var H=X,Y;H!==null;){Y=H;var ce=Y.stateNode;if(Y.tag===5&&ce!==null&&(Y=ce,J!==null&&(ce=xt(H,J),ce!=null&&be.push(au(H,ce,Y)))),bt)break;H=H.return}0<be.length&&(se=new ye(se,we,null,c,oe),ue.push({event:se,listeners:be}))}}if(!(a&7)){e:{if(se=i==="mouseover"||i==="pointerover",ye=i==="mouseout"||i==="pointerout",se&&c!==Bi&&(we=c.relatedTarget||c.fromElement)&&(to(we)||we[fs]))break e;if((ye||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ye?(we=c.relatedTarget||c.toElement,ye=X,we=we?to(we):null,we!==null&&(bt=hr(we),we!==bt||we.tag!==5&&we.tag!==6)&&(we=null)):(ye=null,we=X),ye!==we)){if(be=oa,ce="onMouseLeave",J="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(be=N,ce="onPointerLeave",J="onPointerEnter",H="pointer"),bt=ye==null?se:ga(ye),Y=we==null?se:ga(we),se=new be(ce,H+"leave",ye,c,oe),se.target=bt,se.relatedTarget=Y,ce=null,to(oe)===X&&(be=new be(J,H+"enter",we,c,oe),be.target=Y,be.relatedTarget=bt,ce=be),bt=ce,ye&&we)t:{for(be=ye,J=we,H=0,Y=be;Y;Y=pa(Y))H++;for(Y=0,ce=J;ce;ce=pa(ce))Y++;for(;0<H-Y;)be=pa(be),H--;for(;0<Y-H;)J=pa(J),Y--;for(;H--;){if(be===J||J!==null&&be===J.alternate)break t;be=pa(be),J=pa(J)}be=null}else be=null;ye!==null&&Uv(ue,se,ye,be,!1),we!==null&&bt!==null&&Uv(ue,bt,we,be,!0)}}e:{if(se=X?ga(X):window,ye=se.nodeName&&se.nodeName.toLowerCase(),ye==="select"||ye==="input"&&se.type==="file")var Te=NA;else if(wv(se))if(bv)Te=LA;else{Te=DA;var ke=jA}else(ye=se.nodeName)&&ye.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=OA);if(Te&&(Te=Te(i,X))){xv(ue,Te,c,oe);break e}ke&&ke(i,se,X),i==="focusout"&&(ke=se._wrapperState)&&ke.controlled&&se.type==="number"&&Uo(se,"number",se.value)}switch(ke=X?ga(X):window,i){case"focusin":(wv(ke)||ke.contentEditable==="true")&&(ha=ke,up=X,su=null);break;case"focusout":su=up=ha=null;break;case"mousedown":cp=!0;break;case"contextmenu":case"mouseup":case"dragend":cp=!1,Iv(ue,c,oe);break;case"selectionchange":if($A)break;case"keydown":case"keyup":Iv(ue,c,oe)}var Ce;if(kt)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else da?vv(i,c)&&(je="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(je="onCompositionStart");je&&(eo&&c.locale!=="ko"&&(da||je!=="onCompositionStart"?je==="onCompositionEnd"&&da&&(Ce=Yl()):(Mn=oe,na="value"in Mn?Mn.value:Mn.textContent,da=!0)),ke=cd(X,je),0<ke.length&&(je=new eu(je,i,null,c,oe),ue.push({event:je,listeners:ke}),Ce?je.data=Ce:(Ce=_v(c),Ce!==null&&(je.data=Ce)))),(Ce=Vn?PA(i,c):AA(i,c))&&(X=cd(X,"onBeforeInput"),0<X.length&&(oe=new eu("onBeforeInput","beforeinput",null,c,oe),ue.push({event:oe,listeners:X}),oe.data=Ce))}$v(ue,a)})}function au(i,a,c){return{instance:i,listener:a,currentTarget:c}}function cd(i,a){for(var c=a+"Capture",m=[];i!==null;){var y=i,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=xt(i,c),x!=null&&m.unshift(au(i,x,y)),x=xt(i,a),x!=null&&m.push(au(i,x,y))),i=i.return}return m}function pa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Uv(i,a,c,m,y){for(var x=a._reactName,k=[];c!==null&&c!==m;){var L=c,z=L.alternate,X=L.stateNode;if(z!==null&&z===m)break;L.tag===5&&X!==null&&(L=X,y?(z=xt(c,x),z!=null&&k.unshift(au(c,z,L))):y||(z=xt(c,x),z!=null&&k.push(au(c,z,L)))),c=c.return}k.length!==0&&i.push({event:a,listeners:k})}var zA=/\r\n?/g,WA=/\u0000|\uFFFD/g;function Bv(i){return(typeof i=="string"?i:""+i).replace(zA,`
`).replace(WA,"")}function dd(i,a,c){if(a=Bv(a),Bv(i)!==a&&c)throw Error(t(425))}function hd(){}var gp=null,yp=null;function vp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var _p=typeof setTimeout=="function"?setTimeout:void 0,HA=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,qA=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(i){return zv.resolve(null).then(i).catch(KA)}:_p;function KA(i){setTimeout(function(){throw i})}function wp(i,a){var c=a,m=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(m===0){i.removeChild(y),yr(a);return}m--}else c!=="$"&&c!=="$?"&&c!=="$!"||m++;c=y}while(c);yr(a)}function Gs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Wv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var ma=Math.random().toString(36).slice(2),Vr="__reactFiber$"+ma,lu="__reactProps$"+ma,fs="__reactContainer$"+ma,xp="__reactEvents$"+ma,GA="__reactListeners$"+ma,QA="__reactHandles$"+ma;function to(i){var a=i[Vr];if(a)return a;for(var c=i.parentNode;c;){if(a=c[fs]||c[Vr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Wv(i);i!==null;){if(c=i[Vr])return c;i=Wv(i)}return a}i=c,c=i.parentNode}return null}function uu(i){return i=i[Vr]||i[fs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ga(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function fd(i){return i[lu]||null}var bp=[],ya=-1;function Qs(i){return{current:i}}function at(i){0>ya||(i.current=bp[ya],bp[ya]=null,ya--)}function nt(i,a){ya++,bp[ya]=i.current,i.current=a}var Js={},sn=Qs(Js),En=Qs(!1),no=Js;function va(i,a){var c=i.type.contextTypes;if(!c)return Js;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in c)y[x]=a[x];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Tn(i){return i=i.childContextTypes,i!=null}function pd(){at(En),at(sn)}function Hv(i,a,c){if(sn.current!==Js)throw Error(t(168));nt(sn,a),nt(En,c)}function qv(i,a,c){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return c;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(t(108,Q(i)||"Unknown",y));return pe({},c,m)}function md(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Js,no=sn.current,nt(sn,i),nt(En,En.current),!0}function Kv(i,a,c){var m=i.stateNode;if(!m)throw Error(t(169));c?(i=qv(i,a,no),m.__reactInternalMemoizedMergedChildContext=i,at(En),at(sn),nt(sn,i)):at(En),nt(En,c)}var ps=null,gd=!1,Ep=!1;function Gv(i){ps===null?ps=[i]:ps.push(i)}function JA(i){gd=!0,Gv(i)}function Ys(){if(!Ep&&ps!==null){Ep=!0;var i=0,a=ze;try{var c=ps;for(ze=1;i<c.length;i++){var m=c[i];do m=m(!0);while(m!==null)}ps=null,gd=!1}catch(y){throw ps!==null&&(ps=ps.slice(i+1)),Yo(Ki,Ys),y}finally{ze=a,Ep=!1}}return null}var _a=[],wa=0,yd=null,vd=0,Yn=[],Xn=0,ro=null,ms=1,gs="";function so(i,a){_a[wa++]=vd,_a[wa++]=yd,yd=i,vd=a}function Qv(i,a,c){Yn[Xn++]=ms,Yn[Xn++]=gs,Yn[Xn++]=ro,ro=i;var m=ms;i=gs;var y=32-mn(m)-1;m&=~(1<<y),c+=1;var x=32-mn(a)+y;if(30<x){var k=y-y%5;x=(m&(1<<k)-1).toString(32),m>>=k,y-=k,ms=1<<32-mn(a)+y|c<<y|m,gs=x+i}else ms=1<<x|c<<y|m,gs=i}function Tp(i){i.return!==null&&(so(i,1),Qv(i,1,0))}function Sp(i){for(;i===yd;)yd=_a[--wa],_a[wa]=null,vd=_a[--wa],_a[wa]=null;for(;i===ro;)ro=Yn[--Xn],Yn[Xn]=null,gs=Yn[--Xn],Yn[Xn]=null,ms=Yn[--Xn],Yn[Xn]=null}var $n=null,Fn=null,ut=!1,wr=null;function Jv(i,a){var c=nr(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Yv(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,$n=i,Fn=Gs(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,$n=i,Fn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=ro!==null?{id:ms,overflow:gs}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=nr(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,$n=i,Fn=null,!0):!1;default:return!1}}function kp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Cp(i){if(ut){var a=Fn;if(a){var c=a;if(!Yv(i,a)){if(kp(i))throw Error(t(418));a=Gs(c.nextSibling);var m=$n;a&&Yv(i,a)?Jv(m,c):(i.flags=i.flags&-4097|2,ut=!1,$n=i)}}else{if(kp(i))throw Error(t(418));i.flags=i.flags&-4097|2,ut=!1,$n=i}}}function Xv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;$n=i}function _d(i){if(i!==$n)return!1;if(!ut)return Xv(i),ut=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!vp(i.type,i.memoizedProps)),a&&(a=Fn)){if(kp(i))throw Zv(),Error(t(418));for(;a;)Jv(i,a),a=Gs(a.nextSibling)}if(Xv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Fn=Gs(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Fn=null}}else Fn=$n?Gs(i.stateNode.nextSibling):null;return!0}function Zv(){for(var i=Fn;i;)i=Gs(i.nextSibling)}function xa(){Fn=$n=null,ut=!1}function Pp(i){wr===null?wr=[i]:wr.push(i)}var YA=B.ReactCurrentBatchConfig;function cu(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var m=c.stateNode}if(!m)throw Error(t(147,i));var y=m,x=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(k){var L=y.refs;k===null?delete L[x]:L[x]=k},a._stringRef=x,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function wd(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function e_(i){var a=i._init;return a(i._payload)}function t_(i){function a(J,H){if(i){var Y=J.deletions;Y===null?(J.deletions=[H],J.flags|=16):Y.push(H)}}function c(J,H){if(!i)return null;for(;H!==null;)a(J,H),H=H.sibling;return null}function m(J,H){for(J=new Map;H!==null;)H.key!==null?J.set(H.key,H):J.set(H.index,H),H=H.sibling;return J}function y(J,H){return J=ii(J,H),J.index=0,J.sibling=null,J}function x(J,H,Y){return J.index=Y,i?(Y=J.alternate,Y!==null?(Y=Y.index,Y<H?(J.flags|=2,H):Y):(J.flags|=2,H)):(J.flags|=1048576,H)}function k(J){return i&&J.alternate===null&&(J.flags|=2),J}function L(J,H,Y,ce){return H===null||H.tag!==6?(H=_m(Y,J.mode,ce),H.return=J,H):(H=y(H,Y),H.return=J,H)}function z(J,H,Y,ce){var Te=Y.type;return Te===I?oe(J,H,Y.props.children,ce,Y.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ne&&e_(Te)===H.type)?(ce=y(H,Y.props),ce.ref=cu(J,H,Y),ce.return=J,ce):(ce=Wd(Y.type,Y.key,Y.props,null,J.mode,ce),ce.ref=cu(J,H,Y),ce.return=J,ce)}function X(J,H,Y,ce){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=wm(Y,J.mode,ce),H.return=J,H):(H=y(H,Y.children||[]),H.return=J,H)}function oe(J,H,Y,ce,Te){return H===null||H.tag!==7?(H=fo(Y,J.mode,ce,Te),H.return=J,H):(H=y(H,Y),H.return=J,H)}function ue(J,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=_m(""+H,J.mode,Y),H.return=J,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case U:return Y=Wd(H.type,H.key,H.props,null,J.mode,Y),Y.ref=cu(J,null,H),Y.return=J,Y;case V:return H=wm(H,J.mode,Y),H.return=J,H;case Ne:var ce=H._init;return ue(J,ce(H._payload),Y)}if(ss(H)||me(H))return H=fo(H,J.mode,Y,null),H.return=J,H;wd(J,H)}return null}function se(J,H,Y,ce){var Te=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Te!==null?null:L(J,H,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case U:return Y.key===Te?z(J,H,Y,ce):null;case V:return Y.key===Te?X(J,H,Y,ce):null;case Ne:return Te=Y._init,se(J,H,Te(Y._payload),ce)}if(ss(Y)||me(Y))return Te!==null?null:oe(J,H,Y,ce,null);wd(J,Y)}return null}function ye(J,H,Y,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return J=J.get(Y)||null,L(H,J,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case U:return J=J.get(ce.key===null?Y:ce.key)||null,z(H,J,ce,Te);case V:return J=J.get(ce.key===null?Y:ce.key)||null,X(H,J,ce,Te);case Ne:var ke=ce._init;return ye(J,H,Y,ke(ce._payload),Te)}if(ss(ce)||me(ce))return J=J.get(Y)||null,oe(H,J,ce,Te,null);wd(H,ce)}return null}function we(J,H,Y,ce){for(var Te=null,ke=null,Ce=H,je=H=0,zt=null;Ce!==null&&je<Y.length;je++){Ce.index>je?(zt=Ce,Ce=null):zt=Ce.sibling;var Qe=se(J,Ce,Y[je],ce);if(Qe===null){Ce===null&&(Ce=zt);break}i&&Ce&&Qe.alternate===null&&a(J,Ce),H=x(Qe,H,je),ke===null?Te=Qe:ke.sibling=Qe,ke=Qe,Ce=zt}if(je===Y.length)return c(J,Ce),ut&&so(J,je),Te;if(Ce===null){for(;je<Y.length;je++)Ce=ue(J,Y[je],ce),Ce!==null&&(H=x(Ce,H,je),ke===null?Te=Ce:ke.sibling=Ce,ke=Ce);return ut&&so(J,je),Te}for(Ce=m(J,Ce);je<Y.length;je++)zt=ye(Ce,J,je,Y[je],ce),zt!==null&&(i&&zt.alternate!==null&&Ce.delete(zt.key===null?je:zt.key),H=x(zt,H,je),ke===null?Te=zt:ke.sibling=zt,ke=zt);return i&&Ce.forEach(function(oi){return a(J,oi)}),ut&&so(J,je),Te}function be(J,H,Y,ce){var Te=me(Y);if(typeof Te!="function")throw Error(t(150));if(Y=Te.call(Y),Y==null)throw Error(t(151));for(var ke=Te=null,Ce=H,je=H=0,zt=null,Qe=Y.next();Ce!==null&&!Qe.done;je++,Qe=Y.next()){Ce.index>je?(zt=Ce,Ce=null):zt=Ce.sibling;var oi=se(J,Ce,Qe.value,ce);if(oi===null){Ce===null&&(Ce=zt);break}i&&Ce&&oi.alternate===null&&a(J,Ce),H=x(oi,H,je),ke===null?Te=oi:ke.sibling=oi,ke=oi,Ce=zt}if(Qe.done)return c(J,Ce),ut&&so(J,je),Te;if(Ce===null){for(;!Qe.done;je++,Qe=Y.next())Qe=ue(J,Qe.value,ce),Qe!==null&&(H=x(Qe,H,je),ke===null?Te=Qe:ke.sibling=Qe,ke=Qe);return ut&&so(J,je),Te}for(Ce=m(J,Ce);!Qe.done;je++,Qe=Y.next())Qe=ye(Ce,J,je,Qe.value,ce),Qe!==null&&(i&&Qe.alternate!==null&&Ce.delete(Qe.key===null?je:Qe.key),H=x(Qe,H,je),ke===null?Te=Qe:ke.sibling=Qe,ke=Qe);return i&&Ce.forEach(function(I1){return a(J,I1)}),ut&&so(J,je),Te}function bt(J,H,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case U:e:{for(var Te=Y.key,ke=H;ke!==null;){if(ke.key===Te){if(Te=Y.type,Te===I){if(ke.tag===7){c(J,ke.sibling),H=y(ke,Y.props.children),H.return=J,J=H;break e}}else if(ke.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ne&&e_(Te)===ke.type){c(J,ke.sibling),H=y(ke,Y.props),H.ref=cu(J,ke,Y),H.return=J,J=H;break e}c(J,ke);break}else a(J,ke);ke=ke.sibling}Y.type===I?(H=fo(Y.props.children,J.mode,ce,Y.key),H.return=J,J=H):(ce=Wd(Y.type,Y.key,Y.props,null,J.mode,ce),ce.ref=cu(J,H,Y),ce.return=J,J=ce)}return k(J);case V:e:{for(ke=Y.key;H!==null;){if(H.key===ke)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){c(J,H.sibling),H=y(H,Y.children||[]),H.return=J,J=H;break e}else{c(J,H);break}else a(J,H);H=H.sibling}H=wm(Y,J.mode,ce),H.return=J,J=H}return k(J);case Ne:return ke=Y._init,bt(J,H,ke(Y._payload),ce)}if(ss(Y))return we(J,H,Y,ce);if(me(Y))return be(J,H,Y,ce);wd(J,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(c(J,H.sibling),H=y(H,Y),H.return=J,J=H):(c(J,H),H=_m(Y,J.mode,ce),H.return=J,J=H),k(J)):c(J,H)}return bt}var ba=t_(!0),n_=t_(!1),xd=Qs(null),bd=null,Ea=null,Ap=null;function Ip(){Ap=Ea=bd=null}function Rp(i){var a=xd.current;at(xd),i._currentValue=a}function Np(i,a,c){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===c)break;i=i.return}}function Ta(i,a){bd=i,Ap=Ea=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(Sn=!0),i.firstContext=null)}function Zn(i){var a=i._currentValue;if(Ap!==i)if(i={context:i,memoizedValue:a,next:null},Ea===null){if(bd===null)throw Error(t(308));Ea=i,bd.dependencies={lanes:0,firstContext:i}}else Ea=Ea.next=i;return a}var io=null;function jp(i){io===null?io=[i]:io.push(i)}function r_(i,a,c,m){var y=a.interleaved;return y===null?(c.next=c,jp(a)):(c.next=y.next,y.next=c),a.interleaved=c,ys(i,m)}function ys(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Xs=!1;function Dp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Zs(i,a,c){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,Ge&2){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,ys(i,c)}return y=m.interleaved,y===null?(a.next=a,jp(m)):(a.next=y.next,y.next=a),m.interleaved=a,ys(i,c)}function Ed(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,c|=m,a.lanes=c,Bs(i,c)}}function i_(i,a){var c=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?y=x=k:x=x.next=k,c=c.next}while(c!==null);x===null?y=x=a:x=x.next=a}else y=x=a;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:m.shared,effects:m.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function Td(i,a,c,m){var y=i.updateQueue;Xs=!1;var x=y.firstBaseUpdate,k=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var z=L,X=z.next;z.next=null,k===null?x=X:k.next=X,k=z;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,L=oe.lastBaseUpdate,L!==k&&(L===null?oe.firstBaseUpdate=X:L.next=X,oe.lastBaseUpdate=z))}if(x!==null){var ue=y.baseState;k=0,oe=X=z=null,L=x;do{var se=L.lane,ye=L.eventTime;if((m&se)===se){oe!==null&&(oe=oe.next={eventTime:ye,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var we=i,be=L;switch(se=a,ye=c,be.tag){case 1:if(we=be.payload,typeof we=="function"){ue=we.call(ye,ue,se);break e}ue=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,se=typeof we=="function"?we.call(ye,ue,se):we,se==null)break e;ue=pe({},ue,se);break e;case 2:Xs=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,se=y.effects,se===null?y.effects=[L]:se.push(L))}else ye={eventTime:ye,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},oe===null?(X=oe=ye,z=ue):oe=oe.next=ye,k|=se;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;se=L,L=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);if(oe===null&&(z=ue),y.baseState=z,y.firstBaseUpdate=X,y.lastBaseUpdate=oe,a=y.shared.interleaved,a!==null){y=a;do k|=y.lane,y=y.next;while(y!==a)}else x===null&&(y.shared.lanes=0);lo|=k,i.lanes=k,i.memoizedState=ue}}function o_(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],y=m.callback;if(y!==null){if(m.callback=null,m=c,typeof y!="function")throw Error(t(191,y));y.call(m)}}}var du={},$r=Qs(du),hu=Qs(du),fu=Qs(du);function oo(i){if(i===du)throw Error(t(174));return i}function Op(i,a){switch(nt(fu,a),nt(hu,i),nt($r,du),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Rt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Rt(a,i)}at($r),nt($r,a)}function Sa(){at($r),at(hu),at(fu)}function a_(i){oo(fu.current);var a=oo($r.current),c=Rt(a,i.type);a!==c&&(nt(hu,i),nt($r,c))}function Lp(i){hu.current===i&&(at($r),at(hu))}var ht=Qs(0);function Sd(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mp=[];function Vp(){for(var i=0;i<Mp.length;i++)Mp[i]._workInProgressVersionPrimary=null;Mp.length=0}var kd=B.ReactCurrentDispatcher,$p=B.ReactCurrentBatchConfig,ao=0,ft=null,jt=null,Ut=null,Cd=!1,pu=!1,mu=0,XA=0;function on(){throw Error(t(321))}function Fp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!_r(i[c],a[c]))return!1;return!0}function Up(i,a,c,m,y,x){if(ao=x,ft=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,kd.current=i===null||i.memoizedState===null?n1:r1,i=c(m,y),pu){x=0;do{if(pu=!1,mu=0,25<=x)throw Error(t(301));x+=1,Ut=jt=null,a.updateQueue=null,kd.current=s1,i=c(m,y)}while(pu)}if(kd.current=Id,a=jt!==null&&jt.next!==null,ao=0,Ut=jt=ft=null,Cd=!1,a)throw Error(t(300));return i}function Bp(){var i=mu!==0;return mu=0,i}function Fr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ft.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function er(){if(jt===null){var i=ft.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var a=Ut===null?ft.memoizedState:Ut.next;if(a!==null)Ut=a,jt=i;else{if(i===null)throw Error(t(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ut===null?ft.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function gu(i,a){return typeof a=="function"?a(i):a}function zp(i){var a=er(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var m=jt,y=m.baseQueue,x=c.pending;if(x!==null){if(y!==null){var k=y.next;y.next=x.next,x.next=k}m.baseQueue=y=x,c.pending=null}if(y!==null){x=y.next,m=m.baseState;var L=k=null,z=null,X=x;do{var oe=X.lane;if((ao&oe)===oe)z!==null&&(z=z.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),m=X.hasEagerState?X.eagerState:i(m,X.action);else{var ue={lane:oe,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};z===null?(L=z=ue,k=m):z=z.next=ue,ft.lanes|=oe,lo|=oe}X=X.next}while(X!==null&&X!==x);z===null?k=m:z.next=L,_r(m,a.memoizedState)||(Sn=!0),a.memoizedState=m,a.baseState=k,a.baseQueue=z,c.lastRenderedState=m}if(i=c.interleaved,i!==null){y=i;do x=y.lane,ft.lanes|=x,lo|=x,y=y.next;while(y!==i)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Wp(i){var a=er(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var m=c.dispatch,y=c.pending,x=a.memoizedState;if(y!==null){c.pending=null;var k=y=y.next;do x=i(x,k.action),k=k.next;while(k!==y);_r(x,a.memoizedState)||(Sn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),c.lastRenderedState=x}return[x,m]}function l_(){}function u_(i,a){var c=ft,m=er(),y=a(),x=!_r(m.memoizedState,y);if(x&&(m.memoizedState=y,Sn=!0),m=m.queue,Hp(h_.bind(null,c,m,i),[i]),m.getSnapshot!==a||x||Ut!==null&&Ut.memoizedState.tag&1){if(c.flags|=2048,yu(9,d_.bind(null,c,m,y,a),void 0,null),Bt===null)throw Error(t(349));ao&30||c_(c,a,y)}return y}function c_(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=ft.updateQueue,a===null?(a={lastEffect:null,stores:null},ft.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function d_(i,a,c,m){a.value=c,a.getSnapshot=m,f_(a)&&p_(i)}function h_(i,a,c){return c(function(){f_(a)&&p_(i)})}function f_(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!_r(i,c)}catch{return!0}}function p_(i){var a=ys(i,1);a!==null&&Tr(a,i,1,-1)}function m_(i){var a=Fr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:i},a.queue=i,i=i.dispatch=t1.bind(null,ft,i),[a.memoizedState,i]}function yu(i,a,c,m){return i={tag:i,create:a,destroy:c,deps:m,next:null},a=ft.updateQueue,a===null?(a={lastEffect:null,stores:null},ft.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(m=c.next,c.next=i,i.next=m,a.lastEffect=i)),i}function g_(){return er().memoizedState}function Pd(i,a,c,m){var y=Fr();ft.flags|=i,y.memoizedState=yu(1|a,c,void 0,m===void 0?null:m)}function Ad(i,a,c,m){var y=er();m=m===void 0?null:m;var x=void 0;if(jt!==null){var k=jt.memoizedState;if(x=k.destroy,m!==null&&Fp(m,k.deps)){y.memoizedState=yu(a,c,x,m);return}}ft.flags|=i,y.memoizedState=yu(1|a,c,x,m)}function y_(i,a){return Pd(8390656,8,i,a)}function Hp(i,a){return Ad(2048,8,i,a)}function v_(i,a){return Ad(4,2,i,a)}function __(i,a){return Ad(4,4,i,a)}function w_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function x_(i,a,c){return c=c!=null?c.concat([i]):null,Ad(4,4,w_.bind(null,a,i),c)}function qp(){}function b_(i,a){var c=er();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&Fp(a,m[1])?m[0]:(c.memoizedState=[i,a],i)}function E_(i,a){var c=er();a=a===void 0?null:a;var m=c.memoizedState;return m!==null&&a!==null&&Fp(a,m[1])?m[0]:(i=i(),c.memoizedState=[i,a],i)}function T_(i,a,c){return ao&21?(_r(c,a)||(c=Ji(),ft.lanes|=c,lo|=c,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,Sn=!0),i.memoizedState=c)}function ZA(i,a){var c=ze;ze=c!==0&&4>c?c:4,i(!0);var m=$p.transition;$p.transition={};try{i(!1),a()}finally{ze=c,$p.transition=m}}function S_(){return er().memoizedState}function e1(i,a,c){var m=ri(i);if(c={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null},k_(i))C_(a,c);else if(c=r_(i,a,c,m),c!==null){var y=vn();Tr(c,i,m,y),P_(c,a,m)}}function t1(i,a,c){var m=ri(i),y={lane:m,action:c,hasEagerState:!1,eagerState:null,next:null};if(k_(i))C_(a,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var k=a.lastRenderedState,L=x(k,c);if(y.hasEagerState=!0,y.eagerState=L,_r(L,k)){var z=a.interleaved;z===null?(y.next=y,jp(a)):(y.next=z.next,z.next=y),a.interleaved=y;return}}catch{}finally{}c=r_(i,a,y,m),c!==null&&(y=vn(),Tr(c,i,m,y),P_(c,a,m))}}function k_(i){var a=i.alternate;return i===ft||a!==null&&a===ft}function C_(i,a){pu=Cd=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function P_(i,a,c){if(c&4194240){var m=a.lanes;m&=i.pendingLanes,c|=m,a.lanes=c,Bs(i,c)}}var Id={readContext:Zn,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},n1={readContext:Zn,useCallback:function(i,a){return Fr().memoizedState=[i,a===void 0?null:a],i},useContext:Zn,useEffect:y_,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Pd(4194308,4,w_.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Pd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Pd(4,2,i,a)},useMemo:function(i,a){var c=Fr();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var m=Fr();return a=c!==void 0?c(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=e1.bind(null,ft,i),[m.memoizedState,i]},useRef:function(i){var a=Fr();return i={current:i},a.memoizedState=i},useState:m_,useDebugValue:qp,useDeferredValue:function(i){return Fr().memoizedState=i},useTransition:function(){var i=m_(!1),a=i[0];return i=ZA.bind(null,i[1]),Fr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var m=ft,y=Fr();if(ut){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),Bt===null)throw Error(t(349));ao&30||c_(m,a,c)}y.memoizedState=c;var x={value:c,getSnapshot:a};return y.queue=x,y_(h_.bind(null,m,x,i),[i]),m.flags|=2048,yu(9,d_.bind(null,m,x,c,a),void 0,null),c},useId:function(){var i=Fr(),a=Bt.identifierPrefix;if(ut){var c=gs,m=ms;c=(m&~(1<<32-mn(m)-1)).toString(32)+c,a=":"+a+"R"+c,c=mu++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=XA++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},r1={readContext:Zn,useCallback:b_,useContext:Zn,useEffect:Hp,useImperativeHandle:x_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:E_,useReducer:zp,useRef:g_,useState:function(){return zp(gu)},useDebugValue:qp,useDeferredValue:function(i){var a=er();return T_(a,jt.memoizedState,i)},useTransition:function(){var i=zp(gu)[0],a=er().memoizedState;return[i,a]},useMutableSource:l_,useSyncExternalStore:u_,useId:S_,unstable_isNewReconciler:!1},s1={readContext:Zn,useCallback:b_,useContext:Zn,useEffect:Hp,useImperativeHandle:x_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:E_,useReducer:Wp,useRef:g_,useState:function(){return Wp(gu)},useDebugValue:qp,useDeferredValue:function(i){var a=er();return jt===null?a.memoizedState=i:T_(a,jt.memoizedState,i)},useTransition:function(){var i=Wp(gu)[0],a=er().memoizedState;return[i,a]},useMutableSource:l_,useSyncExternalStore:u_,useId:S_,unstable_isNewReconciler:!1};function xr(i,a){if(i&&i.defaultProps){a=pe({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Kp(i,a,c,m){a=i.memoizedState,c=c(m,a),c=c==null?a:pe({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Rd={isMounted:function(i){return(i=i._reactInternals)?hr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var m=vn(),y=ri(i),x=vs(m,y);x.payload=a,c!=null&&(x.callback=c),a=Zs(i,x,y),a!==null&&(Tr(a,i,y,m),Ed(a,i,y))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var m=vn(),y=ri(i),x=vs(m,y);x.tag=1,x.payload=a,c!=null&&(x.callback=c),a=Zs(i,x,y),a!==null&&(Tr(a,i,y,m),Ed(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=vn(),m=ri(i),y=vs(c,m);y.tag=2,a!=null&&(y.callback=a),a=Zs(i,y,m),a!==null&&(Tr(a,i,m,c),Ed(a,i,m))}};function A_(i,a,c,m,y,x,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,x,k):a.prototype&&a.prototype.isPureReactComponent?!ru(c,m)||!ru(y,x):!0}function I_(i,a,c){var m=!1,y=Js,x=a.contextType;return typeof x=="object"&&x!==null?x=Zn(x):(y=Tn(a)?no:sn.current,m=a.contextTypes,x=(m=m!=null)?va(i,y):Js),a=new a(c,x),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Rd,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=x),a}function R_(i,a,c,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,m),a.state!==i&&Rd.enqueueReplaceState(a,a.state,null)}function Gp(i,a,c,m){var y=i.stateNode;y.props=c,y.state=i.memoizedState,y.refs={},Dp(i);var x=a.contextType;typeof x=="object"&&x!==null?y.context=Zn(x):(x=Tn(a)?no:sn.current,y.context=va(i,x)),y.state=i.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Kp(i,a,x,c),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Rd.enqueueReplaceState(y,y.state,null),Td(i,c,y,m),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function ka(i,a){try{var c="",m=a;do c+=ie(m),m=m.return;while(m);var y=c}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:a,stack:y,digest:null}}function Qp(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Jp(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var i1=typeof WeakMap=="function"?WeakMap:Map;function N_(i,a,c){c=vs(-1,c),c.tag=3,c.payload={element:null};var m=a.value;return c.callback=function(){Vd||(Vd=!0,dm=m),Jp(i,a)},c}function j_(i,a,c){c=vs(-1,c),c.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;c.payload=function(){return m(y)},c.callback=function(){Jp(i,a)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){Jp(i,a),typeof m!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),c}function D_(i,a,c){var m=i.pingCache;if(m===null){m=i.pingCache=new i1;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(c)||(y.add(c),i=_1.bind(null,i,a,c),a.then(i,i))}function O_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function L_(i,a,c,m,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=vs(-1,1),a.tag=2,Zs(c,a,1))),c.lanes|=1),i)}var o1=B.ReactCurrentOwner,Sn=!1;function yn(i,a,c,m){a.child=i===null?n_(a,null,c,m):ba(a,i.child,c,m)}function M_(i,a,c,m,y){c=c.render;var x=a.ref;return Ta(a,y),m=Up(i,a,c,m,x,y),c=Bp(),i!==null&&!Sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,_s(i,a,y)):(ut&&c&&Tp(a),a.flags|=1,yn(i,a,m,y),a.child)}function V_(i,a,c,m,y){if(i===null){var x=c.type;return typeof x=="function"&&!vm(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=x,$_(i,a,x,m,y)):(i=Wd(c.type,null,m,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(x=i.child,!(i.lanes&y)){var k=x.memoizedProps;if(c=c.compare,c=c!==null?c:ru,c(k,m)&&i.ref===a.ref)return _s(i,a,y)}return a.flags|=1,i=ii(x,m),i.ref=a.ref,i.return=a,a.child=i}function $_(i,a,c,m,y){if(i!==null){var x=i.memoizedProps;if(ru(x,m)&&i.ref===a.ref)if(Sn=!1,a.pendingProps=m=x,(i.lanes&y)!==0)i.flags&131072&&(Sn=!0);else return a.lanes=i.lanes,_s(i,a,y)}return Yp(i,a,c,m,y)}function F_(i,a,c){var m=a.pendingProps,y=m.children,x=i!==null?i.memoizedState:null;if(m.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Pa,Un),Un|=c;else{if(!(c&1073741824))return i=x!==null?x.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,nt(Pa,Un),Un|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=x!==null?x.baseLanes:c,nt(Pa,Un),Un|=m}else x!==null?(m=x.baseLanes|c,a.memoizedState=null):m=c,nt(Pa,Un),Un|=m;return yn(i,a,y,c),a.child}function U_(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Yp(i,a,c,m,y){var x=Tn(c)?no:sn.current;return x=va(a,x),Ta(a,y),c=Up(i,a,c,m,x,y),m=Bp(),i!==null&&!Sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,_s(i,a,y)):(ut&&m&&Tp(a),a.flags|=1,yn(i,a,c,y),a.child)}function B_(i,a,c,m,y){if(Tn(c)){var x=!0;md(a)}else x=!1;if(Ta(a,y),a.stateNode===null)jd(i,a),I_(a,c,m),Gp(a,c,m,y),m=!0;else if(i===null){var k=a.stateNode,L=a.memoizedProps;k.props=L;var z=k.context,X=c.contextType;typeof X=="object"&&X!==null?X=Zn(X):(X=Tn(c)?no:sn.current,X=va(a,X));var oe=c.getDerivedStateFromProps,ue=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==m||z!==X)&&R_(a,k,m,X),Xs=!1;var se=a.memoizedState;k.state=se,Td(a,m,k,y),z=a.memoizedState,L!==m||se!==z||En.current||Xs?(typeof oe=="function"&&(Kp(a,c,oe,m),z=a.memoizedState),(L=Xs||A_(a,c,L,m,se,z,X))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=z),k.props=m,k.state=z,k.context=X,m=L):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{k=a.stateNode,s_(i,a),L=a.memoizedProps,X=a.type===a.elementType?L:xr(a.type,L),k.props=X,ue=a.pendingProps,se=k.context,z=c.contextType,typeof z=="object"&&z!==null?z=Zn(z):(z=Tn(c)?no:sn.current,z=va(a,z));var ye=c.getDerivedStateFromProps;(oe=typeof ye=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==ue||se!==z)&&R_(a,k,m,z),Xs=!1,se=a.memoizedState,k.state=se,Td(a,m,k,y);var we=a.memoizedState;L!==ue||se!==we||En.current||Xs?(typeof ye=="function"&&(Kp(a,c,ye,m),we=a.memoizedState),(X=Xs||A_(a,c,X,m,se,we,z)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,we,z),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,we,z)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=we),k.props=m,k.state=we,k.context=z,m=X):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),m=!1)}return Xp(i,a,c,m,x,y)}function Xp(i,a,c,m,y,x){U_(i,a);var k=(a.flags&128)!==0;if(!m&&!k)return y&&Kv(a,c,!1),_s(i,a,x);m=a.stateNode,o1.current=a;var L=k&&typeof c.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&k?(a.child=ba(a,i.child,null,x),a.child=ba(a,null,L,x)):yn(i,a,L,x),a.memoizedState=m.state,y&&Kv(a,c,!0),a.child}function z_(i){var a=i.stateNode;a.pendingContext?Hv(i,a.pendingContext,a.pendingContext!==a.context):a.context&&Hv(i,a.context,!1),Op(i,a.containerInfo)}function W_(i,a,c,m,y){return xa(),Pp(y),a.flags|=256,yn(i,a,c,m),a.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function em(i){return{baseLanes:i,cachePool:null,transitions:null}}function H_(i,a,c){var m=a.pendingProps,y=ht.current,x=!1,k=(a.flags&128)!==0,L;if((L=k)||(L=i!==null&&i.memoizedState===null?!1:(y&2)!==0),L?(x=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),nt(ht,y&1),i===null)return Cp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(k=m.children,i=m.fallback,x?(m=a.mode,x=a.child,k={mode:"hidden",children:k},!(m&1)&&x!==null?(x.childLanes=0,x.pendingProps=k):x=Hd(k,m,0,null),i=fo(i,m,c,null),x.return=a,i.return=a,x.sibling=i,a.child=x,a.child.memoizedState=em(c),a.memoizedState=Zp,i):tm(a,k));if(y=i.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return a1(i,a,k,m,L,y,c);if(x){x=m.fallback,k=a.mode,y=i.child,L=y.sibling;var z={mode:"hidden",children:m.children};return!(k&1)&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=z,a.deletions=null):(m=ii(y,z),m.subtreeFlags=y.subtreeFlags&14680064),L!==null?x=ii(L,x):(x=fo(x,k,c,null),x.flags|=2),x.return=a,m.return=a,m.sibling=x,a.child=m,m=x,x=a.child,k=i.child.memoizedState,k=k===null?em(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},x.memoizedState=k,x.childLanes=i.childLanes&~c,a.memoizedState=Zp,m}return x=i.child,i=x.sibling,m=ii(x,{mode:"visible",children:m.children}),!(a.mode&1)&&(m.lanes=c),m.return=a,m.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=m,a.memoizedState=null,m}function tm(i,a){return a=Hd({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Nd(i,a,c,m){return m!==null&&Pp(m),ba(a,i.child,null,c),i=tm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function a1(i,a,c,m,y,x,k){if(c)return a.flags&256?(a.flags&=-257,m=Qp(Error(t(422))),Nd(i,a,k,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(x=m.fallback,y=a.mode,m=Hd({mode:"visible",children:m.children},y,0,null),x=fo(x,y,k,null),x.flags|=2,m.return=a,x.return=a,m.sibling=x,a.child=m,a.mode&1&&ba(a,i.child,null,k),a.child.memoizedState=em(k),a.memoizedState=Zp,x);if(!(a.mode&1))return Nd(i,a,k,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var L=m.dgst;return m=L,x=Error(t(419)),m=Qp(x,m,void 0),Nd(i,a,k,m)}if(L=(k&i.childLanes)!==0,Sn||L){if(m=Bt,m!==null){switch(k&-k){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(m.suspendedLanes|k)?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,ys(i,y),Tr(m,i,y,-1))}return ym(),m=Qp(Error(t(421))),Nd(i,a,k,m)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=w1.bind(null,i),y._reactRetry=a,null):(i=x.treeContext,Fn=Gs(y.nextSibling),$n=a,ut=!0,wr=null,i!==null&&(Yn[Xn++]=ms,Yn[Xn++]=gs,Yn[Xn++]=ro,ms=i.id,gs=i.overflow,ro=a),a=tm(a,m.children),a.flags|=4096,a)}function q_(i,a,c){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),Np(i.return,a,c)}function nm(i,a,c,m,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=c,x.tailMode=y)}function K_(i,a,c){var m=a.pendingProps,y=m.revealOrder,x=m.tail;if(yn(i,a,m.children,c),m=ht.current,m&2)m=m&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&q_(i,c,a);else if(i.tag===19)q_(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(nt(ht,m),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(c=a.child,y=null;c!==null;)i=c.alternate,i!==null&&Sd(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),nm(a,!1,y,c,x);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Sd(i)===null){a.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}nm(a,!0,c,null,x);break;case"together":nm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jd(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function _s(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),lo|=a.lanes,!(c&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=ii(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=ii(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function l1(i,a,c){switch(a.tag){case 3:z_(a),xa();break;case 5:a_(a);break;case 1:Tn(a.type)&&md(a);break;case 4:Op(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;nt(xd,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(nt(ht,ht.current&1),a.flags|=128,null):c&a.child.childLanes?H_(i,a,c):(nt(ht,ht.current&1),i=_s(i,a,c),i!==null?i.sibling:null);nt(ht,ht.current&1);break;case 19:if(m=(c&a.childLanes)!==0,i.flags&128){if(m)return K_(i,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),nt(ht,ht.current),m)break;return null;case 22:case 23:return a.lanes=0,F_(i,a,c)}return _s(i,a,c)}var G_,rm,Q_,J_;G_=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},rm=function(){},Q_=function(i,a,c,m){var y=i.memoizedProps;if(y!==m){i=a.stateNode,oo($r.current);var x=null;switch(c){case"input":y=Dn(i,y),m=Dn(i,m),x=[];break;case"select":y=pe({},y,{value:void 0}),m=pe({},m,{value:void 0}),x=[];break;case"textarea":y=Nl(i,y),m=Nl(i,m),x=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=hd)}Vl(c,m);var k;c=null;for(X in y)if(!m.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var L=y[X];for(k in L)L.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?x||(x=[]):(x=x||[]).push(X,null));for(X in m){var z=m[X];if(L=y!=null?y[X]:void 0,m.hasOwnProperty(X)&&z!==L&&(z!=null||L!=null))if(X==="style")if(L){for(k in L)!L.hasOwnProperty(k)||z&&z.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in z)z.hasOwnProperty(k)&&L[k]!==z[k]&&(c||(c={}),c[k]=z[k])}else c||(x||(x=[]),x.push(X,c)),c=z;else X==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,L=L?L.__html:void 0,z!=null&&L!==z&&(x=x||[]).push(X,z)):X==="children"?typeof z!="string"&&typeof z!="number"||(x=x||[]).push(X,""+z):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(z!=null&&X==="onScroll"&&ot("scroll",i),x||L===z||(x=[])):(x=x||[]).push(X,z))}c&&(x=x||[]).push("style",c);var X=x;(a.updateQueue=X)&&(a.flags|=4)}},J_=function(i,a,c,m){c!==m&&(a.flags|=4)};function vu(i,a){if(!ut)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function an(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,m=0;if(a)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=c,a}function u1(i,a,c){var m=a.pendingProps;switch(Sp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(a),null;case 1:return Tn(a.type)&&pd(),an(a),null;case 3:return m=a.stateNode,Sa(),at(En),at(sn),Vp(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(_d(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,wr!==null&&(pm(wr),wr=null))),rm(i,a),an(a),null;case 5:Lp(a);var y=oo(fu.current);if(c=a.type,i!==null&&a.stateNode!=null)Q_(i,a,c,m,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return an(a),null}if(i=oo($r.current),_d(a)){m=a.stateNode,c=a.type;var x=a.memoizedProps;switch(m[Vr]=a,m[lu]=x,i=(a.mode&1)!==0,c){case"dialog":ot("cancel",m),ot("close",m);break;case"iframe":case"object":case"embed":ot("load",m);break;case"video":case"audio":for(y=0;y<iu.length;y++)ot(iu[y],m);break;case"source":ot("error",m);break;case"img":case"image":case"link":ot("error",m),ot("load",m);break;case"details":ot("toggle",m);break;case"input":ns(m,x),ot("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!x.multiple},ot("invalid",m);break;case"textarea":Bo(m,x),ot("invalid",m)}Vl(c,x),y=null;for(var k in x)if(x.hasOwnProperty(k)){var L=x[k];k==="children"?typeof L=="string"?m.textContent!==L&&(x.suppressHydrationWarning!==!0&&dd(m.textContent,L,i),y=["children",L]):typeof L=="number"&&m.textContent!==""+L&&(x.suppressHydrationWarning!==!0&&dd(m.textContent,L,i),y=["children",""+L]):s.hasOwnProperty(k)&&L!=null&&k==="onScroll"&&ot("scroll",m)}switch(c){case"input":We(m),Mc(m,x,!0);break;case"textarea":We(m),jl(m);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(m.onclick=hd)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{k=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=It(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=k.createElement(c,{is:m.is}):(i=k.createElement(c),c==="select"&&(k=i,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):i=k.createElementNS(i,c),i[Vr]=a,i[lu]=m,G_(i,a,!1,!1),a.stateNode=i;e:{switch(k=$l(c,m),c){case"dialog":ot("cancel",i),ot("close",i),y=m;break;case"iframe":case"object":case"embed":ot("load",i),y=m;break;case"video":case"audio":for(y=0;y<iu.length;y++)ot(iu[y],i);y=m;break;case"source":ot("error",i),y=m;break;case"img":case"image":case"link":ot("error",i),ot("load",i),y=m;break;case"details":ot("toggle",i),y=m;break;case"input":ns(i,m),y=Dn(i,m),ot("invalid",i);break;case"option":y=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},y=pe({},m,{value:void 0}),ot("invalid",i);break;case"textarea":Bo(i,m),y=Nl(i,m),ot("invalid",i);break;default:y=m}Vl(c,y),L=y;for(x in L)if(L.hasOwnProperty(x)){var z=L[x];x==="style"?Ll(i,z):x==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&Dl(i,z)):x==="children"?typeof z=="string"?(c!=="textarea"||z!=="")&&Ms(i,z):typeof z=="number"&&Ms(i,""+z):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?z!=null&&x==="onScroll"&&ot("scroll",i):z!=null&&$(i,x,z,k))}switch(c){case"input":We(i),Mc(i,m,!1);break;case"textarea":We(i),jl(i);break;case"option":m.value!=null&&i.setAttribute("value",""+te(m.value));break;case"select":i.multiple=!!m.multiple,x=m.value,x!=null?is(i,!!m.multiple,x,!1):m.defaultValue!=null&&is(i,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=hd)}switch(c){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return an(a),null;case 6:if(i&&a.stateNode!=null)J_(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(c=oo(fu.current),oo($r.current),_d(a)){if(m=a.stateNode,c=a.memoizedProps,m[Vr]=a,(x=m.nodeValue!==c)&&(i=$n,i!==null))switch(i.tag){case 3:dd(m.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&dd(m.nodeValue,c,(i.mode&1)!==0)}x&&(a.flags|=4)}else m=(c.nodeType===9?c:c.ownerDocument).createTextNode(m),m[Vr]=a,a.stateNode=m}return an(a),null;case 13:if(at(ht),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ut&&Fn!==null&&a.mode&1&&!(a.flags&128))Zv(),xa(),a.flags|=98560,x=!1;else if(x=_d(a),m!==null&&m.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Vr]=a}else xa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;an(a),x=!1}else wr!==null&&(pm(wr),wr=null),x=!0;if(!x)return a.flags&65536?a:null}return a.flags&128?(a.lanes=c,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,a.mode&1&&(i===null||ht.current&1?Dt===0&&(Dt=3):ym())),a.updateQueue!==null&&(a.flags|=4),an(a),null);case 4:return Sa(),rm(i,a),i===null&&ou(a.stateNode.containerInfo),an(a),null;case 10:return Rp(a.type._context),an(a),null;case 17:return Tn(a.type)&&pd(),an(a),null;case 19:if(at(ht),x=a.memoizedState,x===null)return an(a),null;if(m=(a.flags&128)!==0,k=x.rendering,k===null)if(m)vu(x,!1);else{if(Dt!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(k=Sd(i),k!==null){for(a.flags|=128,vu(x,!1),m=k.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=c,c=a.child;c!==null;)x=c,i=m,x.flags&=14680066,k=x.alternate,k===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=k.childLanes,x.lanes=k.lanes,x.child=k.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=k.memoizedProps,x.memoizedState=k.memoizedState,x.updateQueue=k.updateQueue,x.type=k.type,i=k.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return nt(ht,ht.current&1|2),a.child}i=i.sibling}x.tail!==null&&tt()>Aa&&(a.flags|=128,m=!0,vu(x,!1),a.lanes=4194304)}else{if(!m)if(i=Sd(k),i!==null){if(a.flags|=128,m=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),vu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!ut)return an(a),null}else 2*tt()-x.renderingStartTime>Aa&&c!==1073741824&&(a.flags|=128,m=!0,vu(x,!1),a.lanes=4194304);x.isBackwards?(k.sibling=a.child,a.child=k):(c=x.last,c!==null?c.sibling=k:a.child=k,x.last=k)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=tt(),a.sibling=null,c=ht.current,nt(ht,m?c&1|2:c&1),a):(an(a),null);case 22:case 23:return gm(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&a.mode&1?Un&1073741824&&(an(a),a.subtreeFlags&6&&(a.flags|=8192)):an(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function c1(i,a){switch(Sp(a),a.tag){case 1:return Tn(a.type)&&pd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Sa(),at(En),at(sn),Vp(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return Lp(a),null;case 13:if(at(ht),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));xa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return at(ht),null;case 4:return Sa(),null;case 10:return Rp(a.type._context),null;case 22:case 23:return gm(),null;case 24:return null;default:return null}}var Dd=!1,ln=!1,d1=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ca(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(m){gt(i,a,m)}else c.current=null}function sm(i,a,c){try{c()}catch(m){gt(i,a,m)}}var Y_=!1;function h1(i,a){if(gp=Hs,i=Av(),lp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var k=0,L=-1,z=-1,X=0,oe=0,ue=i,se=null;t:for(;;){for(var ye;ue!==c||y!==0&&ue.nodeType!==3||(L=k+y),ue!==x||m!==0&&ue.nodeType!==3||(z=k+m),ue.nodeType===3&&(k+=ue.nodeValue.length),(ye=ue.firstChild)!==null;)se=ue,ue=ye;for(;;){if(ue===i)break t;if(se===c&&++X===y&&(L=k),se===x&&++oe===m&&(z=k),(ye=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=ye}c=L===-1||z===-1?null:{start:L,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(yp={focusedElem:i,selectionRange:c},Hs=!1,_e=a;_e!==null;)if(a=_e,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,_e=i;else for(;_e!==null;){a=_e;try{var we=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var be=we.memoizedProps,bt=we.memoizedState,J=a.stateNode,H=J.getSnapshotBeforeUpdate(a.elementType===a.type?be:xr(a.type,be),bt);J.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){gt(a,a.return,ce)}if(i=a.sibling,i!==null){i.return=a.return,_e=i;break}_e=a.return}return we=Y_,Y_=!1,we}function _u(i,a,c){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&i)===i){var x=y.destroy;y.destroy=void 0,x!==void 0&&sm(a,c,x)}y=y.next}while(y!==m)}}function Od(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var m=c.create;c.destroy=m()}c=c.next}while(c!==a)}}function im(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function X_(i){var a=i.alternate;a!==null&&(i.alternate=null,X_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Vr],delete a[lu],delete a[xp],delete a[GA],delete a[QA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Z_(i){return i.tag===5||i.tag===3||i.tag===4}function ew(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Z_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function om(i,a,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=hd));else if(m!==4&&(i=i.child,i!==null))for(om(i,a,c),i=i.sibling;i!==null;)om(i,a,c),i=i.sibling}function am(i,a,c){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(am(i,a,c),i=i.sibling;i!==null;)am(i,a,c),i=i.sibling}var Qt=null,br=!1;function ei(i,a,c){for(c=c.child;c!==null;)tw(i,a,c),c=c.sibling}function tw(i,a,c){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Gi,c)}catch{}switch(c.tag){case 5:ln||Ca(c,a);case 6:var m=Qt,y=br;Qt=null,ei(i,a,c),Qt=m,br=y,Qt!==null&&(br?(i=Qt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Qt.removeChild(c.stateNode));break;case 18:Qt!==null&&(br?(i=Qt,c=c.stateNode,i.nodeType===8?wp(i.parentNode,c):i.nodeType===1&&wp(i,c),yr(i)):wp(Qt,c.stateNode));break;case 4:m=Qt,y=br,Qt=c.stateNode.containerInfo,br=!0,ei(i,a,c),Qt=m,br=y;break;case 0:case 11:case 14:case 15:if(!ln&&(m=c.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var x=y,k=x.destroy;x=x.tag,k!==void 0&&(x&2||x&4)&&sm(c,a,k),y=y.next}while(y!==m)}ei(i,a,c);break;case 1:if(!ln&&(Ca(c,a),m=c.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=c.memoizedProps,m.state=c.memoizedState,m.componentWillUnmount()}catch(L){gt(c,a,L)}ei(i,a,c);break;case 21:ei(i,a,c);break;case 22:c.mode&1?(ln=(m=ln)||c.memoizedState!==null,ei(i,a,c),ln=m):ei(i,a,c);break;default:ei(i,a,c)}}function nw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new d1),a.forEach(function(m){var y=x1.bind(null,i,m);c.has(m)||(c.add(m),m.then(y,y))})}}function Er(i,a){var c=a.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m];try{var x=i,k=a,L=k;e:for(;L!==null;){switch(L.tag){case 5:Qt=L.stateNode,br=!1;break e;case 3:Qt=L.stateNode.containerInfo,br=!0;break e;case 4:Qt=L.stateNode.containerInfo,br=!0;break e}L=L.return}if(Qt===null)throw Error(t(160));tw(x,k,y),Qt=null,br=!1;var z=y.alternate;z!==null&&(z.return=null),y.return=null}catch(X){gt(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)rw(a,i),a=a.sibling}function rw(i,a){var c=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Er(a,i),Ur(i),m&4){try{_u(3,i,i.return),Od(3,i)}catch(be){gt(i,i.return,be)}try{_u(5,i,i.return)}catch(be){gt(i,i.return,be)}}break;case 1:Er(a,i),Ur(i),m&512&&c!==null&&Ca(c,c.return);break;case 5:if(Er(a,i),Ur(i),m&512&&c!==null&&Ca(c,c.return),i.flags&32){var y=i.stateNode;try{Ms(y,"")}catch(be){gt(i,i.return,be)}}if(m&4&&(y=i.stateNode,y!=null)){var x=i.memoizedProps,k=c!==null?c.memoizedProps:x,L=i.type,z=i.updateQueue;if(i.updateQueue=null,z!==null)try{L==="input"&&x.type==="radio"&&x.name!=null&&$t(y,x),$l(L,k);var X=$l(L,x);for(k=0;k<z.length;k+=2){var oe=z[k],ue=z[k+1];oe==="style"?Ll(y,ue):oe==="dangerouslySetInnerHTML"?Dl(y,ue):oe==="children"?Ms(y,ue):$(y,oe,ue,X)}switch(L){case"input":rs(y,x);break;case"textarea":zo(y,x);break;case"select":var se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var ye=x.value;ye!=null?is(y,!!x.multiple,ye,!1):se!==!!x.multiple&&(x.defaultValue!=null?is(y,!!x.multiple,x.defaultValue,!0):is(y,!!x.multiple,x.multiple?[]:"",!1))}y[lu]=x}catch(be){gt(i,i.return,be)}}break;case 6:if(Er(a,i),Ur(i),m&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,x=i.memoizedProps;try{y.nodeValue=x}catch(be){gt(i,i.return,be)}}break;case 3:if(Er(a,i),Ur(i),m&4&&c!==null&&c.memoizedState.isDehydrated)try{yr(a.containerInfo)}catch(be){gt(i,i.return,be)}break;case 4:Er(a,i),Ur(i);break;case 13:Er(a,i),Ur(i),y=i.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(cm=tt())),m&4&&nw(i);break;case 22:if(oe=c!==null&&c.memoizedState!==null,i.mode&1?(ln=(X=ln)||oe,Er(a,i),ln=X):Er(a,i),Ur(i),m&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!oe&&i.mode&1)for(_e=i,oe=i.child;oe!==null;){for(ue=_e=oe;_e!==null;){switch(se=_e,ye=se.child,se.tag){case 0:case 11:case 14:case 15:_u(4,se,se.return);break;case 1:Ca(se,se.return);var we=se.stateNode;if(typeof we.componentWillUnmount=="function"){m=se,c=se.return;try{a=m,we.props=a.memoizedProps,we.state=a.memoizedState,we.componentWillUnmount()}catch(be){gt(m,c,be)}}break;case 5:Ca(se,se.return);break;case 22:if(se.memoizedState!==null){ow(ue);continue}}ye!==null?(ye.return=se,_e=ye):ow(ue)}oe=oe.sibling}e:for(oe=null,ue=i;;){if(ue.tag===5){if(oe===null){oe=ue;try{y=ue.stateNode,X?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(L=ue.stateNode,z=ue.memoizedProps.style,k=z!=null&&z.hasOwnProperty("display")?z.display:null,L.style.display=Ol("display",k))}catch(be){gt(i,i.return,be)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(be){gt(i,i.return,be)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Er(a,i),Ur(i),m&4&&nw(i);break;case 21:break;default:Er(a,i),Ur(i)}}function Ur(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(Z_(c)){var m=c;break e}c=c.return}throw Error(t(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Ms(y,""),m.flags&=-33);var x=ew(i);am(i,x,y);break;case 3:case 4:var k=m.stateNode.containerInfo,L=ew(i);om(i,L,k);break;default:throw Error(t(161))}}catch(z){gt(i,i.return,z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function f1(i,a,c){_e=i,sw(i)}function sw(i,a,c){for(var m=(i.mode&1)!==0;_e!==null;){var y=_e,x=y.child;if(y.tag===22&&m){var k=y.memoizedState!==null||Dd;if(!k){var L=y.alternate,z=L!==null&&L.memoizedState!==null||ln;L=Dd;var X=ln;if(Dd=k,(ln=z)&&!X)for(_e=y;_e!==null;)k=_e,z=k.child,k.tag===22&&k.memoizedState!==null?aw(y):z!==null?(z.return=k,_e=z):aw(y);for(;x!==null;)_e=x,sw(x),x=x.sibling;_e=y,Dd=L,ln=X}iw(i)}else y.subtreeFlags&8772&&x!==null?(x.return=y,_e=x):iw(i)}}function iw(i){for(;_e!==null;){var a=_e;if(a.flags&8772){var c=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:ln||Od(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!ln)if(c===null)m.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:xr(a.type,c.memoizedProps);m.componentDidUpdate(y,c.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&o_(a,x,m);break;case 3:var k=a.updateQueue;if(k!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}o_(a,k,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var z=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&c.focus();break;case"img":z.src&&(c.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var oe=X.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&yr(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||a.flags&512&&im(a)}catch(se){gt(a,a.return,se)}}if(a===i){_e=null;break}if(c=a.sibling,c!==null){c.return=a.return,_e=c;break}_e=a.return}}function ow(i){for(;_e!==null;){var a=_e;if(a===i){_e=null;break}var c=a.sibling;if(c!==null){c.return=a.return,_e=c;break}_e=a.return}}function aw(i){for(;_e!==null;){var a=_e;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Od(4,a)}catch(z){gt(a,c,z)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(z){gt(a,y,z)}}var x=a.return;try{im(a)}catch(z){gt(a,x,z)}break;case 5:var k=a.return;try{im(a)}catch(z){gt(a,k,z)}}}catch(z){gt(a,a.return,z)}if(a===i){_e=null;break}var L=a.sibling;if(L!==null){L.return=a.return,_e=L;break}_e=a.return}}var p1=Math.ceil,Ld=B.ReactCurrentDispatcher,lm=B.ReactCurrentOwner,tr=B.ReactCurrentBatchConfig,Ge=0,Bt=null,Ct=null,Jt=0,Un=0,Pa=Qs(0),Dt=0,wu=null,lo=0,Md=0,um=0,xu=null,kn=null,cm=0,Aa=1/0,ws=null,Vd=!1,dm=null,ti=null,$d=!1,ni=null,Fd=0,bu=0,hm=null,Ud=-1,Bd=0;function vn(){return Ge&6?tt():Ud!==-1?Ud:Ud=tt()}function ri(i){return i.mode&1?Ge&2&&Jt!==0?Jt&-Jt:YA.transition!==null?(Bd===0&&(Bd=Ji()),Bd):(i=ze,i!==0||(i=window.event,i=i===void 0?16:Jl(i.type)),i):1}function Tr(i,a,c,m){if(50<bu)throw bu=0,hm=null,Error(t(185));Us(i,c,m),(!(Ge&2)||i!==Bt)&&(i===Bt&&(!(Ge&2)&&(Md|=c),Dt===4&&si(i,Jt)),Cn(i,m),c===1&&Ge===0&&!(a.mode&1)&&(Aa=tt()+500,gd&&Ys()))}function Cn(i,a){var c=i.callbackNode;ls(i,a);var m=Qi(i,i===Bt?Jt:0);if(m===0)c!==null&&Hl(c),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(c!=null&&Hl(c),a===1)i.tag===0?JA(uw.bind(null,i)):Gv(uw.bind(null,i)),qA(function(){!(Ge&6)&&Ys()}),c=null;else{switch(zs(m)){case 1:c=Ki;break;case 4:c=Vs;break;case 16:c=Gn;break;case 536870912:c=Bc;break;default:c=Gn}c=yw(c,lw.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function lw(i,a){if(Ud=-1,Bd=0,Ge&6)throw Error(t(327));var c=i.callbackNode;if(Ia()&&i.callbackNode!==c)return null;var m=Qi(i,i===Bt?Jt:0);if(m===0)return null;if(m&30||m&i.expiredLanes||a)a=zd(i,m);else{a=m;var y=Ge;Ge|=2;var x=dw();(Bt!==i||Jt!==a)&&(ws=null,Aa=tt()+500,co(i,a));do try{y1();break}catch(L){cw(i,L)}while(!0);Ip(),Ld.current=x,Ge=y,Ct!==null?a=0:(Bt=null,Jt=0,a=Dt)}if(a!==0){if(a===2&&(y=Ln(i),y!==0&&(m=y,a=fm(i,y))),a===1)throw c=wu,co(i,0),si(i,m),Cn(i,tt()),c;if(a===6)si(i,m);else{if(y=i.current.alternate,!(m&30)&&!m1(y)&&(a=zd(i,m),a===2&&(x=Ln(i),x!==0&&(m=x,a=fm(i,x))),a===1))throw c=wu,co(i,0),si(i,m),Cn(i,tt()),c;switch(i.finishedWork=y,i.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:ho(i,kn,ws);break;case 3:if(si(i,m),(m&130023424)===m&&(a=cm+500-tt(),10<a)){if(Qi(i,0)!==0)break;if(y=i.suspendedLanes,(y&m)!==m){vn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=_p(ho.bind(null,i,kn,ws),a);break}ho(i,kn,ws);break;case 4:if(si(i,m),(m&4194240)===m)break;for(a=i.eventTimes,y=-1;0<m;){var k=31-mn(m);x=1<<k,k=a[k],k>y&&(y=k),m&=~x}if(m=y,m=tt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*p1(m/1960))-m,10<m){i.timeoutHandle=_p(ho.bind(null,i,kn,ws),m);break}ho(i,kn,ws);break;case 5:ho(i,kn,ws);break;default:throw Error(t(329))}}}return Cn(i,tt()),i.callbackNode===c?lw.bind(null,i):null}function fm(i,a){var c=xu;return i.current.memoizedState.isDehydrated&&(co(i,a).flags|=256),i=zd(i,a),i!==2&&(a=kn,kn=c,a!==null&&pm(a)),i}function pm(i){kn===null?kn=i:kn.push.apply(kn,i)}function m1(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var m=0;m<c.length;m++){var y=c[m],x=y.getSnapshot;y=y.value;try{if(!_r(x(),y))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function si(i,a){for(a&=~um,a&=~Md,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-mn(a),m=1<<c;i[c]=-1,a&=~m}}function uw(i){if(Ge&6)throw Error(t(327));Ia();var a=Qi(i,0);if(!(a&1))return Cn(i,tt()),null;var c=zd(i,a);if(i.tag!==0&&c===2){var m=Ln(i);m!==0&&(a=m,c=fm(i,m))}if(c===1)throw c=wu,co(i,0),si(i,a),Cn(i,tt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ho(i,kn,ws),Cn(i,tt()),null}function mm(i,a){var c=Ge;Ge|=1;try{return i(a)}finally{Ge=c,Ge===0&&(Aa=tt()+500,gd&&Ys())}}function uo(i){ni!==null&&ni.tag===0&&!(Ge&6)&&Ia();var a=Ge;Ge|=1;var c=tr.transition,m=ze;try{if(tr.transition=null,ze=1,i)return i()}finally{ze=m,tr.transition=c,Ge=a,!(Ge&6)&&Ys()}}function gm(){Un=Pa.current,at(Pa)}function co(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,HA(c)),Ct!==null)for(c=Ct.return;c!==null;){var m=c;switch(Sp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&pd();break;case 3:Sa(),at(En),at(sn),Vp();break;case 5:Lp(m);break;case 4:Sa();break;case 13:at(ht);break;case 19:at(ht);break;case 10:Rp(m.type._context);break;case 22:case 23:gm()}c=c.return}if(Bt=i,Ct=i=ii(i.current,null),Jt=Un=a,Dt=0,wu=null,um=Md=lo=0,kn=xu=null,io!==null){for(a=0;a<io.length;a++)if(c=io[a],m=c.interleaved,m!==null){c.interleaved=null;var y=m.next,x=c.pending;if(x!==null){var k=x.next;x.next=y,m.next=k}c.pending=m}io=null}return i}function cw(i,a){do{var c=Ct;try{if(Ip(),kd.current=Id,Cd){for(var m=ft.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}Cd=!1}if(ao=0,Ut=jt=ft=null,pu=!1,mu=0,lm.current=null,c===null||c.return===null){Dt=1,wu=a,Ct=null;break}e:{var x=i,k=c.return,L=c,z=a;if(a=Jt,L.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var X=z,oe=L,ue=oe.tag;if(!(oe.mode&1)&&(ue===0||ue===11||ue===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ye=O_(k);if(ye!==null){ye.flags&=-257,L_(ye,k,L,x,a),ye.mode&1&&D_(x,X,a),a=ye,z=X;var we=a.updateQueue;if(we===null){var be=new Set;be.add(z),a.updateQueue=be}else we.add(z);break e}else{if(!(a&1)){D_(x,X,a),ym();break e}z=Error(t(426))}}else if(ut&&L.mode&1){var bt=O_(k);if(bt!==null){!(bt.flags&65536)&&(bt.flags|=256),L_(bt,k,L,x,a),Pp(ka(z,L));break e}}x=z=ka(z,L),Dt!==4&&(Dt=2),xu===null?xu=[x]:xu.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var J=N_(x,z,a);i_(x,J);break e;case 1:L=z;var H=x.type,Y=x.stateNode;if(!(x.flags&128)&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ti===null||!ti.has(Y)))){x.flags|=65536,a&=-a,x.lanes|=a;var ce=j_(x,L,a);i_(x,ce);break e}}x=x.return}while(x!==null)}fw(c)}catch(Te){a=Te,Ct===c&&c!==null&&(Ct=c=c.return);continue}break}while(!0)}function dw(){var i=Ld.current;return Ld.current=Id,i===null?Id:i}function ym(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Bt===null||!(lo&268435455)&&!(Md&268435455)||si(Bt,Jt)}function zd(i,a){var c=Ge;Ge|=2;var m=dw();(Bt!==i||Jt!==a)&&(ws=null,co(i,a));do try{g1();break}catch(y){cw(i,y)}while(!0);if(Ip(),Ge=c,Ld.current=m,Ct!==null)throw Error(t(261));return Bt=null,Jt=0,Dt}function g1(){for(;Ct!==null;)hw(Ct)}function y1(){for(;Ct!==null&&!Fc();)hw(Ct)}function hw(i){var a=gw(i.alternate,i,Un);i.memoizedProps=i.pendingProps,a===null?fw(i):Ct=a,lm.current=null}function fw(i){var a=i;do{var c=a.alternate;if(i=a.return,a.flags&32768){if(c=c1(c,a),c!==null){c.flags&=32767,Ct=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Dt=6,Ct=null;return}}else if(c=u1(c,a,Un),c!==null){Ct=c;return}if(a=a.sibling,a!==null){Ct=a;return}Ct=a=i}while(a!==null);Dt===0&&(Dt=5)}function ho(i,a,c){var m=ze,y=tr.transition;try{tr.transition=null,ze=1,v1(i,a,c,m)}finally{tr.transition=y,ze=m}return null}function v1(i,a,c,m){do Ia();while(ni!==null);if(Ge&6)throw Error(t(327));c=i.finishedWork;var y=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=c.lanes|c.childLanes;if(et(i,x),i===Bt&&(Ct=Bt=null,Jt=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||$d||($d=!0,yw(Gn,function(){return Ia(),null})),x=(c.flags&15990)!==0,c.subtreeFlags&15990||x){x=tr.transition,tr.transition=null;var k=ze;ze=1;var L=Ge;Ge|=4,lm.current=null,h1(i,c),rw(c,i),VA(yp),Hs=!!gp,yp=gp=null,i.current=c,f1(c),ep(),Ge=L,ze=k,tr.transition=x}else i.current=c;if($d&&($d=!1,ni=i,Fd=y),x=i.pendingLanes,x===0&&(ti=null),zc(c.stateNode),Cn(i,tt()),a!==null)for(m=i.onRecoverableError,c=0;c<a.length;c++)y=a[c],m(y.value,{componentStack:y.stack,digest:y.digest});if(Vd)throw Vd=!1,i=dm,dm=null,i;return Fd&1&&i.tag!==0&&Ia(),x=i.pendingLanes,x&1?i===hm?bu++:(bu=0,hm=i):bu=0,Ys(),null}function Ia(){if(ni!==null){var i=zs(Fd),a=tr.transition,c=ze;try{if(tr.transition=null,ze=16>i?16:i,ni===null)var m=!1;else{if(i=ni,ni=null,Fd=0,Ge&6)throw Error(t(331));var y=Ge;for(Ge|=4,_e=i.current;_e!==null;){var x=_e,k=x.child;if(_e.flags&16){var L=x.deletions;if(L!==null){for(var z=0;z<L.length;z++){var X=L[z];for(_e=X;_e!==null;){var oe=_e;switch(oe.tag){case 0:case 11:case 15:_u(8,oe,x)}var ue=oe.child;if(ue!==null)ue.return=oe,_e=ue;else for(;_e!==null;){oe=_e;var se=oe.sibling,ye=oe.return;if(X_(oe),oe===X){_e=null;break}if(se!==null){se.return=ye,_e=se;break}_e=ye}}}var we=x.alternate;if(we!==null){var be=we.child;if(be!==null){we.child=null;do{var bt=be.sibling;be.sibling=null,be=bt}while(be!==null)}}_e=x}}if(x.subtreeFlags&2064&&k!==null)k.return=x,_e=k;else e:for(;_e!==null;){if(x=_e,x.flags&2048)switch(x.tag){case 0:case 11:case 15:_u(9,x,x.return)}var J=x.sibling;if(J!==null){J.return=x.return,_e=J;break e}_e=x.return}}var H=i.current;for(_e=H;_e!==null;){k=_e;var Y=k.child;if(k.subtreeFlags&2064&&Y!==null)Y.return=k,_e=Y;else e:for(k=H;_e!==null;){if(L=_e,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:Od(9,L)}}catch(Te){gt(L,L.return,Te)}if(L===k){_e=null;break e}var ce=L.sibling;if(ce!==null){ce.return=L.return,_e=ce;break e}_e=L.return}}if(Ge=y,Ys(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Gi,i)}catch{}m=!0}return m}finally{ze=c,tr.transition=a}}return!1}function pw(i,a,c){a=ka(c,a),a=N_(i,a,1),i=Zs(i,a,1),a=vn(),i!==null&&(Us(i,1,a),Cn(i,a))}function gt(i,a,c){if(i.tag===3)pw(i,i,c);else for(;a!==null;){if(a.tag===3){pw(a,i,c);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ti===null||!ti.has(m))){i=ka(c,i),i=j_(a,i,1),a=Zs(a,i,1),i=vn(),a!==null&&(Us(a,1,i),Cn(a,i));break}}a=a.return}}function _1(i,a,c){var m=i.pingCache;m!==null&&m.delete(a),a=vn(),i.pingedLanes|=i.suspendedLanes&c,Bt===i&&(Jt&c)===c&&(Dt===4||Dt===3&&(Jt&130023424)===Jt&&500>tt()-cm?co(i,0):um|=c),Cn(i,a)}function mw(i,a){a===0&&(i.mode&1?(a=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):a=1);var c=vn();i=ys(i,a),i!==null&&(Us(i,a,c),Cn(i,c))}function w1(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),mw(i,c)}function x1(i,a){var c=0;switch(i.tag){case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),mw(i,c)}var gw;gw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||En.current)Sn=!0;else{if(!(i.lanes&c)&&!(a.flags&128))return Sn=!1,l1(i,a,c);Sn=!!(i.flags&131072)}else Sn=!1,ut&&a.flags&1048576&&Qv(a,vd,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;jd(i,a),i=a.pendingProps;var y=va(a,sn.current);Ta(a,c),y=Up(null,a,m,i,y,c);var x=Bp();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Tn(m)?(x=!0,md(a)):x=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Dp(a),y.updater=Rd,a.stateNode=y,y._reactInternals=a,Gp(a,m,i,c),a=Xp(null,a,m,!0,x,c)):(a.tag=0,ut&&x&&Tp(a),yn(null,a,y,c),a=a.child),a;case 16:m=a.elementType;e:{switch(jd(i,a),i=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=E1(m),i=xr(m,i),y){case 0:a=Yp(null,a,m,i,c);break e;case 1:a=B_(null,a,m,i,c);break e;case 11:a=M_(null,a,m,i,c);break e;case 14:a=V_(null,a,m,xr(m.type,i),c);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:xr(m,y),Yp(i,a,m,y,c);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:xr(m,y),B_(i,a,m,y,c);case 3:e:{if(z_(a),i===null)throw Error(t(387));m=a.pendingProps,x=a.memoizedState,y=x.element,s_(i,a),Td(a,m,null,c);var k=a.memoizedState;if(m=k.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){y=ka(Error(t(423)),a),a=W_(i,a,m,c,y);break e}else if(m!==y){y=ka(Error(t(424)),a),a=W_(i,a,m,c,y);break e}else for(Fn=Gs(a.stateNode.containerInfo.firstChild),$n=a,ut=!0,wr=null,c=n_(a,null,m,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(xa(),m===y){a=_s(i,a,c);break e}yn(i,a,m,c)}a=a.child}return a;case 5:return a_(a),i===null&&Cp(a),m=a.type,y=a.pendingProps,x=i!==null?i.memoizedProps:null,k=y.children,vp(m,y)?k=null:x!==null&&vp(m,x)&&(a.flags|=32),U_(i,a),yn(i,a,k,c),a.child;case 6:return i===null&&Cp(a),null;case 13:return H_(i,a,c);case 4:return Op(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=ba(a,null,m,c):yn(i,a,m,c),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:xr(m,y),M_(i,a,m,y,c);case 7:return yn(i,a,a.pendingProps,c),a.child;case 8:return yn(i,a,a.pendingProps.children,c),a.child;case 12:return yn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,x=a.memoizedProps,k=y.value,nt(xd,m._currentValue),m._currentValue=k,x!==null)if(_r(x.value,k)){if(x.children===y.children&&!En.current){a=_s(i,a,c);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var L=x.dependencies;if(L!==null){k=x.child;for(var z=L.firstContext;z!==null;){if(z.context===m){if(x.tag===1){z=vs(-1,c&-c),z.tag=2;var X=x.updateQueue;if(X!==null){X=X.shared;var oe=X.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),X.pending=z}}x.lanes|=c,z=x.alternate,z!==null&&(z.lanes|=c),Np(x.return,c,a),L.lanes|=c;break}z=z.next}}else if(x.tag===10)k=x.type===a.type?null:x.child;else if(x.tag===18){if(k=x.return,k===null)throw Error(t(341));k.lanes|=c,L=k.alternate,L!==null&&(L.lanes|=c),Np(k,c,a),k=x.sibling}else k=x.child;if(k!==null)k.return=x;else for(k=x;k!==null;){if(k===a){k=null;break}if(x=k.sibling,x!==null){x.return=k.return,k=x;break}k=k.return}x=k}yn(i,a,y.children,c),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Ta(a,c),y=Zn(y),m=m(y),a.flags|=1,yn(i,a,m,c),a.child;case 14:return m=a.type,y=xr(m,a.pendingProps),y=xr(m.type,y),V_(i,a,m,y,c);case 15:return $_(i,a,a.type,a.pendingProps,c);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:xr(m,y),jd(i,a),a.tag=1,Tn(m)?(i=!0,md(a)):i=!1,Ta(a,c),I_(a,m,y),Gp(a,m,y,c),Xp(null,a,m,!0,i,c);case 19:return K_(i,a,c);case 22:return F_(i,a,c)}throw Error(t(156,a.tag))};function yw(i,a){return Yo(i,a)}function b1(i,a,c,m){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(i,a,c,m){return new b1(i,a,c,m)}function vm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function E1(i){if(typeof i=="function")return vm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===W)return 11;if(i===he)return 14}return 2}function ii(i,a){var c=i.alternate;return c===null?(c=nr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function Wd(i,a,c,m,y,x){var k=2;if(m=i,typeof i=="function")vm(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case I:return fo(c.children,y,x,a);case b:k=8,y|=8;break;case S:return i=nr(12,c,a,y|2),i.elementType=S,i.lanes=x,i;case O:return i=nr(13,c,a,y),i.elementType=O,i.lanes=x,i;case re:return i=nr(19,c,a,y),i.elementType=re,i.lanes=x,i;case xe:return Hd(c,y,x,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:k=10;break e;case M:k=9;break e;case W:k=11;break e;case he:k=14;break e;case Ne:k=16,m=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=nr(k,c,a,y),a.elementType=i,a.type=m,a.lanes=x,a}function fo(i,a,c,m){return i=nr(7,i,m,a),i.lanes=c,i}function Hd(i,a,c,m){return i=nr(22,i,m,a),i.elementType=xe,i.lanes=c,i.stateNode={isHidden:!1},i}function _m(i,a,c){return i=nr(6,i,null,a),i.lanes=c,i}function wm(i,a,c){return a=nr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function T1(i,a,c,m,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fs(0),this.expirationTimes=Fs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fs(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function xm(i,a,c,m,y,x,k,L,z){return i=new T1(i,a,c,L,z),a===1?(a=1,x===!0&&(a|=8)):a=0,x=nr(3,null,null,a),i.current=x,x.stateNode=i,x.memoizedState={element:m,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(x),i}function S1(i,a,c){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:m==null?null:""+m,children:i,containerInfo:a,implementation:c}}function vw(i){if(!i)return Js;i=i._reactInternals;e:{if(hr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Tn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Tn(c))return qv(i,c,a)}return a}function _w(i,a,c,m,y,x,k,L,z){return i=xm(c,m,!0,i,y,x,k,L,z),i.context=vw(null),c=i.current,m=vn(),y=ri(c),x=vs(m,y),x.callback=a??null,Zs(c,x,y),i.current.lanes=y,Us(i,y,m),Cn(i,m),i}function qd(i,a,c,m){var y=a.current,x=vn(),k=ri(y);return c=vw(c),a.context===null?a.context=c:a.pendingContext=c,a=vs(x,k),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=Zs(y,a,k),i!==null&&(Tr(i,y,k,x),Ed(i,y,k)),k}function Kd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ww(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function bm(i,a){ww(i,a),(i=i.alternate)&&ww(i,a)}function k1(){return null}var xw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Em(i){this._internalRoot=i}Gd.prototype.render=Em.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));qd(i,a,null,null)},Gd.prototype.unmount=Em.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;uo(function(){qd(null,i,null,null)}),a[fs]=null}};function Gd(i){this._internalRoot=i}Gd.prototype.unstable_scheduleHydration=function(i){if(i){var a=Gc();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Dr.length&&a!==0&&a<Dr[c].priority;c++);Dr.splice(c,0,i),c===0&&Yc(i)}};function Tm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Qd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function bw(){}function C1(i,a,c,m,y){if(y){if(typeof m=="function"){var x=m;m=function(){var X=Kd(k);x.call(X)}}var k=_w(a,m,i,0,null,!1,!1,"",bw);return i._reactRootContainer=k,i[fs]=k.current,ou(i.nodeType===8?i.parentNode:i),uo(),k}for(;y=i.lastChild;)i.removeChild(y);if(typeof m=="function"){var L=m;m=function(){var X=Kd(z);L.call(X)}}var z=xm(i,0,!1,null,null,!1,!1,"",bw);return i._reactRootContainer=z,i[fs]=z.current,ou(i.nodeType===8?i.parentNode:i),uo(function(){qd(a,z,c,m)}),z}function Jd(i,a,c,m,y){var x=c._reactRootContainer;if(x){var k=x;if(typeof y=="function"){var L=y;y=function(){var z=Kd(k);L.call(z)}}qd(a,k,i,y)}else k=C1(c,a,i,y,m);return Kd(k)}qc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=$s(a.pendingLanes);c!==0&&(Bs(a,c|1),Cn(a,tt()),!(Ge&6)&&(Aa=tt()+500,Ys()))}break;case 13:uo(function(){var m=ys(i,1);if(m!==null){var y=vn();Tr(m,i,1,y)}}),bm(i,1)}},ea=function(i){if(i.tag===13){var a=ys(i,134217728);if(a!==null){var c=vn();Tr(a,i,134217728,c)}bm(i,134217728)}},Kc=function(i){if(i.tag===13){var a=ri(i),c=ys(i,a);if(c!==null){var m=vn();Tr(c,i,a,m)}bm(i,a)}},Gc=function(){return ze},Qc=function(i,a){var c=ze;try{return ze=i,a()}finally{ze=c}},Ho=function(i,a,c){switch(a){case"input":if(rs(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var m=c[a];if(m!==i&&m.form===i.form){var y=fd(m);if(!y)throw Error(t(90));He(m),rs(m,y)}}}break;case"textarea":zo(i,c);break;case"select":a=c.value,a!=null&&is(i,!!c.multiple,a,!1)}},zi=mm,Ul=uo;var P1={usingClientEntryPoint:!1,Events:[uu,ga,fd,Nr,Fl,mm]},Eu={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},A1={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wl(i),i===null?null:i.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||k1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Gi=Yd.inject(A1),On=Yd}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P1,Pn.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tm(a))throw Error(t(200));return S1(i,a,null,c)},Pn.createRoot=function(i,a){if(!Tm(i))throw Error(t(299));var c=!1,m="",y=xw;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=xm(i,1,!1,null,null,c,!1,m,y),i[fs]=a.current,ou(i.nodeType===8?i.parentNode:i),new Em(a)},Pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wl(a),i=i===null?null:i.stateNode,i},Pn.flushSync=function(i){return uo(i)},Pn.hydrate=function(i,a,c){if(!Qd(a))throw Error(t(200));return Jd(null,i,a,!0,c)},Pn.hydrateRoot=function(i,a,c){if(!Tm(i))throw Error(t(405));var m=c!=null&&c.hydratedSources||null,y=!1,x="",k=xw;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),a=_w(a,null,i,1,c??null,y,!1,x,k),i[fs]=a.current,ou(i),m)for(i=0;i<m.length;i++)c=m[i],y=c._getVersion,y=y(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new Gd(a)},Pn.render=function(i,a,c){if(!Qd(a))throw Error(t(200));return Jd(null,i,a,!1,c)},Pn.unmountComponentAtNode=function(i){if(!Qd(i))throw Error(t(40));return i._reactRootContainer?(uo(function(){Jd(null,null,i,!1,function(){i._reactRootContainer=null,i[fs]=null})}),!0):!1},Pn.unstable_batchedUpdates=mm,Pn.unstable_renderSubtreeIntoContainer=function(i,a,c,m){if(!Qd(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Jd(i,a,c,!1,m)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var Iw;function pT(){if(Iw)return Cm.exports;Iw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Cm.exports=M1(),Cm.exports}var Rw;function V1(){if(Rw)return Xd;Rw=1;var n=pT();return Xd.createRoot=n.createRoot,Xd.hydrateRoot=n.hydrateRoot,Xd}var $1=V1();const F1=ff($1);var Su={},Nw;function U1(){if(Nw)return Su;Nw=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.parse=l,Su.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,E){const C=new o,j=_.length;if(j<2)return C;const A=(E==null?void 0:E.decode)||g;let D=0;do{const F=_.indexOf("=",D);if(F===-1)break;const $=_.indexOf(";",D),B=$===-1?j:$;if(F>B){D=_.lastIndexOf(";",F-1)+1;continue}const U=u(_,D,F),V=d(_,F,U),I=_.slice(U,V);if(C[I]===void 0){let b=u(_,F+1,B),S=d(_,B,b);const R=A(_.slice(b,S));C[I]=R}D=B+1}while(D<j);return C}function u(_,E,C){do{const j=_.charCodeAt(E);if(j!==32&&j!==9)return E}while(++E<C);return C}function d(_,E,C){for(;E>C;){const j=_.charCodeAt(--E);if(j!==32&&j!==9)return E+1}return C}function h(_,E,C){const j=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const A=j(E);if(!e.test(A))throw new TypeError(`argument val is invalid: ${E}`);let D=_+"="+A;if(!C)return D;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);D+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);D+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);D+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);D+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(D+="; HttpOnly"),C.secure&&(D+="; Secure"),C.partitioned&&(D+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return D}function g(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function v(_){return s.call(_)==="[object Date]"}return Su}U1();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jw="popstate";function B1(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return hg("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:ec(s)}return W1(e,t,null,n)}function dt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Cr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function z1(){return Math.random().toString(36).substring(2,10)}function Dw(n,e){return{usr:n.state,key:n.key,idx:e}}function hg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vl(e):e,state:t,key:e&&e.key||r||z1()}}function ec({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function W1(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let A=g(),D=A==null?null:A-h;h=A,d&&d({action:u,location:j.location,delta:D})}function _(A,D){u="PUSH";let F=hg(j.location,A,D);h=g()+1;let $=Dw(F,h),B=j.createHref(F);try{l.pushState($,"",B)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(B)}o&&d&&d({action:u,location:j.location,delta:1})}function E(A,D){u="REPLACE";let F=hg(j.location,A,D);h=g();let $=Dw(F,h),B=j.createHref(F);l.replaceState($,"",B),o&&d&&d({action:u,location:j.location,delta:0})}function C(A){let D=s.location.origin!=="null"?s.location.origin:s.location.href,F=typeof A=="string"?A:ec(A);return F=F.replace(/ $/,"%20"),dt(D,`No window.location.(origin|href) available to create URL for href: ${F}`),new URL(F,D)}let j={get action(){return u},get location(){return n(s,l)},listen(A){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(jw,v),d=A,()=>{s.removeEventListener(jw,v),d=null}},createHref(A){return e(s,A)},createURL:C,encodeLocation(A){let D=C(A);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:_,replace:E,go(A){return l.go(A)}};return j}function mT(n,e,t="/"){return H1(n,e,t,!1)}function H1(n,e,t,r){let s=typeof e=="string"?vl(e):e,o=Ti(s.pathname||"/",t);if(o==null)return null;let l=gT(n);q1(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=rI(o);u=tI(l[d],h,r)}return u}function gT(n,e=[],t=[],r=""){let s=(o,l,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(dt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let h=Ss([r,d.relativePath]),g=t.concat(d);o.children&&o.children.length>0&&(dt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),gT(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:Z1(h,o.index),routesMeta:g})};return n.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let d of yT(o.path))s(o,l,d)}),e}function yT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=yT(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function q1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:eI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var K1=/^:[\w-]+$/,G1=3,Q1=2,J1=1,Y1=10,X1=-2,Ow=n=>n==="*";function Z1(n,e){let t=n.split("/"),r=t.length;return t.some(Ow)&&(r+=X1),e&&(r+=Q1),t.filter(s=>!Ow(s)).reduce((s,o)=>s+(K1.test(o)?G1:o===""?J1:Y1),r)}function eI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function tI(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],h=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},g),_=d.route;if(!v&&h&&t&&!r[r.length-1].route.index&&(v=Dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Ss([o,v.pathname]),pathnameBase:aI(Ss([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Ss([o,v.pathnameBase]))}return l}function Dh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=nI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:v},_)=>{if(g==="*"){let C=u[_]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const E=u[_];return v&&!E?h[g]=void 0:h[g]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function nI(n,e=!1,t=!0){Cr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function rI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ti(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function sI(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?vl(n):n;return{pathname:t?t.startsWith("/")?t:iI(t,e):e,search:lI(r),hash:uI(s)}}function iI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Im(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function v0(n){let e=oI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function _0(n,e,t,r=!1){let s;typeof n=="string"?s=vl(n):(s={...n},dt(!s.pathname||!s.pathname.includes("?"),Im("?","pathname","search",s)),dt(!s.pathname||!s.pathname.includes("#"),Im("#","pathname","hash",s)),dt(!s.search||!s.search.includes("#"),Im("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}u=v>=0?e[v]:"/"}let d=sI(s,u),h=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||g)&&(d.pathname+="/"),d}var Ss=n=>n.join("/").replace(/\/\/+/g,"/"),aI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),lI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,uI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var vT=["POST","PUT","PATCH","DELETE"];new Set(vT);var dI=["GET",...vT];new Set(dI);var _l=P.createContext(null);_l.displayName="DataRouter";var pf=P.createContext(null);pf.displayName="DataRouterState";var _T=P.createContext({isTransitioning:!1});_T.displayName="ViewTransition";var hI=P.createContext(new Map);hI.displayName="Fetchers";var fI=P.createContext(null);fI.displayName="Await";var Ir=P.createContext(null);Ir.displayName="Navigation";var wc=P.createContext(null);wc.displayName="Location";var ur=P.createContext({outlet:null,matches:[],isDataRoute:!1});ur.displayName="Route";var w0=P.createContext(null);w0.displayName="RouteError";function pI(n,{relative:e}={}){dt(wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Ir),{hash:s,pathname:o,search:l}=xc(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Ss([t,o])),r.createHref({pathname:u,search:l,hash:s})}function wl(){return P.useContext(wc)!=null}function es(){return dt(wl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(wc).location}var wT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xT(n){P.useContext(Ir).static||P.useLayoutEffect(n)}function rn(){let{isDataRoute:n}=P.useContext(ur);return n?AI():mI()}function mI(){dt(wl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(_l),{basename:e,navigator:t}=P.useContext(Ir),{matches:r}=P.useContext(ur),{pathname:s}=es(),o=JSON.stringify(v0(r)),l=P.useRef(!1);return xT(()=>{l.current=!0}),P.useCallback((d,h={})=>{if(Cr(l.current,wT),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=_0(d,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ss([e,g.pathname])),(h.replace?t.replace:t.push)(g,h.state,h)},[e,t,o,s,n])}var gI=P.createContext(null);function yI(n){let e=P.useContext(ur).outlet;return e&&P.createElement(gI.Provider,{value:n},e)}function mf(){let{matches:n}=P.useContext(ur),e=n[n.length-1];return e?e.params:{}}function xc(n,{relative:e}={}){let{matches:t}=P.useContext(ur),{pathname:r}=es(),s=JSON.stringify(v0(t));return P.useMemo(()=>_0(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function vI(n,e){return bT(n,e)}function bT(n,e,t,r){var F;dt(wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=P.useContext(Ir),{matches:l}=P.useContext(ur),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let $=v&&v.path||"";ET(h,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let _=es(),E;if(e){let $=typeof e=="string"?vl(e):e;dt(g==="/"||((F=$.pathname)==null?void 0:F.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),E=$}else E=_;let C=E.pathname||"/",j=C;if(g!=="/"){let $=g.replace(/^\//,"").split("/");j="/"+C.replace(/^\//,"").split("/").slice($.length).join("/")}let A=!o&&t&&t.matches&&t.matches.length>0?t.matches:mT(n,{pathname:j});Cr(v||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Cr(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=EI(A&&A.map($=>Object.assign({},$,{params:Object.assign({},d,$.params),pathname:Ss([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Ss([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,t,r);return e&&D?P.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},D):D}function _I(){let n=PI(),e=cI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,l)}var wI=P.createElement(_I,null),xI=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(ur.Provider,{value:this.props.routeContext},P.createElement(w0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bI({routeContext:n,match:e,children:t}){let r=P.useContext(_l);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ur.Provider,{value:n},t)}function EI(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);dt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<s.length;d++){let h=s[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:g,errors:v}=t,_=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||_){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,h,g)=>{let v,_=!1,E=null,C=null;t&&(v=o&&h.route.id?o[h.route.id]:void 0,E=h.route.errorElement||wI,l&&(u<0&&g===0?(ET("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,C=null):u===g&&(_=!0,C=h.route.hydrateFallbackElement||null)));let j=e.concat(s.slice(0,g+1)),A=()=>{let D;return v?D=E:_?D=C:h.route.Component?D=P.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=d,P.createElement(bI,{match:h,routeContext:{outlet:d,matches:j,isDataRoute:t!=null},children:D})};return t&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?P.createElement(xI,{location:t.location,revalidation:t.revalidation,component:E,error:v,children:A(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):A()},null)}function x0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TI(n){let e=P.useContext(_l);return dt(e,x0(n)),e}function SI(n){let e=P.useContext(pf);return dt(e,x0(n)),e}function kI(n){let e=P.useContext(ur);return dt(e,x0(n)),e}function b0(n){let e=kI(n),t=e.matches[e.matches.length-1];return dt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function CI(){return b0("useRouteId")}function PI(){var r;let n=P.useContext(w0),e=SI("useRouteError"),t=b0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function AI(){let{router:n}=TI("useNavigate"),e=b0("useNavigate"),t=P.useRef(!1);return xT(()=>{t.current=!0}),P.useCallback(async(s,o={})=>{Cr(t.current,wT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Lw={};function ET(n,e,t){!e&&!Lw[n]&&(Lw[n]=!0,Cr(!1,t))}P.memo(II);function II({routes:n,future:e,state:t}){return bT(n,void 0,t,e)}function RI({to:n,replace:e,state:t,relative:r}){dt(wl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Ir);Cr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(ur),{pathname:l}=es(),u=rn(),d=_0(n,v0(o),l,r==="path"),h=JSON.stringify(d);return P.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:r})},[u,h,r,e,t]),null}function TT(n){return yI(n.context)}function Xe(n){dt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NI({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){dt(!wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=vl(t));let{pathname:d="/",search:h="",hash:g="",state:v=null,key:_="default"}=t,E=P.useMemo(()=>{let C=Ti(d,l);return C==null?null:{location:{pathname:C,search:h,hash:g,state:v,key:_},navigationType:r}},[l,d,h,g,v,_,r]);return Cr(E!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(Ir.Provider,{value:u},P.createElement(wc.Provider,{children:e,value:E}))}function jI({children:n,location:e}){return vI(fg(n),e)}function fg(n,e=[]){let t=[];return P.Children.forEach(n,(r,s)=>{if(!P.isValidElement(r))return;let o=[...e,s];if(r.type===P.Fragment){t.push.apply(t,fg(r.props.children,o));return}dt(r.type===Xe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=fg(r.props.children,o)),t.push(l)}),t}var vh="get",_h="application/x-www-form-urlencoded";function gf(n){return n!=null&&typeof n.tagName=="string"}function DI(n){return gf(n)&&n.tagName.toLowerCase()==="button"}function OI(n){return gf(n)&&n.tagName.toLowerCase()==="form"}function LI(n){return gf(n)&&n.tagName.toLowerCase()==="input"}function MI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function VI(n,e){return n.button===0&&(!e||e==="_self")&&!MI(n)}var Zd=null;function $I(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var FI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rm(n){return n!=null&&!FI.has(n)?(Cr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):n}function UI(n,e){let t,r,s,o,l;if(OI(n)){let u=n.getAttribute("action");r=u?Ti(u,e):null,t=n.getAttribute("method")||vh,s=Rm(n.getAttribute("enctype"))||_h,o=new FormData(n)}else if(DI(n)||LI(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?Ti(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||vh,s=Rm(n.getAttribute("formenctype"))||Rm(u.getAttribute("enctype"))||_h,o=new FormData(u,n),!$I()){let{name:h,type:g,value:v}=n;if(g==="image"){let _=h?`${h}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else h&&o.append(h,v)}}else{if(gf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=vh,r=null,s=_h,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function E0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function BI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function WI(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await BI(o,t);return l.links?l.links():[]}return[]}));return GI(r.flat(1).filter(zI).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Mw(n,e,t,r,s,o){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,u=(d,h)=>{var g;return t[h].pathname!==d.pathname||((g=t[h].route.path)==null?void 0:g.endsWith("*"))&&t[h].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,h)=>l(d,h)||u(d,h)):o==="data"?e.filter((d,h)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function HI(n,e){return qI(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function qI(n){return[...new Set(n)]}function KI(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function GI(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(KI(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function QI(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function JI(){let n=P.useContext(_l);return E0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function YI(){let n=P.useContext(pf);return E0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var T0=P.createContext(void 0);T0.displayName="FrameworkContext";function ST(){let n=P.useContext(T0);return E0(n,"You must render this element inside a <HydratedRouter> element"),n}function XI(n,e){let t=P.useContext(T0),[r,s]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:g,onTouchStart:v}=e,_=P.useRef(null);P.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let j=D=>{D.forEach(F=>{l(F.isIntersecting)})},A=new IntersectionObserver(j,{threshold:.5});return _.current&&A.observe(_.current),()=>{A.disconnect()}}},[n]),P.useEffect(()=>{if(r){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[r]);let E=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:ku(u,E),onBlur:ku(d,C),onMouseEnter:ku(h,E),onMouseLeave:ku(g,C),onTouchStart:ku(v,E)}]:[!1,_,{}]}function ku(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function ZI({page:n,...e}){let{router:t}=JI(),r=P.useMemo(()=>mT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(tR,{page:n,matches:r,...e}):null}function eR(n){let{manifest:e,routeModules:t}=ST(),[r,s]=P.useState([]);return P.useEffect(()=>{let o=!1;return WI(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function tR({page:n,matches:e,...t}){let r=es(),{manifest:s,routeModules:o}=ST(),{loaderData:l,matches:u}=YI(),d=P.useMemo(()=>Mw(n,e,u,s,r,"data"),[n,e,u,s,r]),h=P.useMemo(()=>Mw(n,e,u,s,r,"assets"),[n,e,u,s,r]),g=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,C=!1;if(e.forEach(A=>{var F;let D=s.routes[A.route.id];!D||!D.hasLoader||(!d.some($=>$.route.id===A.route.id)&&A.route.id in l&&((F=o[A.route.id])!=null&&F.shouldRevalidate)||D.hasClientLoader?C=!0:E.add(A.route.id))}),E.size===0)return[];let j=QI(n);return C&&E.size>0&&j.searchParams.set("_routes",e.filter(A=>E.has(A.route.id)).map(A=>A.route.id).join(",")),[j.pathname+j.search]},[l,r,s,d,e,n,o]),v=P.useMemo(()=>HI(h,s),[h,s]),_=eR(h);return P.createElement(P.Fragment,null,g.map(E=>P.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>P.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),_.map(({key:E,link:C})=>P.createElement("link",{key:E,...C})))}function nR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kT&&(window.__reactRouterVersion="7.1.5")}catch{}function rR({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=B1({window:t,v5Compat:!0}));let s=r.current,[o,l]=P.useState({action:s.action,location:s.location}),u=P.useCallback(d=>{P.startTransition(()=>l(d))},[l]);return P.useLayoutEffect(()=>s.listen(u),[s,u]),P.createElement(NI,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var CT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:h,preventScrollReset:g,viewTransition:v,..._},E){let{basename:C}=P.useContext(Ir),j=typeof h=="string"&&CT.test(h),A,D=!1;if(typeof h=="string"&&j&&(A=h,kT))try{let S=new URL(window.location.href),R=h.startsWith("//")?new URL(S.protocol+h):new URL(h),M=Ti(R.pathname,C);R.origin===S.origin&&M!=null?h=M+R.search+R.hash:D=!0}catch{Cr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=pI(h,{relative:s}),[$,B,U]=XI(r,_),V=aR(h,{replace:l,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:v});function I(S){e&&e(S),S.defaultPrevented||V(S)}let b=P.createElement("a",{..._,...U,href:A||F,onClick:D||o?e:I,ref:nR(E,B),target:d,"data-discover":!j&&t==="render"?"true":void 0});return $&&!j?P.createElement(P.Fragment,null,b,P.createElement(ZI,{page:F})):b});st.displayName="Link";var sR=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...h},g){let v=xc(l,{relative:h.relative}),_=es(),E=P.useContext(pf),{navigator:C,basename:j}=P.useContext(Ir),A=E!=null&&hR(v)&&u===!0,D=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,F=_.pathname,$=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(F=F.toLowerCase(),$=$?$.toLowerCase():null,D=D.toLowerCase()),$&&j&&($=Ti($,j)||$);const B=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let U=F===D||!s&&F.startsWith(D)&&F.charAt(B)==="/",V=$!=null&&($===D||!s&&$.startsWith(D)&&$.charAt(D.length)==="/"),I={isActive:U,isPending:V,isTransitioning:A},b=U?e:void 0,S;typeof r=="function"?S=r(I):S=[r,U?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(I):o;return P.createElement(st,{...h,"aria-current":b,className:S,ref:g,style:R,to:l,viewTransition:u},typeof d=="function"?d(I):d)});sR.displayName="NavLink";var iR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=vh,action:u,onSubmit:d,relative:h,preventScrollReset:g,viewTransition:v,..._},E)=>{let C=cR(),j=dR(u,{relative:h}),A=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&CT.test(u),F=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let B=$.nativeEvent.submitter,U=(B==null?void 0:B.getAttribute("formmethod"))||l;C(B||$.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:o,relative:h,preventScrollReset:g,viewTransition:v})};return P.createElement("form",{ref:E,method:A,action:j,onSubmit:r?d:F,..._,"data-discover":!D&&n==="render"?"true":void 0})});iR.displayName="Form";function oR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PT(n){let e=P.useContext(_l);return dt(e,oR(n)),e}function aR(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=rn(),d=es(),h=xc(n,{relative:o});return P.useCallback(g=>{if(VI(g,e)){g.preventDefault();let v=t!==void 0?t:ec(d)===ec(h);u(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,h,t,r,e,n,s,o,l])}var lR=0,uR=()=>`__${String(++lR)}__`;function cR(){let{router:n}=PT("useSubmit"),{basename:e}=P.useContext(Ir),t=CI();return P.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:h}=UI(r,e);if(s.navigate===!1){let g=s.fetcherKey||uR();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function dR(n,{relative:e}={}){let{basename:t}=P.useContext(Ir),r=P.useContext(ur);dt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...xc(n||".",{relative:e})},l=es();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ss([t,o.pathname])),ec(o)}function hR(n,e={}){let t=P.useContext(_T);dt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=PT("useViewTransitionState"),s=xc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Ti(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ti(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Dh(s.pathname,l)!=null||Dh(s.pathname,o)!=null}new TextEncoder;var fR=pT();const eh=ff(fR);function Oh(){return Oh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Oh.apply(null,arguments)}function S0(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function pg(n,e){return pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},pg(n,e)}function k0(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,pg(n,e)}function pR(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function mR(n,e){n.classList?n.classList.add(e):pR(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function Vw(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function gR(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=Vw(n.className,e):n.setAttribute("class",Vw(n.className&&n.className.baseVal||"",e))}const $w={disabled:!1},Lh=Lt.createContext(null);var AT=function(e){return e.scrollTop},Ru="unmounted",go="exited",yo="entering",Fa="entered",mg="exiting",Os=function(n){k0(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,d;return o.appearStatus=null,r.in?u?(d=go,o.appearStatus=yo):d=Fa:r.unmountOnExit||r.mountOnEnter?d=Ru:d=go,o.state={status:d},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Ru?{status:go}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==yo&&l!==Fa&&(o=yo):(l===yo||l===Fa)&&(o=mg)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===yo){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:eh.findDOMNode(this);l&&AT(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===go&&this.setState({status:Ru})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[eh.findDOMNode(this),u],h=d[0],g=d[1],v=this.getTimeouts(),_=u?v.appear:v.enter;if(!s&&!l||$w.disabled){this.safeSetState({status:Fa},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:yo},function(){o.props.onEntering(h,g),o.onTransitionEnd(_,function(){o.safeSetState({status:Fa},function(){o.props.onEntered(h,g)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:eh.findDOMNode(this);if(!o||$w.disabled){this.safeSetState({status:go},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:mg},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:go},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:eh.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=d[0],g=d[1];this.props.addEndListener(h,g)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Ru)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=S0(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Lt.createElement(Lh.Provider,{value:null},typeof l=="function"?l(s,u):Lt.cloneElement(Lt.Children.only(l),u))},e}(Lt.Component);Os.contextType=Lh;Os.propTypes={};function Ra(){}Os.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ra,onEntering:Ra,onEntered:Ra,onExit:Ra,onExiting:Ra,onExited:Ra};Os.UNMOUNTED=Ru;Os.EXITED=go;Os.ENTERING=yo;Os.ENTERED=Fa;Os.EXITING=mg;var yR=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return mR(e,r)})},Nm=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return gR(e,r)})},yf=function(n){k0(e,n);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=n.call.apply(n,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(u,d){var h=r.resolveArguments(u,d),g=h[0],v=h[1];r.removeClasses(g,"exit"),r.addClass(g,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(u,d)},r.onEntering=function(u,d){var h=r.resolveArguments(u,d),g=h[0],v=h[1],_=v?"appear":"enter";r.addClass(g,_,"active"),r.props.onEntering&&r.props.onEntering(u,d)},r.onEntered=function(u,d){var h=r.resolveArguments(u,d),g=h[0],v=h[1],_=v?"appear":"enter";r.removeClasses(g,_),r.addClass(g,_,"done"),r.props.onEntered&&r.props.onEntered(u,d)},r.onExit=function(u){var d=r.resolveArguments(u),h=d[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(u)},r.onExiting=function(u){var d=r.resolveArguments(u),h=d[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(u)},r.onExited=function(u){var d=r.resolveArguments(u),h=d[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(u)},r.resolveArguments=function(u,d){return r.props.nodeRef?[r.props.nodeRef.current,u]:[u,d]},r.getClassNames=function(u){var d=r.props.classNames,h=typeof d=="string",g=h&&d?d+"-":"",v=h?""+g+u:d[u],_=h?v+"-active":d[u+"Active"],E=h?v+"-done":d[u+"Done"];return{baseClassName:v,activeClassName:_,doneClassName:E}},r}var t=e.prototype;return t.addClass=function(s,o,l){var u=this.getClassNames(o)[l+"ClassName"],d=this.getClassNames("enter"),h=d.doneClassName;o==="appear"&&l==="done"&&h&&(u+=" "+h),l==="active"&&s&&AT(s),u&&(this.appliedClasses[o][l]=u,yR(s,u))},t.removeClasses=function(s,o){var l=this.appliedClasses[o],u=l.base,d=l.active,h=l.done;this.appliedClasses[o]={},u&&Nm(s,u),d&&Nm(s,d),h&&Nm(s,h)},t.render=function(){var s=this.props;s.classNames;var o=S0(s,["classNames"]);return Lt.createElement(Os,Oh({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Lt.Component);yf.defaultProps={classNames:""};yf.propTypes={};function vR(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function C0(n,e){var t=function(o){return e&&P.isValidElement(o)?e(o):o},r=Object.create(null);return n&&P.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function _R(n,e){n=n||{},e=e||{};function t(g){return g in e?e[g]:n[g]}var r=Object.create(null),s=[];for(var o in n)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var d in e){if(r[d])for(l=0;l<r[d].length;l++){var h=r[d][l];u[r[d][l]]=t(h)}u[d]=t(d)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function bo(n,e,t){return t[e]!=null?t[e]:n.props[e]}function wR(n,e){return C0(n.children,function(t){return P.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:bo(t,"appear",n),enter:bo(t,"enter",n),exit:bo(t,"exit",n)})})}function xR(n,e,t){var r=C0(n.children),s=_R(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(P.isValidElement(l)){var u=o in e,d=o in r,h=e[o],g=P.isValidElement(h)&&!h.props.in;d&&(!u||g)?s[o]=P.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:bo(l,"exit",n),enter:bo(l,"enter",n)}):!d&&u&&!g?s[o]=P.cloneElement(l,{in:!1}):d&&u&&P.isValidElement(h)&&(s[o]=P.cloneElement(l,{onExited:t.bind(null,l),in:h.props.in,exit:bo(l,"exit",n),enter:bo(l,"enter",n)}))}}),s}var bR=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},ER={component:"div",childFactory:function(e){return e}},vf=function(n){k0(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=o.handleExited.bind(vR(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,d=o.firstRender;return{children:d?wR(s,u):xR(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=C0(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var d=Oh({},u.children);return delete d[s.key],{children:d}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=S0(s,["component","childFactory"]),d=this.state.contextValue,h=bR(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?Lt.createElement(Lh.Provider,{value:d},h):Lt.createElement(Lh.Provider,{value:d},Lt.createElement(o,u,h))},e}(Lt.Component);vf.propTypes={};vf.defaultProps=ER;const TR="modulepreload",SR=function(n){return"/aussie-gut-pack/"+n},Fw={},il=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(t.map(d=>{if(d=SR(d),d in Fw)return;Fw[d]=!0;const h=d.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":TR,h||(v.as="script"),v.crossOrigin="",v.href=d,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((_,E)=>{v.addEventListener("load",_),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},kR=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class P0 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class CR extends P0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class PR extends P0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AR extends P0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(gg||(gg={}));var IR=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};class RR{constructor(e,{headers:t={},customFetch:r,region:s=gg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=kR(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return IR(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let u={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(u["x-region"]=d);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h}).catch(C=>{throw new CR(C)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new PR(g);if(!g.ok)throw new AR(g);let _=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),E;return _==="application/json"?E=yield g.json():_==="application/octet-stream"?E=yield g.blob():_==="text/event-stream"?E=g:_==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null}}catch(s){return{data:null,error:s}}})}}var Wt={},Na={},ja={},Da={},Oa={},La={},NR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ol=NR();const jR=ol.fetch,IT=ol.fetch.bind(ol),RT=ol.Headers,DR=ol.Request,OR=ol.Response,xl=Object.freeze(Object.defineProperty({__proto__:null,Headers:RT,Request:DR,Response:OR,default:IT,fetch:jR},Symbol.toStringTag,{value:"Module"})),LR=R1(xl);var th={},Uw;function NT(){if(Uw)return th;Uw=1,Object.defineProperty(th,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return th.default=n,th}var Bw;function jT(){if(Bw)return La;Bw=1;var n=La&&La.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(La,"__esModule",{value:!0});const e=n(LR),t=n(NT());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,v,_;let E=null,C=null,j=null,A=h.status,D=h.statusText;if(h.ok){if(this.method!=="HEAD"){const U=await h.text();U===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?C=U:C=JSON.parse(U))}const $=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),B=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");$&&B&&B.length>1&&(j=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,j=null,A=406,D="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const $=await h.text();try{E=JSON.parse($),Array.isArray(E)&&h.status===404&&(C=[],E=null,A=200,D="OK")}catch{h.status===404&&$===""?(A=204,D="No Content"):E={message:$}}if(E&&this.isMaybeSingle&&(!((_=E==null?void 0:E.details)===null||_===void 0)&&_.includes("0 rows"))&&(E=null,A=200,D="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:C,count:j,status:A,statusText:D}});return this.shouldThrowOnError||(d=d.catch(h=>{var g,v,_;return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(v=h==null?void 0:h.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(_=h==null?void 0:h.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return La.default=r,La}var zw;function DT(){if(zw)return Oa;zw=1;var n=Oa&&Oa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oa,"__esModule",{value:!0});const e=n(jT());class t extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:h="text"}={}){var g;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${_}"; options=${v};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Oa.default=t,Oa}var Ww;function A0(){if(Ww)return Da;Ww=1;var n=Da&&Da.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Da,"__esModule",{value:!0});const e=n(DT());class t extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Da.default=t,Da}var Hw;function OT(){if(Hw)return ja;Hw=1;var n=ja&&ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ja,"__esModule",{value:!0});const e=n(A0());class t{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let d=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const h=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const v=s.reduce((_,E)=>_.concat(Object.keys(E)),[]);if(v.length>0){const _=[...new Set(v)].map(E=>`"${E}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ja.default=t,ja}var Cu={},Pu={},qw;function MR(){return qw||(qw=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.version=void 0,Pu.version="0.0.0-automated"),Pu}var Kw;function VR(){if(Kw)return Cu;Kw=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.DEFAULT_HEADERS=void 0;const n=MR();return Cu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Cu}var Gw;function $R(){if(Gw)return Na;Gw=1;var n=Na&&Na.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Na,"__esModule",{value:!0});const e=n(OT()),t=n(A0()),r=VR();class s{constructor(l,{headers:u={},schema:d,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:h=!1,count:g}={}){let v;const _=new URL(`${this.url}/rpc/${l}`);let E;d||h?(v=d?"HEAD":"GET",Object.entries(u).filter(([j,A])=>A!==void 0).map(([j,A])=>[j,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([j,A])=>{_.searchParams.append(j,A)})):(v="POST",E=u);const C=Object.assign({},this.headers);return g&&(C.Prefer=`count=${g}`),new t.default({method:v,url:_,headers:C,schema:this.schemaName,body:E,fetch:this.fetch,allowEmpty:!1})}}return Na.default=s,Na}var Qw;function FR(){if(Qw)return Wt;Qw=1;var n=Wt&&Wt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PostgrestError=Wt.PostgrestBuilder=Wt.PostgrestTransformBuilder=Wt.PostgrestFilterBuilder=Wt.PostgrestQueryBuilder=Wt.PostgrestClient=void 0;const e=n($R());Wt.PostgrestClient=e.default;const t=n(OT());Wt.PostgrestQueryBuilder=t.default;const r=n(A0());Wt.PostgrestFilterBuilder=r.default;const s=n(DT());Wt.PostgrestTransformBuilder=s.default;const o=n(jT());Wt.PostgrestBuilder=o.default;const l=n(NT());return Wt.PostgrestError=l.default,Wt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},Wt}var UR=FR();const BR=ff(UR),{PostgrestClient:zR,PostgrestQueryBuilder:z9,PostgrestFilterBuilder:W9,PostgrestTransformBuilder:H9,PostgrestBuilder:q9,PostgrestError:K9}=BR,WR="2.11.2",HR={"X-Client-Info":`realtime-js/${WR}`},qR="1.0.0",LT=1e4,KR=1e3;var Xa;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Xa||(Xa={}));var Bn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bn||(Bn={}));var kr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(kr||(kr={}));var yg;(function(n){n.websocket="websocket"})(yg||(yg={}));var xo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(xo||(xo={}));class GR{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:d,payload:h}}}class MT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(rt||(rt={}));const Jw=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=QR(l,n,e,s),o),{})},QR=(n,e,t,r)=>{const s=e.find(u=>u.name===n),o=s==null?void 0:s.type,l=t[n];return o&&!r.includes(o)?VT(o,l):vg(l)},VT=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return ZR(e,t)}switch(n){case rt.bool:return JR(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return YR(e);case rt.json:case rt.jsonb:return XR(e);case rt.timestamp:return eN(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return vg(e);default:return vg(e)}},vg=n=>n,JR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},YR=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},XR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},ZR=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>VT(e,u))}return n},eN=n=>typeof n=="string"?n.replace(" ","T"):n,$T=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class jm{constructor(e,t,r={},s=LT){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Yw||(Yw={}));class Uu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(d=>{this.state=Uu.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Uu.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),u={},d={};return this.map(o,(h,g)=>{l[h]||(d[h]=g)}),this.map(l,(h,g)=>{const v=o[h];if(v){const _=g.map(A=>A.presence_ref),E=v.map(A=>A.presence_ref),C=g.filter(A=>E.indexOf(A.presence_ref)<0),j=v.filter(A=>_.indexOf(A.presence_ref)<0);C.length>0&&(u[h]=C),j.length>0&&(d[h]=j)}else u[h]=g}),this.syncDiff(o,{joins:u,leaves:d},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,d)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(d),g.length>0){const v=e[u].map(E=>E.presence_ref),_=g.filter(E=>v.indexOf(E.presence_ref)<0);e[u].unshift(..._)}r(u,g,d)}),this.map(l,(u,d)=>{let h=e[u];if(!h)return;const g=d.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,s(u,h,d),h.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Xw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Xw||(Xw={}));var Zw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Zw||(Zw={}));var xs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(xs||(xs={}));class I0{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new jm(this,kr.join,this.params,this.timeout),this.rejoinTimer=new MT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Uu(this),this.broadcastEndpointURL=$T(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(g=>e==null?void 0:e(xs.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(xs.CLOSED));const d={},h={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(xs.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(v=_==null?void 0:_.length)!==null&&v!==void 0?v:0,C=[];for(let j=0;j<E;j++){const A=_[j],{filter:{event:D,schema:F,table:$,filter:B}}=A,U=g&&g[j];if(U&&U.event===D&&U.schema===F&&U.table===$&&U.filter===B)C.push(Object.assign(Object.assign({},A),{id:U.id}));else{this.unsubscribe(),e==null||e(xs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(xs.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(xs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new jm(this,kr.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new jm(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:h,join:g}=kr;if(r&&[u,d,h,g].indexOf(l)>=0&&r!==this._joinRef())return;let _=this._onMessage(l,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(E=>{var C,j,A;return((C=E.filter)===null||C===void 0?void 0:C.event)==="*"||((A=(j=E.filter)===null||j===void 0?void 0:j.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(E=>E.callback(_,r)):(o=this.bindings[l])===null||o===void 0||o.filter(E=>{var C,j,A,D,F,$;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in E){const B=E.id,U=(C=E.filter)===null||C===void 0?void 0:C.event;return B&&((j=t.ids)===null||j===void 0?void 0:j.includes(B))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const B=(F=(D=E==null?void 0:E.filter)===null||D===void 0?void 0:D.event)===null||F===void 0?void 0:F.toLocaleLowerCase();return B==="*"||B===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===l}).map(E=>{if(typeof _=="object"&&"ids"in _){const C=_.data,{schema:j,table:A,commit_timestamp:D,type:F,errors:$}=C;_=Object.assign(Object.assign({},{schema:j,table:A,commit_timestamp:D,eventType:F,new:{},old:{},errors:$}),this._getPayloadRecords(C))}E.callback(_,r)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&I0.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kr.close,{},e)}_onError(e){this._on(kr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Jw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Jw(e.columns,e.old_record)),t}}const tN=()=>{},nN=typeof WebSocket<"u",rN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sN{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=HR,this.params={},this.timeout=LT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=tN,this.conn=null,this.sendBuffer=[],this.serializer=new GR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>il(async()=>{const{default:d}=await Promise.resolve().then(()=>xl);return{default:d}},void 0).then(({default:d})=>d(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${yg.websocket}`,this.httpEndpoint=$T(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,l)=>l(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new MT(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(nN){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new iN(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),il(async()=>{const{default:e}=await import("./browser-CntYF1t_.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qR}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Xa.connecting:return xo.Connecting;case Xa.open:return xo.Open;case Xa.closing:return xo.Closing;default:return xo.Closed}}isConnected(){return this.connectionState()===xo.Open}channel(e,t={config:{}}){const r=new I0(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(kr.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(KR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:o,ref:l}=t;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(kr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([rN],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class iN{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Xa.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let R0=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ht(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class oN extends R0{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _g extends R0{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var aN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};const FT=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},lN=()=>aN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield il(()=>Promise.resolve().then(()=>xl),void 0)).Response:Response}),wg=n=>{if(Array.isArray(n))return n.map(t=>wg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=wg(r)}),e};var Do=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};const Dm=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),uN=(n,e,t)=>Do(void 0,void 0,void 0,function*(){const r=yield lN();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new oN(Dm(s),n.status||500))}).catch(s=>{e(new _g(Dm(s),s))}):e(new _g(Dm(n),n))}),cN=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function bc(n,e,t,r,s,o){return Do(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,cN(e,r,s,o)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>uN(d,u,r))})})}function Mh(n,e,t,r){return Do(this,void 0,void 0,function*(){return bc(n,"GET",e,t,r)})}function di(n,e,t,r,s){return Do(this,void 0,void 0,function*(){return bc(n,"POST",e,r,s,t)})}function dN(n,e,t,r,s){return Do(this,void 0,void 0,function*(){return bc(n,"PUT",e,r,s,t)})}function hN(n,e,t,r){return Do(this,void 0,void 0,function*(){return bc(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function UT(n,e,t,r,s){return Do(this,void 0,void 0,function*(){return bc(n,"DELETE",e,r,s,t)})}var An=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};const fN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ex={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pN{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=FT(s)}uploadOrUpdate(e,t,r,s){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},ex),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(t),g=this._getFinalPath(h),v=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),_=yield v.json();return v.ok?{data:{path:h,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(Ht(o))return{data:null,error:o};throw o}})}upload(e,t,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let d;const h=Object.assign({upsert:ex.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",h.cacheControl)):(d=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:d,headers:g}),_=yield v.json();return v.ok?{data:{path:o,fullPath:_.Key},error:null}:{data:null,error:_}}catch(d){if(Ht(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=yield di(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new R0("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}update(e,t,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return An(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}copy(e,t,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield di(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return An(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield di(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return An(this,void 0,void 0,function*(){try{const s=yield di(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}download(e,t){return An(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Mh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Ht(u))return{data:null,error:u};throw u}})}info(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Mh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:wg(r),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}exists(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield hN(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ht(r)&&r instanceof _g){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&s.push(d);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return An(this,void 0,void 0,function*(){try{return{data:yield UT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}list(e,t,r){return An(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},fN),t),{prefix:e||""});return{data:yield di(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const mN="2.7.1",gN={"X-Client-Info":`storage-js/${mN}`};var Ma=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};class yN{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},gN),t),this.fetch=FT(r)}listBuckets(){return Ma(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ht(e))return{data:null,error:e};throw e}})}getBucket(e){return Ma(this,void 0,void 0,function*(){try{return{data:yield Mh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ma(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ma(this,void 0,void 0,function*(){try{return{data:yield dN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ma(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ma(this,void 0,void 0,function*(){try{return{data:yield UT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}}class vN extends yN{constructor(e,t={},r){super(e,t,r)}from(e){return new pN(this.url,this.headers,e,this.fetch)}}const _N="2.49.4";let Nu="";typeof Deno<"u"?Nu="deno":typeof document<"u"?Nu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nu="react-native":Nu="node";const wN={"X-Client-Info":`supabase-js-${Nu}/${_N}`},xN={headers:wN},bN={schema:"public"},EN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TN={};var SN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};const kN=n=>{let e;return n?e=n:typeof fetch>"u"?e=IT:e=fetch,(...t)=>e(...t)},CN=()=>typeof Headers>"u"?RT:Headers,PN=(n,e,t)=>{const r=kN(t),s=CN();return(o,l)=>SN(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:n;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var AN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};function IN(n){return n.replace(/\/$/,"")}function RN(n,e){const{db:t,auth:r,realtime:s,global:o}=n,{db:l,auth:u,realtime:d,global:h}=e,g={db:Object.assign(Object.assign({},l),t),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},h),o),accessToken:()=>AN(this,void 0,void 0,function*(){return""})};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}const BT="2.69.1",Ua=30*1e3,xg=3,Om=xg*Ua,NN="http://localhost:9999",jN="supabase.auth.token",DN={"X-Client-Info":`gotrue-js/${BT}`},bg="X-Supabase-Api-Version",zT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ON=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LN=6e5;class N0 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Me(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class MN extends N0{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function VN(n){return Me(n)&&n.name==="AuthApiError"}class WT extends N0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Oi extends N0{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class li extends Oi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $N(n){return Me(n)&&n.name==="AuthSessionMissingError"}class Lm extends Oi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nh extends Oi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class rh extends Oi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function FN(n){return Me(n)&&n.name==="AuthImplicitGrantRedirectError"}class tx extends Oi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eg extends Oi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Mm(n){return Me(n)&&n.name==="AuthRetryableFetchError"}class nx extends Oi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Bu extends Oi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const rx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sx=` 	
\r=`.split(""),UN=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<sx.length;e+=1)n[sx[e].charCodeAt(0)]=-2;for(let e=0;e<rx.length;e+=1)n[rx[e].charCodeAt(0)]=e;return n})();function HT(n,e,t){const r=UN[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function ix(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{WN(l,r,t)};for(let l=0;l<n.length;l+=1)HT(n.charCodeAt(l),s,o);return e.join("")}function BN(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function zN(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}BN(r,e)}}function WN(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function HN(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)HT(n.charCodeAt(s),t,r);return new Uint8Array(e)}function qN(n){const e=[];return zN(n,t=>e.push(t)),new Uint8Array(e)}function KN(n){return Math.round(Date.now()/1e3)+n}function GN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Br=()=>typeof window<"u"&&typeof document<"u",po={tested:!1,writable:!1},zu=()=>{if(!Br())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(po.tested)return po.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),po.tested=!0,po.writable=!0}catch{po.tested=!0,po.writable=!1}return po.writable};function QN(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const qT=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},JN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",KT=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},sh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ih=async(n,e)=>{await n.removeItem(e)};let GT=class QT{constructor(){this.promise=new QT.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};GT.promiseConstructor=Promise;function Vm(n){const e=n.split(".");if(e.length!==3)throw new Bu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!ON.test(e[r]))throw new Bu("JWT not in base64url format");return{header:JSON.parse(ix(e[0])),payload:JSON.parse(ix(e[1])),signature:HN(e[2]),raw:{header:e[0],payload:e[1]}}}async function YN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function XN(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function ZN(n){return("0"+n.toString(16)).substr(-2)}function e2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,ZN).join("")}async function t2(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function n2(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await t2(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Va(n,e,t=!1){const r=e2();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await KT(n,`${e}-code-verifier`,s);const o=await n2(r);return[o,r===o?"plain":"s256"]}const r2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function s2(n){const e=n.headers.get(bg);if(!e||!e.match(r2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function i2(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function o2(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var a2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const vo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),l2=[502,503,504];async function ox(n){var e;if(!JN(n))throw new Eg(vo(n),0);if(l2.includes(n.status))throw new Eg(vo(n),n.status);let t;try{t=await n.json()}catch(o){throw new WT(vo(o),o)}let r;const s=s2(n);if(s&&s.getTime()>=zT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new nx(vo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new li}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new nx(vo(t),n.status,t.weak_password.reasons);throw new MN(vo(t),n.status||500,r)}const u2=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Fe(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[bg]||(o[bg]=zT["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await c2(n,e,t+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function c2(n,e,t,r,s,o){const l=u2(e,r,s,o);let u;try{u=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new Eg(vo(d),0)}if(u.ok||await ox(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await ox(d)}}function ui(n){var e;let t=null;p2(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=KN(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ax(n){const e=ui(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function hi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function d2(n){return{data:n,error:null}}function h2(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=a2(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function f2(n){return n}function p2(n){return n.access_token&&n.refresh_token&&n.expires_in}var m2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class g2{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=qT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:hi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=m2(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:h2,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Me(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hi})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:f2});if(g.error)throw g.error;const v=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,E=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return E.length>0&&(E.forEach(C=>{const j=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);h[`${A}Page`]=j}),h.total=parseInt(_)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Me(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hi})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:hi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:hi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}}const y2={getItem:n=>zu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{zu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{zu()&&globalThis.localStorage.removeItem(n)}};function lx(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function v2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $a={debug:!!(globalThis&&zu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class JT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _2 extends JT{}async function w2(n,e,t){$a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$a.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){$a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{$a.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw $a.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new _2(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if($a.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}v2();const x2={url:NN,storageKey:jN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ux(n,e,t){return await t()}class tc{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tc.nextInstanceID,tc.nextInstanceID+=1,this.instanceID>0&&Br()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},x2),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new g2({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=qT(s.fetch),this.lock=s.lock||ux,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Br()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=w2:this.lock=ux,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:zu()?this.storage=y2:(this.memoryStorage={},this.storage=lx(this.memoryStorage)):(this.memoryStorage={},this.storage=lx(this.memoryStorage)),Br()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${BT}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=QN(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Br()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),FN(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Me(t)?{error:t}:{error:new WT("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ui}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:g,password:v,options:_}=e;let E=null,C=null;this.flowType==="pkce"&&([E,C]=await Va(this.storage,this.storageKey)),o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:v,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:E,code_challenge_method:C},xform:ui})}else if("phone"in e){const{phone:g,password:v,options:_}=e;o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:ui})}else throw new nh("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:u}=e;t=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ax})}else if("phone"in e){const{phone:o,password:l,options:u}=e;t=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ax})}else throw new nh("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Lm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await sh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:l}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ui});if(await ih(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Lm}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(Me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,u=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ui}),{data:d,error:h}=u;return h?{data:{user:null,session:null},error:h}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Lm}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:h})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:u,options:d}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Va(this.storage,this.storageKey));const{error:v}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:d}=e,{data:h,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new nh("You must provide either an email or phone number.")}catch(u){if(Me(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:ui});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:h,session:d},error:null}}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Va(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:d2})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new li;const{error:s}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Fe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await Fe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new nh("You must provide either an email or phone number and a type")}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await sh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Om:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,h,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hi}):await this._useSession(async t=>{var r,s,o;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new li}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:hi})})}catch(t){if(Me(t))return $N(t)&&(await this._removeSession(),await ih(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new li;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Va(this.storage,this.storageKey));const{data:h,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:hi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new li;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:l}=Vm(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Me(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new li;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Br())throw new rh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new tx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tx("No code detected.");const{data:F,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:F.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:h}=e;if(!o||!u||!l||!h)throw new rh("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let _=g+v;d&&(_=parseInt(d));const E=_-g;E*1e3<=Ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const C=_-v;g-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,_,g):g-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,_,g);const{data:j,error:A}=await this._getUser(o);if(A)throw A;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:_,refresh_token:l,token_type:h,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(r){if(Me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await sh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(VN(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await ih(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=GN(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Va(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,d,h,g;const{data:v,error:_}=o;if(_)throw _;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Br()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await XN(async s=>(s>0&&await YN(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ui})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Mm(o)&&Date.now()+l-r<Ua})}catch(r){if(this._debug(t,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Br()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await sh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Om;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${Om}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Mm(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new li;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new GT;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new li;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),Me(o)){const l={session:null,error:o};return Mm(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await KT(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ih(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Br()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ua);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ua}ms, refresh threshold is ${xg} ticks`),s<=xg&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof JT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Br()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Va(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:h}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Me(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Me(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Vm(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+LN>Date.now()))return r;const{data:s,error:o}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new Bu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new Bu("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:E,error:C}=await this.getSession();if(C||!E.session)return{data:null,error:C};r=E.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:d}}=Vm(r);if(i2(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:o,header:s,signature:l},error:null}}const h=o2(s.alg),g=await this.fetchJwk(s.kid,t),v=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,v,l,qN(`${u}.${d}`)))throw new Bu("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}tc.nextInstanceID=0;const b2=tc;class E2 extends b2{constructor(e){super(e)}}var T2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function d(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,d)}h((r=r.apply(n,e||[])).next())})};class S2{constructor(e,t,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=IN(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:bN,realtime:TN,auth:Object.assign(Object.assign({},EN),{storageKey:d}),global:xN},g=RN(r??{},h);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=PN(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new zR(`${u}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new RR(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new vN(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return T2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:d},h,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E2({url:this.authUrl,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new sN(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const k2=(n,e,t)=>new S2(n,e,t),YT="https://lcmsizhwcacufywlrfpr.supabase.co",XT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg";console.log("Supabase URL:",YT);console.log("Supabase Anon Key:",XT);const Rn=k2(YT,XT),Ls=P.createContext(),C2=({children:n})=>{const[e,t]=P.useState(null),[r,s]=P.useState(!0);P.useEffect(()=>{(async()=>{const{data:{session:_}}=await Rn.auth.getSession();t((_==null?void 0:_.user)??null),s(!1)})();const{data:{subscription:v}}=Rn.auth.onAuthStateChange((_,E)=>{t((E==null?void 0:E.user)??null),s(!1)});return()=>{v==null||v.unsubscribe()}},[]);const h={user:e,loading:r,signup:async(g,v)=>{console.log("Signup attempt with:",{email:g,password:v});const{data:_,error:E}=await Rn.auth.signUp({email:g,password:v,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(_,null,2)),E)throw console.error("Signup error:",E.message),E;if(_.user&&_.user.identities&&_.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const C=await Rn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(C,null,2)),C.error?(console.error("Error resending confirmation email:",C.error.message),C.error):new Error("User already exists. A confirmation email has been resent.")}return _},login:async(g,v)=>{console.log("Login attempt with:",{email:g,password:v});const{data:_,error:E}=await Rn.auth.signInWithPassword({email:g,password:v});if(E)throw console.error("Login error:",E.message),E.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):E;return t(_.user),_},logout:async()=>{const{error:g}=await Rn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;t(null)},refreshUser:async()=>{const{data:{user:g}}=await Rn.auth.getUser();t(g)}};return p.jsx(Ls.Provider,{value:h,children:n})},P2=({location:n})=>{var j;const[e,t]=P.useState(!1),{isDarkMode:r,toggleTheme:s}=P.useContext(Ze),{user:o,logout:l,loading:u}=P.useContext(Ls),d=rn(),h=P.useRef(null),g=P.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",e);const v=async()=>{try{await l(),d("/login")}catch(A){console.error("Logout error:",A.message)}},_=()=>{var A;e?(t(!1),(A=h.current)==null||A.focus()):(t(!0),setTimeout(()=>{var D;return(D=g.current)==null?void 0:D.focus()},100))};P.useEffect(()=>{const A=D=>{var F;D.key==="Escape"&&e&&(t(!1),(F=h.current)==null||F.focus())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e]);const E=A=>n.pathname===A,C=((j=o==null?void 0:o.user_metadata)==null?void 0:j.displayName)||"User";return p.jsxs(p.Fragment,{children:[p.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),p.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[p.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[p.jsx(st,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),p.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[p.jsx(st,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/")?"text-red-600 font-semibold":""}`,children:"Home"}),p.jsx(st,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),p.jsx(st,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),p.jsx(st,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),u?p.jsx("span",{children:"Loading..."}):o?p.jsxs(p.Fragment,{children:[p.jsxs(st,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",C]}),p.jsx("button",{onClick:v,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):p.jsx(st,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),p.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"☀️":"🌙"})]}),p.jsx("button",{ref:h,onClick:_,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:e?"✖":"☰"})]}),e&&p.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:_,tabIndex:0,onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&_()},"aria-label":"Close mobile menu"}),p.jsxs("div",{className:`lg:hidden px-4 py-4 ${e?"mobile-menu-open":"mobile-menu-closed"} ${r?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[p.jsx(st,{ref:g,to:"/",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Home"}),p.jsx(st,{to:"/products",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/products")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Products"}),p.jsx(st,{to:"/blog",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/blog")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Blog"}),p.jsx(st,{to:"/faq",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/faq")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"FAQ"}),p.jsx(st,{to:"/contact",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/contact")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Contact"}),p.jsx(st,{to:"/nutrition",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/nutrition")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Nutrition"}),o&&p.jsx(st,{to:"/profile",onClick:_,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/profile")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Profile"}),p.jsx("button",{onClick:()=>{s(),_()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${r?"text-red-400":"text-red-800"}`,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"☀️ Light Mode":"🌙 Dark Mode"}),u?p.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):o?p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:`block py-2 px-3 text-sm ${r?"text-red-400":"text-red-800"}`,children:["Welcome, ",C]}),p.jsx("button",{onClick:()=>{v(),_()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):p.jsx(st,{to:"/login",onClick:_,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})};var ZT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cx=Lt.createContext&&Lt.createContext(ZT),A2=["attr","size","title"];function I2(n,e){if(n==null)return{};var t=R2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function R2(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Vh(){return Vh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vh.apply(this,arguments)}function dx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function $h(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dx(Object(t),!0).forEach(function(r){N2(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):dx(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function N2(n,e,t){return e=j2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j2(n){var e=D2(n,"string");return typeof e=="symbol"?e:e+""}function D2(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function eS(n){return n&&n.map((e,t)=>Lt.createElement(e.tag,$h({key:t},e.attr),eS(e.child)))}function bl(n){return e=>Lt.createElement(O2,Vh({attr:$h({},n.attr)},e),eS(n.child))}function O2(n){var e=t=>{var{attr:r,size:s,title:o}=n,l=I2(n,A2),u=s||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),Lt.createElement("svg",Vh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:d,style:$h($h({color:n.color||t.color},t.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Lt.createElement("title",null,o),n.children)};return cx!==void 0?Lt.createElement(cx.Consumer,null,t=>e(t)):e(ZT)}function L2(n){return bl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function M2(n){return bl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function V2(n){return bl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function $2(n){return bl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function F2(n){return bl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function U2(n){return bl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(n)}const B2=()=>{const{isDarkMode:n}=P.useContext(Ze),{user:e,logout:t}=P.useContext(Ls),r=es();return p.jsx("div",{className:`${n?"dark":""}`,children:p.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[p.jsx(P2,{location:r}),p.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:p.jsx(TT,{})}),p.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:p.jsx(L2,{size:24})}),p.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:p.jsx($2,{size:24})}),p.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:p.jsx(M2,{size:24})}),p.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:p.jsx(V2,{size:24})}),p.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:p.jsx(F2,{size:24})})]})}),p.jsxs("p",{children:["© ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function zn({to:n,children:e,variant:t,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=t==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return n?p.jsx(st,{to:n,className:`${o} ${l} ${r}`,...s,children:e}):p.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const z2="/aussie-gut-pack/assets/aussie-BleX4DhZ.png",W2="/aussie-gut-pack/assets/goggins-BJp9afAd.png",hx=[z2,W2],H2=()=>{const[n,e]=P.useState(0);return P.useEffect(()=>{const t=setInterval(()=>{e(r=>(r+1)%hx.length)},5e3);return()=>clearInterval(t)},[]),p.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:hx.map((t,r)=>p.jsx("div",{className:`absolute inset-0 w-[120%] h-full bg-cover bg-center transition-opacity duration-1000 ease-in-out ${r===n?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${t})`}},r))})},j0=P.createContext({});function D0(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const O0=typeof window<"u",tS=O0?P.useLayoutEffect:P.useEffect,_f=P.createContext(null),L0=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class q2 extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function K2({children:n,isPresent:e,anchorX:t}){const r=P.useId(),s=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(L0);return P.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:g,right:v}=o.current;if(e||!s.current||!u||!d)return;const _=t==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const E=document.createElement("style");return l&&(E.nonce=l),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${_}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(E)}},[e]),p.jsx(q2,{isPresent:e,childRef:s,sizeRef:o,children:P.cloneElement(n,{ref:s})})}const G2=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const d=D0(Q2),h=P.useId(),g=P.useCallback(_=>{d.set(_,!0);for(const E of d.values())if(!E)return;r&&r()},[d,r]),v=P.useMemo(()=>({id:h,initial:e,isPresent:t,custom:s,onExitComplete:g,register:_=>(d.set(_,!1),()=>d.delete(_))}),o?[Math.random(),g]:[t,g]);return P.useMemo(()=>{d.forEach((_,E)=>d.set(E,!1))},[t]),P.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),l==="popLayout"&&(n=p.jsx(K2,{isPresent:t,anchorX:u,children:n})),p.jsx(_f.Provider,{value:v,children:n})};function Q2(){return new Map}function nS(n=!0){const e=P.useContext(_f);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=P.useId();P.useEffect(()=>{if(n)return s(o)},[n]);const l=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const oh=n=>n.key||"";function fx(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const px=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[d,h]=nS(l),g=P.useMemo(()=>fx(n),[n]),v=l&&!d?[]:g.map(oh),_=P.useRef(!0),E=P.useRef(g),C=D0(()=>new Map),[j,A]=P.useState(g),[D,F]=P.useState(g);tS(()=>{_.current=!1,E.current=g;for(let U=0;U<D.length;U++){const V=oh(D[U]);v.includes(V)?C.delete(V):C.get(V)!==!0&&C.set(V,!1)}},[D,v.length,v.join("-")]);const $=[];if(g!==j){let U=[...g];for(let V=0;V<D.length;V++){const I=D[V],b=oh(I);v.includes(b)||(U.splice(V,0,I),$.push(I))}return o==="wait"&&$.length&&(U=$),F(fx(U)),A(g),null}const{forceRender:B}=P.useContext(j0);return p.jsx(p.Fragment,{children:D.map(U=>{const V=oh(U),I=l&&!d?!1:g===D||v.includes(V),b=()=>{if(C.has(V))C.set(V,!0);else return;let S=!0;C.forEach(R=>{R||(S=!1)}),S&&(B==null||B(),F(E.current),l&&(h==null||h()),r&&r())};return p.jsx(G2,{isPresent:I,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:I?void 0:b,anchorX:u,children:U},V)})})};function M0(n,e){n.indexOf(e)===-1&&n.push(e)}function V0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const qn=n=>n;let rS=qn;const J2={useManualTiming:!1};function $0(n){let e;return()=>(e===void 0&&(e=n()),e)}const al=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class F0{constructor(){this.subscriptions=[]}add(e){return M0(this.subscriptions,e),()=>V0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ks=n=>n*1e3,Cs=n=>n/1e3;function sS(n,e){return e?n*(1e3/e):0}const Y2=$0(()=>window.ScrollTimeline!==void 0);class X2{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(Y2()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Z2 extends X2{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function U0(n,e){return n?n[e]||n.default||n:void 0}const Tg=2e4;function iS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Tg;)e+=t,r=n.next(e);return e>=Tg?1/0:e}function B0(n){return typeof n=="function"}function mx(n,e){n.timeline=e,n.onfinish=null}const z0=n=>Array.isArray(n)&&typeof n[0]=="number",ej={linearEasing:void 0};function tj(n,e){const t=$0(n);return()=>{var r;return(r=ej[e])!==null&&r!==void 0?r:t()}}const Fh=tj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),oS=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=n(al(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function aS(n){return!!(typeof n=="function"&&Fh()||!n||typeof n=="string"&&(n in Sg||Fh())||z0(n)||Array.isArray(n)&&n.every(aS))}const ju=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Sg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ju([0,.65,.55,1]),circOut:ju([.55,0,1,.45]),backIn:ju([.31,.01,.66,-.59]),backOut:ju([.33,1.53,.69,.99])};function lS(n,e){if(n)return typeof n=="function"&&Fh()?oS(n,e):z0(n)?ju(n):Array.isArray(n)?n.map(t=>lS(t,e)||Sg.easeOut):Sg[n]}const ah=["read","resolveKeyframes","update","preRender","render","postRender"],gx={value:null};function nj(n,e){let t=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function h(v){l.has(v)&&(g.schedule(v),n()),d++,v(u)}const g={schedule:(v,_=!1,E=!1)=>{const j=E&&s?t:r;return _&&l.add(v),j.has(v)||j.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(u=v,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(h),e&&gx.value&&gx.value.frameloop[e].push(d),d=0,t.clear(),s=!1,o&&(o=!1,g.process(v))}};return g}const rj=40;function uS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=ah.reduce((D,F)=>(D[F]=nj(o,e?F:void 0),D),{}),{read:u,resolveKeyframes:d,update:h,preRender:g,render:v,postRender:_}=l,E=()=>{const D=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(D-s.timestamp,rj),1),s.timestamp=D,s.isProcessing=!0,u.process(s),d.process(s),h.process(s),g.process(s),v.process(s),_.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(E))},C=()=>{t=!0,r=!0,s.isProcessing||n(E)};return{schedule:ah.reduce((D,F)=>{const $=l[F];return D[F]=(B,U=!1,V=!1)=>(t||C(),$.schedule(B,U,V)),D},{}),cancel:D=>{for(let F=0;F<ah.length;F++)l[ah[F]].cancel(D)},state:s,steps:l}}const{schedule:it,cancel:Si,state:Yt,steps:$m}=uS(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0),{schedule:W0}=uS(queueMicrotask,!1);let wh;function sj(){wh=void 0}const Hr={now:()=>(wh===void 0&&Hr.set(Yt.isProcessing||J2.useManualTiming?Yt.timestamp:performance.now()),wh),set:n=>{wh=n,queueMicrotask(sj)}},Sr={x:!1,y:!1};function cS(){return Sr.x||Sr.y}function ij(n){return n==="x"||n==="y"?Sr[n]?null:(Sr[n]=!0,()=>{Sr[n]=!1}):Sr.x||Sr.y?null:(Sr.x=Sr.y=!0,()=>{Sr.x=Sr.y=!1})}function oj(n,e,t){var r;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function dS(n,e){const t=oj(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function yx(n){return!(n.pointerType==="touch"||cS())}function aj(n,e,t={}){const[r,s,o]=dS(n,t),l=u=>{if(!yx(u))return;const{target:d}=u,h=e(d,u);if(typeof h!="function"||!d)return;const g=v=>{yx(v)&&(h(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}function vx(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const hS=(n,e)=>e?n===e?!0:hS(n,e.parentElement):!1,H0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,lj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uj(n){return lj.has(n.tagName)||n.tabIndex!==-1}const Du=new WeakSet;function _x(n){return e=>{e.key==="Enter"&&n(e)}}function Fm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cj=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=_x(()=>{if(Du.has(t))return;Fm(t,"down");const s=_x(()=>{Fm(t,"up")}),o=()=>Fm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function wx(n){return H0(n)&&!cS()}function dj(n,e,t={}){const[r,s,o]=dS(n,t),l=u=>{const d=u.currentTarget;if(!d||!wx(u)||Du.has(d))return;Du.add(d),vx(u,"set");const h=e(d,u),g=(E,C)=>{d.removeEventListener("pointerup",v),d.removeEventListener("pointercancel",_),vx(E,"release"),!(!wx(E)||!Du.has(d))&&(Du.delete(d),typeof h=="function"&&h(E,{success:C}))},v=E=>{(E.isTrusted?hj(E,d instanceof Element?d.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?g(E,!1):g(E,!(d instanceof Element)||hS(d,E.target))},_=E=>{g(E,!1)};d.addEventListener("pointerup",v,s),d.addEventListener("pointercancel",_,s),d.addEventListener("lostpointercapture",_,s)};return r.forEach(u=>{u=t.useGlobalTarget?window:u;let d=!1;u instanceof HTMLElement&&(d=!0,!uj(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0)),u.addEventListener("pointerdown",l,s),d&&u.addEventListener("focus",h=>cj(h,s),s)}),o}function hj(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}const xx=30,fj=n=>!isNaN(parseFloat(n));class pj{constructor(e,t={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Hr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=fj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new F0);const r=this.events[e].add(t);return e==="change"?()=>{r(),it.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>xx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,xx);return sS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nc(n,e){return new pj(n,e)}const fS=P.createContext({strict:!1}),bx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ll={};for(const n in bx)ll[n]={isEnabled:e=>bx[n].some(t=>!!e[t])};function mj(n){for(const e in n)ll[e]={...ll[e],...n[e]}}const gj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||gj.has(n)}let pS=n=>!Uh(n);function yj(n){n&&(pS=e=>e.startsWith("on")?!Uh(e):n(e))}try{yj(require("@emotion/is-prop-valid").default)}catch{}function vj(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(pS(s)||t===!0&&Uh(s)||!e&&!Uh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function _j(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const wf=P.createContext({});function xf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function rc(n){return typeof n=="string"||Array.isArray(n)}const q0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],K0=["initial",...q0];function bf(n){return xf(n.animate)||K0.some(e=>rc(n[e]))}function mS(n){return!!(bf(n)||n.variants)}function wj(n,e){if(bf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||rc(t)?t:void 0,animate:rc(r)?r:void 0}}return n.inherit!==!1?e:{}}function xj(n){const{initial:e,animate:t}=wj(n,P.useContext(wf));return P.useMemo(()=>({initial:e,animate:t}),[Ex(e),Ex(t)])}function Ex(n){return Array.isArray(n)?n.join(" "):n}const bj=Symbol.for("motionComponentSymbol");function qa(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Ej(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):qa(t)&&(t.current=r))},[e])}const G0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tj="framerAppearId",gS="data-"+G0(Tj),yS=P.createContext({});function Sj(n,e,t,r,s){var o,l;const{visualElement:u}=P.useContext(wf),d=P.useContext(fS),h=P.useContext(_f),g=P.useContext(L0).reducedMotion,v=P.useRef(null);r=r||d.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:u,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:g}));const _=v.current,E=P.useContext(yS);_&&!_.projection&&s&&(_.type==="html"||_.type==="svg")&&kj(v.current,t,s,E);const C=P.useRef(!1);P.useInsertionEffect(()=>{_&&C.current&&_.update(t,h)});const j=t[gS],A=P.useRef(!!j&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,j))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,j)));return tS(()=>{_&&(C.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),W0.render(_.render),A.current&&_.animationState&&_.animationState.animateChanges())}),P.useEffect(()=>{_&&(!A.current&&_.animationState&&_.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)===null||D===void 0||D.call(window,j)}),A.current=!1))}),_}function kj(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:vS(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&qa(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:h})}function vS(n){if(n)return n.options.allowProjection!==!1?n.projection:vS(n.parent)}function Cj({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){var o,l;n&&mj(n);function u(h,g){let v;const _={...P.useContext(L0),...h,layoutId:Pj(h)},{isStatic:E}=_,C=xj(h),j=r(h,E);if(!E&&O0){Aj();const A=Ij(_);v=A.MeasureLayout,C.visualElement=Sj(s,j,_,e,A.ProjectionNode)}return p.jsxs(wf.Provider,{value:C,children:[v&&C.visualElement?p.jsx(v,{visualElement:C.visualElement,..._}):null,t(s,h,Ej(j,C.visualElement,g),j,E,C.visualElement)]})}u.displayName=`motion.${typeof s=="string"?s:`create(${(l=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&l!==void 0?l:""})`}`;const d=P.forwardRef(u);return d[bj]=s,d}function Pj({layoutId:n}){const e=P.useContext(j0).id;return e&&n!==void 0?e+"-"+n:n}function Aj(n,e){P.useContext(fS).strict}function Ij(n){const{drag:e,layout:t}=ll;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const _S=n=>e=>typeof e=="string"&&e.startsWith(n),Q0=_S("--"),Rj=_S("var(--"),J0=n=>Rj(n)?Nj.test(n.split("/*")[0].trim()):!1,Nj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,sc={};function jj(n){for(const e in n)sc[e]=n[e],Q0(e)&&(sc[e].isCSSVariable=!0)}const El=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Oo=new Set(El);function wS(n,{layout:e,layoutId:t}){return Oo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!sc[n]||n==="opacity")}const fn=n=>!!(n&&n.getVelocity),xS=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Is=(n,e,t)=>t>e?e:t<n?n:t,Tl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ic={...Tl,transform:n=>Is(0,1,n)},lh={...Tl,default:1},Ec=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ci=Ec("deg"),qr=Ec("%"),Ae=Ec("px"),Dj=Ec("vh"),Oj=Ec("vw"),Tx={...qr,parse:n=>qr.parse(n)/100,transform:n=>qr.transform(n*100)},Lj={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,backgroundPositionX:Ae,backgroundPositionY:Ae},Mj={rotate:ci,rotateX:ci,rotateY:ci,rotateZ:ci,scale:lh,scaleX:lh,scaleY:lh,scaleZ:lh,skew:ci,skewX:ci,skewY:ci,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:ic,originX:Tx,originY:Tx,originZ:Ae},Sx={...Tl,transform:Math.round},Y0={...Lj,...Mj,zIndex:Sx,size:Ae,fillOpacity:ic,strokeOpacity:ic,numOctaves:Sx},Vj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$j=El.length;function Fj(n,e,t){let r="",s=!0;for(let o=0;o<$j;o++){const l=El[o],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const h=xS(u,Y0[l]);if(!d){s=!1;const g=Vj[l]||l;r+=`${g}(${h}) `}t&&(e[l]=h)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function X0(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,u=!1;for(const d in e){const h=e[d];if(Oo.has(d)){l=!0;continue}else if(Q0(d)){s[d]=h;continue}else{const g=xS(h,Y0[d]);d.startsWith("origin")?(u=!0,o[d]=g):r[d]=g}}if(e.transform||(l||t?r.transform=Fj(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${d} ${h} ${g}`}}const Z0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bS(n,e,t){for(const r in e)!fn(e[r])&&!wS(r,t)&&(n[r]=e[r])}function Uj({transformTemplate:n},e){return P.useMemo(()=>{const t=Z0();return X0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Bj(n,e){const t=n.style||{},r={};return bS(r,t,n),Object.assign(r,Uj(n,e)),r}function zj(n,e){const t={},r=Bj(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Wj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ey(n){return typeof n!="string"||n.includes("-")?!1:!!(Wj.indexOf(n)>-1||/[A-Z]/u.test(n))}const Hj={offset:"stroke-dashoffset",array:"stroke-dasharray"},qj={offset:"strokeDashoffset",array:"strokeDasharray"};function Kj(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?Hj:qj;n[o.offset]=Ae.transform(-r);const l=Ae.transform(e),u=Ae.transform(t);n[o.array]=`${l} ${u}`}function kx(n,e,t){return typeof n=="string"?n:Ae.transform(e+t*n)}function Gj(n,e,t){const r=kx(e,n.x,n.width),s=kx(t,n.y,n.height);return`${r} ${s}`}function ty(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:d=0,...h},g,v){if(X0(n,h,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:E,dimensions:C}=n;_.transform&&(C&&(E.transform=_.transform),delete _.transform),C&&(s!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=Gj(C,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),r!==void 0&&(_.scale=r),l!==void 0&&Kj(_,l,u,d,!1)}const ES=()=>({...Z0(),attrs:{}}),ny=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Qj(n,e,t,r){const s=P.useMemo(()=>{const o=ES();return ty(o,e,ny(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};bS(o,n.style,n),s.style={...o,...s.style}}return s}function Jj(n=!1){return(t,r,s,{latestValues:o},l)=>{const d=(ey(t)?Qj:zj)(r,o,l,t),h=vj(r,typeof t=="string",n),g=t!==P.Fragment?{...h,...d,ref:s}:{},{children:v}=r,_=P.useMemo(()=>fn(v)?v.get():v,[v]);return P.createElement(t,{...g,children:_})}}function Cx(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ry(n,e,t,r){if(typeof e=="function"){const[s,o]=Cx(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=Cx(r);e=e(t!==void 0?t:n.custom,s,o)}return e}const kg=n=>Array.isArray(n),Yj=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Xj=n=>kg(n)?n[n.length-1]||0:n;function xh(n){const e=fn(n)?n.get():n;return Yj(e)?e.toValue():e}function Zj({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,s,o){const l={latestValues:eD(r,s,o,n),renderState:e()};return t&&(l.onMount=u=>t({props:r,current:u,...l}),l.onUpdate=u=>t(u)),l}const TS=n=>(e,t)=>{const r=P.useContext(wf),s=P.useContext(_f),o=()=>Zj(n,e,r,s);return t?o():D0(o)};function eD(n,e,t,r){const s={},o=r(n,{});for(const _ in o)s[_]=xh(o[_]);let{initial:l,animate:u}=n;const d=bf(n),h=mS(n);e&&h&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!xf(v)){const _=Array.isArray(v)?v:[v];for(let E=0;E<_.length;E++){const C=ry(n,_[E]);if(C){const{transitionEnd:j,transition:A,...D}=C;for(const F in D){let $=D[F];if(Array.isArray($)){const B=g?$.length-1:0;$=$[B]}$!==null&&(s[F]=$)}for(const F in j)s[F]=j[F]}}}return s}function sy(n,e,t){var r;const{style:s}=n,o={};for(const l in s)(fn(s[l])||e.style&&fn(e.style[l])||wS(l,n)||((r=t==null?void 0:t.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[l]=s[l]);return o}const tD={useVisualState:TS({scrapeMotionValuesFromProps:sy,createRenderState:Z0})};function SS(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function kS(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}const CS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function PS(n,e,t,r){kS(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(CS.has(s)?s:G0(s),e.attrs[s])}function AS(n,e,t){const r=sy(n,e,t);for(const s in n)if(fn(n[s])||fn(e[s])){const o=El.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}const Px=["x","y","width","height","cx","cy","r"],nD={useVisualState:TS({scrapeMotionValuesFromProps:AS,createRenderState:ES,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:s})=>{if(!t)return;let o=!!n.drag;if(!o){for(const u in s)if(Oo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<Px.length;u++){const d=Px[u];n[d]!==e[d]&&(l=!0)}l&&it.read(()=>{SS(t,r),it.render(()=>{ty(r,s,ny(t.tagName),n.transformTemplate),PS(t,r)})})}})};function rD(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...ey(r)?nD:tD,preloadedFeatures:n,useRender:Jj(s),createVisualElement:e,Component:r};return Cj(l)}}function oc(n,e,t){const r=n.getProps();return ry(r,e,t!==void 0?t:r.custom,n)}const IS=new Set(["width","height","top","left","right","bottom",...El]);function sD(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,nc(t))}function iD(n,e){const t=oc(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const u=Xj(o[l]);sD(n,l,u)}}function oD(n){return!!(fn(n)&&n.add)}function Cg(n,e){const t=n.getValue("willChange");if(oD(t))return t.add(e)}function RS(n){return n.props[gS]}const NS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,aD=1e-7,lD=12;function uD(n,e,t,r,s){let o,l,u=0;do l=e+(t-e)/2,o=NS(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>aD&&++u<lD);return l}function Tc(n,e,t,r){if(n===e&&t===r)return qn;const s=o=>uD(o,0,1,n,t);return o=>o===0||o===1?o:NS(s(o),e,r)}const jS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,DS=n=>e=>1-n(1-e),OS=Tc(.33,1.53,.69,.99),iy=DS(OS),LS=jS(iy),MS=n=>(n*=2)<1?.5*iy(n):.5*(2-Math.pow(2,-10*(n-1))),oy=n=>1-Math.sin(Math.acos(n)),VS=DS(oy),$S=jS(oy),FS=n=>/^0[^.\s]+$/u.test(n);function cD(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||FS(n):!0}const Wu=n=>Math.round(n*1e5)/1e5,ay=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dD(n){return n==null}const hD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ly=(n,e)=>t=>!!(typeof t=="string"&&hD.test(t)&&t.startsWith(n)||e&&!dD(t)&&Object.prototype.hasOwnProperty.call(t,e)),US=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(ay);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},fD=n=>Is(0,255,n),Um={...Tl,transform:n=>Math.round(fD(n))},Eo={test:ly("rgb","red"),parse:US("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Um.transform(n)+", "+Um.transform(e)+", "+Um.transform(t)+", "+Wu(ic.transform(r))+")"};function pD(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Pg={test:ly("#"),parse:pD,transform:Eo.transform},Ka={test:ly("hsl","hue"),parse:US("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+qr.transform(Wu(e))+", "+qr.transform(Wu(t))+", "+Wu(ic.transform(r))+")"},cn={test:n=>Eo.test(n)||Pg.test(n)||Ka.test(n),parse:n=>Eo.test(n)?Eo.parse(n):Ka.test(n)?Ka.parse(n):Pg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Eo.transform(n):Ka.transform(n)},mD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gD(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(ay))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(mD))===null||t===void 0?void 0:t.length)||0)>0}const BS="number",zS="color",yD="var",vD="var(",Ax="${}",_D=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ac(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(_D,d=>(cn.test(d)?(r.color.push(o),s.push(zS),t.push(cn.parse(d))):d.startsWith(vD)?(r.var.push(o),s.push(yD),t.push(d)):(r.number.push(o),s.push(BS),t.push(parseFloat(d))),++o,Ax)).split(Ax);return{values:t,split:u,indexes:r,types:s}}function WS(n){return ac(n).values}function HS(n){const{split:e,types:t}=ac(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=t[l];u===BS?o+=Wu(s[l]):u===zS?o+=cn.transform(s[l]):o+=s[l]}return o}}const wD=n=>typeof n=="number"?0:n;function xD(n){const e=WS(n);return HS(n)(e.map(wD))}const ki={test:gD,parse:WS,createTransformer:HS,getAnimatableNone:xD},bD=new Set(["brightness","contrast","saturate","opacity"]);function ED(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(ay)||[];if(!r)return n;const s=t.replace(r,"");let o=bD.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const TD=/\b([a-z-]*)\(.*?\)/gu,Ag={...ki,getAnimatableNone:n=>{const e=n.match(TD);return e?e.map(ED).join(" "):n}},SD={...Y0,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:Ag,WebkitFilter:Ag},qS=n=>SD[n];function KS(n,e){let t=qS(n);return t!==Ag&&(t=ki),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const kD=new Set(["auto","none","0"]);function CD(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!kD.has(o)&&ac(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=KS(t,s)}const To=n=>n*180/Math.PI,Ig=n=>{const e=To(Math.atan2(n[1],n[0]));return Rg(e)},PD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Ig,rotateZ:Ig,skewX:n=>To(Math.atan(n[1])),skewY:n=>To(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Rg=n=>(n=n%360,n<0&&(n+=360),n),Ix=Ig,Rx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Nx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),AD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Rx,scaleY:Nx,scale:n=>(Rx(n)+Nx(n))/2,rotateX:n=>Rg(To(Math.atan2(n[6],n[5]))),rotateY:n=>Rg(To(Math.atan2(-n[2],n[0]))),rotateZ:Ix,rotate:Ix,skewX:n=>To(Math.atan(n[4])),skewY:n=>To(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function jx(n){return n.includes("scale")?1:0}function Ng(n,e){if(!n||n==="none")return jx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=AD,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=PD,s=u}if(!s)return jx(e);const o=r[e],l=s[1].split(",").map(RD);return typeof o=="function"?o(l):l[o]}const ID=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Ng(t,e)};function RD(n){return parseFloat(n.trim())}const Dx=n=>n===Tl||n===Ae,ND=new Set(["x","y","z"]),jD=El.filter(n=>!ND.has(n));function DD(n){const e=[];return jD.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ul={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Ng(e,"x"),y:(n,{transform:e})=>Ng(e,"y")};ul.translateX=ul.x;ul.translateY=ul.y;const ko=new Set;let jg=!1,Dg=!1;function GS(){if(Dg){const n=Array.from(ko).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=DD(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))===null||u===void 0||u.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Dg=!1,jg=!1,ko.forEach(n=>n.complete()),ko.clear()}function QS(){ko.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Dg=!0)})}function OD(){QS(),GS()}class uy{constructor(e,t,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ko.add(this),jg||(jg=!0,it.read(QS),it.resolveKeyframes(GS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const d=r.readValue(t,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ko.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ko.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const JS=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),LD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function MD(n){const e=LD.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function YS(n,e,t=1){const[r,s]=MD(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return JS(l)?parseFloat(l):l}return J0(s)?YS(s,e,t+1):s}const XS=n=>e=>e.test(n),VD={test:n=>n==="auto",parse:n=>n},ZS=[Tl,Ae,qr,ci,Oj,Dj,VD],Ox=n=>ZS.find(XS(n));class ek extends uy{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),J0(h))){const g=YS(h,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!IS.has(r)||e.length!==2)return;const[s,o]=e,l=Ox(s),u=Ox(o);if(l!==u)if(Dx(l)&&Dx(u))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)cD(e[s])&&r.push(s);r.length&&CD(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ul[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const o=t.getValue(r);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=ul[r](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,h])=>{t.getValue(d).set(h)}),this.resolveNoneKeyframes()}}const Lx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ki.test(n)||n==="0")&&!n.startsWith("url("));function $D(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function FD(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=Lx(s,e),u=Lx(o,e);return!l||!u?!1:$D(n)||(t==="spring"||B0(t))&&r}const UD=n=>n!==null;function Ef(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(UD),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const BD=40;class tk{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Hr.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>BD?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&OD(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Hr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:u,onUpdate:d,isGenerator:h}=this.options;if(!h&&!FD(e,r,s,o))if(l)this.options.duration=0;else{d&&d(Ef(e,this.options,t)),u&&u(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,t);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...g},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const pt=(n,e,t)=>n+(e-n)*t;function Bm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function zD({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=Bm(d,u,n+1/3),o=Bm(d,u,n),l=Bm(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Bh(n,e){return t=>t>0?e:n}const zm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},WD=[Pg,Eo,Ka],HD=n=>WD.find(e=>e.test(n));function Mx(n){const e=HD(n);if(!e)return!1;let t=e.parse(n);return e===Ka&&(t=zD(t)),t}const Vx=(n,e)=>{const t=Mx(n),r=Mx(e);if(!t||!r)return Bh(n,e);const s={...t};return o=>(s.red=zm(t.red,r.red,o),s.green=zm(t.green,r.green,o),s.blue=zm(t.blue,r.blue,o),s.alpha=pt(t.alpha,r.alpha,o),Eo.transform(s))},qD=(n,e)=>t=>e(n(t)),Sc=(...n)=>n.reduce(qD),Og=new Set(["none","hidden"]);function KD(n,e){return Og.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function GD(n,e){return t=>pt(n,e,t)}function cy(n){return typeof n=="number"?GD:typeof n=="string"?J0(n)?Bh:cn.test(n)?Vx:YD:Array.isArray(n)?nk:typeof n=="object"?cn.test(n)?Vx:QD:Bh}function nk(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>cy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function QD(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=cy(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function JD(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=n.indexes[l][s[l]],d=(t=n.values[u])!==null&&t!==void 0?t:0;r[o]=d,s[l]++}return r}const YD=(n,e)=>{const t=ki.createTransformer(e),r=ac(n),s=ac(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Og.has(n)&&!s.values.length||Og.has(e)&&!r.values.length?KD(n,e):Sc(nk(JD(r,s),s.values),t):Bh(n,e)};function rk(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?pt(n,e,t):cy(n)(n,e)}const XD=5;function sk(n,e,t){const r=Math.max(e-XD,0);return sS(t-n(r),e-r)}const yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$x=.001;function ZD({duration:n=yt.duration,bounce:e=yt.bounce,velocity:t=yt.velocity,mass:r=yt.mass}){let s,o,l=1-e;l=Is(yt.minDamping,yt.maxDamping,l),n=Is(yt.minDuration,yt.maxDuration,Cs(n)),l<1?(s=h=>{const g=h*l,v=g*n,_=g-t,E=Lg(h,l),C=Math.exp(-v);return $x-_/E*C},o=h=>{const v=h*l*n,_=v*t+t,E=Math.pow(l,2)*Math.pow(h,2)*n,C=Math.exp(-v),j=Lg(Math.pow(h,2),l);return(-s(h)+$x>0?-1:1)*((_-E)*C)/j}):(s=h=>{const g=Math.exp(-h*n),v=(h-t)*n+1;return-.001+g*v},o=h=>{const g=Math.exp(-h*n),v=(t-h)*(n*n);return g*v});const u=5/n,d=tO(s,o,u);if(n=ks(n),isNaN(d))return{stiffness:yt.stiffness,damping:yt.damping,duration:n};{const h=Math.pow(d,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:n}}}const eO=12;function tO(n,e,t){let r=t;for(let s=1;s<eO;s++)r=r-n(r)/e(r);return r}function Lg(n,e){return n*Math.sqrt(1-e*e)}const nO=["duration","bounce"],rO=["stiffness","damping","mass"];function Fx(n,e){return e.some(t=>n[t]!==void 0)}function sO(n){let e={velocity:yt.velocity,stiffness:yt.stiffness,damping:yt.damping,mass:yt.mass,isResolvedFromDuration:!1,...n};if(!Fx(n,rO)&&Fx(n,nO))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*Is(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:yt.mass,stiffness:s,damping:o}}else{const t=ZD(n);e={...e,...t,mass:yt.mass},e.isResolvedFromDuration=!0}return e}function ik(n=yt.visualDuration,e=yt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:h,mass:g,duration:v,velocity:_,isResolvedFromDuration:E}=sO({...t,velocity:-Cs(t.velocity||0)}),C=_||0,j=h/(2*Math.sqrt(d*g)),A=l-o,D=Cs(Math.sqrt(d/g)),F=Math.abs(A)<5;r||(r=F?yt.restSpeed.granular:yt.restSpeed.default),s||(s=F?yt.restDelta.granular:yt.restDelta.default);let $;if(j<1){const U=Lg(D,j);$=V=>{const I=Math.exp(-j*D*V);return l-I*((C+j*D*A)/U*Math.sin(U*V)+A*Math.cos(U*V))}}else if(j===1)$=U=>l-Math.exp(-D*U)*(A+(C+D*A)*U);else{const U=D*Math.sqrt(j*j-1);$=V=>{const I=Math.exp(-j*D*V),b=Math.min(U*V,300);return l-I*((C+j*D*A)*Math.sinh(b)+U*A*Math.cosh(b))/U}}const B={calculatedDuration:E&&v||null,next:U=>{const V=$(U);if(E)u.done=U>=v;else{let I=0;j<1&&(I=U===0?ks(C):sk($,U,V));const b=Math.abs(I)<=r,S=Math.abs(l-V)<=s;u.done=b&&S}return u.value=u.done?l:V,u},toString:()=>{const U=Math.min(iS(B),Tg),V=oS(I=>B.next(U*I).value,U,30);return U+"ms "+V}};return B}function Ux({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:h=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},E=b=>u!==void 0&&b<u||d!==void 0&&b>d,C=b=>u===void 0?d:d===void 0||Math.abs(u-b)<Math.abs(d-b)?u:d;let j=t*e;const A=v+j,D=l===void 0?A:l(A);D!==A&&(j=D-v);const F=b=>-j*Math.exp(-b/r),$=b=>D+F(b),B=b=>{const S=F(b),R=$(b);_.done=Math.abs(S)<=h,_.value=_.done?D:R};let U,V;const I=b=>{E(_.value)&&(U=b,V=ik({keyframes:[_.value,C(_.value)],velocity:sk($,b,_.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return I(0),{calculatedDuration:null,next:b=>{let S=!1;return!V&&U===void 0&&(S=!0,B(b),I(b)),U!==void 0&&b>=U?V.next(b-U):(!S&&B(b),_)}}}const iO=Tc(.42,0,1,1),oO=Tc(0,0,.58,1),ok=Tc(.42,0,.58,1),aO=n=>Array.isArray(n)&&typeof n[0]!="number",lO={linear:qn,easeIn:iO,easeInOut:ok,easeOut:oO,circIn:oy,circInOut:$S,circOut:VS,backIn:iy,backInOut:LS,backOut:OS,anticipate:MS},Bx=n=>{if(z0(n)){rS(n.length===4);const[e,t,r,s]=n;return Tc(e,t,r,s)}else if(typeof n=="string")return lO[n];return n};function uO(n,e,t){const r=[],s=t||rk,o=n.length-1;for(let l=0;l<o;l++){let u=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||qn:e;u=Sc(d,u)}r.push(u)}return r}function cO(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(rS(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=uO(e,r,s),d=u.length,h=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=al(n[v],n[v+1],g);return u[v](_)};return t?g=>h(Is(n[0],n[o-1],g)):h}function dO(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=al(0,e,r);n.push(pt(t,1,s))}}function hO(n){const e=[0];return dO(e,n.length-1),e}function fO(n,e){return n.map(t=>t*e)}function pO(n,e){return n.map(()=>e||ok).splice(0,n.length-1)}function zh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=aO(r)?r.map(Bx):Bx(r),o={done:!1,value:e[0]},l=fO(t&&t.length===e.length?t:hO(e),n),u=cO(l,e,{ease:Array.isArray(s)?s:pO(e,s)});return{calculatedDuration:n,next:d=>(o.value=u(d),o.done=d>=n,o)}}const mO=n=>{const e=({timestamp:t})=>n(t);return{start:()=>it.update(e,!0),stop:()=>Si(e),now:()=>Yt.isProcessing?Yt.timestamp:Hr.now()}},gO={decay:Ux,inertia:Ux,tween:zh,keyframes:zh,spring:ik},yO=n=>n/100;class dy extends tk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:t,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||uy,u=(d,h)=>this.onKeyframesResolved(d,h);this.resolver=new l(o,u,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,u=B0(t)?t:gO[t]||zh;let d,h;u!==zh&&typeof e[0]!="number"&&(d=Sc(yO,rk(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=iS(g));const{calculatedDuration:v}=g,_=v+s,E=_*(r+1)-s;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:_,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:d,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:_,repeat:E,repeatType:C,repeatDelay:j,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const D=this.currentTime-_*(this.speed>=0?1:-1),F=this.speed>=0?D<0:D>g;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,B=o;if(E){const b=Math.min(this.currentTime,g)/v;let S=Math.floor(b),R=b%1;!R&&b>=1&&(R=1),R===1&&S--,S=Math.min(S,E+1),!!(S%2)&&(C==="reverse"?(R=1-R,j&&(R-=j/v)):C==="mirror"&&(B=l)),$=Is(0,1,R)*v}const U=F?{done:!1,value:d[0]}:B.next($);u&&(U.value=u(U.value));let{done:V}=U;!F&&h!==null&&(V=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return I&&s!==void 0&&(U.value=Ef(d,this.options,s)),A&&A(U.value),I&&this.finish(),U}get duration(){const{resolved:e}=this;return e?Cs(e.calculatedDuration):0}get time(){return Cs(this.currentTime)}set time(e){e=ks(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Cs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=mO,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const vO=new Set(["opacity","clipPath","filter","transform"]);function _O(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:d}={}){const h={[e]:t};d&&(h.offset=d);const g=lS(u,s);return Array.isArray(g)&&(h.easing=g),n.animate(h,{delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const wO=$0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Wh=10,xO=2e4;function bO(n){return B0(n.type)||n.type==="spring"||!aS(n.ease)}function EO(n,e){const t=new dy({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let o=0;for(;!r.done&&o<xO;)r=t.sample(o),s.push(r.value),o+=Wh;return{times:void 0,keyframes:s,duration:o-Wh,ease:"linear"}}const ak={anticipate:MS,backInOut:LS,circInOut:$S};function TO(n){return n in ak}class zx extends tk{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new ek(o,(l,u)=>this.onKeyframesResolved(l,u),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:s,ease:o,type:l,motionValue:u,name:d,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&Fh()&&TO(o)&&(o=ak[o]),bO(this.options)){const{onComplete:v,onUpdate:_,motionValue:E,element:C,...j}=this.options,A=EO(e,j);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,s=A.times,o=A.ease,l="keyframes"}const g=_O(u.owner.current,d,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(mx(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;u.set(Ef(e,this.options,t)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Cs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Cs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=ks(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return qn;const{animation:r}=t;mx(r,e)}return qn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:o,ease:l,times:u}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:_,...E}=this.options,C=new dy({...E,keyframes:r,duration:s,type:o,ease:l,times:u,isGenerator:!0}),j=ks(this.time);h.setWithVelocity(C.sample(j-Wh).value,C.sample(j).value,Wh)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:o,damping:l,type:u}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return wO()&&r&&vO.has(r)&&!d&&!h&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}}const SO={type:"spring",stiffness:500,damping:25,restSpeed:10},kO=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),CO={type:"keyframes",duration:.8},PO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AO=(n,{keyframes:e})=>e.length>2?CO:Oo.has(n)?n.startsWith("scale")?kO(e[1]):SO:PO;function IO({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:h,...g}){return!!Object.keys(g).length}const hy=(n,e,t,r={},s,o)=>l=>{const u=U0(r,n)||{},d=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-ks(d);let g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:s};IO(u)||(g={...g,...AO(n,g)}),g.duration&&(g.duration=ks(g.duration)),g.repeatDelay&&(g.repeatDelay=ks(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const _=Ef(g.keyframes,u);if(_!==void 0)return it.update(()=>{g.onUpdate(_),g.onComplete()}),new Z2([])}return!o&&zx.supports(g)?new zx(g):new dy(g)};function RO({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function lk(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var o;let{transition:l=n.getDefaultTransition(),transitionEnd:u,...d}=e;r&&(l=r);const h=[],g=s&&n.animationState&&n.animationState.getState()[s];for(const v in d){const _=n.getValue(v,(o=n.latestValues[v])!==null&&o!==void 0?o:null),E=d[v];if(E===void 0||g&&RO(g,v))continue;const C={delay:t,...U0(l||{},v)};let j=!1;if(window.MotionHandoffAnimation){const D=RS(n);if(D){const F=window.MotionHandoffAnimation(D,v,it);F!==null&&(C.startTime=F,j=!0)}}Cg(n,v),_.start(hy(v,_,E,n.shouldReduceMotion&&IS.has(v)?{type:!1}:C,n,j));const A=_.animation;A&&h.push(A)}return u&&Promise.all(h).then(()=>{it.update(()=>{u&&iD(n,u)})}),h}function Mg(n,e,t={}){var r;const s=oc(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(o=t.transitionOverride);const l=s?()=>Promise.all(lk(n,s,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:_}=o;return NO(n,e,g+h,v,_,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[h,g]=d==="beforeChildren"?[l,u]:[u,l];return h().then(()=>g())}else return Promise.all([l(),u(t.delay)])}function NO(n,e,t=0,r=0,s=1,o){const l=[],u=(n.variantChildren.size-1)*r,d=s===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(jO).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(Mg(h,e,{...o,delay:t+d(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function jO(n,e){return n.sortNodePosition(e)}function DO(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>Mg(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=Mg(n,e,t);else{const s=typeof e=="function"?oc(n,e,t.custom):e;r=Promise.all(lk(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function uk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const OO=K0.length;function ck(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ck(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<OO;t++){const r=K0[t],s=n.props[r];(rc(s)||s===!1)&&(e[r]=s)}return e}const LO=[...q0].reverse(),MO=q0.length;function VO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>DO(n,t,r)))}function $O(n){let e=VO(n),t=Wx(),r=!0;const s=d=>(h,g)=>{var v;const _=oc(n,g,d==="exit"?(v=n.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(_){const{transition:E,transitionEnd:C,...j}=_;h={...h,...j,...C}}return h};function o(d){e=d(n)}function l(d){const{props:h}=n,g=ck(n.parent)||{},v=[],_=new Set;let E={},C=1/0;for(let A=0;A<MO;A++){const D=LO[A],F=t[D],$=h[D]!==void 0?h[D]:g[D],B=rc($),U=D===d?F.isActive:null;U===!1&&(C=A);let V=$===g[D]&&$!==h[D]&&B;if(V&&r&&n.manuallyAnimateOnMount&&(V=!1),F.protectedKeys={...E},!F.isActive&&U===null||!$&&!F.prevProp||xf($)||typeof $=="boolean")continue;const I=FO(F.prevProp,$);let b=I||D===d&&F.isActive&&!V&&B||A>C&&B,S=!1;const R=Array.isArray($)?$:[$];let M=R.reduce(s(D),{});U===!1&&(M={});const{prevResolvedValues:W={}}=F,O={...W,...M},re=xe=>{b=!0,_.has(xe)&&(S=!0,_.delete(xe)),F.needsAnimating[xe]=!0;const le=n.getValue(xe);le&&(le.liveStyle=!1)};for(const xe in O){const le=M[xe],me=W[xe];if(E.hasOwnProperty(xe))continue;let pe=!1;kg(le)&&kg(me)?pe=!uk(le,me):pe=le!==me,pe?le!=null?re(xe):_.add(xe):le!==void 0&&_.has(xe)?re(xe):F.protectedKeys[xe]=!0}F.prevProp=$,F.prevResolvedValues=M,F.isActive&&(E={...E,...M}),r&&n.blockInitialAnimation&&(b=!1),b&&(!(V&&I)||S)&&v.push(...R.map(xe=>({animation:xe,options:{type:D}})))}if(_.size){const A={};if(typeof h.initial!="boolean"){const D=oc(n,Array.isArray(h.initial)?h.initial[0]:h.initial);D&&D.transition&&(A.transition=D.transition)}_.forEach(D=>{const F=n.getBaseTarget(D),$=n.getValue(D);$&&($.liveStyle=!0),A[D]=F??null}),v.push({animation:A})}let j=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(v):Promise.resolve()}function u(d,h){var g;if(t[d].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(_=>{var E;return(E=_.animationState)===null||E===void 0?void 0:E.setActive(d,h)}),t[d].isActive=h;const v=l(d);for(const _ in t)t[_].protectedKeys={};return v}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=Wx(),r=!0}}}function FO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!uk(e,n):!1}function mo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wx(){return{animate:mo(!0),whileInView:mo(),whileHover:mo(),whileTap:mo(),whileDrag:mo(),whileFocus:mo(),exit:mo()}}class Li{constructor(e){this.isMounted=!1,this.node=e}update(){}}class UO extends Li{constructor(e){super(e),e.animationState||(e.animationState=$O(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();xf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let BO=0;class zO extends Li{constructor(){super(...arguments),this.id=BO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const WO={animation:{Feature:UO},exit:{Feature:zO}};function lc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function kc(n){return{point:{x:n.pageX,y:n.pageY}}}const HO=n=>e=>H0(e)&&n(e,kc(e));function Hu(n,e,t,r){return lc(n,e,HO(t),r)}function dk({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function qO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function KO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const hk=1e-4,GO=1-hk,QO=1+hk,fk=.01,JO=0-fk,YO=0+fk;function wn(n){return n.max-n.min}function XO(n,e,t){return Math.abs(n-e)<=t}function Hx(n,e,t,r=.5){n.origin=r,n.originPoint=pt(e.min,e.max,n.origin),n.scale=wn(t)/wn(e),n.translate=pt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=GO&&n.scale<=QO||isNaN(n.scale))&&(n.scale=1),(n.translate>=JO&&n.translate<=YO||isNaN(n.translate))&&(n.translate=0)}function qu(n,e,t,r){Hx(n.x,e.x,t.x,r?r.originX:void 0),Hx(n.y,e.y,t.y,r?r.originY:void 0)}function qx(n,e,t){n.min=t.min+e.min,n.max=n.min+wn(e)}function ZO(n,e,t){qx(n.x,e.x,t.x),qx(n.y,e.y,t.y)}function Kx(n,e,t){n.min=e.min-t.min,n.max=n.min+wn(e)}function Ku(n,e,t){Kx(n.x,e.x,t.x),Kx(n.y,e.y,t.y)}const Gx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ga=()=>({x:Gx(),y:Gx()}),Qx=()=>({min:0,max:0}),Et=()=>({x:Qx(),y:Qx()});function sr(n){return[n("x"),n("y")]}function Wm(n){return n===void 0||n===1}function Vg({scale:n,scaleX:e,scaleY:t}){return!Wm(n)||!Wm(e)||!Wm(t)}function _o(n){return Vg(n)||pk(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function pk(n){return Jx(n.x)||Jx(n.y)}function Jx(n){return n&&n!=="0%"}function Hh(n,e,t){const r=n-t,s=e*r;return t+s}function Yx(n,e,t,r,s){return s!==void 0&&(n=Hh(n,s,r)),Hh(n,t,r)+e}function $g(n,e=0,t=1,r,s){n.min=Yx(n.min,e,t,r,s),n.max=Yx(n.max,e,t,r,s)}function mk(n,{x:e,y:t}){$g(n.x,e.translate,e.scale,e.originPoint),$g(n.y,t.translate,t.scale,t.originPoint)}const Xx=.999999999999,Zx=1.0000000000001;function e4(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=t[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ja(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,mk(n,l)),r&&_o(o.latestValues)&&Ja(n,o.latestValues))}e.x<Zx&&e.x>Xx&&(e.x=1),e.y<Zx&&e.y>Xx&&(e.y=1)}function Qa(n,e){n.min=n.min+e,n.max=n.max+e}function eb(n,e,t,r,s=.5){const o=pt(n.min,n.max,s);$g(n,e,t,o,r)}function Ja(n,e){eb(n.x,e.x,e.scaleX,e.scale,e.originX),eb(n.y,e.y,e.scaleY,e.scale,e.originY)}function gk(n,e){return dk(KO(n.getBoundingClientRect(),e))}function t4(n,e,t){const r=gk(n,t),{scroll:s}=e;return s&&(Qa(r.x,s.offset.x),Qa(r.y,s.offset.y)),r}const yk=({current:n})=>n?n.ownerDocument.defaultView:null,tb=(n,e)=>Math.abs(n-e);function n4(n,e){const t=tb(n.x,e.x),r=tb(n.y,e.y);return Math.sqrt(t**2+r**2)}class vk{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=qm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,E=n4(v.offset,{x:0,y:0})>=3;if(!_&&!E)return;const{point:C}=v,{timestamp:j}=Yt;this.history.push({...C,timestamp:j});const{onStart:A,onMove:D}=this.handlers;_||(A&&A(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,_)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Hm(_,this.transformPagePoint),it.update(this.updatePoint,!0)},this.handlePointerUp=(v,_)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=qm(v.type==="pointercancel"?this.lastMoveEventInfo:Hm(_,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,A),C&&C(v,A)},!H0(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const l=kc(e),u=Hm(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=Yt;this.history=[{...d,timestamp:h}];const{onSessionStart:g}=t;g&&g(e,qm(u,this.history)),this.removeListeners=Sc(Hu(this.contextWindow,"pointermove",this.handlePointerMove),Hu(this.contextWindow,"pointerup",this.handlePointerUp),Hu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Si(this.updatePoint)}}function Hm(n,e){return e?{point:e(n.point)}:n}function nb(n,e){return{x:n.x-e.x,y:n.y-e.y}}function qm({point:n},e){return{point:n,delta:nb(n,_k(e)),offset:nb(n,r4(e)),velocity:s4(e,.1)}}function r4(n){return n[0]}function _k(n){return n[n.length-1]}function s4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=_k(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ks(e)));)t--;if(!r)return{x:0,y:0};const o=Cs(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function i4(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?pt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?pt(t,n,r.max):Math.min(n,t)),n}function rb(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function o4(n,{top:e,left:t,bottom:r,right:s}){return{x:rb(n.x,t,s),y:rb(n.y,e,r)}}function sb(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function a4(n,e){return{x:sb(n.x,e.x),y:sb(n.y,e.y)}}function l4(n,e){let t=.5;const r=wn(n),s=wn(e);return s>r?t=al(e.min,e.max-r,n.min):r>s&&(t=al(n.min,n.max-s,e.min)),Is(0,1,t)}function u4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Fg=.35;function c4(n=Fg){return n===!1?n=0:n===!0&&(n=Fg),{x:ib(n,"left","right"),y:ib(n,"top","bottom")}}function ib(n,e,t){return{min:ob(n,e),max:ob(n,t)}}function ob(n,e){return typeof n=="number"?n:n[e]||0}const d4=new WeakMap;class h4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(kc(g).point)},o=(g,v)=>{const{drag:_,dragPropagation:E,onDragStart:C}=this.getProps();if(_&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ij(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(A=>{let D=this.getAxisMotionValue(A).get()||0;if(qr.test(D)){const{projection:F}=this.visualElement;if(F&&F.layout){const $=F.layout.layoutBox[A];$&&(D=wn($)*(parseFloat(D)/100))}}this.originPoint[A]=D}),C&&it.postRender(()=>C(g,v)),Cg(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:_,dragDirectionLock:E,onDirectionLock:C,onDrag:j}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:A}=v;if(E&&this.currentDirection===null){this.currentDirection=f4(A),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,A),this.updateAxis("y",v.point,A),this.visualElement.render(),j&&j(g,v)},u=(g,v)=>this.stop(g,v),d=()=>sr(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new vk(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:yk(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&it.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!uh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=i4(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&qa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=o4(s.layoutBox,t):this.constraints=!1,this.elastic=c4(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&sr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=u4(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!qa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=t4(r,s.root,this.visualElement.getTransformPagePoint());let l=a4(s.layout.layoutBox,o);if(t){const u=t(qO(l));this.hasMutatedConstraints=!!u,u&&(l=dk(u))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},h=sr(g=>{if(!uh(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,E=s?40:1e7,C={type:"inertia",velocity:r?e[g]:0,bounceStiffness:_,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,C)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Cg(this.visualElement,e),r.start(hy(e,r,0,t,this.visualElement,!1))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sr(t=>{const{drag:r}=this.getProps();if(!uh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t];o.set(e[t]-pt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!qa(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sr(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=l4({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(l=>{if(!uh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];u.set(pt(d,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;d4.set(this.visualElement,this);const e=this.visualElement.current,t=Hu(e,"pointerdown",d=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();qa(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),it.read(r);const l=lc(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(sr(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Fg,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function uh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function f4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class p4 extends Li{constructor(e){super(e),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new h4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const ab=n=>(e,t)=>{n&&it.postRender(()=>n(e,t))};class m4 extends Li{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(e){this.session=new vk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:yk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ab(e),onStart:ab(t),onMove:r,onEnd:(o,l)=>{delete this.session,s&&it.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Hu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lb(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Au={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ae.test(n))n=parseFloat(n);else return n;const t=lb(n,e.target.x),r=lb(n,e.target.y);return`${t}% ${r}%`}},g4={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=ki.parse(n);if(s.length>5)return r;const o=ki.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const h=pt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class y4 extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;jj(v4),o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),bh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||it.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),W0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function wk(n){const[e,t]=nS(),r=P.useContext(j0);return p.jsx(y4,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(yS),isPresent:e,safeToRemove:t})}const v4={borderRadius:{...Au,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Au,borderTopRightRadius:Au,borderBottomLeftRadius:Au,borderBottomRightRadius:Au,boxShadow:g4};function _4(n,e,t){const r=fn(n)?n:nc(n);return r.start(hy("",r,e,t)),r.animation}function w4(n){return n instanceof SVGElement&&n.tagName!=="svg"}const x4=(n,e)=>n.depth-e.depth;class b4{constructor(){this.children=[],this.isDirty=!1}add(e){M0(this.children,e),this.isDirty=!0}remove(e){V0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(x4),this.isDirty=!1,this.children.forEach(e)}}function E4(n,e){const t=Hr.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(Si(r),n(o-e))};return it.read(r,!0),()=>Si(r)}const xk=["TopLeft","TopRight","BottomLeft","BottomRight"],T4=xk.length,ub=n=>typeof n=="string"?parseFloat(n):n,cb=n=>typeof n=="number"||Ae.test(n);function S4(n,e,t,r,s,o){s?(n.opacity=pt(0,t.opacity!==void 0?t.opacity:1,k4(r)),n.opacityExit=pt(e.opacity!==void 0?e.opacity:1,0,C4(r))):o&&(n.opacity=pt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<T4;l++){const u=`border${xk[l]}Radius`;let d=db(e,u),h=db(t,u);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||cb(d)===cb(h)?(n[u]=Math.max(pt(ub(d),ub(h),r),0),(qr.test(h)||qr.test(d))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=pt(e.rotate||0,t.rotate||0,r))}function db(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const k4=bk(0,.5,VS),C4=bk(.5,.95,qn);function bk(n,e,t){return r=>r<n?0:r>e?1:t(al(n,e,r))}function hb(n,e){n.min=e.min,n.max=e.max}function rr(n,e){hb(n.x,e.x),hb(n.y,e.y)}function fb(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function pb(n,e,t,r,s){return n-=e,n=Hh(n,1/t,r),s!==void 0&&(n=Hh(n,1/s,r)),n}function P4(n,e=0,t=1,r=.5,s,o=n,l=n){if(qr.test(e)&&(e=parseFloat(e),e=pt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=pt(o.min,o.max,r);n===o&&(u-=e),n.min=pb(n.min,e,t,u,s),n.max=pb(n.max,e,t,u,s)}function mb(n,e,[t,r,s],o,l){P4(n,e[t],e[r],e[s],e.scale,o,l)}const A4=["x","scaleX","originX"],I4=["y","scaleY","originY"];function gb(n,e,t,r){mb(n.x,e,A4,t?t.x:void 0,r?r.x:void 0),mb(n.y,e,I4,t?t.y:void 0,r?r.y:void 0)}function yb(n){return n.translate===0&&n.scale===1}function Ek(n){return yb(n.x)&&yb(n.y)}function vb(n,e){return n.min===e.min&&n.max===e.max}function R4(n,e){return vb(n.x,e.x)&&vb(n.y,e.y)}function _b(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Tk(n,e){return _b(n.x,e.x)&&_b(n.y,e.y)}function wb(n){return wn(n.x)/wn(n.y)}function xb(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class N4{constructor(){this.members=[]}add(e){M0(this.members,e),e.scheduleRender()}remove(e){if(V0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function j4(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:_,skewX:E,skewY:C}=t;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),_&&(r+=`rotateY(${_}deg) `),E&&(r+=`skewX(${E}deg) `),C&&(r+=`skewY(${C}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const Km=["","X","Y","Z"],D4={visibility:"hidden"},bb=1e3;let O4=0;function Gm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function Sk(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=RS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",it,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&Sk(r)}function kk({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e==null?void 0:e()){this.id=O4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(V4),this.nodes.forEach(z4),this.nodes.forEach(W4),this.nodes.forEach($4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new b4)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new F0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=w4(l),this.instance=l;const{layoutId:d,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||d)&&(this.isLayoutDirty=!0),n){let v;const _=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=E4(_,250),bh.hasAnimatedSinceResize&&(bh.hasAnimatedSinceResize=!1,this.nodes.forEach(Tb))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&g&&(d||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:_,hasRelativeLayoutChanged:E,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||g.getDefaultTransition()||Q4,{onLayoutAnimationStart:A,onLayoutAnimationComplete:D}=g.getProps(),F=!this.targetLayout||!Tk(this.targetLayout,C),$=!_&&E;if(this.options.layoutRoot||this.resumeFrom||$||_&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const B={...U0(j,"layout"),onPlay:A,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else _||Tb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Si(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(H4),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Sk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Eb);return}this.isUpdating||this.nodes.forEach(U4),this.isUpdating=!1,this.nodes.forEach(B4),this.nodes.forEach(L4),this.nodes.forEach(M4),this.clearAllSnapshots();const u=Hr.now();Yt.delta=Is(0,1e3/60,u-Yt.timestamp),Yt.timestamp=u,Yt.isProcessing=!0,$m.update.process(Yt),$m.preRender.process(Yt),$m.render.process(Yt),Yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,W0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(F4),this.sharedNodes.forEach(q4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,it.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){it.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!Ek(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&(u||_o(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),J4(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return Et();const d=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(Y4))){const{scroll:g}=this.root;g&&(Qa(d.x,g.offset.x),Qa(d.y,g.offset.y))}return d}removeElementScroll(l){var u;const d=Et();if(rr(d,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return d;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:_}=g;g!==this.root&&v&&_.layoutScroll&&(v.wasRoot&&rr(d,l),Qa(d.x,v.offset.x),Qa(d.y,v.offset.y))}return d}applyTransform(l,u=!1){const d=Et();rr(d,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ja(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),_o(g.latestValues)&&Ja(d,g.latestValues)}return _o(this.latestValues)&&Ja(d,this.latestValues),d}removeTransform(l){const u=Et();rr(u,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!_o(h.latestValues))continue;Vg(h.latestValues)&&h.updateSnapshot();const g=Et(),v=h.measurePageBox();rr(g,v),gb(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return _o(this.latestValues)&&gb(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==d;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:_}=this.options;if(!(!this.layout||!(v||_))){if(this.resolvedRelativeTargetAt=Yt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Ku(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rr(this.target,this.layout.layoutBox),mk(this.target,this.targetDelta)):rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Ku(this.relativeTargetOrigin,this.target,E.target),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Vg(this.parent.latestValues)||pk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Yt.timestamp&&(h=!1),h)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;rr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,E=this.treeScale.y;e4(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Et());const{target:C}=u;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(fb(this.prevProjectionDelta.x,this.projectionDelta.x),fb(this.prevProjectionDelta.y,this.projectionDelta.y)),qu(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==E||!xb(this.projectionDelta.x,this.prevProjectionDelta.x)||!xb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ga(),this.projectionDelta=Ga(),this.projectionDeltaWithTransform=Ga()}setAnimationOrigin(l,u=!1){const d=this.snapshot,h=d?d.latestValues:{},g={...this.latestValues},v=Ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=Et(),E=d?d.source:void 0,C=this.layout?this.layout.source:void 0,j=E!==C,A=this.getStack(),D=!A||A.members.length<=1,F=!!(j&&!D&&this.options.crossfade===!0&&!this.path.some(G4));this.animationProgress=0;let $;this.mixTargetDelta=B=>{const U=B/1e3;Sb(v.x,l.x,U),Sb(v.y,l.y,U),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ku(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),K4(this.relativeTarget,this.relativeTargetOrigin,_,U),$&&R4(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=Et()),rr($,this.relativeTarget)),j&&(this.animationValues=g,S4(g,h,this.latestValues,U,F,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Si(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=it.update(()=>{bh.hasAnimatedSinceResize=!0,this.currentAnimation=_4(0,bb,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:h,latestValues:g}=l;if(!(!u||!d||!h)){if(this!==l&&this.layout&&h&&Ck(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||Et();const v=wn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=wn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}rr(u,d),Ja(u,g),qu(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new N4),this.sharedNodes.get(l).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const h={};d.z&&Gm("z",l,h,this.animationValues);for(let g=0;g<Km.length;g++)Gm(`rotate${Km[g]}`,l,h,this.animationValues),Gm(`skew${Km[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return D4;const h={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=xh(l==null?void 0:l.pointerEvents)||"",h.transform=g?g(this.latestValues,""):"none",h;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=xh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!_o(this.latestValues)&&(j.transform=g?g({},""):"none",this.hasProjected=!1),j}const _=v.animationValues||v.latestValues;this.applyTransformsToTarget(),h.transform=j4(this.projectionDeltaWithTransform,this.treeScale,_),g&&(h.transform=g(_,h.transform));const{x:E,y:C}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${C.origin*100}% 0`,v.animationValues?h.opacity=v===this?(d=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:h.opacity=v===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const j in sc){if(_[j]===void 0)continue;const{correct:A,applyTo:D,isCSSVariable:F}=sc[j],$=h.transform==="none"?_[j]:A(_[j],v);if(D){const B=D.length;for(let U=0;U<B;U++)h[D[U]]=$}else F?this.options.visualElement.renderState.vars[j]=$:h[j]=$}return this.options.layoutId&&(h.pointerEvents=v===this?xh(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(Eb),this.root.sharedNodes.clear()}}}function L4(n){n.updateLayout()}function M4(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=t.source!==n.layout.source;o==="size"?sr(v=>{const _=l?t.measuredBox[v]:t.layoutBox[v],E=wn(_);_.min=r[v].min,_.max=_.min+E}):Ck(o,t.layoutBox,r)&&sr(v=>{const _=l?t.measuredBox[v]:t.layoutBox[v],E=wn(r[v]);_.max=_.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+E)});const u=Ga();qu(u,r,t.layoutBox);const d=Ga();l?qu(d,n.applyTransform(s,!0),t.measuredBox):qu(d,r,t.layoutBox);const h=!Ek(u);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:_,layout:E}=v;if(_&&E){const C=Et();Ku(C,t.layoutBox,_.layoutBox);const j=Et();Ku(j,r,E.layoutBox),Tk(C,j)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=j,n.relativeTargetOrigin=C,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function V4(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function $4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function F4(n){n.clearSnapshot()}function Eb(n){n.clearMeasurements()}function U4(n){n.isLayoutDirty=!1}function B4(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Tb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function z4(n){n.resolveTargetDelta()}function W4(n){n.calcProjection()}function H4(n){n.resetSkewAndRotation()}function q4(n){n.removeLeadSnapshot()}function Sb(n,e,t){n.translate=pt(e.translate,0,t),n.scale=pt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function kb(n,e,t,r){n.min=pt(e.min,t.min,r),n.max=pt(e.max,t.max,r)}function K4(n,e,t,r){kb(n.x,e.x,t.x,r),kb(n.y,e.y,t.y,r)}function G4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Q4={duration:.45,ease:[.4,0,.1,1]},Cb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Pb=Cb("applewebkit/")&&!Cb("chrome/")?Math.round:qn;function Ab(n){n.min=Pb(n.min),n.max=Pb(n.max)}function J4(n){Ab(n.x),Ab(n.y)}function Ck(n,e,t){return n==="position"||n==="preserve-aspect"&&!XO(wb(e),wb(t),.2)}function Y4(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const X4=kk({attachResizeListener:(n,e)=>lc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qm={current:void 0},Pk=kk({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Qm.current){const n=new X4({});n.mount(window),n.setOptions({layoutScroll:!0}),Qm.current=n}return Qm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Z4={pan:{Feature:m4},drag:{Feature:p4,ProjectionNode:Pk,MeasureLayout:wk}};function Ib(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&it.postRender(()=>o(e,kc(e)))}class eL extends Li{mount(){const{current:e}=this.node;e&&(this.unmount=aj(e,(t,r)=>(Ib(this.node,r,"Start"),s=>Ib(this.node,s,"End"))))}unmount(){}}class tL extends Li{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sc(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Rb(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&it.postRender(()=>o(e,kc(e)))}class nL extends Li{mount(){const{current:e}=this.node;e&&(this.unmount=dj(e,(t,r)=>(Rb(this.node,r,"Start"),(s,{success:o})=>Rb(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ug=new WeakMap,Jm=new WeakMap,rL=n=>{const e=Ug.get(n.target);e&&e(n)},sL=n=>{n.forEach(rL)};function iL({root:n,...e}){const t=n||document;Jm.has(t)||Jm.set(t,{});const r=Jm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(sL,{root:n,...e})),r[s]}function oL(n,e,t){const r=iL(e);return Ug.set(n,t),r.observe(n),()=>{Ug.delete(n),r.unobserve(n)}}const aL={some:0,all:1};class lL extends Li{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:aL[s]},u=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=h?g:v;_&&_(d)};return oL(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(uL(e,t))&&this.startObserver()}unmount(){}}function uL({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const cL={inView:{Feature:lL},tap:{Feature:nL},focus:{Feature:tL},hover:{Feature:eL}},dL={layout:{ProjectionNode:Pk,MeasureLayout:wk}},Bg={current:null},Ak={current:!1};function hL(){if(Ak.current=!0,!!O0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Bg.current=n.matches;n.addListener(e),e()}else Bg.current=!1}const fL=[...ZS,cn,ki],pL=n=>fL.find(XS(n)),mL=new WeakMap;function gL(n,e,t){for(const r in e){const s=e[r],o=t[r];if(fn(s))n.addValue(r,s);else if(fn(o))n.addValue(r,nc(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,nc(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Nb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Hr.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,it.render(this.render,!1,!0))};const{latestValues:d,renderState:h,onUpdate:g}=l;this.onUpdate=g,this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=bf(t),this.isVariantNode=mS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const E in _){const C=_[E];d[E]!==void 0&&fn(C)&&C.set(d[E],!1)}}mount(e){this.current=e,mL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),Ak.current||hL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Si(this.notifyUpdate),Si(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Oo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&it.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ll){const t=ll[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Nb.length;r++){const s=Nb[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=gL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=nc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(JS(s)||FS(s))?s=parseFloat(s):!pL(s)&&ki.test(t)&&(s=KS(e,t)),this.setBaseTarget(e,fn(s)?s.get():s)),fn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=ry(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new F0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Ik extends yL{constructor(){super(...arguments),this.KeyframeResolver=ek}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function vL(n){return window.getComputedStyle(n)}class _L extends Ik{constructor(){super(...arguments),this.type="html",this.renderInstance=kS}readValueFromInstance(e,t){if(Oo.has(t))return ID(e,t);{const r=vL(e),s=(Q0(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return gk(e,t)}build(e,t,r){X0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return sy(e,t,r)}}class wL extends Ik{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Et,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&SS(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Oo.has(t)){const r=qS(t);return r&&r.default||0}return t=CS.has(t)?t:G0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return AS(e,t,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&it.postRender(this.updateDimensions)}build(e,t,r){ty(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){PS(e,t,r,s)}mount(e){this.isSVGTag=ny(e.tagName),super.mount(e)}}const xL=(n,e)=>ey(n)?new wL(e):new _L(e,{allowProjection:n!==P.Fragment}),bL=rD({...WO,...cL,...Z4,...dL},xL),jb=_j(bL),EL=()=>{};var Db={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},TL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Nk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,h=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let _=(u&15)<<2|h>>6,E=h&63;d||(E=64,l||(_=64)),r.push(t[g],t[v],t[_],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):TL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||h==null||v==null)throw new SL;const _=o<<2|u>>4;if(r.push(_),h!==64){const E=u<<4&240|h>>2;if(r.push(E),v!==64){const C=h<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class SL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kL=function(n){const e=Rk(n);return Nk.encodeByteArray(e,!0)},qh=function(n){return kL(n).replace(/\./g,"")},jk=function(n){try{return Nk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=()=>CL().__FIREBASE_DEFAULTS__,AL=()=>{if(typeof process>"u"||typeof Db>"u")return;const n=Db.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},IL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&jk(n[1]);return e&&JSON.parse(e)},Tf=()=>{try{return EL()||PL()||AL()||IL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Dk=n=>{var e,t;return(t=(e=Tf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ok=n=>{const e=Dk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Lk=()=>{var n;return(n=Tf())===null||n===void 0?void 0:n.config},Mk=n=>{var e;return(e=Tf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[qh(JSON.stringify(t)),qh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function jL(){var n;const e=(n=Tf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ML(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function VL(){return!jL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $L(){try{return typeof indexedDB=="object"}catch{return!1}}function FL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="FirebaseError";class ts extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=UL,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cc.prototype.create)}}class Cc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?BL(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new ts(s,u,r)}}function BL(n,e){return n.replace(zL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zL=/\{\$([^}]+)}/g;function WL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Po(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(Ob(o)&&Ob(l)){if(!Po(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Ob(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ou(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Lu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HL(n,e){const t=new qL(n,e);return t.subscribe.bind(t)}class qL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");KL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Ym),s.error===void 0&&(s.error=Ym),s.complete===void 0&&(s.complete=Ym);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ym(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n){return n&&n._delegate?n._delegate:n}class Ci{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JL(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QL(n){return n===wo?void 0:n}function JL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const XL={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},ZL=Ue.INFO,eM={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},tM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=eM[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fy{constructor(e){this.name=e,this._logLevel=ZL,this._logHandler=tM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const nM=(n,e)=>e.some(t=>n instanceof t);let Lb,Mb;function rM(){return Lb||(Lb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sM(){return Mb||(Mb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $k=new WeakMap,zg=new WeakMap,Fk=new WeakMap,Xm=new WeakMap,py=new WeakMap;function iM(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(_i(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&$k.set(t,n)}).catch(()=>{}),py.set(e,n),e}function oM(n){if(zg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});zg.set(n,e)}let Wg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Fk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _i(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function aM(n){Wg=n(Wg)}function lM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Zm(this),e,...t);return Fk.set(r,e.sort?e.sort():[e]),_i(r)}:sM().includes(n)?function(...e){return n.apply(Zm(this),e),_i($k.get(this))}:function(...e){return _i(n.apply(Zm(this),e))}}function uM(n){return typeof n=="function"?lM(n):(n instanceof IDBTransaction&&oM(n),nM(n,rM())?new Proxy(n,Wg):n)}function _i(n){if(n instanceof IDBRequest)return iM(n);if(Xm.has(n))return Xm.get(n);const e=uM(n);return e!==n&&(Xm.set(n,e),py.set(e,n)),e}const Zm=n=>py.get(n);function cM(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=_i(l);return r&&l.addEventListener("upgradeneeded",d=>{r(_i(l.result),d.oldVersion,d.newVersion,_i(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const dM=["get","getKey","getAll","getAllKeys","count"],hM=["put","add","delete","clear"],eg=new Map;function Vb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(eg.get(e))return eg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=hM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dM.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let h=d.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),s&&d.done]))[0]};return eg.set(e,o),o}aM(n=>({...n,get:(e,t,r)=>Vb(e,t)||n.get(e,t,r),has:(e,t)=>!!Vb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(pM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function pM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hg="@firebase/app",$b="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new fy("@firebase/app"),mM="@firebase/app-compat",gM="@firebase/analytics-compat",yM="@firebase/analytics",vM="@firebase/app-check-compat",_M="@firebase/app-check",wM="@firebase/auth",xM="@firebase/auth-compat",bM="@firebase/database",EM="@firebase/data-connect",TM="@firebase/database-compat",SM="@firebase/functions",kM="@firebase/functions-compat",CM="@firebase/installations",PM="@firebase/installations-compat",AM="@firebase/messaging",IM="@firebase/messaging-compat",RM="@firebase/performance",NM="@firebase/performance-compat",jM="@firebase/remote-config",DM="@firebase/remote-config-compat",OM="@firebase/storage",LM="@firebase/storage-compat",MM="@firebase/firestore",VM="@firebase/vertexai",$M="@firebase/firestore-compat",FM="firebase",UM="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="[DEFAULT]",BM={[Hg]:"fire-core",[mM]:"fire-core-compat",[yM]:"fire-analytics",[gM]:"fire-analytics-compat",[_M]:"fire-app-check",[vM]:"fire-app-check-compat",[wM]:"fire-auth",[xM]:"fire-auth-compat",[bM]:"fire-rtdb",[EM]:"fire-data-connect",[TM]:"fire-rtdb-compat",[SM]:"fire-fn",[kM]:"fire-fn-compat",[CM]:"fire-iid",[PM]:"fire-iid-compat",[AM]:"fire-fcm",[IM]:"fire-fcm-compat",[RM]:"fire-perf",[NM]:"fire-perf-compat",[jM]:"fire-rc",[DM]:"fire-rc-compat",[OM]:"fire-gcs",[LM]:"fire-gcs-compat",[MM]:"fire-fst",[$M]:"fire-fst-compat",[VM]:"fire-vertex","fire-js":"fire-js",[FM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Map,zM=new Map,Kg=new Map;function Fb(n,e){try{n.container.addComponent(e)}catch(t){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ao(n){const e=n.name;if(Kg.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;Kg.set(e,n);for(const t of Kh.values())Fb(t,n);for(const t of zM.values())Fb(t,n);return!0}function Sf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ir(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new Cc("app","Firebase",WM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=UM;function my(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:qg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw wi.create("bad-app-name",{appName:String(s)});if(t||(t=Lk()),!t)throw wi.create("no-options");const o=Kh.get(s);if(o){if(Po(t,o.options)&&Po(r,o.config))return o;throw wi.create("duplicate-app",{appName:s})}const l=new YL(s);for(const d of Kg.values())l.addComponent(d);const u=new HM(t,r,l);return Kh.set(s,u),u}function gy(n=qg){const e=Kh.get(n);if(!e&&n===qg&&Lk())return my();if(!e)throw wi.create("no-app",{appName:n});return e}function Kr(n,e,t){var r;let s=(r=BM[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(u.join(" "));return}Ao(new Ci(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="firebase-heartbeat-database",KM=1,uc="firebase-heartbeat-store";let tg=null;function Uk(){return tg||(tg=cM(qM,KM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uc)}catch(t){console.warn(t)}}}}).catch(n=>{throw wi.create("idb-open",{originalErrorMessage:n.message})})),tg}async function GM(n){try{const t=(await Uk()).transaction(uc),r=await t.objectStore(uc).get(Bk(n));return await t.done,r}catch(e){if(e instanceof ts)Rs.warn(e.message);else{const t=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rs.warn(t.message)}}}async function Ub(n,e){try{const r=(await Uk()).transaction(uc,"readwrite");await r.objectStore(uc).put(e,Bk(n)),await r.done}catch(t){if(t instanceof ts)Rs.warn(t.message);else{const r=wi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rs.warn(r.message)}}}function Bk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=1024,JM=30;class YM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Bb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>JM){const l=eV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bb(),{heartbeatsToSend:r,unsentEntries:s}=XM(this._heartbeatsCache.heartbeats),o=qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Rs.warn(t),""}}}function Bb(){return new Date().toISOString().substring(0,10)}function XM(n,e=QM){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),zb(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),zb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ZM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $L()?FL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await GM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ub(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ub(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zb(n){return qh(JSON.stringify({version:2,heartbeats:n})).length}function eV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(n){Ao(new Ci("platform-logger",e=>new fM(e),"PRIVATE")),Ao(new Ci("heartbeat",e=>new YM(e),"PRIVATE")),Kr(Hg,$b,n),Kr(Hg,$b,"esm2017"),Kr("fire-js","")}tV("");var nV="firebase",rV="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(nV,rV,"app");var Wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,zk;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,b){function S(){}S.prototype=b.prototype,I.D=b.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(R,M,W){for(var O=Array(arguments.length-2),re=2;re<arguments.length;re++)O[re-2]=arguments[re];return b.prototype[M].apply(R,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,b,S){S||(S=0);var R=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)R[M]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(M=0;16>M;++M)R[M]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=I.g[0],S=I.g[1],M=I.g[2];var W=I.g[3],O=b+(W^S&(M^W))+R[0]+3614090360&4294967295;b=S+(O<<7&4294967295|O>>>25),O=W+(M^b&(S^M))+R[1]+3905402710&4294967295,W=b+(O<<12&4294967295|O>>>20),O=M+(S^W&(b^S))+R[2]+606105819&4294967295,M=W+(O<<17&4294967295|O>>>15),O=S+(b^M&(W^b))+R[3]+3250441966&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(W^S&(M^W))+R[4]+4118548399&4294967295,b=S+(O<<7&4294967295|O>>>25),O=W+(M^b&(S^M))+R[5]+1200080426&4294967295,W=b+(O<<12&4294967295|O>>>20),O=M+(S^W&(b^S))+R[6]+2821735955&4294967295,M=W+(O<<17&4294967295|O>>>15),O=S+(b^M&(W^b))+R[7]+4249261313&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(W^S&(M^W))+R[8]+1770035416&4294967295,b=S+(O<<7&4294967295|O>>>25),O=W+(M^b&(S^M))+R[9]+2336552879&4294967295,W=b+(O<<12&4294967295|O>>>20),O=M+(S^W&(b^S))+R[10]+4294925233&4294967295,M=W+(O<<17&4294967295|O>>>15),O=S+(b^M&(W^b))+R[11]+2304563134&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(W^S&(M^W))+R[12]+1804603682&4294967295,b=S+(O<<7&4294967295|O>>>25),O=W+(M^b&(S^M))+R[13]+4254626195&4294967295,W=b+(O<<12&4294967295|O>>>20),O=M+(S^W&(b^S))+R[14]+2792965006&4294967295,M=W+(O<<17&4294967295|O>>>15),O=S+(b^M&(W^b))+R[15]+1236535329&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(M^W&(S^M))+R[1]+4129170786&4294967295,b=S+(O<<5&4294967295|O>>>27),O=W+(S^M&(b^S))+R[6]+3225465664&4294967295,W=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(W^b))+R[11]+643717713&4294967295,M=W+(O<<14&4294967295|O>>>18),O=S+(W^b&(M^W))+R[0]+3921069994&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(M^W&(S^M))+R[5]+3593408605&4294967295,b=S+(O<<5&4294967295|O>>>27),O=W+(S^M&(b^S))+R[10]+38016083&4294967295,W=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(W^b))+R[15]+3634488961&4294967295,M=W+(O<<14&4294967295|O>>>18),O=S+(W^b&(M^W))+R[4]+3889429448&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(M^W&(S^M))+R[9]+568446438&4294967295,b=S+(O<<5&4294967295|O>>>27),O=W+(S^M&(b^S))+R[14]+3275163606&4294967295,W=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(W^b))+R[3]+4107603335&4294967295,M=W+(O<<14&4294967295|O>>>18),O=S+(W^b&(M^W))+R[8]+1163531501&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(M^W&(S^M))+R[13]+2850285829&4294967295,b=S+(O<<5&4294967295|O>>>27),O=W+(S^M&(b^S))+R[2]+4243563512&4294967295,W=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(W^b))+R[7]+1735328473&4294967295,M=W+(O<<14&4294967295|O>>>18),O=S+(W^b&(M^W))+R[12]+2368359562&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(S^M^W)+R[5]+4294588738&4294967295,b=S+(O<<4&4294967295|O>>>28),O=W+(b^S^M)+R[8]+2272392833&4294967295,W=b+(O<<11&4294967295|O>>>21),O=M+(W^b^S)+R[11]+1839030562&4294967295,M=W+(O<<16&4294967295|O>>>16),O=S+(M^W^b)+R[14]+4259657740&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(S^M^W)+R[1]+2763975236&4294967295,b=S+(O<<4&4294967295|O>>>28),O=W+(b^S^M)+R[4]+1272893353&4294967295,W=b+(O<<11&4294967295|O>>>21),O=M+(W^b^S)+R[7]+4139469664&4294967295,M=W+(O<<16&4294967295|O>>>16),O=S+(M^W^b)+R[10]+3200236656&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(S^M^W)+R[13]+681279174&4294967295,b=S+(O<<4&4294967295|O>>>28),O=W+(b^S^M)+R[0]+3936430074&4294967295,W=b+(O<<11&4294967295|O>>>21),O=M+(W^b^S)+R[3]+3572445317&4294967295,M=W+(O<<16&4294967295|O>>>16),O=S+(M^W^b)+R[6]+76029189&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(S^M^W)+R[9]+3654602809&4294967295,b=S+(O<<4&4294967295|O>>>28),O=W+(b^S^M)+R[12]+3873151461&4294967295,W=b+(O<<11&4294967295|O>>>21),O=M+(W^b^S)+R[15]+530742520&4294967295,M=W+(O<<16&4294967295|O>>>16),O=S+(M^W^b)+R[2]+3299628645&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(M^(S|~W))+R[0]+4096336452&4294967295,b=S+(O<<6&4294967295|O>>>26),O=W+(S^(b|~M))+R[7]+1126891415&4294967295,W=b+(O<<10&4294967295|O>>>22),O=M+(b^(W|~S))+R[14]+2878612391&4294967295,M=W+(O<<15&4294967295|O>>>17),O=S+(W^(M|~b))+R[5]+4237533241&4294967295,S=M+(O<<21&4294967295|O>>>11),O=b+(M^(S|~W))+R[12]+1700485571&4294967295,b=S+(O<<6&4294967295|O>>>26),O=W+(S^(b|~M))+R[3]+2399980690&4294967295,W=b+(O<<10&4294967295|O>>>22),O=M+(b^(W|~S))+R[10]+4293915773&4294967295,M=W+(O<<15&4294967295|O>>>17),O=S+(W^(M|~b))+R[1]+2240044497&4294967295,S=M+(O<<21&4294967295|O>>>11),O=b+(M^(S|~W))+R[8]+1873313359&4294967295,b=S+(O<<6&4294967295|O>>>26),O=W+(S^(b|~M))+R[15]+4264355552&4294967295,W=b+(O<<10&4294967295|O>>>22),O=M+(b^(W|~S))+R[6]+2734768916&4294967295,M=W+(O<<15&4294967295|O>>>17),O=S+(W^(M|~b))+R[13]+1309151649&4294967295,S=M+(O<<21&4294967295|O>>>11),O=b+(M^(S|~W))+R[4]+4149444226&4294967295,b=S+(O<<6&4294967295|O>>>26),O=W+(S^(b|~M))+R[11]+3174756917&4294967295,W=b+(O<<10&4294967295|O>>>22),O=M+(b^(W|~S))+R[2]+718787259&4294967295,M=W+(O<<15&4294967295|O>>>17),O=S+(W^(M|~b))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+W&4294967295}r.prototype.u=function(I,b){b===void 0&&(b=I.length);for(var S=b-this.blockSize,R=this.B,M=this.h,W=0;W<b;){if(M==0)for(;W<=S;)s(this,I,W),W+=this.blockSize;if(typeof I=="string"){for(;W<b;)if(R[M++]=I.charCodeAt(W++),M==this.blockSize){s(this,R),M=0;break}}else for(;W<b;)if(R[M++]=I[W++],M==this.blockSize){s(this,R),M=0;break}}this.h=M,this.o+=b},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;var S=8*this.o;for(b=I.length-8;b<I.length;++b)I[b]=S&255,S/=256;for(this.u(I),I=Array(16),b=S=0;4>b;++b)for(var R=0;32>R;R+=8)I[S++]=this.g[b]>>>R&255;return I};function o(I,b){var S=u;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=b(I)}function l(I,b){this.h=b;for(var S=[],R=!0,M=I.length-1;0<=M;M--){var W=I[M]|0;R&&W==b||(S[M]=W,R=!1)}this.g=S}var u={};function d(I){return-128<=I&&128>I?o(I,function(b){return new l([b|0],0>b?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return A(h(-I));for(var b=[],S=1,R=0;I>=S;R++)b[R]=I/S|0,S*=4294967296;return new l(b,0)}function g(I,b){if(I.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I.charAt(0)=="-")return A(g(I.substring(1),b));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(b,8)),R=v,M=0;M<I.length;M+=8){var W=Math.min(8,I.length-M),O=parseInt(I.substring(M,M+W),b);8>W?(W=h(Math.pow(b,W)),R=R.j(W).add(h(O))):(R=R.j(S),R=R.add(h(O)))}return R}var v=d(0),_=d(1),E=d(16777216);n=l.prototype,n.m=function(){if(j(this))return-A(this).m();for(var I=0,b=1,S=0;S<this.g.length;S++){var R=this.i(S);I+=(0<=R?R:4294967296+R)*b,b*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(j(this))return"-"+A(this).toString(I);for(var b=h(Math.pow(I,6)),S=this,R="";;){var M=B(S,b).g;S=D(S,M.j(b));var W=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=M,C(S))return W+R;for(;6>W.length;)W="0"+W;R=W+R}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var b=0;b<I.g.length;b++)if(I.g[b]!=0)return!1;return!0}function j(I){return I.h==-1}n.l=function(I){return I=D(this,I),j(I)?-1:C(I)?0:1};function A(I){for(var b=I.g.length,S=[],R=0;R<b;R++)S[R]=~I.g[R];return new l(S,~I.h).add(_)}n.abs=function(){return j(this)?A(this):this},n.add=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0,M=0;M<=b;M++){var W=R+(this.i(M)&65535)+(I.i(M)&65535),O=(W>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);R=O>>>16,W&=65535,O&=65535,S[M]=O<<16|W}return new l(S,S[S.length-1]&-2147483648?-1:0)};function D(I,b){return I.add(A(b))}n.j=function(I){if(C(this)||C(I))return v;if(j(this))return j(I)?A(this).j(A(I)):A(A(this).j(I));if(j(I))return A(this.j(A(I)));if(0>this.l(E)&&0>I.l(E))return h(this.m()*I.m());for(var b=this.g.length+I.g.length,S=[],R=0;R<2*b;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<I.g.length;M++){var W=this.i(R)>>>16,O=this.i(R)&65535,re=I.i(M)>>>16,he=I.i(M)&65535;S[2*R+2*M]+=O*he,F(S,2*R+2*M),S[2*R+2*M+1]+=W*he,F(S,2*R+2*M+1),S[2*R+2*M+1]+=O*re,F(S,2*R+2*M+1),S[2*R+2*M+2]+=W*re,F(S,2*R+2*M+2)}for(R=0;R<b;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=b;R<2*b;R++)S[R]=0;return new l(S,0)};function F(I,b){for(;(I[b]&65535)!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function $(I,b){this.g=I,this.h=b}function B(I,b){if(C(b))throw Error("division by zero");if(C(I))return new $(v,v);if(j(I))return b=B(A(I),b),new $(A(b.g),A(b.h));if(j(b))return b=B(I,A(b)),new $(A(b.g),b.h);if(30<I.g.length){if(j(I)||j(b))throw Error("slowDivide_ only works with positive integers.");for(var S=_,R=b;0>=R.l(I);)S=U(S),R=U(R);var M=V(S,1),W=V(R,1);for(R=V(R,2),S=V(S,2);!C(R);){var O=W.add(R);0>=O.l(I)&&(M=M.add(S),W=O),R=V(R,1),S=V(S,1)}return b=D(I,M.j(b)),new $(M,b)}for(M=v;0<=I.l(b);){for(S=Math.max(1,Math.floor(I.m()/b.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),W=h(S),O=W.j(b);j(O)||0<O.l(I);)S-=R,W=h(S),O=W.j(b);C(W)&&(W=_),M=M.add(W),I=D(I,O)}return new $(M,I)}n.A=function(I){return B(this,I).h},n.and=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0;R<b;R++)S[R]=this.i(R)&I.i(R);return new l(S,this.h&I.h)},n.or=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0;R<b;R++)S[R]=this.i(R)|I.i(R);return new l(S,this.h|I.h)},n.xor=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0;R<b;R++)S[R]=this.i(R)^I.i(R);return new l(S,this.h^I.h)};function U(I){for(var b=I.g.length+1,S=[],R=0;R<b;R++)S[R]=I.i(R)<<1|I.i(R-1)>>>31;return new l(S,I.h)}function V(I,b){var S=b>>5;b%=32;for(var R=I.g.length-S,M=[],W=0;W<R;W++)M[W]=0<b?I.i(W+S)>>>b|I.i(W+S+1)<<32-b:I.i(W+S);return new l(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zk=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,xi=l}).apply(typeof Wb<"u"?Wb:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wk,Mu,Hk,Eh,Gg,qk,Kk,Gk;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,T){return f==Array.prototype||f==Object.prototype||(f[w]=T.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var w=0;w<f.length;++w){var T=f[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(f,w){if(w)e:{var T=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var G=f[N];if(!(G in T))break e;T=T[G]}f=f[f.length-1],N=T[f],w=w(N),w!=N&&w!=null&&e(T,f,{configurable:!0,writable:!0,value:w})}}function o(f,w){f instanceof String&&(f+="");var T=0,N=!1,G={next:function(){if(!N&&T<f.length){var Z=T++;return{value:w(Z,f[Z]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(f){return f||function(){return o(this,function(w,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function h(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function g(f,w,T){return f.call.apply(f.bind,arguments)}function v(f,w,T){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),f.apply(w,G)}}return function(){return f.apply(w,arguments)}}function _(f,w,T){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,_.apply(null,arguments)}function E(f,w){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function C(f,w){function T(){}T.prototype=w.prototype,f.aa=w.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(N,G,Z){for(var de=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)de[Ye-2]=arguments[Ye];return w.prototype[G].apply(N,de)}}function j(f){const w=f.length;if(0<w){const T=Array(w);for(let N=0;N<w;N++)T[N]=f[N];return T}return[]}function A(f,w){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(d(N)){const G=f.length||0,Z=N.length||0;f.length=G+Z;for(let de=0;de<Z;de++)f[G+de]=N[de]}else f.push(N)}}class D{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function F(f){return/^[\s\xa0]*$/.test(f)}function $(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function B(f){return B[" "](f),f}B[" "]=function(){};var U=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function V(f,w,T){for(const N in f)w.call(T,f[N],N,f)}function I(f,w){for(const T in f)w.call(void 0,f[T],T,f)}function b(f){const w={};for(const T in f)w[T]=f[T];return w}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,w){let T,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(T in N)f[T]=N[T];for(let Z=0;Z<S.length;Z++)T=S[Z],Object.prototype.hasOwnProperty.call(N,T)&&(f[T]=N[T])}}function M(f){var w=1;f=f.split(":");const T=[];for(;0<w&&f.length;)T.push(f.shift()),w--;return f.length&&T.push(f.join(":")),T}function W(f){u.setTimeout(()=>{throw f},0)}function O(){var f=me;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class re{constructor(){this.h=this.g=null}add(w,T){const N=he.get();N.set(w,T),this.h?this.h.next=N:this.g=N,this.h=N}}var he=new D(()=>new Ne,f=>f.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,le=!1,me=new re,pe=()=>{const f=u.Promise.resolve(void 0);xe=()=>{f.then(K)}};var K=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(T){W(T)}var w=he;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}le=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,w),u.removeEventListener("test",T,w)}catch{}return f}();function ie(f,w){if(Ee.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(U){e:{try{B(w.nodeName);var G=!0;break e}catch{}G=!1}G||(w=null)}}else T=="mouseover"?w=f.fromElement:T=="mouseout"&&(w=f.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:q[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ie.aa.h.call(this)}}C(ie,Ee);var q={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),te=0;function fe(f,w,T,N,G){this.listener=f,this.proxy=null,this.src=w,this.type=T,this.capture=!!N,this.ha=G,this.key=++te,this.da=this.fa=!1}function ge(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function We(f){this.src=f,this.g={},this.h=0}We.prototype.add=function(f,w,T,N,G){var Z=f.toString();f=this.g[Z],f||(f=this.g[Z]=[],this.h++);var de=At(f,w,N,G);return-1<de?(w=f[de],T||(w.fa=!1)):(w=new fe(w,this.src,Z,!!N,G),w.fa=T,f.push(w)),w};function He(f,w){var T=w.type;if(T in f.g){var N=f.g[T],G=Array.prototype.indexOf.call(N,w,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(N,G,1),Z&&(ge(w),f.g[T].length==0&&(delete f.g[T],f.h--))}}function At(f,w,T,N){for(var G=0;G<f.length;++G){var Z=f[G];if(!Z.da&&Z.listener==w&&Z.capture==!!T&&Z.ha==N)return G}return-1}var Dn="closure_lm_"+(1e6*Math.random()|0),ns={};function $t(f,w,T,N,G){if(Array.isArray(w)){for(var Z=0;Z<w.length;Z++)$t(f,w[Z],T,N,G);return null}return T=jl(T),f&&f[Q]?f.K(w,T,h(N)?!!N.capture:!1,G):rs(f,w,T,!1,N,G)}function rs(f,w,T,N,G,Z){if(!w)throw Error("Invalid event type");var de=h(G)?!!G.capture:!!G,Ye=Bo(f);if(Ye||(f[Dn]=Ye=new We(f)),T=Ye.add(w,T,N,de,Z),T.proxy)return T;if(N=Mc(),T.proxy=N,N.src=f,N.listener=T,f.addEventListener)Le||(G=de),G===void 0&&(G=!1),f.addEventListener(w.toString(),N,G);else if(f.attachEvent)f.attachEvent(is(w.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Mc(){function f(T){return w.call(f.src,f.listener,T)}const w=Nl;return f}function Uo(f,w,T,N,G){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)Uo(f,w[Z],T,N,G);else N=h(N)?!!N.capture:!!N,T=jl(T),f&&f[Q]?(f=f.i,w=String(w).toString(),w in f.g&&(Z=f.g[w],T=At(Z,T,N,G),-1<T&&(ge(Z[T]),Array.prototype.splice.call(Z,T,1),Z.length==0&&(delete f.g[w],f.h--)))):f&&(f=Bo(f))&&(w=f.g[w.toString()],f=-1,w&&(f=At(w,T,N,G)),(T=-1<f?w[f]:null)&&ss(T))}function ss(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[Q])He(w.i,f);else{var T=f.type,N=f.proxy;w.removeEventListener?w.removeEventListener(T,N,f.capture):w.detachEvent?w.detachEvent(is(T),N):w.addListener&&w.removeListener&&w.removeListener(N),(T=Bo(w))?(He(T,f),T.h==0&&(T.src=null,w[Dn]=null)):ge(f)}}}function is(f){return f in ns?ns[f]:ns[f]="on"+f}function Nl(f,w){if(f.da)f=!0;else{w=new ie(w,this);var T=f.listener,N=f.ha||f.src;f.fa&&ss(f),f=T.call(N,w)}return f}function Bo(f){return f=f[Dn],f instanceof We?f:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function jl(f){return typeof f=="function"?f:(f[zo]||(f[zo]=function(w){return f.handleEvent(w)}),f[zo])}function It(){ee.call(this),this.i=new We(this),this.M=this,this.F=null}C(It,ee),It.prototype[Q]=!0,It.prototype.removeEventListener=function(f,w,T,N){Uo(this,f,w,T,N)};function Rt(f,w){var T,N=f.F;if(N)for(T=[];N;N=N.F)T.push(N);if(f=f.M,N=w.type||w,typeof w=="string")w=new Ee(w,f);else if(w instanceof Ee)w.target=w.target||f;else{var G=w;w=new Ee(N,f),R(w,G)}if(G=!0,T)for(var Z=T.length-1;0<=Z;Z--){var de=w.g=T[Z];G=os(de,N,!0,w)&&G}if(de=w.g=f,G=os(de,N,!0,w)&&G,G=os(de,N,!1,w)&&G,T)for(Z=0;Z<T.length;Z++)de=w.g=T[Z],G=os(de,N,!1,w)&&G}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var T=f.g[w],N=0;N<T.length;N++)ge(T[N]);delete f.g[w],f.h--}}this.F=null},It.prototype.K=function(f,w,T,N){return this.i.add(String(f),w,!1,T,N)},It.prototype.L=function(f,w,T,N){return this.i.add(String(f),w,!0,T,N)};function os(f,w,T,N){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var G=!0,Z=0;Z<w.length;++Z){var de=w[Z];if(de&&!de.da&&de.capture==T){var Ye=de.listener,Nt=de.ha||de.src;de.fa&&He(f.i,de),G=Ye.call(Nt,N)!==!1&&G}}return G&&!N.defaultPrevented}function Dl(f,w,T){if(typeof f=="function")T&&(f=_(f,T));else if(f&&typeof f.handleEvent=="function")f=_(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(f,w||0)}function Ms(f){f.g=Dl(()=>{f.g=null,f.i&&(f.i=!1,Ms(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class Fi extends ee{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ms(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ui(f){ee.call(this),this.h=f,this.g={}}C(Ui,ee);var Ol=[];function Ll(f){V(f.g,function(w,T){this.g.hasOwnProperty(T)&&ss(w)},f),f.g={}}Ui.prototype.N=function(){Ui.aa.N.call(this),Ll(this)},Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ml=u.JSON.stringify,Vl=u.JSON.parse,$l=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Bi(){}Bi.prototype.h=null;function Wo(f){return f.h||(f.h=f.i())}function Ho(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){Ee.call(this,"d")}C(Rr,Ee);function qo(){Ee.call(this,"c")}C(qo,Ee);var Nr={},Fl=null;function zi(){return Fl=Fl||new It}Nr.La="serverreachability";function Ul(f){Ee.call(this,Nr.La,f)}C(Ul,Ee);function as(f){const w=zi();Rt(w,new Ul(w))}Nr.STAT_EVENT="statevent";function Bl(f,w){Ee.call(this,Nr.STAT_EVENT,f),this.stat=w}C(Bl,Ee);function xt(f){const w=zi();Rt(w,new Bl(w,f))}Nr.Ma="timingevent";function Ko(f,w){Ee.call(this,Nr.Ma,f),this.size=w}C(Ko,Ee);function cr(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},w)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function Hi(f,w,T,N,G,Z){f.info(function(){if(f.g)if(Z)for(var de="",Ye=Z.split("&"),Nt=0;Nt<Ye.length;Nt++){var qe=Ye[Nt].split("=");if(1<qe.length){var Ft=qe[0];qe=qe[1];var kt=Ft.split("_");de=2<=kt.length&&kt[1]=="type"?de+(Ft+"="+qe+"&"):de+(Ft+"=redacted&")}}else de=null;else de=Z;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+w+`
`+T+`
`+de})}function Go(f,w,T,N,G,Z,de){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+w+`
`+T+`
`+Z+" "+de})}function dr(f,w,T,N){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Zf(f,T)+(N?" "+N:"")})}function zl(f,w){f.info(function(){return"TIMEOUT: "+w})}Wi.prototype.info=function(){};function Zf(f,w){if(!f.g)return w;if(!w)return null;try{var T=JSON.parse(w);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var N=T[f];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var de=1;de<G.length;de++)G[de]=""}}}}return Ml(T)}catch{return w}}var Qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hr;function qi(){}C(qi,Bi),qi.prototype.g=function(){return new XMLHttpRequest},qi.prototype.i=function(){return{}},hr=new qi;function fr(f,w,T,N){this.j=f,this.i=w,this.l=T,this.R=N||1,this.U=new Ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $c}function $c(){this.i=null,this.g="",this.h=!1}var Wl={},Jo={};function Yo(f,w,T){f.L=1,f.v=Bs(Ln(w)),f.m=T,f.P=!0,Hl(f,null)}function Hl(f,w){f.F=Date.now(),tt(f),f.A=Ln(f.v);var T=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Ws(T.i,"t",N),f.C=0,T=f.j.J,f.h=new $c,f.g=rd(f.j,T?w:null,!f.m),0<f.O&&(f.M=new Fi(_(f.Y,f,f.g),f.O)),w=f.U,T=f.g,N=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(Ol[0]=G.toString()),G=Ol);for(var Z=0;Z<G.length;Z++){var de=$t(T,G[Z],N||w.handleEvent,!1,w.h||w);if(!de)break;w.g[de.key]=de}w=f.H?b(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),as(),Hi(f.i,f.u,f.A,f.l,f.R,f.m)}fr.prototype.ca=function(f){f=f.target;const w=this.M;w&&bn(f)==3?w.j():this.Y(f)},fr.prototype.Y=function(f){try{if(f==this.g)e:{const kt=bn(this.g);var w=this.g.Ba();const Jn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Yl(this.g)))){this.J||kt!=4||w==7||(w==8||0>=Jn?as(3):as(2)),Ki(this);var T=this.g.Z();this.X=T;t:if(Fc(this)){var N=Yl(this.g);f="";var G=N.length,Z=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Vs(this);var de="";break t}this.h.i=new u.TextDecoder}for(w=0;w<G;w++)this.h.h=!0,f+=this.h.i.decode(N[w],{stream:!(Z&&w==G-1)});N.length=0,this.h.g+=f,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=T==200,Go(this.i,this.u,this.A,this.l,this.R,kt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Nt=this.g;if((Ye=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Ye)){var qe=Ye;break t}}qe=null}if(T=qe)dr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,T);else{this.o=!1,this.s=3,xt(12),Gn(this),Vs(this);break e}}if(this.P){T=!0;let Vn;for(;!this.J&&this.C<de.length;)if(Vn=ep(this,de),Vn==Jo){kt==4&&(this.s=4,xt(14),T=!1),dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Wl){this.s=4,xt(15),dr(this.i,this.l,de,"[Invalid Chunk]"),T=!1;break}else dr(this.i,this.l,Vn,null),ql(this,Vn);if(Fc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||de.length!=0||this.h.h||(this.s=1,xt(16),T=!1),this.o=this.o&&T,!T)dr(this.i,this.l,de,"[Invalid Chunked Response]"),Gn(this),Vs(this);else if(0<de.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Zl(Ft),Ft.M=!0,xt(11))}}else dr(this.i,this.l,de,null),ql(this,de);kt==4&&Gn(this),this.o&&!this.J&&(kt==4?la(this.j,this):(this.o=!1,tt(this)))}else ra(this.g),T==400&&0<de.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Gn(this),Vs(this)}}}catch{}finally{}};function Fc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ep(f,w){var T=f.C,N=w.indexOf(`
`,T);return N==-1?Jo:(T=Number(w.substring(T,N)),isNaN(T)?Wl:(N+=1,N+T>w.length?Jo:(w=w.slice(N,N+T),f.C=N+T,w)))}fr.prototype.cancel=function(){this.J=!0,Gn(this)};function tt(f){f.S=Date.now()+f.I,Uc(f,f.I)}function Uc(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=cr(_(f.ba,f),w)}function Ki(f){f.B&&(u.clearTimeout(f.B),f.B=null)}fr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(zl(this.i,this.A),this.L!=2&&(as(),xt(17)),Gn(this),this.s=2,Vs(this)):Uc(this,this.S-f)};function Vs(f){f.j.G==0||f.J||la(f.j,f)}function Gn(f){Ki(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,Ll(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function ql(f,w){try{var T=f.j;if(T.G!=0&&(T.g==f||mn(T.h,f))){if(!f.K&&mn(T.h,f)&&T.G==3){try{var N=T.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)aa(T),vr(T);else break e;oa(T),xt(18)}}else T.za=G[1],0<T.za-T.T&&37500>G[2]&&T.F&&T.v==0&&!T.C&&(T.C=cr(_(T.Za,T),6e3));if(1>=zc(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else hs(T,11)}else if((f.K||T.g==f)&&aa(T),!F(w))for(G=T.Da.g.parse(w),w=0;w<G.length;w++){let qe=G[w];if(T.T=qe[0],qe=qe[1],T.G==2)if(qe[0]=="c"){T.K=qe[1],T.ia=qe[2];const Ft=qe[3];Ft!=null&&(T.la=Ft,T.j.info("VER="+T.la));const kt=qe[4];kt!=null&&(T.Aa=kt,T.j.info("SVER="+T.Aa));const Jn=qe[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(N=1.5*Jn,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Vn=f.g;if(Vn){const eo=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var Z=N.h;Z.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Kl(Z,Z.h),Z.h=null))}if(N.D){const ca=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(N.ya=ca,et(N.I,N.D,ca))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var de=f;if(N.qa=nd(N,N.J?N.ia:null,N.W),de.K){Wc(N.h,de);var Ye=de,Nt=N.L;Nt&&(Ye.I=Nt),Ye.B&&(Ki(Ye),tt(Ye)),N.g=de}else Zi(N);0<T.i.length&&Lr(T)}else qe[0]!="stop"&&qe[0]!="close"||hs(T,7);else T.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?hs(T,7):Gt(T):qe[0]!="noop"&&T.l&&T.l.ta(qe),T.v=0)}}as(4)}catch{}}var Bc=class{constructor(f,w){this.g=f,this.map=w}};function Gi(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function zc(f){return f.h?1:f.g?f.g.size:0}function mn(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function Kl(f,w){f.g?f.g.add(w):f.h=w}function Wc(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}Gi.prototype.cancel=function(){if(this.i=Hc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Hc(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const T of f.g.values())w=w.concat(T.D);return w}return j(f.i)}function Xo(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(d(f)){for(var w=[],T=f.length,N=0;N<T;N++)w.push(f[N]);return w}w=[],T=0;for(N in f)w[T++]=f[N];return w}function Zo(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(d(f)||typeof f=="string"){var w=[];f=f.length;for(var T=0;T<f;T++)w.push(T);return w}w=[],T=0;for(const N in f)w[T++]=N;return w}}}function $s(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(d(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var T=Zo(f),N=Xo(f),G=N.length,Z=0;Z<G;Z++)w.call(void 0,N[Z],T&&T[Z],f)}var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tp(f,w){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var N=f[T].indexOf("="),G=null;if(0<=N){var Z=f[T].substring(0,N);G=f[T].substring(N+1)}else Z=f[T];w(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ls(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof ls){this.h=f.h,Ji(this,f.j),this.o=f.o,this.g=f.g,Fs(this,f.s),this.l=f.l;var w=f.i,T=new jr;T.i=w.i,w.g&&(T.g=new Map(w.g),T.h=w.h),Us(this,T),this.m=f.m}else f&&(w=String(f).match(Qi))?(this.h=!1,Ji(this,w[1]||"",!0),this.o=ze(w[2]||""),this.g=ze(w[3]||"",!0),Fs(this,w[4]),this.l=ze(w[5]||"",!0),Us(this,w[6]||"",!0),this.m=ze(w[7]||"")):(this.h=!1,this.i=new jr(null,this.h))}ls.prototype.toString=function(){var f=[],w=this.j;w&&f.push(zs(w,ea,!0),":");var T=this.g;return(T||w=="file")&&(f.push("//"),(w=this.o)&&f.push(zs(w,ea,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(zs(T,T.charAt(0)=="/"?Gc:Kc,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",zs(T,Gl)),f.join("")};function Ln(f){return new ls(f)}function Ji(f,w,T){f.j=T?ze(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function Fs(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Us(f,w,T){w instanceof jr?(f.i=w,Dr(f.i,f.h)):(T||(w=zs(w,Qc)),f.i=new jr(w,f.h))}function et(f,w,T){f.i.set(w,T)}function Bs(f){return et(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ze(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function zs(f,w,T){return typeof f=="string"?(f=encodeURI(f).replace(w,qc),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function qc(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ea=/[#\/\?@]/g,Kc=/[#\?:]/g,Gc=/[#\?]/g,Qc=/[#\?@]/g,Gl=/#/g;function jr(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Kt(f){f.g||(f.g=new Map,f.h=0,f.i&&tp(f.i,function(w,T){f.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=jr.prototype,n.add=function(f,w){Kt(this),this.i=null,f=Qn(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(w),this.h+=1,this};function pr(f,w){Kt(f),w=Qn(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function mr(f,w){return Kt(f),w=Qn(f,w),f.g.has(w)}n.forEach=function(f,w){Kt(this),this.g.forEach(function(T,N){T.forEach(function(G){f.call(w,G,N,this)},this)},this)},n.na=function(){Kt(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),T=[];for(let N=0;N<w.length;N++){const G=f[N];for(let Z=0;Z<G.length;Z++)T.push(w[N])}return T},n.V=function(f){Kt(this);let w=[];if(typeof f=="string")mr(this,f)&&(w=w.concat(this.g.get(Qn(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)w=w.concat(f[T])}return w},n.set=function(f,w){return Kt(this),this.i=null,f=Qn(this,f),mr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Ws(f,w,T){pr(f,w),0<T.length&&(f.i=null,f.g.set(Qn(f,w),j(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var T=0;T<w.length;T++){var N=w[T];const Z=encodeURIComponent(String(N)),de=this.V(N);for(N=0;N<de.length;N++){var G=Z;de[N]!==""&&(G+="="+encodeURIComponent(String(de[N]))),f.push(G)}}return this.i=f.join("&")};function Qn(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Dr(f,w){w&&!f.j&&(Kt(f),f.i=null,f.g.forEach(function(T,N){var G=N.toLowerCase();N!=G&&(pr(this,N),Ws(this,G,T))},f)),f.j=w}function np(f,w){const T=new Wi;if(u.Image){const N=new Image;N.onload=E(xn,T,"TestLoadImage: loaded",!0,w,N),N.onerror=E(xn,T,"TestLoadImage: error",!1,w,N),N.onabort=E(xn,T,"TestLoadImage: abort",!1,w,N),N.ontimeout=E(xn,T,"TestLoadImage: timeout",!1,w,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else w(!1)}function Jc(f,w){const T=new Wi,N=new AbortController,G=setTimeout(()=>{N.abort(),xn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:N.signal}).then(Z=>{clearTimeout(G),Z.ok?xn(T,"TestPingServer: ok",!0,w):xn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(G),xn(T,"TestPingServer: error",!1,w)})}function xn(f,w,T,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(T)}catch{}}function rp(){this.g=new $l}function Yc(f,w,T){const N=T||"";try{$s(f,function(G,Z){let de=G;h(G)&&(de=Ml(G)),w.push(N+Z+"="+encodeURIComponent(de))})}catch(G){throw w.push(N+"type="+encodeURIComponent("_badmap")),G}}function us(f){this.l=f.Ub||null,this.j=f.eb||!1}C(us,Bi),us.prototype.g=function(){return new Yi(this.l,this.j)},us.prototype.i=function(f){return function(){return f}}({});function Yi(f,w){It.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Yi,It),n=Yi.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,yr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,yr(this)),this.g&&(this.readyState=3,yr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?gr(this):yr(this),this.readyState==3&&Xc(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,gr(this))},n.Qa=function(f){this.g&&(this.response=f,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,yr(f)}n.setRequestHeader=function(f,w){this.u.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=w.next();return f.join(`\r
`)};function yr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function cs(f){let w="";return V(f,function(T,N){w+=N,w+=":",w+=T,w+=`\r
`}),w}function Hs(f,w,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=cs(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):et(f,w,T))}function lt(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(lt,It);var sp=/^https?$/i,Ql=["POST","PUT"];n=lt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,w,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hr.g(),this.v=this.o?Wo(this.o):Wo(hr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(Z){Xi(this,Z);return}if(f=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)T.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())T.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ql,w,void 0))||N||G||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of T)this.g.setRequestHeader(Z,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{na(this),this.u=!0,this.g.send(f),this.u=!1}catch(Z){Xi(this,Z)}};function Xi(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,ta(f),Mn(f)}function ta(f){f.A||(f.A=!0,Rt(f,"complete"),Rt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Rt(this,"complete"),Rt(this,"abort"),Mn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),lt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Jl(this):this.bb())},n.bb=function(){Jl(this)};function Jl(f){if(f.h&&typeof l<"u"&&(!f.v[1]||bn(f)!=4||f.Z()!=2)){if(f.u&&bn(f)==4)Dl(f.Ea,0,f);else if(Rt(f,"readystatechange"),bn(f)==4){f.h=!1;try{const de=f.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var N;if(N=de===0){var G=String(f.D).match(Qi)[1]||null;!G&&u.self&&u.self.location&&(G=u.self.location.protocol.slice(0,-1)),N=!sp.test(G?G.toLowerCase():"")}T=N}if(T)Rt(f,"complete"),Rt(f,"success");else{f.m=6;try{var Z=2<bn(f)?f.g.statusText:""}catch{Z=""}f.l=Z+" ["+f.Z()+"]",ta(f)}}finally{Mn(f)}}}}function Mn(f,w){if(f.g){na(f);const T=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||Rt(f,"ready");try{T.onreadystatechange=N}catch{}}}function na(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function bn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Vl(w)}};function Yl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ra(f){const w={};f=(f.g&&2<=bn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(F(f[N]))continue;var T=M(f[N]);const G=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=w[G]||[];w[G]=Z,Z.push(T)}I(w,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(f,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||w}function Xl(f){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Or("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Or("baseRetryDelayMs",5e3,f),this.cb=Or("retryDelaySeedMs",1e4,f),this.Wa=Or("forwardChannelMaxRetries",2,f),this.wa=Or("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Gi(f&&f.concurrentRequestLimit),this.Da=new rp,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xl.prototype,n.la=8,n.G=1,n.connect=function(f,w,T,N){xt(0),this.W=f,this.H=w||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=nd(this,null,this.W),Lr(this)};function Gt(f){if(sa(f),f.G==3){var w=f.U++,T=Ln(f.I);if(et(T,"SID",f.K),et(T,"RID",w),et(T,"TYPE","terminate"),ds(f,T),w=new fr(f,f.j,w),w.L=2,w.v=Bs(Ln(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=w.v,T=!0),T||(w.g=rd(w.j,null),w.g.ea(w.v)),w.F=Date.now(),tt(w)}td(f)}function vr(f){f.g&&(Zl(f),f.g.cancel(),f.g=null)}function sa(f){vr(f),f.u&&(u.clearTimeout(f.u),f.u=null),aa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Lr(f){if(!On(f.h)&&!f.s){f.s=!0;var w=f.Ga;xe||pe(),le||(xe(),le=!0),me.add(w,f),f.B=0}}function ip(f,w){return zc(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=cr(_(f.Ga,f,w),ed(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new fr(this,this.j,f);let Z=this.o;if(this.S&&(Z?(Z=b(Z),R(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=qs(this,G,w),T=Ln(this.I),et(T,"RID",f),et(T,"CVER",22),this.D&&et(T,"X-HTTP-Session-Id",this.D),ds(this,T),Z&&(this.O?w="headers="+encodeURIComponent(String(cs(Z)))+"&"+w:this.m&&Hs(T,this.m,Z)),Kl(this.h,G),this.Ua&&et(T,"TYPE","init"),this.P?(et(T,"$req",w),et(T,"SID","null"),G.T=!0,Yo(G,T,null)):Yo(G,T,w),this.G=2}}else this.G==3&&(f?ia(this,f):this.i.length==0||On(this.h)||ia(this))};function ia(f,w){var T;w?T=w.l:T=f.U++;const N=Ln(f.I);et(N,"SID",f.K),et(N,"RID",T),et(N,"AID",f.T),ds(f,N),f.m&&f.o&&Hs(N,f.m,f.o),T=new fr(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),w&&(f.i=w.D.concat(f.i)),w=qs(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Kl(f.h,T),Yo(T,N,w)}function ds(f,w){f.H&&V(f.H,function(T,N){et(w,N,T)}),f.l&&$s({},function(T,N){et(w,N,T)})}function qs(f,w,T){T=Math.min(f.i.length,T);var N=f.l?_(f.l.Na,f.l,f):null;e:{var G=f.i;let Z=-1;for(;;){const de=["count="+T];Z==-1?0<T?(Z=G[0].g,de.push("ofs="+Z)):Z=0:de.push("ofs="+Z);let Ye=!0;for(let Nt=0;Nt<T;Nt++){let qe=G[Nt].g;const Ft=G[Nt].map;if(qe-=Z,0>qe)Z=Math.max(0,G[Nt].g-100),Ye=!1;else try{Yc(Ft,de,"req"+qe+"_")}catch{N&&N(Ft)}}if(Ye){N=de.join("&");break e}}}return f=f.i.splice(0,T),w.D=f,N}function Zi(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;xe||pe(),le||(xe(),le=!0),me.add(w,f),f.v=0}}function oa(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=cr(_(f.Fa,f),ed(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=cr(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),vr(this),Zc(this))};function Zl(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function Zc(f){f.g=new fr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=Ln(f.qa);et(w,"RID","rpc"),et(w,"SID",f.K),et(w,"AID",f.T),et(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&et(w,"TO",f.ja),et(w,"TYPE","xmlhttp"),ds(f,w),f.m&&f.o&&Hs(w,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=Bs(Ln(w)),T.m=null,T.P=!0,Hl(T,f)}n.Za=function(){this.C!=null&&(this.C=null,vr(this),oa(this),xt(19))};function aa(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function la(f,w){var T=null;if(f.g==w){aa(f),Zl(f),f.g=null;var N=2}else if(mn(f.h,w))T=w.D,Wc(f.h,w),N=1;else return;if(f.G!=0){if(w.o)if(N==1){T=w.m?w.m.length:0,w=Date.now()-w.F;var G=f.B;N=zi(),Rt(N,new Ko(N,T)),Lr(f)}else Zi(f);else if(G=w.s,G==3||G==0&&0<w.X||!(N==1&&ip(f,w)||N==2&&oa(f)))switch(T&&0<T.length&&(w=f.h,w.i=w.i.concat(T)),G){case 1:hs(f,5);break;case 4:hs(f,10);break;case 3:hs(f,6);break;default:hs(f,2)}}}function ed(f,w){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*w}function hs(f,w){if(f.j.info("Error code "+w),w==2){var T=_(f.fb,f),N=f.Xa;const G=!N;N=new ls(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ji(N,"https"),Bs(N),G?np(N.toString(),T):Jc(N.toString(),T)}else xt(2);f.G=0,f.l&&f.l.sa(w),td(f),sa(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function td(f){if(f.G=0,f.ka=[],f.l){const w=Hc(f.h);(w.length!=0||f.i.length!=0)&&(A(f.ka,w),A(f.ka,f.i),f.h.i.length=0,j(f.i),f.i.length=0),f.l.ra()}}function nd(f,w,T){var N=T instanceof ls?Ln(T):new ls(T);if(N.g!="")w&&(N.g=w+"."+N.g),Fs(N,N.s);else{var G=u.location;N=G.protocol,w=w?w+"."+G.hostname:G.hostname,G=+G.port;var Z=new ls(null);N&&Ji(Z,N),w&&(Z.g=w),G&&Fs(Z,G),T&&(Z.l=T),N=Z}return T=f.D,w=f.ya,T&&w&&et(N,T,w),et(N,"VER",f.la),ds(f,N),N}function rd(f,w,T){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new lt(new us({eb:T})):new lt(f.pa),w.Ha(f.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}n=eu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ua(){}ua.prototype.g=function(f,w){return new gn(f,w)};function gn(f,w){It.call(this),this.g=new Xl(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!F(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!F(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Mr(this)}C(gn,It),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Gt(this.g)},gn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Ml(f),f=T);w.i.push(new Bc(w.Ya++,f)),w.G==3&&Lr(w)},gn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,gn.aa.N.call(this)};function sd(f){Rr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const T in w){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}C(sd,Rr);function id(){qo.call(this),this.status=1}C(id,qo);function Mr(f){this.g=f}C(Mr,eu),Mr.prototype.ua=function(){Rt(this.g,"a")},Mr.prototype.ta=function(f){Rt(this.g,new sd(f))},Mr.prototype.sa=function(f){Rt(this.g,new id)},Mr.prototype.ra=function(){Rt(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Gk=function(){return new ua},Kk=function(){return zi()},qk=Nr,Gg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,Eh=Qo,Vc.COMPLETE="complete",Hk=Vc,Ho.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",It.prototype.listen=It.prototype.K,Mu=Ho,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,Wk=lt}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const Hb="@firebase/firestore",qb="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new fy("@firebase/firestore");function Ba(){return Io.logLevel}function ve(n,...e){if(Io.logLevel<=Ue.DEBUG){const t=e.map(yy);Io.debug(`Firestore (${Sl}): ${n}`,...t)}}function Ns(n,...e){if(Io.logLevel<=Ue.ERROR){const t=e.map(yy);Io.error(`Firestore (${Sl}): ${n}`,...t)}}function cl(n,...e){if(Io.logLevel<=Ue.WARN){const t=e.map(yy);Io.warn(`Firestore (${Sl}): ${n}`,...t)}}function yy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n="Unexpected state"){const e=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: `+n;throw Ns(e),new Error(e)}function Je(n,e){n||Re()}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}}class iV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oV{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ps,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},u=d=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ps)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new Qk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new dn(e)}}class aV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class lV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ir(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0);const r=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Kb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string"),this.R=t.token,new Kb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cV(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ve(n,e){return n<e?-1:n>e?1:0}function Qg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ve(r,s);{const o=Jk(),l=dV(o.encode(Gb(n,t)),o.encode(Gb(e,t)));return l!==0?l:Ve(r,s)}}t+=r>65535?2:1}return Ve(n.length,e.length)}function Gb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function dV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function dl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=-62135596800,Jb=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Jb);return new Mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Qb)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jb}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Qb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Mt(0,0))}static max(){return new De(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="__name__";class zr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(),r===void 0?r=e.length-t:r>e.length-t&&Re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=zr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const r=zr.isNumericId(e),s=zr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?zr.extractNumericId(e).compare(zr.extractNumericId(t)):Qg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class ct extends zr{construct(e,t,r){return new ct(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ct(t)}static emptyPath(){return new ct([])}}const hV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends zr{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return hV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yb}static keyField(){return new en([Yb])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(ct.fromString(e))}static fromName(e){return new Pe(ct.fromString(e).popFirst(5))}static empty(){return new Pe(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new ct(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=-1;function fV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new Pi(s,Pe.empty(),e)}function pV(n){return new Pi(n.readTime,n.key,cc)}class Pi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Pi(De.min(),Pe.empty(),cc)}static max(){return new Pi(De.max(),Pe.empty(),cc)}}function mV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==gV)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&t()},d=>r(d))}),l=!0,o===s&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(s=>s?ne.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const h=d;t(e[h]).next(g=>{l[h]=g,++u,u===o&&r(l)},g=>s(g))}})}static doWhile(e,t){return new ne((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function vV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}kf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-1;function Cf(n){return n==null}function Gh(n){return n===0&&1/n==-1/0}function _V(n){return typeof n=="number"&&Number.isInteger(n)&&!Gh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="";function wV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xb(e)),e=xV(n.get(t),e);return Xb(e)}function xV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Xk:t+="";break;default:t+=o}}return t}function Xb(n){return n+Xk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Zk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=o??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Xt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Re();const e=this.left.check();if(e!==this.right.check())throw Re();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re()}get value(){throw Re()}get color(){throw Re()}get left(){throw Re()}get right(){throw Re()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eE(this.data.getIterator())}getIteratorFrom(e){return new eE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class eE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new Vt(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eC("Invalid base64 string: "+o):o}}(e);return new nn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const bV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(n){if(Je(!!n),typeof n=="string"){let e=0;const t=bV.exec(n);if(Je(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ii(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="server_timestamp",nC="__type__",rC="__previous_value__",sC="__local_write_time__";function _y(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nC])===null||t===void 0?void 0:t.stringValue)===tC}function Pf(n){const e=n.mapValue.fields[rC];return _y(e)?Pf(e):e}function dc(n){const e=Ai(n.mapValue.fields[sC].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t,r,s,o,l,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=h}}const Qh="(default)";class hc{constructor(e,t){this.projectId=e,this.database=t||Qh}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="__type__",TV="__max__",hh={mapValue:{}},oC="__vector__",Jh="value";function Ri(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_y(n)?4:kV(n)?9007199254740991:SV(n)?10:11:Re()}function Xr(n,e){if(n===e)return!0;const t=Ri(n);if(t!==Ri(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dc(n).isEqual(dc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ai(s.timestampValue),u=Ai(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Ii(s.bytesValue).isEqual(Ii(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return St(s.geoPointValue.latitude)===St(o.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return St(s.integerValue)===St(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=St(s.doubleValue),u=St(o.doubleValue);return l===u?Gh(l)===Gh(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return dl(n.arrayValue.values||[],e.arrayValue.values||[],Xr);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Zb(l)!==Zb(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Xr(l[d],u[d])))return!1;return!0}(n,e);default:return Re()}}function fc(n,e){return(n.values||[]).find(t=>Xr(t,e))!==void 0}function hl(n,e){if(n===e)return 0;const t=Ri(n),r=Ri(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(o,l){const u=St(o.integerValue||o.doubleValue),d=St(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return tE(n.timestampValue,e.timestampValue);case 4:return tE(dc(n),dc(e));case 5:return Qg(n.stringValue,e.stringValue);case 6:return function(o,l){const u=Ii(o),d=Ii(l);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),d=l.split("/");for(let h=0;h<u.length&&h<d.length;h++){const g=Ve(u[h],d[h]);if(g!==0)return g}return Ve(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Ve(St(o.latitude),St(l.latitude));return u!==0?u:Ve(St(o.longitude),St(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return nE(n.arrayValue,e.arrayValue);case 10:return function(o,l){var u,d,h,g;const v=o.fields||{},_=l.fields||{},E=(u=v[Jh])===null||u===void 0?void 0:u.arrayValue,C=(d=_[Jh])===null||d===void 0?void 0:d.arrayValue,j=Ve(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0);return j!==0?j:nE(E,C)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===hh.mapValue&&l===hh.mapValue)return 0;if(o===hh.mapValue)return 1;if(l===hh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),h=l.fields||{},g=Object.keys(h);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=Qg(d[v],g[v]);if(_!==0)return _;const E=hl(u[d[v]],h[g[v]]);if(E!==0)return E}return Ve(d.length,g.length)}(n.mapValue,e.mapValue);default:throw Re()}}function tE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Ai(n),r=Ai(e),s=Ve(t.seconds,r.seconds);return s!==0?s:Ve(t.nanos,r.nanos)}function nE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=hl(t[s],r[s]);if(o)return o}return Ve(t.length,r.length)}function fl(n){return Jg(n)}function Jg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ai(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ii(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Jg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Jg(t.fields[l])}`;return s+"}"}(n.mapValue):Re()}function Th(n){switch(Ri(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(n);return e?16+Th(e):16;case 5:return 2*n.stringValue.length;case 6:return Ii(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Th(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Mi(r.fields,(o,l)=>{s+=o.length+Th(l)}),s}(n.mapValue);default:throw Re()}}function Yg(n){return!!n&&"integerValue"in n}function wy(n){return!!n&&"arrayValue"in n}function rE(n){return!!n&&"nullValue"in n}function sE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sh(n){return!!n&&"mapValue"in n}function SV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[iC])===null||t===void 0?void 0:t.stringValue)===oC}function Gu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===TV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=en.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=Gu(l):s.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Sh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Sh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Mi(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Nn(Gu(this.value))}}function aC(n){const e=[];return Mi(n.fields,(t,r)=>{const s=new en([t]);if(Sh(r)){const o=aC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new hn(e,0,De.min(),De.min(),De.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,s){return new hn(e,1,t,De.min(),r,s,0)}static newNoDocument(e,t){return new hn(e,2,t,De.min(),De.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,De.min(),De.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t){this.position=e,this.inclusive=t}}function iE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Pe.comparator(Pe.fromName(l.referenceValue),t.key):r=hl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function oE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,t="asc"){this.field=e,this.dir=t}}function CV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{}class Ot extends lC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AV(e,t,r):t==="array-contains"?new NV(e,r):t==="in"?new jV(e,r):t==="not-in"?new DV(e,r):t==="array-contains-any"?new OV(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new IV(e,r):new RV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(hl(t,this.value)):t!==null&&Ri(this.value)===Ri(t)&&this.matchesComparison(hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends lC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Zr(e,t)}matches(e){return uC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function uC(n){return n.op==="and"}function cC(n){return PV(n)&&uC(n)}function PV(n){for(const e of n.filters)if(e instanceof Zr)return!1;return!0}function Xg(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+fl(n.value);if(cC(n))return n.filters.map(e=>Xg(e)).join(",");{const e=n.filters.map(t=>Xg(t)).join(",");return`${n.op}(${e})`}}function dC(n,e){return n instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&Xr(r.value,s.value)}(n,e):n instanceof Zr?function(r,s){return s instanceof Zr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,u)=>o&&dC(l,s.filters[u]),!0):!1}(n,e):void Re()}function hC(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${fl(t.value)}`}(n):n instanceof Zr?function(t){return t.op.toString()+" {"+t.getFilters().map(hC).join(" ,")+"}"}(n):"Filter"}class AV extends Ot{constructor(e,t,r){super(e,t,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const t=Pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class IV extends Ot{constructor(e,t){super(e,"in",t),this.keys=fC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RV extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=fC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class NV extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wy(t)&&fc(t.arrayValue,this.value)}}class jV extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fc(this.value.arrayValue,t)}}class DV extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!fc(this.value.arrayValue,t)}}class OV extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function aE(n,e=null,t=[],r=[],s=null,o=null,l=null){return new LV(n,e,t,r,s,o,l)}function xy(n){const e=Oe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Xg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fl(r)).join(",")),e.le=t}return e.le}function by(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!dC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oE(n.startAt,e.startAt)&&oE(n.endAt,e.endAt)}function Zg(n){return Pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function MV(n,e,t,r,s,o,l,u){return new Af(n,e,t,r,s,o,l,u)}function Ey(n){return new Af(n)}function lE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VV(n){return n.collectionGroup!==null}function Qu(n){const e=Oe(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Vt(en.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Xh(o,r))}),t.has(en.keyField().canonicalString())||e.he.push(new Xh(en.keyField(),r))}return e.he}function Gr(n){const e=Oe(n);return e.Pe||(e.Pe=$V(e,Qu(n))),e.Pe}function $V(n,e){if(n.limitType==="F")return aE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Xh(s.field,o)});const t=n.endAt?new Yh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Yh(n.startAt.position,n.startAt.inclusive):null;return aE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function e0(n,e,t){return new Af(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function If(n,e){return by(Gr(n),Gr(e))&&n.limitType===e.limitType}function pC(n){return`${xy(Gr(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>hC(s)).join(", ")}]`),Cf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>fl(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>fl(s)).join(",")),`Target(${r})`}(Gr(n))}; limitType=${n.limitType})`}function Rf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Qu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,u,d){const h=iE(l,u,d);return l.inclusive?h<=0:h<0}(r.startAt,Qu(r),s)||r.endAt&&!function(l,u,d){const h=iE(l,u,d);return l.inclusive?h>=0:h>0}(r.endAt,Qu(r),s))}(n,e)}function FV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mC(n){return(e,t)=>{let r=!1;for(const s of Qu(n)){const o=UV(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function UV(n,e,t){const r=n.field.isKeyField()?Pe.comparator(e.key,t.key):function(o,l,u){const d=l.data.field(o),h=u.data.field(o);return d!==null&&h!==null?hl(d,h):Re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Zk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new mt(Pe.comparator);function js(){return BV}const gC=new mt(Pe.comparator);function Vu(...n){let e=gC;for(const t of n)e=e.insert(t.key,t);return e}function yC(n){let e=gC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function So(){return Ju()}function vC(){return Ju()}function Ju(){return new Mo(n=>n.toString(),(n,e)=>n.isEqual(e))}const zV=new mt(Pe.comparator),WV=new Vt(Pe.comparator);function Be(...n){let e=WV;for(const t of n)e=e.add(t);return e}const HV=new Vt(Ve);function qV(){return HV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function _C(n){return{integerValue:""+n}}function KV(n,e){return _V(e)?_C(e):Ty(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(){this._=void 0}}function GV(n,e,t){return n instanceof Zh?function(s,o){const l={fields:{[nC]:{stringValue:tC},[sC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&_y(o)&&(o=Pf(o)),o&&(l.fields[rC]=o),{mapValue:l}}(t,e):n instanceof pc?xC(n,e):n instanceof mc?bC(n,e):function(s,o){const l=wC(s,o),u=uE(l)+uE(s.Ie);return Yg(l)&&Yg(s.Ie)?_C(u):Ty(s.serializer,u)}(n,e)}function QV(n,e,t){return n instanceof pc?xC(n,e):n instanceof mc?bC(n,e):t}function wC(n,e){return n instanceof ef?function(r){return Yg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Zh extends Nf{}class pc extends Nf{constructor(e){super(),this.elements=e}}function xC(n,e){const t=EC(e);for(const r of n.elements)t.some(s=>Xr(s,r))||t.push(r);return{arrayValue:{values:t}}}class mc extends Nf{constructor(e){super(),this.elements=e}}function bC(n,e){let t=EC(e);for(const r of n.elements)t=t.filter(s=>!Xr(s,r));return{arrayValue:{values:t}}}class ef extends Nf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function uE(n){return St(n.integerValue||n.doubleValue)}function EC(n){return wy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function JV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof pc&&s instanceof pc||r instanceof mc&&s instanceof mc?dl(r.elements,s.elements,Xr):r instanceof ef&&s instanceof ef?Xr(r.Ie,s.Ie):r instanceof Zh&&s instanceof Zh}(n.transform,e.transform)}class YV{constructor(e,t){this.version=e,this.transformResults=t}}class ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jf{}function TC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Sy(n.key,ar.none()):new Ac(n.key,n.data,ar.none());{const t=n.data,r=Nn.empty();let s=new Vt(en.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Vi(n.key,r,new Wn(s.toArray()),ar.none())}}function XV(n,e,t){n instanceof Ac?function(s,o,l){const u=s.value.clone(),d=dE(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Vi?function(s,o,l){if(!kh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=dE(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(SC(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Yu(n,e,t,r){return n instanceof Ac?function(o,l,u,d){if(!kh(o.precondition,l))return u;const h=o.value.clone(),g=hE(o.fieldTransforms,d,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vi?function(o,l,u,d){if(!kh(o.precondition,l))return u;const h=hE(o.fieldTransforms,d,l),g=l.data;return g.setAll(SC(o)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,u){return kh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function ZV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=wC(r.transform,s||null);o!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,o))}return t||null}function cE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(o,l)=>JV(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ac extends jf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vi extends jf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function SC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dE(n,e,t){const r=new Map;Je(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,QV(l,u,t[s]))}return r}function hE(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,GV(o,l,e))}return r}class Sy extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e$ extends jf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&XV(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vC();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=TC(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(t,r)=>cE(t,r))&&dl(this.baseMutations,e.baseMutations,(t,r)=>cE(t,r))}}class ky{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Je(e.mutations.length===r.length);let s=function(){return zV}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new ky(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ke;function s$(n){switch(n){case ae.OK:return Re();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Re()}}function kC(n){if(n===void 0)return Ns("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Pt.OK:return ae.OK;case Pt.CANCELLED:return ae.CANCELLED;case Pt.UNKNOWN:return ae.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ae.INTERNAL;case Pt.UNAVAILABLE:return ae.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ae.NOT_FOUND;case Pt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Pt.ABORTED:return ae.ABORTED;case Pt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Pt.DATA_LOSS:return ae.DATA_LOSS;default:return Re()}}(Ke=Pt||(Pt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=new xi([4294967295,4294967295],0);function fE(n){const e=Jk().encode(n),t=new zk;return t.update(e),new Uint8Array(t.digest())}function pE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xi([t,r],0),new xi([s,o],0)]}class Cy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=xi.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(xi.fromNumber(r)));return s.compare(i$)===1&&(s=new xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=fE(e),[r,s]=pE(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Cy(o,s,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=fE(e),[r,s]=pE(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Df(De.min(),s,new mt(Ve),js(),Be())}}class Ic{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ic(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class CC{constructor(e,t){this.targetId=e,this.ge=t}}class PC{constructor(e,t,r=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class mE{constructor(){this.pe=0,this.ye=gE(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Be(),t=Be(),r=Be();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Re()}}),new Ic(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=gE()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Je(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class o${constructor(e){this.ke=e,this.qe=new Map,this.Qe=js(),this.$e=fh(),this.Ue=fh(),this.Ke=new mt(Ve)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Zg(o))if(r===0){const l=new Pe(o.path);this.ze(t,l,hn.newNoDocument(l,De.min()))}else Je(r===1);else{const l=this.et(t);if(l!==r){const u=this.tt(e),d=u?this.nt(u,e,l):1;if(d!==0){this.Ye(t);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=Ii(r).toUint8Array()}catch(d){if(d instanceof eC)return cl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Cy(l,s,o)}catch(d){return cl(d instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ee===0?null:u}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&Zg(u.target)){const d=new Pe(u.target.path);this._t(d).has(l)||this.ut(l,d)||this.ze(l,d,hn.newNoDocument(d,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Be();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(d=>{const h=this.Xe(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Df(e,t,this.Ke,this.Qe,r);return this.Qe=js(),this.$e=fh(),this.Ue=fh(),this.Ke=new mt(Ve),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new mE,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Vt(Ve),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Vt(Ve),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new mE),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function fh(){return new mt(Pe.comparator)}function gE(){return new mt(Pe.comparator)}const a$={asc:"ASCENDING",desc:"DESCENDING"},l$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u$={and:"AND",or:"OR"};class c${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function t0(n,e){return n.useProto3Json||Cf(e)?e:{value:e}}function tf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function AC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function d$(n,e){return tf(n,e.toTimestamp())}function Qr(n){return Je(!!n),De.fromTimestamp(function(t){const r=Ai(t);return new Mt(r.seconds,r.nanos)}(n))}function Py(n,e){return n0(n,e).canonicalString()}function n0(n,e){const t=function(s){return new ct(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function IC(n){const e=ct.fromString(n);return Je(OC(e)),e}function r0(n,e){return Py(n.databaseId,e.path)}function ng(n,e){const t=IC(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Pe(NC(t))}function RC(n,e){return Py(n.databaseId,e)}function h$(n){const e=IC(n);return e.length===4?ct.emptyPath():NC(e)}function s0(n){return new ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NC(n){return Je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function yE(n,e,t){return{name:r0(n,e),fields:t.value.mapValue.fields}}function f$(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Je(g===void 0||typeof g=="string"),nn.fromBase64String(g||"")):(Je(g===void 0||g instanceof Buffer||g instanceof Uint8Array),nn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const g=h.code===void 0?ae.UNKNOWN:kC(h.code);return new Se(g,h.message||"")}(l);t=new PC(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ng(n,r.document.name),o=Qr(r.document.updateTime),l=r.document.createTime?Qr(r.document.createTime):De.min(),u=new Nn({mapValue:{fields:r.document.fields}}),d=hn.newFoundDocument(s,o,l,u),h=r.targetIds||[],g=r.removedTargetIds||[];t=new Ch(h,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ng(n,r.document),o=r.readTime?Qr(r.readTime):De.min(),l=hn.newNoDocument(s,o),u=r.removedTargetIds||[];t=new Ch([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ng(n,r.document),o=r.removedTargetIds||[];t=new Ch([],o,s,null)}else{if(!("filter"in e))return Re();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new r$(s,o),u=r.targetId;t=new CC(u,l)}}return t}function p$(n,e){let t;if(e instanceof Ac)t={update:yE(n,e.key,e.value)};else if(e instanceof Sy)t={delete:r0(n,e.key)};else if(e instanceof Vi)t={update:yE(n,e.key,e.data),updateMask:E$(e.fieldMask)};else{if(!(e instanceof e$))return Re();t={verify:r0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof Zh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof pc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof mc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ef)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:d$(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Re()}(n,e.precondition)),t}function m$(n,e){return n&&n.length>0?(Je(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?Qr(s.updateTime):Qr(o);return l.isEqual(De.min())&&(l=Qr(o)),new YV(l,s.transformResults||[])}(t,e))):[]}function g$(n,e){return{documents:[RC(n,e.path)]}}function y$(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=RC(n,s);const o=function(h){if(h.length!==0)return DC(Zr.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(g=>function(_){return{field:Wa(_.field),direction:w$(_.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=t0(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:s}}function v$(n){let e=h$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Je(r===1);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(v){const _=jC(v);return _ instanceof Zr&&cC(_)?_.getFilters():[_]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(_=>function(C){return new Xh(Ha(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(v){let _;return _=typeof v=="object"?v.value:v,Cf(_)?null:_}(t.limit));let d=null;t.startAt&&(d=function(v){const _=!!v.before,E=v.values||[];return new Yh(E,_)}(t.startAt));let h=null;return t.endAt&&(h=function(v){const _=!v.before,E=v.values||[];return new Yh(E,_)}(t.endAt)),MV(e,s,l,o,u,"F",d,h)}function _$(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ha(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ha(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ha(t.unaryFilter.field);return Ot.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ha(t.unaryFilter.field);return Ot.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Ha(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Zr.create(t.compositeFilter.filters.map(r=>jC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re()}}(t.compositeFilter.op))}(n):Re()}function w$(n){return a$[n]}function x$(n){return l$[n]}function b$(n){return u$[n]}function Wa(n){return{fieldPath:n.canonicalString()}}function Ha(n){return en.fromServerFormat(n.fieldPath)}function DC(n){return n instanceof Ot?function(t){if(t.op==="=="){if(sE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(rE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(rE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:x$(t.op),value:t.value}}}(n):n instanceof Zr?function(t){const r=t.getFilters().map(s=>DC(s));return r.length===1?r[0]:{compositeFilter:{op:b$(t.op),filters:r}}}(n):Re()}function E$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function OC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t,r,s,o=De.min(),l=De.min(),u=nn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T${constructor(e){this.Tt=e}}function S$(n){const e=v$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?e0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(){this.Tn=new C$}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Pi.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class C${constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Vt(ct.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vt(ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LC=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(LC,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new pl(0)}static Kn(){return new pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="LruGarbageCollector",P$=1048576;function wE([n,e],[t,r]){const s=Ve(n,t);return s===0?Ve(e,r):s}class A${constructor(e){this.Hn=e,this.buffer=new Vt(wE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();wE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class I${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ve(_E,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cl(t)?ve(_E,"Ignoring IndexedDB error during garbage collection: ",t):await kl(t)}await this.er(3e5)})}}class R${constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(kf.ae);const r=new A$(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(vE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vE):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,l,u,d,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Ba()<=Ue.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(h-d)+`ms
Total Duration: ${h-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function N$(n,e){return new R$(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.changes=new Mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Yu(r.mutation,s,Wn.empty(),Mt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const s=So();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=Vu();return o.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=So();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,s){let o=js();const l=Ju(),u=function(){return Ju()}();return t.forEach((d,h)=>{const g=r.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Vi)?o=o.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),Yu(g.mutation,h,g.mutation.getFieldMask(),Mt.now())):l.set(h.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((h,g)=>l.set(h,g)),t.forEach((h,g)=>{var v;return u.set(h,new D$(g,(v=l.get(h))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Ju();let s=new mt((l,u)=>l-u),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(d=>{const h=t.get(d);if(h===null)return;let g=r.get(d)||Wn.empty();g=u.applyToLocalView(h,g),r.set(d,g);const v=(s.get(u.batchId)||Be()).add(d);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),h=d.key,g=d.value,v=vC();g.forEach(_=>{if(!o.has(_)){const E=TC(t.get(_),r.get(_));E!==null&&v.set(_,E),o=o.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return Pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ne.resolve(So());let u=cc,d=o;return l.next(h=>ne.forEach(h,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next(_=>{d=d.insert(g,_)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,d,h,Be())).next(g=>({batchId:u,changes:yC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pe(t)).next(r=>{let s=Vu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Vu();return this.indexManager.getCollectionParents(e,o).next(u=>ne.forEach(u,d=>{const h=function(v,_){return new Af(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(g=>{g.forEach((v,_)=>{l=l.insert(v,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((d,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,hn.newInvalidDocument(g)))});let u=Vu();return l.forEach((d,h)=>{const g=o.get(d);g!==void 0&&Yu(g.mutation,h,Wn.empty(),Mt.now()),Rf(t,h)&&(u=u.insert(d,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Qr(s.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:S$(s.bundledQuery),readTime:Qr(s.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(){this.overlays=new mt(Pe.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=So();return ne.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=So(),o=t.length+1,l=new Pe(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,h=d.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new mt((h,g)=>h-g);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=So(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=So(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=s)););return ne.resolve(u)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new n$(t,r));let o=this.Rr.get(t);o===void 0&&(o=Be(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(){this.Vr=new Vt(qt.mr),this.gr=new Vt(qt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new qt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new qt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Pe(new ct([])),r=new qt(t,e),s=new qt(t,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Pe(new ct([])),r=new qt(t,e),s=new qt(t,e+1);let o=Be();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new qt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Pe.comparator(e.key,t.key)||Ve(e.Cr,t.Cr)}static pr(e,t){return Ve(e.Cr,t.Cr)||Pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Vt(qt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new t$(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new qt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?vy:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qt(t,0),s=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const u=this.Or(l.Cr);o.push(u)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(Ve);return t.forEach(s=>{const o=new qt(s,0),l=new qt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),ne.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Pe.isDocumentKey(o)||(o=o.child(""));const l=new qt(new Pe(o),0);let u=new Vt(Ve);return this.Mr.forEachWhile(d=>{const h=d.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(d.Cr)),!0)},l),ne.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Je(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ne.forEach(t.mutations,s=>{const o=new qt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new qt(t,0),s=this.Mr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e){this.kr=e,this.docs=function(){return new mt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():hn.newInvalidDocument(s))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=js();const l=t.path,u=new Pe(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:h,value:{document:g}}=d.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||mV(pV(g),r)<=0||(s.has(g.key)||Rf(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Re()}qr(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U$(this)}getSize(e){return ne.resolve(this.size)}}class U$ extends j${constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e){this.persistence=e,this.Qr=new Mo(t=>xy(t),by),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Ay,this.targetCount=0,this.Kr=pl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new pl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ne.waitFor(o).next(()=>s)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new kf(0),this.zr=!1,this.zr=!0,this.jr=new V$,this.referenceDelegate=e(this),this.Hr=new B$(this),this.indexManager=new k$,this.remoteDocumentCache=function(s){return new F$(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new T$(t),this.Yr=new L$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new M$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new $$(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const s=new z$(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class z$ extends yV{constructor(e){super(),this.currentSequenceNumber=e}}class Iy{constructor(e){this.persistence=e,this.ti=new Ay,this.ni=null}static ri(e){return new Iy(e)}get ii(){if(this.ni)return this.ni;throw Re()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,r=>{const s=Pe.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class nf{constructor(e,t){this.persistence=e,this.oi=new Mo(r=>wV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=N$(this,t)}static ri(e,t){return new nf(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?ne.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(u=>{u||(r++,o.removeEntry(l,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Th(e.data.value)),t}ar(e,t,r){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Be(),s=Be();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ry(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return VL()?8:vV(pn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new W$;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(Ba()<=Ue.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(Ba()<=Ue.DEBUG&&ve("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Ba()<=Ue.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):ne.resolve())}rs(e,t){if(lE(t))return ne.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=e0(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Be(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const h=this.cs(t,u);return this.ls(t,h,l,d.readTime)?this.rs(e,e0(t,null,"F")):this.hs(e,h,t,d)}))})))}ss(e,t,r,s){return lE(t)||s.isEqual(De.min())?ne.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,s)?ne.resolve(null):(Ba()<=Ue.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),za(t)),this.hs(e,l,t,fV(s,cc)).next(u=>u))})}cs(e,t){let r=new Vt(mC(e));return t.forEach((s,o)=>{Rf(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return Ba()<=Ue.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",za(t)),this.ns.getDocumentsMatchingQuery(e,t,Pi.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="LocalStore",q$=3e8;class K${constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new mt(Ve),this.Is=new Mo(o=>xy(o),by),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O$(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function G$(n,e,t,r){return new K$(n,e,t,r)}async function VC(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let d=Be();for(const h of s){l.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function Q$(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,d,h,g){const v=h.batch,_=v.keys();let E=ne.resolve();return _.forEach(C=>{E=E.next(()=>g.getEntry(d,C)).next(j=>{const A=h.docVersions.get(C);Je(A!==null),j.version.compareTo(A)<0&&(v.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),g.addEntry(j)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Be();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(d=d.add(u.batch.mutations[h].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function $C(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function J$(n,e){const t=Oe(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const u=[];e.targetChanges.forEach((g,v)=>{const _=s.get(v);if(!_)return;u.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,v)));let E=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(v,E),function(j,A,D){return j.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=q$?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(_,E,g)&&u.push(t.Hr.updateTargetData(o,E))});let d=js(),h=Be();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(Y$(o,l,e.documentUpdates).next(g=>{d=g.Vs,h=g.fs})),!r.isEqual(De.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return ne.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,h)).next(()=>d)}).then(o=>(t.Ts=s,o))}function Y$(n,e,t){let r=Be(),s=Be();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=js();return t.forEach((u,d)=>{const h=o.get(u);d.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(De.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ve(Ny,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",d.version)}),{Vs:l,fs:s}})}function X$(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=vy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z$(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,ne.resolve(s)):t.Hr.allocateTargetId(r).next(l=>(s=new vi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function i0(n,e,t){const r=Oe(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Cl(l))throw l;ve(Ny,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function xE(n,e,t){const r=Oe(n);let s=De.min(),o=Be();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,h,g){const v=Oe(d),_=v.Is.get(g);return _!==void 0?ne.resolve(v.Ts.get(_)):v.Hr.getTargetData(h,g)}(r,l,Gr(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(d=>{o=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?s:De.min(),t?o:Be())).next(u=>(e3(r,FV(e),u),{documents:u,gs:o})))}function e3(n,e,t){let r=n.Es.get(e)||De.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class bE{constructor(){this.activeTargetIds=qV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t3{constructor(){this.ho=new bE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new bE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="ConnectivityMonitor";class TE{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ve(EE,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ve(EE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph=null;function o0(){return ph===null?ph=function(){return 268435456+Math.round(2147483648*Math.random())}():ph++,"0x"+ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="RestConnection",r3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class s3{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Qh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,o){const l=o0(),u=this.bo(e,t.toUriEncodedString());ve(rg,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,o),this.vo(e,u,d,r).then(h=>(ve(rg,`Received RPC '${e}' ${l}: `,h),h),h=>{throw cl(rg,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}Co(e,t,r,s,o,l){return this.So(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,t){const r=r3[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class o3 extends s3{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=o0();return new Promise((l,u)=>{const d=new Wk;d.setWithCredentials(!0),d.listenOnce(Hk.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Eh.NO_ERROR:const g=d.getResponseJson();ve(un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Eh.TIMEOUT:ve(un,`RPC '${e}' ${o} timed out`),u(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const v=d.getStatus();if(ve(un,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const C=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(D)>=0?D:ae.UNKNOWN}(E.status);u(new Se(C,E.message))}else u(new Se(ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{ve(un,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ve(un,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",h,r,15)})}Wo(e,t,r){const s=o0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Gk(),u=Kk(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=o.join("");ve(un,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);let _=!1,E=!1;const C=new i3({Fo:A=>{E?ve(un,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(_||(ve(un,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ve(un,`RPC '${e}' stream ${s} sending:`,A),v.send(A))},Mo:()=>v.close()}),j=(A,D,F)=>{A.listen(D,$=>{try{F($)}catch(B){setTimeout(()=>{throw B},0)}})};return j(v,Mu.EventType.OPEN,()=>{E||(ve(un,`RPC '${e}' stream ${s} transport opened.`),C.Qo())}),j(v,Mu.EventType.CLOSE,()=>{E||(E=!0,ve(un,`RPC '${e}' stream ${s} transport closed`),C.Uo())}),j(v,Mu.EventType.ERROR,A=>{E||(E=!0,cl(un,`RPC '${e}' stream ${s} transport errored:`,A),C.Uo(new Se(ae.UNAVAILABLE,"The operation could not be completed")))}),j(v,Mu.EventType.MESSAGE,A=>{var D;if(!E){const F=A.data[0];Je(!!F);const $=F,B=($==null?void 0:$.error)||((D=$[0])===null||D===void 0?void 0:D.error);if(B){ve(un,`RPC '${e}' stream ${s} received error:`,B);const U=B.status;let V=function(S){const R=Pt[S];if(R!==void 0)return kC(R)}(U),I=B.message;V===void 0&&(V=ae.INTERNAL,I="Unknown error status: "+U+" with message "+B.message),E=!0,C.Uo(new Se(V,I)),v.close()}else ve(un,`RPC '${e}' stream ${s} received:`,F),C.Ko(F)}}),j(u,qk.STAT_EVENT,A=>{A.stat===Gg.PROXY?ve(un,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Gg.NOPROXY&&ve(un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n){return new c$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="PersistentStream";class UC{constructor(e,t,r,s,o,l,u,d){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new FC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Ns(t.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new Se(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ve(SE,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ve(SE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a3 extends UC{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=f$(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?De.min():l.readTime?Qr(l.readTime):De.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=s0(this.serializer),t.addTarget=function(o,l){let u;const d=l.target;if(u=Zg(d)?{documents:g$(o,d)}:{query:y$(o,d).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=AC(o,l.resumeToken);const h=t0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(De.min())>0){u.readTime=tf(o,l.snapshotVersion.toTimestamp());const h=t0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=_$(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=s0(this.serializer),t.removeTarget=e,this.I_(t)}}class l3 extends UC{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=m$(e.writeResults,e.commitTime),r=Qr(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=s0(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>p$(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{}class c3 extends u3{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,n0(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ae.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,n0(t,r),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ae.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class d3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ns(t),this.N_=!1):ve("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class h3{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{Vo(this)&&(ve(Ro,"Restarting streams for network reachability change."),await async function(d){const h=Oe(d);h.W_.add(4),await Rc(h),h.j_.set("Unknown"),h.W_.delete(4),await Lf(h)}(this))})}),this.j_=new d3(r,s)}}async function Lf(n){if(Vo(n))for(const e of n.G_)await e(!0)}async function Rc(n){for(const e of n.G_)await e(!1)}function BC(n,e){const t=Oe(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Ly(t)?Oy(t):Pl(t).c_()&&Dy(t,e))}function jy(n,e){const t=Oe(n),r=Pl(t);t.K_.delete(e),r.c_()&&zC(t,e),t.K_.size===0&&(r.c_()?r.P_():Vo(t)&&t.j_.set("Unknown"))}function Dy(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pl(n).y_(e)}function zC(n,e){n.H_.Ne(e),Pl(n).w_(e)}function Oy(n){n.H_=new o$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Pl(n).start(),n.j_.B_()}function Ly(n){return Vo(n)&&!Pl(n).u_()&&n.K_.size>0}function Vo(n){return Oe(n).W_.size===0}function WC(n){n.H_=void 0}async function f3(n){n.j_.set("Online")}async function p3(n){n.K_.forEach((e,t)=>{Dy(n,e)})}async function m3(n,e){WC(n),Ly(n)?(n.j_.q_(e),Oy(n)):n.j_.set("Unknown")}async function g3(n,e,t){if(n.j_.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(n,e)}catch(r){ve(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rf(n,r)}else if(e instanceof Ch?n.H_.We(e):e instanceof CC?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const r=await $C(n.localStore);t.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.K_.get(h);g&&o.K_.set(h,g.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,h)=>{const g=o.K_.get(d);if(!g)return;o.K_.set(d,g.withResumeToken(nn.EMPTY_BYTE_STRING,g.snapshotVersion)),zC(o,d);const v=new vi(g.target,d,h,g.sequenceNumber);Dy(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){ve(Ro,"Failed to raise snapshot:",r),await rf(n,r)}}async function rf(n,e,t){if(!Cl(e))throw e;n.W_.add(1),await Rc(n),n.j_.set("Offline"),t||(t=()=>$C(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ve(Ro,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Lf(n)})}function HC(n,e){return e().catch(t=>rf(n,t,e))}async function Mf(n){const e=Oe(n),t=Ni(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:vy;for(;y3(e);)try{const s=await X$(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,v3(e,s)}catch(s){await rf(e,s)}qC(e)&&KC(e)}function y3(n){return Vo(n)&&n.U_.length<10}function v3(n,e){n.U_.push(e);const t=Ni(n);t.c_()&&t.S_&&t.b_(e.mutations)}function qC(n){return Vo(n)&&!Ni(n).u_()&&n.U_.length>0}function KC(n){Ni(n).start()}async function _3(n){Ni(n).C_()}async function w3(n){const e=Ni(n);for(const t of n.U_)e.b_(t.mutations)}async function x3(n,e,t){const r=n.U_.shift(),s=ky.from(r,e,t);await HC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Mf(n)}async function b3(n,e){e&&Ni(n).S_&&await async function(r,s){if(function(l){return s$(l)&&l!==ae.ABORTED}(s.code)){const o=r.U_.shift();Ni(r).h_(),await HC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Mf(r)}}(n,e),qC(n)&&KC(n)}async function kE(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ve(Ro,"RemoteStore received new credentials");const r=Vo(t);t.W_.add(3),await Rc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Lf(t)}async function E3(n,e){const t=Oe(n);e?(t.W_.delete(2),await Lf(t)):e||(t.W_.add(2),await Rc(t),t.j_.set("Unknown"))}function Pl(n){return n.J_||(n.J_=function(t,r,s){const o=Oe(t);return o.M_(),new a3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:f3.bind(null,n),No:p3.bind(null,n),Lo:m3.bind(null,n),p_:g3.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Ly(n)?Oy(n):n.j_.set("Unknown")):(await n.J_.stop(),WC(n))})),n.J_}function Ni(n){return n.Y_||(n.Y_=function(t,r,s){const o=Oe(t);return o.M_(),new l3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:_3.bind(null,n),Lo:b3.bind(null,n),D_:w3.bind(null,n),v_:x3.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Mf(n)):(await n.Y_.stop(),n.U_.length>0&&(ve(Ro,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new My(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vy(n,e){if(Ns("AsyncQueue",`${e}: ${n}`),Cl(n))return new Se(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Pe.comparator(t.key,r.key):(t,r)=>Pe.comparator(t.key,r.key),this.keyedMap=Vu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.Z_=new mt(Pe.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Re():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ml{constructor(e,t,r,s,o,l,u,d,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new ml(e,t,Za.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class S3{constructor(){this.queries=PE(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=Oe(t),o=s.queries;s.queries=PE(),o.forEach((l,u)=>{for(const d of u.ta)d.onError(r)})})(this,new Se(ae.ABORTED,"Firestore shutting down"))}}function PE(){return new Mo(n=>pC(n),If)}async function GC(n,e){const t=Oe(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new T3,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=Vy(l,`Initialization of query '${za(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&$y(t)}async function QC(n,e){const t=Oe(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function k3(n,e){const t=Oe(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(r=!0);l.ea=s}}r&&$y(t)}function C3(n,e,t){const r=Oe(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function $y(n){n.ia.forEach(e=>{e.next()})}var a0,AE;(AE=a0||(a0={}))._a="default",AE.Cache="cache";class JC{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==a0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.key=e}}class XC{constructor(e){this.key=e}}class P3{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Be(),this.mutatedKeys=Be(),this.ya=mC(e),this.wa=new Za(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new CE,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const _=s.get(g),E=Rf(this.query,v)?v:null,C=!!_&&this.mutatedKeys.has(_.key),j=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;_&&E?_.data.isEqual(E.data)?C!==j&&(r.track({type:3,doc:E}),A=!0):this.va(_,E)||(r.track({type:2,doc:E}),A=!0,(d&&this.ya(E,d)>0||h&&this.ya(E,h)<0)&&(u=!0)):!_&&E?(r.track({type:0,doc:E}),A=!0):_&&!E&&(r.track({type:1,doc:_}),A=!0,(d||h)&&(u=!0)),A&&(E?(l=l.add(E),o=j?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,v)=>function(E,C){const j=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}};return j(E)-j(C)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(r),s=s!=null&&s;const u=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,h=d!==this.ga;return this.ga=d,l.length!==0||h?{snapshot:new ml(this.query,e.wa,o,l,e.mutatedKeys,d===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new CE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Be(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new XC(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new YC(r))}),t}Oa(e){this.fa=e.gs,this.pa=Be();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return ml.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Fy="SyncEngine";class A3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class I3{constructor(e){this.key=e,this.Ba=!1}}class R3{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Mo(u=>pC(u),If),this.qa=new Map,this.Qa=new Set,this.$a=new mt(Pe.comparator),this.Ua=new Map,this.Ka=new Ay,this.Wa={},this.Ga=new Map,this.za=pl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function N3(n,e,t=!0){const r=sP(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await ZC(r,e,t,!0),s}async function j3(n,e){const t=sP(n);await ZC(t,e,!0,!1)}async function ZC(n,e,t,r){const s=await Z$(n.localStore,Gr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await D3(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&BC(n.remoteStore,s),u}async function D3(n,e,t,r,s){n.Ha=(v,_,E)=>async function(j,A,D,F){let $=A.view.ba(D);$.ls&&($=await xE(j.localStore,A.query,!1).then(({documents:I})=>A.view.ba(I,$)));const B=F&&F.targetChanges.get(A.targetId),U=F&&F.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges($,j.isPrimaryClient,B,U);return RE(j,A.targetId,V.Ma),V.snapshot}(n,v,_,E);const o=await xE(n.localStore,e,!0),l=new P3(e,o.gs),u=l.ba(o.documents),d=Ic.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=l.applyChanges(u,n.isPrimaryClient,d);RE(n,t,h.Ma);const g=new A3(e,t,l);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function O3(n,e,t){const r=Oe(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!If(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await i0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&jy(r.remoteStore,s.targetId),l0(r,s.targetId)}).catch(kl)):(l0(r,s.targetId),await i0(r.localStore,s.targetId,!0))}async function L3(n,e){const t=Oe(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jy(t.remoteStore,r.targetId))}async function M3(n,e,t){const r=W3(n);try{const s=await function(l,u){const d=Oe(l),h=Mt.now(),g=u.reduce((E,C)=>E.add(C.key),Be());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=js(),j=Be();return d.ds.getEntries(E,g).next(A=>{C=A,C.forEach((D,F)=>{F.isValidDocument()||(j=j.add(D))})}).next(()=>d.localDocuments.getOverlayedDocuments(E,C)).next(A=>{v=A;const D=[];for(const F of u){const $=ZV(F,v.get(F.key).overlayedDocument);$!=null&&D.push(new Vi(F.key,$,aC($.value.mapValue),ar.exists(!0)))}return d.mutationQueue.addMutationBatch(E,h,D,u)}).next(A=>{_=A;const D=A.applyToLocalDocumentSet(v,j);return d.documentOverlayCache.saveOverlays(E,A.batchId,D)})}).then(()=>({batchId:_.batchId,changes:yC(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,d){let h=l.Wa[l.currentUser.toKey()];h||(h=new mt(Ve)),h=h.insert(u,d),l.Wa[l.currentUser.toKey()]=h}(r,s.batchId,t),await Nc(r,s.changes),await Mf(r.remoteStore)}catch(s){const o=Vy(s,"Failed to persist write");t.reject(o)}}async function eP(n,e){const t=Oe(n);try{const r=await J$(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ua.get(o);l&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Je(l.Ba):s.removedDocuments.size>0&&(Je(l.Ba),l.Ba=!1))}),await Nc(t,r,e)}catch(r){await kl(r)}}function IE(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const d=Oe(l);d.onlineState=u;let h=!1;d.queries.forEach((g,v)=>{for(const _ of v.ta)_.sa(u)&&(h=!0)}),h&&$y(d)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function V3(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),o=s&&s.key;if(o){let l=new mt(Pe.comparator);l=l.insert(o,hn.newNoDocument(o,De.min()));const u=Be().add(o),d=new Df(De.min(),new Map,new mt(Ve),l,u);await eP(r,d),r.$a=r.$a.remove(o),r.Ua.delete(e),Uy(r)}else await i0(r.localStore,e,!1).then(()=>l0(r,e,t)).catch(kl)}async function $3(n,e){const t=Oe(n),r=e.batch.batchId;try{const s=await Q$(t.localStore,e);nP(t,r,null),tP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Nc(t,s)}catch(s){await kl(s)}}async function F3(n,e,t){const r=Oe(n);try{const s=await function(l,u){const d=Oe(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return d.mutationQueue.lookupMutationBatch(h,u).next(v=>(Je(v!==null),g=v.keys(),d.mutationQueue.removeMutationBatch(h,v))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>d.localDocuments.getDocuments(h,g))})}(r.localStore,e);nP(r,e,t),tP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Nc(r,s)}catch(s){await kl(s)}}function tP(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function nP(n,e,t){const r=Oe(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function l0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||rP(n,r)})}function rP(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(jy(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),Uy(n))}function RE(n,e,t){for(const r of t)r instanceof YC?(n.Ka.addReference(r.key,e),U3(n,r)):r instanceof XC?(ve(Fy,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||rP(n,r.key)):Re()}function U3(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ve(Fy,"New document in limbo: "+t),n.Qa.add(r),Uy(n))}function Uy(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Pe(ct.fromString(e)),r=n.za.next();n.Ua.set(r,new I3(t)),n.$a=n.$a.insert(t,r),BC(n.remoteStore,new vi(Gr(Ey(t.path)),r,"TargetPurposeLimboResolution",kf.ae))}}async function Nc(n,e,t){const r=Oe(n),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,d)=>{l.push(r.Ha(d,e,t).then(h=>{var g;if((h||t)&&r.isPrimaryClient){const v=h?!h.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(h){s.push(h);const v=Ry.Yi(d.targetId,h);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(d,h){const g=Oe(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ne.forEach(h,_=>ne.forEach(_.Hi,E=>g.persistence.referenceDelegate.addReference(v,_.targetId,E)).next(()=>ne.forEach(_.Ji,E=>g.persistence.referenceDelegate.removeReference(v,_.targetId,E)))))}catch(v){if(!Cl(v))throw v;ve(Ny,"Failed to update sequence numbers: "+v)}for(const v of h){const _=v.targetId;if(!v.fromCache){const E=g.Ts.get(_),C=E.snapshotVersion,j=E.withLastLimboFreeSnapshotVersion(C);g.Ts=g.Ts.insert(_,j)}}}(r.localStore,o))}async function B3(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ve(Fy,"User change. New user:",e.toKey());const r=await VC(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(d=>{d.reject(new Se(ae.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nc(t,r.Rs)}}function z3(n,e){const t=Oe(n),r=t.Ua.get(e);if(r&&r.Ba)return Be().add(r.key);{let s=Be();const o=t.qa.get(e);if(!o)return s;for(const l of o){const u=t.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function sP(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=z3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V3.bind(null,e),e.La.p_=k3.bind(null,e.eventManager),e.La.Ja=C3.bind(null,e.eventManager),e}function W3(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F3.bind(null,e),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Of(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return G$(this.persistence,new H$,e.initialUser,this.serializer)}Xa(e){return new MC(Iy.ri,this.serializer)}Za(e){return new t3}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class H3 extends sf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Je(this.persistence.referenceDelegate instanceof nf);const r=this.persistence.referenceDelegate.garbageCollector;return new I$(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new MC(r=>nf.ri(r,t),this.serializer)}}class u0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>IE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=B3.bind(null,this.syncEngine),await E3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new S3}()}createDatastore(e){const t=Of(e.databaseInfo.databaseId),r=function(o){return new o3(o)}(e.databaseInfo);return function(o,l,u,d){return new c3(o,l,u,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,u){return new h3(r,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>IE(this.syncEngine,t,0),function(){return TE.D()?new TE:new n3}())}createSyncEngine(e,t){return function(s,o,l,u,d,h,g){const v=new R3(s,o,l,u,d,h);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Oe(s);ve(Ro,"RemoteStore shutting down."),o.W_.add(5),await Rc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}u0.provider={build:()=>new u0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="FirestoreClient";class q3{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=Yk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ve(ji,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ve(ji,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Vy(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ig(n,e){n.asyncQueue.verifyOperationInProgress(),ve(ji,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await VC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function NE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await K3(n);ve(ji,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>kE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>kE(e.remoteStore,s)),n._onlineComponents=e}async function K3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(ji,"Using user provided OfflineComponentProvider");try{await ig(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;cl("Error using user provided cache. Falling back to memory cache: "+t),await ig(n,new sf)}}else ve(ji,"Using default OfflineComponentProvider"),await ig(n,new H3(void 0));return n._offlineComponents}async function oP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(ji,"Using user provided OnlineComponentProvider"),await NE(n,n._uninitializedComponentsProvider._online)):(ve(ji,"Using default OnlineComponentProvider"),await NE(n,new u0))),n._onlineComponents}function G3(n){return oP(n).then(e=>e.syncEngine)}async function aP(n){const e=await oP(n),t=e.eventManager;return t.onListen=N3.bind(null,e.syncEngine),t.onUnlisten=O3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=L3.bind(null,e.syncEngine),t}function Q3(n,e,t={}){const r=new Ps;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,h){const g=new iP({next:_=>{g.su(),l.enqueueAndForget(()=>QC(o,v));const E=_.docs.has(u);!E&&_.fromCache?h.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&_.fromCache&&d&&d.source==="server"?h.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),v=new JC(Ey(u.path),g,{includeMetadataChanges:!0,Ta:!0});return GC(o,v)}(await aP(n),n.asyncQueue,e,t,r)),r.promise}function J3(n,e,t={}){const r=new Ps;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,h){const g=new iP({next:_=>{g.su(),l.enqueueAndForget(()=>QC(o,v)),_.fromCache&&d.source==="server"?h.reject(new Se(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),v=new JC(u,g,{includeMetadataChanges:!0,Ta:!0});return GC(o,v)}(await aP(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(n,e,t){if(!t)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Y3(n,e,t,r){if(e===!0&&r===!0)throw new Se(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function DE(n){if(!Pe.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OE(n){if(Pe.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function By(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re()}function Pr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=By(n);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="firestore.googleapis.com",LE=!0;class ME{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cP,this.ssl=LE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:LE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P$)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ME({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ME(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sV;switch(r.type){case"firstParty":return new lV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=jE.get(t);r&&(ve("ComponentProvider","Removing Datastore"),jE.delete(t),r.terminate())}(this),Promise.resolve()}}function X3(n,e,t,r={}){var s;const o=(n=Pr(n,Vf))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==cP&&o.host!==u&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!Po(d,l)&&(n._setSettings(d),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=dn.MOCK_USER;else{h=Vk(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new dn(v)}n._authCredentials=new iV(new Qk(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $f(this.firestore,e,this._query)}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class bi extends $f{constructor(e,t,r){super(e,t,Ey(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Pe(e))}withConverter(e){return new bi(this.firestore,e,this._path)}}function tn(n,e,...t){if(n=vt(n),uP("collection","path",e),n instanceof Vf){const r=ct.fromString(e,...t);return OE(r),new bi(n,null,r)}{if(!(n instanceof jn||n instanceof bi))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return OE(r),new bi(n.firestore,null,r)}}function or(n,e,...t){if(n=vt(n),arguments.length===1&&(e=Yk.newId()),uP("doc","path",e),n instanceof Vf){const r=ct.fromString(e,...t);return DE(r),new jn(n,null,new Pe(r))}{if(!(n instanceof jn||n instanceof bi))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ct.fromString(e,...t));return DE(r),new jn(n.firestore,n instanceof bi?n.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="AsyncQueue";class $E{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new FC(this,"async_queue_retry"),this.Su=()=>{const r=sg();r&&ve(VE,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=sg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=sg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ps;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Cl(e))throw e;ve(VE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Ns("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=My.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Re()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class $o extends Vf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new $E,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $E(e),this._firestoreClient=void 0,await e}}}function Di(n,e){const t=typeof n=="object"?n:gy(),r=typeof n=="string"?n:e||Qh,s=Sf(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Ok("firestore");o&&X3(s,...o)}return s}function zy(n){if(n._terminated)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Z3(n),n._firestoreClient}function Z3(n){var e,t,r;const s=n._freezeSettings(),o=function(u,d,h,g){return new EV(u,d,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,lP(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new q3(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(nn.fromBase64String(e))}catch(t){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gl(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=/^__.*__$/;class t6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ac(e,this.data,t,this.fieldTransforms)}}class dP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}class Ky{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Ky(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return of(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(hP(this.Lu)&&e6.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class n6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Of(e)}ju(e,t,r,s=!1){return new Ky({Lu:e,methodName:t,zu:r,path:en.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gy(n){const e=n._freezeSettings(),t=Of(n._databaseId);return new n6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fP(n,e,t,r,s,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,s);Qy("Data must be an object, but it was:",l,r);const u=pP(r,l);let d,h;if(o.merge)d=new Wn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=c0(e,v,t);if(!l.contains(_))throw new Se(ae.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);gP(g,_)||g.push(_)}d=new Wn(g),h=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,h=l.fieldTransforms;return new t6(new Nn(u),d,h)}class Uf extends Wy{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uf}}function r6(n,e,t,r){const s=n.ju(1,e,t);Qy("Data must be an object, but it was:",s,r);const o=[],l=Nn.empty();Mi(r,(d,h)=>{const g=Jy(e,d,t);h=vt(h);const v=s.Uu(g);if(h instanceof Uf)o.push(g);else{const _=Bf(h,v);_!=null&&(o.push(g),l.set(g,_))}});const u=new Wn(o);return new dP(l,u,s.fieldTransforms)}function s6(n,e,t,r,s,o){const l=n.ju(1,e,t),u=[c0(e,r,t)],d=[s];if(o.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(c0(e,o[_])),d.push(o[_+1]);const h=[],g=Nn.empty();for(let _=u.length-1;_>=0;--_)if(!gP(h,u[_])){const E=u[_];let C=d[_];C=vt(C);const j=l.Uu(E);if(C instanceof Uf)h.push(E);else{const A=Bf(C,j);A!=null&&(h.push(E),g.set(E,A))}}const v=new Wn(h);return new dP(g,v,l.fieldTransforms)}function Bf(n,e){if(mP(n=vt(n)))return Qy("Unsupported field value:",e,n),pP(n,e);if(n instanceof Wy)return function(r,s){if(!hP(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const u of r){let d=Bf(u,s.Ku(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=vt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Mt.fromDate(r);return{timestampValue:tf(s.serializer,o)}}if(r instanceof Mt){const o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tf(s.serializer,o)}}if(r instanceof Hy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gl)return{bytesValue:AC(s.serializer,r._byteString)};if(r instanceof jn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Py(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qy)return function(l,u){return{mapValue:{fields:{[iC]:{stringValue:oC},[Jh]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return Ty(u.serializer,h)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${By(r)}`)}(n,e)}function pP(n,e){const t={};return Zk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(n,(r,s)=>{const o=Bf(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function mP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof Hy||n instanceof gl||n instanceof jn||n instanceof Wy||n instanceof qy)}function Qy(n,e,t){if(!mP(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=By(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function c0(n,e,t){if((e=vt(e))instanceof Ff)return e._internalPath;if(typeof e=="string")return Jy(n,e);throw of("Field path arguments must be of type string or ",n,!1,void 0,t)}const i6=new RegExp("[~\\*/\\[\\]]");function Jy(n,e,t){if(e.search(i6)>=0)throw of(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ff(...e.split("."))._internalPath}catch{throw of(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function of(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new Se(ae.INVALID_ARGUMENT,u+n+d)}function gP(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class o6 extends yP{data(){return super.data()}}function vP(n,e){return typeof e=="string"?Jy(n,e):e instanceof Ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class l6{convertValue(e,t="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Mi(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Jh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>St(l.doubleValue));return new qy(o)}convertGeoPoint(e){return new Hy(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Pf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const t=Ai(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ct.fromString(e);Je(OC(r));const s=new hc(r.get(1),r.get(3)),o=new Pe(r.popFirst(5));return s.isEqual(t)||Ns(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wP extends yP{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ph extends wP{data(e={}){return super.data(e)}}class u6{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ph(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const d=new Ph(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new Ph(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:c6(u.type),doc:d,oldIndex:h,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function c6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n){n=Pr(n,jn);const e=Pr(n.firestore,$o);return Q3(zy(e),n._key).then(t=>d6(e,n,t))}class xP extends l6{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function lr(n){n=Pr(n,$f);const e=Pr(n.firestore,$o),t=zy(e),r=new xP(e);return a6(n._query),J3(t,n._query).then(s=>new u6(e,r,n,s))}function Yy(n,e,t){n=Pr(n,jn);const r=Pr(n.firestore,$o),s=_P(n.converter,e,t);return Wf(r,[fP(Gy(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,ar.none())])}function FE(n,e,t,...r){n=Pr(n,jn);const s=Pr(n.firestore,$o),o=Gy(s);let l;return l=typeof(e=vt(e))=="string"||e instanceof Ff?s6(o,"updateDoc",n._key,e,t,r):r6(o,"updateDoc",n._key,e),Wf(s,[l.toMutation(n._key,ar.exists(!0))])}function Ah(n){return Wf(Pr(n.firestore,$o),[new Sy(n._key,ar.none())])}function gc(n,e){const t=Pr(n.firestore,$o),r=or(n),s=_P(n.converter,e);return Wf(t,[fP(Gy(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}function Wf(n,e){return function(r,s){const o=new Ps;return r.asyncQueue.enqueueAndForget(async()=>M3(await G3(r),s,o)),o.promise}(zy(n),e)}function d6(n,e,t){const r=t.docs.get(e._key),s=new xP(n);return new wP(n,s,e._key,r,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Sl=s})(Lo),Ao(new Ci("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new $o(new oV(r.getProvider("auth-internal")),new uV(l,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(h.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Kr(Hb,qb,e),Kr(Hb,qb,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP="firebasestorage.googleapis.com",EP="storageBucket",h6=2*60*1e3,f6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt extends ts{constructor(e,t,r=0){super(og(e),`Firebase Storage: ${t} (${og(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _t;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_t||(_t={}));function og(n){return"storage/"+n}function Xy(){const n="An unknown error occurred, please check the error payload for server response.";return new wt(_t.UNKNOWN,n)}function p6(n){return new wt(_t.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function m6(n){return new wt(_t.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function g6(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wt(_t.UNAUTHENTICATED,n)}function y6(){return new wt(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function v6(n){return new wt(_t.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function _6(){return new wt(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function w6(){return new wt(_t.CANCELED,"User canceled the upload/download.")}function x6(n){return new wt(_t.INVALID_URL,"Invalid URL '"+n+"'.")}function b6(n){return new wt(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function E6(){return new wt(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+EP+"' property when initializing the app?")}function T6(){return new wt(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function S6(){return new wt(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function k6(n){return new wt(_t.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function d0(n){return new wt(_t.INVALID_ARGUMENT,n)}function TP(){return new wt(_t.APP_DELETED,"The Firebase app was deleted.")}function C6(n){return new wt(_t.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xu(n,e){return new wt(_t.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Iu(n){throw new wt(_t.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hn.makeFromUrl(e,t)}catch{return new Hn(e,"")}if(r.path==="")return r;throw b6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function h(B){B.path_=decodeURIComponent(B.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",E=new RegExp(`^https?://${v}/${g}/b/${s}/o${_}`,"i"),C={bucket:1,path:3},j=t===bP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",D=new RegExp(`^https?://${j}/${s}/${A}`,"i"),$=[{regex:u,indices:d,postModify:o},{regex:E,indices:C,postModify:h},{regex:D,indices:{bucket:1,path:2},postModify:h}];for(let B=0;B<$.length;B++){const U=$[B],V=U.regex.exec(e);if(V){const I=V[U.indices.bucket];let b=V[U.indices.path];b||(b=""),r=new Hn(I,b),U.postModify(r);break}}if(r==null)throw x6(e);return r}}class P6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let h=!1;function g(...A){h||(h=!0,e.apply(null,A))}function v(A){s=setTimeout(()=>{s=null,n(E,d())},A)}function _(){o&&clearTimeout(o)}function E(A,...D){if(h){_();return}if(A){_(),g.call(null,A,...D);return}if(d()||l){_(),g.call(null,A,...D);return}r<64&&(r*=2);let $;u===1?(u=2,$=0):$=(r+Math.random())*1e3,v($)}let C=!1;function j(A){C||(C=!0,_(),!h&&(s!==null?(A||(u=2),clearTimeout(s),v(0)):A||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,j(!0)},t),j}function I6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(n){return n!==void 0}function N6(n){return typeof n=="object"&&!Array.isArray(n)}function Zy(n){return typeof n=="string"||n instanceof String}function UE(n){return ev()&&n instanceof Blob}function ev(){return typeof Blob<"u"}function BE(n,e,t,r){if(r<e)throw d0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw d0(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function SP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Co;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Co||(Co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t,r,s,o,l,u,d,h,g,v,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,C)=>{this.resolve_=E,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new mh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Co.NO_ERROR,d=o.getStatus();if(!u||j6(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Co.ABORT;r(!1,new mh(!1,null,g));return}const h=this.successCodes_.indexOf(d)!==-1;r(!0,new mh(h,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());R6(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=Xy();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?TP():w6();l(d)}else{const d=_6();l(d)}};this.canceled_?t(!1,new mh(!1,null,!0)):this.backoffId_=A6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&I6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function O6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function L6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function M6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function V6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function $6(n,e,t,r,s,o,l=!0){const u=SP(n.urlParams),d=n.url+u,h=Object.assign({},n.headers);return M6(h,e),O6(h,t),L6(h,o),V6(h,r),new D6(d,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function U6(...n){const e=F6();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(ev())return new Blob(n);throw new wt(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function B6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(n){if(typeof atob>"u")throw k6("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ag{constructor(e,t){this.data=e,this.contentType=t||null}}function W6(n,e){switch(n){case Wr.RAW:return new ag(kP(e));case Wr.BASE64:case Wr.BASE64URL:return new ag(CP(n,e));case Wr.DATA_URL:return new ag(q6(e),K6(e))}throw Xy()}function kP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function H6(n){let e;try{e=decodeURIComponent(n)}catch{throw Xu(Wr.DATA_URL,"Malformed data URL.")}return kP(e)}function CP(n,e){switch(n){case Wr.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Xu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Wr.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Xu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=z6(e)}catch(s){throw s.message.includes("polyfill")?s:Xu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class PP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Xu(Wr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=G6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function q6(n){const e=new PP(n);return e.base64?CP(Wr.BASE64,e.rest):H6(e.rest)}function K6(n){return new PP(n).contentType}function G6(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){let r=0,s="";UE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(UE(this.data_)){const r=this.data_,s=B6(r,e,t);return s===null?null:new fi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fi(r,!0)}}static getBlob(...e){if(ev()){const t=e.map(r=>r instanceof fi?r.data_:r);return new fi(U6.apply(null,t))}else{const t=e.map(l=>Zy(l)?W6(Wr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new fi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){let e;try{e=JSON.parse(n)}catch{return null}return N6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function J6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function IP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6(n,e){return e}class _n{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Y6}}let gh=null;function X6(n){return!Zy(n)||n.length<2?n:IP(n)}function RP(){if(gh)return gh;const n=[];n.push(new _n("bucket")),n.push(new _n("generation")),n.push(new _n("metageneration")),n.push(new _n("name","fullPath",!0));function e(o,l){return X6(l)}const t=new _n("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new _n("size");return s.xform=r,n.push(s),n.push(new _n("timeCreated")),n.push(new _n("updated")),n.push(new _n("md5Hash",null,!0)),n.push(new _n("cacheControl",null,!0)),n.push(new _n("contentDisposition",null,!0)),n.push(new _n("contentEncoding",null,!0)),n.push(new _n("contentLanguage",null,!0)),n.push(new _n("contentType",null,!0)),n.push(new _n("metadata","customMetadata",!0)),gh=n,gh}function Z6(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Hn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function eF(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return Z6(r,n),r}function NP(n,e,t){const r=AP(e);return r===null?null:eF(n,r,t)}function tF(n,e,t,r){const s=AP(e);if(s===null||!Zy(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(h=>{const g=n.bucket,v=n.fullPath,_="/b/"+l(g)+"/o/"+l(v),E=Hf(_,t,r),C=SP({alt:"media",token:h});return E+C})[0]}function nF(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class tv{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n){if(!n)throw Xy()}function rF(n,e){function t(r,s){const o=NP(n,s,e);return jP(o!==null),o}return t}function sF(n,e){function t(r,s){const o=NP(n,s,e);return jP(o!==null),tF(o,s,n.host,n._protocol)}return t}function DP(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=y6():s=g6():t.getStatus()===402?s=m6(n.bucket):t.getStatus()===403?s=v6(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function OP(n){const e=DP(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=p6(n.path)),o.serverResponse=s.serverResponse,o}return t}function iF(n,e,t){const r=e.fullServerUrl(),s=Hf(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new tv(s,o,sF(n,t),l);return u.errorHandler=OP(e),u}function oF(n,e){const t=e.fullServerUrl(),r=Hf(t,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function l(d,h){}const u=new tv(r,s,l,o);return u.successCodes=[200,204],u.errorHandler=OP(e),u}function aF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function lF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=aF(null,e)),r}function uF(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let $="";for(let B=0;B<2;B++)$=$+Math.random().toString().slice(2);return $}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const h=lF(e,r,s),g=nF(h,t),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,_=`\r
--`+d+"--",E=fi.getBlob(v,r,_);if(E===null)throw T6();const C={name:h.fullPath},j=Hf(o,n.host,n._protocol),A="POST",D=n.maxUploadRetryTime,F=new tv(j,A,rF(n,t),D);return F.urlParams=C,F.headers=l,F.body=E.uploadData(),F.errorHandler=DP(e),F}class cF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Iu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Iu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Iu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Iu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Iu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class dF extends cF{initXhr(){this.xhr_.responseType="text"}}function nv(){return new dF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t){this._service=e,t instanceof Hn?this._location=t:this._location=Hn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new No(e,t)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IP(this._location.path)}get storage(){return this._service}get parent(){const e=Q6(this._location.path);if(e===null)return null;const t=new Hn(this._location.bucket,e);return new No(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw C6(e)}}function hF(n,e,t){n._throwIfRoot("uploadBytes");const r=uF(n.storage,n._location,RP(),new fi(e,!0),t);return n.storage.makeRequestWithTokens(r,nv).then(s=>({metadata:s,ref:n}))}function fF(n){n._throwIfRoot("getDownloadURL");const e=iF(n.storage,n._location,RP());return n.storage.makeRequestWithTokens(e,nv).then(t=>{if(t===null)throw S6();return t})}function pF(n){n._throwIfRoot("deleteObject");const e=oF(n.storage,n._location);return n.storage.makeRequestWithTokens(e,nv)}function mF(n,e){const t=J6(n._location.path,e),r=new Hn(n._location.bucket,t);return new No(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(n){return/^[A-Za-z]+:\/\//.test(n)}function yF(n,e){return new No(n,e)}function LP(n,e){if(n instanceof rv){const t=n;if(t._bucket==null)throw E6();const r=new No(t,t._bucket);return e!=null?LP(r,e):r}else return e!==void 0?mF(n,e):n}function vF(n,e){if(e&&gF(e)){if(n instanceof rv)return yF(n,e);throw d0("To use ref(service, url), the first argument must be a Storage instance.")}else return LP(n,e)}function zE(n,e){const t=e==null?void 0:e[EP];return t==null?null:Hn.makeFromBucketSpec(t,n)}function _F(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Vk(s,n.app.options.projectId))}class rv{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=bP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=h6,this._maxUploadRetryTime=f6,this._requests=new Set,s!=null?this._bucket=Hn.makeFromBucketSpec(s,this._host):this._bucket=zE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=zE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new No(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new P6(TP());{const l=$6(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const WE="@firebase/storage",HE="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="storage";function wF(n,e,t){return n=vt(n),hF(n,e,t)}function xF(n){return n=vt(n),fF(n)}function qE(n){return n=vt(n),pF(n)}function lg(n,e){return n=vt(n),vF(n,e)}function bF(n=gy(),e){n=vt(n);const r=Sf(n,MP).getImmediate({identifier:e}),s=Ok("storage");return s&&EF(r,...s),r}function EF(n,e,t,r={}){_F(n,e,t,r)}function TF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new rv(t,r,s,e,Lo)}function SF(){Ao(new Ci(MP,TF,"PUBLIC").setMultipleInstances(!0)),Kr(WE,HE,""),Kr(WE,HE,"esm2017")}SF();function sv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function VP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kF=VP,$P=new Cc("auth","Firebase",VP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af=new fy("@firebase/auth");function CF(n,...e){af.logLevel<=Ue.WARN&&af.warn(`Auth (${Lo}): ${n}`,...e)}function Ih(n,...e){af.logLevel<=Ue.ERROR&&af.error(`Auth (${Lo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(n,...e){throw iv(n,...e)}function Jr(n,...e){return iv(n,...e)}function FP(n,e,t){const r=Object.assign(Object.assign({},kF()),{[e]:t});return new Cc("auth","Firebase",r).create(e,{appName:n.name})}function Ei(n){return FP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return $P.create(n,...e)}function Ie(n,e,...t){if(!n)throw iv(e,...t)}function bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ih(e),new Error(e)}function Ds(n,e){n||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function PF(){return KE()==="http:"||KE()==="https:"}function KE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PF()||OL()||"connection"in navigator)?navigator.onLine:!0}function IF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ds(t>e,"Short delay should be less than long delay!"),this.isMobile=NL()||LL()}get(){return AF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(n,e){Ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=new jc(3e4,6e4);function Fo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $i(n,e,t,r,s={}){return BP(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Pc(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:d},o);return DL()||(h.referrerPolicy="no-referrer"),UP.fetch()(zP(n,n.config.apiHost,t,u),h)})}async function BP(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},RF),e);try{const s=new DF(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw yh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,h]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw yh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw yh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw yh(n,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw FP(n,g,h);Ar(n,g)}}catch(s){if(s instanceof ts)throw s;Ar(n,"network-request-failed",{message:String(s)})}}async function qf(n,e,t,r,s={}){const o=await $i(n,e,t,r,s);return"mfaPendingCredential"in o&&Ar(n,"multi-factor-auth-required",{_serverResponse:o}),o}function zP(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?ov(n.config,s):`${n.config.apiScheme}://${s}`}function jF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Jr(this.auth,"network-request-failed")),NF.get())})}}function yh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Jr(n,e,r);return s.customData._tokenResponse=t,s}function GE(n){return n!==void 0&&n.enterprise!==void 0}class OF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function LF(n,e){return $i(n,"GET","/v2/recaptchaConfig",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(n,e){return $i(n,"POST","/v1/accounts:delete",e)}async function WP(n,e){return $i(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VF(n,e=!1){const t=vt(n),r=await t.getIdToken(e),s=av(r);Ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Zu(ug(s.auth_time)),issuedAtTime:Zu(ug(s.iat)),expirationTime:Zu(ug(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ug(n){return Number(n)*1e3}function av(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ih("JWT malformed, contained fewer than 3 sections"),null;try{const s=jk(t);return s?JSON.parse(s):(Ih("Failed to decode base64 JWT payload"),null)}catch(s){return Ih("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function QE(n){const e=av(n);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ts&&$F(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $F({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(n){var e;const t=n.auth,r=await n.getIdToken(),s=await yc(n,WP(t,{idToken:r}));Ie(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?HP(o.providerUserInfo):[],u=BF(n.providerData,l),d=n.isAnonymous,h=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),g=d?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new f0(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function UF(n){const e=vt(n);await lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BF(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function HP(n){return n.map(e=>{var{providerId:t}=e,r=sv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(n,e){const t=await BP(n,{},async()=>{const r=Pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=zP(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",UP.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WF(n,e){return $i(n,"POST","/v2/accounts:revokeToken",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=QE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await zF(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new el;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n,e){Ie(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Es{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=sv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new f0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await yc(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VF(this,e)}reload(){return UF(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await yc(this,MF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,u,d,h,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(s=t.email)!==null&&s!==void 0?s:void 0,E=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=t.photoURL)!==null&&l!==void 0?l:void 0,j=(u=t.tenantId)!==null&&u!==void 0?u:void 0,A=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,D=(h=t.createdAt)!==null&&h!==void 0?h:void 0,F=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:B,isAnonymous:U,providerData:V,stsTokenManager:I}=t;Ie($&&I,e,"internal-error");const b=el.fromJSON(this.name,I);Ie(typeof $=="string",e,"internal-error"),ai(v,e.name),ai(_,e.name),Ie(typeof B=="boolean",e,"internal-error"),Ie(typeof U=="boolean",e,"internal-error"),ai(E,e.name),ai(C,e.name),ai(j,e.name),ai(A,e.name),ai(D,e.name),ai(F,e.name);const S=new Es({uid:$,auth:e,email:_,emailVerified:B,displayName:v,isAnonymous:U,photoURL:C,phoneNumber:E,tenantId:j,stsTokenManager:b,createdAt:D,lastLoginAt:F});return V&&Array.isArray(V)&&(S.providerData=V.map(R=>Object.assign({},R))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,t,r=!1){const s=new el;s.updateFromServerResponse(t);const o=new Es({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?HP(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new el;u.updateFromIdToken(r);const d=new Es({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new f0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=new Map;function Ts(n){Ds(n instanceof Function,"Expected a class definition");let e=JE.get(n);return e?(Ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,JE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qP.type="NONE";const YE=qP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e,t){return`firebase:${n}:${e}:${t}`}class tl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Rh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Rh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tl(Ts(YE),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Ts(YE);const l=Rh(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const g=await h._get(l);if(g){const v=Es._fromJSON(e,g);h!==o&&(u=v),o=h;break}}catch{}const d=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new tl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new tl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XP(e))return"Blackberry";if(ZP(e))return"Webos";if(GP(e))return"Safari";if((e.includes("chrome/")||QP(e))&&!e.includes("edge/"))return"Chrome";if(YP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KP(n=pn()){return/firefox\//i.test(n)}function GP(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QP(n=pn()){return/crios\//i.test(n)}function JP(n=pn()){return/iemobile/i.test(n)}function YP(n=pn()){return/android/i.test(n)}function XP(n=pn()){return/blackberry/i.test(n)}function ZP(n=pn()){return/webos/i.test(n)}function lv(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HF(n=pn()){var e;return lv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qF(){return ML()&&document.documentMode===10}function eA(n=pn()){return lv(n)||YP(n)||ZP(n)||XP(n)||/windows phone/i.test(n)||JP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(n,e=[]){let t;switch(n){case"Browser":t=XE(pn());break;case"Worker":t=`${XE(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(n,e={}){return $i(n,"GET","/v2/passwordPolicy",Fo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=6;class JF{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:QF,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZE(this),this.idTokenSubscription=new ZE(this),this.beforeStateQueue=new KF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$P,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ts(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await tl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await WP(this,{idToken:e}),r=await Es._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ir(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Ei(this));const t=e?vt(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GF(this),t=new JF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Cc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await WF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ts(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CF(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Al(n){return vt(n)}class ZE{constructor(e){this.auth=e,this.observer=null,this.addObserver=HL(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XF(n){Kf=n}function nA(n){return Kf.loadJS(n)}function ZF(){return Kf.recaptchaEnterpriseScript}function eU(){return Kf.gapiScript}function tU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class nU{constructor(){this.enterprise=new rU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sU="recaptcha-enterprise",rA="NO_RECAPTCHA";class iU{constructor(e){this.type=sU,this.auth=Al(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{LF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new OF(d);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;GE(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(rA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&GE(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=ZF();d.length!==0&&(d+=u),nA(d).then(()=>{s(u,o,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function eT(n,e,t,r=!1,s=!1){const o=new iU(n);let l;if(s)l=rA;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function tT(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await eT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await eT(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(n,e){const t=Sf(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Po(o,e??{}))return s;Ar(s,"already-initialized")}return t.initialize({options:e})}function aU(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ts);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lU(n,e,t){const r=Al(n);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=sA(e),{host:l,port:u}=uU(e),d=u===null?"":`:${u}`,h={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Po(h,r.config.emulator)&&Po(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,cU()}function sA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uU(n){const e=sA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:nT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:nT(l)}}}function nT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function cU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,t){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function dU(n,e){return $i(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hU(n,e){return qf(n,"POST","/v1/accounts:signInWithPassword",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(n,e){return qf(n,"POST","/v1/accounts:signInWithEmailLink",Fo(n,e))}async function pU(n,e){return qf(n,"POST","/v1/accounts:signInWithEmailLink",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends uv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new vc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tT(e,t,"signInWithPassword",hU);case"emailLink":return fU(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tT(e,r,"signUpPassword",dU);case"emailLink":return pU(e,{idToken:t,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(n,e){return qf(n,"POST","/v1/accounts:signInWithIdp",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="http://localhost";class jo extends uv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ar("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=sv(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new jo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return nl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nl(e,t)}buildRequest(){const e={requestUri:mU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yU(n){const e=Ou(Lu(n)).link,t=e?Ou(Lu(e)).deep_link_id:null,r=Ou(Lu(n)).deep_link_id;return(r?Ou(Lu(r)).link:null)||r||t||e||n}class cv{constructor(e){var t,r,s,o,l,u;const d=Ou(Lu(e)),h=(t=d.apiKey)!==null&&t!==void 0?t:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,v=gU((s=d.mode)!==null&&s!==void 0?s:null);Ie(h&&g&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=yU(e);try{return new cv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,t){return vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cv.parseLink(t);return Ie(r,"argument-error"),vc._fromEmailAndCode(e,r.code,r.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends iA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Dc{constructor(){super("facebook.com")}static credential(e){return jo._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Dc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jo._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return mi.credential(t,r)}catch{return null}}}mi.GOOGLE_SIGN_IN_METHOD="google.com";mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Dc{constructor(){super("github.com")}static credential(e){return jo._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gi.credential(e.oauthAccessToken)}catch{return null}}}gi.GITHUB_SIGN_IN_METHOD="github.com";gi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Dc{constructor(){super("twitter.com")}static credential(e,t){return jo._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return yi.credential(t,r)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Es._fromIdTokenResponse(e,r,s),l=rT(r);return new yl({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=rT(r);return new yl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function rT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends ts{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,uf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new uf(e,t,r,s)}}function oA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?uf._fromErrorAndOperation(n,o,e,r):o})}async function vU(n,e,t=!1){const r=await yc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _U(n,e,t=!1){const{auth:r}=n;if(ir(r.app))return Promise.reject(Ei(r));const s="reauthenticate";try{const o=await yc(n,oA(r,s,e,n),t);Ie(o.idToken,r,"internal-error");const l=av(o.idToken);Ie(l,r,"internal-error");const{sub:u}=l;return Ie(n.uid===u,r,"user-mismatch"),yl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(n,e,t=!1){if(ir(n.app))return Promise.reject(Ei(n));const r="signIn",s=await oA(n,r,e),o=await yl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function wU(n,e){return aA(Al(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(n){const e=Al(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function bU(n,e,t){return ir(n.app)?Promise.reject(Ei(n)):wU(vt(n),Il.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xU(n),r})}function EU(n,e,t,r){return vt(n).onIdTokenChanged(e,t,r)}function TU(n,e,t){return vt(n).beforeAuthStateChanged(e,t)}function Gf(n,e,t,r){return vt(n).onAuthStateChanged(e,t,r)}function Qf(n){return vt(n).signOut()}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=1e3,kU=10;class uA extends lA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);qF()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kU):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},SU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uA.type="LOCAL";const CU=uA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends lA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cA.type="SESSION";const dA=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Jf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async h=>h(t.origin,o)),d=await PU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const h=dv("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(){return window}function IU(n){Yr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}async function RU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function jU(){return hA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firebaseLocalStorageDb",DU=1,df="firebaseLocalStorage",pA="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yf(n,e){return n.transaction([df],e?"readwrite":"readonly").objectStore(df)}function OU(){const n=indexedDB.deleteDatabase(fA);return new Oc(n).toPromise()}function p0(){const n=indexedDB.open(fA,DU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(df,{keyPath:pA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(df)?e(r):(r.close(),await OU(),e(await p0()))})})}async function sT(n,e,t){const r=Yf(n,!0).put({[pA]:e,value:t});return new Oc(r).toPromise()}async function LU(n,e){const t=Yf(n,!1).get(e),r=await new Oc(t).toPromise();return r===void 0?null:r.value}function iT(n,e){const t=Yf(n,!0).delete(e);return new Oc(t).toPromise()}const MU=800,VU=3;class mA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await p0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>VU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jf._getInstance(jU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await RU(),!this.activeServiceWorker)return;this.sender=new AU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await p0();return await sT(e,cf,"1"),await iT(e,cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>sT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>iT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Yf(s,!1).getAll();return new Oc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mA.type="LOCAL";const $U=mA;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(n,e){return e?Ts(e):(Ie(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends uv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function UU(n){return aA(n.auth,new hv(n),n.bypassAuthState)}function BU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),_U(t,new hv(n),n.bypassAuthState)}async function zU(n){const{auth:e,user:t}=n;return Ie(t,e,"internal-error"),vU(t,new hv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return UU;case"linkViaPopup":case"linkViaRedirect":return zU;case"reauthViaPopup":case"reauthViaRedirect":return BU;default:Ar(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new jc(2e3,1e4);class Ya extends gA{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WU.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU="pendingRedirect",Nh=new Map;class qU extends gA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nh.get(this.auth._key());if(!e){try{const r=await KU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KU(n,e){const t=JU(e),r=QU(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function GU(n,e){Nh.set(n._key(),e)}function QU(n){return Ts(n._redirectPersistence)}function JU(n){return Rh(HU,n.config.apiKey,n.name)}async function YU(n,e,t=!1){if(ir(n.app))return Promise.reject(Ei(n));const r=Al(n),s=FU(r,e),l=await new qU(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=10*60*1e3;class ZU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!yA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Jr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XU&&this.cachedEventUids.clear(),this.cachedEventUids.has(oT(e))}saveEventToCache(e){this.cachedEventUids.add(oT(e)),this.lastProcessedEventTime=Date.now()}}function oT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function e8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(n,e={}){return $i(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r8=/^https?/;async function s8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await t8(n);for(const t of e)try{if(i8(t))return}catch{}Ar(n,"unauthorized-domain")}function i8(n){const e=h0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!r8.test(t))return!1;if(n8.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=new jc(3e4,6e4);function aT(){const n=Yr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function a8(n){return new Promise((e,t)=>{var r,s,o;function l(){aT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aT(),t(Jr(n,"network-request-failed"))},timeout:o8.get()})}if(!((s=(r=Yr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Yr().gapi)===null||o===void 0)&&o.load)l();else{const u=tU("iframefcb");return Yr()[u]=()=>{gapi.load?l():t(Jr(n,"network-request-failed"))},nA(`${eU()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw jh=null,e})}let jh=null;function l8(n){return jh=jh||a8(n),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=new jc(5e3,15e3),c8="__/auth/iframe",d8="emulator/auth/iframe",h8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function p8(n){const e=n.config;Ie(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ov(e,d8):`https://${n.config.authDomain}/${c8}`,r={apiKey:e.apiKey,appName:n.name,v:Lo},s=f8.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Pc(r).slice(1)}`}async function m8(n){const e=await l8(n),t=Yr().gapi;return Ie(t,n,"internal-error"),e.open({where:document.body,url:p8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h8,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Jr(n,"network-request-failed"),u=Yr().setTimeout(()=>{o(l)},u8.get());function d(){Yr().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y8=500,v8=600,_8="_blank",w8="http://localhost";class lT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x8(n,e,t,r=y8,s=v8){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},g8),{width:r.toString(),height:s.toString(),top:o,left:l}),h=pn().toLowerCase();t&&(u=QP(h)?_8:t),KP(h)&&(e=e||w8,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[E,C])=>`${_}${E}=${C},`,"");if(HF(h)&&u!=="_self")return b8(e||"",u),new lT(null);const v=window.open(e||"",u,g);Ie(v,n,"popup-blocked");try{v.focus()}catch{}return new lT(v)}function b8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8="__/auth/handler",T8="emulator/auth/handler",S8=encodeURIComponent("fac");async function uT(n,e,t,r,s,o){Ie(n.config.authDomain,n,"auth-domain-config-required"),Ie(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Lo,eventId:s};if(e instanceof iA){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",WL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof Dc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await n._getAppCheckToken(),h=d?`#${S8}=${encodeURIComponent(d)}`:"";return`${k8(n)}?${Pc(u).slice(1)}${h}`}function k8({config:n}){return n.emulator?ov(n,T8):`https://${n.authDomain}/${E8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="webStorageSupport";class C8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dA,this._completeRedirectFn=YU,this._overrideRedirectResult=GU}async _openPopup(e,t,r,s){var o;Ds((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await uT(e,t,r,h0(),s);return x8(e,l,dv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await uT(e,t,r,h0(),s);return IU(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ds(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await m8(e),r=new ZU(e);return t.register("authEvent",s=>(Ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cg,{type:cg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[cg];l!==void 0&&t(!!l),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=s8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eA()||GP()||lv()}}const P8=C8;var cT="@firebase/auth",dT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R8(n){Ao(new Ci("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Ie(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tA(n)},h=new YF(r,s,o,d);return aU(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ao(new Ci("auth-internal",e=>{const t=Al(e.getProvider("auth").getImmediate());return(r=>new A8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(cT,dT,I8(n)),Kr(cT,dT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8=5*60,j8=Mk("authIdTokenMaxAge")||N8;let hT=null;const D8=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>j8)return;const s=t==null?void 0:t.token;hT!==s&&(hT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function O8(n=gy()){const e=Sf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=oU(n,{popupRedirectResolver:P8,persistence:[$U,CU,dA]}),r=Mk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=D8(o.toString());TU(t,l,()=>l(t.currentUser)),EU(t,u=>l(u))}}const s=Dk("auth");return s&&lU(t,`http://${s}`),t}function L8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}XF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Jr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",L8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R8("Browser");console.log("initializeApp:",typeof my);console.log("getFirestore:",typeof Di);const M8={apiKey:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",authDomain:"aussie-gut-pack.firebaseapp.com",projectId:"aussie-gut-pack",storageBucket:"aussie-gut-pack.firebasestorage.app",messagingSenderId:"834797498886",appId:"1:834797498886:web:cb2f88ab4523480400c987"},Xf=my(M8);console.log("Firebase app:",Xf);const Tt=Di(Xf);console.log("Firestore db:",Tt);const dg=bF(Xf),As=O8(Xf);function V8(){const{isDarkMode:n}=P.useContext(Ze),e=P.useRef(null),t=P.useRef(null),[r,s]=P.useState(!1),[o,l]=P.useState(!1),[u,d]=P.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[h,g]=P.useState(0),[v,_]=P.useState(null),[E,C]=P.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);P.useEffect(()=>{(async()=>{var M,W;const U=or(Tt,"content","home"),V=await zf(U);let I={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"We are dedicated to bringing you information about Australian Shepherds and how to maintain a healthy gut. Our mission is to educate and inspire a natural approach to wellness for you and your furry friends.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin."],lastUpdated:null};if(V.exists()){const O=V.data();I={...I,...O,currentWorkout:{...I.currentWorkout,...O.currentWorkout,warmup:((M=O.currentWorkout)==null?void 0:M.warmup)||I.currentWorkout.warmup,main:((W=O.currentWorkout)==null?void 0:W.main)||I.currentWorkout.main},scheduledWorkouts:O.scheduledWorkouts||[],dailyChallenges:O.dailyChallenges||I.dailyChallenges}}const b=new Date,S=[...I.scheduledWorkouts];let R=!1;if(S.sort((O,re)=>new Date(O.updateDateTime)-new Date(re.updateDateTime)),S.length>0){const O=S[0],re=new Date(O.updateDateTime);b>=re&&(!I.lastUpdated||new Date(I.lastUpdated)<re)&&(I.currentWorkout={description:O.description||"",warmup:O.warmup||[],main:O.main||[]},S.shift(),I.scheduledWorkouts=S,I.lastUpdated=b.toISOString(),R=!0)}R&&await Yy(U,I,{merge:!0}),d(I);try{const O=tn(Tt,"content","blog","posts"),he=(await lr(O)).docs.map(Ne=>({id:Ne.id,...Ne.data()}));if(he.length>0){he.sort((le,me)=>new Date(me.date)-new Date(le.date));const Ne=he[0],xe=j(Ne);_({...Ne,excerpt:xe})}else _({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}catch(O){console.error("Error fetching blog posts:",O),_({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}})()},[]),console.log("Supabase client initialized:",Rn);const j=B=>{if(!B||!B.blocks||B.blocks.length===0)return"Read more...";const U=B.blocks.find(V=>V.type==="paragraph"||V.type==="list"||V.type==="bullet");return U?U.type==="paragraph"&&U.content?U.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(U.content)&&U.content.length>0?U.content[0]+(U.content.length>1?"...":""):"Read more...":"Read more..."};P.useEffect(()=>{const B=new IntersectionObserver(U=>{U.forEach(V=>{const I=V.isIntersecting;V.target===e.current&&s(I),V.target===t.current&&l(I)})},{threshold:.2});return e.current&&B.observe(e.current),t.current&&B.observe(t.current),()=>{e.current&&B.unobserve(e.current),t.current&&B.unobserve(t.current)}},[]),P.useEffect(()=>{const B=setInterval(()=>{g(U=>(U+1)%u.quotes.length)},4e3);return()=>clearInterval(B)},[u.quotes.length]),P.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(E))},[E]);const A={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},D={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},F=B=>{C(U=>U.includes(B)?U.filter(V=>V!==B):[...U,B])},$=u.dailyChallenges.length>0&&E.length===u.dailyChallenges.length&&u.dailyChallenges.every((B,U)=>E.includes(U));return p.jsxs("div",{className:`min-h-screen flex flex-col ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("section",{ref:e,className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"container mx-auto text-center",children:[p.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),p.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."}),p.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[p.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[p.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"About Us"}),p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.aboutUs}),p.jsx("div",{className:"flex justify-center gap-4 mt-6",children:p.jsx(zn,{to:"/login",variant:"primary",className:`${n?"bg-red-600 text-white hover:bg-red-700":"bg-red-700 text-white hover:bg-red-800"}`,children:"Join the Pack"})})]}),p.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:p.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:p.jsx(H2,{className:"w-full h-full object-cover"})})})]})]})}),p.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),p.jsx("section",{ref:t,className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[p.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),p.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:p.jsx(px,{mode:"wait",children:p.jsxs(jb.p,{variants:A,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:['"',u.quotes[h],'"']},h)})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[p.jsxs("div",{children:[p.jsx("h3",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),p.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.currentWorkout.description}),p.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Warm Up"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"}`,children:(u.currentWorkout.warmup||[]).map((B,U)=>p.jsx("li",{className:"mb-2 text-lg",children:B},`warmup-${U}`))}),p.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Main Workout"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:(u.currentWorkout.main||[]).map((B,U)=>p.jsx("li",{className:"mb-2 text-lg",children:B},`main-${U}`))}),p.jsx(zn,{to:"/fitness-tips",variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900",children:"More Fitness Tips"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:(u.dailyChallenges||[]).map((B,U)=>p.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[p.jsx("input",{type:"checkbox",checked:E.includes(U),onChange:()=>F(U),className:"mr-2"}),B]},`challenge-${U}`))}),p.jsx(px,{children:$&&p.jsx(jb.p,{variants:D,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${n?"text-green-400":"text-green-600"}`,children:"Great job, Pack Leader!"})})]})]})]})}),p.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),v&&p.jsx("section",{className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"container mx-auto text-center",children:[p.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),p.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:v.title}),p.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-gray-400":"text-gray-600"}`,children:v.date}),p.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:v.excerpt}),p.jsx(zn,{to:`/blog/${v.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900",children:"Read More"})]})}),p.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),p.jsxs("div",{className:`py-8 ${n?"bg-stone-800":"bg-stone-100"} text-center`,children:[p.jsx("p",{className:`text-lg mb-4 ${n?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),p.jsx(zn,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900",children:"Sign Up"})]})]})}const vA=P.createContext(),$8=({children:n})=>{const[e,t]=P.useState([]),r=d=>{t(h=>h.find(v=>v.id===d.id)?h.map(v=>v.id===d.id?{...v,quantity:v.quantity+1}:v):[...h,{...d,quantity:1}])},s=(d,h)=>{h<=0?o(d):t(g=>g.map(v=>v.id===d?{...v,quantity:h}:v))},o=d=>{t(h=>h.filter(g=>g.id!==d))},l=()=>{t([])},u=()=>e.reduce((d,h)=>d+h.price*h.quantity,0);return p.jsx(vA.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:u},children:n})},fv=()=>P.useContext(vA);function F8(){var O;const{isDarkMode:n}=P.useContext(Ze),{cart:e,addToCart:t,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=fv(),[l,u]=P.useState([]),[d,h]=P.useState([]),[g,v]=P.useState(!1),[_,E]=P.useState(""),[C,j]=P.useState(""),[A,D]=P.useState(!1),[F,$]=P.useState(!0),[B,U]=P.useState(!1),V=P.useRef(null),I=P.useRef(null),b=rn();P.useEffect(()=>{console.log("isMiniCartOpen updated to:",A)},[A]),P.useEffect(()=>{console.log("showAll updated to:",g)},[g]),P.useEffect(()=>{const re=he=>{const Ne=document.querySelector(".cart-button"),xe=he.target.closest(".add-to-cart-button"),le=Date.now(),me=I.current?le-I.current:1/0;console.log("Outside click handler triggered, target:",he.target),console.log("Is target an Add to Cart button?",!!xe),console.log("Time since last Add to Cart click:",me),console.log("IsMiniCartOpen?",A),console.log("OpenedByAdd?",B),A&&!he.target.closest(".mini-cart-sidebar")&&!(Ne!=null&&Ne.contains(he.target))&&!xe&&me>100&&!B&&(console.log("Outside click detected, closing sidebar"),D(!1))};return document.addEventListener("click",re),()=>document.removeEventListener("click",re)},[A,B]),P.useEffect(()=>{(async()=>{try{$(!0);const Ne=(await lr(tn(Tt,"categories"))).docs.map(me=>({id:me.id,...me.data()}));u(Ne);const le=(await lr(tn(Tt,"products"))).docs.map(me=>({id:me.id,...me.data()}));h(le)}catch(he){console.error("Error fetching data from Firestore:",he)}finally{$(!1)}})()},[]),P.useEffect(()=>(e.length>0&&(V.current&&clearTimeout(V.current),console.log("Cart updated, opening sidebar, cart length:",e.length),U(!0),D(!0),e.length!==1&&(V.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),D(!1),U(!1)},3e3))),()=>{V.current&&clearTimeout(V.current)}),[e]),P.useEffect(()=>{e.length===0&&A&&(console.log("Cart is empty, closing sidebar"),D(!1),U(!1))},[e,A]);const S=re=>{I.current=Date.now(),t(re)},R=re=>{const he=[...re];switch(_){case"price-asc":return he.sort((Ne,xe)=>Ne.price-xe.price);case"price-desc":return he.sort((Ne,xe)=>xe.price-Ne.price);case"name-asc":return he.sort((Ne,xe)=>Ne.name.localeCompare(xe.name));case"name-desc":return he.sort((Ne,xe)=>xe.name.localeCompare(Ne.name));default:return he}},M=C?d.filter(re=>re.categoryId===C):d,W=R(M);return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 flex ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:`text-4xl font-bold transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Products"}),p.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950",onClick:re=>{re.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",A),D(!A)},children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),p.jsx("span",{children:"Cart"}),Array.isArray(e)&&e.length>0&&p.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-6 w-6 flex items-center justify-center text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((re,he)=>re+he.quantity,0)})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Filter by Section:"}),p.jsxs("select",{value:C,onChange:re=>j(re.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[p.jsx("option",{value:"",children:"All Sections"}),l.map(re=>p.jsx("option",{value:re.id,children:re.name},re.id))]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Sort By:"}),p.jsxs("select",{value:_,onChange:re=>E(re.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[p.jsx("option",{value:"",children:"None"}),p.jsx("option",{value:"price-asc",children:"Price: Low to High"}),p.jsx("option",{value:"price-desc",children:"Price: High to Low"}),p.jsx("option",{value:"name-asc",children:"Name: A-Z"}),p.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),p.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),v(re=>{const he=!re;return console.log("Setting showAll to:",he),he&&(console.log("Resetting filterCategory to show all products"),j("")),he})},className:`px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${n?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]}),F?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):C?p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:((O=l.find(re=>re.id===C))==null?void 0:O.name)||"Section"}),W.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:W.map(re=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:he=>{he.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${re.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:re.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",re.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",re.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",re.size]}),p.jsx("button",{onClick:he=>{he.stopPropagation(),I.current=Date.now(),S(re)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},re.id))})]}):g?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:W.map(re=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:he=>{he.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${re.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:re.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",re.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",re.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",re.size]}),p.jsx("button",{onClick:he=>{he.stopPropagation(),I.current=Date.now(),S(re)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},re.id))}):l.map(re=>p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:R(d.filter(he=>he.categoryId===re.id)).map(he=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:he.image,alt:he.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:Ne=>{Ne.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${he.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:he.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:he.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",he.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",he.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",he.size]}),p.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),I.current=Date.now(),S(he)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},he.id))})]},re.id))]}),A&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:re=>{re.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),D(!1)}}),p.jsx("div",{className:`mini-cart-sidebar w-80 p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${A?"translate-x-0":"translate-x-full"} ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:p.jsxs("div",{className:`mini-cart-content ${A?"active":""}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Your Cart"}),p.jsx("button",{onClick:re=>{re.stopPropagation(),console.log("Close button clicked, closing sidebar"),D(!1)},className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:"✕"})]}),!Array.isArray(e)||e.length===0?p.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):p.jsxs("div",{className:"space-y-4",children:[p.jsx(vf,{component:null,children:e.map(re=>p.jsx(yf,{timeout:300,classNames:"cart-item",children:p.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${n?"border-stone-600":"border-red-300"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-16 h-16 object-cover rounded-md",onError:he=>{he.target.src="https://via.placeholder.com/80"}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:`text-sm font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["$",re.price.toFixed(2)," x ",re.quantity]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[re.quantity===1?p.jsx("button",{onClick:he=>{he.stopPropagation(),s(re.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):p.jsx("button",{onClick:he=>{he.stopPropagation(),r(re.id,re.quantity-1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),p.jsx("span",{className:`text-sm mx-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.quantity}),p.jsx("button",{onClick:he=>{he.stopPropagation(),r(re.id,re.quantity+1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),p.jsx("button",{onClick:he=>{he.stopPropagation(),s(re.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-colors duration-300 ease-in-out",children:"✕"})]})},re.id))}),p.jsxs("div",{className:"border-t pt-4 mt-4",children:[p.jsxs("p",{className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),p.jsx("button",{onClick:re=>{re.stopPropagation(),D(!1),b("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4",children:"Go to Cart"}),p.jsx("button",{onClick:re=>{re.stopPropagation(),D(!1),b("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2",children:"Proceed to Checkout"})]})]})]})})]})]})}function U8(){const{isDarkMode:n}=P.useContext(Ze),{cart:e,updateQuantity:t,removeFromCart:r,clearCart:s,getTotalPrice:o}=fv(),[l,u]=P.useState(!1),[d,h]=P.useState({name:"",email:"",address:""}),g=rn(),v=async _=>{if(_.preventDefault(),!d.name||!d.email||!d.address){alert("Please fill in all fields to proceed with checkout.");return}u(!0);try{const E={items:e,total:o(),customer:d,createdAt:new Date().toISOString(),status:"pending"};await gc(tn(Tt,"orders"),E),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(E){console.error("Error placing order:",E),alert("Failed to place order. Please try again.")}finally{u(!1),h({name:"",email:"",address:""})}};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:`text-lg mb-4 ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),p.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):p.jsxs("div",{className:"space-y-8",children:[p.jsx("div",{className:"space-y-4",children:e.map(_=>p.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:_.image,alt:_.name,className:"w-20 h-20 object-cover rounded-md",onError:E=>{E.target.src="https://via.placeholder.com/80"}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:_.name}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",_.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(_.price*_.quantity).toFixed(2)]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>t(_.id,_.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),p.jsx("span",{className:`text-lg ${n?"text-white":"text-red-600"}`,children:_.quantity}),p.jsx("button",{onClick:()=>t(_.id,_.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),p.jsx("button",{onClick:()=>r(_.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},_.id))}),p.jsxs("div",{className:`p-6 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-white":"text-red-600"}`,children:"Order Summary"}),p.jsxs("p",{className:`text-lg mb-4 ${n?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),p.jsxs("form",{onSubmit:v,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Full Name"}),p.jsx("input",{type:"text",value:d.name,onChange:_=>h({...d,name:_.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Email"}),p.jsx("input",{type:"email",value:d.email,onChange:_=>h({...d,email:_.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Shipping Address"}),p.jsx("textarea",{value:d.address,onChange:_=>h({...d,address:_.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),p.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function B8(){const{isDarkMode:n}=P.useContext(Ze),{cart:e,updateQuantity:t,removeFromCart:r}=fv(),s=Object.values(e).reduce((l,u)=>l+u.price*u.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsxs("header",{className:"text-center mb-12",children:[p.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Checkout"}),p.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),p.jsx(zn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,u])=>p.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[p.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:p.jsx("img",{src:u.image||"https://via.placeholder.com/80",alt:u.name,className:"w-full h-full object-cover rounded"})}),p.jsxs("div",{className:"flex-1 ml-4",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.name}),p.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Color: ",u.color]}),p.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Size: ",u.size]})]}),p.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:"✕"})]}),p.jsxs("div",{className:"flex items-center mt-2",children:[p.jsx("button",{onClick:()=>t(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${n?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),p.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${n?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:u.quantity}),p.jsx("button",{onClick:()=>t(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${n?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),p.jsx("div",{className:"text-right ml-4",children:u.originalPrice?p.jsxs("div",{children:[p.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["$",(u.originalPrice*u.quantity).toFixed(2)]}),p.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})]}):p.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})})]},l))}),p.jsxs("div",{className:"mt-12 text-right",children:[p.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),p.jsx(zn,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const m0=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):","• Stress: Elevates cortisol, disrupting gut flora and increasing permeability","• Glyphosate: Kills beneficial bacteria, feeds pathogenic ones","• Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections","• Seed Oils: Feed pathogenic bacteria, have a long half-life","• Refined Sugars: Feed harmful bacteria, promote dysbiosis","• Long-term Restrictive Diets: Reduce microbiome diversity","• Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
• Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
• Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
• Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesn’t survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
• Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
• A nutrient-dense, diverse, unprocessed diet with prebiotics
• Healthy exercise, sleep, and an uplifting social life worth enjoying
• Sun exposure and skin contact with nature
• Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connected—good gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function g0({title:n,content:e,footer:t,className:r}){const{isDarkMode:s}=P.useContext(Ze);return p.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[p.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:n}),e&&p.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),t&&p.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:t})]})}function z8(){const{isDarkMode:n}=P.useContext(Ze);P.useEffect(()=>{});const e=m0.filter(r=>r.category==="Benefits"),t=m0.filter(r=>r.category!=="Benefits");return p.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("div",{className:"pt-16"}),p.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),p.jsxs("section",{className:"mb-8 flex-grow",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),p.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),p.jsxs("section",{className:"py-12 px-6 flex-grow",children:[p.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>p.jsx(st,{to:`/gut-health/${r.id}`,children:p.jsx(g0,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),p.jsxs("section",{className:"flex-grow",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:t.map(r=>p.jsx(st,{to:`/gut-health/${r.id}`,children:p.jsx(g0,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${n?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function W8(){const{id:n}=mf(),{isDarkMode:e}=P.useContext(Ze);rn();const t=m0.find(r=>r.id.toString()===n);return t?p.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[p.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:t.title}),p.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",t.category]}),Array.isArray(t.content)?p.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:t.content.map((r,s)=>p.jsx("li",{className:"mb-2",children:r},s))}):p.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:t.content}),p.jsx(zn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):p.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[p.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),p.jsx(zn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const H8=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function q8(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),r=l=>t([...e,l]),s=l=>t(e.filter(u=>u.id!==l)),o=e.reduce((l,u)=>l+u.price,0);return p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsx("h1",{className:`text-3xl font-bold mb-6 ${n?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-green-200":"text-green-700"}`,children:"Available Products"}),H8.map(l=>p.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${n?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[p.jsxs("div",{children:[p.jsx("h3",{className:`font-bold ${n?"text-gray-300":"text-gray-800"}`,children:l.name}),p.jsxs("p",{className:`${n?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),p.jsx(zn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?p.jsx("p",{className:`${n?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):p.jsxs(p.Fragment,{children:[e.map(l=>p.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${n?"border-gray-700":"border-gray-300"}`,children:[p.jsx("span",{className:`${n?"text-gray-300":"text-gray-800"}`,children:l.name}),p.jsxs("div",{children:[p.jsxs("span",{className:`mr-4 ${n?"text-green-400":"text-green-700"}`,children:["$",l.price]}),p.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),p.jsxs("div",{className:`mt-4 font-bold ${n?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),p.jsx(zn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}var K8={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function G8(n){if(typeof n=="number")return{value:n,unit:"px"};var e,t=(n.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var r=(n.match(/[^0-9]*$/)||"").toString();return K8[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function fT(n){var e=G8(n);return"".concat(e.value).concat(e.unit)}var Q8=function(n,e,t){var r="react-spinners-".concat(n,"-").concat(t);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(l,0),r},hf=function(){return hf=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},hf.apply(this,arguments)},J8=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},Y8=Q8("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function _c(n){var e=n.loading,t=e===void 0?!0:e,r=n.color,s=r===void 0?"#000000":r,o=n.speedMultiplier,l=o===void 0?1:o,u=n.cssOverride,d=u===void 0?{}:u,h=n.size,g=h===void 0?35:h,v=J8(n,["loading","color","speedMultiplier","cssOverride","size"]),_=hf({background:"transparent !important",width:fT(g),height:fT(g),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(Y8," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},d);return t?P.createElement("span",hf({style:_},v)):null}const X8=()=>{const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),[r,s]=P.useState(!0),[o,l]=P.useState(null);P.useEffect(()=>{(async()=>{try{const g=tn(Tt,"content","blog","posts"),_=(await lr(g)).docs.map(E=>({id:E.id,title:E.data().title,blocks:E.data().blocks||[{type:"paragraph",content:""}],lastEdited:E.data().lastEdited||""}));if(console.log("Fetched blog posts:",_),_.length>0){const E=_.sort((C,j)=>{const A=C.lastEdited?new Date(C.lastEdited):new Date(0);return(j.lastEdited?new Date(j.lastEdited):new Date(0))-A});t(E)}else t([])}catch(g){console.error("Error fetching blog posts:",g),l("Failed to load blog posts. Please try again later."),t([])}finally{s(!1)}})()},[]);const u=h=>h?new Date(h).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",d=h=>{if(!h.blocks||h.blocks.length===0)return"Read more...";const g=h.blocks.find(v=>v.type==="paragraph"||v.type==="list"||v.type==="bullet");return g?g.type==="paragraph"?g.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(g.content)?g.content[0]+(g.content.length>1?"...":""):"Read more...":"Read more..."};return r?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),p.jsx("div",{className:"text-center",children:p.jsx(_c,{color:n?"#f87171":"#b91c1c"})})]}):o?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:o})]}):p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(h=>p.jsx(st,{to:`/blog/${h.id}`,className:"block group",children:p.jsx(g0,{title:h.title,footer:p.jsxs("span",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",u(h.lastEdited)]}),content:p.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:d(h)}),className:`p-6 rounded-lg shadow-md transition-all duration-300 ease-in-out ${n?"bg-stone-800 hover:bg-stone-700":"bg-white hover:bg-stone-100"} group-hover:shadow-lg`})},h.id))})]})},Z8=()=>{const{id:n}=mf(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(null),[s,o]=P.useState(!0),[l,u]=P.useState(null);P.useEffect(()=>{(async()=>{try{o(!0),u(null);const g=or(Tt,"content","blog","posts",n),v=await zf(g);v.exists()?r({id:v.id,...v.data()}):r(null)}catch(g){console.error("Error fetching blog post:",g),u("Failed to load blog post. Please try again later.")}finally{o(!1)}})()},[n]);const d=h=>h?new Date(h).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return s?p.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:p.jsx("div",{className:"text-center",children:p.jsx(_c,{color:e?"#f87171":"#b91c1c"})})}):l?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Error"}),p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-600"}`,children:l}),p.jsx(zn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):t?p.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:t.title}),p.jsxs("p",{className:`text-lg mb-8 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",d(t.lastEdited)]}),p.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:t.blocks&&t.blocks.length>0?t.blocks.map((h,g)=>p.jsx("div",{className:"mb-6",children:h.type==="paragraph"?p.jsx("p",{children:h.content}):h.type==="list"&&Array.isArray(h.content)?p.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:h.content.map((v,_)=>p.jsx("li",{children:v},_))}):h.type==="bullet"&&Array.isArray(h.content)?p.jsx("ul",{className:"list-disc pl-6 space-y-2",children:h.content.map((v,_)=>p.jsx("li",{children:v},_))}):h.type==="image"&&h.content?p.jsx("img",{src:h.content,alt:"Blog content",className:"w-full max-w-md mx-auto rounded-lg shadow-md"}):h.type==="link"&&h.content.url?p.jsx(st,{to:h.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:h.content.text||h.content.url}):p.jsx("p",{className:"text-red-500",children:"Invalid block format"})},g)):p.jsx("p",{children:"No content available."})}),p.jsx(zn,{to:"/blog",variant:"primary",className:"mt-8 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})}):p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),p.jsx(zn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},e9=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function t9(){const{isDarkMode:n}=P.useContext(Ze);return p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${n?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),p.jsx("div",{className:"space-y-4",children:e9.map((e,t)=>p.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${n?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[p.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${n?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,p.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:"▼"})]}),p.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},t))})]})}class Lc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const n9=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Zt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:n9()},pv=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},r9=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=pv(n);Zt.publicKey=t.publicKey,Zt.blockHeadless=t.blockHeadless,Zt.storageProvider=t.storageProvider,Zt.blockList=t.blockList,Zt.limitRate=t.limitRate,Zt.origin=t.origin||e},_A=async(n,e,t={})=>{const r=await fetch(Zt.origin+n,{method:"POST",headers:t,body:e}),s=await r.text(),o=new Lc(r.status,s);if(r.ok)return o;throw o},wA=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},s9=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},xA=n=>n.webdriver||!n.languages||n.languages.length===0,bA=()=>new Lc(451,"Unavailable For Headless Browser"),i9=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},o9=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},a9=(n,e)=>n instanceof FormData?n.get(e):n[e],EA=(n,e)=>{if(o9(n))return!1;i9(n.list,n.watchVariable);const t=a9(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},TA=()=>new Lc(403,"Forbidden"),l9=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},u9=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},SA=async(n,e,t)=>{if(!e.throttle||!t)return!1;l9(e.throttle,e.id);const r=e.id||n;return await u9(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},kA=()=>new Lc(429,"Too Many Requests"),c9=async(n,e,t,r)=>{const s=pv(r),o=s.publicKey||Zt.publicKey,l=s.blockHeadless||Zt.blockHeadless,u=s.storageProvider||Zt.storageProvider,d={...Zt.blockList,...s.blockList},h={...Zt.limitRate,...s.limitRate};return l&&xA(navigator)?Promise.reject(bA()):(wA(o,n,e),s9(t),t&&EA(d,t)?Promise.reject(TA()):await SA(location.pathname,h,u)?Promise.reject(kA()):_A("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},d9=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},h9=n=>typeof n=="string"?document.querySelector(n):n,f9=async(n,e,t,r)=>{const s=pv(r),o=s.publicKey||Zt.publicKey,l=s.blockHeadless||Zt.blockHeadless,u=Zt.storageProvider||s.storageProvider,d={...Zt.blockList,...s.blockList},h={...Zt.limitRate,...s.limitRate};if(l&&xA(navigator))return Promise.reject(bA());const g=h9(t);wA(o,n,e),d9(g);const v=new FormData(g);return EA(d,v)?Promise.reject(TA()):await SA(location.pathname,h,u)?Promise.reject(kA()):(v.append("lib_version","4.4.1"),v.append("service_id",n),v.append("template_id",e),v.append("user_id",o),_A("/api/v1.0/email/send-form",v))},p9={init:r9,send:c9,sendForm:f9,EmailJSResponseStatus:Lc};function m9(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState({name:"",email:"",message:""}),[r,s]=P.useState(""),o=u=>{const{name:d,value:h}=u.target;t(g=>({...g,[d]:h}))},l=u=>{u.preventDefault(),s("Sending..."),p9.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(d=>{s("Thank you! Your inquiry has been sent."),t({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},d=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",d.text),setTimeout(()=>s(""),3e3)})};return p.jsx("div",{className:`min-h-screen py-12 px-4 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Contact Us"}),p.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),p.jsxs("form",{onSubmit:l,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Message"}),p.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&p.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:r})]})]})})}function g9(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState(""),[r,s]=P.useState(""),[o,l]=P.useState(!1),[u,d]=P.useState(null),h=rn();P.useEffect(()=>{const _=Gf(As,E=>{l(!!E)});return()=>_()},[]);const g=async _=>{_.preventDefault(),d(null);try{await bU(As,e,r),l(!0)}catch(E){d("Failed to log in: "+E.message)}},v=async()=>{try{await Qf(As),l(!1),h("/admin")}catch(_){d("Failed to log out: "+_.message)}};return o?p.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),p.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),p.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),p.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),p.jsx("button",{onClick:v,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):p.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:`p-6 ${n?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[p.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),u&&p.jsx("p",{className:`text-red-500 mb-4 ${n?"text-red-400":"text-red-600"}`,children:u}),p.jsxs("form",{onSubmit:g,children:[p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"email",value:e,onChange:_=>t(_.target.value),className:`border p-2 w-full mb-4 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"password",value:r,onChange:_=>s(_.target.value),className:`border p-2 w-full mb-4 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function y9(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([""]),[r,s]=P.useState(""),[o,l]=P.useState([""]),[u,d]=P.useState([""]),[h,g]=P.useState([]),[v,_]=P.useState(""),[E,C]=P.useState([""]),[j,A]=P.useState(null),D=rn();P.useEffect(()=>{const ie=Gf(As,q=>{q||D("/admin")});return()=>ie()},[D]),P.useEffect(()=>{(async()=>{var q,Q,te,fe,ge,We,He,At;try{const Dn=or(Tt,"content","home"),ns=await zf(Dn);if(ns.exists()){const $t=ns.data();t((q=$t.quotes)!=null&&q.length?$t.quotes:[""]),s(((Q=$t.currentWorkout)==null?void 0:Q.description)||""),l((fe=(te=$t.currentWorkout)==null?void 0:te.warmup)!=null&&fe.length?$t.currentWorkout.warmup:[""]),d((We=(ge=$t.currentWorkout)==null?void 0:ge.main)!=null&&We.length?$t.currentWorkout.main:[""]),g((He=$t.scheduledWorkouts)!=null&&He.length?$t.scheduledWorkouts.map(rs=>({...rs,warmup:rs.warmup||[""],main:rs.main||[""]})):[{description:"",warmup:[""],main:[""],updateDateTime:""}]),_($t.aboutUs||""),C((At=$t.dailyChallenges)!=null&&At.length?$t.dailyChallenges:[""])}}catch(Dn){A("Failed to load content: "+Dn.message)}})()},[]);const F=async()=>{A(null);const ie={quotes:e.filter(q=>q.trim()!==""),currentWorkout:{description:r,warmup:o.filter(q=>q.trim()!==""),main:u.filter(q=>q.trim()!=="")},scheduledWorkouts:h.filter(q=>q.description.trim()&&(q.warmup.length>0||q.main.length>0)&&q.updateDateTime.trim()).map(q=>({description:q.description,warmup:q.warmup.filter(Q=>Q.trim()!==""),main:q.main.filter(Q=>Q.trim()!==""),updateDateTime:q.updateDateTime})),aboutUs:v.trim(),dailyChallenges:E.filter(q=>q.trim()!==""),lastUpdated:new Date().toISOString()};try{await Yy(or(Tt,"content","home"),ie),alert("Home page content saved successfully!"),D("/admin")}catch(q){A("Error saving changes: "+q.message)}},$=async()=>{try{await Qf(As),D("/admin")}catch(ie){A("Failed to log out: "+ie.message)}},B=()=>t([...e,""]),U=ie=>t(e.filter((q,Q)=>Q!==ie)),V=(ie,q)=>{const Q=[...e];Q[ie]=q,t(Q)},I=()=>l([...o,""]),b=ie=>l(o.filter((q,Q)=>Q!==ie)),S=(ie,q)=>{const Q=[...o];Q[ie]=q,l(Q)},R=()=>d([...u,""]),M=ie=>d(u.filter((q,Q)=>Q!==ie)),W=(ie,q)=>{const Q=[...u];Q[ie]=q,d(Q)},O=()=>g([...h,{description:"",warmup:[""],main:[""],updateDateTime:""}]),re=ie=>g(h.filter((q,Q)=>Q!==ie)),he=(ie,q,Q)=>{const te=[...h];te[ie][q]=Q,g(te)},Ne=ie=>{const q=[...h];q[ie].warmup.push(""),g(q)},xe=(ie,q)=>{const Q=[...h];Q[ie].warmup=Q[ie].warmup.filter((te,fe)=>fe!==q),g(Q)},le=(ie,q,Q)=>{const te=[...h];te[ie].warmup[q]=Q,g(te)},me=ie=>{const q=[...h];q[ie].main.push(""),g(q)},pe=(ie,q)=>{const Q=[...h];Q[ie].main=Q[ie].main.filter((te,fe)=>fe!==q),g(Q)},K=(ie,q,Q)=>{const te=[...h];te[ie].main[q]=Q,g(te)},ee=()=>C([...E,""]),Ee=ie=>C(E.filter((q,Q)=>Q!==ie)),Le=(ie,q)=>{const Q=[...E];Q[ie]=q,C(Q)};return p.jsxs("div",{className:`min-h-screen p-6 ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),j&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:j}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>V(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${q+1}`}),p.jsx("button",{onClick:()=>U(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},q)),p.jsx("button",{onClick:B,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),p.jsx("textarea",{value:v,onChange:ie=>_(ie.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),p.jsx("textarea",{value:r,onChange:ie=>s(ie.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>S(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${q+1}`}),p.jsx("button",{onClick:()=>b(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${q}`)),p.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mt-4 mb-2`,children:"Main Workout Exercises"}),u.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>W(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${q+1}`}),p.jsx("button",{onClick:()=>M(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove"})]},`main-${q}`)),p.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Main Exercise"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((ie,q)=>p.jsxs("div",{className:`mb-4 border p-4 rounded ${n?"border-stone-600":"border-red-300"}`,children:[p.jsx("input",{type:"datetime-local",value:ie.updateDateTime?ie.updateDateTime.slice(0,16):"",onChange:Q=>he(q,"updateDateTime",new Date(Q.target.value).toISOString()),className:`border p-2 w-full mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),p.jsx("textarea",{value:ie.description,onChange:Q=>he(q,"description",Q.target.value),className:`border p-2 w-full h-24 mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"} mt-2 mb-2`,children:"Warm Up Exercises"}),ie.warmup.map((Q,te)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:fe=>le(q,te,fe.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${te+1}`}),p.jsx("button",{onClick:()=>xe(q,te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ie.warmup.length===1,children:"Remove"})]},`warmup-${q}-${te}`)),p.jsx("button",{onClick:()=>Ne(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mt-2 mb-2`,children:"Main Workout Exercises"}),ie.main.map((Q,te)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:fe=>K(q,te,fe.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${te+1}`}),p.jsx("button",{onClick:()=>pe(q,te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ie.main.length===1,children:"Remove"})]},`main-${q}-${te}`)),p.jsx("button",{onClick:()=>me(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-2",children:"Add Main Exercise"}),p.jsx("button",{onClick:()=>re(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},q)),p.jsx("button",{onClick:O,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),E.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>Le(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${q+1}`}),p.jsx("button",{onClick:()=>Ee(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:E.length===1,children:"Remove"})]},q)),p.jsx("button",{onClick:ee,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),p.jsx("button",{onClick:F,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),p.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function v9(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),[r,s]=P.useState(null),[o,l]=P.useState(null),u=rn();P.useEffect(()=>{const V=Gf(As,I=>{I||u("/admin")});return()=>V()},[u]),P.useEffect(()=>{(async()=>{try{const I=tn(Tt,"content","blog","posts"),R=(await lr(I)).docs.map(M=>({id:M.id,title:M.data().title||"",blocks:M.data().blocks||[{type:"paragraph",content:""}],lastEdited:M.data().lastEdited||""})).sort((M,W)=>{const O=M.lastEdited?new Date(M.lastEdited):new Date(0);return(W.lastEdited?new Date(W.lastEdited):new Date(0))-O});t(R.length?R:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:""}])}catch(I){l("Failed to load blog posts: "+I.message)}})()},[]);const d=async()=>{l(null);try{const V=tn(Tt,"content","blog","posts"),I=await lr(V);for(const b of I.docs)await Ah(b.ref);for(const b of e)if(b.title.trim()&&b.blocks.some(S=>S.type==="paragraph"||S.type==="image"||S.type==="link"?S.content.trim():S.content.some(R=>R.trim()))){const S=b.id||Date.now().toString();await Yy(or(V,S),{id:S,title:b.title,blocks:b.blocks.map(R=>({type:R.type,content:R.type==="paragraph"||R.type==="image"?R.content:R.type==="link"?{url:R.content.url,text:R.content.text}:R.content.filter(M=>M.trim()!=="")})),lastEdited:b.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),u("/admin")}catch(V){l("Error saving blog posts: "+V.message)}},h=async()=>{try{await Qf(As),u("/admin")}catch(V){l("Failed to log out: "+V.message)}},g=()=>{const V=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:new Date().toISOString()}];t(V),s(V.length-1)},v=V=>{const I=e.filter((b,S)=>S!==V);t(I),s(null)},_=(V,I,b)=>{const S=[...e];S[V]={...S[V],[I]:b,lastEdited:new Date().toISOString()},t(S)},E=(V,I)=>{const b=[...e];b[V].blocks.push({type:I,content:I==="paragraph"||I==="image"?"":I==="link"?{url:"",text:""}:[""]}),b[V].lastEdited=new Date().toISOString(),t(b)},C=(V,I)=>{const b=[...e];b[V].blocks=b[V].blocks.filter((S,R)=>R!==I),b[V].lastEdited=new Date().toISOString(),t(b)},j=(V,I,b)=>{const S=[...e];S[V].blocks[I]={type:b,content:b==="paragraph"||b==="image"?"":b==="link"?{url:"",text:""}:[""]},S[V].lastEdited=new Date().toISOString(),t(S)},A=(V,I,b)=>{const S=[...e];S[V].blocks[I].content=b,S[V].lastEdited=new Date().toISOString(),t(S)},D=(V,I,b,S)=>{const R=[...e];R[V].blocks[I].content[b]=S,R[V].lastEdited=new Date().toISOString(),t(R)},F=(V,I)=>{const b=[...e];b[V].blocks[I].content.push(""),b[V].lastEdited=new Date().toISOString(),t(b)},$=(V,I,b)=>{const S=[...e];S[V].blocks[I].content=S[V].blocks[I].content.filter((R,M)=>M!==b),S[V].lastEdited=new Date().toISOString(),t(S)},B=(V,I,b,S)=>{const R=[...e];R[V].blocks[I].content[b]=S,R[V].lastEdited=new Date().toISOString(),t(R)},U=V=>V?new Date(V).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return p.jsxs("div",{className:`min-h-screen p-6 ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:o}),r===null?p.jsxs("div",{className:"mb-6",children:[e.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):p.jsx("div",{className:"grid gap-4",children:e.map((V,I)=>p.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(I),children:[p.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:V.title||"Untitled Post"}),p.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",U(V.lastEdited)]})]},I))}),p.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),p.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:`mb-4 border p-4 rounded ${n?"border-stone-600":"border-red-300"}`,children:[p.jsx("input",{type:"text",value:e[r].title,onChange:V=>_(r,"title",V.target.value),className:`border p-2 w-full mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),p.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",U(e[r].lastEdited)]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((V,I)=>p.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Block Type:"}),p.jsxs("select",{value:V.type,onChange:b=>j(r,I,b.target.value),className:`border p-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[p.jsx("option",{value:"paragraph",children:"Paragraph"}),p.jsx("option",{value:"list",children:"Numbered List"}),p.jsx("option",{value:"bullet",children:"Bullet Points"}),p.jsx("option",{value:"image",children:"Image"}),p.jsx("option",{value:"link",children:"Link"})]}),p.jsx("button",{onClick:()=>C(r,I),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),V.type==="paragraph"?p.jsx("textarea",{value:V.content,onChange:b=>A(r,I,b.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):V.type==="image"?p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",value:V.content,onChange:b=>A(r,I,b.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),V.content&&p.jsx("img",{src:V.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):V.type==="link"?p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",value:V.content.url,onChange:b=>D(r,I,"url",b.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),p.jsx("input",{type:"text",value:V.content.text,onChange:b=>D(r,I,"text",b.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):p.jsxs("div",{children:[V.content.map((b,S)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:b,onChange:R=>B(r,I,S,R.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${S+1}`}),p.jsx("button",{onClick:()=>$(r,I,S),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[I].content.length===1,children:"Remove"})]},S)),p.jsx("button",{onClick:()=>F(r,I),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},I)),p.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[p.jsx("button",{onClick:()=>E(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),p.jsx("button",{onClick:()=>E(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),p.jsx("button",{onClick:()=>E(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),p.jsx("button",{onClick:()=>E(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Image"}),p.jsx("button",{onClick:()=>E(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),p.jsx("button",{onClick:()=>v(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),p.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),p.jsx("button",{onClick:d,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),p.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function _9(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),[r,s]=P.useState([]),[o,l]=P.useState(""),[u,d]=P.useState({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""}),[h,g]=P.useState(null),[v,_]=P.useState(null),[E,C]=P.useState(null),j=rn();P.useEffect(()=>{const b=Gf(As,S=>{S||j("/admin")});return()=>b()},[j]),P.useEffect(()=>{(async()=>{try{const R=(await lr(tn(Tt,"categories"))).docs.map(O=>({id:O.id,...O.data()}));t(R);const W=(await lr(tn(Tt,"products"))).docs.map(O=>({id:O.id,...O.data()}));s(W)}catch(S){C("Error fetching data from Firestore: "+S.message)}})()},[]);const A=async b=>{if(b.preventDefault(),!!o)try{const S=await gc(tn(Tt,"categories"),{name:o});t([...e,{id:S.id,name:o}]),l("")}catch(S){C("Error adding category: "+S.message)}},D=async b=>{try{const S=or(Tt,"categories",b.id);await FE(S,{name:b.name}),t(e.map(R=>R.id===b.id?{...R,name:b.name}:R)),g(null)}catch(S){C("Error updating category: "+S.message)}},F=async b=>{try{await Ah(or(Tt,"categories",b)),t(e.filter(R=>R.id!==b));const S=r.filter(R=>R.categoryId===b);for(const R of S){if(R.image&&R.image!=="https://via.placeholder.com/80"){const M=R.image.split("/products%2F")[1].split("?")[0],W=lg(dg,`products/${decodeURIComponent(M)}`);await qE(W).catch(O=>{C(`Error deleting image for product ${R.id}: `+O.message)})}await Ah(or(Tt,"products",R.id))}s(r.filter(R=>R.categoryId!==b))}catch(S){C("Error deleting category: "+S.message)}},$=async b=>{if(!b)return null;const S=lg(dg,`products/${b.name}`);return await wF(S,b),await xF(S)},B=async b=>{if(b.preventDefault(),!(!u.categoryId||!u.name||!u.price))try{const S=await $(u.image),R=await gc(tn(Tt,"products"),{categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:S||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"});s([...r,{id:R.id,categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:S||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"}]),d({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""})}catch(S){C("Error adding product: "+S.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},U=async b=>{try{const S=b.image instanceof File?await $(b.image):b.image,R=or(Tt,"products",b.id);await FE(R,{categoryId:b.categoryId,name:b.name,price:parseFloat(b.price),description:b.description,image:S||"https://via.placeholder.com/80",color:b.color,size:b.size}),s(r.map(M=>M.id===b.id?{...M,categoryId:b.categoryId,name:b.name,price:parseFloat(b.price),description:b.description,image:S||"https://via.placeholder.com/80",color:b.color,size:b.size}:M)),_(null)}catch(S){C("Error updating product: "+S.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},V=async b=>{try{const S=r.find(R=>R.id===b);if(S.image&&S.image!=="https://via.placeholder.com/80"){const R=S.image.split("/products%2F")[1].split("?")[0],M=lg(dg,`products/${decodeURIComponent(R)}`);await qE(M).catch(W=>{C(`Error deleting image for product ${b}: `+W.message)})}await Ah(or(Tt,"products",b)),s(r.filter(R=>R.id!==b))}catch(S){C("Error deleting product: "+S.message)}},I=async()=>{try{await Qf(As),j("/admin")}catch(b){C("Failed to log out: "+b.message)}};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),E&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:E}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Add New Category"}),p.jsxs("form",{onSubmit:A,className:"flex gap-4",children:[p.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Manage Categories"}),p.jsx("div",{className:"space-y-4",children:e.map(b=>p.jsx("div",{className:`p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===b.id?p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{type:"text",value:h.name,onChange:S=>g({...h,name:S.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),p.jsx("button",{onClick:()=>D(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),p.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:b.name}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>g(b),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),p.jsx("button",{onClick:()=>F(b.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},b.id))})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Add New Product"}),p.jsxs("form",{onSubmit:B,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Category"}),p.jsxs("select",{value:u.categoryId,onChange:b=>d({...u,categoryId:b.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[p.jsx("option",{value:"",children:"Select a category"}),e.map(b=>p.jsx("option",{value:b.id,children:b.name},b.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",value:u.name,onChange:b=>d({...u,name:b.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:b=>d({...u,price:b.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Description"}),p.jsx("textarea",{value:u.description,onChange:b=>d({...u,description:b.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:b=>d({...u,image:b.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Color"}),p.jsx("input",{type:"text",value:u.color,onChange:b=>d({...u,color:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Color (optional)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Size"}),p.jsx("input",{type:"text",value:u.size,onChange:b=>d({...u,size:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Size (optional)"})]}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Manage Products"}),p.jsx("div",{className:"space-y-4",children:r.map(b=>{var S;return p.jsx("div",{className:`p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(v==null?void 0:v.id)===b.id?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Category"}),p.jsxs("select",{value:v.categoryId,onChange:R=>_({...v,categoryId:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[p.jsx("option",{value:"",children:"Select a category"}),e.map(R=>p.jsx("option",{value:R.id,children:R.name},R.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",value:v.name,onChange:R=>_({...v,name:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:R=>_({...v,price:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Description"}),p.jsx("textarea",{value:v.description,onChange:R=>_({...v,description:R.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:R=>_({...v,image:R.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),v.image&&typeof v.image=="string"&&p.jsx("img",{src:v.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Color"}),p.jsx("input",{type:"text",value:v.color,onChange:R=>_({...v,color:R.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Size"}),p.jsx("input",{type:"text",value:v.size,onChange:R=>_({...v,size:R.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>U(v),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),p.jsx("button",{onClick:()=>_(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[b.image&&b.image!=="https://via.placeholder.com/80"&&p.jsx("img",{src:b.image,alt:b.name,className:"w-16 h-16 object-cover rounded-md"}),p.jsxs("div",{children:[p.jsx("span",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:b.name}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((S=e.find(R=>R.id===b.categoryId))==null?void 0:S.name)||"Unknown"]}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",b.price.toFixed(2)]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>_(b),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),p.jsx("button",{onClick:()=>V(b.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},b.id)})})]}),p.jsxs("div",{className:"mt-6 flex gap-4",children:[p.jsx("button",{onClick:()=>j("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const w9=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),t=()=>{n("/fitness-tracker/create-custom-plan")};return p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),p.jsx("div",{className:"text-center",children:p.jsx("button",{onClick:t,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx(st,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),p.jsx(st,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},x9=()=>{const{id:n}=mf(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(null),[s,o]=P.useState(!0);P.useEffect(()=>{(async()=>{const h=Di(),g=await zf(or(h,"customPlans",n));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[n]);const l=d=>{if(!(t!=null&&t.startDate))return"";const h=new Date(t.startDate);return h.setDate(h.getDate()+d*7),h.toLocaleDateString()},u=(d,h)=>{if(!(t!=null&&t.startDate))return"";const g=new Date(t.startDate);return g.setDate(g.getDate()+d*7+h),g.toLocaleDateString()};return s?p.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsx("p",{className:"text-xl",children:"Loading..."})}):t?p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:t.name}),p.jsx("div",{className:"max-w-4xl mx-auto",children:t.weeks.map((d,h)=>p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",d.week," (",l(h),")"]}),d.days.map((g,v)=>p.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",u(h,v),")"]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),p.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((_,E)=>p.jsxs("li",{children:[_.name,": ",_.sets," sets x ",_.reps," ","reps"]},E))})]})]},v))]},h))})]})}):p.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var E9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>P.createElement("svg",{ref:d,...E9,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:CA("lucide",s),...u},[...l.map(([h,g])=>P.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=(n,e)=>{const t=P.forwardRef(({className:r,...s},o)=>P.createElement(T9,{ref:o,iconNode:e,className:CA(`lucide-${b9(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],mv=Rl("ChevronDown",S9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gv=Rl("ChevronUp",k9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rl=Rl("CircleCheckBig",C9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sl=Rl("CircleX",P9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],I9=Rl("SquarePen",A9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],N9=Rl("Trash2",R9),j9=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(""),[s,o]=P.useState(new Date().toISOString().split("T")[0]),[l,u]=P.useState([]),[d,h]=P.useState({}),[g,v]=P.useState(Array.from({length:6},(B,U)=>({week:U+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[_,E]=P.useState(Array(6).fill(!1));P.useEffect(()=>{(async()=>{const U=Di(),I=(await lr(tn(U,"workouts"))).docs.map(S=>({id:S.id,...S.data()})),b=I.reduce((S,R)=>{const M=R.muscleGroup||"Other";return S[M]||(S[M]=[]),S[M].push(R),S},{});u(I),h(b)})()},[]);const C=B=>{const U=[..._];U[B]=!U[B],E(U)},j=(B,U)=>{var I;const V=[...g];V[B].days[U].workouts.push({name:((I=l[0])==null?void 0:I.name)||"",sets:3,reps:10}),v(V)},A=(B,U,V,I,b)=>{const S=[...g];S[B].days[U].workouts[V][I]=b,v(S)},D=async B=>{B.preventDefault();const U=Di(),V={userId:"anonymous",name:t,startDate:new Date(s).toISOString(),weeks:g},I=await gc(tn(U,"customPlans"),V);n(`/fitness-tracker/plan/${I.id}`)},F=B=>{const U=new Date(s);return U.setDate(U.getDate()+B*7),U.toLocaleDateString()},$=(B,U)=>{const V=new Date(s);return V.setDate(V.getDate()+B*7+U),V.toLocaleDateString()};return p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),p.jsxs("form",{onSubmit:D,children:[p.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),p.jsx("input",{type:"text",value:t,onChange:B=>r(B.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),p.jsx("input",{type:"date",value:s,onChange:B=>o(B.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((B,U)=>p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>C(U),children:[p.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",B.week," (",F(U),")"]}),_[U]?p.jsx(gv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):p.jsx(mv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),_[U]&&p.jsx("div",{className:"mt-4",children:B.days.map((V,I)=>p.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[V.day," (",$(U,I),")"]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),V.workouts.length>0?V.workouts.map((b,S)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:b.name,onChange:R=>A(U,I,S,"name",R.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(d).map(R=>p.jsx("optgroup",{label:R,children:d[R].map(M=>p.jsx("option",{value:M.name,children:M.name},M.id))},R))}),p.jsx("input",{type:"number",value:b.sets,onChange:R=>A(U,I,S,"sets",Number(R.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),p.jsx("input",{type:"text",value:b.reps,onChange:R=>A(U,I,S,"reps",R.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},S)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),p.jsx("button",{type:"button",onClick:()=>j(U,I),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},I))})]},U))}),p.jsx("div",{className:"mt-8 max-w-md mx-auto",children:p.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},D9=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),{user:t,loading:r}=P.useContext(Ls),[s,o]=P.useState([]),[l,u]=P.useState([]),[d,h]=P.useState([]),[g,v]=P.useState([]),[_,E]=P.useState(new Date().toISOString().split("T")[0]);P.useEffect(()=>{(async()=>{try{const I=Di(),b=await lr(tn(I,"workouts")),S=await lr(tn(I,"foods")),R=b.docs.map(W=>({id:W.id,...W.data()})),M=S.docs.map(W=>({id:W.id,...W.data()}));console.log("Fetched workouts from 'workouts' collection:",R),console.log("Fetched meals from 'foods' collection:",M),o(R),u(M),R.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),M.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(I){console.error("Error fetching data:",I)}})()},[]);const C=l.reduce((V,I)=>{const b=I.category||"Misc";return V[b]||(V[b]=[]),V[b].push(I),V},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],A=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...d,{name:s[0].name,sets:0,reps:0}])},D=(V,I,b)=>{const S=[...d];S[V][I]=I==="sets"||I==="reps"?Number(b):b,h(S)},F=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}v([...g,{name:l[0].name,quantity:1}])},$=(V,I,b)=>{const S=[...g];S[V][I]=I==="quantity"?Number(b):b,v(S)},B=V=>{const I=l.find(b=>b.name===V.name);return I?{protein:I.macros.protein*V.quantity,carbs:I.macros.carbs*V.quantity,fats:I.macros.fats*V.quantity}:{protein:0,carbs:0,fats:0}},U=async V=>{if(V.preventDefault(),!t){alert("Please log in to save a fitness log."),n("/login");return}const I=Di(),b={userId:t.uid,date:new Date(_).toISOString(),workouts:d,meals:g.map(S=>({...S,macros:B(S)}))};await gc(tn(I,"userLogs"),b),n("/fitness-tracker/history")};return r?p.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),p.jsxs("form",{onSubmit:U,className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),p.jsx("input",{type:"date",value:_,onChange:V=>E(V.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):d.length>0?d.map((V,I)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:V.name,onChange:b=>D(I,"name",b.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(b=>p.jsx("option",{value:b.name,children:b.name},b.id))}),p.jsx("input",{type:"number",value:V.sets,onChange:b=>D(I,"sets",b.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),p.jsx("input",{type:"number",value:V.reps,onChange:b=>D(I,"reps",b.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},I)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),p.jsx("button",{type:"button",onClick:A,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((V,I)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:V.name,onChange:b=>$(I,"name",b.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:j.map(b=>C[b]&&p.jsx("optgroup",{label:b,children:C[b].map(S=>p.jsx("option",{value:S.name,children:S.name},S.id))},b))}),p.jsx("input",{type:"number",value:V.quantity,onChange:b=>$(I,"quantity",b.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},I)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),p.jsx("button",{type:"button",onClick:F,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),p.jsx("div",{className:"text-center",children:p.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},O9=()=>{const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]);return P.useEffect(()=>{(async()=>{const s=Di(),l=(await lr(tn(s,"userLogs"))).docs.map(u=>({id:u.id,...u.data()}));t(l.sort((u,d)=>new Date(d.date)-new Date(u.date)))})()},[]),p.jsx("div",{className:`min-h-screen pt-20 ${n?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${n?"text-red-400":"text-red-800"}`,children:"Fitness History"}),p.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>p.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${n?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[p.jsx("h2",{className:`text-xl font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:`font-semibold mb-1 ${n?"text-red-400":"text-red-800"}`,children:"Workouts:"}),p.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>p.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:`font-semibold mb-1 ${n?"text-red-400":"text-red-800"}`,children:"Meals:"}),p.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>p.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):p.jsx("p",{className:`text-center text-lg ${n?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},L9=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),{user:t,loading:r}=P.useContext(Ls),[s,o]=P.useState(""),[l,u]=P.useState(new Date().toISOString().split("T")[0]),[d,h]=P.useState([]),[g,v]=P.useState([]),[_,E]=P.useState(!0),[C,j]=P.useState(!0),[A,D]=P.useState(null),[F,$]=P.useState(null),[B,U]=P.useState(Array.from({length:6},(q,Q)=>({week:Q+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[V,I]=P.useState(Array(6).fill(!1)),[b,S]=P.useState(null);P.useEffect(()=>{(async()=>{try{E(!0),D(null);const{data:Q,error:te}=await Rn.from("foods").select("*");if(te)throw te;console.log("Fetched meals from Supabase 'foods' table:",Q),h(Q),Q.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(Q){console.error("Error fetching meals:",Q),D("Failed to load meals. Please try again later.")}finally{E(!1)}})()},[]),P.useEffect(()=>{(async()=>{if(t)try{j(!0),$(null);const{data:Q,error:te}=await Rn.from("nutrition_plans").select("*").eq("user_id",t.id);if(te)throw te;console.log("Fetched nutrition plans from Supabase:",Q),v(Q)}catch(Q){console.error("Error fetching nutrition plans:",Q),$("Failed to load your nutrition plans. Please try again later.")}finally{j(!1)}})()},[t]);const R=d.reduce((q,Q)=>{const te=Q.category||"Misc";return q[te]||(q[te]=[]),q[te].push(Q),q},{}),M=["Meat","Fruit","Vegetable","Starch","Misc"],W=["Breakfast","Lunch","Dinner","Snacks"],O=q=>{const Q=[...V];Q[q]=!Q[q],I(Q)},re=(q,Q)=>{if(d.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const te=[...B];te[q].days[Q].meals.push({name:d[0].name,grams:d[0].portion||100,referencePortion:d[0].portion||100,macros:d[0].macros,mealTime:"Breakfast"}),U(te)},he=(q,Q,te,fe,ge)=>{const We=[...B],He=We[q].days[Q].meals[te];if(fe==="name"){const At=d.find(Dn=>Dn.name===ge);He.name=ge,He.grams=At.portion||100,He.referencePortion=At.portion||100,He.macros=At.macros}else He[fe]=fe==="grams"?Number(ge):ge;U(We)},Ne=(q,Q,te,fe)=>{const ge=[...B];ge[q].days[Q].macros[te]=Number(fe),U(ge)},xe=(q,Q)=>{const te=[...B],fe=te[q].days[Q],ge={...fe.meals[fe.meals.length-1]};ge.name&&(fe.loggedMeals[ge.mealTime].push(ge),fe.meals[fe.meals.length-1]={name:d[0].name,grams:d[0].portion||100,referencePortion:d[0].portion||100,macros:d[0].macros,mealTime:"Breakfast"},U(te))},le=(q,Q,te,fe,ge)=>{S({weekIndex:q,dayIndex:Q,mealTime:te,mealIndex:fe,meal:ge})},me=()=>{if(!b)return;const{weekIndex:q,dayIndex:Q,mealTime:te,mealIndex:fe,meal:ge}=b,We=[...B];We[q].days[Q].loggedMeals[te][fe]=ge,U(We),S(null)},pe=(q,Q,te,fe)=>{const ge=[...B];ge[q].days[Q].loggedMeals[te].splice(fe,1),U(ge)},K=q=>Object.values(q).flat().reduce((te,fe)=>{const ge=fe.grams/fe.referencePortion;return{protein:te.protein+fe.macros.protein*ge,carbs:te.carbs+fe.macros.carbs*ge,fats:te.fats+fe.macros.fats*ge}},{protein:0,carbs:0,fats:0}),ee=(q,Q)=>({protein:q.protein>=Q.protein,carbs:q.carbs>=Q.carbs,fats:q.fats>=Q.fats}),Ee=q=>{const Q=new Date(l);return Q.setDate(Q.getDate()+q*7),Q.toLocaleDateString()},Le=(q,Q)=>{const te=new Date(l);return te.setDate(te.getDate()+q*7+Q),te.toLocaleDateString()},ie=async q=>{if(q.preventDefault(),!t){alert("Please log in to save a nutrition plan."),n("/login");return}try{const Q={user_id:t.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(B)},{data:te,error:fe}=await Rn.from("nutrition_plans").insert(Q).select();if(fe)throw fe;n(`/nutrition-plan/${te[0].id}`)}catch(Q){console.error("Error saving nutrition plan:",Q),alert("Failed to save nutrition plan. Please try again.")}};return r?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(_c,{color:e?"#f87171":"#b91c1c"})}):_||C?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(_c,{color:e?"#f87171":"#b91c1c"})}):A?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:A}):p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),F?p.jsx("div",{className:"text-center text-red-500 mb-12",children:F}):g.length>0?p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(q=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>n(`/nutrition-plan/${q.id}`),children:[p.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:q.name}),p.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",q.start_date]})]},q.id))})]}):p.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),p.jsxs("form",{onSubmit:ie,children:[p.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),p.jsx("input",{type:"text",value:s,onChange:q=>o(q.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),p.jsx("input",{type:"date",value:l,onChange:q=>u(q.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:B.map((q,Q)=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>O(Q),children:[p.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",q.week," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",Ee(Q),")"]})]}),V[Q]?p.jsx(gv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):p.jsx(mv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),V[Q]&&p.jsx("div",{className:"mt-6 space-y-6",children:q.days.map((te,fe)=>p.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[te.day," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",Le(Q,fe),")"]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),p.jsx("input",{type:"number",value:te.macros.protein,onChange:ge=>Ne(Q,fe,"protein",ge.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),p.jsx("input",{type:"number",value:te.macros.carbs,onChange:ge=>Ne(Q,fe,"carbs",ge.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),p.jsx("input",{type:"number",value:te.macros.fats,onChange:ge=>Ne(Q,fe,"fats",ge.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),d.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):te.meals.length>0?te.meals.map((ge,We)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[p.jsx("select",{value:ge.name,onChange:He=>he(Q,fe,We,"name",He.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:M.map(He=>R[He]&&p.jsx("optgroup",{label:He,children:R[He].map(At=>p.jsx("option",{value:At.name,children:At.name},At.id))},He))}),p.jsx("input",{type:"number",value:ge.grams,onChange:He=>he(Q,fe,We,"grams",He.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),p.jsx("select",{value:ge.mealTime,onChange:He=>he(Q,fe,We,"mealTime",He.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:W.map(He=>p.jsx("option",{value:He,children:He},He))}),p.jsx("button",{type:"button",onClick:()=>xe(Q,fe),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},We)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),p.jsx("button",{type:"button",onClick:()=>re(Q,fe),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(te.loggedMeals).every(ge=>te.loggedMeals[ge].length===0)?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):W.map(ge=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:ge}),te.loggedMeals[ge].length>0?p.jsx("ul",{className:"space-y-2",children:te.loggedMeals[ge].map((We,He)=>p.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[p.jsxs("span",{className:"text-sm",children:[We.name,": ",We.grams,"g"]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{type:"button",onClick:()=>le(Q,fe,ge,He,{...We}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:p.jsx(I9,{className:"w-5 h-5"})}),p.jsx("button",{type:"button",onClick:()=>pe(Q,fe,ge,He),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:p.jsx(N9,{className:"w-5 h-5"})})]})]},He))}):p.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",ge.toLowerCase()," logged."]})]},ge)),p.jsxs("div",{className:"mt-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const ge=K(te.loggedMeals),We=ee(ge,te.macros);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${We.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ge.protein/te.macros.protein*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[ge.protein.toFixed(1),"g /"," ",te.macros.protein,"g"]}),We.protein?p.jsx(rl,{className:"w-5 h-5 text-green-500"}):p.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${We.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ge.carbs/te.macros.carbs*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[ge.carbs.toFixed(1),"g /"," ",te.macros.carbs,"g"]}),We.carbs?p.jsx(rl,{className:"w-5 h-5 text-green-500"}):p.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${We.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ge.fats/te.macros.fats*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[ge.fats.toFixed(1),"g /"," ",te.macros.fats,"g"]}),We.fats?p.jsx(rl,{className:"w-5 h-5 text-green-500"}):p.jsx(sl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},fe))})]},Q))}),p.jsx("div",{className:"mt-12 max-w-md mx-auto",children:p.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),b&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:p.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[p.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),p.jsx("select",{value:b.meal.name,onChange:q=>{const Q=d.find(te=>te.name===q.target.value);S({...b,meal:{...b.meal,name:q.target.value,grams:Q.portion||100,referencePortion:Q.portion||100,macros:Q.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:M.map(q=>R[q]&&p.jsx("optgroup",{label:q,children:R[q].map(Q=>p.jsx("option",{value:Q.name,children:Q.name},Q.id))},q))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),p.jsx("input",{type:"number",value:b.meal.grams,onChange:q=>S({...b,meal:{...b.meal,grams:Number(q.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),p.jsx("select",{value:b.meal.mealTime,onChange:q=>S({...b,meal:{...b.meal,mealTime:q.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:W.map(q=>p.jsx("option",{value:q,children:q},q))})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("button",{type:"button",onClick:me,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),p.jsx("button",{type:"button",onClick:()=>S(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},M9=()=>{const{id:n}=mf(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(null),[s,o]=P.useState(!0),[l,u]=P.useState(null),[d,h]=P.useState([]);P.useEffect(()=>{(async()=>{try{o(!0),u(null);const{data:D,error:F}=await Rn.from("nutrition_plans").select("*").eq("id",n).single();if(F)throw F;const $=JSON.parse(D.weeks);r({...D,weeks:$}),h(Array($.length).fill(!1))}catch(D){console.error("Error fetching nutrition plan:",D),u("Failed to load nutrition plan. Please try again later.")}finally{o(!1)}})()},[n]);const g=A=>{const D=[...d];D[A]=!D[A],h(D)},v=A=>Object.values(A).flat().reduce((F,$)=>{const B=$.grams/$.referencePortion;return{protein:F.protein+$.macros.protein*B,carbs:F.carbs+$.macros.carbs*B,fats:F.fats+$.macros.fats*B}},{protein:0,carbs:0,fats:0}),_=(A,D)=>({protein:A.protein>=D.protein,carbs:A.carbs>=D.carbs,fats:A.fats>=D.fats}),E=A=>{const D=new Date(t.start_date);return D.setDate(D.getDate()+A*7),D.toLocaleDateString()},C=(A,D)=>{const F=new Date(t.start_date);return F.setDate(F.getDate()+A*7+D),F.toLocaleDateString()};if(s)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(_c,{color:e?"#f87171":"#b91c1c"})});if(l)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:l});if(!t)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const j=["Breakfast","Lunch","Dinner","Snacks"];return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:t.name}),p.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(t.start_date).toLocaleDateString()]}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:t.weeks.map((A,D)=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>g(D),children:[p.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",A.week," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",E(D),")"]})]}),d[D]?p.jsx(gv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):p.jsx(mv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),d[D]&&p.jsx("div",{className:"mt-6 space-y-6",children:A.days.map((F,$)=>p.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[F.day," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",C(D,$),")"]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[F.macros.protein,"g"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[F.macros.carbs,"g"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[F.macros.fats,"g"]})]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(F.loggedMeals).every(B=>F.loggedMeals[B].length===0)?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):j.map(B=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:B}),F.loggedMeals[B].length>0?p.jsx("ul",{className:"space-y-2",children:F.loggedMeals[B].map((U,V)=>p.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:p.jsxs("span",{className:"text-sm",children:[U.name,": ",U.grams,"g"]})},V))}):p.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",B.toLowerCase()," logged."]})]},B)),p.jsxs("div",{className:"mt-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const B=v(F.loggedMeals),U=_(B,F.macros);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${U.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(B.protein/F.macros.protein*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[B.protein.toFixed(1),"g /"," ",F.macros.protein,"g"]}),U.protein?p.jsx(rl,{className:"w-5 h-5 text-green-500"}):p.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${U.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(B.carbs/F.macros.carbs*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[B.carbs.toFixed(1),"g /"," ",F.macros.carbs,"g"]}),U.carbs?p.jsx(rl,{className:"w-5 h-5 text-green-500"}):p.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${U.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(B.fats/F.macros.fats*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[B.fats.toFixed(1),"g /"," ",F.macros.fats,"g"]}),U.fats?p.jsx(rl,{className:"w-5 h-5 text-green-500"}):p.jsx(sl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},$))})]},D))})]})},V9=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[s,o]=P.useState(null),[l,u]=P.useState(!1),{login:d}=P.useContext(Ls),{isDarkMode:h}=P.useContext(Ze),g=rn(),v=async _=>{var E,C;_.preventDefault(),o(null),u(!0);try{await d(n,t);const j=((C=(E=location.state)==null?void 0:E.from)==null?void 0:C.pathname)||"/profile";g(j,{replace:!0})}catch(j){o(j.message),console.error("Login error:",j.message)}finally{u(!1)}};return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),p.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsxs("form",{onSubmit:v,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),p.jsx("input",{type:"email",value:n,onChange:_=>e(_.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),p.jsx("input",{type:"password",value:t,onChange:_=>r(_.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&p.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:s}),p.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?p.jsxs(p.Fragment,{children:[p.jsx(U2,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx(st,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),p.jsx("div",{className:"mt-2 text-center",children:p.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",p.jsx(st,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},$9=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),{signup:t,user:r,loading:s}=P.useContext(Ls),[o,l]=P.useState(""),[u,d]=P.useState(""),[h,g]=P.useState(null),v=async _=>{_.preventDefault(),g(null);try{await t(o,u),n("/login")}catch(E){E.message.includes("User already exists")?g("Email already in use. A confirmation email has been resent."):E.message.includes("rate limit")?g("Too many signup attempts. Please wait and try again later."):g("An error occurred during signup. Please try again.")}};return s?p.jsx("div",{children:"Loading..."}):r?(n("/nutrition"),null):p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Sign Up"}),p.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:_=>l(_.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),p.jsx("input",{type:"password",value:u,onChange:_=>d(_.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&p.jsx("p",{className:`text-center text-sm mb-6 ${e?"text-red-400":"text-red-800"}`,children:h}),p.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),p.jsxs("p",{className:`text-center mt-6 text-sm ${e?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",p.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},F9=()=>{var j,A,D;const{user:n,loading:e,refreshUser:t}=P.useContext(Ls),{isDarkMode:r}=P.useContext(Ze),s=rn(),[o,l]=P.useState(((j=n==null?void 0:n.user_metadata)==null?void 0:j.displayName)||""),[u,d]=P.useState([]),[h,g]=P.useState(null),[v,_]=P.useState(null);if(P.useEffect(()=>{(async()=>{if(n)try{const{data:$,error:B}=await Rn.from("nutrition_plans").select("*").eq("user_id",n.id);if(B)throw B;d($||[])}catch($){console.error("Error fetching nutrition plans:",$.message)}})()},[n]),e)return p.jsx("div",{children:"Loading..."});if(!n)return s("/login"),null;const E=async F=>{F.preventDefault(),g(null),_(null);try{const{error:$}=await Rn.auth.updateUser({data:{displayName:o}});if($)throw $;_("Profile updated successfully!"),await t()}catch($){g("Failed to update profile. Please try again."),console.error("Update profile error:",$.message)}},C=(A=n==null?void 0:n.user_metadata)!=null&&A.displayName?n.user_metadata.displayName.charAt(0).toUpperCase()+n.user_metadata.displayName.slice(1):"User";return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[C," - Dashboard "]}),p.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",C,"!"]}),p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",n.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Username:"})," ",((D=n.user_metadata)==null?void 0:D.displayName)||"Not set"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(n.created_at).toLocaleDateString()]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(n.updated_at).toLocaleDateString()]}),n.user_metadata&&Object.keys(n.user_metadata).length>0?p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Additional Info:"}),p.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(n.user_metadata).map(([F,$])=>p.jsxs("li",{children:[F,": ",$]},F))})]}):p.jsx("p",{children:"No additional user metadata available."})]})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),u.length>0?p.jsx("ul",{className:"space-y-2",children:u.map(F=>p.jsx("li",{children:p.jsx(Link,{to:`/nutrition-plan/${F.id}`,className:"hover:text-red-600 transition-colors duration-200",children:F.name||`Plan ${F.id}`})},F.id))}):p.jsx("p",{children:"No nutrition plans found."})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),p.jsxs("form",{onSubmit:E,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),p.jsx("input",{type:"text",value:o,onChange:F=>l(F.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&p.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:h}),v&&p.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:v}),p.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),p.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),p.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),p.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},U9=()=>{const{user:n,loading:e}=P.useContext(Ls),t=es();return e?p.jsx("div",{children:"Loading..."}):n?p.jsx(TT,{}):p.jsx(RI,{to:"/login",state:{from:t},replace:!0})},Ze=P.createContext();function B9(){const[n,e]=P.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});P.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(n))},[n]);const t=()=>e(s=>!s),r="/aussie-gut-pack/";return console.log("Basename:",r),p.jsx($8,{children:p.jsx(C2,{children:p.jsx(Ze.Provider,{value:{isDarkMode:n,toggleTheme:t},children:p.jsx(rR,{basename:r,children:p.jsx(vf,{children:p.jsx(yf,{classNames:"fade",timeout:300,children:p.jsx(jI,{children:p.jsxs(Xe,{path:"/",element:p.jsx(B2,{}),children:[p.jsx(Xe,{index:!0,element:p.jsx(V8,{})}),p.jsx(Xe,{path:"products",element:p.jsx(F8,{})}),p.jsx(Xe,{path:"cart",element:p.jsx(U8,{})}),p.jsx(Xe,{path:"checkout",element:p.jsx(B8,{})}),p.jsx(Xe,{path:"gut-health",element:p.jsx(z8,{})}),p.jsx(Xe,{path:"gut-health/:id",element:p.jsx(W8,{})}),p.jsx(Xe,{path:"purchase",element:p.jsx(q8,{})}),p.jsx(Xe,{path:"blog",element:p.jsx(X8,{})}),p.jsx(Xe,{path:"blog/:id",element:p.jsx(Z8,{})}),p.jsx(Xe,{path:"faq",element:p.jsx(t9,{})}),p.jsx(Xe,{path:"contact",element:p.jsx(m9,{})}),p.jsx(Xe,{path:"admin",element:p.jsx(g9,{})}),p.jsx(Xe,{path:"admin/home",element:p.jsx(y9,{})}),p.jsx(Xe,{path:"admin/blog",element:p.jsx(v9,{})}),p.jsx(Xe,{path:"admin/products",element:p.jsx(_9,{})}),p.jsx(Xe,{path:"fitness-tracker",element:p.jsx(w9,{})}),p.jsx(Xe,{path:"fitness-tracker/plan/:id",element:p.jsx(x9,{})}),p.jsx(Xe,{path:"fitness-tracker/create-custom-plan",element:p.jsx(j9,{})}),p.jsx(Xe,{path:"fitness-tracker/log",element:p.jsx(D9,{})}),p.jsx(Xe,{path:"fitness-tracker/history",element:p.jsx(O9,{})}),p.jsx(Xe,{path:"nutrition",element:p.jsx(L9,{})}),p.jsx(Xe,{path:"nutrition-plan/:id",element:p.jsx(M9,{})}),p.jsx(Xe,{path:"login",element:p.jsx(V9,{})}),p.jsx(Xe,{path:"signup",element:p.jsx($9,{})}),p.jsx(Xe,{element:p.jsx(U9,{}),children:p.jsx(Xe,{path:"profile",element:p.jsx(F9,{})})}),p.jsx(Xe,{path:"*",element:p.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})}console.log("Main.jsx is running");F1.createRoot(document.getElementById("root")).render(p.jsx(Lt.StrictMode,{children:p.jsx(B9,{})}));export{ff as g};
