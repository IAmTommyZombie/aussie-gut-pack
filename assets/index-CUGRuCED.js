(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function df(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function PI(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Em={exports:{}},Tu={},Tm={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xw;function AI(){if(xw)return Me;xw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function _($){return $===null||typeof $!="object"?null:($=v&&$[v]||$["@@iterator"],typeof $=="function"?$:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,j={};function P($,Q,fe){this.props=$,this.context=Q,this.refs=j,this.updater=fe||b}P.prototype.isReactComponent={},P.prototype.setState=function($,Q){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,Q,"setState")},P.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function D(){}D.prototype=P.prototype;function W($,Q,fe){this.props=$,this.context=Q,this.refs=j,this.updater=fe||b}var F=W.prototype=new D;F.constructor=W,S(F,P.prototype),F.isPureReactComponent=!0;var q=Array.isArray,B=Object.prototype.hasOwnProperty,V={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E($,Q,fe){var ye,ie={},ne=null,ce=null;if(Q!=null)for(ye in Q.ref!==void 0&&(ce=Q.ref),Q.key!==void 0&&(ne=""+Q.key),Q)B.call(Q,ye)&&!A.hasOwnProperty(ye)&&(ie[ye]=Q[ye]);var Te=arguments.length-2;if(Te===1)ie.children=fe;else if(1<Te){for(var Ve=Array(Te),vt=0;vt<Te;vt++)Ve[vt]=arguments[vt+2];ie.children=Ve}if($&&$.defaultProps)for(ye in Te=$.defaultProps,Te)ie[ye]===void 0&&(ie[ye]=Te[ye]);return{$$typeof:n,type:$,key:ne,ref:ce,props:ie,_owner:V.current}}function C($,Q){return{$$typeof:n,type:$.type,key:Q,ref:$.ref,props:$.props,_owner:$._owner}}function R($){return typeof $=="object"&&$!==null&&$.$$typeof===n}function M($){var Q={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(fe){return Q[fe]})}var z=/\/+/g;function O($,Q){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):Q.toString(36)}function se($,Q,fe,ye,ie){var ne=typeof $;(ne==="undefined"||ne==="boolean")&&($=null);var ce=!1;if($===null)ce=!0;else switch(ne){case"string":case"number":ce=!0;break;case"object":switch($.$$typeof){case n:case e:ce=!0}}if(ce)return ce=$,ie=ie(ce),$=ye===""?"."+O(ce,0):ye,q(ie)?(fe="",$!=null&&(fe=$.replace(z,"$&/")+"/"),se(ie,Q,fe,"",function(vt){return vt})):ie!=null&&(R(ie)&&(ie=C(ie,fe+(!ie.key||ce&&ce.key===ie.key?"":(""+ie.key).replace(z,"$&/")+"/")+$)),Q.push(ie)),1;if(ce=0,ye=ye===""?".":ye+":",q($))for(var Te=0;Te<$.length;Te++){ne=$[Te];var Ve=ye+O(ne,Te);ce+=se(ne,Q,fe,Ve,ie)}else if(Ve=_($),typeof Ve=="function")for($=Ve.call($),Te=0;!(ne=$.next()).done;)ne=ne.value,Ve=ye+O(ne,Te++),ce+=se(ne,Q,fe,Ve,ie);else if(ne==="object")throw Q=String($),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return ce}function pe($,Q,fe){if($==null)return $;var ye=[],ie=0;return se($,ye,"","",function(ne){return Q.call(fe,ne,ie++)}),ye}function Ne($){if($._status===-1){var Q=$._result;Q=Q(),Q.then(function(fe){($._status===0||$._status===-1)&&($._status=1,$._result=fe)},function(fe){($._status===0||$._status===-1)&&($._status=2,$._result=fe)}),$._status===-1&&($._status=0,$._result=Q)}if($._status===1)return $._result.default;throw $._result}var we={current:null},J={transition:null},Z={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:J,ReactCurrentOwner:V};function te(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:pe,forEach:function($,Q,fe){pe($,function(){Q.apply(this,arguments)},fe)},count:function($){var Q=0;return pe($,function(){Q++}),Q},toArray:function($){return pe($,function(Q){return Q})||[]},only:function($){if(!R($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Me.Component=P,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=W,Me.StrictMode=r,Me.Suspense=d,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,Me.act=te,Me.cloneElement=function($,Q,fe){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ye=S({},$.props),ie=$.key,ne=$.ref,ce=$._owner;if(Q!=null){if(Q.ref!==void 0&&(ne=Q.ref,ce=V.current),Q.key!==void 0&&(ie=""+Q.key),$.type&&$.type.defaultProps)var Te=$.type.defaultProps;for(Ve in Q)B.call(Q,Ve)&&!A.hasOwnProperty(Ve)&&(ye[Ve]=Q[Ve]===void 0&&Te!==void 0?Te[Ve]:Q[Ve])}var Ve=arguments.length-2;if(Ve===1)ye.children=fe;else if(1<Ve){Te=Array(Ve);for(var vt=0;vt<Ve;vt++)Te[vt]=arguments[vt+2];ye.children=Te}return{$$typeof:n,type:$.type,key:ie,ref:ne,props:ye,_owner:ce}},Me.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:o,_context:$},$.Consumer=$},Me.createElement=E,Me.createFactory=function($){var Q=E.bind(null,$);return Q.type=$,Q},Me.createRef=function(){return{current:null}},Me.forwardRef=function($){return{$$typeof:u,render:$}},Me.isValidElement=R,Me.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:Ne}},Me.memo=function($,Q){return{$$typeof:f,type:$,compare:Q===void 0?null:Q}},Me.startTransition=function($){var Q=J.transition;J.transition={};try{$()}finally{J.transition=Q}},Me.unstable_act=te,Me.useCallback=function($,Q){return we.current.useCallback($,Q)},Me.useContext=function($){return we.current.useContext($)},Me.useDebugValue=function(){},Me.useDeferredValue=function($){return we.current.useDeferredValue($)},Me.useEffect=function($,Q){return we.current.useEffect($,Q)},Me.useId=function(){return we.current.useId()},Me.useImperativeHandle=function($,Q,fe){return we.current.useImperativeHandle($,Q,fe)},Me.useInsertionEffect=function($,Q){return we.current.useInsertionEffect($,Q)},Me.useLayoutEffect=function($,Q){return we.current.useLayoutEffect($,Q)},Me.useMemo=function($,Q){return we.current.useMemo($,Q)},Me.useReducer=function($,Q,fe){return we.current.useReducer($,Q,fe)},Me.useRef=function($){return we.current.useRef($)},Me.useState=function($){return we.current.useState($)},Me.useSyncExternalStore=function($,Q,fe){return we.current.useSyncExternalStore($,Q,fe)},Me.useTransition=function(){return we.current.useTransition()},Me.version="18.3.1",Me}var bw;function m0(){return bw||(bw=1,Tm.exports=AI()),Tm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function II(){if(Ew)return Tu;Ew=1;var n=m0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,f){var g,v={},_=null,b=null;f!==void 0&&(_=""+f),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(b=d.ref);for(g in d)r.call(d,g)&&!o.hasOwnProperty(g)&&(v[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)v[g]===void 0&&(v[g]=d[g]);return{$$typeof:e,type:u,key:_,ref:b,props:v,_owner:s.current}}return Tu.Fragment=t,Tu.jsx=l,Tu.jsxs=l,Tu}var Tw;function RI(){return Tw||(Tw=1,Em.exports=II()),Em.exports}var m=RI(),I=m0();const jt=df(I);var Yd={},Sm={exports:{}},Sn={},km={exports:{}},Cm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sw;function NI(){return Sw||(Sw=1,function(n){function e(J,Z){var te=J.length;J.push(Z);e:for(;0<te;){var $=te-1>>>1,Q=J[$];if(0<s(Q,Z))J[$]=Z,J[te]=Q,te=$;else break e}}function t(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var Z=J[0],te=J.pop();if(te!==Z){J[0]=te;e:for(var $=0,Q=J.length,fe=Q>>>1;$<fe;){var ye=2*($+1)-1,ie=J[ye],ne=ye+1,ce=J[ne];if(0>s(ie,te))ne<Q&&0>s(ce,ie)?(J[$]=ce,J[ne]=te,$=ne):(J[$]=ie,J[ye]=te,$=ye);else if(ne<Q&&0>s(ce,te))J[$]=ce,J[ne]=te,$=ne;else break e}}return Z}function s(J,Z){var te=J.sortIndex-Z.sortIndex;return te!==0?te:J.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var d=[],f=[],g=1,v=null,_=3,b=!1,S=!1,j=!1,P=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(J){for(var Z=t(f);Z!==null;){if(Z.callback===null)r(f);else if(Z.startTime<=J)r(f),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(f)}}function q(J){if(j=!1,F(J),!S)if(t(d)!==null)S=!0,Ne(B);else{var Z=t(f);Z!==null&&we(q,Z.startTime-J)}}function B(J,Z){S=!1,j&&(j=!1,D(E),E=-1),b=!0;var te=_;try{for(F(Z),v=t(d);v!==null&&(!(v.expirationTime>Z)||J&&!M());){var $=v.callback;if(typeof $=="function"){v.callback=null,_=v.priorityLevel;var Q=$(v.expirationTime<=Z);Z=n.unstable_now(),typeof Q=="function"?v.callback=Q:v===t(d)&&r(d),F(Z)}else r(d);v=t(d)}if(v!==null)var fe=!0;else{var ye=t(f);ye!==null&&we(q,ye.startTime-Z),fe=!1}return fe}finally{v=null,_=te,b=!1}}var V=!1,A=null,E=-1,C=5,R=-1;function M(){return!(n.unstable_now()-R<C)}function z(){if(A!==null){var J=n.unstable_now();R=J;var Z=!0;try{Z=A(!0,J)}finally{Z?O():(V=!1,A=null)}}else V=!1}var O;if(typeof W=="function")O=function(){W(z)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,pe=se.port2;se.port1.onmessage=z,O=function(){pe.postMessage(null)}}else O=function(){P(z,0)};function Ne(J){A=J,V||(V=!0,O())}function we(J,Z){E=P(function(){J(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(J){J.callback=null},n.unstable_continueExecution=function(){S||b||(S=!0,Ne(B))},n.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(J){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var te=_;_=Z;try{return J()}finally{_=te}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(J,Z){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var te=_;_=J;try{return Z()}finally{_=te}},n.unstable_scheduleCallback=function(J,Z,te){var $=n.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?$+te:$):te=$,J){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=te+Q,J={id:g++,callback:Z,priorityLevel:J,startTime:te,expirationTime:Q,sortIndex:-1},te>$?(J.sortIndex=te,e(f,J),t(d)===null&&J===t(f)&&(j?(D(E),E=-1):j=!0,we(q,te-$))):(J.sortIndex=Q,e(d,J),S||b||(S=!0,Ne(B))),J},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(J){var Z=_;return function(){var te=_;_=Z;try{return J.apply(this,arguments)}finally{_=te}}}}(Cm)),Cm}var kw;function jI(){return kw||(kw=1,km.exports=NI()),km.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cw;function DI(){if(Cw)return Sn;Cw=1;var n=m0(),e=jI();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function _(i){return d.call(v,i)?!0:d.call(g,i)?!1:f.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,a,c,p){if(c!==null&&c.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,a,c,p){if(a===null||typeof a>"u"||b(i,a,c,p))return!0;if(p)return!1;if(c!==null)switch(c.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function j(i,a,c,p,y,x,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=c,this.propertyName=i,this.type=a,this.sanitizeURL=x,this.removeEmptyString=k}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new j(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];P[a]=new j(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new j(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new j(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new j(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new j(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new j(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new j(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new j(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function W(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,W);P[a]=new j(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,W);P[a]=new j(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,W);P[a]=new j(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new j(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new j(i,1,!1,i.toLowerCase(),null,!0,!0)});function F(i,a,c,p){var y=P.hasOwnProperty(a)?P[a]:null;(y!==null?y.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(S(a,c,y,p)&&(c=null),p||y===null?_(a)&&(c===null?i.removeAttribute(a):i.setAttribute(a,""+c)):y.mustUseProperty?i[y.propertyName]=c===null?y.type===3?!1:"":c:(a=y.attributeName,p=y.attributeNamespace,c===null?i.removeAttribute(a):(y=y.type,c=y===3||y===4&&c===!0?"":""+c,p?i.setAttributeNS(p,a,c):i.setAttribute(a,c))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),V=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),J=Symbol.iterator;function Z(i){return i===null||typeof i!="object"?null:(i=J&&i[J]||i["@@iterator"],typeof i=="function"?i:null)}var te=Object.assign,$;function Q(i){if($===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+i}var fe=!1;function ye(i,a){if(!i||fe)return"";fe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var p=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){p=X}i.call(a.prototype)}else{try{throw Error()}catch(X){p=X}i()}}catch(X){if(X&&p&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),x=p.stack.split(`
`),k=y.length-1,L=x.length-1;1<=k&&0<=L&&y[k]!==x[L];)L--;for(;1<=k&&0<=L;k--,L--)if(y[k]!==x[L]){if(k!==1||L!==1)do if(k--,L--,0>L||y[k]!==x[L]){var U=`
`+y[k].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=k&&0<=L);break}}}finally{fe=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?Q(i):""}function ie(i){switch(i.tag){case 5:return Q(i.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return i=ye(i.type,!1),i;case 11:return i=ye(i.type.render,!1),i;case 1:return i=ye(i.type,!0),i;default:return""}}function ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case V:return"Portal";case C:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case se:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case z:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case pe:return a=i.displayName||null,a!==null?a:ne(i.type)||"Memo";case Ne:a=i._payload,i=i._init;try{return ne(i(a))}catch{}}return null}function ce(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(a);case 8:return a===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ve(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function vt(i){var a=Ve(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),p=""+i[a];if(!i.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,x=c.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(k){p=""+k,x.call(this,k)}}),Object.defineProperty(i,a,{enumerable:c.enumerable}),{getValue:function(){return p},setValue:function(k){p=""+k},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Bn(i){i._valueTracker||(i._valueTracker=vt(i))}function ts(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),p="";return i&&(p=Ve(i)?i.checked?"true":"false":i.value),i=p,i!==c?(a.setValue(i),!0):!1}function ar(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function lr(i,a){var c=a.checked;return te({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function ns(i,a){var c=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;c=Te(a.value!=null?a.value:c),i._wrapperState={initialChecked:p,initialValue:c,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Lt(i,a){a=a.checked,a!=null&&F(i,"checked",a,!1)}function rs(i,a){Lt(i,a);var c=Te(a.value),p=a.type;if(c!=null)p==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Uo(i,a.type,c):a.hasOwnProperty("defaultValue")&&Uo(i,a.type,Te(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Lc(i,a,c){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,c||a===i.value||(i.value=a),i.defaultValue=a}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function Uo(i,a,c){(a!=="number"||ar(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var ss=Array.isArray;function is(i,a,c,p){if(i=i.options,a){a={};for(var y=0;y<c.length;y++)a["$"+c[y]]=!0;for(c=0;c<i.length;c++)y=a.hasOwnProperty("$"+i[c].value),i[c].selected!==y&&(i[c].selected=y),y&&p&&(i[c].defaultSelected=!0)}else{for(c=""+Te(c),a=null,y=0;y<i.length;y++){if(i[y].value===c){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Nl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return te({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Bo(i,a){var c=a.value;if(c==null){if(c=a.children,a=a.defaultValue,c!=null){if(a!=null)throw Error(t(92));if(ss(c)){if(1<c.length)throw Error(t(93));c=c[0]}a=c}a==null&&(a=""),c=a}i._wrapperState={initialValue:Te(c)}}function zo(i,a){var c=Te(a.value),p=Te(a.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),a.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),p!=null&&(i.defaultValue=""+p)}function jl(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Ct(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Ct(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var os,Dl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,c,p,y){MSApp.execUnsafeLocalFunction(function(){return i(a,c,p,y)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=os.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ls(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var Fi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ui=["Webkit","ms","Moz","O"];Object.keys(Fi).forEach(function(i){Ui.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Fi[a]=Fi[i]})});function Ol(i,a,c){return a==null||typeof a=="boolean"||a===""?"":c||typeof a!="number"||a===0||Fi.hasOwnProperty(i)&&Fi[i]?(""+a).trim():a+"px"}function Ll(i,a){i=i.style;for(var c in a)if(a.hasOwnProperty(c)){var p=c.indexOf("--")===0,y=Ol(c,a[c],p);c==="float"&&(c="cssFloat"),p?i.setProperty(c,y):i[c]=y}}var Ml=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(i,a){if(a){if(Ml[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function $l(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function Wo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ho=null,zn=null,Ir=null;function qo(i){if(i=uu(i)){if(typeof Ho!="function")throw Error(t(280));var a=i.stateNode;a&&(a=hd(a),Ho(i.stateNode,i.type,a))}}function Rr(i){zn?Ir?Ir.push(i):Ir=[i]:zn=i}function Fl(){if(zn){var i=zn,a=Ir;if(Ir=zn=null,qo(i),a)for(i=0;i<a.length;i++)qo(a[i])}}function zi(i,a){return i(a)}function Ul(){}var as=!1;function Bl(i,a,c){if(as)return i(a,c);as=!0;try{return zi(i,a,c)}finally{as=!1,(zn!==null||Ir!==null)&&(Ul(),Fl())}}function _t(i,a){var c=i.stateNode;if(c===null)return null;var p=hd(c);if(p===null)return null;c=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,a,typeof c));return c}var Ko=!1;if(u)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){Ko=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{Ko=!1}function Wi(i,a,c,p,y,x,k,L,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(c,X)}catch(ae){this.onError(ae)}}var Hi=!1,Go=null,cr=!1,zl=null,Yf={onError:function(i){Hi=!0,Go=i}};function Qo(i,a,c,p,y,x,k,L,U){Hi=!1,Go=null,Wi.apply(Yf,arguments)}function Mc(i,a,c,p,y,x,k,L,U){if(Qo.apply(this,arguments),Hi){if(Hi){var X=Go;Hi=!1,Go=null}else throw Error(t(198));cr||(cr=!0,zl=X)}}function dr(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function qi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function hr(i){if(dr(i)!==i)throw Error(t(188))}function Vc(i){var a=i.alternate;if(!a){if(a=dr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var c=i,p=a;;){var y=c.return;if(y===null)break;var x=y.alternate;if(x===null){if(p=y.return,p!==null){c=p;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===c)return hr(y),i;if(x===p)return hr(y),a;x=x.sibling}throw Error(t(188))}if(c.return!==p.return)c=y,p=x;else{for(var k=!1,L=y.child;L;){if(L===c){k=!0,c=y,p=x;break}if(L===p){k=!0,p=y,c=x;break}L=L.sibling}if(!k){for(L=x.child;L;){if(L===c){k=!0,c=x,p=y;break}if(L===p){k=!0,p=x,c=y;break}L=L.sibling}if(!k)throw Error(t(189))}}if(c.alternate!==p)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:a}function Wl(i){return i=Vc(i),i!==null?Jo(i):null}function Jo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Jo(i);if(a!==null)return a;i=i.sibling}return null}var Yo=e.unstable_scheduleCallback,Hl=e.unstable_cancelCallback,$c=e.unstable_shouldYield,Xf=e.unstable_requestPaint,Xe=e.unstable_now,Fc=e.unstable_getCurrentPriorityLevel,Ki=e.unstable_ImmediatePriority,Ms=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,ql=e.unstable_LowPriority,Uc=e.unstable_IdlePriority,Gi=null,Rn=null;function Bc(i){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Gi,i,void 0,(i.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Wc,Kl=Math.log,zc=Math.LN2;function Wc(i){return i>>>=0,i===0?32:31-(Kl(i)/zc|0)|0}var Xo=64,Zo=4194304;function Vs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qi(i,a){var c=i.pendingLanes;if(c===0)return 0;var p=0,y=i.suspendedLanes,x=i.pingedLanes,k=c&268435455;if(k!==0){var L=k&~y;L!==0?p=Vs(L):(x&=k,x!==0&&(p=Vs(x)))}else k=c&~y,k!==0?p=Vs(k):x!==0&&(p=Vs(x));if(p===0)return 0;if(a!==0&&a!==p&&!(a&y)&&(y=p&-p,x=a&-a,y>=x||y===16&&(x&4194240)!==0))return a;if(p&4&&(p|=c&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=p;0<a;)c=31-hn(a),y=1<<c,p|=i[c],a&=~y;return p}function Zf(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ls(i,a){for(var c=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,x=i.pendingLanes;0<x;){var k=31-hn(x),L=1<<k,U=y[k];U===-1?(!(L&c)||L&p)&&(y[k]=Zf(L,a)):U<=a&&(i.expiredLanes|=L),x&=~L}}function Nn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Ji(){var i=Xo;return Xo<<=1,!(Xo&4194240)&&(Xo=64),i}function $s(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Fs(i,a,c){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-hn(a),i[a]=c}function Ye(i,a){var c=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<c;){var y=31-hn(c),x=1<<y;a[y]=0,p[y]=-1,i[y]=-1,c&=~x}}function Us(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var p=31-hn(c),y=1<<p;y&a|i[p]&a&&(i[p]|=a),c&=~y}}var Be=0;function Bs(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Hc,ea,qc,Kc,Gc,Gl=!1,Nr=[],Wt=null,fr=null,pr=null,zs=new Map,Hn=new Map,jr=[],ep="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qc(i,a){switch(i){case"focusin":case"focusout":Wt=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":zs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hn.delete(a.pointerId)}}function vn(i,a,c,p,y,x){return i===null||i.nativeEvent!==x?(i={blockedOn:a,domEventName:c,eventSystemFlags:p,nativeEvent:x,targetContainers:[y]},a!==null&&(a=uu(a),a!==null&&ea(a)),i):(i.eventSystemFlags|=p,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function tp(i,a,c,p,y){switch(a){case"focusin":return Wt=vn(Wt,i,a,c,p,y),!0;case"dragenter":return fr=vn(fr,i,a,c,p,y),!0;case"mouseover":return pr=vn(pr,i,a,c,p,y),!0;case"pointerover":var x=y.pointerId;return zs.set(x,vn(zs.get(x)||null,i,a,c,p,y)),!0;case"gotpointercapture":return x=y.pointerId,Hn.set(x,vn(Hn.get(x)||null,i,a,c,p,y)),!0}return!1}function Jc(i){var a=to(i.target);if(a!==null){var c=dr(a);if(c!==null){if(a=c.tag,a===13){if(a=qi(c),a!==null){i.blockedOn=a,Gc(i.priority,function(){qc(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function us(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=ta(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var p=new c.constructor(c.type,c);Bi=p,c.target.dispatchEvent(p),Bi=null}else return a=uu(c),a!==null&&ea(a),i.blockedOn=c,!1;a.shift()}return!0}function Yi(i,a,c){us(i)&&c.delete(a)}function Yc(){Gl=!1,Wt!==null&&us(Wt)&&(Wt=null),fr!==null&&us(fr)&&(fr=null),pr!==null&&us(pr)&&(pr=null),zs.forEach(Yi),Hn.forEach(Yi)}function mr(i,a){i.blockedOn===a&&(i.blockedOn=null,Gl||(Gl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Yc)))}function gr(i){function a(y){return mr(y,i)}if(0<Nr.length){mr(Nr[0],i);for(var c=1;c<Nr.length;c++){var p=Nr[c];p.blockedOn===i&&(p.blockedOn=null)}}for(Wt!==null&&mr(Wt,i),fr!==null&&mr(fr,i),pr!==null&&mr(pr,i),zs.forEach(a),Hn.forEach(a),c=0;c<jr.length;c++)p=jr[c],p.blockedOn===i&&(p.blockedOn=null);for(;0<jr.length&&(c=jr[0],c.blockedOn===null);)Jc(c),c.blockedOn===null&&jr.shift()}var cs=q.ReactCurrentBatchConfig,Ws=!0;function it(i,a,c,p){var y=Be,x=cs.transition;cs.transition=null;try{Be=1,Ql(i,a,c,p)}finally{Be=y,cs.transition=x}}function np(i,a,c,p){var y=Be,x=cs.transition;cs.transition=null;try{Be=4,Ql(i,a,c,p)}finally{Be=y,cs.transition=x}}function Ql(i,a,c,p){if(Ws){var y=ta(i,a,c,p);if(y===null)fp(i,a,p,Xi,c),Qc(i,p);else if(tp(y,i,a,c,p))p.stopPropagation();else if(Qc(i,p),a&4&&-1<ep.indexOf(i)){for(;y!==null;){var x=uu(y);if(x!==null&&Hc(x),x=ta(i,a,c,p),x===null&&fp(i,a,p,Xi,c),x===y)break;y=x}y!==null&&p.stopPropagation()}else fp(i,a,p,null,c)}}var Xi=null;function ta(i,a,c,p){if(Xi=null,i=Wo(p),i=to(i),i!==null)if(a=dr(i),a===null)i=null;else if(c=a.tag,c===13){if(i=qi(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Xi=i,null}function Jl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fc()){case Ki:return 1;case Ms:return 4;case Wn:case ql:return 16;case Uc:return 536870912;default:return 16}default:return 16}}var jn=null,na=null,_n=null;function Yl(){if(_n)return _n;var i,a=na,c=a.length,p,y="value"in jn?jn.value:jn.textContent,x=y.length;for(i=0;i<c&&a[i]===y[i];i++);var k=c-i;for(p=1;p<=k&&a[c-p]===y[x-p];p++);return _n=y.slice(i,1<p?1-p:void 0)}function ra(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Dr(){return!0}function Xl(){return!1}function Ht(i){function a(c,p,y,x,k){this._reactName=c,this._targetInst=y,this.type=p,this.nativeEvent=x,this.target=k,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(c=i[L],this[L]=c?c(x):x[L]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Dr:Xl,this.isPropagationStopped=Xl,this}return te(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Dr)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Dr)},persist:function(){},isPersistent:Dr}),a}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sa=Ht(yr),Or=te({},yr,{view:0,detail:0}),rp=Ht(Or),ia,ds,Hs,Zi=te({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Hs&&(Hs&&i.type==="mousemove"?(ia=i.screenX-Hs.screenX,ds=i.screenY-Hs.screenY):ds=ia=0,Hs=i),ia)},movementY:function(i){return"movementY"in i?i.movementY:ds}}),oa=Ht(Zi),Zl=te({},Zi,{dataTransfer:0}),Xc=Ht(Zl),aa=te({},Or,{relatedTarget:0}),la=Ht(aa),Zc=te({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),hs=Ht(Zc),ed=te({},yr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),td=Ht(ed),nd=te({},yr,{data:0}),eu=Ht(nd),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=rd[i])?!!a[i]:!1}function Lr(){return sd}var h=te({},Or,{key:function(i){if(i.key){var a=ua[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ra(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?fn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lr,charCode:function(i){return i.type==="keypress"?ra(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ra(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Ht(h),T=te({},Zi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Ht(T),K=te({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lr}),ee=Ht(K),he=te({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ge=Ht(he),At=te({},Zi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Ht(At),Mt=[9,13,27,32],Tt=u&&"CompositionEvent"in window,qn=null;u&&"documentMode"in document&&(qn=document.documentMode);var Dn=u&&"TextEvent"in window&&!qn,eo=u&&(!Tt||qn&&8<qn&&11>=qn),ca=" ",mv=!1;function gv(i,a){switch(i){case"keyup":return Mt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var da=!1;function SA(i,a){switch(i){case"compositionend":return yv(a);case"keypress":return a.which!==32?null:(mv=!0,ca);case"textInput":return i=a.data,i===ca&&mv?null:i;default:return null}}function kA(i,a){if(da)return i==="compositionend"||!Tt&&gv(i,a)?(i=Yl(),_n=na=jn=null,da=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return eo&&a.locale!=="ko"?null:a.data;default:return null}}var CA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!CA[i.type]:a==="textarea"}function _v(i,a,c,p){Rr(p),a=ud(a,"onChange"),0<a.length&&(c=new sa("onChange","change",null,c,p),i.push({event:c,listeners:a}))}var tu=null,nu=null;function PA(i){Mv(i,0)}function id(i){var a=ga(i);if(ts(a))return i}function AA(i,a){if(i==="change")return a}var wv=!1;if(u){var sp;if(u){var ip="oninput"in document;if(!ip){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),ip=typeof xv.oninput=="function"}sp=ip}else sp=!1;wv=sp&&(!document.documentMode||9<document.documentMode)}function bv(){tu&&(tu.detachEvent("onpropertychange",Ev),nu=tu=null)}function Ev(i){if(i.propertyName==="value"&&id(nu)){var a=[];_v(a,nu,i,Wo(i)),Bl(PA,a)}}function IA(i,a,c){i==="focusin"?(bv(),tu=a,nu=c,tu.attachEvent("onpropertychange",Ev)):i==="focusout"&&bv()}function RA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return id(nu)}function NA(i,a){if(i==="click")return id(a)}function jA(i,a){if(i==="input"||i==="change")return id(a)}function DA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var vr=typeof Object.is=="function"?Object.is:DA;function ru(i,a){if(vr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),p=Object.keys(a);if(c.length!==p.length)return!1;for(p=0;p<c.length;p++){var y=c[p];if(!d.call(a,y)||!vr(i[y],a[y]))return!1}return!0}function Tv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Sv(i,a){var c=Tv(i);i=0;for(var p;c;){if(c.nodeType===3){if(p=i+c.textContent.length,i<=a&&p>=a)return{node:c,offset:a-i};i=p}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Tv(c)}}function kv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?kv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Cv(){for(var i=window,a=ar();a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=ar(i.document)}return a}function op(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function OA(i){var a=Cv(),c=i.focusedElem,p=i.selectionRange;if(a!==c&&c&&c.ownerDocument&&kv(c.ownerDocument.documentElement,c)){if(p!==null&&op(c)){if(a=p.start,i=p.end,i===void 0&&(i=a),"selectionStart"in c)c.selectionStart=a,c.selectionEnd=Math.min(i,c.value.length);else if(i=(a=c.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=c.textContent.length,x=Math.min(p.start,y);p=p.end===void 0?x:Math.min(p.end,y),!i.extend&&x>p&&(y=p,p=x,x=y),y=Sv(c,x);var k=Sv(c,p);y&&k&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),x>p?(i.addRange(a),i.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),i.addRange(a)))}}for(a=[],i=c;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<a.length;c++)i=a[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var LA=u&&"documentMode"in document&&11>=document.documentMode,ha=null,ap=null,su=null,lp=!1;function Pv(i,a,c){var p=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;lp||ha==null||ha!==ar(p)||(p=ha,"selectionStart"in p&&op(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),su&&ru(su,p)||(su=p,p=ud(ap,"onSelect"),0<p.length&&(a=new sa("onSelect","select",null,a,c),i.push({event:a,listeners:p}),a.target=ha)))}function od(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var fa={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},up={},Av={};u&&(Av=document.createElement("div").style,"AnimationEvent"in window||(delete fa.animationend.animation,delete fa.animationiteration.animation,delete fa.animationstart.animation),"TransitionEvent"in window||delete fa.transitionend.transition);function ad(i){if(up[i])return up[i];if(!fa[i])return i;var a=fa[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in Av)return up[i]=a[c];return i}var Iv=ad("animationend"),Rv=ad("animationiteration"),Nv=ad("animationstart"),jv=ad("transitionend"),Dv=new Map,Ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(i,a){Dv.set(i,a),o(a,[i])}for(var cp=0;cp<Ov.length;cp++){var dp=Ov[cp],MA=dp.toLowerCase(),VA=dp[0].toUpperCase()+dp.slice(1);qs(MA,"on"+VA)}qs(Iv,"onAnimationEnd"),qs(Rv,"onAnimationIteration"),qs(Nv,"onAnimationStart"),qs("dblclick","onDoubleClick"),qs("focusin","onFocus"),qs("focusout","onBlur"),qs(jv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$A=new Set("cancel close invalid load scroll toggle".split(" ").concat(iu));function Lv(i,a,c){var p=i.type||"unknown-event";i.currentTarget=c,Mc(p,a,void 0,i),i.currentTarget=null}function Mv(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var p=i[c],y=p.event;p=p.listeners;e:{var x=void 0;if(a)for(var k=p.length-1;0<=k;k--){var L=p[k],U=L.instance,X=L.currentTarget;if(L=L.listener,U!==x&&y.isPropagationStopped())break e;Lv(y,L,X),x=U}else for(k=0;k<p.length;k++){if(L=p[k],U=L.instance,X=L.currentTarget,L=L.listener,U!==x&&y.isPropagationStopped())break e;Lv(y,L,X),x=U}}}if(cr)throw i=zl,cr=!1,zl=null,i}function rt(i,a){var c=a[_p];c===void 0&&(c=a[_p]=new Set);var p=i+"__bubble";c.has(p)||(Vv(a,i,2,!1),c.add(p))}function hp(i,a,c){var p=0;a&&(p|=4),Vv(c,i,p,a)}var ld="_reactListening"+Math.random().toString(36).slice(2);function ou(i){if(!i[ld]){i[ld]=!0,r.forEach(function(c){c!=="selectionchange"&&($A.has(c)||hp(c,!1,i),hp(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[ld]||(a[ld]=!0,hp("selectionchange",!1,a))}}function Vv(i,a,c,p){switch(Jl(a)){case 1:var y=it;break;case 4:y=np;break;default:y=Ql}c=y.bind(null,a,c,i),y=void 0,!Ko||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(a,c,{capture:!0,passive:y}):i.addEventListener(a,c,!0):y!==void 0?i.addEventListener(a,c,{passive:y}):i.addEventListener(a,c,!1)}function fp(i,a,c,p,y){var x=p;if(!(a&1)&&!(a&2)&&p!==null)e:for(;;){if(p===null)return;var k=p.tag;if(k===3||k===4){var L=p.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(k===4)for(k=p.return;k!==null;){var U=k.tag;if((U===3||U===4)&&(U=k.stateNode.containerInfo,U===y||U.nodeType===8&&U.parentNode===y))return;k=k.return}for(;L!==null;){if(k=to(L),k===null)return;if(U=k.tag,U===5||U===6){p=x=k;continue e}L=L.parentNode}}p=p.return}Bl(function(){var X=x,ae=Wo(c),ue=[];e:{var oe=Dv.get(i);if(oe!==void 0){var me=sa,_e=i;switch(i){case"keypress":if(ra(c)===0)break e;case"keydown":case"keyup":me=w;break;case"focusin":_e="focus",me=la;break;case"focusout":_e="blur",me=la;break;case"beforeblur":case"afterblur":me=la;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":me=oa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":me=Xc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":me=ee;break;case Iv:case Rv:case Nv:me=hs;break;case jv:me=Ge;break;case"scroll":me=rp;break;case"wheel":me=ze;break;case"copy":case"cut":case"paste":me=td;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":me=N}var xe=(a&4)!==0,wt=!xe&&i==="scroll",G=xe?oe!==null?oe+"Capture":null:oe;xe=[];for(var H=X,Y;H!==null;){Y=H;var de=Y.stateNode;if(Y.tag===5&&de!==null&&(Y=de,G!==null&&(de=_t(H,G),de!=null&&xe.push(au(H,de,Y)))),wt)break;H=H.return}0<xe.length&&(oe=new me(oe,_e,null,c,ae),ue.push({event:oe,listeners:xe}))}}if(!(a&7)){e:{if(oe=i==="mouseover"||i==="pointerover",me=i==="mouseout"||i==="pointerout",oe&&c!==Bi&&(_e=c.relatedTarget||c.fromElement)&&(to(_e)||_e[fs]))break e;if((me||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,me?(_e=c.relatedTarget||c.toElement,me=X,_e=_e?to(_e):null,_e!==null&&(wt=dr(_e),_e!==wt||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(me=null,_e=X),me!==_e)){if(xe=oa,de="onMouseLeave",G="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(xe=N,de="onPointerLeave",G="onPointerEnter",H="pointer"),wt=me==null?oe:ga(me),Y=_e==null?oe:ga(_e),oe=new xe(de,H+"leave",me,c,ae),oe.target=wt,oe.relatedTarget=Y,de=null,to(ae)===X&&(xe=new xe(G,H+"enter",_e,c,ae),xe.target=Y,xe.relatedTarget=wt,de=xe),wt=de,me&&_e)t:{for(xe=me,G=_e,H=0,Y=xe;Y;Y=pa(Y))H++;for(Y=0,de=G;de;de=pa(de))Y++;for(;0<H-Y;)xe=pa(xe),H--;for(;0<Y-H;)G=pa(G),Y--;for(;H--;){if(xe===G||G!==null&&xe===G.alternate)break t;xe=pa(xe),G=pa(G)}xe=null}else xe=null;me!==null&&$v(ue,oe,me,xe,!1),_e!==null&&wt!==null&&$v(ue,wt,_e,xe,!0)}}e:{if(oe=X?ga(X):window,me=oe.nodeName&&oe.nodeName.toLowerCase(),me==="select"||me==="input"&&oe.type==="file")var be=AA;else if(vv(oe))if(wv)be=jA;else{be=RA;var Se=IA}else(me=oe.nodeName)&&me.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(be=NA);if(be&&(be=be(i,X))){_v(ue,be,c,ae);break e}Se&&Se(i,oe,X),i==="focusout"&&(Se=oe._wrapperState)&&Se.controlled&&oe.type==="number"&&Uo(oe,"number",oe.value)}switch(Se=X?ga(X):window,i){case"focusin":(vv(Se)||Se.contentEditable==="true")&&(ha=Se,ap=X,su=null);break;case"focusout":su=ap=ha=null;break;case"mousedown":lp=!0;break;case"contextmenu":case"mouseup":case"dragend":lp=!1,Pv(ue,c,ae);break;case"selectionchange":if(LA)break;case"keydown":case"keyup":Pv(ue,c,ae)}var ke;if(Tt)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else da?gv(i,c)&&(Re="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Re="onCompositionStart");Re&&(eo&&c.locale!=="ko"&&(da||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&da&&(ke=Yl()):(jn=ae,na="value"in jn?jn.value:jn.textContent,da=!0)),Se=ud(X,Re),0<Se.length&&(Re=new eu(Re,i,null,c,ae),ue.push({event:Re,listeners:Se}),ke?Re.data=ke:(ke=yv(c),ke!==null&&(Re.data=ke)))),(ke=Dn?SA(i,c):kA(i,c))&&(X=ud(X,"onBeforeInput"),0<X.length&&(ae=new eu("onBeforeInput","beforeinput",null,c,ae),ue.push({event:ae,listeners:X}),ae.data=ke))}Mv(ue,a)})}function au(i,a,c){return{instance:i,listener:a,currentTarget:c}}function ud(i,a){for(var c=a+"Capture",p=[];i!==null;){var y=i,x=y.stateNode;y.tag===5&&x!==null&&(y=x,x=_t(i,c),x!=null&&p.unshift(au(i,x,y)),x=_t(i,a),x!=null&&p.push(au(i,x,y))),i=i.return}return p}function pa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function $v(i,a,c,p,y){for(var x=a._reactName,k=[];c!==null&&c!==p;){var L=c,U=L.alternate,X=L.stateNode;if(U!==null&&U===p)break;L.tag===5&&X!==null&&(L=X,y?(U=_t(c,x),U!=null&&k.unshift(au(c,U,L))):y||(U=_t(c,x),U!=null&&k.push(au(c,U,L)))),c=c.return}k.length!==0&&i.push({event:a,listeners:k})}var FA=/\r\n?/g,UA=/\u0000|\uFFFD/g;function Fv(i){return(typeof i=="string"?i:""+i).replace(FA,`
`).replace(UA,"")}function cd(i,a,c){if(a=Fv(a),Fv(i)!==a&&c)throw Error(t(425))}function dd(){}var pp=null,mp=null;function gp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var yp=typeof setTimeout=="function"?setTimeout:void 0,BA=typeof clearTimeout=="function"?clearTimeout:void 0,Uv=typeof Promise=="function"?Promise:void 0,zA=typeof queueMicrotask=="function"?queueMicrotask:typeof Uv<"u"?function(i){return Uv.resolve(null).then(i).catch(WA)}:yp;function WA(i){setTimeout(function(){throw i})}function vp(i,a){var c=a,p=0;do{var y=c.nextSibling;if(i.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"){if(p===0){i.removeChild(y),gr(a);return}p--}else c!=="$"&&c!=="$?"&&c!=="$!"||p++;c=y}while(c);gr(a)}function Ks(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function Bv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(a===0)return i;a--}else c==="/$"&&a++}i=i.previousSibling}return null}var ma=Math.random().toString(36).slice(2),Mr="__reactFiber$"+ma,lu="__reactProps$"+ma,fs="__reactContainer$"+ma,_p="__reactEvents$"+ma,HA="__reactListeners$"+ma,qA="__reactHandles$"+ma;function to(i){var a=i[Mr];if(a)return a;for(var c=i.parentNode;c;){if(a=c[fs]||c[Mr]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Bv(i);i!==null;){if(c=i[Mr])return c;i=Bv(i)}return a}i=c,c=i.parentNode}return null}function uu(i){return i=i[Mr]||i[fs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ga(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function hd(i){return i[lu]||null}var wp=[],ya=-1;function Gs(i){return{current:i}}function st(i){0>ya||(i.current=wp[ya],wp[ya]=null,ya--)}function Ze(i,a){ya++,wp[ya]=i.current,i.current=a}var Qs={},en=Gs(Qs),wn=Gs(!1),no=Qs;function va(i,a){var c=i.type.contextTypes;if(!c)return Qs;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var y={},x;for(x in c)y[x]=a[x];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function xn(i){return i=i.childContextTypes,i!=null}function fd(){st(wn),st(en)}function zv(i,a,c){if(en.current!==Qs)throw Error(t(168));Ze(en,a),Ze(wn,c)}function Wv(i,a,c){var p=i.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return c;p=p.getChildContext();for(var y in p)if(!(y in a))throw Error(t(108,ce(i)||"Unknown",y));return te({},c,p)}function pd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qs,no=en.current,Ze(en,i),Ze(wn,wn.current),!0}function Hv(i,a,c){var p=i.stateNode;if(!p)throw Error(t(169));c?(i=Wv(i,a,no),p.__reactInternalMemoizedMergedChildContext=i,st(wn),st(en),Ze(en,i)):st(wn),Ze(wn,c)}var ps=null,md=!1,xp=!1;function qv(i){ps===null?ps=[i]:ps.push(i)}function KA(i){md=!0,qv(i)}function Js(){if(!xp&&ps!==null){xp=!0;var i=0,a=Be;try{var c=ps;for(Be=1;i<c.length;i++){var p=c[i];do p=p(!0);while(p!==null)}ps=null,md=!1}catch(y){throw ps!==null&&(ps=ps.slice(i+1)),Yo(Ki,Js),y}finally{Be=a,xp=!1}}return null}var _a=[],wa=0,gd=null,yd=0,Kn=[],Gn=0,ro=null,ms=1,gs="";function so(i,a){_a[wa++]=yd,_a[wa++]=gd,gd=i,yd=a}function Kv(i,a,c){Kn[Gn++]=ms,Kn[Gn++]=gs,Kn[Gn++]=ro,ro=i;var p=ms;i=gs;var y=32-hn(p)-1;p&=~(1<<y),c+=1;var x=32-hn(a)+y;if(30<x){var k=y-y%5;x=(p&(1<<k)-1).toString(32),p>>=k,y-=k,ms=1<<32-hn(a)+y|c<<y|p,gs=x+i}else ms=1<<x|c<<y|p,gs=i}function bp(i){i.return!==null&&(so(i,1),Kv(i,1,0))}function Ep(i){for(;i===gd;)gd=_a[--wa],_a[wa]=null,yd=_a[--wa],_a[wa]=null;for(;i===ro;)ro=Kn[--Gn],Kn[Gn]=null,gs=Kn[--Gn],Kn[Gn]=null,ms=Kn[--Gn],Kn[Gn]=null}var On=null,Ln=null,ot=!1,_r=null;function Gv(i,a){var c=Xn(5,null,null,0);c.elementType="DELETED",c.stateNode=a,c.return=i,a=i.deletions,a===null?(i.deletions=[c],i.flags|=16):a.push(c)}function Qv(i,a){switch(i.tag){case 5:var c=i.type;return a=a.nodeType!==1||c.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,On=i,Ln=Ks(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,On=i,Ln=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(c=ro!==null?{id:ms,overflow:gs}:null,i.memoizedState={dehydrated:a,treeContext:c,retryLane:1073741824},c=Xn(18,null,null,0),c.stateNode=a,c.return=i,i.child=c,On=i,Ln=null,!0):!1;default:return!1}}function Tp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Sp(i){if(ot){var a=Ln;if(a){var c=a;if(!Qv(i,a)){if(Tp(i))throw Error(t(418));a=Ks(c.nextSibling);var p=On;a&&Qv(i,a)?Gv(p,c):(i.flags=i.flags&-4097|2,ot=!1,On=i)}}else{if(Tp(i))throw Error(t(418));i.flags=i.flags&-4097|2,ot=!1,On=i}}}function Jv(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;On=i}function vd(i){if(i!==On)return!1;if(!ot)return Jv(i),ot=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!gp(i.type,i.memoizedProps)),a&&(a=Ln)){if(Tp(i))throw Yv(),Error(t(418));for(;a;)Gv(i,a),a=Ks(a.nextSibling)}if(Jv(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(a===0){Ln=Ks(i.nextSibling);break e}a--}else c!=="$"&&c!=="$!"&&c!=="$?"||a++}i=i.nextSibling}Ln=null}}else Ln=On?Ks(i.stateNode.nextSibling):null;return!0}function Yv(){for(var i=Ln;i;)i=Ks(i.nextSibling)}function xa(){Ln=On=null,ot=!1}function kp(i){_r===null?_r=[i]:_r.push(i)}var GA=q.ReactCurrentBatchConfig;function cu(i,a,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var p=c.stateNode}if(!p)throw Error(t(147,i));var y=p,x=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===x?a.ref:(a=function(k){var L=y.refs;k===null?delete L[x]:L[x]=k},a._stringRef=x,a)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function _d(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Xv(i){var a=i._init;return a(i._payload)}function Zv(i){function a(G,H){if(i){var Y=G.deletions;Y===null?(G.deletions=[H],G.flags|=16):Y.push(H)}}function c(G,H){if(!i)return null;for(;H!==null;)a(G,H),H=H.sibling;return null}function p(G,H){for(G=new Map;H!==null;)H.key!==null?G.set(H.key,H):G.set(H.index,H),H=H.sibling;return G}function y(G,H){return G=si(G,H),G.index=0,G.sibling=null,G}function x(G,H,Y){return G.index=Y,i?(Y=G.alternate,Y!==null?(Y=Y.index,Y<H?(G.flags|=2,H):Y):(G.flags|=2,H)):(G.flags|=1048576,H)}function k(G){return i&&G.alternate===null&&(G.flags|=2),G}function L(G,H,Y,de){return H===null||H.tag!==6?(H=ym(Y,G.mode,de),H.return=G,H):(H=y(H,Y),H.return=G,H)}function U(G,H,Y,de){var be=Y.type;return be===A?ae(G,H,Y.props.children,de,Y.key):H!==null&&(H.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ne&&Xv(be)===H.type)?(de=y(H,Y.props),de.ref=cu(G,H,Y),de.return=G,de):(de=zd(Y.type,Y.key,Y.props,null,G.mode,de),de.ref=cu(G,H,Y),de.return=G,de)}function X(G,H,Y,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=vm(Y,G.mode,de),H.return=G,H):(H=y(H,Y.children||[]),H.return=G,H)}function ae(G,H,Y,de,be){return H===null||H.tag!==7?(H=fo(Y,G.mode,de,be),H.return=G,H):(H=y(H,Y),H.return=G,H)}function ue(G,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=ym(""+H,G.mode,Y),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case B:return Y=zd(H.type,H.key,H.props,null,G.mode,Y),Y.ref=cu(G,null,H),Y.return=G,Y;case V:return H=vm(H,G.mode,Y),H.return=G,H;case Ne:var de=H._init;return ue(G,de(H._payload),Y)}if(ss(H)||Z(H))return H=fo(H,G.mode,Y,null),H.return=G,H;_d(G,H)}return null}function oe(G,H,Y,de){var be=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return be!==null?null:L(G,H,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:return Y.key===be?U(G,H,Y,de):null;case V:return Y.key===be?X(G,H,Y,de):null;case Ne:return be=Y._init,oe(G,H,be(Y._payload),de)}if(ss(Y)||Z(Y))return be!==null?null:ae(G,H,Y,de,null);_d(G,Y)}return null}function me(G,H,Y,de,be){if(typeof de=="string"&&de!==""||typeof de=="number")return G=G.get(Y)||null,L(H,G,""+de,be);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case B:return G=G.get(de.key===null?Y:de.key)||null,U(H,G,de,be);case V:return G=G.get(de.key===null?Y:de.key)||null,X(H,G,de,be);case Ne:var Se=de._init;return me(G,H,Y,Se(de._payload),be)}if(ss(de)||Z(de))return G=G.get(Y)||null,ae(H,G,de,be,null);_d(H,de)}return null}function _e(G,H,Y,de){for(var be=null,Se=null,ke=H,Re=H=0,Ft=null;ke!==null&&Re<Y.length;Re++){ke.index>Re?(Ft=ke,ke=null):Ft=ke.sibling;var qe=oe(G,ke,Y[Re],de);if(qe===null){ke===null&&(ke=Ft);break}i&&ke&&qe.alternate===null&&a(G,ke),H=x(qe,H,Re),Se===null?be=qe:Se.sibling=qe,Se=qe,ke=Ft}if(Re===Y.length)return c(G,ke),ot&&so(G,Re),be;if(ke===null){for(;Re<Y.length;Re++)ke=ue(G,Y[Re],de),ke!==null&&(H=x(ke,H,Re),Se===null?be=ke:Se.sibling=ke,Se=ke);return ot&&so(G,Re),be}for(ke=p(G,ke);Re<Y.length;Re++)Ft=me(ke,G,Re,Y[Re],de),Ft!==null&&(i&&Ft.alternate!==null&&ke.delete(Ft.key===null?Re:Ft.key),H=x(Ft,H,Re),Se===null?be=Ft:Se.sibling=Ft,Se=Ft);return i&&ke.forEach(function(ii){return a(G,ii)}),ot&&so(G,Re),be}function xe(G,H,Y,de){var be=Z(Y);if(typeof be!="function")throw Error(t(150));if(Y=be.call(Y),Y==null)throw Error(t(151));for(var Se=be=null,ke=H,Re=H=0,Ft=null,qe=Y.next();ke!==null&&!qe.done;Re++,qe=Y.next()){ke.index>Re?(Ft=ke,ke=null):Ft=ke.sibling;var ii=oe(G,ke,qe.value,de);if(ii===null){ke===null&&(ke=Ft);break}i&&ke&&ii.alternate===null&&a(G,ke),H=x(ii,H,Re),Se===null?be=ii:Se.sibling=ii,Se=ii,ke=Ft}if(qe.done)return c(G,ke),ot&&so(G,Re),be;if(ke===null){for(;!qe.done;Re++,qe=Y.next())qe=ue(G,qe.value,de),qe!==null&&(H=x(qe,H,Re),Se===null?be=qe:Se.sibling=qe,Se=qe);return ot&&so(G,Re),be}for(ke=p(G,ke);!qe.done;Re++,qe=Y.next())qe=me(ke,G,Re,qe.value,de),qe!==null&&(i&&qe.alternate!==null&&ke.delete(qe.key===null?Re:qe.key),H=x(qe,H,Re),Se===null?be=qe:Se.sibling=qe,Se=qe);return i&&ke.forEach(function(CI){return a(G,CI)}),ot&&so(G,Re),be}function wt(G,H,Y,de){if(typeof Y=="object"&&Y!==null&&Y.type===A&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case B:e:{for(var be=Y.key,Se=H;Se!==null;){if(Se.key===be){if(be=Y.type,be===A){if(Se.tag===7){c(G,Se.sibling),H=y(Se,Y.props.children),H.return=G,G=H;break e}}else if(Se.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===Ne&&Xv(be)===Se.type){c(G,Se.sibling),H=y(Se,Y.props),H.ref=cu(G,Se,Y),H.return=G,G=H;break e}c(G,Se);break}else a(G,Se);Se=Se.sibling}Y.type===A?(H=fo(Y.props.children,G.mode,de,Y.key),H.return=G,G=H):(de=zd(Y.type,Y.key,Y.props,null,G.mode,de),de.ref=cu(G,H,Y),de.return=G,G=de)}return k(G);case V:e:{for(Se=Y.key;H!==null;){if(H.key===Se)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){c(G,H.sibling),H=y(H,Y.children||[]),H.return=G,G=H;break e}else{c(G,H);break}else a(G,H);H=H.sibling}H=vm(Y,G.mode,de),H.return=G,G=H}return k(G);case Ne:return Se=Y._init,wt(G,H,Se(Y._payload),de)}if(ss(Y))return _e(G,H,Y,de);if(Z(Y))return xe(G,H,Y,de);_d(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(c(G,H.sibling),H=y(H,Y),H.return=G,G=H):(c(G,H),H=ym(Y,G.mode,de),H.return=G,G=H),k(G)):c(G,H)}return wt}var ba=Zv(!0),e_=Zv(!1),wd=Gs(null),xd=null,Ea=null,Cp=null;function Pp(){Cp=Ea=xd=null}function Ap(i){var a=wd.current;st(wd),i._currentValue=a}function Ip(i,a,c){for(;i!==null;){var p=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),i===c)break;i=i.return}}function Ta(i,a){xd=i,Cp=Ea=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(bn=!0),i.firstContext=null)}function Qn(i){var a=i._currentValue;if(Cp!==i)if(i={context:i,memoizedValue:a,next:null},Ea===null){if(xd===null)throw Error(t(308));Ea=i,xd.dependencies={lanes:0,firstContext:i}}else Ea=Ea.next=i;return a}var io=null;function Rp(i){io===null?io=[i]:io.push(i)}function t_(i,a,c,p){var y=a.interleaved;return y===null?(c.next=c,Rp(a)):(c.next=y.next,y.next=c),a.interleaved=c,ys(i,p)}function ys(i,a){i.lanes|=a;var c=i.alternate;for(c!==null&&(c.lanes|=a),c=i,i=i.return;i!==null;)i.childLanes|=a,c=i.alternate,c!==null&&(c.childLanes|=a),c=i,i=i.return;return c.tag===3?c.stateNode:null}var Ys=!1;function Np(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function vs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function Xs(i,a,c){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,He&2){var y=p.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),p.pending=a,ys(i,c)}return y=p.interleaved,y===null?(a.next=a,Rp(p)):(a.next=y.next,y.next=a),p.interleaved=a,ys(i,c)}function bd(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194240)!==0)){var p=a.lanes;p&=i.pendingLanes,c|=p,a.lanes=c,Us(i,c)}}function r_(i,a){var c=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,c===p)){var y=null,x=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};x===null?y=x=k:x=x.next=k,c=c.next}while(c!==null);x===null?y=x=a:x=x.next=a}else y=x=a;c={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:p.shared,effects:p.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}function Ed(i,a,c,p){var y=i.updateQueue;Ys=!1;var x=y.firstBaseUpdate,k=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var U=L,X=U.next;U.next=null,k===null?x=X:k.next=X,k=U;var ae=i.alternate;ae!==null&&(ae=ae.updateQueue,L=ae.lastBaseUpdate,L!==k&&(L===null?ae.firstBaseUpdate=X:L.next=X,ae.lastBaseUpdate=U))}if(x!==null){var ue=y.baseState;k=0,ae=X=U=null,L=x;do{var oe=L.lane,me=L.eventTime;if((p&oe)===oe){ae!==null&&(ae=ae.next={eventTime:me,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var _e=i,xe=L;switch(oe=a,me=c,xe.tag){case 1:if(_e=xe.payload,typeof _e=="function"){ue=_e.call(me,ue,oe);break e}ue=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=xe.payload,oe=typeof _e=="function"?_e.call(me,ue,oe):_e,oe==null)break e;ue=te({},ue,oe);break e;case 2:Ys=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,oe=y.effects,oe===null?y.effects=[L]:oe.push(L))}else me={eventTime:me,lane:oe,tag:L.tag,payload:L.payload,callback:L.callback,next:null},ae===null?(X=ae=me,U=ue):ae=ae.next=me,k|=oe;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;oe=L,L=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);if(ae===null&&(U=ue),y.baseState=U,y.firstBaseUpdate=X,y.lastBaseUpdate=ae,a=y.shared.interleaved,a!==null){y=a;do k|=y.lane,y=y.next;while(y!==a)}else x===null&&(y.shared.lanes=0);lo|=k,i.lanes=k,i.memoizedState=ue}}function s_(i,a,c){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var p=i[a],y=p.callback;if(y!==null){if(p.callback=null,p=c,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var du={},Vr=Gs(du),hu=Gs(du),fu=Gs(du);function oo(i){if(i===du)throw Error(t(174));return i}function jp(i,a){switch(Ze(fu,a),Ze(hu,i),Ze(Vr,du),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Pt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Pt(a,i)}st(Vr),Ze(Vr,a)}function Sa(){st(Vr),st(hu),st(fu)}function i_(i){oo(fu.current);var a=oo(Vr.current),c=Pt(a,i.type);a!==c&&(Ze(hu,i),Ze(Vr,c))}function Dp(i){hu.current===i&&(st(Vr),st(hu))}var ut=Gs(0);function Td(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Op=[];function Lp(){for(var i=0;i<Op.length;i++)Op[i]._workInProgressVersionPrimary=null;Op.length=0}var Sd=q.ReactCurrentDispatcher,Mp=q.ReactCurrentBatchConfig,ao=0,ct=null,It=null,Vt=null,kd=!1,pu=!1,mu=0,QA=0;function tn(){throw Error(t(321))}function Vp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!vr(i[c],a[c]))return!1;return!0}function $p(i,a,c,p,y,x){if(ao=x,ct=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Sd.current=i===null||i.memoizedState===null?ZA:eI,i=c(p,y),pu){x=0;do{if(pu=!1,mu=0,25<=x)throw Error(t(301));x+=1,Vt=It=null,a.updateQueue=null,Sd.current=tI,i=c(p,y)}while(pu)}if(Sd.current=Ad,a=It!==null&&It.next!==null,ao=0,Vt=It=ct=null,kd=!1,a)throw Error(t(300));return i}function Fp(){var i=mu!==0;return mu=0,i}function $r(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ct.memoizedState=Vt=i:Vt=Vt.next=i,Vt}function Jn(){if(It===null){var i=ct.alternate;i=i!==null?i.memoizedState:null}else i=It.next;var a=Vt===null?ct.memoizedState:Vt.next;if(a!==null)Vt=a,It=i;else{if(i===null)throw Error(t(310));It=i,i={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Vt===null?ct.memoizedState=Vt=i:Vt=Vt.next=i}return Vt}function gu(i,a){return typeof a=="function"?a(i):a}function Up(i){var a=Jn(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=It,y=p.baseQueue,x=c.pending;if(x!==null){if(y!==null){var k=y.next;y.next=x.next,x.next=k}p.baseQueue=y=x,c.pending=null}if(y!==null){x=y.next,p=p.baseState;var L=k=null,U=null,X=x;do{var ae=X.lane;if((ao&ae)===ae)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),p=X.hasEagerState?X.eagerState:i(p,X.action);else{var ue={lane:ae,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(L=U=ue,k=p):U=U.next=ue,ct.lanes|=ae,lo|=ae}X=X.next}while(X!==null&&X!==x);U===null?k=p:U.next=L,vr(p,a.memoizedState)||(bn=!0),a.memoizedState=p,a.baseState=k,a.baseQueue=U,c.lastRenderedState=p}if(i=c.interleaved,i!==null){y=i;do x=y.lane,ct.lanes|=x,lo|=x,y=y.next;while(y!==i)}else y===null&&(c.lanes=0);return[a.memoizedState,c.dispatch]}function Bp(i){var a=Jn(),c=a.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var p=c.dispatch,y=c.pending,x=a.memoizedState;if(y!==null){c.pending=null;var k=y=y.next;do x=i(x,k.action),k=k.next;while(k!==y);vr(x,a.memoizedState)||(bn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),c.lastRenderedState=x}return[x,p]}function o_(){}function a_(i,a){var c=ct,p=Jn(),y=a(),x=!vr(p.memoizedState,y);if(x&&(p.memoizedState=y,bn=!0),p=p.queue,zp(c_.bind(null,c,p,i),[i]),p.getSnapshot!==a||x||Vt!==null&&Vt.memoizedState.tag&1){if(c.flags|=2048,yu(9,u_.bind(null,c,p,y,a),void 0,null),$t===null)throw Error(t(349));ao&30||l_(c,a,y)}return y}function l_(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=ct.updateQueue,a===null?(a={lastEffect:null,stores:null},ct.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function u_(i,a,c,p){a.value=c,a.getSnapshot=p,d_(a)&&h_(i)}function c_(i,a,c){return c(function(){d_(a)&&h_(i)})}function d_(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!vr(i,c)}catch{return!0}}function h_(i){var a=ys(i,1);a!==null&&Er(a,i,1,-1)}function f_(i){var a=$r();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:i},a.queue=i,i=i.dispatch=XA.bind(null,ct,i),[a.memoizedState,i]}function yu(i,a,c,p){return i={tag:i,create:a,destroy:c,deps:p,next:null},a=ct.updateQueue,a===null?(a={lastEffect:null,stores:null},ct.updateQueue=a,a.lastEffect=i.next=i):(c=a.lastEffect,c===null?a.lastEffect=i.next=i:(p=c.next,c.next=i,i.next=p,a.lastEffect=i)),i}function p_(){return Jn().memoizedState}function Cd(i,a,c,p){var y=$r();ct.flags|=i,y.memoizedState=yu(1|a,c,void 0,p===void 0?null:p)}function Pd(i,a,c,p){var y=Jn();p=p===void 0?null:p;var x=void 0;if(It!==null){var k=It.memoizedState;if(x=k.destroy,p!==null&&Vp(p,k.deps)){y.memoizedState=yu(a,c,x,p);return}}ct.flags|=i,y.memoizedState=yu(1|a,c,x,p)}function m_(i,a){return Cd(8390656,8,i,a)}function zp(i,a){return Pd(2048,8,i,a)}function g_(i,a){return Pd(4,2,i,a)}function y_(i,a){return Pd(4,4,i,a)}function v_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function __(i,a,c){return c=c!=null?c.concat([i]):null,Pd(4,4,v_.bind(null,a,i),c)}function Wp(){}function w_(i,a){var c=Jn();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&Vp(a,p[1])?p[0]:(c.memoizedState=[i,a],i)}function x_(i,a){var c=Jn();a=a===void 0?null:a;var p=c.memoizedState;return p!==null&&a!==null&&Vp(a,p[1])?p[0]:(i=i(),c.memoizedState=[i,a],i)}function b_(i,a,c){return ao&21?(vr(c,a)||(c=Ji(),ct.lanes|=c,lo|=c,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,bn=!0),i.memoizedState=c)}function JA(i,a){var c=Be;Be=c!==0&&4>c?c:4,i(!0);var p=Mp.transition;Mp.transition={};try{i(!1),a()}finally{Be=c,Mp.transition=p}}function E_(){return Jn().memoizedState}function YA(i,a,c){var p=ni(i);if(c={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null},T_(i))S_(a,c);else if(c=t_(i,a,c,p),c!==null){var y=mn();Er(c,i,p,y),k_(c,a,p)}}function XA(i,a,c){var p=ni(i),y={lane:p,action:c,hasEagerState:!1,eagerState:null,next:null};if(T_(i))S_(a,y);else{var x=i.alternate;if(i.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var k=a.lastRenderedState,L=x(k,c);if(y.hasEagerState=!0,y.eagerState=L,vr(L,k)){var U=a.interleaved;U===null?(y.next=y,Rp(a)):(y.next=U.next,U.next=y),a.interleaved=y;return}}catch{}finally{}c=t_(i,a,y,p),c!==null&&(y=mn(),Er(c,i,p,y),k_(c,a,p))}}function T_(i){var a=i.alternate;return i===ct||a!==null&&a===ct}function S_(i,a){pu=kd=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function k_(i,a,c){if(c&4194240){var p=a.lanes;p&=i.pendingLanes,c|=p,a.lanes=c,Us(i,c)}}var Ad={readContext:Qn,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},ZA={readContext:Qn,useCallback:function(i,a){return $r().memoizedState=[i,a===void 0?null:a],i},useContext:Qn,useEffect:m_,useImperativeHandle:function(i,a,c){return c=c!=null?c.concat([i]):null,Cd(4194308,4,v_.bind(null,a,i),c)},useLayoutEffect:function(i,a){return Cd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Cd(4,2,i,a)},useMemo:function(i,a){var c=$r();return a=a===void 0?null:a,i=i(),c.memoizedState=[i,a],i},useReducer:function(i,a,c){var p=$r();return a=c!==void 0?c(a):a,p.memoizedState=p.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},p.queue=i,i=i.dispatch=YA.bind(null,ct,i),[p.memoizedState,i]},useRef:function(i){var a=$r();return i={current:i},a.memoizedState=i},useState:f_,useDebugValue:Wp,useDeferredValue:function(i){return $r().memoizedState=i},useTransition:function(){var i=f_(!1),a=i[0];return i=JA.bind(null,i[1]),$r().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,c){var p=ct,y=$r();if(ot){if(c===void 0)throw Error(t(407));c=c()}else{if(c=a(),$t===null)throw Error(t(349));ao&30||l_(p,a,c)}y.memoizedState=c;var x={value:c,getSnapshot:a};return y.queue=x,m_(c_.bind(null,p,x,i),[i]),p.flags|=2048,yu(9,u_.bind(null,p,x,c,a),void 0,null),c},useId:function(){var i=$r(),a=$t.identifierPrefix;if(ot){var c=gs,p=ms;c=(p&~(1<<32-hn(p)-1)).toString(32)+c,a=":"+a+"R"+c,c=mu++,0<c&&(a+="H"+c.toString(32)),a+=":"}else c=QA++,a=":"+a+"r"+c.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},eI={readContext:Qn,useCallback:w_,useContext:Qn,useEffect:zp,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:x_,useReducer:Up,useRef:p_,useState:function(){return Up(gu)},useDebugValue:Wp,useDeferredValue:function(i){var a=Jn();return b_(a,It.memoizedState,i)},useTransition:function(){var i=Up(gu)[0],a=Jn().memoizedState;return[i,a]},useMutableSource:o_,useSyncExternalStore:a_,useId:E_,unstable_isNewReconciler:!1},tI={readContext:Qn,useCallback:w_,useContext:Qn,useEffect:zp,useImperativeHandle:__,useInsertionEffect:g_,useLayoutEffect:y_,useMemo:x_,useReducer:Bp,useRef:p_,useState:function(){return Bp(gu)},useDebugValue:Wp,useDeferredValue:function(i){var a=Jn();return It===null?a.memoizedState=i:b_(a,It.memoizedState,i)},useTransition:function(){var i=Bp(gu)[0],a=Jn().memoizedState;return[i,a]},useMutableSource:o_,useSyncExternalStore:a_,useId:E_,unstable_isNewReconciler:!1};function wr(i,a){if(i&&i.defaultProps){a=te({},a),i=i.defaultProps;for(var c in i)a[c]===void 0&&(a[c]=i[c]);return a}return a}function Hp(i,a,c,p){a=i.memoizedState,c=c(p,a),c=c==null?a:te({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Id={isMounted:function(i){return(i=i._reactInternals)?dr(i)===i:!1},enqueueSetState:function(i,a,c){i=i._reactInternals;var p=mn(),y=ni(i),x=vs(p,y);x.payload=a,c!=null&&(x.callback=c),a=Xs(i,x,y),a!==null&&(Er(a,i,y,p),bd(a,i,y))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var p=mn(),y=ni(i),x=vs(p,y);x.tag=1,x.payload=a,c!=null&&(x.callback=c),a=Xs(i,x,y),a!==null&&(Er(a,i,y,p),bd(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=mn(),p=ni(i),y=vs(c,p);y.tag=2,a!=null&&(y.callback=a),a=Xs(i,y,p),a!==null&&(Er(a,i,p,c),bd(a,i,p))}};function C_(i,a,c,p,y,x,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,x,k):a.prototype&&a.prototype.isPureReactComponent?!ru(c,p)||!ru(y,x):!0}function P_(i,a,c){var p=!1,y=Qs,x=a.contextType;return typeof x=="object"&&x!==null?x=Qn(x):(y=xn(a)?no:en.current,p=a.contextTypes,x=(p=p!=null)?va(i,y):Qs),a=new a(c,x),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Id,i.stateNode=a,a._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=x),a}function A_(i,a,c,p){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,p),a.state!==i&&Id.enqueueReplaceState(a,a.state,null)}function qp(i,a,c,p){var y=i.stateNode;y.props=c,y.state=i.memoizedState,y.refs={},Np(i);var x=a.contextType;typeof x=="object"&&x!==null?y.context=Qn(x):(x=xn(a)?no:en.current,y.context=va(i,x)),y.state=i.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Hp(i,a,x,c),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Id.enqueueReplaceState(y,y.state,null),Ed(i,c,y,p),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function ka(i,a){try{var c="",p=a;do c+=ie(p),p=p.return;while(p);var y=c}catch(x){y=`
Error generating stack: `+x.message+`
`+x.stack}return{value:i,source:a,stack:y,digest:null}}function Kp(i,a,c){return{value:i,source:null,stack:c??null,digest:a??null}}function Gp(i,a){try{console.error(a.value)}catch(c){setTimeout(function(){throw c})}}var nI=typeof WeakMap=="function"?WeakMap:Map;function I_(i,a,c){c=vs(-1,c),c.tag=3,c.payload={element:null};var p=a.value;return c.callback=function(){Md||(Md=!0,um=p),Gp(i,a)},c}function R_(i,a,c){c=vs(-1,c),c.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var y=a.value;c.payload=function(){return p(y)},c.callback=function(){Gp(i,a)}}var x=i.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(c.callback=function(){Gp(i,a),typeof p!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),c}function N_(i,a,c){var p=i.pingCache;if(p===null){p=i.pingCache=new nI;var y=new Set;p.set(a,y)}else y=p.get(a),y===void 0&&(y=new Set,p.set(a,y));y.has(c)||(y.add(c),i=gI.bind(null,i,a,c),a.then(i,i))}function j_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function D_(i,a,c,p,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===a?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(a=vs(-1,1),a.tag=2,Xs(c,a,1))),c.lanes|=1),i)}var rI=q.ReactCurrentOwner,bn=!1;function pn(i,a,c,p){a.child=i===null?e_(a,null,c,p):ba(a,i.child,c,p)}function O_(i,a,c,p,y){c=c.render;var x=a.ref;return Ta(a,y),p=$p(i,a,c,p,x,y),c=Fp(),i!==null&&!bn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,_s(i,a,y)):(ot&&c&&bp(a),a.flags|=1,pn(i,a,p,y),a.child)}function L_(i,a,c,p,y){if(i===null){var x=c.type;return typeof x=="function"&&!gm(x)&&x.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(a.tag=15,a.type=x,M_(i,a,x,p,y)):(i=zd(c.type,null,p,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(x=i.child,!(i.lanes&y)){var k=x.memoizedProps;if(c=c.compare,c=c!==null?c:ru,c(k,p)&&i.ref===a.ref)return _s(i,a,y)}return a.flags|=1,i=si(x,p),i.ref=a.ref,i.return=a,a.child=i}function M_(i,a,c,p,y){if(i!==null){var x=i.memoizedProps;if(ru(x,p)&&i.ref===a.ref)if(bn=!1,a.pendingProps=p=x,(i.lanes&y)!==0)i.flags&131072&&(bn=!0);else return a.lanes=i.lanes,_s(i,a,y)}return Qp(i,a,c,p,y)}function V_(i,a,c){var p=a.pendingProps,y=p.children,x=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(Pa,Mn),Mn|=c;else{if(!(c&1073741824))return i=x!==null?x.baseLanes|c:c,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Ze(Pa,Mn),Mn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=x!==null?x.baseLanes:c,Ze(Pa,Mn),Mn|=p}else x!==null?(p=x.baseLanes|c,a.memoizedState=null):p=c,Ze(Pa,Mn),Mn|=p;return pn(i,a,y,c),a.child}function $_(i,a){var c=a.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(a.flags|=512,a.flags|=2097152)}function Qp(i,a,c,p,y){var x=xn(c)?no:en.current;return x=va(a,x),Ta(a,y),c=$p(i,a,c,p,x,y),p=Fp(),i!==null&&!bn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,_s(i,a,y)):(ot&&p&&bp(a),a.flags|=1,pn(i,a,c,y),a.child)}function F_(i,a,c,p,y){if(xn(c)){var x=!0;pd(a)}else x=!1;if(Ta(a,y),a.stateNode===null)Nd(i,a),P_(a,c,p),qp(a,c,p,y),p=!0;else if(i===null){var k=a.stateNode,L=a.memoizedProps;k.props=L;var U=k.context,X=c.contextType;typeof X=="object"&&X!==null?X=Qn(X):(X=xn(c)?no:en.current,X=va(a,X));var ae=c.getDerivedStateFromProps,ue=typeof ae=="function"||typeof k.getSnapshotBeforeUpdate=="function";ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==p||U!==X)&&A_(a,k,p,X),Ys=!1;var oe=a.memoizedState;k.state=oe,Ed(a,p,k,y),U=a.memoizedState,L!==p||oe!==U||wn.current||Ys?(typeof ae=="function"&&(Hp(a,c,ae,p),U=a.memoizedState),(L=Ys||C_(a,c,L,p,oe,U,X))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=U),k.props=p,k.state=U,k.context=X,p=L):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{k=a.stateNode,n_(i,a),L=a.memoizedProps,X=a.type===a.elementType?L:wr(a.type,L),k.props=X,ue=a.pendingProps,oe=k.context,U=c.contextType,typeof U=="object"&&U!==null?U=Qn(U):(U=xn(c)?no:en.current,U=va(a,U));var me=c.getDerivedStateFromProps;(ae=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==ue||oe!==U)&&A_(a,k,p,U),Ys=!1,oe=a.memoizedState,k.state=oe,Ed(a,p,k,y);var _e=a.memoizedState;L!==ue||oe!==_e||wn.current||Ys?(typeof me=="function"&&(Hp(a,c,me,p),_e=a.memoizedState),(X=Ys||C_(a,c,X,p,oe,_e,U)||!1)?(ae||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(p,_e,U),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(p,_e,U)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&oe===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&oe===i.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=_e),k.props=p,k.state=_e,k.context=U,p=X):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&oe===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&oe===i.memoizedState||(a.flags|=1024),p=!1)}return Jp(i,a,c,p,x,y)}function Jp(i,a,c,p,y,x){$_(i,a);var k=(a.flags&128)!==0;if(!p&&!k)return y&&Hv(a,c,!1),_s(i,a,x);p=a.stateNode,rI.current=a;var L=k&&typeof c.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,i!==null&&k?(a.child=ba(a,i.child,null,x),a.child=ba(a,null,L,x)):pn(i,a,L,x),a.memoizedState=p.state,y&&Hv(a,c,!0),a.child}function U_(i){var a=i.stateNode;a.pendingContext?zv(i,a.pendingContext,a.pendingContext!==a.context):a.context&&zv(i,a.context,!1),jp(i,a.containerInfo)}function B_(i,a,c,p,y){return xa(),kp(y),a.flags|=256,pn(i,a,c,p),a.child}var Yp={dehydrated:null,treeContext:null,retryLane:0};function Xp(i){return{baseLanes:i,cachePool:null,transitions:null}}function z_(i,a,c){var p=a.pendingProps,y=ut.current,x=!1,k=(a.flags&128)!==0,L;if((L=k)||(L=i!==null&&i.memoizedState===null?!1:(y&2)!==0),L?(x=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),Ze(ut,y&1),i===null)return Sp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(k=p.children,i=p.fallback,x?(p=a.mode,x=a.child,k={mode:"hidden",children:k},!(p&1)&&x!==null?(x.childLanes=0,x.pendingProps=k):x=Wd(k,p,0,null),i=fo(i,p,c,null),x.return=a,i.return=a,x.sibling=i,a.child=x,a.child.memoizedState=Xp(c),a.memoizedState=Yp,i):Zp(a,k));if(y=i.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return sI(i,a,k,p,L,y,c);if(x){x=p.fallback,k=a.mode,y=i.child,L=y.sibling;var U={mode:"hidden",children:p.children};return!(k&1)&&a.child!==y?(p=a.child,p.childLanes=0,p.pendingProps=U,a.deletions=null):(p=si(y,U),p.subtreeFlags=y.subtreeFlags&14680064),L!==null?x=si(L,x):(x=fo(x,k,c,null),x.flags|=2),x.return=a,p.return=a,p.sibling=x,a.child=p,p=x,x=a.child,k=i.child.memoizedState,k=k===null?Xp(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},x.memoizedState=k,x.childLanes=i.childLanes&~c,a.memoizedState=Yp,p}return x=i.child,i=x.sibling,p=si(x,{mode:"visible",children:p.children}),!(a.mode&1)&&(p.lanes=c),p.return=a,p.sibling=null,i!==null&&(c=a.deletions,c===null?(a.deletions=[i],a.flags|=16):c.push(i)),a.child=p,a.memoizedState=null,p}function Zp(i,a){return a=Wd({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Rd(i,a,c,p){return p!==null&&kp(p),ba(a,i.child,null,c),i=Zp(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function sI(i,a,c,p,y,x,k){if(c)return a.flags&256?(a.flags&=-257,p=Kp(Error(t(422))),Rd(i,a,k,p)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(x=p.fallback,y=a.mode,p=Wd({mode:"visible",children:p.children},y,0,null),x=fo(x,y,k,null),x.flags|=2,p.return=a,x.return=a,p.sibling=x,a.child=p,a.mode&1&&ba(a,i.child,null,k),a.child.memoizedState=Xp(k),a.memoizedState=Yp,x);if(!(a.mode&1))return Rd(i,a,k,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var L=p.dgst;return p=L,x=Error(t(419)),p=Kp(x,p,void 0),Rd(i,a,k,p)}if(L=(k&i.childLanes)!==0,bn||L){if(p=$t,p!==null){switch(k&-k){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(p.suspendedLanes|k)?0:y,y!==0&&y!==x.retryLane&&(x.retryLane=y,ys(i,y),Er(p,i,y,-1))}return mm(),p=Kp(Error(t(421))),Rd(i,a,k,p)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=yI.bind(null,i),y._reactRetry=a,null):(i=x.treeContext,Ln=Ks(y.nextSibling),On=a,ot=!0,_r=null,i!==null&&(Kn[Gn++]=ms,Kn[Gn++]=gs,Kn[Gn++]=ro,ms=i.id,gs=i.overflow,ro=a),a=Zp(a,p.children),a.flags|=4096,a)}function W_(i,a,c){i.lanes|=a;var p=i.alternate;p!==null&&(p.lanes|=a),Ip(i.return,a,c)}function em(i,a,c,p,y){var x=i.memoizedState;x===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:c,tailMode:y}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=p,x.tail=c,x.tailMode=y)}function H_(i,a,c){var p=a.pendingProps,y=p.revealOrder,x=p.tail;if(pn(i,a,p.children,c),p=ut.current,p&2)p=p&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&W_(i,c,a);else if(i.tag===19)W_(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Ze(ut,p),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(c=a.child,y=null;c!==null;)i=c.alternate,i!==null&&Td(i)===null&&(y=c),c=c.sibling;c=y,c===null?(y=a.child,a.child=null):(y=c.sibling,c.sibling=null),em(a,!1,y,c,x);break;case"backwards":for(c=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Td(i)===null){a.child=y;break}i=y.sibling,y.sibling=c,c=y,y=i}em(a,!0,c,null,x);break;case"together":em(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Nd(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function _s(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),lo|=a.lanes,!(c&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,c=si(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=si(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function iI(i,a,c){switch(a.tag){case 3:U_(a),xa();break;case 5:i_(a);break;case 1:xn(a.type)&&pd(a);break;case 4:jp(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,y=a.memoizedProps.value;Ze(wd,p._currentValue),p._currentValue=y;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Ze(ut,ut.current&1),a.flags|=128,null):c&a.child.childLanes?z_(i,a,c):(Ze(ut,ut.current&1),i=_s(i,a,c),i!==null?i.sibling:null);Ze(ut,ut.current&1);break;case 19:if(p=(c&a.childLanes)!==0,i.flags&128){if(p)return H_(i,a,c);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ze(ut,ut.current),p)break;return null;case 22:case 23:return a.lanes=0,V_(i,a,c)}return _s(i,a,c)}var q_,tm,K_,G_;q_=function(i,a){for(var c=a.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},tm=function(){},K_=function(i,a,c,p){var y=i.memoizedProps;if(y!==p){i=a.stateNode,oo(Vr.current);var x=null;switch(c){case"input":y=lr(i,y),p=lr(i,p),x=[];break;case"select":y=te({},y,{value:void 0}),p=te({},p,{value:void 0}),x=[];break;case"textarea":y=Nl(i,y),p=Nl(i,p),x=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=dd)}Vl(c,p);var k;c=null;for(X in y)if(!p.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var L=y[X];for(k in L)L.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?x||(x=[]):(x=x||[]).push(X,null));for(X in p){var U=p[X];if(L=y!=null?y[X]:void 0,p.hasOwnProperty(X)&&U!==L&&(U!=null||L!=null))if(X==="style")if(L){for(k in L)!L.hasOwnProperty(k)||U&&U.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in U)U.hasOwnProperty(k)&&L[k]!==U[k]&&(c||(c={}),c[k]=U[k])}else c||(x||(x=[]),x.push(X,c)),c=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(x=x||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(x=x||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&rt("scroll",i),x||L===U||(x=[])):(x=x||[]).push(X,U))}c&&(x=x||[]).push("style",c);var X=x;(a.updateQueue=X)&&(a.flags|=4)}},G_=function(i,a,c,p){c!==p&&(a.flags|=4)};function vu(i,a){if(!ot)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var p=null;c!==null;)c.alternate!==null&&(p=c),c=c.sibling;p===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function nn(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,p=0;if(a)for(var y=i.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)c|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=c,a}function oI(i,a,c){var p=a.pendingProps;switch(Ep(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(a),null;case 1:return xn(a.type)&&fd(),nn(a),null;case 3:return p=a.stateNode,Sa(),st(wn),st(en),Lp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(vd(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,_r!==null&&(hm(_r),_r=null))),tm(i,a),nn(a),null;case 5:Dp(a);var y=oo(fu.current);if(c=a.type,i!==null&&a.stateNode!=null)K_(i,a,c,p,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return nn(a),null}if(i=oo(Vr.current),vd(a)){p=a.stateNode,c=a.type;var x=a.memoizedProps;switch(p[Mr]=a,p[lu]=x,i=(a.mode&1)!==0,c){case"dialog":rt("cancel",p),rt("close",p);break;case"iframe":case"object":case"embed":rt("load",p);break;case"video":case"audio":for(y=0;y<iu.length;y++)rt(iu[y],p);break;case"source":rt("error",p);break;case"img":case"image":case"link":rt("error",p),rt("load",p);break;case"details":rt("toggle",p);break;case"input":ns(p,x),rt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!x.multiple},rt("invalid",p);break;case"textarea":Bo(p,x),rt("invalid",p)}Vl(c,x),y=null;for(var k in x)if(x.hasOwnProperty(k)){var L=x[k];k==="children"?typeof L=="string"?p.textContent!==L&&(x.suppressHydrationWarning!==!0&&cd(p.textContent,L,i),y=["children",L]):typeof L=="number"&&p.textContent!==""+L&&(x.suppressHydrationWarning!==!0&&cd(p.textContent,L,i),y=["children",""+L]):s.hasOwnProperty(k)&&L!=null&&k==="onScroll"&&rt("scroll",p)}switch(c){case"input":Bn(p),Lc(p,x,!0);break;case"textarea":Bn(p),jl(p);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(p.onclick=dd)}p=y,a.updateQueue=p,p!==null&&(a.flags|=4)}else{k=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Ct(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=k.createElement(c,{is:p.is}):(i=k.createElement(c),c==="select"&&(k=i,p.multiple?k.multiple=!0:p.size&&(k.size=p.size))):i=k.createElementNS(i,c),i[Mr]=a,i[lu]=p,q_(i,a,!1,!1),a.stateNode=i;e:{switch(k=$l(c,p),c){case"dialog":rt("cancel",i),rt("close",i),y=p;break;case"iframe":case"object":case"embed":rt("load",i),y=p;break;case"video":case"audio":for(y=0;y<iu.length;y++)rt(iu[y],i);y=p;break;case"source":rt("error",i),y=p;break;case"img":case"image":case"link":rt("error",i),rt("load",i),y=p;break;case"details":rt("toggle",i),y=p;break;case"input":ns(i,p),y=lr(i,p),rt("invalid",i);break;case"option":y=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},y=te({},p,{value:void 0}),rt("invalid",i);break;case"textarea":Bo(i,p),y=Nl(i,p),rt("invalid",i);break;default:y=p}Vl(c,y),L=y;for(x in L)if(L.hasOwnProperty(x)){var U=L[x];x==="style"?Ll(i,U):x==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Dl(i,U)):x==="children"?typeof U=="string"?(c!=="textarea"||U!=="")&&Ls(i,U):typeof U=="number"&&Ls(i,""+U):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(s.hasOwnProperty(x)?U!=null&&x==="onScroll"&&rt("scroll",i):U!=null&&F(i,x,U,k))}switch(c){case"input":Bn(i),Lc(i,p,!1);break;case"textarea":Bn(i),jl(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Te(p.value));break;case"select":i.multiple=!!p.multiple,x=p.value,x!=null?is(i,!!p.multiple,x,!1):p.defaultValue!=null&&is(i,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=dd)}switch(c){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return nn(a),null;case 6:if(i&&a.stateNode!=null)G_(i,a,i.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(c=oo(fu.current),oo(Vr.current),vd(a)){if(p=a.stateNode,c=a.memoizedProps,p[Mr]=a,(x=p.nodeValue!==c)&&(i=On,i!==null))switch(i.tag){case 3:cd(p.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&cd(p.nodeValue,c,(i.mode&1)!==0)}x&&(a.flags|=4)}else p=(c.nodeType===9?c:c.ownerDocument).createTextNode(p),p[Mr]=a,a.stateNode=p}return nn(a),null;case 13:if(st(ut),p=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ot&&Ln!==null&&a.mode&1&&!(a.flags&128))Yv(),xa(),a.flags|=98560,x=!1;else if(x=vd(a),p!==null&&p.dehydrated!==null){if(i===null){if(!x)throw Error(t(318));if(x=a.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(t(317));x[Mr]=a}else xa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;nn(a),x=!1}else _r!==null&&(hm(_r),_r=null),x=!0;if(!x)return a.flags&65536?a:null}return a.flags&128?(a.lanes=c,a):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(a.child.flags|=8192,a.mode&1&&(i===null||ut.current&1?Rt===0&&(Rt=3):mm())),a.updateQueue!==null&&(a.flags|=4),nn(a),null);case 4:return Sa(),tm(i,a),i===null&&ou(a.stateNode.containerInfo),nn(a),null;case 10:return Ap(a.type._context),nn(a),null;case 17:return xn(a.type)&&fd(),nn(a),null;case 19:if(st(ut),x=a.memoizedState,x===null)return nn(a),null;if(p=(a.flags&128)!==0,k=x.rendering,k===null)if(p)vu(x,!1);else{if(Rt!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(k=Td(i),k!==null){for(a.flags|=128,vu(x,!1),p=k.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=c,c=a.child;c!==null;)x=c,i=p,x.flags&=14680066,k=x.alternate,k===null?(x.childLanes=0,x.lanes=i,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=k.childLanes,x.lanes=k.lanes,x.child=k.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=k.memoizedProps,x.memoizedState=k.memoizedState,x.updateQueue=k.updateQueue,x.type=k.type,i=k.dependencies,x.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Ze(ut,ut.current&1|2),a.child}i=i.sibling}x.tail!==null&&Xe()>Aa&&(a.flags|=128,p=!0,vu(x,!1),a.lanes=4194304)}else{if(!p)if(i=Td(k),i!==null){if(a.flags|=128,p=!0,c=i.updateQueue,c!==null&&(a.updateQueue=c,a.flags|=4),vu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!k.alternate&&!ot)return nn(a),null}else 2*Xe()-x.renderingStartTime>Aa&&c!==1073741824&&(a.flags|=128,p=!0,vu(x,!1),a.lanes=4194304);x.isBackwards?(k.sibling=a.child,a.child=k):(c=x.last,c!==null?c.sibling=k:a.child=k,x.last=k)}return x.tail!==null?(a=x.tail,x.rendering=a,x.tail=a.sibling,x.renderingStartTime=Xe(),a.sibling=null,c=ut.current,Ze(ut,p?c&1|2:c&1),a):(nn(a),null);case 22:case 23:return pm(),p=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(a.flags|=8192),p&&a.mode&1?Mn&1073741824&&(nn(a),a.subtreeFlags&6&&(a.flags|=8192)):nn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function aI(i,a){switch(Ep(a),a.tag){case 1:return xn(a.type)&&fd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Sa(),st(wn),st(en),Lp(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return Dp(a),null;case 13:if(st(ut),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));xa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return st(ut),null;case 4:return Sa(),null;case 10:return Ap(a.type._context),null;case 22:case 23:return pm(),null;case 24:return null;default:return null}}var jd=!1,rn=!1,lI=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ca(i,a){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(p){ft(i,a,p)}else c.current=null}function nm(i,a,c){try{c()}catch(p){ft(i,a,p)}}var Q_=!1;function uI(i,a){if(pp=Ws,i=Cv(),op(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var p=c.getSelection&&c.getSelection();if(p&&p.rangeCount!==0){c=p.anchorNode;var y=p.anchorOffset,x=p.focusNode;p=p.focusOffset;try{c.nodeType,x.nodeType}catch{c=null;break e}var k=0,L=-1,U=-1,X=0,ae=0,ue=i,oe=null;t:for(;;){for(var me;ue!==c||y!==0&&ue.nodeType!==3||(L=k+y),ue!==x||p!==0&&ue.nodeType!==3||(U=k+p),ue.nodeType===3&&(k+=ue.nodeValue.length),(me=ue.firstChild)!==null;)oe=ue,ue=me;for(;;){if(ue===i)break t;if(oe===c&&++X===y&&(L=k),oe===x&&++ae===p&&(U=k),(me=ue.nextSibling)!==null)break;ue=oe,oe=ue.parentNode}ue=me}c=L===-1||U===-1?null:{start:L,end:U}}else c=null}c=c||{start:0,end:0}}else c=null;for(mp={focusedElem:i,selectionRange:c},Ws=!1,ve=a;ve!==null;)if(a=ve,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ve=i;else for(;ve!==null;){a=ve;try{var _e=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var xe=_e.memoizedProps,wt=_e.memoizedState,G=a.stateNode,H=G.getSnapshotBeforeUpdate(a.elementType===a.type?xe:wr(a.type,xe),wt);G.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){ft(a,a.return,de)}if(i=a.sibling,i!==null){i.return=a.return,ve=i;break}ve=a.return}return _e=Q_,Q_=!1,_e}function _u(i,a,c){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&i)===i){var x=y.destroy;y.destroy=void 0,x!==void 0&&nm(a,c,x)}y=y.next}while(y!==p)}}function Dd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var c=a=a.next;do{if((c.tag&i)===i){var p=c.create;c.destroy=p()}c=c.next}while(c!==a)}}function rm(i){var a=i.ref;if(a!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof a=="function"?a(i):a.current=i}}function J_(i){var a=i.alternate;a!==null&&(i.alternate=null,J_(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Mr],delete a[lu],delete a[_p],delete a[HA],delete a[qA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Y_(i){return i.tag===5||i.tag===3||i.tag===4}function X_(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Y_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function sm(i,a,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?c.nodeType===8?c.parentNode.insertBefore(i,a):c.insertBefore(i,a):(c.nodeType===8?(a=c.parentNode,a.insertBefore(i,c)):(a=c,a.appendChild(i)),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=dd));else if(p!==4&&(i=i.child,i!==null))for(sm(i,a,c),i=i.sibling;i!==null;)sm(i,a,c),i=i.sibling}function im(i,a,c){var p=i.tag;if(p===5||p===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(im(i,a,c),i=i.sibling;i!==null;)im(i,a,c),i=i.sibling}var qt=null,xr=!1;function Zs(i,a,c){for(c=c.child;c!==null;)Z_(i,a,c),c=c.sibling}function Z_(i,a,c){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Gi,c)}catch{}switch(c.tag){case 5:rn||Ca(c,a);case 6:var p=qt,y=xr;qt=null,Zs(i,a,c),qt=p,xr=y,qt!==null&&(xr?(i=qt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):qt.removeChild(c.stateNode));break;case 18:qt!==null&&(xr?(i=qt,c=c.stateNode,i.nodeType===8?vp(i.parentNode,c):i.nodeType===1&&vp(i,c),gr(i)):vp(qt,c.stateNode));break;case 4:p=qt,y=xr,qt=c.stateNode.containerInfo,xr=!0,Zs(i,a,c),qt=p,xr=y;break;case 0:case 11:case 14:case 15:if(!rn&&(p=c.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var x=y,k=x.destroy;x=x.tag,k!==void 0&&(x&2||x&4)&&nm(c,a,k),y=y.next}while(y!==p)}Zs(i,a,c);break;case 1:if(!rn&&(Ca(c,a),p=c.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=c.memoizedProps,p.state=c.memoizedState,p.componentWillUnmount()}catch(L){ft(c,a,L)}Zs(i,a,c);break;case 21:Zs(i,a,c);break;case 22:c.mode&1?(rn=(p=rn)||c.memoizedState!==null,Zs(i,a,c),rn=p):Zs(i,a,c);break;default:Zs(i,a,c)}}function ew(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new lI),a.forEach(function(p){var y=vI.bind(null,i,p);c.has(p)||(c.add(p),p.then(y,y))})}}function br(i,a){var c=a.deletions;if(c!==null)for(var p=0;p<c.length;p++){var y=c[p];try{var x=i,k=a,L=k;e:for(;L!==null;){switch(L.tag){case 5:qt=L.stateNode,xr=!1;break e;case 3:qt=L.stateNode.containerInfo,xr=!0;break e;case 4:qt=L.stateNode.containerInfo,xr=!0;break e}L=L.return}if(qt===null)throw Error(t(160));Z_(x,k,y),qt=null,xr=!1;var U=y.alternate;U!==null&&(U.return=null),y.return=null}catch(X){ft(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)tw(a,i),a=a.sibling}function tw(i,a){var c=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(br(a,i),Fr(i),p&4){try{_u(3,i,i.return),Dd(3,i)}catch(xe){ft(i,i.return,xe)}try{_u(5,i,i.return)}catch(xe){ft(i,i.return,xe)}}break;case 1:br(a,i),Fr(i),p&512&&c!==null&&Ca(c,c.return);break;case 5:if(br(a,i),Fr(i),p&512&&c!==null&&Ca(c,c.return),i.flags&32){var y=i.stateNode;try{Ls(y,"")}catch(xe){ft(i,i.return,xe)}}if(p&4&&(y=i.stateNode,y!=null)){var x=i.memoizedProps,k=c!==null?c.memoizedProps:x,L=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{L==="input"&&x.type==="radio"&&x.name!=null&&Lt(y,x),$l(L,k);var X=$l(L,x);for(k=0;k<U.length;k+=2){var ae=U[k],ue=U[k+1];ae==="style"?Ll(y,ue):ae==="dangerouslySetInnerHTML"?Dl(y,ue):ae==="children"?Ls(y,ue):F(y,ae,ue,X)}switch(L){case"input":rs(y,x);break;case"textarea":zo(y,x);break;case"select":var oe=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!x.multiple;var me=x.value;me!=null?is(y,!!x.multiple,me,!1):oe!==!!x.multiple&&(x.defaultValue!=null?is(y,!!x.multiple,x.defaultValue,!0):is(y,!!x.multiple,x.multiple?[]:"",!1))}y[lu]=x}catch(xe){ft(i,i.return,xe)}}break;case 6:if(br(a,i),Fr(i),p&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,x=i.memoizedProps;try{y.nodeValue=x}catch(xe){ft(i,i.return,xe)}}break;case 3:if(br(a,i),Fr(i),p&4&&c!==null&&c.memoizedState.isDehydrated)try{gr(a.containerInfo)}catch(xe){ft(i,i.return,xe)}break;case 4:br(a,i),Fr(i);break;case 13:br(a,i),Fr(i),y=i.child,y.flags&8192&&(x=y.memoizedState!==null,y.stateNode.isHidden=x,!x||y.alternate!==null&&y.alternate.memoizedState!==null||(lm=Xe())),p&4&&ew(i);break;case 22:if(ae=c!==null&&c.memoizedState!==null,i.mode&1?(rn=(X=rn)||ae,br(a,i),rn=X):br(a,i),Fr(i),p&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!ae&&i.mode&1)for(ve=i,ae=i.child;ae!==null;){for(ue=ve=ae;ve!==null;){switch(oe=ve,me=oe.child,oe.tag){case 0:case 11:case 14:case 15:_u(4,oe,oe.return);break;case 1:Ca(oe,oe.return);var _e=oe.stateNode;if(typeof _e.componentWillUnmount=="function"){p=oe,c=oe.return;try{a=p,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(xe){ft(p,c,xe)}}break;case 5:Ca(oe,oe.return);break;case 22:if(oe.memoizedState!==null){sw(ue);continue}}me!==null?(me.return=oe,ve=me):sw(ue)}ae=ae.sibling}e:for(ae=null,ue=i;;){if(ue.tag===5){if(ae===null){ae=ue;try{y=ue.stateNode,X?(x=y.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(L=ue.stateNode,U=ue.memoizedProps.style,k=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=Ol("display",k))}catch(xe){ft(i,i.return,xe)}}}else if(ue.tag===6){if(ae===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(xe){ft(i,i.return,xe)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;ae===ue&&(ae=null),ue=ue.return}ae===ue&&(ae=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:br(a,i),Fr(i),p&4&&ew(i);break;case 21:break;default:br(a,i),Fr(i)}}function Fr(i){var a=i.flags;if(a&2){try{e:{for(var c=i.return;c!==null;){if(Y_(c)){var p=c;break e}c=c.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(Ls(y,""),p.flags&=-33);var x=X_(i);im(i,x,y);break;case 3:case 4:var k=p.stateNode.containerInfo,L=X_(i);sm(i,L,k);break;default:throw Error(t(161))}}catch(U){ft(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function cI(i,a,c){ve=i,nw(i)}function nw(i,a,c){for(var p=(i.mode&1)!==0;ve!==null;){var y=ve,x=y.child;if(y.tag===22&&p){var k=y.memoizedState!==null||jd;if(!k){var L=y.alternate,U=L!==null&&L.memoizedState!==null||rn;L=jd;var X=rn;if(jd=k,(rn=U)&&!X)for(ve=y;ve!==null;)k=ve,U=k.child,k.tag===22&&k.memoizedState!==null?iw(y):U!==null?(U.return=k,ve=U):iw(y);for(;x!==null;)ve=x,nw(x),x=x.sibling;ve=y,jd=L,rn=X}rw(i)}else y.subtreeFlags&8772&&x!==null?(x.return=y,ve=x):rw(i)}}function rw(i){for(;ve!==null;){var a=ve;if(a.flags&8772){var c=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:rn||Dd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!rn)if(c===null)p.componentDidMount();else{var y=a.elementType===a.type?c.memoizedProps:wr(a.type,c.memoizedProps);p.componentDidUpdate(y,c.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var x=a.updateQueue;x!==null&&s_(a,x,p);break;case 3:var k=a.updateQueue;if(k!==null){if(c=null,a.child!==null)switch(a.child.tag){case 5:c=a.child.stateNode;break;case 1:c=a.child.stateNode}s_(a,k,c)}break;case 5:var L=a.stateNode;if(c===null&&a.flags&4){c=L;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&c.focus();break;case"img":U.src&&(c.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var ae=X.memoizedState;if(ae!==null){var ue=ae.dehydrated;ue!==null&&gr(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rn||a.flags&512&&rm(a)}catch(oe){ft(a,a.return,oe)}}if(a===i){ve=null;break}if(c=a.sibling,c!==null){c.return=a.return,ve=c;break}ve=a.return}}function sw(i){for(;ve!==null;){var a=ve;if(a===i){ve=null;break}var c=a.sibling;if(c!==null){c.return=a.return,ve=c;break}ve=a.return}}function iw(i){for(;ve!==null;){var a=ve;try{switch(a.tag){case 0:case 11:case 15:var c=a.return;try{Dd(4,a)}catch(U){ft(a,c,U)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var y=a.return;try{p.componentDidMount()}catch(U){ft(a,y,U)}}var x=a.return;try{rm(a)}catch(U){ft(a,x,U)}break;case 5:var k=a.return;try{rm(a)}catch(U){ft(a,k,U)}}}catch(U){ft(a,a.return,U)}if(a===i){ve=null;break}var L=a.sibling;if(L!==null){L.return=a.return,ve=L;break}ve=a.return}}var dI=Math.ceil,Od=q.ReactCurrentDispatcher,om=q.ReactCurrentOwner,Yn=q.ReactCurrentBatchConfig,He=0,$t=null,St=null,Kt=0,Mn=0,Pa=Gs(0),Rt=0,wu=null,lo=0,Ld=0,am=0,xu=null,En=null,lm=0,Aa=1/0,ws=null,Md=!1,um=null,ei=null,Vd=!1,ti=null,$d=0,bu=0,cm=null,Fd=-1,Ud=0;function mn(){return He&6?Xe():Fd!==-1?Fd:Fd=Xe()}function ni(i){return i.mode&1?He&2&&Kt!==0?Kt&-Kt:GA.transition!==null?(Ud===0&&(Ud=Ji()),Ud):(i=Be,i!==0||(i=window.event,i=i===void 0?16:Jl(i.type)),i):1}function Er(i,a,c,p){if(50<bu)throw bu=0,cm=null,Error(t(185));Fs(i,c,p),(!(He&2)||i!==$t)&&(i===$t&&(!(He&2)&&(Ld|=c),Rt===4&&ri(i,Kt)),Tn(i,p),c===1&&He===0&&!(a.mode&1)&&(Aa=Xe()+500,md&&Js()))}function Tn(i,a){var c=i.callbackNode;ls(i,a);var p=Qi(i,i===$t?Kt:0);if(p===0)c!==null&&Hl(c),i.callbackNode=null,i.callbackPriority=0;else if(a=p&-p,i.callbackPriority!==a){if(c!=null&&Hl(c),a===1)i.tag===0?KA(aw.bind(null,i)):qv(aw.bind(null,i)),zA(function(){!(He&6)&&Js()}),c=null;else{switch(Bs(p)){case 1:c=Ki;break;case 4:c=Ms;break;case 16:c=Wn;break;case 536870912:c=Uc;break;default:c=Wn}c=mw(c,ow.bind(null,i))}i.callbackPriority=a,i.callbackNode=c}}function ow(i,a){if(Fd=-1,Ud=0,He&6)throw Error(t(327));var c=i.callbackNode;if(Ia()&&i.callbackNode!==c)return null;var p=Qi(i,i===$t?Kt:0);if(p===0)return null;if(p&30||p&i.expiredLanes||a)a=Bd(i,p);else{a=p;var y=He;He|=2;var x=uw();($t!==i||Kt!==a)&&(ws=null,Aa=Xe()+500,co(i,a));do try{pI();break}catch(L){lw(i,L)}while(!0);Pp(),Od.current=x,He=y,St!==null?a=0:($t=null,Kt=0,a=Rt)}if(a!==0){if(a===2&&(y=Nn(i),y!==0&&(p=y,a=dm(i,y))),a===1)throw c=wu,co(i,0),ri(i,p),Tn(i,Xe()),c;if(a===6)ri(i,p);else{if(y=i.current.alternate,!(p&30)&&!hI(y)&&(a=Bd(i,p),a===2&&(x=Nn(i),x!==0&&(p=x,a=dm(i,x))),a===1))throw c=wu,co(i,0),ri(i,p),Tn(i,Xe()),c;switch(i.finishedWork=y,i.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:ho(i,En,ws);break;case 3:if(ri(i,p),(p&130023424)===p&&(a=lm+500-Xe(),10<a)){if(Qi(i,0)!==0)break;if(y=i.suspendedLanes,(y&p)!==p){mn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=yp(ho.bind(null,i,En,ws),a);break}ho(i,En,ws);break;case 4:if(ri(i,p),(p&4194240)===p)break;for(a=i.eventTimes,y=-1;0<p;){var k=31-hn(p);x=1<<k,k=a[k],k>y&&(y=k),p&=~x}if(p=y,p=Xe()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*dI(p/1960))-p,10<p){i.timeoutHandle=yp(ho.bind(null,i,En,ws),p);break}ho(i,En,ws);break;case 5:ho(i,En,ws);break;default:throw Error(t(329))}}}return Tn(i,Xe()),i.callbackNode===c?ow.bind(null,i):null}function dm(i,a){var c=xu;return i.current.memoizedState.isDehydrated&&(co(i,a).flags|=256),i=Bd(i,a),i!==2&&(a=En,En=c,a!==null&&hm(a)),i}function hm(i){En===null?En=i:En.push.apply(En,i)}function hI(i){for(var a=i;;){if(a.flags&16384){var c=a.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var p=0;p<c.length;p++){var y=c[p],x=y.getSnapshot;y=y.value;try{if(!vr(x(),y))return!1}catch{return!1}}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ri(i,a){for(a&=~am,a&=~Ld,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var c=31-hn(a),p=1<<c;i[c]=-1,a&=~p}}function aw(i){if(He&6)throw Error(t(327));Ia();var a=Qi(i,0);if(!(a&1))return Tn(i,Xe()),null;var c=Bd(i,a);if(i.tag!==0&&c===2){var p=Nn(i);p!==0&&(a=p,c=dm(i,p))}if(c===1)throw c=wu,co(i,0),ri(i,a),Tn(i,Xe()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,ho(i,En,ws),Tn(i,Xe()),null}function fm(i,a){var c=He;He|=1;try{return i(a)}finally{He=c,He===0&&(Aa=Xe()+500,md&&Js())}}function uo(i){ti!==null&&ti.tag===0&&!(He&6)&&Ia();var a=He;He|=1;var c=Yn.transition,p=Be;try{if(Yn.transition=null,Be=1,i)return i()}finally{Be=p,Yn.transition=c,He=a,!(He&6)&&Js()}}function pm(){Mn=Pa.current,st(Pa)}function co(i,a){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,BA(c)),St!==null)for(c=St.return;c!==null;){var p=c;switch(Ep(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&fd();break;case 3:Sa(),st(wn),st(en),Lp();break;case 5:Dp(p);break;case 4:Sa();break;case 13:st(ut);break;case 19:st(ut);break;case 10:Ap(p.type._context);break;case 22:case 23:pm()}c=c.return}if($t=i,St=i=si(i.current,null),Kt=Mn=a,Rt=0,wu=null,am=Ld=lo=0,En=xu=null,io!==null){for(a=0;a<io.length;a++)if(c=io[a],p=c.interleaved,p!==null){c.interleaved=null;var y=p.next,x=c.pending;if(x!==null){var k=x.next;x.next=y,p.next=k}c.pending=p}io=null}return i}function lw(i,a){do{var c=St;try{if(Pp(),Sd.current=Ad,kd){for(var p=ct.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}kd=!1}if(ao=0,Vt=It=ct=null,pu=!1,mu=0,om.current=null,c===null||c.return===null){Rt=1,wu=a,St=null;break}e:{var x=i,k=c.return,L=c,U=a;if(a=Kt,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,ae=L,ue=ae.tag;if(!(ae.mode&1)&&(ue===0||ue===11||ue===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var me=j_(k);if(me!==null){me.flags&=-257,D_(me,k,L,x,a),me.mode&1&&N_(x,X,a),a=me,U=X;var _e=a.updateQueue;if(_e===null){var xe=new Set;xe.add(U),a.updateQueue=xe}else _e.add(U);break e}else{if(!(a&1)){N_(x,X,a),mm();break e}U=Error(t(426))}}else if(ot&&L.mode&1){var wt=j_(k);if(wt!==null){!(wt.flags&65536)&&(wt.flags|=256),D_(wt,k,L,x,a),kp(ka(U,L));break e}}x=U=ka(U,L),Rt!==4&&(Rt=2),xu===null?xu=[x]:xu.push(x),x=k;do{switch(x.tag){case 3:x.flags|=65536,a&=-a,x.lanes|=a;var G=I_(x,U,a);r_(x,G);break e;case 1:L=U;var H=x.type,Y=x.stateNode;if(!(x.flags&128)&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(ei===null||!ei.has(Y)))){x.flags|=65536,a&=-a,x.lanes|=a;var de=R_(x,L,a);r_(x,de);break e}}x=x.return}while(x!==null)}dw(c)}catch(be){a=be,St===c&&c!==null&&(St=c=c.return);continue}break}while(!0)}function uw(){var i=Od.current;return Od.current=Ad,i===null?Ad:i}function mm(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),$t===null||!(lo&268435455)&&!(Ld&268435455)||ri($t,Kt)}function Bd(i,a){var c=He;He|=2;var p=uw();($t!==i||Kt!==a)&&(ws=null,co(i,a));do try{fI();break}catch(y){lw(i,y)}while(!0);if(Pp(),He=c,Od.current=p,St!==null)throw Error(t(261));return $t=null,Kt=0,Rt}function fI(){for(;St!==null;)cw(St)}function pI(){for(;St!==null&&!$c();)cw(St)}function cw(i){var a=pw(i.alternate,i,Mn);i.memoizedProps=i.pendingProps,a===null?dw(i):St=a,om.current=null}function dw(i){var a=i;do{var c=a.alternate;if(i=a.return,a.flags&32768){if(c=aI(c,a),c!==null){c.flags&=32767,St=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Rt=6,St=null;return}}else if(c=oI(c,a,Mn),c!==null){St=c;return}if(a=a.sibling,a!==null){St=a;return}St=a=i}while(a!==null);Rt===0&&(Rt=5)}function ho(i,a,c){var p=Be,y=Yn.transition;try{Yn.transition=null,Be=1,mI(i,a,c,p)}finally{Yn.transition=y,Be=p}return null}function mI(i,a,c,p){do Ia();while(ti!==null);if(He&6)throw Error(t(327));c=i.finishedWork;var y=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var x=c.lanes|c.childLanes;if(Ye(i,x),i===$t&&(St=$t=null,Kt=0),!(c.subtreeFlags&2064)&&!(c.flags&2064)||Vd||(Vd=!0,mw(Wn,function(){return Ia(),null})),x=(c.flags&15990)!==0,c.subtreeFlags&15990||x){x=Yn.transition,Yn.transition=null;var k=Be;Be=1;var L=He;He|=4,om.current=null,uI(i,c),tw(c,i),OA(mp),Ws=!!pp,mp=pp=null,i.current=c,cI(c),Xf(),He=L,Be=k,Yn.transition=x}else i.current=c;if(Vd&&(Vd=!1,ti=i,$d=y),x=i.pendingLanes,x===0&&(ei=null),Bc(c.stateNode),Tn(i,Xe()),a!==null)for(p=i.onRecoverableError,c=0;c<a.length;c++)y=a[c],p(y.value,{componentStack:y.stack,digest:y.digest});if(Md)throw Md=!1,i=um,um=null,i;return $d&1&&i.tag!==0&&Ia(),x=i.pendingLanes,x&1?i===cm?bu++:(bu=0,cm=i):bu=0,Js(),null}function Ia(){if(ti!==null){var i=Bs($d),a=Yn.transition,c=Be;try{if(Yn.transition=null,Be=16>i?16:i,ti===null)var p=!1;else{if(i=ti,ti=null,$d=0,He&6)throw Error(t(331));var y=He;for(He|=4,ve=i.current;ve!==null;){var x=ve,k=x.child;if(ve.flags&16){var L=x.deletions;if(L!==null){for(var U=0;U<L.length;U++){var X=L[U];for(ve=X;ve!==null;){var ae=ve;switch(ae.tag){case 0:case 11:case 15:_u(8,ae,x)}var ue=ae.child;if(ue!==null)ue.return=ae,ve=ue;else for(;ve!==null;){ae=ve;var oe=ae.sibling,me=ae.return;if(J_(ae),ae===X){ve=null;break}if(oe!==null){oe.return=me,ve=oe;break}ve=me}}}var _e=x.alternate;if(_e!==null){var xe=_e.child;if(xe!==null){_e.child=null;do{var wt=xe.sibling;xe.sibling=null,xe=wt}while(xe!==null)}}ve=x}}if(x.subtreeFlags&2064&&k!==null)k.return=x,ve=k;else e:for(;ve!==null;){if(x=ve,x.flags&2048)switch(x.tag){case 0:case 11:case 15:_u(9,x,x.return)}var G=x.sibling;if(G!==null){G.return=x.return,ve=G;break e}ve=x.return}}var H=i.current;for(ve=H;ve!==null;){k=ve;var Y=k.child;if(k.subtreeFlags&2064&&Y!==null)Y.return=k,ve=Y;else e:for(k=H;ve!==null;){if(L=ve,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:Dd(9,L)}}catch(be){ft(L,L.return,be)}if(L===k){ve=null;break e}var de=L.sibling;if(de!==null){de.return=L.return,ve=de;break e}ve=L.return}}if(He=y,Js(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Gi,i)}catch{}p=!0}return p}finally{Be=c,Yn.transition=a}}return!1}function hw(i,a,c){a=ka(c,a),a=I_(i,a,1),i=Xs(i,a,1),a=mn(),i!==null&&(Fs(i,1,a),Tn(i,a))}function ft(i,a,c){if(i.tag===3)hw(i,i,c);else for(;a!==null;){if(a.tag===3){hw(a,i,c);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(ei===null||!ei.has(p))){i=ka(c,i),i=R_(a,i,1),a=Xs(a,i,1),i=mn(),a!==null&&(Fs(a,1,i),Tn(a,i));break}}a=a.return}}function gI(i,a,c){var p=i.pingCache;p!==null&&p.delete(a),a=mn(),i.pingedLanes|=i.suspendedLanes&c,$t===i&&(Kt&c)===c&&(Rt===4||Rt===3&&(Kt&130023424)===Kt&&500>Xe()-lm?co(i,0):am|=c),Tn(i,a)}function fw(i,a){a===0&&(i.mode&1?(a=Zo,Zo<<=1,!(Zo&130023424)&&(Zo=4194304)):a=1);var c=mn();i=ys(i,a),i!==null&&(Fs(i,a,c),Tn(i,c))}function yI(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),fw(i,c)}function vI(i,a){var c=0;switch(i.tag){case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(c=y.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),fw(i,c)}var pw;pw=function(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps||wn.current)bn=!0;else{if(!(i.lanes&c)&&!(a.flags&128))return bn=!1,iI(i,a,c);bn=!!(i.flags&131072)}else bn=!1,ot&&a.flags&1048576&&Kv(a,yd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;Nd(i,a),i=a.pendingProps;var y=va(a,en.current);Ta(a,c),y=$p(null,a,p,i,y,c);var x=Fp();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,xn(p)?(x=!0,pd(a)):x=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Np(a),y.updater=Id,a.stateNode=y,y._reactInternals=a,qp(a,p,i,c),a=Jp(null,a,p,!0,x,c)):(a.tag=0,ot&&x&&bp(a),pn(null,a,y,c),a=a.child),a;case 16:p=a.elementType;e:{switch(Nd(i,a),i=a.pendingProps,y=p._init,p=y(p._payload),a.type=p,y=a.tag=wI(p),i=wr(p,i),y){case 0:a=Qp(null,a,p,i,c);break e;case 1:a=F_(null,a,p,i,c);break e;case 11:a=O_(null,a,p,i,c);break e;case 14:a=L_(null,a,p,wr(p.type,i),c);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:wr(p,y),Qp(i,a,p,y,c);case 1:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:wr(p,y),F_(i,a,p,y,c);case 3:e:{if(U_(a),i===null)throw Error(t(387));p=a.pendingProps,x=a.memoizedState,y=x.element,n_(i,a),Ed(a,p,null,c);var k=a.memoizedState;if(p=k.element,x.isDehydrated)if(x={element:p,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){y=ka(Error(t(423)),a),a=B_(i,a,p,c,y);break e}else if(p!==y){y=ka(Error(t(424)),a),a=B_(i,a,p,c,y);break e}else for(Ln=Ks(a.stateNode.containerInfo.firstChild),On=a,ot=!0,_r=null,c=e_(a,null,p,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(xa(),p===y){a=_s(i,a,c);break e}pn(i,a,p,c)}a=a.child}return a;case 5:return i_(a),i===null&&Sp(a),p=a.type,y=a.pendingProps,x=i!==null?i.memoizedProps:null,k=y.children,gp(p,y)?k=null:x!==null&&gp(p,x)&&(a.flags|=32),$_(i,a),pn(i,a,k,c),a.child;case 6:return i===null&&Sp(a),null;case 13:return z_(i,a,c);case 4:return jp(a,a.stateNode.containerInfo),p=a.pendingProps,i===null?a.child=ba(a,null,p,c):pn(i,a,p,c),a.child;case 11:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:wr(p,y),O_(i,a,p,y,c);case 7:return pn(i,a,a.pendingProps,c),a.child;case 8:return pn(i,a,a.pendingProps.children,c),a.child;case 12:return pn(i,a,a.pendingProps.children,c),a.child;case 10:e:{if(p=a.type._context,y=a.pendingProps,x=a.memoizedProps,k=y.value,Ze(wd,p._currentValue),p._currentValue=k,x!==null)if(vr(x.value,k)){if(x.children===y.children&&!wn.current){a=_s(i,a,c);break e}}else for(x=a.child,x!==null&&(x.return=a);x!==null;){var L=x.dependencies;if(L!==null){k=x.child;for(var U=L.firstContext;U!==null;){if(U.context===p){if(x.tag===1){U=vs(-1,c&-c),U.tag=2;var X=x.updateQueue;if(X!==null){X=X.shared;var ae=X.pending;ae===null?U.next=U:(U.next=ae.next,ae.next=U),X.pending=U}}x.lanes|=c,U=x.alternate,U!==null&&(U.lanes|=c),Ip(x.return,c,a),L.lanes|=c;break}U=U.next}}else if(x.tag===10)k=x.type===a.type?null:x.child;else if(x.tag===18){if(k=x.return,k===null)throw Error(t(341));k.lanes|=c,L=k.alternate,L!==null&&(L.lanes|=c),Ip(k,c,a),k=x.sibling}else k=x.child;if(k!==null)k.return=x;else for(k=x;k!==null;){if(k===a){k=null;break}if(x=k.sibling,x!==null){x.return=k.return,k=x;break}k=k.return}x=k}pn(i,a,y.children,c),a=a.child}return a;case 9:return y=a.type,p=a.pendingProps.children,Ta(a,c),y=Qn(y),p=p(y),a.flags|=1,pn(i,a,p,c),a.child;case 14:return p=a.type,y=wr(p,a.pendingProps),y=wr(p.type,y),L_(i,a,p,y,c);case 15:return M_(i,a,a.type,a.pendingProps,c);case 17:return p=a.type,y=a.pendingProps,y=a.elementType===p?y:wr(p,y),Nd(i,a),a.tag=1,xn(p)?(i=!0,pd(a)):i=!1,Ta(a,c),P_(a,p,y),qp(a,p,y,c),Jp(null,a,p,!0,i,c);case 19:return H_(i,a,c);case 22:return V_(i,a,c)}throw Error(t(156,a.tag))};function mw(i,a){return Yo(i,a)}function _I(i,a,c,p){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(i,a,c,p){return new _I(i,a,c,p)}function gm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function wI(i){if(typeof i=="function")return gm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z)return 11;if(i===pe)return 14}return 2}function si(i,a){var c=i.alternate;return c===null?(c=Xn(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function zd(i,a,c,p,y,x){var k=2;if(p=i,typeof i=="function")gm(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case A:return fo(c.children,y,x,a);case E:k=8,y|=8;break;case C:return i=Xn(12,c,a,y|2),i.elementType=C,i.lanes=x,i;case O:return i=Xn(13,c,a,y),i.elementType=O,i.lanes=x,i;case se:return i=Xn(19,c,a,y),i.elementType=se,i.lanes=x,i;case we:return Wd(c,y,x,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:k=10;break e;case M:k=9;break e;case z:k=11;break e;case pe:k=14;break e;case Ne:k=16,p=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=Xn(k,c,a,y),a.elementType=i,a.type=p,a.lanes=x,a}function fo(i,a,c,p){return i=Xn(7,i,p,a),i.lanes=c,i}function Wd(i,a,c,p){return i=Xn(22,i,p,a),i.elementType=we,i.lanes=c,i.stateNode={isHidden:!1},i}function ym(i,a,c){return i=Xn(6,i,null,a),i.lanes=c,i}function vm(i,a,c){return a=Xn(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function xI(i,a,c,p,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$s(0),this.expirationTimes=$s(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$s(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function _m(i,a,c,p,y,x,k,L,U){return i=new xI(i,a,c,L,U),a===1?(a=1,x===!0&&(a|=8)):a=0,x=Xn(3,null,null,a),i.current=x,x.stateNode=i,x.memoizedState={element:p,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(x),i}function bI(i,a,c){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:p==null?null:""+p,children:i,containerInfo:a,implementation:c}}function gw(i){if(!i)return Qs;i=i._reactInternals;e:{if(dr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(xn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(xn(c))return Wv(i,c,a)}return a}function yw(i,a,c,p,y,x,k,L,U){return i=_m(c,p,!0,i,y,x,k,L,U),i.context=gw(null),c=i.current,p=mn(),y=ni(c),x=vs(p,y),x.callback=a??null,Xs(c,x,y),i.current.lanes=y,Fs(i,y,p),Tn(i,p),i}function Hd(i,a,c,p){var y=a.current,x=mn(),k=ni(y);return c=gw(c),a.context===null?a.context=c:a.pendingContext=c,a=vs(x,k),a.payload={element:i},p=p===void 0?null:p,p!==null&&(a.callback=p),i=Xs(y,a,k),i!==null&&(Er(i,y,k,x),bd(i,y,k)),k}function qd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function vw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function wm(i,a){vw(i,a),(i=i.alternate)&&vw(i,a)}function EI(){return null}var _w=typeof reportError=="function"?reportError:function(i){console.error(i)};function xm(i){this._internalRoot=i}Kd.prototype.render=xm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Hd(i,a,null,null)},Kd.prototype.unmount=xm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;uo(function(){Hd(null,i,null,null)}),a[fs]=null}};function Kd(i){this._internalRoot=i}Kd.prototype.unstable_scheduleHydration=function(i){if(i){var a=Kc();i={blockedOn:null,target:i,priority:a};for(var c=0;c<jr.length&&a!==0&&a<jr[c].priority;c++);jr.splice(c,0,i),c===0&&Jc(i)}};function bm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Gd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ww(){}function TI(i,a,c,p,y){if(y){if(typeof p=="function"){var x=p;p=function(){var X=qd(k);x.call(X)}}var k=yw(a,p,i,0,null,!1,!1,"",ww);return i._reactRootContainer=k,i[fs]=k.current,ou(i.nodeType===8?i.parentNode:i),uo(),k}for(;y=i.lastChild;)i.removeChild(y);if(typeof p=="function"){var L=p;p=function(){var X=qd(U);L.call(X)}}var U=_m(i,0,!1,null,null,!1,!1,"",ww);return i._reactRootContainer=U,i[fs]=U.current,ou(i.nodeType===8?i.parentNode:i),uo(function(){Hd(a,U,c,p)}),U}function Qd(i,a,c,p,y){var x=c._reactRootContainer;if(x){var k=x;if(typeof y=="function"){var L=y;y=function(){var U=qd(k);L.call(U)}}Hd(a,k,i,y)}else k=TI(c,a,i,y,p);return qd(k)}Hc=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var c=Vs(a.pendingLanes);c!==0&&(Us(a,c|1),Tn(a,Xe()),!(He&6)&&(Aa=Xe()+500,Js()))}break;case 13:uo(function(){var p=ys(i,1);if(p!==null){var y=mn();Er(p,i,1,y)}}),wm(i,1)}},ea=function(i){if(i.tag===13){var a=ys(i,134217728);if(a!==null){var c=mn();Er(a,i,134217728,c)}wm(i,134217728)}},qc=function(i){if(i.tag===13){var a=ni(i),c=ys(i,a);if(c!==null){var p=mn();Er(c,i,a,p)}wm(i,a)}},Kc=function(){return Be},Gc=function(i,a){var c=Be;try{return Be=i,a()}finally{Be=c}},Ho=function(i,a,c){switch(a){case"input":if(rs(i,c),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<c.length;a++){var p=c[a];if(p!==i&&p.form===i.form){var y=hd(p);if(!y)throw Error(t(90));ts(p),rs(p,y)}}}break;case"textarea":zo(i,c);break;case"select":a=c.value,a!=null&&is(i,!!c.multiple,a,!1)}},zi=fm,Ul=uo;var SI={usingClientEntryPoint:!1,Events:[uu,ga,hd,Rr,Fl,fm]},Eu={findFiberByHostInstance:to,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kI={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wl(i),i===null?null:i.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||EI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{Gi=Jd.inject(kI),Rn=Jd}catch{}}return Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SI,Sn.createPortal=function(i,a){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(a))throw Error(t(200));return bI(i,a,null,c)},Sn.createRoot=function(i,a){if(!bm(i))throw Error(t(299));var c=!1,p="",y=_w;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=_m(i,1,!1,null,null,c,!1,p,y),i[fs]=a.current,ou(i.nodeType===8?i.parentNode:i),new xm(a)},Sn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wl(a),i=i===null?null:i.stateNode,i},Sn.flushSync=function(i){return uo(i)},Sn.hydrate=function(i,a,c){if(!Gd(a))throw Error(t(200));return Qd(null,i,a,!0,c)},Sn.hydrateRoot=function(i,a,c){if(!bm(i))throw Error(t(405));var p=c!=null&&c.hydratedSources||null,y=!1,x="",k=_w;if(c!=null&&(c.unstable_strictMode===!0&&(y=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),a=yw(a,null,i,1,c??null,y,!1,x,k),i[fs]=a.current,ou(i),p)for(i=0;i<p.length;i++)c=p[i],y=c._getVersion,y=y(c._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[c,y]:a.mutableSourceEagerHydrationData.push(c,y);return new Kd(a)},Sn.render=function(i,a,c){if(!Gd(a))throw Error(t(200));return Qd(null,i,a,!1,c)},Sn.unmountComponentAtNode=function(i){if(!Gd(i))throw Error(t(40));return i._reactRootContainer?(uo(function(){Qd(null,null,i,!1,function(){i._reactRootContainer=null,i[fs]=null})}),!0):!1},Sn.unstable_batchedUpdates=fm,Sn.unstable_renderSubtreeIntoContainer=function(i,a,c,p){if(!Gd(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Qd(i,a,c,!1,p)},Sn.version="18.3.1-next-f1338f8080-20240426",Sn}var Pw;function dT(){if(Pw)return Sm.exports;Pw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sm.exports=DI(),Sm.exports}var Aw;function OI(){if(Aw)return Yd;Aw=1;var n=dT();return Yd.createRoot=n.createRoot,Yd.hydrateRoot=n.hydrateRoot,Yd}var LI=OI();const MI=df(LI);var Su={},Iw;function VI(){if(Iw)return Su;Iw=1,Object.defineProperty(Su,"__esModule",{value:!0}),Su.parse=l,Su.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,b){const S=new o,j=_.length;if(j<2)return S;const P=(b==null?void 0:b.decode)||g;let D=0;do{const W=_.indexOf("=",D);if(W===-1)break;const F=_.indexOf(";",D),q=F===-1?j:F;if(W>q){D=_.lastIndexOf(";",W-1)+1;continue}const B=u(_,D,W),V=d(_,W,B),A=_.slice(B,V);if(S[A]===void 0){let E=u(_,W+1,q),C=d(_,q,E);const R=P(_.slice(E,C));S[A]=R}D=q+1}while(D<j);return S}function u(_,b,S){do{const j=_.charCodeAt(b);if(j!==32&&j!==9)return b}while(++b<S);return S}function d(_,b,S){for(;b>S;){const j=_.charCodeAt(--b);if(j!==32&&j!==9)return b+1}return S}function f(_,b,S){const j=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(_))throw new TypeError(`argument name is invalid: ${_}`);const P=j(b);if(!e.test(P))throw new TypeError(`argument val is invalid: ${b}`);let D=_+"="+P;if(!S)return D;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);D+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);D+="; Domain="+S.domain}if(S.path){if(!r.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);D+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);D+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(D+="; HttpOnly"),S.secure&&(D+="; Secure"),S.partitioned&&(D+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return D}function g(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function v(_){return s.call(_)==="[object Date]"}return Su}VI();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Rw="popstate";function $I(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return cg("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:ec(s)}return UI(e,t,null,n)}function lt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function kr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function FI(){return Math.random().toString(36).substring(2,10)}function Nw(n,e){return{usr:n.state,key:n.key,idx:e}}function cg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?vl(e):e,state:t,key:e&&e.key||r||FI()}}function ec({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function vl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function UI(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",d=null,f=g();f==null&&(f=0,l.replaceState({...l.state,idx:f},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let P=g(),D=P==null?null:P-f;f=P,d&&d({action:u,location:j.location,delta:D})}function _(P,D){u="PUSH";let W=cg(j.location,P,D);f=g()+1;let F=Nw(W,f),q=j.createHref(W);try{l.pushState(F,"",q)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(q)}o&&d&&d({action:u,location:j.location,delta:1})}function b(P,D){u="REPLACE";let W=cg(j.location,P,D);f=g();let F=Nw(W,f),q=j.createHref(W);l.replaceState(F,"",q),o&&d&&d({action:u,location:j.location,delta:0})}function S(P){let D=s.location.origin!=="null"?s.location.origin:s.location.href,W=typeof P=="string"?P:ec(P);return W=W.replace(/ $/,"%20"),lt(D,`No window.location.(origin|href) available to create URL for href: ${W}`),new URL(W,D)}let j={get action(){return u},get location(){return n(s,l)},listen(P){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Rw,v),d=P,()=>{s.removeEventListener(Rw,v),d=null}},createHref(P){return e(s,P)},createURL:S,encodeLocation(P){let D=S(P);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:_,replace:b,go(P){return l.go(P)}};return j}function hT(n,e,t="/"){return BI(n,e,t,!1)}function BI(n,e,t,r){let s=typeof e=="string"?vl(e):e,o=Ei(s.pathname||"/",t);if(o==null)return null;let l=fT(n);zI(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let f=e1(o);u=XI(l[d],f,r)}return u}function fT(n,e=[],t=[],r=""){let s=(o,l,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};d.relativePath.startsWith("/")&&(lt(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let f=Ss([r,d.relativePath]),g=t.concat(d);o.children&&o.children.length>0&&(lt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),fT(o.children,e,g,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:JI(f,o.index),routesMeta:g})};return n.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let d of pT(o.path))s(o,l,d)}),e}function pT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=pT(r.join("/")),u=[];return u.push(...l.map(d=>d===""?o:[o,d].join("/"))),s&&u.push(...l),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function zI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:YI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var WI=/^:[\w-]+$/,HI=3,qI=2,KI=1,GI=10,QI=-2,jw=n=>n==="*";function JI(n,e){let t=n.split("/"),r=t.length;return t.some(jw)&&(r+=QI),e&&(r+=qI),t.filter(s=>!jw(s)).reduce((s,o)=>s+(WI.test(o)?HI:o===""?KI:GI),r)}function YI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function XI(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let d=r[u],f=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=jh({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),_=d.route;if(!v&&f&&t&&!r[r.length-1].route.index&&(v=jh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Ss([o,v.pathname]),pathnameBase:s1(Ss([o,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(o=Ss([o,v.pathnameBase]))}return l}function jh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ZI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((f,{paramName:g,isOptional:v},_)=>{if(g==="*"){let S=u[_]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=u[_];return v&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:l,pattern:n}}function ZI(n,e=!1,t=!0){kr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function e1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return kr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ei(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function t1(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?vl(n):n;return{pathname:t?t.startsWith("/")?t:n1(t,e):e,search:i1(r),hash:o1(s)}}function n1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Pm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function g0(n){let e=r1(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function y0(n,e,t,r=!1){let s;typeof n=="string"?s=vl(n):(s={...n},lt(!s.pathname||!s.pathname.includes("?"),Pm("?","pathname","search",s)),lt(!s.pathname||!s.pathname.includes("#"),Pm("#","pathname","hash",s)),lt(!s.search||!s.search.includes("#"),Pm("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),v-=1;s.pathname=_.join("/")}u=v>=0?e[v]:"/"}let d=t1(s,u),f=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Ss=n=>n.join("/").replace(/\/\/+/g,"/"),s1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),i1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,o1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function a1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var mT=["POST","PUT","PATCH","DELETE"];new Set(mT);var l1=["GET",...mT];new Set(l1);var _l=I.createContext(null);_l.displayName="DataRouter";var hf=I.createContext(null);hf.displayName="DataRouterState";var gT=I.createContext({isTransitioning:!1});gT.displayName="ViewTransition";var u1=I.createContext(new Map);u1.displayName="Fetchers";var c1=I.createContext(null);c1.displayName="Await";var Ar=I.createContext(null);Ar.displayName="Navigation";var _c=I.createContext(null);_c.displayName="Location";var or=I.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var v0=I.createContext(null);v0.displayName="RouteError";function d1(n,{relative:e}={}){lt(wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=I.useContext(Ar),{hash:s,pathname:o,search:l}=wc(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Ss([t,o])),r.createHref({pathname:u,search:l,hash:s})}function wl(){return I.useContext(_c)!=null}function Zr(){return lt(wl(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(_c).location}var yT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function vT(n){I.useContext(Ar).static||I.useLayoutEffect(n)}function dn(){let{isDataRoute:n}=I.useContext(or);return n?k1():h1()}function h1(){lt(wl(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(_l),{basename:e,navigator:t}=I.useContext(Ar),{matches:r}=I.useContext(or),{pathname:s}=Zr(),o=JSON.stringify(g0(r)),l=I.useRef(!1);return vT(()=>{l.current=!0}),I.useCallback((d,f={})=>{if(kr(l.current,yT),!l.current)return;if(typeof d=="number"){t.go(d);return}let g=y0(d,JSON.parse(o),s,f.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ss([e,g.pathname])),(f.replace?t.replace:t.push)(g,f.state,f)},[e,t,o,s,n])}var f1=I.createContext(null);function p1(n){let e=I.useContext(or).outlet;return e&&I.createElement(f1.Provider,{value:n},e)}function ff(){let{matches:n}=I.useContext(or),e=n[n.length-1];return e?e.params:{}}function wc(n,{relative:e}={}){let{matches:t}=I.useContext(or),{pathname:r}=Zr(),s=JSON.stringify(g0(t));return I.useMemo(()=>y0(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function m1(n,e){return _T(n,e)}function _T(n,e,t,r){var W;lt(wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=I.useContext(Ar),{matches:l}=I.useContext(or),u=l[l.length-1],d=u?u.params:{},f=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let F=v&&v.path||"";wT(f,!v||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let _=Zr(),b;if(e){let F=typeof e=="string"?vl(e):e;lt(g==="/"||((W=F.pathname)==null?void 0:W.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${F.pathname}" was given in the \`location\` prop.`),b=F}else b=_;let S=b.pathname||"/",j=S;if(g!=="/"){let F=g.replace(/^\//,"").split("/");j="/"+S.replace(/^\//,"").split("/").slice(F.length).join("/")}let P=!o&&t&&t.matches&&t.matches.length>0?t.matches:hT(n,{pathname:j});kr(v||P!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),kr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=w1(P&&P.map(F=>Object.assign({},F,{params:Object.assign({},d,F.params),pathname:Ss([g,s.encodeLocation?s.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?g:Ss([g,s.encodeLocation?s.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,t,r);return e&&D?I.createElement(_c.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},D):D}function g1(){let n=S1(),e=a1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,l)}var y1=I.createElement(g1,null),v1=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?I.createElement(or.Provider,{value:this.props.routeContext},I.createElement(v0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _1({routeContext:n,match:e,children:t}){let r=I.useContext(_l);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(or.Provider,{value:n},t)}function w1(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let d=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);lt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,u=-1;if(t)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:g,errors:v}=t,_=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||_){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,g)=>{let v,_=!1,b=null,S=null;t&&(v=o&&f.route.id?o[f.route.id]:void 0,b=f.route.errorElement||y1,l&&(u<0&&g===0?(wT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):u===g&&(_=!0,S=f.route.hydrateFallbackElement||null)));let j=e.concat(s.slice(0,g+1)),P=()=>{let D;return v?D=b:_?D=S:f.route.Component?D=I.createElement(f.route.Component,null):f.route.element?D=f.route.element:D=d,I.createElement(_1,{match:f,routeContext:{outlet:d,matches:j,isDataRoute:t!=null},children:D})};return t&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?I.createElement(v1,{location:t.location,revalidation:t.revalidation,component:b,error:v,children:P(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):P()},null)}function _0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x1(n){let e=I.useContext(_l);return lt(e,_0(n)),e}function b1(n){let e=I.useContext(hf);return lt(e,_0(n)),e}function E1(n){let e=I.useContext(or);return lt(e,_0(n)),e}function w0(n){let e=E1(n),t=e.matches[e.matches.length-1];return lt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function T1(){return w0("useRouteId")}function S1(){var r;let n=I.useContext(v0),e=b1("useRouteError"),t=w0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function k1(){let{router:n}=x1("useNavigate"),e=w0("useNavigate"),t=I.useRef(!1);return vT(()=>{t.current=!0}),I.useCallback(async(s,o={})=>{kr(t.current,yT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Dw={};function wT(n,e,t){!e&&!Dw[n]&&(Dw[n]=!0,kr(!1,t))}I.memo(C1);function C1({routes:n,future:e,state:t}){return _T(n,void 0,t,e)}function P1({to:n,replace:e,state:t,relative:r}){lt(wl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=I.useContext(Ar);kr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(or),{pathname:l}=Zr(),u=dn(),d=y0(n,g0(o),l,r==="path"),f=JSON.stringify(d);return I.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:r})},[u,f,r,e,t]),null}function xT(n){return p1(n.context)}function Qe(n){lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A1({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){lt(!wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=vl(t));let{pathname:d="/",search:f="",hash:g="",state:v=null,key:_="default"}=t,b=I.useMemo(()=>{let S=Ei(d,l);return S==null?null:{location:{pathname:S,search:f,hash:g,state:v,key:_},navigationType:r}},[l,d,f,g,v,_,r]);return kr(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:I.createElement(Ar.Provider,{value:u},I.createElement(_c.Provider,{children:e,value:b}))}function I1({children:n,location:e}){return m1(dg(n),e)}function dg(n,e=[]){let t=[];return I.Children.forEach(n,(r,s)=>{if(!I.isValidElement(r))return;let o=[...e,s];if(r.type===I.Fragment){t.push.apply(t,dg(r.props.children,o));return}lt(r.type===Qe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),lt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=dg(r.props.children,o)),t.push(l)}),t}var yh="get",vh="application/x-www-form-urlencoded";function pf(n){return n!=null&&typeof n.tagName=="string"}function R1(n){return pf(n)&&n.tagName.toLowerCase()==="button"}function N1(n){return pf(n)&&n.tagName.toLowerCase()==="form"}function j1(n){return pf(n)&&n.tagName.toLowerCase()==="input"}function D1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function O1(n,e){return n.button===0&&(!e||e==="_self")&&!D1(n)}var Xd=null;function L1(){if(Xd===null)try{new FormData(document.createElement("form"),0),Xd=!1}catch{Xd=!0}return Xd}var M1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Am(n){return n!=null&&!M1.has(n)?(kr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vh}"`),null):n}function V1(n,e){let t,r,s,o,l;if(N1(n)){let u=n.getAttribute("action");r=u?Ei(u,e):null,t=n.getAttribute("method")||yh,s=Am(n.getAttribute("enctype"))||vh,o=new FormData(n)}else if(R1(n)||j1(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||u.getAttribute("action");if(r=d?Ei(d,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||yh,s=Am(n.getAttribute("formenctype"))||Am(u.getAttribute("enctype"))||vh,o=new FormData(u,n),!L1()){let{name:f,type:g,value:v}=n;if(g==="image"){let _=f?`${f}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else f&&o.append(f,v)}}else{if(pf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yh,r=null,s=vh,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function x0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function $1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function U1(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await $1(o,t);return l.links?l.links():[]}return[]}));return H1(r.flat(1).filter(F1).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ow(n,e,t,r,s,o){let l=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,u=(d,f)=>{var g;return t[f].pathname!==d.pathname||((g=t[f].route.path)==null?void 0:g.endsWith("*"))&&t[f].params["*"]!==d.params["*"]};return o==="assets"?e.filter((d,f)=>l(d,f)||u(d,f)):o==="data"?e.filter((d,f)=>{var v;let g=r.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(l(d,f)||u(d,f))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function B1(n,e){return z1(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function z1(n){return[...new Set(n)]}function W1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function H1(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(W1(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function q1(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function K1(){let n=I.useContext(_l);return x0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function G1(){let n=I.useContext(hf);return x0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var b0=I.createContext(void 0);b0.displayName="FrameworkContext";function bT(){let n=I.useContext(b0);return x0(n,"You must render this element inside a <HydratedRouter> element"),n}function Q1(n,e){let t=I.useContext(b0),[r,s]=I.useState(!1),[o,l]=I.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:v}=e,_=I.useRef(null);I.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let j=D=>{D.forEach(W=>{l(W.isIntersecting)})},P=new IntersectionObserver(j,{threshold:.5});return _.current&&P.observe(_.current),()=>{P.disconnect()}}},[n]),I.useEffect(()=>{if(r){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[r]);let b=()=>{s(!0)},S=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:ku(u,b),onBlur:ku(d,S),onMouseEnter:ku(f,b),onMouseLeave:ku(g,S),onTouchStart:ku(v,b)}]:[!1,_,{}]}function ku(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function J1({page:n,...e}){let{router:t}=K1(),r=I.useMemo(()=>hT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?I.createElement(X1,{page:n,matches:r,...e}):null}function Y1(n){let{manifest:e,routeModules:t}=bT(),[r,s]=I.useState([]);return I.useEffect(()=>{let o=!1;return U1(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function X1({page:n,matches:e,...t}){let r=Zr(),{manifest:s,routeModules:o}=bT(),{loaderData:l,matches:u}=G1(),d=I.useMemo(()=>Ow(n,e,u,s,r,"data"),[n,e,u,s,r]),f=I.useMemo(()=>Ow(n,e,u,s,r,"assets"),[n,e,u,s,r]),g=I.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let b=new Set,S=!1;if(e.forEach(P=>{var W;let D=s.routes[P.route.id];!D||!D.hasLoader||(!d.some(F=>F.route.id===P.route.id)&&P.route.id in l&&((W=o[P.route.id])!=null&&W.shouldRevalidate)||D.hasClientLoader?S=!0:b.add(P.route.id))}),b.size===0)return[];let j=q1(n);return S&&b.size>0&&j.searchParams.set("_routes",e.filter(P=>b.has(P.route.id)).map(P=>P.route.id).join(",")),[j.pathname+j.search]},[l,r,s,d,e,n,o]),v=I.useMemo(()=>B1(f,s),[f,s]),_=Y1(f);return I.createElement(I.Fragment,null,g.map(b=>I.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...t})),v.map(b=>I.createElement("link",{key:b,rel:"modulepreload",href:b,...t})),_.map(({key:b,link:S})=>I.createElement("link",{key:b,...S})))}function Z1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ET=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ET&&(window.__reactRouterVersion="7.1.5")}catch{}function eR({basename:n,children:e,window:t}){let r=I.useRef();r.current==null&&(r.current=$I({window:t,v5Compat:!0}));let s=r.current,[o,l]=I.useState({action:s.action,location:s.location}),u=I.useCallback(d=>{I.startTransition(()=>l(d))},[l]);return I.useLayoutEffect(()=>s.listen(u),[s,u]),I.createElement(A1,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var TT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tt=I.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:d,to:f,preventScrollReset:g,viewTransition:v,..._},b){let{basename:S}=I.useContext(Ar),j=typeof f=="string"&&TT.test(f),P,D=!1;if(typeof f=="string"&&j&&(P=f,ET))try{let C=new URL(window.location.href),R=f.startsWith("//")?new URL(C.protocol+f):new URL(f),M=Ei(R.pathname,S);R.origin===C.origin&&M!=null?f=M+R.search+R.hash:D=!0}catch{kr(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=d1(f,{relative:s}),[F,q,B]=Q1(r,_),V=sR(f,{replace:l,state:u,target:d,preventScrollReset:g,relative:s,viewTransition:v});function A(C){e&&e(C),C.defaultPrevented||V(C)}let E=I.createElement("a",{..._,...B,href:P||W,onClick:D||o?e:A,ref:Z1(b,q),target:d,"data-discover":!j&&t==="render"?"true":void 0});return F&&!j?I.createElement(I.Fragment,null,E,I.createElement(J1,{page:W})):E});tt.displayName="Link";var tR=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:d,...f},g){let v=wc(l,{relative:f.relative}),_=Zr(),b=I.useContext(hf),{navigator:S,basename:j}=I.useContext(Ar),P=b!=null&&uR(v)&&u===!0,D=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,W=_.pathname,F=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(W=W.toLowerCase(),F=F?F.toLowerCase():null,D=D.toLowerCase()),F&&j&&(F=Ei(F,j)||F);const q=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let B=W===D||!s&&W.startsWith(D)&&W.charAt(q)==="/",V=F!=null&&(F===D||!s&&F.startsWith(D)&&F.charAt(D.length)==="/"),A={isActive:B,isPending:V,isTransitioning:P},E=B?e:void 0,C;typeof r=="function"?C=r(A):C=[r,B?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(A):o;return I.createElement(tt,{...f,"aria-current":E,className:C,ref:g,style:R,to:l,viewTransition:u},typeof d=="function"?d(A):d)});tR.displayName="NavLink";var nR=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=yh,action:u,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:v,..._},b)=>{let S=aR(),j=lR(u,{relative:f}),P=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&TT.test(u),W=F=>{if(d&&d(F),F.defaultPrevented)return;F.preventDefault();let q=F.nativeEvent.submitter,B=(q==null?void 0:q.getAttribute("formmethod"))||l;S(q||F.currentTarget,{fetcherKey:e,method:B,navigate:t,replace:s,state:o,relative:f,preventScrollReset:g,viewTransition:v})};return I.createElement("form",{ref:b,method:P,action:j,onSubmit:r?d:W,..._,"data-discover":!D&&n==="render"?"true":void 0})});nR.displayName="Form";function rR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ST(n){let e=I.useContext(_l);return lt(e,rR(n)),e}function sR(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=dn(),d=Zr(),f=wc(n,{relative:o});return I.useCallback(g=>{if(O1(g,e)){g.preventDefault();let v=t!==void 0?t:ec(d)===ec(f);u(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[d,u,f,t,r,e,n,s,o,l])}var iR=0,oR=()=>`__${String(++iR)}__`;function aR(){let{router:n}=ST("useSubmit"),{basename:e}=I.useContext(Ar),t=T1();return I.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:d,body:f}=V1(r,e);if(s.navigate===!1){let g=s.fetcherKey||oR();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:d,body:f,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function lR(n,{relative:e}={}){let{basename:t}=I.useContext(Ar),r=I.useContext(or);lt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...wc(n||".",{relative:e})},l=Zr();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),d=u.getAll("index");if(d.some(g=>g==="")){u.delete("index"),d.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ss([t,o.pathname])),ec(o)}function uR(n,e={}){let t=I.useContext(gT);lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ST("useViewTransitionState"),s=wc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Ei(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ei(t.nextLocation.pathname,r)||t.nextLocation.pathname;return jh(s.pathname,l)!=null||jh(s.pathname,o)!=null}new TextEncoder;var cR=dT();const Zd=df(cR);function Dh(){return Dh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dh.apply(null,arguments)}function E0(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function hg(n,e){return hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},hg(n,e)}function T0(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,hg(n,e)}function dR(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function hR(n,e){n.classList?n.classList.add(e):dR(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function Lw(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function fR(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=Lw(n.className,e):n.setAttribute("class",Lw(n.className&&n.className.baseVal||"",e))}const Mw={disabled:!1},Oh=jt.createContext(null);var kT=function(e){return e.scrollTop},Ru="unmounted",go="exited",yo="entering",Fa="entered",fg="exiting",Os=function(n){T0(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,d;return o.appearStatus=null,r.in?u?(d=go,o.appearStatus=yo):d=Fa:r.unmountOnExit||r.mountOnEnter?d=Ru:d=go,o.state={status:d},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Ru?{status:go}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==yo&&l!==Fa&&(o=yo):(l===yo||l===Fa)&&(o=fg)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===yo){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Zd.findDOMNode(this);l&&kT(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===go&&this.setState({status:Ru})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[Zd.findDOMNode(this),u],f=d[0],g=d[1],v=this.getTimeouts(),_=u?v.appear:v.enter;if(!s&&!l||Mw.disabled){this.safeSetState({status:Fa},function(){o.props.onEntered(f)});return}this.props.onEnter(f,g),this.safeSetState({status:yo},function(){o.props.onEntering(f,g),o.onTransitionEnd(_,function(){o.safeSetState({status:Fa},function(){o.props.onEntered(f,g)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:Zd.findDOMNode(this);if(!o||Mw.disabled){this.safeSetState({status:go},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:fg},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:go},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Zd.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],f=d[0],g=d[1];this.props.addEndListener(f,g)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Ru)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=E0(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return jt.createElement(Oh.Provider,{value:null},typeof l=="function"?l(s,u):jt.cloneElement(jt.Children.only(l),u))},e}(jt.Component);Os.contextType=Oh;Os.propTypes={};function Ra(){}Os.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ra,onEntering:Ra,onEntered:Ra,onExit:Ra,onExiting:Ra,onExited:Ra};Os.UNMOUNTED=Ru;Os.EXITED=go;Os.ENTERING=yo;Os.ENTERED=Fa;Os.EXITING=fg;var pR=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return hR(e,r)})},Im=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return fR(e,r)})},mf=function(n){T0(e,n);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=n.call.apply(n,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(u,d){var f=r.resolveArguments(u,d),g=f[0],v=f[1];r.removeClasses(g,"exit"),r.addClass(g,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(u,d)},r.onEntering=function(u,d){var f=r.resolveArguments(u,d),g=f[0],v=f[1],_=v?"appear":"enter";r.addClass(g,_,"active"),r.props.onEntering&&r.props.onEntering(u,d)},r.onEntered=function(u,d){var f=r.resolveArguments(u,d),g=f[0],v=f[1],_=v?"appear":"enter";r.removeClasses(g,_),r.addClass(g,_,"done"),r.props.onEntered&&r.props.onEntered(u,d)},r.onExit=function(u){var d=r.resolveArguments(u),f=d[0];r.removeClasses(f,"appear"),r.removeClasses(f,"enter"),r.addClass(f,"exit","base"),r.props.onExit&&r.props.onExit(u)},r.onExiting=function(u){var d=r.resolveArguments(u),f=d[0];r.addClass(f,"exit","active"),r.props.onExiting&&r.props.onExiting(u)},r.onExited=function(u){var d=r.resolveArguments(u),f=d[0];r.removeClasses(f,"exit"),r.addClass(f,"exit","done"),r.props.onExited&&r.props.onExited(u)},r.resolveArguments=function(u,d){return r.props.nodeRef?[r.props.nodeRef.current,u]:[u,d]},r.getClassNames=function(u){var d=r.props.classNames,f=typeof d=="string",g=f&&d?d+"-":"",v=f?""+g+u:d[u],_=f?v+"-active":d[u+"Active"],b=f?v+"-done":d[u+"Done"];return{baseClassName:v,activeClassName:_,doneClassName:b}},r}var t=e.prototype;return t.addClass=function(s,o,l){var u=this.getClassNames(o)[l+"ClassName"],d=this.getClassNames("enter"),f=d.doneClassName;o==="appear"&&l==="done"&&f&&(u+=" "+f),l==="active"&&s&&kT(s),u&&(this.appliedClasses[o][l]=u,pR(s,u))},t.removeClasses=function(s,o){var l=this.appliedClasses[o],u=l.base,d=l.active,f=l.done;this.appliedClasses[o]={},u&&Im(s,u),d&&Im(s,d),f&&Im(s,f)},t.render=function(){var s=this.props;s.classNames;var o=E0(s,["classNames"]);return jt.createElement(Os,Dh({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(jt.Component);mf.defaultProps={classNames:""};mf.propTypes={};function mR(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function S0(n,e){var t=function(o){return e&&I.isValidElement(o)?e(o):o},r=Object.create(null);return n&&I.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function gR(n,e){n=n||{},e=e||{};function t(g){return g in e?e[g]:n[g]}var r=Object.create(null),s=[];for(var o in n)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var d in e){if(r[d])for(l=0;l<r[d].length;l++){var f=r[d][l];u[r[d][l]]=t(f)}u[d]=t(d)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function bo(n,e,t){return t[e]!=null?t[e]:n.props[e]}function yR(n,e){return S0(n.children,function(t){return I.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:bo(t,"appear",n),enter:bo(t,"enter",n),exit:bo(t,"exit",n)})})}function vR(n,e,t){var r=S0(n.children),s=gR(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(I.isValidElement(l)){var u=o in e,d=o in r,f=e[o],g=I.isValidElement(f)&&!f.props.in;d&&(!u||g)?s[o]=I.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:bo(l,"exit",n),enter:bo(l,"enter",n)}):!d&&u&&!g?s[o]=I.cloneElement(l,{in:!1}):d&&u&&I.isValidElement(f)&&(s[o]=I.cloneElement(l,{onExited:t.bind(null,l),in:f.props.in,exit:bo(l,"exit",n),enter:bo(l,"enter",n)}))}}),s}var _R=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},wR={component:"div",childFactory:function(e){return e}},gf=function(n){T0(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=o.handleExited.bind(mR(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,d=o.firstRender;return{children:d?yR(s,u):vR(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=S0(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var d=Dh({},u.children);return delete d[s.key],{children:d}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=E0(s,["component","childFactory"]),d=this.state.contextValue,f=_R(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?jt.createElement(Oh.Provider,{value:d},f):jt.createElement(Oh.Provider,{value:d},jt.createElement(o,u,f))},e}(jt.Component);gf.propTypes={};gf.defaultProps=wR;const xR="modulepreload",bR=function(n){return"/aussie-gut-pack/"+n},Vw={},il=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(t.map(d=>{if(d=bR(d),d in Vw)return;Vw[d]=!0;const f=d.endsWith(".css"),g=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":xR,f||(v.as="script"),v.crossOrigin="",v.href=d,u&&v.setAttribute("nonce",u),document.head.appendChild(v),f)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},ER=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class k0 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class TR extends k0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class SR extends k0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class kR extends k0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(pg||(pg={}));var CR=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};class PR{constructor(e,{headers:t={},customFetch:r,region:s=pg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=ER(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return CR(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let u={},{region:d}=t;d||(d=this.region),d&&d!=="any"&&(u["x-region"]=d);let f;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",f=l):typeof l=="string"?(u["Content-Type"]="text/plain",f=l):typeof FormData<"u"&&l instanceof FormData?f=l:(u["Content-Type"]="application/json",f=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:f}).catch(S=>{throw new TR(S)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new SR(g);if(!g.ok)throw new kR(g);let _=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return _==="application/json"?b=yield g.json():_==="application/octet-stream"?b=yield g.blob():_==="text/event-stream"?b=g:_==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var Ut={},Na={},ja={},Da={},Oa={},La={},AR=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ol=AR();const IR=ol.fetch,CT=ol.fetch.bind(ol),PT=ol.Headers,RR=ol.Request,NR=ol.Response,xl=Object.freeze(Object.defineProperty({__proto__:null,Headers:PT,Request:RR,Response:NR,default:CT,fetch:IR},Symbol.toStringTag,{value:"Module"})),jR=PI(xl);var eh={},$w;function AT(){if($w)return eh;$w=1,Object.defineProperty(eh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return eh.default=n,eh}var Fw;function IT(){if(Fw)return La;Fw=1;var n=La&&La.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(La,"__esModule",{value:!0});const e=n(jR),t=n(AT());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var g,v,_;let b=null,S=null,j=null,P=f.status,D=f.statusText;if(f.ok){if(this.method!=="HEAD"){const B=await f.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?S=B:S=JSON.parse(B))}const F=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),q=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");F&&q&&q.length>1&&(j=parseInt(q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,j=null,P=406,D="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const F=await f.text();try{b=JSON.parse(F),Array.isArray(b)&&f.status===404&&(S=[],b=null,P=200,D="OK")}catch{f.status===404&&F===""?(P=204,D="No Content"):b={message:F}}if(b&&this.isMaybeSingle&&(!((_=b==null?void 0:b.details)===null||_===void 0)&&_.includes("0 rows"))&&(b=null,P=200,D="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:S,count:j,status:P,statusText:D}});return this.shouldThrowOnError||(d=d.catch(f=>{var g,v,_;return{error:{message:`${(g=f==null?void 0:f.name)!==null&&g!==void 0?g:"FetchError"}: ${f==null?void 0:f.message}`,details:`${(v=f==null?void 0:f.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(_=f==null?void 0:f.code)!==null&&_!==void 0?_:""}`},data:null,count:null,status:0,statusText:""}})),d.then(o,l)}returns(){return this}overrideTypes(){return this}}return La.default=r,La}var Uw;function RT(){if(Uw)return Oa;Uw=1;var n=Oa&&Oa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oa,"__esModule",{value:!0});const e=n(IT());class t extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const f=d?`${d}.order`:"order",g=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,f=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(f,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:f="text"}={}){var g;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),_=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${f}; for="${_}"; options=${v};`,f==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Oa.default=t,Oa}var Bw;function C0(){if(Bw)return Da;Bw=1;var n=Da&&Da.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Da,"__esModule",{value:!0});const e=n(RT());class t extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${f}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Da.default=t,Da}var zw;function NT(){if(zw)return ja;zw=1;var n=ja&&ja.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ja,"__esModule",{value:!0});const e=n(C0());class t{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let d=!1;const f=(s??"*").split("").map(g=>/\s/.test(g)&&!d?"":(g==='"'&&(d=!d),g)).join("");return this.url.searchParams.set("select",f),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",d=[];if(this.headers.Prefer&&d.push(this.headers.Prefer),o&&d.push(`count=${o}`),l||d.push("missing=default"),this.headers.Prefer=d.join(","),Array.isArray(s)){const f=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(f.length>0){const g=[...new Set(f)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){const f="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),d||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const v=s.reduce((_,b)=>_.concat(Object.keys(b)),[]);if(v.length>0){const _=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",_.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return ja.default=t,ja}var Cu={},Pu={},Ww;function DR(){return Ww||(Ww=1,Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.version=void 0,Pu.version="0.0.0-automated"),Pu}var Hw;function OR(){if(Hw)return Cu;Hw=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.DEFAULT_HEADERS=void 0;const n=DR();return Cu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Cu}var qw;function LR(){if(qw)return Na;qw=1;var n=Na&&Na.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Na,"__esModule",{value:!0});const e=n(NT()),t=n(C0()),r=OR();class s{constructor(l,{headers:u={},schema:d,fetch:f}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=d,this.fetch=f}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:d=!1,get:f=!1,count:g}={}){let v;const _=new URL(`${this.url}/rpc/${l}`);let b;d||f?(v=d?"HEAD":"GET",Object.entries(u).filter(([j,P])=>P!==void 0).map(([j,P])=>[j,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([j,P])=>{_.searchParams.append(j,P)})):(v="POST",b=u);const S=Object.assign({},this.headers);return g&&(S.Prefer=`count=${g}`),new t.default({method:v,url:_,headers:S,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Na.default=s,Na}var Kw;function MR(){if(Kw)return Ut;Kw=1;var n=Ut&&Ut.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.PostgrestError=Ut.PostgrestBuilder=Ut.PostgrestTransformBuilder=Ut.PostgrestFilterBuilder=Ut.PostgrestQueryBuilder=Ut.PostgrestClient=void 0;const e=n(LR());Ut.PostgrestClient=e.default;const t=n(NT());Ut.PostgrestQueryBuilder=t.default;const r=n(C0());Ut.PostgrestFilterBuilder=r.default;const s=n(RT());Ut.PostgrestTransformBuilder=s.default;const o=n(IT());Ut.PostgrestBuilder=o.default;const l=n(AT());return Ut.PostgrestError=l.default,Ut.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},Ut}var VR=MR();const $R=df(VR),{PostgrestClient:FR,PostgrestQueryBuilder:D9,PostgrestFilterBuilder:O9,PostgrestTransformBuilder:L9,PostgrestBuilder:M9,PostgrestError:V9}=$R,UR="2.11.2",BR={"X-Client-Info":`realtime-js/${UR}`},zR="1.0.0",jT=1e4,WR=1e3;var Xa;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Xa||(Xa={}));var Vn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Vn||(Vn={}));var Sr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Sr||(Sr={}));var mg;(function(n){n.websocket="websocket"})(mg||(mg={}));var xo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(xo||(xo={}));class HR{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const d=r.decode(e.slice(l,l+o));l=l+o;const f=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:d,payload:f}}}class DT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var et;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(et||(et={}));const Gw=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=qR(l,n,e,s),o),{})},qR=(n,e,t,r)=>{const s=e.find(u=>u.name===n),o=s==null?void 0:s.type,l=t[n];return o&&!r.includes(o)?OT(o,l):gg(l)},OT=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return JR(e,t)}switch(n){case et.bool:return KR(e);case et.float4:case et.float8:case et.int2:case et.int4:case et.int8:case et.numeric:case et.oid:return GR(e);case et.json:case et.jsonb:return QR(e);case et.timestamp:return YR(e);case et.abstime:case et.date:case et.daterange:case et.int4range:case et.int8range:case et.money:case et.reltime:case et.text:case et.time:case et.timestamptz:case et.timetz:case et.tsrange:case et.tstzrange:return gg(e);default:return gg(e)}},gg=n=>n,KR=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},GR=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},QR=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},JR=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>OT(e,u))}return n},YR=n=>typeof n=="string"?n.replace(" ","T"):n,LT=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Rm{constructor(e,t,r={},s=jT){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Qw;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Qw||(Qw={}));class Uu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(d=>{this.state=Uu.syncDiff(this.state,d,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Uu.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),u={},d={};return this.map(o,(f,g)=>{l[f]||(d[f]=g)}),this.map(l,(f,g)=>{const v=o[f];if(v){const _=g.map(P=>P.presence_ref),b=v.map(P=>P.presence_ref),S=g.filter(P=>b.indexOf(P.presence_ref)<0),j=v.filter(P=>_.indexOf(P.presence_ref)<0);S.length>0&&(u[f]=S),j.length>0&&(d[f]=j)}else u[f]=g}),this.syncDiff(o,{joins:u,leaves:d},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,d)=>{var f;const g=(f=e[u])!==null&&f!==void 0?f:[];if(e[u]=this.cloneDeep(d),g.length>0){const v=e[u].map(b=>b.presence_ref),_=g.filter(b=>v.indexOf(b.presence_ref)<0);e[u].unshift(..._)}r(u,g,d)}),this.map(l,(u,d)=>{let f=e[u];if(!f)return;const g=d.map(v=>v.presence_ref);f=f.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=f,s(u,f,d),f.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jw;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Jw||(Jw={}));var Yw;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Yw||(Yw={}));var xs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(xs||(xs={}));class P0{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rm(this,Sr.join,this.params,this.timeout),this.rejoinTimer=new DT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Sr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Uu(this),this.broadcastEndpointURL=LT(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(g=>e==null?void 0:e(xs.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(xs.CLOSED));const d={},f={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(xs.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,b=(v=_==null?void 0:_.length)!==null&&v!==void 0?v:0,S=[];for(let j=0;j<b;j++){const P=_[j],{filter:{event:D,schema:W,table:F,filter:q}}=P,B=g&&g[j];if(B&&B.event===D&&B.schema===W&&B.table===F&&B.filter===q)S.push(Object.assign(Object.assign({},P),{id:B.id}));else{this.unsubscribe(),e==null||e(xs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(xs.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(xs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Sr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Rm(this,Sr.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Rm(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:d,leave:f,join:g}=Sr;if(r&&[u,d,f,g].indexOf(l)>=0&&r!==this._joinRef())return;let _=this._onMessage(l,t,r);if(t&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var S,j,P;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((P=(j=b.filter)===null||j===void 0?void 0:j.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===l}).map(b=>b.callback(_,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var S,j,P,D,W,F;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const q=b.id,B=(S=b.filter)===null||S===void 0?void 0:S.event;return q&&((j=t.ids)===null||j===void 0?void 0:j.includes(q))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const q=(W=(D=b==null?void 0:b.filter)===null||D===void 0?void 0:D.event)===null||W===void 0?void 0:W.toLocaleLowerCase();return q==="*"||q===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof _=="object"&&"ids"in _){const S=_.data,{schema:j,table:P,commit_timestamp:D,type:W,errors:F}=S;_=Object.assign(Object.assign({},{schema:j,table:P,commit_timestamp:D,eventType:W,new:{},old:{},errors:F}),this._getPayloadRecords(S))}b.callback(_,r)})}_isClosed(){return this.state===Vn.closed}_isJoined(){return this.state===Vn.joined}_isJoining(){return this.state===Vn.joining}_isLeaving(){return this.state===Vn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&P0.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Sr.close,{},e)}_onError(e){this._on(Sr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Gw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Gw(e.columns,e.old_record)),t}}const XR=()=>{},ZR=typeof WebSocket<"u",eN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tN{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=BR,this.params={},this.timeout=jT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=XR,this.conn=null,this.sendBuffer=[],this.serializer=new HR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>il(async()=>{const{default:d}=await Promise.resolve().then(()=>xl);return{default:d}},void 0).then(({default:d})=>d(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${mg.websocket}`,this.httpEndpoint=LT(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,l)=>l(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new DT(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(ZR){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new nN(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),il(async()=>{const{default:e}=await import("./browser-BljA6TJl.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:zR}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Xa.connecting:return xo.Connecting;case Xa.open:return xo.Open;case Xa.closing:return xo.Closing;default:return xo.Closed}}isConnected(){return this.connectionState()===xo.Open}channel(e,t={config:{}}){const r=new P0(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(Sr.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(WR,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:o,ref:l}=t;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Sr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([eN],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class nN{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Xa.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let A0=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Bt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class rN extends A0{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class yg extends A0{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var sN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};const MT=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},iN=()=>sN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield il(()=>Promise.resolve().then(()=>xl),void 0)).Response:Response}),vg=n=>{if(Array.isArray(n))return n.map(t=>vg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=vg(r)}),e};var Do=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};const Nm=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),oN=(n,e,t)=>Do(void 0,void 0,void 0,function*(){const r=yield iN();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new rN(Nm(s),n.status||500))}).catch(s=>{e(new yg(Nm(s),s))}):e(new yg(Nm(n),n))}),aN=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function xc(n,e,t,r,s,o){return Do(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,aN(e,r,s,o)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>oN(d,u,r))})})}function Lh(n,e,t,r){return Do(this,void 0,void 0,function*(){return xc(n,"GET",e,t,r)})}function ci(n,e,t,r,s){return Do(this,void 0,void 0,function*(){return xc(n,"POST",e,r,s,t)})}function lN(n,e,t,r,s){return Do(this,void 0,void 0,function*(){return xc(n,"PUT",e,r,s,t)})}function uN(n,e,t,r){return Do(this,void 0,void 0,function*(){return xc(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function VT(n,e,t,r,s){return Do(this,void 0,void 0,function*(){return xc(n,"DELETE",e,r,s,t)})}var kn=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};const cN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dN{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=MT(s)}uploadOrUpdate(e,t,r,s){return kn(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},Xw),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),d&&o.append("metadata",this.encodeMetadata(d))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const f=this._removeEmptyFolders(t),g=this._getFinalPath(f),v=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),_=yield v.json();return v.ok?{data:{path:f,id:_.Id,fullPath:_.Key},error:null}:{data:null,error:_}}catch(o){if(Bt(o))return{data:null,error:o};throw o}})}upload(e,t,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return kn(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:Xw.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:d,headers:g}),_=yield v.json();return v.ok?{data:{path:o,fullPath:_.Key},error:null}:{data:null,error:_}}catch(d){if(Bt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=yield ci(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new A0("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}update(e,t,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return kn(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}copy(e,t,r){return kn(this,void 0,void 0,function*(){try{return{data:{path:(yield ci(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return kn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield ci(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return kn(this,void 0,void 0,function*(){try{const s=yield ci(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}download(e,t){return kn(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Lh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Bt(u))return{data:null,error:u};throw u}})}info(e){return kn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Lh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:vg(r),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}exists(e){return kn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield uN(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Bt(r)&&r instanceof yg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});d!==""&&s.push(d);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${f}`)}}}remove(e){return kn(this,void 0,void 0,function*(){try{return{data:yield VT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}})}list(e,t,r){return kn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},cN),t),{prefix:e||""});return{data:yield ci(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const hN="2.7.1",fN={"X-Client-Info":`storage-js/${hN}`};var Ma=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};class pN{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},fN),t),this.fetch=MT(r)}listBuckets(){return Ma(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Bt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ma(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ma(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ma(this,void 0,void 0,function*(){try{return{data:yield lN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ma(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ma(this,void 0,void 0,function*(){try{return{data:yield VT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Bt(t))return{data:null,error:t};throw t}})}}class mN extends pN{constructor(e,t={},r){super(e,t,r)}from(e){return new dN(this.url,this.headers,e,this.fetch)}}const gN="2.49.4";let Nu="";typeof Deno<"u"?Nu="deno":typeof document<"u"?Nu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nu="react-native":Nu="node";const yN={"X-Client-Info":`supabase-js-${Nu}/${gN}`},vN={headers:yN},_N={schema:"public"},wN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xN={};var bN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};const EN=n=>{let e;return n?e=n:typeof fetch>"u"?e=CT:e=fetch,(...t)=>e(...t)},TN=()=>typeof Headers>"u"?PT:Headers,SN=(n,e,t)=>{const r=EN(t),s=TN();return(o,l)=>bN(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:n;let f=new s(l==null?void 0:l.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),r(o,Object.assign(Object.assign({},l),{headers:f}))})};var kN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};function CN(n){return n.replace(/\/$/,"")}function PN(n,e){const{db:t,auth:r,realtime:s,global:o}=n,{db:l,auth:u,realtime:d,global:f}=e,g={db:Object.assign(Object.assign({},l),t),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},f),o),accessToken:()=>kN(this,void 0,void 0,function*(){return""})};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}const $T="2.69.1",Ua=30*1e3,_g=3,jm=_g*Ua,AN="http://localhost:9999",IN="supabase.auth.token",RN={"X-Client-Info":`gotrue-js/${$T}`},wg="X-Supabase-Api-Version",FT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},NN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jN=6e5;class I0 extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Oe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class DN extends I0{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function ON(n){return Oe(n)&&n.name==="AuthApiError"}class UT extends I0{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Di extends I0{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class ai extends Di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LN(n){return Oe(n)&&n.name==="AuthSessionMissingError"}class Dm extends Di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class th extends Di{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nh extends Di{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MN(n){return Oe(n)&&n.name==="AuthImplicitGrantRedirectError"}class Zw extends Di{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xg extends Di{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Om(n){return Oe(n)&&n.name==="AuthRetryableFetchError"}class ex extends Di{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Bu extends Di{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const tx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nx=` 	
\r=`.split(""),VN=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<nx.length;e+=1)n[nx[e].charCodeAt(0)]=-2;for(let e=0;e<tx.length;e+=1)n[tx[e].charCodeAt(0)]=e;return n})();function BT(n,e,t){const r=VN[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function rx(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{UN(l,r,t)};for(let l=0;l<n.length;l+=1)BT(n.charCodeAt(l),s,o);return e.join("")}function $N(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function FN(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}$N(r,e)}}function UN(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function BN(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)BT(n.charCodeAt(s),t,r);return new Uint8Array(e)}function zN(n){const e=[];return FN(n,t=>e.push(t)),new Uint8Array(e)}function WN(n){return Math.round(Date.now()/1e3)+n}function HN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Ur=()=>typeof window<"u"&&typeof document<"u",po={tested:!1,writable:!1},zu=()=>{if(!Ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(po.tested)return po.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),po.tested=!0,po.writable=!0}catch{po.tested=!0,po.writable=!1}return po.writable};function qN(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const zT=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},KN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",WT=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},rh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},sh=async(n,e)=>{await n.removeItem(e)};let HT=class qT{constructor(){this.promise=new qT.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};HT.promiseConstructor=Promise;function Lm(n){const e=n.split(".");if(e.length!==3)throw new Bu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!NN.test(e[r]))throw new Bu("JWT not in base64url format");return{header:JSON.parse(rx(e[0])),payload:JSON.parse(rx(e[1])),signature:BN(e[2]),raw:{header:e[0],payload:e[1]}}}async function GN(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function QN(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function JN(n){return("0"+n.toString(16)).substr(-2)}function YN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,JN).join("")}async function XN(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function ZN(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await XN(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Va(n,e,t=!1){const r=YN();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await WT(n,`${e}-code-verifier`,s);const o=await ZN(r);return[o,r===o?"plain":"s256"]}const e2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t2(n){const e=n.headers.get(wg);if(!e||!e.match(e2))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function n2(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function r2(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var s2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const vo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),i2=[502,503,504];async function sx(n){var e;if(!KN(n))throw new xg(vo(n),0);if(i2.includes(n.status))throw new xg(vo(n),n.status);let t;try{t=await n.json()}catch(o){throw new UT(vo(o),o)}let r;const s=t2(n);if(s&&s.getTime()>=FT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new ex(vo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ai}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new ex(vo(t),n.status,t.weak_password.reasons);throw new DN(vo(t),n.status||500,r)}const o2=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function $e(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[wg]||(o[wg]=FT["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await a2(n,e,t+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function a2(n,e,t,r,s,o){const l=o2(e,r,s,o);let u;try{u=await n(t,Object.assign({},l))}catch(d){throw console.error(d),new xg(vo(d),0)}if(u.ok||await sx(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await sx(d)}}function li(n){var e;let t=null;d2(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=WN(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function ix(n){const e=li(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function di(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function l2(n){return{data:n,error:null}}function u2(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=s2(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function c2(n){return n}function d2(n){return n.access_token&&n.refresh_token&&n.expires_in}var h2=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class f2{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=zT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await $e(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await $e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:di})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=h2(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await $e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:u2,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Oe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await $e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:di})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,u,d;try{const f={nextPage:null,lastPage:0,total:0},g=await $e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:c2});if(g.error)throw g.error;const v=await g.json(),_=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return b.length>0&&(b.forEach(S=>{const j=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(S.split(";")[1].split("=")[1]);f[`${P}Page`]=j}),f.total=parseInt(_)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(Oe(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){try{return await $e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:di})}catch(t){if(Oe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await $e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:di})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:di})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await $e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await $e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}}const p2={getItem:n=>zu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{zu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{zu()&&globalThis.localStorage.removeItem(n)}};function ox(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function m2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const $a={debug:!!(globalThis&&zu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class KT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class g2 extends KT{}async function y2(n,e,t){$a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$a.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){$a.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{$a.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw $a.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new g2(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if($a.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}m2();const v2={url:AN,storageKey:IN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:RN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ax(n,e,t){return await t()}class tc{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=tc.nextInstanceID,tc.nextInstanceID+=1,this.instanceID>0&&Ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},v2),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new f2({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=zT(s.fetch),this.lock=s.lock||ax,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ur()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=y2:this.lock=ax,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:zu()?this.storage=p2:(this.memoryStorage={},this.storage=ox(this.memoryStorage)):(this.memoryStorage={},this.storage=ox(this.memoryStorage)),Ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$T}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=qN(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Ur()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),MN(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Oe(t)?{error:t}:{error:new UT("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:li}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(Oe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:g,password:v,options:_}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await Va(this.storage,this.storageKey)),o=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:v,data:(t=_==null?void 0:_.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:b,code_challenge_method:S},xform:li})}else if("phone"in e){const{phone:g,password:v,options:_}=e;o=await $e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(s=_==null?void 0:_.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:li})}else throw new th("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,f=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(o){if(Oe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:u}=e;t=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ix})}else if("phone"in e){const{phone:o,password:l,options:u}=e;t=await $e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:ix})}else throw new th("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Dm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await rh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:l}=await $e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:li});if(await sh(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Dm}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(Oe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,u=await $e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:li}),{data:d,error:f}=u;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Dm}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:u,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Va(this.storage,this.storageKey));const{error:v}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:d}=e,{data:f,error:g}=await $e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(o=d==null?void 0:d.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g}}throw new th("You must provide either an email or phone number.")}catch(u){if(Oe(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await $e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:li});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,f=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(s){if(Oe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Va(this.storage,this.storageKey)),await $e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:l2})}catch(o){if(Oe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ai;const{error:s}=await $e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Oe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await $e(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await $e(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new th("You must provide either an email or phone number and a type")}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await rh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,f,g)=>(!l&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:di}):await this._useSession(async t=>{var r,s,o;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ai}:await $e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:di})})}catch(t){if(Oe(t))return LN(t)&&(await this._removeSession(),await sh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new ai;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Va(this.storage,this.storageKey));const{data:f,error:g}=await $e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:di});if(g)throw g;return l.user=f.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Oe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ai;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:l}=Lm(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{session:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Oe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ai;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Oe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Ur())throw new nh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Zw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nh("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Zw("No code detected.");const{data:W,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:W.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:d,token_type:f}=e;if(!o||!u||!l||!f)throw new nh("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let _=g+v;d&&(_=parseInt(d));const b=_-g;b*1e3<=Ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const S=_-v;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,_,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,_,g);const{data:j,error:P}=await this._getUser(o);if(P)throw P;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:_,refresh_token:l,token_type:f,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(r){if(Oe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await rh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(ON(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await sh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=HN(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Va(this.storage,this.storageKey,!0));try{return await $e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Oe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,d,f,g;const{data:v,error:_}=o;if(_)throw _;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await $e(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Ur()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Oe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await $e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await QN(async s=>(s>0&&await GN(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await $e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:li})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Om(o)&&Date.now()+l-r<Ua})}catch(r){if(this._debug(t,"error",r),Oe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ur()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await rh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<jm;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${jm}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),Om(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ai;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new HT;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new ai;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),Oe(o)){const l={session:null,error:o};return Om(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(d){o.push(d)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await WT(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await sh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ua);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ua}ms, refresh threshold is ${_g} ticks`),s<=_g&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof KT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Va(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await $e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:f}=await $e(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?{data:null,error:f}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:u}=await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await $e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Lm(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+jN>Date.now()))return r;const{data:s,error:o}=await $e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new Bu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new Bu("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:b,error:S}=await this.getSession();if(S||!b.session)return{data:null,error:S};r=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:d}}=Lm(r);if(n2(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const f=r2(s.alg),g=await this.fetchJwk(s.kid,t),v=await crypto.subtle.importKey("jwk",g,f,!0,["verify"]);if(!await crypto.subtle.verify(f,v,l,zN(`${u}.${d}`)))throw new Bu("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}}}tc.nextInstanceID=0;const _2=tc;class w2 extends _2{constructor(e){super(e)}}var x2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{f(r.next(g))}catch(v){l(v)}}function d(g){try{f(r.throw(g))}catch(v){l(v)}}function f(g){g.done?o(g.value):s(g.value).then(u,d)}f((r=r.apply(n,e||[])).next())})};class b2{constructor(e,t,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=CN(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f={db:_N,realtime:xN,auth:Object.assign(Object.assign({},wN),{storageKey:d}),global:vN},g=PN(r??{},f);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=SN(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new FR(`${u}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new PR(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new mN(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return x2(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:d},f,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new w2({url:this.authUrl,headers:Object.assign(Object.assign({},v),f),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:d,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new tN(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const E2=(n,e,t)=>new b2(n,e,t),GT="https://lcmsizhwcacufywlrfpr.supabase.co",QT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg";console.log("Supabase URL:",GT);console.log("Supabase Anon Key:",QT);const Pn=E2(GT,QT),Oi=I.createContext(),T2=({children:n})=>{const[e,t]=I.useState(null),[r,s]=I.useState(!0);I.useEffect(()=>{(async()=>{const{data:{session:_}}=await Pn.auth.getSession();t((_==null?void 0:_.user)??null),s(!1)})();const{data:{subscription:v}}=Pn.auth.onAuthStateChange((_,b)=>{t((b==null?void 0:b.user)??null),s(!1)});return()=>{v==null||v.unsubscribe()}},[]);const f={user:e,loading:r,signup:async(g,v)=>{console.log("Signup attempt with:",{email:g,password:v});const{data:_,error:b}=await Pn.auth.signUp({email:g,password:v,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(_,null,2)),b)throw console.error("Signup error:",b.message),b;if(_.user&&_.user.identities&&_.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const S=await Pn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(S,null,2)),S.error?(console.error("Error resending confirmation email:",S.error.message),S.error):new Error("User already exists. A confirmation email has been resent.")}return _},login:async(g,v)=>{console.log("Login attempt with:",{email:g,password:v});const{data:_,error:b}=await Pn.auth.signInWithPassword({email:g,password:v});if(b)throw console.error("Login error:",b.message),b.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):b;return t(_.user),_},logout:async()=>{const{error:g}=await Pn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;t(null)},refreshUser:async()=>{const{data:{user:g}}=await Pn.auth.getUser();t(g)}};return m.jsx(Oi.Provider,{value:f,children:n})},S2=({location:n})=>{var b;const[e,t]=I.useState(!1),{isDarkMode:r,toggleTheme:s}=I.useContext(Je),{user:o,logout:l,loading:u}=I.useContext(Oi),d=dn();console.log("Rendering Navigation component. isMenuOpen:",e);const f=async()=>{try{await l(),d("/login")}catch(S){console.error("Logout error:",S.message)}},g=()=>{t(!e)},v=S=>n.pathname===S,_=((b=o==null?void 0:o.user_metadata)==null?void 0:b.displayName)||"User";return m.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,children:[m.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[m.jsx(tt,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),m.jsxs("div",{className:"hidden md:flex space-x-6 items-center",children:[m.jsx(tt,{to:"/",className:`hover:text-red-600 transition-colors duration-200 ${v("/")?"text-red-600 font-semibold":""}`,children:"Home"}),m.jsx(tt,{to:"/products",className:`hover:text-red-600 transition-colors duration-200 ${v("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),m.jsx(tt,{to:"/blog",className:`hover:text-red-600 transition-colors duration-200 ${v("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),m.jsx(tt,{to:"/contact",className:`hover:text-red-600 transition-colors duration-200 ${v("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),u?m.jsx("span",{children:"Loading..."}):o?m.jsxs(m.Fragment,{children:[m.jsxs(tt,{to:"/profile",className:`text-sm hover:text-red-600 transition-colors duration-200 ${v("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",_," "]}),m.jsx("button",{onClick:f,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]}):m.jsx(tt,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Login"}),m.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors duration-200",children:r?"":""})]}),m.jsx("button",{onClick:g,className:"md:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 transition-colors duration-200",children:e?"":""})]}),e&&m.jsxs("div",{className:"md:hidden px-4 py-2 border-t border-stone-200 dark:border-stone-700",children:[m.jsx(tt,{to:"/",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/")?"text-red-600 font-semibold":""}`,children:"Home"}),m.jsx(tt,{to:"/products",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),m.jsx(tt,{to:"/blog",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),m.jsx(tt,{to:"/faq",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/faq")?"text-red-600 font-semibold":""}`,children:"FAQ"}),m.jsx(tt,{to:"/contact",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),m.jsx(tt,{to:"/nutrition",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/nutrition")?"text-red-600 font-semibold":""}`,children:"Nutrition"}),o&&m.jsx(tt,{to:"/profile",onClick:g,className:`block py-2 hover:text-red-600 transition-colors duration-200 ${v("/profile")?"text-red-600 font-semibold":""}`,children:"Profile"}),m.jsx("button",{onClick:()=>{s(),g()},className:"block py-2 hover:text-red-600 transition-colors duration-200",children:r?" Light Mode":" Dark Mode"}),u?m.jsx("span",{className:"block py-2",children:"Loading..."}):o?m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"block py-2 text-sm",children:["Welcome, ",_," "]}),m.jsx("button",{onClick:()=>{f(),g()},className:"block py-2 text-left w-full text-white bg-red-600 hover:bg-red-700 rounded-lg px-4 transition-colors duration-200",children:"Logout"})]}):m.jsx(tt,{to:"/login",onClick:g,className:"block py-2 text-white bg-red-600 hover:bg-red-700 rounded-lg px-4 transition-colors duration-200",children:"Login"})]})]})};var JT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lx=jt.createContext&&jt.createContext(JT),k2=["attr","size","title"];function C2(n,e){if(n==null)return{};var t=P2(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function P2(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Mh(){return Mh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mh.apply(this,arguments)}function ux(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Vh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ux(Object(t),!0).forEach(function(r){A2(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ux(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function A2(n,e,t){return e=I2(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I2(n){var e=R2(n,"string");return typeof e=="symbol"?e:e+""}function R2(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YT(n){return n&&n.map((e,t)=>jt.createElement(e.tag,Vh({key:t},e.attr),YT(e.child)))}function bl(n){return e=>jt.createElement(N2,Mh({attr:Vh({},n.attr)},e),YT(n.child))}function N2(n){var e=t=>{var{attr:r,size:s,title:o}=n,l=C2(n,k2),u=s||t.size||"1em",d;return t.className&&(d=t.className),n.className&&(d=(d?d+" ":"")+n.className),jt.createElement("svg",Mh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:d,style:Vh(Vh({color:n.color||t.color},t.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&jt.createElement("title",null,o),n.children)};return lx!==void 0?jt.createElement(lx.Consumer,null,t=>e(t)):e(JT)}function j2(n){return bl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function D2(n){return bl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function O2(n){return bl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function L2(n){return bl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function M2(n){return bl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function V2(n){return bl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(n)}const $2=()=>{const{isDarkMode:n}=I.useContext(Je),{user:e,logout:t}=I.useContext(Oi),r=Zr();return m.jsx("div",{className:`${n?"dark":""}`,children:m.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[m.jsx(S2,{location:r}),m.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:m.jsx(xT,{})}),m.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:m.jsx(j2,{size:24})}),m.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:m.jsx(L2,{size:24})}),m.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:m.jsx(D2,{size:24})}),m.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:m.jsx(O2,{size:24})}),m.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:m.jsx(M2,{size:24})})]})}),m.jsxs("p",{children:[" ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function rr({to:n,children:e,variant:t,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=t==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return n?m.jsx(tt,{to:n,className:`${o} ${l} ${r}`,...s,children:e}):m.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const F2="/aussie-gut-pack/assets/aussie-BleX4DhZ.png",U2="/aussie-gut-pack/assets/goggins-BJp9afAd.png",cx=[F2,U2],B2=()=>{const[n,e]=I.useState(0);return I.useEffect(()=>{const t=setInterval(()=>{e(r=>(r+1)%cx.length)},5e3);return()=>clearInterval(t)},[]),m.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:cx.map((t,r)=>m.jsx("div",{className:`absolute inset-0 w-[120%] h-full bg-cover bg-center transition-opacity duration-1000 ease-in-out ${r===n?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${t})`}},r))})},R0=I.createContext({});function N0(n){const e=I.useRef(null);return e.current===null&&(e.current=n()),e.current}const j0=typeof window<"u",XT=j0?I.useLayoutEffect:I.useEffect,yf=I.createContext(null),D0=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class z2 extends I.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function W2({children:n,isPresent:e,anchorX:t}){const r=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=I.useContext(D0);return I.useInsertionEffect(()=>{const{width:u,height:d,top:f,left:g,right:v}=o.current;if(e||!s.current||!u||!d)return;const _=t==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const b=document.createElement("style");return l&&(b.nonce=l),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{document.head.removeChild(b)}},[e]),m.jsx(z2,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(n,{ref:s})})}const H2=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const d=N0(q2),f=I.useId(),g=I.useCallback(_=>{d.set(_,!0);for(const b of d.values())if(!b)return;r&&r()},[d,r]),v=I.useMemo(()=>({id:f,initial:e,isPresent:t,custom:s,onExitComplete:g,register:_=>(d.set(_,!1),()=>d.delete(_))}),o?[Math.random(),g]:[t,g]);return I.useMemo(()=>{d.forEach((_,b)=>d.set(b,!1))},[t]),I.useEffect(()=>{!t&&!d.size&&r&&r()},[t]),l==="popLayout"&&(n=m.jsx(W2,{isPresent:t,anchorX:u,children:n})),m.jsx(yf.Provider,{value:v,children:n})};function q2(){return new Map}function ZT(n=!0){const e=I.useContext(yf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=I.useId();I.useEffect(()=>{if(n)return s(o)},[n]);const l=I.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const ih=n=>n.key||"";function dx(n){const e=[];return I.Children.forEach(n,t=>{I.isValidElement(t)&&e.push(t)}),e}const hx=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[d,f]=ZT(l),g=I.useMemo(()=>dx(n),[n]),v=l&&!d?[]:g.map(ih),_=I.useRef(!0),b=I.useRef(g),S=N0(()=>new Map),[j,P]=I.useState(g),[D,W]=I.useState(g);XT(()=>{_.current=!1,b.current=g;for(let B=0;B<D.length;B++){const V=ih(D[B]);v.includes(V)?S.delete(V):S.get(V)!==!0&&S.set(V,!1)}},[D,v.length,v.join("-")]);const F=[];if(g!==j){let B=[...g];for(let V=0;V<D.length;V++){const A=D[V],E=ih(A);v.includes(E)||(B.splice(V,0,A),F.push(A))}return o==="wait"&&F.length&&(B=F),W(dx(B)),P(g),null}const{forceRender:q}=I.useContext(R0);return m.jsx(m.Fragment,{children:D.map(B=>{const V=ih(B),A=l&&!d?!1:g===D||v.includes(V),E=()=>{if(S.has(V))S.set(V,!0);else return;let C=!0;S.forEach(R=>{R||(C=!1)}),C&&(q==null||q(),W(b.current),l&&(f==null||f()),r&&r())};return m.jsx(H2,{isPresent:A,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:A?void 0:E,anchorX:u,children:B},V)})})};function O0(n,e){n.indexOf(e)===-1&&n.push(e)}function L0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Un=n=>n;let eS=Un;const K2={useManualTiming:!1};function M0(n){let e;return()=>(e===void 0&&(e=n()),e)}const al=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class V0{constructor(){this.subscriptions=[]}add(e){return O0(this.subscriptions,e),()=>L0(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ks=n=>n*1e3,Cs=n=>n/1e3;function tS(n,e){return e?n*(1e3/e):0}const G2=M0(()=>window.ScrollTimeline!==void 0);class Q2{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(G2()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class J2 extends Q2{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function $0(n,e){return n?n[e]||n.default||n:void 0}const bg=2e4;function nS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<bg;)e+=t,r=n.next(e);return e>=bg?1/0:e}function F0(n){return typeof n=="function"}function fx(n,e){n.timeline=e,n.onfinish=null}const U0=n=>Array.isArray(n)&&typeof n[0]=="number",Y2={linearEasing:void 0};function X2(n,e){const t=M0(n);return()=>{var r;return(r=Y2[e])!==null&&r!==void 0?r:t()}}const $h=X2(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rS=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=n(al(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function sS(n){return!!(typeof n=="function"&&$h()||!n||typeof n=="string"&&(n in Eg||$h())||U0(n)||Array.isArray(n)&&n.every(sS))}const ju=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Eg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ju([0,.65,.55,1]),circOut:ju([.55,0,1,.45]),backIn:ju([.31,.01,.66,-.59]),backOut:ju([.33,1.53,.69,.99])};function iS(n,e){if(n)return typeof n=="function"&&$h()?rS(n,e):U0(n)?ju(n):Array.isArray(n)?n.map(t=>iS(t,e)||Eg.easeOut):Eg[n]}const oh=["read","resolveKeyframes","update","preRender","render","postRender"],px={value:null};function Z2(n,e){let t=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},d=0;function f(v){l.has(v)&&(g.schedule(v),n()),d++,v(u)}const g={schedule:(v,_=!1,b=!1)=>{const j=b&&s?t:r;return _&&l.add(v),j.has(v)||j.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(u=v,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(f),e&&px.value&&px.value.frameloop[e].push(d),d=0,t.clear(),s=!1,o&&(o=!1,g.process(v))}};return g}const ej=40;function oS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=oh.reduce((D,W)=>(D[W]=Z2(o,e?W:void 0),D),{}),{read:u,resolveKeyframes:d,update:f,preRender:g,render:v,postRender:_}=l,b=()=>{const D=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(D-s.timestamp,ej),1),s.timestamp=D,s.isProcessing=!0,u.process(s),d.process(s),f.process(s),g.process(s),v.process(s),_.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(b))},S=()=>{t=!0,r=!0,s.isProcessing||n(b)};return{schedule:oh.reduce((D,W)=>{const F=l[W];return D[W]=(q,B=!1,V=!1)=>(t||S(),F.schedule(q,B,V)),D},{}),cancel:D=>{for(let W=0;W<oh.length;W++)l[oh[W]].cancel(D)},state:s,steps:l}}const{schedule:nt,cancel:Ti,state:Gt,steps:Mm}=oS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Un,!0),{schedule:B0}=oS(queueMicrotask,!1);let _h;function tj(){_h=void 0}const Wr={now:()=>(_h===void 0&&Wr.set(Gt.isProcessing||K2.useManualTiming?Gt.timestamp:performance.now()),_h),set:n=>{_h=n,queueMicrotask(tj)}},Tr={x:!1,y:!1};function aS(){return Tr.x||Tr.y}function nj(n){return n==="x"||n==="y"?Tr[n]?null:(Tr[n]=!0,()=>{Tr[n]=!1}):Tr.x||Tr.y?null:(Tr.x=Tr.y=!0,()=>{Tr.x=Tr.y=!1})}function rj(n,e,t){var r;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function lS(n,e){const t=rj(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function mx(n){return!(n.pointerType==="touch"||aS())}function sj(n,e,t={}){const[r,s,o]=lS(n,t),l=u=>{if(!mx(u))return;const{target:d}=u,f=e(d,u);if(typeof f!="function"||!d)return;const g=v=>{mx(v)&&(f(v),d.removeEventListener("pointerleave",g))};d.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}function gx(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const uS=(n,e)=>e?n===e?!0:uS(n,e.parentElement):!1,z0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ij=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oj(n){return ij.has(n.tagName)||n.tabIndex!==-1}const Du=new WeakSet;function yx(n){return e=>{e.key==="Enter"&&n(e)}}function Vm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aj=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=yx(()=>{if(Du.has(t))return;Vm(t,"down");const s=yx(()=>{Vm(t,"up")}),o=()=>Vm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function vx(n){return z0(n)&&!aS()}function lj(n,e,t={}){const[r,s,o]=lS(n,t),l=u=>{const d=u.currentTarget;if(!d||!vx(u)||Du.has(d))return;Du.add(d),gx(u,"set");const f=e(d,u),g=(b,S)=>{d.removeEventListener("pointerup",v),d.removeEventListener("pointercancel",_),gx(b,"release"),!(!vx(b)||!Du.has(d))&&(Du.delete(d),typeof f=="function"&&f(b,{success:S}))},v=b=>{(b.isTrusted?uj(b,d instanceof Element?d.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?g(b,!1):g(b,!(d instanceof Element)||uS(d,b.target))},_=b=>{g(b,!1)};d.addEventListener("pointerup",v,s),d.addEventListener("pointercancel",_,s),d.addEventListener("lostpointercapture",_,s)};return r.forEach(u=>{u=t.useGlobalTarget?window:u;let d=!1;u instanceof HTMLElement&&(d=!0,!oj(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0)),u.addEventListener("pointerdown",l,s),d&&u.addEventListener("focus",f=>aj(f,s),s)}),o}function uj(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}const _x=30,cj=n=>!isNaN(parseFloat(n));class dj{constructor(e,t={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Wr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Wr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new V0);const r=this.events[e].add(t);return e==="change"?()=>{r(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>_x)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,_x);return tS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nc(n,e){return new dj(n,e)}const cS=I.createContext({strict:!1}),wx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ll={};for(const n in wx)ll[n]={isEnabled:e=>wx[n].some(t=>!!e[t])};function hj(n){for(const e in n)ll[e]={...ll[e],...n[e]}}const fj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Fh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||fj.has(n)}let dS=n=>!Fh(n);function pj(n){n&&(dS=e=>e.startsWith("on")?!Fh(e):n(e))}try{pj(require("@emotion/is-prop-valid").default)}catch{}function mj(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(dS(s)||t===!0&&Fh(s)||!e&&!Fh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function gj(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const vf=I.createContext({});function _f(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function rc(n){return typeof n=="string"||Array.isArray(n)}const W0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],H0=["initial",...W0];function wf(n){return _f(n.animate)||H0.some(e=>rc(n[e]))}function hS(n){return!!(wf(n)||n.variants)}function yj(n,e){if(wf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||rc(t)?t:void 0,animate:rc(r)?r:void 0}}return n.inherit!==!1?e:{}}function vj(n){const{initial:e,animate:t}=yj(n,I.useContext(vf));return I.useMemo(()=>({initial:e,animate:t}),[xx(e),xx(t)])}function xx(n){return Array.isArray(n)?n.join(" "):n}const _j=Symbol.for("motionComponentSymbol");function qa(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function wj(n,e,t){return I.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):qa(t)&&(t.current=r))},[e])}const q0=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),xj="framerAppearId",fS="data-"+q0(xj),pS=I.createContext({});function bj(n,e,t,r,s){var o,l;const{visualElement:u}=I.useContext(vf),d=I.useContext(cS),f=I.useContext(yf),g=I.useContext(D0).reducedMotion,v=I.useRef(null);r=r||d.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:u,props:t,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g}));const _=v.current,b=I.useContext(pS);_&&!_.projection&&s&&(_.type==="html"||_.type==="svg")&&Ej(v.current,t,s,b);const S=I.useRef(!1);I.useInsertionEffect(()=>{_&&S.current&&_.update(t,f)});const j=t[fS],P=I.useRef(!!j&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,j))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,j)));return XT(()=>{_&&(S.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),B0.render(_.render),P.current&&_.animationState&&_.animationState.animateChanges())}),I.useEffect(()=>{_&&(!P.current&&_.animationState&&_.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)===null||D===void 0||D.call(window,j)}),P.current=!1))}),_}function Ej(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:d,layoutRoot:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:mS(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&qa(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:f})}function mS(n){if(n)return n.options.allowProjection!==!1?n.projection:mS(n.parent)}function Tj({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){var o,l;n&&hj(n);function u(f,g){let v;const _={...I.useContext(D0),...f,layoutId:Sj(f)},{isStatic:b}=_,S=vj(f),j=r(f,b);if(!b&&j0){kj();const P=Cj(_);v=P.MeasureLayout,S.visualElement=bj(s,j,_,e,P.ProjectionNode)}return m.jsxs(vf.Provider,{value:S,children:[v&&S.visualElement?m.jsx(v,{visualElement:S.visualElement,..._}):null,t(s,f,wj(j,S.visualElement,g),j,b,S.visualElement)]})}u.displayName=`motion.${typeof s=="string"?s:`create(${(l=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&l!==void 0?l:""})`}`;const d=I.forwardRef(u);return d[_j]=s,d}function Sj({layoutId:n}){const e=I.useContext(R0).id;return e&&n!==void 0?e+"-"+n:n}function kj(n,e){I.useContext(cS).strict}function Cj(n){const{drag:e,layout:t}=ll;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const gS=n=>e=>typeof e=="string"&&e.startsWith(n),K0=gS("--"),Pj=gS("var(--"),G0=n=>Pj(n)?Aj.test(n.split("/*")[0].trim()):!1,Aj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,sc={};function Ij(n){for(const e in n)sc[e]=n[e],K0(e)&&(sc[e].isCSSVariable=!0)}const El=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Oo=new Set(El);function yS(n,{layout:e,layoutId:t}){return Oo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!sc[n]||n==="opacity")}const un=n=>!!(n&&n.getVelocity),vS=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Is=(n,e,t)=>t>e?e:t<n?n:t,Tl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ic={...Tl,transform:n=>Is(0,1,n)},ah={...Tl,default:1},bc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ui=bc("deg"),Hr=bc("%"),Pe=bc("px"),Rj=bc("vh"),Nj=bc("vw"),bx={...Hr,parse:n=>Hr.parse(n)/100,transform:n=>Hr.transform(n*100)},jj={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe},Dj={rotate:ui,rotateX:ui,rotateY:ui,rotateZ:ui,scale:ah,scaleX:ah,scaleY:ah,scaleZ:ah,skew:ui,skewX:ui,skewY:ui,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:ic,originX:bx,originY:bx,originZ:Pe},Ex={...Tl,transform:Math.round},Q0={...jj,...Dj,zIndex:Ex,size:Pe,fillOpacity:ic,strokeOpacity:ic,numOctaves:Ex},Oj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lj=El.length;function Mj(n,e,t){let r="",s=!0;for(let o=0;o<Lj;o++){const l=El[o],u=n[l];if(u===void 0)continue;let d=!0;if(typeof u=="number"?d=u===(l.startsWith("scale")?1:0):d=parseFloat(u)===0,!d||t){const f=vS(u,Q0[l]);if(!d){s=!1;const g=Oj[l]||l;r+=`${g}(${f}) `}t&&(e[l]=f)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function J0(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,u=!1;for(const d in e){const f=e[d];if(Oo.has(d)){l=!0;continue}else if(K0(d)){s[d]=f;continue}else{const g=vS(f,Q0[d]);d.startsWith("origin")?(u=!0,o[d]=g):r[d]=g}}if(e.transform||(l||t?r.transform=Mj(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=o;r.transformOrigin=`${d} ${f} ${g}`}}const Y0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _S(n,e,t){for(const r in e)!un(e[r])&&!yS(r,t)&&(n[r]=e[r])}function Vj({transformTemplate:n},e){return I.useMemo(()=>{const t=Y0();return J0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function $j(n,e){const t=n.style||{},r={};return _S(r,t,n),Object.assign(r,Vj(n,e)),r}function Fj(n,e){const t={},r=$j(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Uj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function X0(n){return typeof n!="string"||n.includes("-")?!1:!!(Uj.indexOf(n)>-1||/[A-Z]/u.test(n))}const Bj={offset:"stroke-dashoffset",array:"stroke-dasharray"},zj={offset:"strokeDashoffset",array:"strokeDasharray"};function Wj(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?Bj:zj;n[o.offset]=Pe.transform(-r);const l=Pe.transform(e),u=Pe.transform(t);n[o.array]=`${l} ${u}`}function Tx(n,e,t){return typeof n=="string"?n:Pe.transform(e+t*n)}function Hj(n,e,t){const r=Tx(e,n.x,n.width),s=Tx(t,n.y,n.height);return`${r} ${s}`}function Z0(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:d=0,...f},g,v){if(J0(n,f,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:b,dimensions:S}=n;_.transform&&(S&&(b.transform=_.transform),delete _.transform),S&&(s!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=Hj(S,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),r!==void 0&&(_.scale=r),l!==void 0&&Wj(_,l,u,d,!1)}const wS=()=>({...Y0(),attrs:{}}),ey=n=>typeof n=="string"&&n.toLowerCase()==="svg";function qj(n,e,t,r){const s=I.useMemo(()=>{const o=wS();return Z0(o,e,ey(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};_S(o,n.style,n),s.style={...o,...s.style}}return s}function Kj(n=!1){return(t,r,s,{latestValues:o},l)=>{const d=(X0(t)?qj:Fj)(r,o,l,t),f=mj(r,typeof t=="string",n),g=t!==I.Fragment?{...f,...d,ref:s}:{},{children:v}=r,_=I.useMemo(()=>un(v)?v.get():v,[v]);return I.createElement(t,{...g,children:_})}}function Sx(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ty(n,e,t,r){if(typeof e=="function"){const[s,o]=Sx(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=Sx(r);e=e(t!==void 0?t:n.custom,s,o)}return e}const Tg=n=>Array.isArray(n),Gj=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Qj=n=>Tg(n)?n[n.length-1]||0:n;function wh(n){const e=un(n)?n.get():n;return Gj(e)?e.toValue():e}function Jj({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,s,o){const l={latestValues:Yj(r,s,o,n),renderState:e()};return t&&(l.onMount=u=>t({props:r,current:u,...l}),l.onUpdate=u=>t(u)),l}const xS=n=>(e,t)=>{const r=I.useContext(vf),s=I.useContext(yf),o=()=>Jj(n,e,r,s);return t?o():N0(o)};function Yj(n,e,t,r){const s={},o=r(n,{});for(const _ in o)s[_]=wh(o[_]);let{initial:l,animate:u}=n;const d=wf(n),f=hS(n);e&&f&&!d&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!_f(v)){const _=Array.isArray(v)?v:[v];for(let b=0;b<_.length;b++){const S=ty(n,_[b]);if(S){const{transitionEnd:j,transition:P,...D}=S;for(const W in D){let F=D[W];if(Array.isArray(F)){const q=g?F.length-1:0;F=F[q]}F!==null&&(s[W]=F)}for(const W in j)s[W]=j[W]}}}return s}function ny(n,e,t){var r;const{style:s}=n,o={};for(const l in s)(un(s[l])||e.style&&un(e.style[l])||yS(l,n)||((r=t==null?void 0:t.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[l]=s[l]);return o}const Xj={useVisualState:xS({scrapeMotionValuesFromProps:ny,createRenderState:Y0})};function bS(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function ES(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}const TS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function SS(n,e,t,r){ES(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(TS.has(s)?s:q0(s),e.attrs[s])}function kS(n,e,t){const r=ny(n,e,t);for(const s in n)if(un(n[s])||un(e[s])){const o=El.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}const kx=["x","y","width","height","cx","cy","r"],Zj={useVisualState:xS({scrapeMotionValuesFromProps:kS,createRenderState:wS,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:s})=>{if(!t)return;let o=!!n.drag;if(!o){for(const u in s)if(Oo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<kx.length;u++){const d=kx[u];n[d]!==e[d]&&(l=!0)}l&&nt.read(()=>{bS(t,r),nt.render(()=>{Z0(r,s,ey(t.tagName),n.transformTemplate),SS(t,r)})})}})};function eD(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...X0(r)?Zj:Xj,preloadedFeatures:n,useRender:Kj(s),createVisualElement:e,Component:r};return Tj(l)}}function oc(n,e,t){const r=n.getProps();return ty(r,e,t!==void 0?t:r.custom,n)}const CS=new Set(["width","height","top","left","right","bottom",...El]);function tD(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,nc(t))}function nD(n,e){const t=oc(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const u=Qj(o[l]);tD(n,l,u)}}function rD(n){return!!(un(n)&&n.add)}function Sg(n,e){const t=n.getValue("willChange");if(rD(t))return t.add(e)}function PS(n){return n.props[fS]}const AS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,sD=1e-7,iD=12;function oD(n,e,t,r,s){let o,l,u=0;do l=e+(t-e)/2,o=AS(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>sD&&++u<iD);return l}function Ec(n,e,t,r){if(n===e&&t===r)return Un;const s=o=>oD(o,0,1,n,t);return o=>o===0||o===1?o:AS(s(o),e,r)}const IS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,RS=n=>e=>1-n(1-e),NS=Ec(.33,1.53,.69,.99),ry=RS(NS),jS=IS(ry),DS=n=>(n*=2)<1?.5*ry(n):.5*(2-Math.pow(2,-10*(n-1))),sy=n=>1-Math.sin(Math.acos(n)),OS=RS(sy),LS=IS(sy),MS=n=>/^0[^.\s]+$/u.test(n);function aD(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||MS(n):!0}const Wu=n=>Math.round(n*1e5)/1e5,iy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lD(n){return n==null}const uD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oy=(n,e)=>t=>!!(typeof t=="string"&&uD.test(t)&&t.startsWith(n)||e&&!lD(t)&&Object.prototype.hasOwnProperty.call(t,e)),VS=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(iy);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},cD=n=>Is(0,255,n),$m={...Tl,transform:n=>Math.round(cD(n))},Eo={test:oy("rgb","red"),parse:VS("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+$m.transform(n)+", "+$m.transform(e)+", "+$m.transform(t)+", "+Wu(ic.transform(r))+")"};function dD(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const kg={test:oy("#"),parse:dD,transform:Eo.transform},Ka={test:oy("hsl","hue"),parse:VS("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Hr.transform(Wu(e))+", "+Hr.transform(Wu(t))+", "+Wu(ic.transform(r))+")"},on={test:n=>Eo.test(n)||kg.test(n)||Ka.test(n),parse:n=>Eo.test(n)?Eo.parse(n):Ka.test(n)?Ka.parse(n):kg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Eo.transform(n):Ka.transform(n)},hD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fD(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(iy))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(hD))===null||t===void 0?void 0:t.length)||0)>0}const $S="number",FS="color",pD="var",mD="var(",Cx="${}",gD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ac(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(gD,d=>(on.test(d)?(r.color.push(o),s.push(FS),t.push(on.parse(d))):d.startsWith(mD)?(r.var.push(o),s.push(pD),t.push(d)):(r.number.push(o),s.push($S),t.push(parseFloat(d))),++o,Cx)).split(Cx);return{values:t,split:u,indexes:r,types:s}}function US(n){return ac(n).values}function BS(n){const{split:e,types:t}=ac(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=t[l];u===$S?o+=Wu(s[l]):u===FS?o+=on.transform(s[l]):o+=s[l]}return o}}const yD=n=>typeof n=="number"?0:n;function vD(n){const e=US(n);return BS(n)(e.map(yD))}const Si={test:fD,parse:US,createTransformer:BS,getAnimatableNone:vD},_D=new Set(["brightness","contrast","saturate","opacity"]);function wD(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(iy)||[];if(!r)return n;const s=t.replace(r,"");let o=_D.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const xD=/\b([a-z-]*)\(.*?\)/gu,Cg={...Si,getAnimatableNone:n=>{const e=n.match(xD);return e?e.map(wD).join(" "):n}},bD={...Q0,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:Cg,WebkitFilter:Cg},zS=n=>bD[n];function WS(n,e){let t=zS(n);return t!==Cg&&(t=Si),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const ED=new Set(["auto","none","0"]);function TD(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!ED.has(o)&&ac(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=WS(t,s)}const To=n=>n*180/Math.PI,Pg=n=>{const e=To(Math.atan2(n[1],n[0]));return Ag(e)},SD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Pg,rotateZ:Pg,skewX:n=>To(Math.atan(n[1])),skewY:n=>To(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Ag=n=>(n=n%360,n<0&&(n+=360),n),Px=Pg,Ax=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Ix=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),kD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ax,scaleY:Ix,scale:n=>(Ax(n)+Ix(n))/2,rotateX:n=>Ag(To(Math.atan2(n[6],n[5]))),rotateY:n=>Ag(To(Math.atan2(-n[2],n[0]))),rotateZ:Px,rotate:Px,skewX:n=>To(Math.atan(n[4])),skewY:n=>To(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Rx(n){return n.includes("scale")?1:0}function Ig(n,e){if(!n||n==="none")return Rx(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=kD,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=SD,s=u}if(!s)return Rx(e);const o=r[e],l=s[1].split(",").map(PD);return typeof o=="function"?o(l):l[o]}const CD=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Ig(t,e)};function PD(n){return parseFloat(n.trim())}const Nx=n=>n===Tl||n===Pe,AD=new Set(["x","y","z"]),ID=El.filter(n=>!AD.has(n));function RD(n){const e=[];return ID.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ul={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Ig(e,"x"),y:(n,{transform:e})=>Ig(e,"y")};ul.translateX=ul.x;ul.translateY=ul.y;const ko=new Set;let Rg=!1,Ng=!1;function HS(){if(Ng){const n=Array.from(ko).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=RD(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))===null||u===void 0||u.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ng=!1,Rg=!1,ko.forEach(n=>n.complete()),ko.clear()}function qS(){ko.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Ng=!0)})}function ND(){qS(),HS()}class ay{constructor(e,t,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ko.add(this),Rg||(Rg=!0,nt.read(qS),nt.resolveKeyframes(HS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const d=r.readValue(t,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ko.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ko.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const KS=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),jD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function DD(n){const e=jD.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function GS(n,e,t=1){const[r,s]=DD(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return KS(l)?parseFloat(l):l}return G0(s)?GS(s,e,t+1):s}const QS=n=>e=>e.test(n),OD={test:n=>n==="auto",parse:n=>n},JS=[Tl,Pe,Hr,ui,Nj,Rj,OD],jx=n=>JS.find(QS(n));class YS extends ay{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),G0(f))){const g=GS(f,t.current);g!==void 0&&(e[d]=g),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!CS.has(r)||e.length!==2)return;const[s,o]=e,l=jx(s),u=jx(o);if(l!==u)if(Nx(l)&&Nx(u))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)aD(e[s])&&r.push(s);r.length&&TD(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ul[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const o=t.getValue(r);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=ul[r](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,f])=>{t.getValue(d).set(f)}),this.resolveNoneKeyframes()}}const Dx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Si.test(n)||n==="0")&&!n.startsWith("url("));function LD(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function MD(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=Dx(s,e),u=Dx(o,e);return!l||!u?!1:LD(n)||(t==="spring"||F0(t))&&r}const VD=n=>n!==null;function xf(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(VD),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const $D=40;class XS{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Wr.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>$D?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&ND(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Wr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:u,onUpdate:d,isGenerator:f}=this.options;if(!f&&!MD(e,r,s,o))if(l)this.options.duration=0;else{d&&d(xf(e,this.options,t)),u&&u(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,t);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...g},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const dt=(n,e,t)=>n+(e-n)*t;function Fm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function FD({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=Fm(d,u,n+1/3),o=Fm(d,u,n),l=Fm(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Uh(n,e){return t=>t>0?e:n}const Um=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},UD=[kg,Eo,Ka],BD=n=>UD.find(e=>e.test(n));function Ox(n){const e=BD(n);if(!e)return!1;let t=e.parse(n);return e===Ka&&(t=FD(t)),t}const Lx=(n,e)=>{const t=Ox(n),r=Ox(e);if(!t||!r)return Uh(n,e);const s={...t};return o=>(s.red=Um(t.red,r.red,o),s.green=Um(t.green,r.green,o),s.blue=Um(t.blue,r.blue,o),s.alpha=dt(t.alpha,r.alpha,o),Eo.transform(s))},zD=(n,e)=>t=>e(n(t)),Tc=(...n)=>n.reduce(zD),jg=new Set(["none","hidden"]);function WD(n,e){return jg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function HD(n,e){return t=>dt(n,e,t)}function ly(n){return typeof n=="number"?HD:typeof n=="string"?G0(n)?Uh:on.test(n)?Lx:GD:Array.isArray(n)?ZS:typeof n=="object"?on.test(n)?Lx:qD:Uh}function ZS(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>ly(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function qD(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=ly(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function KD(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=n.indexes[l][s[l]],d=(t=n.values[u])!==null&&t!==void 0?t:0;r[o]=d,s[l]++}return r}const GD=(n,e)=>{const t=Si.createTransformer(e),r=ac(n),s=ac(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?jg.has(n)&&!s.values.length||jg.has(e)&&!r.values.length?WD(n,e):Tc(ZS(KD(r,s),s.values),t):Uh(n,e)};function ek(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?dt(n,e,t):ly(n)(n,e)}const QD=5;function tk(n,e,t){const r=Math.max(e-QD,0);return tS(t-n(r),e-r)}const pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mx=.001;function JD({duration:n=pt.duration,bounce:e=pt.bounce,velocity:t=pt.velocity,mass:r=pt.mass}){let s,o,l=1-e;l=Is(pt.minDamping,pt.maxDamping,l),n=Is(pt.minDuration,pt.maxDuration,Cs(n)),l<1?(s=f=>{const g=f*l,v=g*n,_=g-t,b=Dg(f,l),S=Math.exp(-v);return Mx-_/b*S},o=f=>{const v=f*l*n,_=v*t+t,b=Math.pow(l,2)*Math.pow(f,2)*n,S=Math.exp(-v),j=Dg(Math.pow(f,2),l);return(-s(f)+Mx>0?-1:1)*((_-b)*S)/j}):(s=f=>{const g=Math.exp(-f*n),v=(f-t)*n+1;return-.001+g*v},o=f=>{const g=Math.exp(-f*n),v=(t-f)*(n*n);return g*v});const u=5/n,d=XD(s,o,u);if(n=ks(n),isNaN(d))return{stiffness:pt.stiffness,damping:pt.damping,duration:n};{const f=Math.pow(d,2)*r;return{stiffness:f,damping:l*2*Math.sqrt(r*f),duration:n}}}const YD=12;function XD(n,e,t){let r=t;for(let s=1;s<YD;s++)r=r-n(r)/e(r);return r}function Dg(n,e){return n*Math.sqrt(1-e*e)}const ZD=["duration","bounce"],eO=["stiffness","damping","mass"];function Vx(n,e){return e.some(t=>n[t]!==void 0)}function tO(n){let e={velocity:pt.velocity,stiffness:pt.stiffness,damping:pt.damping,mass:pt.mass,isResolvedFromDuration:!1,...n};if(!Vx(n,eO)&&Vx(n,ZD))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*Is(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:pt.mass,stiffness:s,damping:o}}else{const t=JD(n);e={...e,...t,mass:pt.mass},e.isResolvedFromDuration=!0}return e}function nk(n=pt.visualDuration,e=pt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:d,damping:f,mass:g,duration:v,velocity:_,isResolvedFromDuration:b}=tO({...t,velocity:-Cs(t.velocity||0)}),S=_||0,j=f/(2*Math.sqrt(d*g)),P=l-o,D=Cs(Math.sqrt(d/g)),W=Math.abs(P)<5;r||(r=W?pt.restSpeed.granular:pt.restSpeed.default),s||(s=W?pt.restDelta.granular:pt.restDelta.default);let F;if(j<1){const B=Dg(D,j);F=V=>{const A=Math.exp(-j*D*V);return l-A*((S+j*D*P)/B*Math.sin(B*V)+P*Math.cos(B*V))}}else if(j===1)F=B=>l-Math.exp(-D*B)*(P+(S+D*P)*B);else{const B=D*Math.sqrt(j*j-1);F=V=>{const A=Math.exp(-j*D*V),E=Math.min(B*V,300);return l-A*((S+j*D*P)*Math.sinh(E)+B*P*Math.cosh(E))/B}}const q={calculatedDuration:b&&v||null,next:B=>{const V=F(B);if(b)u.done=B>=v;else{let A=0;j<1&&(A=B===0?ks(S):tk(F,B,V));const E=Math.abs(A)<=r,C=Math.abs(l-V)<=s;u.done=E&&C}return u.value=u.done?l:V,u},toString:()=>{const B=Math.min(nS(q),bg),V=rS(A=>q.next(B*A).value,B,30);return B+"ms "+V}};return q}function $x({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:d,restDelta:f=.5,restSpeed:g}){const v=n[0],_={done:!1,value:v},b=E=>u!==void 0&&E<u||d!==void 0&&E>d,S=E=>u===void 0?d:d===void 0||Math.abs(u-E)<Math.abs(d-E)?u:d;let j=t*e;const P=v+j,D=l===void 0?P:l(P);D!==P&&(j=D-v);const W=E=>-j*Math.exp(-E/r),F=E=>D+W(E),q=E=>{const C=W(E),R=F(E);_.done=Math.abs(C)<=f,_.value=_.done?D:R};let B,V;const A=E=>{b(_.value)&&(B=E,V=nk({keyframes:[_.value,S(_.value)],velocity:tk(F,E,_.value),damping:s,stiffness:o,restDelta:f,restSpeed:g}))};return A(0),{calculatedDuration:null,next:E=>{let C=!1;return!V&&B===void 0&&(C=!0,q(E),A(E)),B!==void 0&&E>=B?V.next(E-B):(!C&&q(E),_)}}}const nO=Ec(.42,0,1,1),rO=Ec(0,0,.58,1),rk=Ec(.42,0,.58,1),sO=n=>Array.isArray(n)&&typeof n[0]!="number",iO={linear:Un,easeIn:nO,easeInOut:rk,easeOut:rO,circIn:sy,circInOut:LS,circOut:OS,backIn:ry,backInOut:jS,backOut:NS,anticipate:DS},Fx=n=>{if(U0(n)){eS(n.length===4);const[e,t,r,s]=n;return Ec(e,t,r,s)}else if(typeof n=="string")return iO[n];return n};function oO(n,e,t){const r=[],s=t||ek,o=n.length-1;for(let l=0;l<o;l++){let u=s(n[l],n[l+1]);if(e){const d=Array.isArray(e)?e[l]||Un:e;u=Tc(d,u)}r.push(u)}return r}function aO(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(eS(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=oO(e,r,s),d=u.length,f=g=>{if(l&&g<n[0])return e[0];let v=0;if(d>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const _=al(n[v],n[v+1],g);return u[v](_)};return t?g=>f(Is(n[0],n[o-1],g)):f}function lO(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=al(0,e,r);n.push(dt(t,1,s))}}function uO(n){const e=[0];return lO(e,n.length-1),e}function cO(n,e){return n.map(t=>t*e)}function dO(n,e){return n.map(()=>e||rk).splice(0,n.length-1)}function Bh({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=sO(r)?r.map(Fx):Fx(r),o={done:!1,value:e[0]},l=cO(t&&t.length===e.length?t:uO(e),n),u=aO(l,e,{ease:Array.isArray(s)?s:dO(e,s)});return{calculatedDuration:n,next:d=>(o.value=u(d),o.done=d>=n,o)}}const hO=n=>{const e=({timestamp:t})=>n(t);return{start:()=>nt.update(e,!0),stop:()=>Ti(e),now:()=>Gt.isProcessing?Gt.timestamp:Wr.now()}},fO={decay:$x,inertia:$x,tween:Bh,keyframes:Bh,spring:nk},pO=n=>n/100;class uy extends XS{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:t,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||ay,u=(d,f)=>this.onKeyframesResolved(d,f);this.resolver=new l(o,u,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,u=F0(t)?t:fO[t]||Bh;let d,f;u!==Bh&&typeof e[0]!="number"&&(d=Tc(pO,ek(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=nS(g));const{calculatedDuration:v}=g,_=v+s,b=_*(r+1)-s;return{generator:g,mirroredGenerator:f,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:_,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:d,calculatedDuration:f,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:_,repeat:b,repeatType:S,repeatDelay:j,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const D=this.currentTime-_*(this.speed>=0?1:-1),W=this.speed>=0?D<0:D>g;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let F=this.currentTime,q=o;if(b){const E=Math.min(this.currentTime,g)/v;let C=Math.floor(E),R=E%1;!R&&E>=1&&(R=1),R===1&&C--,C=Math.min(C,b+1),!!(C%2)&&(S==="reverse"?(R=1-R,j&&(R-=j/v)):S==="mirror"&&(q=l)),F=Is(0,1,R)*v}const B=W?{done:!1,value:d[0]}:q.next(F);u&&(B.value=u(B.value));let{done:V}=B;!W&&f!==null&&(V=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return A&&s!==void 0&&(B.value=xf(d,this.options,s)),P&&P(B.value),A&&this.finish(),B}get duration(){const{resolved:e}=this;return e?Cs(e.calculatedDuration):0}get time(){return Cs(this.currentTime)}set time(e){e=ks(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Cs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=hO,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const mO=new Set(["opacity","clipPath","filter","transform"]);function gO(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:d}={}){const f={[e]:t};d&&(f.offset=d);const g=iS(u,s);return Array.isArray(g)&&(f.easing=g),n.animate(f,{delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const yO=M0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zh=10,vO=2e4;function _O(n){return F0(n.type)||n.type==="spring"||!sS(n.ease)}function wO(n,e){const t=new uy({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let o=0;for(;!r.done&&o<vO;)r=t.sample(o),s.push(r.value),o+=zh;return{times:void 0,keyframes:s,duration:o-zh,ease:"linear"}}const sk={anticipate:DS,backInOut:jS,circInOut:LS};function xO(n){return n in sk}class Ux extends XS{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new YS(o,(l,u)=>this.onKeyframesResolved(l,u),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:s,ease:o,type:l,motionValue:u,name:d,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&$h()&&xO(o)&&(o=sk[o]),_O(this.options)){const{onComplete:v,onUpdate:_,motionValue:b,element:S,...j}=this.options,P=wO(e,j);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,s=P.times,o=P.ease,l="keyframes"}const g=gO(u.owner.current,d,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=f??this.calcStartTime(),this.pendingTimeline?(fx(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;u.set(xf(e,this.options,t)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Cs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Cs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=ks(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Un;const{animation:r}=t;fx(r,e)}return Un}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:o,ease:l,times:u}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:g,onComplete:v,element:_,...b}=this.options,S=new uy({...b,keyframes:r,duration:s,type:o,ease:l,times:u,isGenerator:!0}),j=ks(this.time);f.setWithVelocity(S.sample(j-zh).value,S.sample(j).value,zh)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:o,damping:l,type:u}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return yO()&&r&&mO.has(r)&&!d&&!f&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}}const bO={type:"spring",stiffness:500,damping:25,restSpeed:10},EO=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),TO={type:"keyframes",duration:.8},SO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kO=(n,{keyframes:e})=>e.length>2?TO:Oo.has(n)?n.startsWith("scale")?EO(e[1]):bO:SO;function CO({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:d,elapsed:f,...g}){return!!Object.keys(g).length}const cy=(n,e,t,r={},s,o)=>l=>{const u=$0(r,n)||{},d=u.delay||r.delay||0;let{elapsed:f=0}=r;f=f-ks(d);let g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:_=>{e.set(_),u.onUpdate&&u.onUpdate(_)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:s};CO(u)||(g={...g,...kO(n,g)}),g.duration&&(g.duration=ks(g.duration)),g.repeatDelay&&(g.repeatDelay=ks(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const _=xf(g.keyframes,u);if(_!==void 0)return nt.update(()=>{g.onUpdate(_),g.onComplete()}),new J2([])}return!o&&Ux.supports(g)?new Ux(g):new uy(g)};function PO({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function ik(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var o;let{transition:l=n.getDefaultTransition(),transitionEnd:u,...d}=e;r&&(l=r);const f=[],g=s&&n.animationState&&n.animationState.getState()[s];for(const v in d){const _=n.getValue(v,(o=n.latestValues[v])!==null&&o!==void 0?o:null),b=d[v];if(b===void 0||g&&PO(g,v))continue;const S={delay:t,...$0(l||{},v)};let j=!1;if(window.MotionHandoffAnimation){const D=PS(n);if(D){const W=window.MotionHandoffAnimation(D,v,nt);W!==null&&(S.startTime=W,j=!0)}}Sg(n,v),_.start(cy(v,_,b,n.shouldReduceMotion&&CS.has(v)?{type:!1}:S,n,j));const P=_.animation;P&&f.push(P)}return u&&Promise.all(f).then(()=>{nt.update(()=>{u&&nD(n,u)})}),f}function Og(n,e,t={}){var r;const s=oc(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(o=t.transitionOverride);const l=s?()=>Promise.all(ik(n,s,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:_}=o;return AO(n,e,g+f,v,_,t)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,g]=d==="beforeChildren"?[l,u]:[u,l];return f().then(()=>g())}else return Promise.all([l(),u(t.delay)])}function AO(n,e,t=0,r=0,s=1,o){const l=[],u=(n.variantChildren.size-1)*r,d=s===1?(f=0)=>f*r:(f=0)=>u-f*r;return Array.from(n.variantChildren).sort(IO).forEach((f,g)=>{f.notify("AnimationStart",e),l.push(Og(f,e,{...o,delay:t+d(g)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(l)}function IO(n,e){return n.sortNodePosition(e)}function RO(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>Og(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=Og(n,e,t);else{const s=typeof e=="function"?oc(n,e,t.custom):e;r=Promise.all(ik(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function ok(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const NO=H0.length;function ak(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?ak(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<NO;t++){const r=H0[t],s=n.props[r];(rc(s)||s===!1)&&(e[r]=s)}return e}const jO=[...W0].reverse(),DO=W0.length;function OO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>RO(n,t,r)))}function LO(n){let e=OO(n),t=Bx(),r=!0;const s=d=>(f,g)=>{var v;const _=oc(n,g,d==="exit"?(v=n.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(_){const{transition:b,transitionEnd:S,...j}=_;f={...f,...j,...S}}return f};function o(d){e=d(n)}function l(d){const{props:f}=n,g=ak(n.parent)||{},v=[],_=new Set;let b={},S=1/0;for(let P=0;P<DO;P++){const D=jO[P],W=t[D],F=f[D]!==void 0?f[D]:g[D],q=rc(F),B=D===d?W.isActive:null;B===!1&&(S=P);let V=F===g[D]&&F!==f[D]&&q;if(V&&r&&n.manuallyAnimateOnMount&&(V=!1),W.protectedKeys={...b},!W.isActive&&B===null||!F&&!W.prevProp||_f(F)||typeof F=="boolean")continue;const A=MO(W.prevProp,F);let E=A||D===d&&W.isActive&&!V&&q||P>S&&q,C=!1;const R=Array.isArray(F)?F:[F];let M=R.reduce(s(D),{});B===!1&&(M={});const{prevResolvedValues:z={}}=W,O={...z,...M},se=we=>{E=!0,_.has(we)&&(C=!0,_.delete(we)),W.needsAnimating[we]=!0;const J=n.getValue(we);J&&(J.liveStyle=!1)};for(const we in O){const J=M[we],Z=z[we];if(b.hasOwnProperty(we))continue;let te=!1;Tg(J)&&Tg(Z)?te=!ok(J,Z):te=J!==Z,te?J!=null?se(we):_.add(we):J!==void 0&&_.has(we)?se(we):W.protectedKeys[we]=!0}W.prevProp=F,W.prevResolvedValues=M,W.isActive&&(b={...b,...M}),r&&n.blockInitialAnimation&&(E=!1),E&&(!(V&&A)||C)&&v.push(...R.map(we=>({animation:we,options:{type:D}})))}if(_.size){const P={};if(typeof f.initial!="boolean"){const D=oc(n,Array.isArray(f.initial)?f.initial[0]:f.initial);D&&D.transition&&(P.transition=D.transition)}_.forEach(D=>{const W=n.getBaseTarget(D),F=n.getValue(D);F&&(F.liveStyle=!0),P[D]=W??null}),v.push({animation:P})}let j=!!v.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(v):Promise.resolve()}function u(d,f){var g;if(t[d].isActive===f)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(_=>{var b;return(b=_.animationState)===null||b===void 0?void 0:b.setActive(d,f)}),t[d].isActive=f;const v=l(d);for(const _ in t)t[_].protectedKeys={};return v}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=Bx(),r=!0}}}function MO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ok(e,n):!1}function mo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Bx(){return{animate:mo(!0),whileInView:mo(),whileHover:mo(),whileTap:mo(),whileDrag:mo(),whileFocus:mo(),exit:mo()}}class Li{constructor(e){this.isMounted=!1,this.node=e}update(){}}class VO extends Li{constructor(e){super(e),e.animationState||(e.animationState=LO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_f(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let $O=0;class FO extends Li{constructor(){super(...arguments),this.id=$O++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const UO={animation:{Feature:VO},exit:{Feature:FO}};function lc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Sc(n){return{point:{x:n.pageX,y:n.pageY}}}const BO=n=>e=>z0(e)&&n(e,Sc(e));function Hu(n,e,t,r){return lc(n,e,BO(t),r)}function lk({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function zO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function WO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const uk=1e-4,HO=1-uk,qO=1+uk,ck=.01,KO=0-ck,GO=0+ck;function yn(n){return n.max-n.min}function QO(n,e,t){return Math.abs(n-e)<=t}function zx(n,e,t,r=.5){n.origin=r,n.originPoint=dt(e.min,e.max,n.origin),n.scale=yn(t)/yn(e),n.translate=dt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=HO&&n.scale<=qO||isNaN(n.scale))&&(n.scale=1),(n.translate>=KO&&n.translate<=GO||isNaN(n.translate))&&(n.translate=0)}function qu(n,e,t,r){zx(n.x,e.x,t.x,r?r.originX:void 0),zx(n.y,e.y,t.y,r?r.originY:void 0)}function Wx(n,e,t){n.min=t.min+e.min,n.max=n.min+yn(e)}function JO(n,e,t){Wx(n.x,e.x,t.x),Wx(n.y,e.y,t.y)}function Hx(n,e,t){n.min=e.min-t.min,n.max=n.min+yn(e)}function Ku(n,e,t){Hx(n.x,e.x,t.x),Hx(n.y,e.y,t.y)}const qx=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ga=()=>({x:qx(),y:qx()}),Kx=()=>({min:0,max:0}),xt=()=>({x:Kx(),y:Kx()});function er(n){return[n("x"),n("y")]}function Bm(n){return n===void 0||n===1}function Lg({scale:n,scaleX:e,scaleY:t}){return!Bm(n)||!Bm(e)||!Bm(t)}function _o(n){return Lg(n)||dk(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function dk(n){return Gx(n.x)||Gx(n.y)}function Gx(n){return n&&n!=="0%"}function Wh(n,e,t){const r=n-t,s=e*r;return t+s}function Qx(n,e,t,r,s){return s!==void 0&&(n=Wh(n,s,r)),Wh(n,t,r)+e}function Mg(n,e=0,t=1,r,s){n.min=Qx(n.min,e,t,r,s),n.max=Qx(n.max,e,t,r,s)}function hk(n,{x:e,y:t}){Mg(n.x,e.translate,e.scale,e.originPoint),Mg(n.y,t.translate,t.scale,t.originPoint)}const Jx=.999999999999,Yx=1.0000000000001;function YO(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=t[u],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ja(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,hk(n,l)),r&&_o(o.latestValues)&&Ja(n,o.latestValues))}e.x<Yx&&e.x>Jx&&(e.x=1),e.y<Yx&&e.y>Jx&&(e.y=1)}function Qa(n,e){n.min=n.min+e,n.max=n.max+e}function Xx(n,e,t,r,s=.5){const o=dt(n.min,n.max,s);Mg(n,e,t,o,r)}function Ja(n,e){Xx(n.x,e.x,e.scaleX,e.scale,e.originX),Xx(n.y,e.y,e.scaleY,e.scale,e.originY)}function fk(n,e){return lk(WO(n.getBoundingClientRect(),e))}function XO(n,e,t){const r=fk(n,t),{scroll:s}=e;return s&&(Qa(r.x,s.offset.x),Qa(r.y,s.offset.y)),r}const pk=({current:n})=>n?n.ownerDocument.defaultView:null,Zx=(n,e)=>Math.abs(n-e);function ZO(n,e){const t=Zx(n.x,e.x),r=Zx(n.y,e.y);return Math.sqrt(t**2+r**2)}class mk{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Wm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,b=ZO(v.offset,{x:0,y:0})>=3;if(!_&&!b)return;const{point:S}=v,{timestamp:j}=Gt;this.history.push({...S,timestamp:j});const{onStart:P,onMove:D}=this.handlers;_||(P&&P(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,_)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=zm(_,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(v,_)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Wm(v.type==="pointercancel"?this.lastMoveEventInfo:zm(_,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,P),S&&S(v,P)},!z0(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const l=Sc(e),u=zm(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=Gt;this.history=[{...d,timestamp:f}];const{onSessionStart:g}=t;g&&g(e,Wm(u,this.history)),this.removeListeners=Tc(Hu(this.contextWindow,"pointermove",this.handlePointerMove),Hu(this.contextWindow,"pointerup",this.handlePointerUp),Hu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ti(this.updatePoint)}}function zm(n,e){return e?{point:e(n.point)}:n}function eb(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Wm({point:n},e){return{point:n,delta:eb(n,gk(e)),offset:eb(n,e4(e)),velocity:t4(e,.1)}}function e4(n){return n[0]}function gk(n){return n[n.length-1]}function t4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=gk(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ks(e)));)t--;if(!r)return{x:0,y:0};const o=Cs(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function n4(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?dt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?dt(t,n,r.max):Math.min(n,t)),n}function tb(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function r4(n,{top:e,left:t,bottom:r,right:s}){return{x:tb(n.x,t,s),y:tb(n.y,e,r)}}function nb(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function s4(n,e){return{x:nb(n.x,e.x),y:nb(n.y,e.y)}}function i4(n,e){let t=.5;const r=yn(n),s=yn(e);return s>r?t=al(e.min,e.max-r,n.min):r>s&&(t=al(n.min,n.max-s,e.min)),Is(0,1,t)}function o4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Vg=.35;function a4(n=Vg){return n===!1?n=0:n===!0&&(n=Vg),{x:rb(n,"left","right"),y:rb(n,"top","bottom")}}function rb(n,e,t){return{min:sb(n,e),max:sb(n,t)}}function sb(n,e){return typeof n=="number"?n:n[e]||0}const l4=new WeakMap;class u4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Sc(g).point)},o=(g,v)=>{const{drag:_,dragPropagation:b,onDragStart:S}=this.getProps();if(_&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nj(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),er(P=>{let D=this.getAxisMotionValue(P).get()||0;if(Hr.test(D)){const{projection:W}=this.visualElement;if(W&&W.layout){const F=W.layout.layoutBox[P];F&&(D=yn(F)*(parseFloat(D)/100))}}this.originPoint[P]=D}),S&&nt.postRender(()=>S(g,v)),Sg(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:_,dragDirectionLock:b,onDirectionLock:S,onDrag:j}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:P}=v;if(b&&this.currentDirection===null){this.currentDirection=c4(P),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,P),this.updateAxis("y",v.point,P),this.visualElement.render(),j&&j(g,v)},u=(g,v)=>this.stop(g,v),d=()=>er(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new mk(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:pk(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&nt.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!lh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=n4(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&qa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=r4(s.layoutBox,t):this.constraints=!1,this.elastic=a4(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&er(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=o4(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!qa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=XO(r,s.root,this.visualElement.getTransformPagePoint());let l=s4(s.layout.layoutBox,o);if(t){const u=t(zO(l));this.hasMutatedConstraints=!!u,u&&(l=lk(u))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},f=er(g=>{if(!lh(g,t,this.currentDirection))return;let v=d&&d[g]||{};l&&(v={min:0,max:0});const _=s?200:1e6,b=s?40:1e7,S={type:"inertia",velocity:r?e[g]:0,bounceStiffness:_,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,S)});return Promise.all(f).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Sg(this.visualElement,e),r.start(cy(e,r,0,t,this.visualElement,!1))}stopAnimation(){er(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){er(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){er(t=>{const{drag:r}=this.getProps();if(!lh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t];o.set(e[t]-dt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!qa(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};er(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const d=u.get();s[l]=i4({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),er(l=>{if(!lh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:d,max:f}=this.constraints[l];u.set(dt(d,f,s[l]))})}addListeners(){if(!this.visualElement.current)return;l4.set(this.visualElement,this);const e=this.visualElement.current,t=Hu(e,"pointerdown",d=>{const{drag:f,dragListener:g=!0}=this.getProps();f&&g&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();qa(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),nt.read(r);const l=lc(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(er(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=d[g].translate,v.set(v.get()+d[g].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Vg,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function lh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function c4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class d4 extends Li{constructor(e){super(e),this.removeGroupControls=Un,this.removeListeners=Un,this.controls=new u4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Un}unmount(){this.removeGroupControls(),this.removeListeners()}}const ib=n=>(e,t)=>{n&&nt.postRender(()=>n(e,t))};class h4 extends Li{constructor(){super(...arguments),this.removePointerDownListener=Un}onPointerDown(e){this.session=new mk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:ib(e),onStart:ib(t),onMove:r,onEnd:(o,l)=>{delete this.session,s&&nt.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Hu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ob(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Au={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Pe.test(n))n=parseFloat(n);else return n;const t=ob(n,e.target.x),r=ob(n,e.target.y);return`${t}% ${r}%`}},f4={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Si.parse(n);if(s.length>5)return r;const o=Si.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=d;const f=dt(u,d,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}};class p4 extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;Ij(m4),o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),xh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||nt.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),B0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yk(n){const[e,t]=ZT(),r=I.useContext(R0);return m.jsx(p4,{...n,layoutGroup:r,switchLayoutGroup:I.useContext(pS),isPresent:e,safeToRemove:t})}const m4={borderRadius:{...Au,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Au,borderTopRightRadius:Au,borderBottomLeftRadius:Au,borderBottomRightRadius:Au,boxShadow:f4};function g4(n,e,t){const r=un(n)?n:nc(n);return r.start(cy("",r,e,t)),r.animation}function y4(n){return n instanceof SVGElement&&n.tagName!=="svg"}const v4=(n,e)=>n.depth-e.depth;class _4{constructor(){this.children=[],this.isDirty=!1}add(e){O0(this.children,e),this.isDirty=!0}remove(e){L0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(v4),this.isDirty=!1,this.children.forEach(e)}}function w4(n,e){const t=Wr.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(Ti(r),n(o-e))};return nt.read(r,!0),()=>Ti(r)}const vk=["TopLeft","TopRight","BottomLeft","BottomRight"],x4=vk.length,ab=n=>typeof n=="string"?parseFloat(n):n,lb=n=>typeof n=="number"||Pe.test(n);function b4(n,e,t,r,s,o){s?(n.opacity=dt(0,t.opacity!==void 0?t.opacity:1,E4(r)),n.opacityExit=dt(e.opacity!==void 0?e.opacity:1,0,T4(r))):o&&(n.opacity=dt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<x4;l++){const u=`border${vk[l]}Radius`;let d=ub(e,u),f=ub(t,u);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||lb(d)===lb(f)?(n[u]=Math.max(dt(ab(d),ab(f),r),0),(Hr.test(f)||Hr.test(d))&&(n[u]+="%")):n[u]=f}(e.rotate||t.rotate)&&(n.rotate=dt(e.rotate||0,t.rotate||0,r))}function ub(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const E4=_k(0,.5,OS),T4=_k(.5,.95,Un);function _k(n,e,t){return r=>r<n?0:r>e?1:t(al(n,e,r))}function cb(n,e){n.min=e.min,n.max=e.max}function Zn(n,e){cb(n.x,e.x),cb(n.y,e.y)}function db(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function hb(n,e,t,r,s){return n-=e,n=Wh(n,1/t,r),s!==void 0&&(n=Wh(n,1/s,r)),n}function S4(n,e=0,t=1,r=.5,s,o=n,l=n){if(Hr.test(e)&&(e=parseFloat(e),e=dt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=dt(o.min,o.max,r);n===o&&(u-=e),n.min=hb(n.min,e,t,u,s),n.max=hb(n.max,e,t,u,s)}function fb(n,e,[t,r,s],o,l){S4(n,e[t],e[r],e[s],e.scale,o,l)}const k4=["x","scaleX","originX"],C4=["y","scaleY","originY"];function pb(n,e,t,r){fb(n.x,e,k4,t?t.x:void 0,r?r.x:void 0),fb(n.y,e,C4,t?t.y:void 0,r?r.y:void 0)}function mb(n){return n.translate===0&&n.scale===1}function wk(n){return mb(n.x)&&mb(n.y)}function gb(n,e){return n.min===e.min&&n.max===e.max}function P4(n,e){return gb(n.x,e.x)&&gb(n.y,e.y)}function yb(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function xk(n,e){return yb(n.x,e.x)&&yb(n.y,e.y)}function vb(n){return yn(n.x)/yn(n.y)}function _b(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class A4{constructor(){this.members=[]}add(e){O0(this.members,e),e.scheduleRender()}remove(e){if(L0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function I4(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:g,rotateX:v,rotateY:_,skewX:b,skewY:S}=t;f&&(r=`perspective(${f}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),_&&(r+=`rotateY(${_}deg) `),b&&(r+=`skewX(${b}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=n.x.scale*e.x,d=n.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const Hm=["","X","Y","Z"],R4={visibility:"hidden"},wb=1e3;let N4=0;function qm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function bk(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=PS(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",nt,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&bk(r)}function Ek({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e==null?void 0:e()){this.id=N4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(O4),this.nodes.forEach(F4),this.nodes.forEach(U4),this.nodes.forEach(L4)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new _4)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new V0),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const d=this.eventHandlers.get(l);d&&d.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=y4(l),this.instance=l;const{layoutId:d,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||d)&&(this.isLayoutDirty=!0),n){let v;const _=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=w4(_,250),xh.hasAnimatedSinceResize&&(xh.hasAnimatedSinceResize=!1,this.nodes.forEach(bb))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&g&&(d||f)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:_,hasRelativeLayoutChanged:b,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||g.getDefaultTransition()||q4,{onLayoutAnimationStart:P,onLayoutAnimationComplete:D}=g.getProps(),W=!this.targetLayout||!xk(this.targetLayout,S),F=!_&&b;if(this.options.layoutRoot||this.resumeFrom||F||_&&(W||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,F);const q={...$0(j,"layout"),onPlay:P,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q)}else _||bb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ti(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(B4),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xb);return}this.isUpdating||this.nodes.forEach(V4),this.isUpdating=!1,this.nodes.forEach($4),this.nodes.forEach(j4),this.nodes.forEach(D4),this.clearAllSnapshots();const u=Wr.now();Gt.delta=Is(0,1e3/60,u-Gt.timestamp),Gt.timestamp=u,Gt.isProcessing=!0,Mm.update.process(Gt),Mm.preRender.process(Gt),Mm.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,B0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(M4),this.sharedNodes.forEach(z4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yn(this.snapshot.measuredBox.x)&&!yn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!wk(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,g=f!==this.prevTransformTemplateValue;l&&(u||_o(this.latestValues)||g)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return l&&(d=this.removeTransform(d)),K4(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return xt();const d=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(G4))){const{scroll:g}=this.root;g&&(Qa(d.x,g.offset.x),Qa(d.y,g.offset.y))}return d}removeElementScroll(l){var u;const d=xt();if(Zn(d,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return d;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:v,options:_}=g;g!==this.root&&v&&_.layoutScroll&&(v.wasRoot&&Zn(d,l),Qa(d.x,v.offset.x),Qa(d.y,v.offset.y))}return d}applyTransform(l,u=!1){const d=xt();Zn(d,l);for(let f=0;f<this.path.length;f++){const g=this.path[f];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Ja(d,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),_o(g.latestValues)&&Ja(d,g.latestValues)}return _o(this.latestValues)&&Ja(d,this.latestValues),d}removeTransform(l){const u=xt();Zn(u,l);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!_o(f.latestValues))continue;Lg(f.latestValues)&&f.updateSnapshot();const g=xt(),v=f.measurePageBox();Zn(g,v),pb(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,g)}return _o(this.latestValues)&&pb(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:_}=this.options;if(!(!this.layout||!(v||_))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),Ku(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Zn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zn(this.target,this.layout.layoutBox),hk(this.target,this.targetDelta)):Zn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),Ku(this.relativeTargetOrigin,this.target,b.target),Zn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Lg(this.parent.latestValues)||dk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(f=!1),f)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;Zn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,b=this.treeScale.y;YO(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=xt());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(db(this.prevProjectionDelta.x,this.projectionDelta.x),db(this.prevProjectionDelta.y,this.projectionDelta.y)),qu(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==b||!_b(this.projectionDelta.x,this.prevProjectionDelta.x)||!_b(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ga(),this.projectionDelta=Ga(),this.projectionDeltaWithTransform=Ga()}setAnimationOrigin(l,u=!1){const d=this.snapshot,f=d?d.latestValues:{},g={...this.latestValues},v=Ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const _=xt(),b=d?d.source:void 0,S=this.layout?this.layout.source:void 0,j=b!==S,P=this.getStack(),D=!P||P.members.length<=1,W=!!(j&&!D&&this.options.crossfade===!0&&!this.path.some(H4));this.animationProgress=0;let F;this.mixTargetDelta=q=>{const B=q/1e3;Eb(v.x,l.x,B),Eb(v.y,l.y,B),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ku(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),W4(this.relativeTarget,this.relativeTargetOrigin,_,B),F&&P4(this.relativeTarget,F)&&(this.isProjectionDirty=!1),F||(F=xt()),Zn(F,this.relativeTarget)),j&&(this.animationValues=g,b4(g,f,this.latestValues,B,W,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=B},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ti(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{xh.hasAnimatedSinceResize=!0,this.currentAnimation=g4(0,wb,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:d,layout:f,latestValues:g}=l;if(!(!u||!d||!f)){if(this!==l&&this.layout&&f&&Tk(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||xt();const v=yn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+v;const _=yn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}Zn(u,d),Ja(u,g),qu(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new A4),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(u=!0),!u)return;const f={};d.z&&qm("z",l,f,this.animationValues);for(let g=0;g<Hm.length;g++)qm(`rotate${Hm[g]}`,l,f,this.animationValues),qm(`skew${Hm[g]}`,l,f,this.animationValues);l.render();for(const g in f)l.setStaticValue(g,f[g]),this.animationValues&&(this.animationValues[g]=f[g]);l.scheduleRender()}getProjectionStyles(l){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return R4;const f={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=wh(l==null?void 0:l.pointerEvents)||"",f.transform=g?g(this.latestValues,""):"none",f;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=wh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!_o(this.latestValues)&&(j.transform=g?g({},""):"none",this.hasProjected=!1),j}const _=v.animationValues||v.latestValues;this.applyTransformsToTarget(),f.transform=I4(this.projectionDeltaWithTransform,this.treeScale,_),g&&(f.transform=g(_,f.transform));const{x:b,y:S}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${S.origin*100}% 0`,v.animationValues?f.opacity=v===this?(d=(u=_.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=v===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const j in sc){if(_[j]===void 0)continue;const{correct:P,applyTo:D,isCSSVariable:W}=sc[j],F=f.transform==="none"?_[j]:P(_[j],v);if(D){const q=D.length;for(let B=0;B<q;B++)f[D[B]]=F}else W?this.options.visualElement.renderState.vars[j]=F:f[j]=F}return this.options.layoutId&&(f.pointerEvents=v===this?wh(l==null?void 0:l.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(xb),this.root.sharedNodes.clear()}}}function j4(n){n.updateLayout()}function D4(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=t.source!==n.layout.source;o==="size"?er(v=>{const _=l?t.measuredBox[v]:t.layoutBox[v],b=yn(_);_.min=r[v].min,_.max=_.min+b}):Tk(o,t.layoutBox,r)&&er(v=>{const _=l?t.measuredBox[v]:t.layoutBox[v],b=yn(r[v]);_.max=_.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+b)});const u=Ga();qu(u,r,t.layoutBox);const d=Ga();l?qu(d,n.applyTransform(s,!0),t.measuredBox):qu(d,r,t.layoutBox);const f=!wk(u);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:_,layout:b}=v;if(_&&b){const S=xt();Ku(S,t.layoutBox,_.layoutBox);const j=xt();Ku(j,r,b.layoutBox),xk(S,j)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=j,n.relativeTargetOrigin=S,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function O4(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function L4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function M4(n){n.clearSnapshot()}function xb(n){n.clearMeasurements()}function V4(n){n.isLayoutDirty=!1}function $4(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function bb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function F4(n){n.resolveTargetDelta()}function U4(n){n.calcProjection()}function B4(n){n.resetSkewAndRotation()}function z4(n){n.removeLeadSnapshot()}function Eb(n,e,t){n.translate=dt(e.translate,0,t),n.scale=dt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Tb(n,e,t,r){n.min=dt(e.min,t.min,r),n.max=dt(e.max,t.max,r)}function W4(n,e,t,r){Tb(n.x,e.x,t.x,r),Tb(n.y,e.y,t.y,r)}function H4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const q4={duration:.45,ease:[.4,0,.1,1]},Sb=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),kb=Sb("applewebkit/")&&!Sb("chrome/")?Math.round:Un;function Cb(n){n.min=kb(n.min),n.max=kb(n.max)}function K4(n){Cb(n.x),Cb(n.y)}function Tk(n,e,t){return n==="position"||n==="preserve-aspect"&&!QO(vb(e),vb(t),.2)}function G4(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Q4=Ek({attachResizeListener:(n,e)=>lc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Km={current:void 0},Sk=Ek({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Km.current){const n=new Q4({});n.mount(window),n.setOptions({layoutScroll:!0}),Km.current=n}return Km.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),J4={pan:{Feature:h4},drag:{Feature:d4,ProjectionNode:Sk,MeasureLayout:yk}};function Pb(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&nt.postRender(()=>o(e,Sc(e)))}class Y4 extends Li{mount(){const{current:e}=this.node;e&&(this.unmount=sj(e,(t,r)=>(Pb(this.node,r,"Start"),s=>Pb(this.node,s,"End"))))}unmount(){}}class X4 extends Li{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tc(lc(this.node.current,"focus",()=>this.onFocus()),lc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ab(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&nt.postRender(()=>o(e,Sc(e)))}class Z4 extends Li{mount(){const{current:e}=this.node;e&&(this.unmount=lj(e,(t,r)=>(Ab(this.node,r,"Start"),(s,{success:o})=>Ab(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $g=new WeakMap,Gm=new WeakMap,eL=n=>{const e=$g.get(n.target);e&&e(n)},tL=n=>{n.forEach(eL)};function nL({root:n,...e}){const t=n||document;Gm.has(t)||Gm.set(t,{});const r=Gm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(tL,{root:n,...e})),r[s]}function rL(n,e,t){const r=nL(e);return $g.set(n,t),r.observe(n),()=>{$g.delete(n),r.unobserve(n)}}const sL={some:0,all:1};class iL extends Li{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:sL[s]},u=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),_=f?g:v;_&&_(d)};return rL(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(oL(e,t))&&this.startObserver()}unmount(){}}function oL({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const aL={inView:{Feature:iL},tap:{Feature:Z4},focus:{Feature:X4},hover:{Feature:Y4}},lL={layout:{ProjectionNode:Sk,MeasureLayout:yk}},Fg={current:null},kk={current:!1};function uL(){if(kk.current=!0,!!j0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fg.current=n.matches;n.addListener(e),e()}else Fg.current=!1}const cL=[...JS,on,Si],dL=n=>cL.find(QS(n)),hL=new WeakMap;function fL(n,e,t){for(const r in e){const s=e[r],o=t[r];if(un(s))n.addValue(r,s);else if(un(o))n.addValue(r,nc(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,nc(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Ib=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pL{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ay,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Wr.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,nt.render(this.render,!1,!0))};const{latestValues:d,renderState:f,onUpdate:g}=l;this.onUpdate=g,this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=wf(t),this.isVariantNode=hS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const b in _){const S=_[b];d[b]!==void 0&&un(S)&&S.set(d[b],!1)}}mount(e){this.current=e,hL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),kk.current||uL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ti(this.notifyUpdate),Ti(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Oo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ll){const t=ll[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Ib.length;r++){const s=Ib[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=fL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=nc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(KS(s)||MS(s))?s=parseFloat(s):!dL(s)&&Si.test(t)&&(s=WS(e,t)),this.setBaseTarget(e,un(s)?s.get():s)),un(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=ty(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!un(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new V0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class Ck extends pL{constructor(){super(...arguments),this.KeyframeResolver=YS}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;un(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function mL(n){return window.getComputedStyle(n)}class gL extends Ck{constructor(){super(...arguments),this.type="html",this.renderInstance=ES}readValueFromInstance(e,t){if(Oo.has(t))return CD(e,t);{const r=mL(e),s=(K0(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fk(e,t)}build(e,t,r){J0(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return ny(e,t,r)}}class yL extends Ck{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&bS(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Oo.has(t)){const r=zS(t);return r&&r.default||0}return t=TS.has(t)?t:q0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return kS(e,t,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&nt.postRender(this.updateDimensions)}build(e,t,r){Z0(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){SS(e,t,r,s)}mount(e){this.isSVGTag=ey(e.tagName),super.mount(e)}}const vL=(n,e)=>X0(n)?new yL(e):new gL(e,{allowProjection:n!==I.Fragment}),_L=eD({...UO,...aL,...J4,...lL},vL),Rb=gj(_L),wL=()=>{};var Nb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},xL=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},Ak={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,d=s+2<n.length,f=d?n[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let _=(u&15)<<2|f>>6,b=f&63;d||(b=64,l||(_=64)),r.push(t[g],t[v],t[_],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Pk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):xL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const f=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||f==null||v==null)throw new bL;const _=o<<2|u>>4;if(r.push(_),f!==64){const b=u<<4&240|f>>2;if(r.push(b),v!==64){const S=f<<6&192|v;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EL=function(n){const e=Pk(n);return Ak.encodeByteArray(e,!0)},Hh=function(n){return EL(n).replace(/\./g,"")},Ik=function(n){try{return Ak.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL=()=>TL().__FIREBASE_DEFAULTS__,kL=()=>{if(typeof process>"u"||typeof Nb>"u")return;const n=Nb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ik(n[1]);return e&&JSON.parse(e)},bf=()=>{try{return wL()||SL()||kL()||CL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Rk=n=>{var e,t;return(t=(e=bf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Nk=n=>{const e=Rk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jk=()=>{var n;return(n=bf())===null||n===void 0?void 0:n.config},Dk=n=>{var e;return(e=bf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hh(JSON.stringify(t)),Hh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function IL(){var n;const e=(n=bf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DL(){const n=cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function OL(){return!IL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LL(){try{return typeof indexedDB=="object"}catch{return!1}}function ML(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="FirebaseError";class es extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=VL,Object.setPrototypeOf(this,es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kc.prototype.create)}}class kc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?$L(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new es(s,u,r)}}function $L(n,e){return n.replace(FL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const FL=/\{\$([^}]+)}/g;function UL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Po(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(jb(o)&&jb(l)){if(!Po(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function jb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ou(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Lu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function BL(n,e){const t=new zL(n,e);return t.subscribe.bind(t)}class zL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");WL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Qm),s.error===void 0&&(s.error=Qm),s.complete===void 0&&(s.complete=Qm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(n){return n&&n._delegate?n._delegate:n}class ki{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new PL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KL(e))try{this.getOrInitializeService({instanceIdentifier:wo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wo){return this.instances.has(e)}getOptions(e=wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wo){return this.component?this.component.multipleInstances?e:wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qL(n){return n===wo?void 0:n}function KL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new HL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const QL={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},JL=Fe.INFO,YL={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},XL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=YL[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dy{constructor(e){this.name=e,this._logLevel=JL,this._logHandler=XL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const ZL=(n,e)=>e.some(t=>n instanceof t);let Db,Ob;function eM(){return Db||(Db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tM(){return Ob||(Ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lk=new WeakMap,Ug=new WeakMap,Mk=new WeakMap,Jm=new WeakMap,hy=new WeakMap;function nM(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(vi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&Lk.set(t,n)}).catch(()=>{}),hy.set(e,n),e}function rM(n){if(Ug.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Ug.set(n,e)}let Bg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ug.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Mk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sM(n){Bg=n(Bg)}function iM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ym(this),e,...t);return Mk.set(r,e.sort?e.sort():[e]),vi(r)}:tM().includes(n)?function(...e){return n.apply(Ym(this),e),vi(Lk.get(this))}:function(...e){return vi(n.apply(Ym(this),e))}}function oM(n){return typeof n=="function"?iM(n):(n instanceof IDBTransaction&&rM(n),ZL(n,eM())?new Proxy(n,Bg):n)}function vi(n){if(n instanceof IDBRequest)return nM(n);if(Jm.has(n))return Jm.get(n);const e=oM(n);return e!==n&&(Jm.set(n,e),hy.set(e,n)),e}const Ym=n=>hy.get(n);function aM(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=vi(l);return r&&l.addEventListener("upgradeneeded",d=>{r(vi(l.result),d.oldVersion,d.newVersion,vi(l.transaction),d)}),t&&l.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const lM=["get","getKey","getAll","getAllKeys","count"],uM=["put","add","delete","clear"],Xm=new Map;function Lb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=uM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lM.includes(t)))return;const o=async function(l,...u){const d=this.transaction(l,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),s&&d.done]))[0]};return Xm.set(e,o),o}sM(n=>({...n,get:(e,t,r)=>Lb(e,t)||n.get(e,t,r),has:(e,t)=>!!Lb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function dM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zg="@firebase/app",Mb="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=new dy("@firebase/app"),hM="@firebase/app-compat",fM="@firebase/analytics-compat",pM="@firebase/analytics",mM="@firebase/app-check-compat",gM="@firebase/app-check",yM="@firebase/auth",vM="@firebase/auth-compat",_M="@firebase/database",wM="@firebase/data-connect",xM="@firebase/database-compat",bM="@firebase/functions",EM="@firebase/functions-compat",TM="@firebase/installations",SM="@firebase/installations-compat",kM="@firebase/messaging",CM="@firebase/messaging-compat",PM="@firebase/performance",AM="@firebase/performance-compat",IM="@firebase/remote-config",RM="@firebase/remote-config-compat",NM="@firebase/storage",jM="@firebase/storage-compat",DM="@firebase/firestore",OM="@firebase/vertexai",LM="@firebase/firestore-compat",MM="firebase",VM="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="[DEFAULT]",$M={[zg]:"fire-core",[hM]:"fire-core-compat",[pM]:"fire-analytics",[fM]:"fire-analytics-compat",[gM]:"fire-app-check",[mM]:"fire-app-check-compat",[yM]:"fire-auth",[vM]:"fire-auth-compat",[_M]:"fire-rtdb",[wM]:"fire-data-connect",[xM]:"fire-rtdb-compat",[bM]:"fire-fn",[EM]:"fire-fn-compat",[TM]:"fire-iid",[SM]:"fire-iid-compat",[kM]:"fire-fcm",[CM]:"fire-fcm-compat",[PM]:"fire-perf",[AM]:"fire-perf-compat",[IM]:"fire-rc",[RM]:"fire-rc-compat",[NM]:"fire-gcs",[jM]:"fire-gcs-compat",[DM]:"fire-fst",[LM]:"fire-fst-compat",[OM]:"fire-vertex","fire-js":"fire-js",[MM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,FM=new Map,Hg=new Map;function Vb(n,e){try{n.container.addComponent(e)}catch(t){Rs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ao(n){const e=n.name;if(Hg.has(e))return Rs.debug(`There were multiple attempts to register component ${e}.`),!1;Hg.set(e,n);for(const t of qh.values())Vb(t,n);for(const t of FM.values())Vb(t,n);return!0}function Ef(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new kc("app","Firebase",UM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=VM;function fy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Wg,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _i.create("bad-app-name",{appName:String(s)});if(t||(t=jk()),!t)throw _i.create("no-options");const o=qh.get(s);if(o){if(Po(t,o.options)&&Po(r,o.config))return o;throw _i.create("duplicate-app",{appName:s})}const l=new GL(s);for(const d of Hg.values())l.addComponent(d);const u=new BM(t,r,l);return qh.set(s,u),u}function py(n=Wg){const e=qh.get(n);if(!e&&n===Wg&&jk())return fy();if(!e)throw _i.create("no-app",{appName:n});return e}function qr(n,e,t){var r;let s=(r=$M[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Rs.warn(u.join(" "));return}Ao(new ki(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zM="firebase-heartbeat-database",WM=1,uc="firebase-heartbeat-store";let Zm=null;function Vk(){return Zm||(Zm=aM(zM,WM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uc)}catch(t){console.warn(t)}}}}).catch(n=>{throw _i.create("idb-open",{originalErrorMessage:n.message})})),Zm}async function HM(n){try{const t=(await Vk()).transaction(uc),r=await t.objectStore(uc).get($k(n));return await t.done,r}catch(e){if(e instanceof es)Rs.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Rs.warn(t.message)}}}async function $b(n,e){try{const r=(await Vk()).transaction(uc,"readwrite");await r.objectStore(uc).put(e,$k(n)),await r.done}catch(t){if(t instanceof es)Rs.warn(t.message);else{const r=_i.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Rs.warn(r.message)}}}function $k(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1024,KM=30;class GM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new JM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Fb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>KM){const l=YM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Rs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Fb(),{heartbeatsToSend:r,unsentEntries:s}=QM(this._heartbeatsCache.heartbeats),o=Hh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Rs.warn(t),""}}}function Fb(){return new Date().toISOString().substring(0,10)}function QM(n,e=qM){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),Ub(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Ub(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class JM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LL()?ML().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return $b(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ub(n){return Hh(JSON.stringify({version:2,heartbeats:n})).length}function YM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(n){Ao(new ki("platform-logger",e=>new cM(e),"PRIVATE")),Ao(new ki("heartbeat",e=>new GM(e),"PRIVATE")),qr(zg,Mb,n),qr(zg,Mb,"esm2017"),qr("fire-js","")}XM("");var ZM="firebase",eV="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(ZM,eV,"app");var Bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,Fk;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function C(){}C.prototype=E.prototype,A.D=E.prototype,A.prototype=new C,A.prototype.constructor=A,A.C=function(R,M,z){for(var O=Array(arguments.length-2),se=2;se<arguments.length;se++)O[se-2]=arguments[se];return E.prototype[M].apply(R,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,E,C){C||(C=0);var R=Array(16);if(typeof E=="string")for(var M=0;16>M;++M)R[M]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(M=0;16>M;++M)R[M]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=A.g[0],C=A.g[1],M=A.g[2];var z=A.g[3],O=E+(z^C&(M^z))+R[0]+3614090360&4294967295;E=C+(O<<7&4294967295|O>>>25),O=z+(M^E&(C^M))+R[1]+3905402710&4294967295,z=E+(O<<12&4294967295|O>>>20),O=M+(C^z&(E^C))+R[2]+606105819&4294967295,M=z+(O<<17&4294967295|O>>>15),O=C+(E^M&(z^E))+R[3]+3250441966&4294967295,C=M+(O<<22&4294967295|O>>>10),O=E+(z^C&(M^z))+R[4]+4118548399&4294967295,E=C+(O<<7&4294967295|O>>>25),O=z+(M^E&(C^M))+R[5]+1200080426&4294967295,z=E+(O<<12&4294967295|O>>>20),O=M+(C^z&(E^C))+R[6]+2821735955&4294967295,M=z+(O<<17&4294967295|O>>>15),O=C+(E^M&(z^E))+R[7]+4249261313&4294967295,C=M+(O<<22&4294967295|O>>>10),O=E+(z^C&(M^z))+R[8]+1770035416&4294967295,E=C+(O<<7&4294967295|O>>>25),O=z+(M^E&(C^M))+R[9]+2336552879&4294967295,z=E+(O<<12&4294967295|O>>>20),O=M+(C^z&(E^C))+R[10]+4294925233&4294967295,M=z+(O<<17&4294967295|O>>>15),O=C+(E^M&(z^E))+R[11]+2304563134&4294967295,C=M+(O<<22&4294967295|O>>>10),O=E+(z^C&(M^z))+R[12]+1804603682&4294967295,E=C+(O<<7&4294967295|O>>>25),O=z+(M^E&(C^M))+R[13]+4254626195&4294967295,z=E+(O<<12&4294967295|O>>>20),O=M+(C^z&(E^C))+R[14]+2792965006&4294967295,M=z+(O<<17&4294967295|O>>>15),O=C+(E^M&(z^E))+R[15]+1236535329&4294967295,C=M+(O<<22&4294967295|O>>>10),O=E+(M^z&(C^M))+R[1]+4129170786&4294967295,E=C+(O<<5&4294967295|O>>>27),O=z+(C^M&(E^C))+R[6]+3225465664&4294967295,z=E+(O<<9&4294967295|O>>>23),O=M+(E^C&(z^E))+R[11]+643717713&4294967295,M=z+(O<<14&4294967295|O>>>18),O=C+(z^E&(M^z))+R[0]+3921069994&4294967295,C=M+(O<<20&4294967295|O>>>12),O=E+(M^z&(C^M))+R[5]+3593408605&4294967295,E=C+(O<<5&4294967295|O>>>27),O=z+(C^M&(E^C))+R[10]+38016083&4294967295,z=E+(O<<9&4294967295|O>>>23),O=M+(E^C&(z^E))+R[15]+3634488961&4294967295,M=z+(O<<14&4294967295|O>>>18),O=C+(z^E&(M^z))+R[4]+3889429448&4294967295,C=M+(O<<20&4294967295|O>>>12),O=E+(M^z&(C^M))+R[9]+568446438&4294967295,E=C+(O<<5&4294967295|O>>>27),O=z+(C^M&(E^C))+R[14]+3275163606&4294967295,z=E+(O<<9&4294967295|O>>>23),O=M+(E^C&(z^E))+R[3]+4107603335&4294967295,M=z+(O<<14&4294967295|O>>>18),O=C+(z^E&(M^z))+R[8]+1163531501&4294967295,C=M+(O<<20&4294967295|O>>>12),O=E+(M^z&(C^M))+R[13]+2850285829&4294967295,E=C+(O<<5&4294967295|O>>>27),O=z+(C^M&(E^C))+R[2]+4243563512&4294967295,z=E+(O<<9&4294967295|O>>>23),O=M+(E^C&(z^E))+R[7]+1735328473&4294967295,M=z+(O<<14&4294967295|O>>>18),O=C+(z^E&(M^z))+R[12]+2368359562&4294967295,C=M+(O<<20&4294967295|O>>>12),O=E+(C^M^z)+R[5]+4294588738&4294967295,E=C+(O<<4&4294967295|O>>>28),O=z+(E^C^M)+R[8]+2272392833&4294967295,z=E+(O<<11&4294967295|O>>>21),O=M+(z^E^C)+R[11]+1839030562&4294967295,M=z+(O<<16&4294967295|O>>>16),O=C+(M^z^E)+R[14]+4259657740&4294967295,C=M+(O<<23&4294967295|O>>>9),O=E+(C^M^z)+R[1]+2763975236&4294967295,E=C+(O<<4&4294967295|O>>>28),O=z+(E^C^M)+R[4]+1272893353&4294967295,z=E+(O<<11&4294967295|O>>>21),O=M+(z^E^C)+R[7]+4139469664&4294967295,M=z+(O<<16&4294967295|O>>>16),O=C+(M^z^E)+R[10]+3200236656&4294967295,C=M+(O<<23&4294967295|O>>>9),O=E+(C^M^z)+R[13]+681279174&4294967295,E=C+(O<<4&4294967295|O>>>28),O=z+(E^C^M)+R[0]+3936430074&4294967295,z=E+(O<<11&4294967295|O>>>21),O=M+(z^E^C)+R[3]+3572445317&4294967295,M=z+(O<<16&4294967295|O>>>16),O=C+(M^z^E)+R[6]+76029189&4294967295,C=M+(O<<23&4294967295|O>>>9),O=E+(C^M^z)+R[9]+3654602809&4294967295,E=C+(O<<4&4294967295|O>>>28),O=z+(E^C^M)+R[12]+3873151461&4294967295,z=E+(O<<11&4294967295|O>>>21),O=M+(z^E^C)+R[15]+530742520&4294967295,M=z+(O<<16&4294967295|O>>>16),O=C+(M^z^E)+R[2]+3299628645&4294967295,C=M+(O<<23&4294967295|O>>>9),O=E+(M^(C|~z))+R[0]+4096336452&4294967295,E=C+(O<<6&4294967295|O>>>26),O=z+(C^(E|~M))+R[7]+1126891415&4294967295,z=E+(O<<10&4294967295|O>>>22),O=M+(E^(z|~C))+R[14]+2878612391&4294967295,M=z+(O<<15&4294967295|O>>>17),O=C+(z^(M|~E))+R[5]+4237533241&4294967295,C=M+(O<<21&4294967295|O>>>11),O=E+(M^(C|~z))+R[12]+1700485571&4294967295,E=C+(O<<6&4294967295|O>>>26),O=z+(C^(E|~M))+R[3]+2399980690&4294967295,z=E+(O<<10&4294967295|O>>>22),O=M+(E^(z|~C))+R[10]+4293915773&4294967295,M=z+(O<<15&4294967295|O>>>17),O=C+(z^(M|~E))+R[1]+2240044497&4294967295,C=M+(O<<21&4294967295|O>>>11),O=E+(M^(C|~z))+R[8]+1873313359&4294967295,E=C+(O<<6&4294967295|O>>>26),O=z+(C^(E|~M))+R[15]+4264355552&4294967295,z=E+(O<<10&4294967295|O>>>22),O=M+(E^(z|~C))+R[6]+2734768916&4294967295,M=z+(O<<15&4294967295|O>>>17),O=C+(z^(M|~E))+R[13]+1309151649&4294967295,C=M+(O<<21&4294967295|O>>>11),O=E+(M^(C|~z))+R[4]+4149444226&4294967295,E=C+(O<<6&4294967295|O>>>26),O=z+(C^(E|~M))+R[11]+3174756917&4294967295,z=E+(O<<10&4294967295|O>>>22),O=M+(E^(z|~C))+R[2]+718787259&4294967295,M=z+(O<<15&4294967295|O>>>17),O=C+(z^(M|~E))+R[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var C=E-this.blockSize,R=this.B,M=this.h,z=0;z<E;){if(M==0)for(;z<=C;)s(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<E;)if(R[M++]=A.charCodeAt(z++),M==this.blockSize){s(this,R),M=0;break}}else for(;z<E;)if(R[M++]=A[z++],M==this.blockSize){s(this,R),M=0;break}}this.h=M,this.o+=E},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var C=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=C&255,C/=256;for(this.u(A),A=Array(16),E=C=0;4>E;++E)for(var R=0;32>R;R+=8)A[C++]=this.g[E]>>>R&255;return A};function o(A,E){var C=u;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=E(A)}function l(A,E){this.h=E;for(var C=[],R=!0,M=A.length-1;0<=M;M--){var z=A[M]|0;R&&z==E||(C[M]=z,R=!1)}this.g=C}var u={};function d(A){return-128<=A&&128>A?o(A,function(E){return new l([E|0],0>E?-1:0)}):new l([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return v;if(0>A)return P(f(-A));for(var E=[],C=1,R=0;A>=C;R++)E[R]=A/C|0,C*=4294967296;return new l(E,0)}function g(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return P(g(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=f(Math.pow(E,8)),R=v,M=0;M<A.length;M+=8){var z=Math.min(8,A.length-M),O=parseInt(A.substring(M,M+z),E);8>z?(z=f(Math.pow(E,z)),R=R.j(z).add(f(O))):(R=R.j(C),R=R.add(f(O)))}return R}var v=d(0),_=d(1),b=d(16777216);n=l.prototype,n.m=function(){if(j(this))return-P(this).m();for(var A=0,E=1,C=0;C<this.g.length;C++){var R=this.i(C);A+=(0<=R?R:4294967296+R)*E,E*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(j(this))return"-"+P(this).toString(A);for(var E=f(Math.pow(A,6)),C=this,R="";;){var M=q(C,E).g;C=D(C,M.j(E));var z=((0<C.g.length?C.g[0]:C.h)>>>0).toString(A);if(C=M,S(C))return z+R;for(;6>z.length;)z="0"+z;R=z+R}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function j(A){return A.h==-1}n.l=function(A){return A=D(this,A),j(A)?-1:S(A)?0:1};function P(A){for(var E=A.g.length,C=[],R=0;R<E;R++)C[R]=~A.g[R];return new l(C,~A.h).add(_)}n.abs=function(){return j(this)?P(this):this},n.add=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],R=0,M=0;M<=E;M++){var z=R+(this.i(M)&65535)+(A.i(M)&65535),O=(z>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);R=O>>>16,z&=65535,O&=65535,C[M]=O<<16|z}return new l(C,C[C.length-1]&-2147483648?-1:0)};function D(A,E){return A.add(P(E))}n.j=function(A){if(S(this)||S(A))return v;if(j(this))return j(A)?P(this).j(P(A)):P(P(this).j(A));if(j(A))return P(this.j(P(A)));if(0>this.l(b)&&0>A.l(b))return f(this.m()*A.m());for(var E=this.g.length+A.g.length,C=[],R=0;R<2*E;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<A.g.length;M++){var z=this.i(R)>>>16,O=this.i(R)&65535,se=A.i(M)>>>16,pe=A.i(M)&65535;C[2*R+2*M]+=O*pe,W(C,2*R+2*M),C[2*R+2*M+1]+=z*pe,W(C,2*R+2*M+1),C[2*R+2*M+1]+=O*se,W(C,2*R+2*M+1),C[2*R+2*M+2]+=z*se,W(C,2*R+2*M+2)}for(R=0;R<E;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=E;R<2*E;R++)C[R]=0;return new l(C,0)};function W(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function F(A,E){this.g=A,this.h=E}function q(A,E){if(S(E))throw Error("division by zero");if(S(A))return new F(v,v);if(j(A))return E=q(P(A),E),new F(P(E.g),P(E.h));if(j(E))return E=q(A,P(E)),new F(P(E.g),E.h);if(30<A.g.length){if(j(A)||j(E))throw Error("slowDivide_ only works with positive integers.");for(var C=_,R=E;0>=R.l(A);)C=B(C),R=B(R);var M=V(C,1),z=V(R,1);for(R=V(R,2),C=V(C,2);!S(R);){var O=z.add(R);0>=O.l(A)&&(M=M.add(C),z=O),R=V(R,1),C=V(C,1)}return E=D(A,M.j(E)),new F(M,E)}for(M=v;0<=A.l(E);){for(C=Math.max(1,Math.floor(A.m()/E.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),z=f(C),O=z.j(E);j(O)||0<O.l(A);)C-=R,z=f(C),O=z.j(E);S(z)&&(z=_),M=M.add(z),A=D(A,O)}return new F(M,A)}n.A=function(A){return q(this,A).h},n.and=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],R=0;R<E;R++)C[R]=this.i(R)&A.i(R);return new l(C,this.h&A.h)},n.or=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],R=0;R<E;R++)C[R]=this.i(R)|A.i(R);return new l(C,this.h|A.h)},n.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),C=[],R=0;R<E;R++)C[R]=this.i(R)^A.i(R);return new l(C,this.h^A.h)};function B(A){for(var E=A.g.length+1,C=[],R=0;R<E;R++)C[R]=A.i(R)<<1|A.i(R-1)>>>31;return new l(C,A.h)}function V(A,E){var C=E>>5;E%=32;for(var R=A.g.length-C,M=[],z=0;z<R;z++)M[z]=0<E?A.i(z+C)>>>E|A.i(z+C+1)<<32-E:A.i(z+C);return new l(M,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fk=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=g,wi=l}).apply(typeof Bb<"u"?Bb:typeof self<"u"?self:typeof window<"u"?window:{});var uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uk,Mu,Bk,bh,qg,zk,Wk,Hk;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,w,T){return h==Array.prototype||h==Object.prototype||(h[w]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uh=="object"&&uh];for(var w=0;w<h.length;++w){var T=h[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(h,w){if(w)e:{var T=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var K=h[N];if(!(K in T))break e;T=T[K]}h=h[h.length-1],N=T[h],w=w(N),w!=N&&w!=null&&e(T,h,{configurable:!0,writable:!0,value:w})}}function o(h,w){h instanceof String&&(h+="");var T=0,N=!1,K={next:function(){if(!N&&T<h.length){var ee=T++;return{value:w(ee,h[ee]),done:!1}}return N=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(h){return h||function(){return o(this,function(w,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function d(h){var w=typeof h;return w=w!="object"?w:h?Array.isArray(h)?"array":w:"null",w=="array"||w=="object"&&typeof h.length=="number"}function f(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function g(h,w,T){return h.call.apply(h.bind,arguments)}function v(h,w,T){if(!h)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,N),h.apply(w,K)}}return function(){return h.apply(w,arguments)}}function _(h,w,T){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,_.apply(null,arguments)}function b(h,w){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function S(h,w){function T(){}T.prototype=w.prototype,h.aa=w.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(N,K,ee){for(var he=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)he[Ge-2]=arguments[Ge];return w.prototype[K].apply(N,he)}}function j(h){const w=h.length;if(0<w){const T=Array(w);for(let N=0;N<w;N++)T[N]=h[N];return T}return[]}function P(h,w){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(d(N)){const K=h.length||0,ee=N.length||0;h.length=K+ee;for(let he=0;he<ee;he++)h[K+he]=N[he]}else h.push(N)}}class D{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function W(h){return/^[\s\xa0]*$/.test(h)}function F(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var B=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function V(h,w,T){for(const N in h)w.call(T,h[N],N,h)}function A(h,w){for(const T in h)w.call(void 0,h[T],T,h)}function E(h){const w={};for(const T in h)w[T]=h[T];return w}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(h,w){let T,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(T in N)h[T]=N[T];for(let ee=0;ee<C.length;ee++)T=C[ee],Object.prototype.hasOwnProperty.call(N,T)&&(h[T]=N[T])}}function M(h){var w=1;h=h.split(":");const T=[];for(;0<w&&h.length;)T.push(h.shift()),w--;return h.length&&T.push(h.join(":")),T}function z(h){u.setTimeout(()=>{throw h},0)}function O(){var h=Z;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class se{constructor(){this.h=this.g=null}add(w,T){const N=pe.get();N.set(w,T),this.h?this.h.next=N:this.g=N,this.h=N}}var pe=new D(()=>new Ne,h=>h.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let we,J=!1,Z=new se,te=()=>{const h=u.Promise.resolve(void 0);we=()=>{h.then($)}};var $=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(T){z(T)}var w=pe;w.j(h),100>w.h&&(w.h++,h.next=w.g,w.g=h)}J=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};u.addEventListener("test",T,w),u.removeEventListener("test",T,w)}catch{}return h}();function ie(h,w){if(fe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget){if(B){e:{try{q(w.nodeName);var K=!0;break e}catch{}K=!1}K||(w=null)}}else T=="mouseover"?w=h.fromElement:T=="mouseout"&&(w=h.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ie.aa.h.call(this)}}S(ie,fe);var ne={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Te=0;function Ve(h,w,T,N,K){this.listener=h,this.proxy=null,this.src=w,this.type=T,this.capture=!!N,this.ha=K,this.key=++Te,this.da=this.fa=!1}function vt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Bn(h){this.src=h,this.g={},this.h=0}Bn.prototype.add=function(h,w,T,N,K){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var he=ar(h,w,N,K);return-1<he?(w=h[he],T||(w.fa=!1)):(w=new Ve(w,this.src,ee,!!N,K),w.fa=T,h.push(w)),w};function ts(h,w){var T=w.type;if(T in h.g){var N=h.g[T],K=Array.prototype.indexOf.call(N,w,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(N,K,1),ee&&(vt(w),h.g[T].length==0&&(delete h.g[T],h.h--))}}function ar(h,w,T,N){for(var K=0;K<h.length;++K){var ee=h[K];if(!ee.da&&ee.listener==w&&ee.capture==!!T&&ee.ha==N)return K}return-1}var lr="closure_lm_"+(1e6*Math.random()|0),ns={};function Lt(h,w,T,N,K){if(Array.isArray(w)){for(var ee=0;ee<w.length;ee++)Lt(h,w[ee],T,N,K);return null}return T=jl(T),h&&h[ce]?h.K(w,T,f(N)?!!N.capture:!1,K):rs(h,w,T,!1,N,K)}function rs(h,w,T,N,K,ee){if(!w)throw Error("Invalid event type");var he=f(K)?!!K.capture:!!K,Ge=Bo(h);if(Ge||(h[lr]=Ge=new Bn(h)),T=Ge.add(w,T,N,he,ee),T.proxy)return T;if(N=Lc(),T.proxy=N,N.src=h,N.listener=T,h.addEventListener)ye||(K=he),K===void 0&&(K=!1),h.addEventListener(w.toString(),N,K);else if(h.attachEvent)h.attachEvent(is(w.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Lc(){function h(T){return w.call(h.src,h.listener,T)}const w=Nl;return h}function Uo(h,w,T,N,K){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)Uo(h,w[ee],T,N,K);else N=f(N)?!!N.capture:!!N,T=jl(T),h&&h[ce]?(h=h.i,w=String(w).toString(),w in h.g&&(ee=h.g[w],T=ar(ee,T,N,K),-1<T&&(vt(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete h.g[w],h.h--)))):h&&(h=Bo(h))&&(w=h.g[w.toString()],h=-1,w&&(h=ar(w,T,N,K)),(T=-1<h?w[h]:null)&&ss(T))}function ss(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[ce])ts(w.i,h);else{var T=h.type,N=h.proxy;w.removeEventListener?w.removeEventListener(T,N,h.capture):w.detachEvent?w.detachEvent(is(T),N):w.addListener&&w.removeListener&&w.removeListener(N),(T=Bo(w))?(ts(T,h),T.h==0&&(T.src=null,w[lr]=null)):vt(h)}}}function is(h){return h in ns?ns[h]:ns[h]="on"+h}function Nl(h,w){if(h.da)h=!0;else{w=new ie(w,this);var T=h.listener,N=h.ha||h.src;h.fa&&ss(h),h=T.call(N,w)}return h}function Bo(h){return h=h[lr],h instanceof Bn?h:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function jl(h){return typeof h=="function"?h:(h[zo]||(h[zo]=function(w){return h.handleEvent(w)}),h[zo])}function Ct(){Q.call(this),this.i=new Bn(this),this.M=this,this.F=null}S(Ct,Q),Ct.prototype[ce]=!0,Ct.prototype.removeEventListener=function(h,w,T,N){Uo(this,h,w,T,N)};function Pt(h,w){var T,N=h.F;if(N)for(T=[];N;N=N.F)T.push(N);if(h=h.M,N=w.type||w,typeof w=="string")w=new fe(w,h);else if(w instanceof fe)w.target=w.target||h;else{var K=w;w=new fe(N,h),R(w,K)}if(K=!0,T)for(var ee=T.length-1;0<=ee;ee--){var he=w.g=T[ee];K=os(he,N,!0,w)&&K}if(he=w.g=h,K=os(he,N,!0,w)&&K,K=os(he,N,!1,w)&&K,T)for(ee=0;ee<T.length;ee++)he=w.g=T[ee],K=os(he,N,!1,w)&&K}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var h=this.i,w;for(w in h.g){for(var T=h.g[w],N=0;N<T.length;N++)vt(T[N]);delete h.g[w],h.h--}}this.F=null},Ct.prototype.K=function(h,w,T,N){return this.i.add(String(h),w,!1,T,N)},Ct.prototype.L=function(h,w,T,N){return this.i.add(String(h),w,!0,T,N)};function os(h,w,T,N){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();for(var K=!0,ee=0;ee<w.length;++ee){var he=w[ee];if(he&&!he.da&&he.capture==T){var Ge=he.listener,At=he.ha||he.src;he.fa&&ts(h.i,he),K=Ge.call(At,N)!==!1&&K}}return K&&!N.defaultPrevented}function Dl(h,w,T){if(typeof h=="function")T&&(h=_(h,T));else if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(h,w||0)}function Ls(h){h.g=Dl(()=>{h.g=null,h.i&&(h.i=!1,Ls(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Fi extends Q{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ls(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ui(h){Q.call(this),this.h=h,this.g={}}S(Ui,Q);var Ol=[];function Ll(h){V(h.g,function(w,T){this.g.hasOwnProperty(T)&&ss(w)},h),h.g={}}Ui.prototype.N=function(){Ui.aa.N.call(this),Ll(this)},Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ml=u.JSON.stringify,Vl=u.JSON.parse,$l=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function Bi(){}Bi.prototype.h=null;function Wo(h){return h.h||(h.h=h.i())}function Ho(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ir(){fe.call(this,"d")}S(Ir,fe);function qo(){fe.call(this,"c")}S(qo,fe);var Rr={},Fl=null;function zi(){return Fl=Fl||new Ct}Rr.La="serverreachability";function Ul(h){fe.call(this,Rr.La,h)}S(Ul,fe);function as(h){const w=zi();Pt(w,new Ul(w))}Rr.STAT_EVENT="statevent";function Bl(h,w){fe.call(this,Rr.STAT_EVENT,h),this.stat=w}S(Bl,fe);function _t(h){const w=zi();Pt(w,new Bl(w,h))}Rr.Ma="timingevent";function Ko(h,w){fe.call(this,Rr.Ma,h),this.size=w}S(Ko,fe);function ur(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},w)}function Wi(){this.g=!0}Wi.prototype.xa=function(){this.g=!1};function Hi(h,w,T,N,K,ee){h.info(function(){if(h.g)if(ee)for(var he="",Ge=ee.split("&"),At=0;At<Ge.length;At++){var ze=Ge[At].split("=");if(1<ze.length){var Mt=ze[0];ze=ze[1];var Tt=Mt.split("_");he=2<=Tt.length&&Tt[1]=="type"?he+(Mt+"="+ze+"&"):he+(Mt+"=redacted&")}}else he=null;else he=ee;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+w+`
`+T+`
`+he})}function Go(h,w,T,N,K,ee,he){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+w+`
`+T+`
`+ee+" "+he})}function cr(h,w,T,N){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+Yf(h,T)+(N?" "+N:"")})}function zl(h,w){h.info(function(){return"TIMEOUT: "+w})}Wi.prototype.info=function(){};function Yf(h,w){if(!h.g)return w;if(!w)return null;try{var T=JSON.parse(w);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var N=T[h];if(!(2>N.length)){var K=N[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return Ml(T)}catch{return w}}var Qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function qi(){}S(qi,Bi),qi.prototype.g=function(){return new XMLHttpRequest},qi.prototype.i=function(){return{}},dr=new qi;function hr(h,w,T,N){this.j=h,this.i=w,this.l=T,this.R=N||1,this.U=new Ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vc}function Vc(){this.i=null,this.g="",this.h=!1}var Wl={},Jo={};function Yo(h,w,T){h.L=1,h.v=Us(Nn(w)),h.m=T,h.P=!0,Hl(h,null)}function Hl(h,w){h.F=Date.now(),Xe(h),h.A=Nn(h.v);var T=h.A,N=h.R;Array.isArray(N)||(N=[String(N)]),zs(T.i,"t",N),h.C=0,T=h.j.J,h.h=new Vc,h.g=nd(h.j,T?w:null,!h.m),0<h.O&&(h.M=new Fi(_(h.Y,h,h.g),h.O)),w=h.U,T=h.g,N=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(Ol[0]=K.toString()),K=Ol);for(var ee=0;ee<K.length;ee++){var he=Lt(T,K[ee],N||w.handleEvent,!1,w.h||w);if(!he)break;w.g[he.key]=he}w=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,w)):(h.u="GET",h.g.ea(h.A,h.u,null,w)),as(),Hi(h.i,h.u,h.A,h.l,h.R,h.m)}hr.prototype.ca=function(h){h=h.target;const w=this.M;w&&_n(h)==3?w.j():this.Y(h)},hr.prototype.Y=function(h){try{if(h==this.g)e:{const Tt=_n(this.g);var w=this.g.Ba();const qn=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||Yl(this.g)))){this.J||Tt!=4||w==7||(w==8||0>=qn?as(3):as(2)),Ki(this);var T=this.g.Z();this.X=T;t:if($c(this)){var N=Yl(this.g);h="";var K=N.length,ee=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),Ms(this);var he="";break t}this.h.i=new u.TextDecoder}for(w=0;w<K;w++)this.h.h=!0,h+=this.h.i.decode(N[w],{stream:!(ee&&w==K-1)});N.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=T==200,Go(this.i,this.u,this.A,this.l,this.R,Tt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,At=this.g;if((Ge=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Ge)){var ze=Ge;break t}}ze=null}if(T=ze)cr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,T);else{this.o=!1,this.s=3,_t(12),Wn(this),Ms(this);break e}}if(this.P){T=!0;let Dn;for(;!this.J&&this.C<he.length;)if(Dn=Xf(this,he),Dn==Jo){Tt==4&&(this.s=4,_t(14),T=!1),cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Wl){this.s=4,_t(15),cr(this.i,this.l,he,"[Invalid Chunk]"),T=!1;break}else cr(this.i,this.l,Dn,null),ql(this,Dn);if($c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||he.length!=0||this.h.h||(this.s=1,_t(16),T=!1),this.o=this.o&&T,!T)cr(this.i,this.l,he,"[Invalid Chunked Response]"),Wn(this),Ms(this);else if(0<he.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Zl(Mt),Mt.M=!0,_t(11))}}else cr(this.i,this.l,he,null),ql(this,he);Tt==4&&Wn(this),this.o&&!this.J&&(Tt==4?la(this.j,this):(this.o=!1,Xe(this)))}else ra(this.g),T==400&&0<he.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Wn(this),Ms(this)}}}catch{}finally{}};function $c(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Xf(h,w){var T=h.C,N=w.indexOf(`
`,T);return N==-1?Jo:(T=Number(w.substring(T,N)),isNaN(T)?Wl:(N+=1,N+T>w.length?Jo:(w=w.slice(N,N+T),h.C=N+T,w)))}hr.prototype.cancel=function(){this.J=!0,Wn(this)};function Xe(h){h.S=Date.now()+h.I,Fc(h,h.I)}function Fc(h,w){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ur(_(h.ba,h),w)}function Ki(h){h.B&&(u.clearTimeout(h.B),h.B=null)}hr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(zl(this.i,this.A),this.L!=2&&(as(),_t(17)),Wn(this),this.s=2,Ms(this)):Fc(this,this.S-h)};function Ms(h){h.j.G==0||h.J||la(h.j,h)}function Wn(h){Ki(h);var w=h.M;w&&typeof w.ma=="function"&&w.ma(),h.M=null,Ll(h.U),h.g&&(w=h.g,h.g=null,w.abort(),w.ma())}function ql(h,w){try{var T=h.j;if(T.G!=0&&(T.g==h||hn(T.h,h))){if(!h.K&&hn(T.h,h)&&T.G==3){try{var N=T.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)aa(T),yr(T);else break e;oa(T),_t(18)}}else T.za=K[1],0<T.za-T.T&&37500>K[2]&&T.F&&T.v==0&&!T.C&&(T.C=ur(_(T.Za,T),6e3));if(1>=Bc(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else hs(T,11)}else if((h.K||T.g==h)&&aa(T),!W(w))for(K=T.Da.g.parse(w),w=0;w<K.length;w++){let ze=K[w];if(T.T=ze[0],ze=ze[1],T.G==2)if(ze[0]=="c"){T.K=ze[1],T.ia=ze[2];const Mt=ze[3];Mt!=null&&(T.la=Mt,T.j.info("VER="+T.la));const Tt=ze[4];Tt!=null&&(T.Aa=Tt,T.j.info("SVER="+T.Aa));const qn=ze[5];qn!=null&&typeof qn=="number"&&0<qn&&(N=1.5*qn,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Dn=h.g;if(Dn){const eo=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(eo){var ee=N.h;ee.g||eo.indexOf("spdy")==-1&&eo.indexOf("quic")==-1&&eo.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Kl(ee,ee.h),ee.h=null))}if(N.D){const ca=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(N.ya=ca,Ye(N.I,N.D,ca))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var he=h;if(N.qa=td(N,N.J?N.ia:null,N.W),he.K){zc(N.h,he);var Ge=he,At=N.L;At&&(Ge.I=At),Ge.B&&(Ki(Ge),Xe(Ge)),N.g=he}else Zi(N);0<T.i.length&&Or(T)}else ze[0]!="stop"&&ze[0]!="close"||hs(T,7);else T.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?hs(T,7):Ht(T):ze[0]!="noop"&&T.l&&T.l.ta(ze),T.v=0)}}as(4)}catch{}}var Uc=class{constructor(h,w){this.g=h,this.map=w}};function Gi(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Bc(h){return h.h?1:h.g?h.g.size:0}function hn(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function Kl(h,w){h.g?h.g.add(w):h.h=w}function zc(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}Gi.prototype.cancel=function(){if(this.i=Wc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Wc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const T of h.g.values())w=w.concat(T.D);return w}return j(h.i)}function Xo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var w=[],T=h.length,N=0;N<T;N++)w.push(h[N]);return w}w=[],T=0;for(N in h)w[T++]=h[N];return w}function Zo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var w=[];h=h.length;for(var T=0;T<h;T++)w.push(T);return w}w=[],T=0;for(const N in h)w[T++]=N;return w}}}function Vs(h,w){if(h.forEach&&typeof h.forEach=="function")h.forEach(w,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,w,void 0);else for(var T=Zo(h),N=Xo(h),K=N.length,ee=0;ee<K;ee++)w.call(void 0,N[ee],T&&T[ee],h)}var Qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zf(h,w){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var N=h[T].indexOf("="),K=null;if(0<=N){var ee=h[T].substring(0,N);K=h[T].substring(N+1)}else ee=h[T];w(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ls(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ls){this.h=h.h,Ji(this,h.j),this.o=h.o,this.g=h.g,$s(this,h.s),this.l=h.l;var w=h.i,T=new Nr;T.i=w.i,w.g&&(T.g=new Map(w.g),T.h=w.h),Fs(this,T),this.m=h.m}else h&&(w=String(h).match(Qi))?(this.h=!1,Ji(this,w[1]||"",!0),this.o=Be(w[2]||""),this.g=Be(w[3]||"",!0),$s(this,w[4]),this.l=Be(w[5]||"",!0),Fs(this,w[6]||"",!0),this.m=Be(w[7]||"")):(this.h=!1,this.i=new Nr(null,this.h))}ls.prototype.toString=function(){var h=[],w=this.j;w&&h.push(Bs(w,ea,!0),":");var T=this.g;return(T||w=="file")&&(h.push("//"),(w=this.o)&&h.push(Bs(w,ea,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Bs(T,T.charAt(0)=="/"?Kc:qc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Bs(T,Gl)),h.join("")};function Nn(h){return new ls(h)}function Ji(h,w,T){h.j=T?Be(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function $s(h,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);h.s=w}else h.s=null}function Fs(h,w,T){w instanceof Nr?(h.i=w,jr(h.i,h.h)):(T||(w=Bs(w,Gc)),h.i=new Nr(w,h.h))}function Ye(h,w,T){h.i.set(w,T)}function Us(h){return Ye(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Be(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Bs(h,w,T){return typeof h=="string"?(h=encodeURI(h).replace(w,Hc),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Hc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ea=/[#\/\?@]/g,qc=/[#\?:]/g,Kc=/[#\?]/g,Gc=/[#\?@]/g,Gl=/#/g;function Nr(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function Wt(h){h.g||(h.g=new Map,h.h=0,h.i&&Zf(h.i,function(w,T){h.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=Nr.prototype,n.add=function(h,w){Wt(this),this.i=null,h=Hn(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(w),this.h+=1,this};function fr(h,w){Wt(h),w=Hn(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function pr(h,w){return Wt(h),w=Hn(h,w),h.g.has(w)}n.forEach=function(h,w){Wt(this),this.g.forEach(function(T,N){T.forEach(function(K){h.call(w,K,N,this)},this)},this)},n.na=function(){Wt(this);const h=Array.from(this.g.values()),w=Array.from(this.g.keys()),T=[];for(let N=0;N<w.length;N++){const K=h[N];for(let ee=0;ee<K.length;ee++)T.push(w[N])}return T},n.V=function(h){Wt(this);let w=[];if(typeof h=="string")pr(this,h)&&(w=w.concat(this.g.get(Hn(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)w=w.concat(h[T])}return w},n.set=function(h,w){return Wt(this),this.i=null,h=Hn(this,h),pr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=this.V(h),0<h.length?String(h[0]):w):w};function zs(h,w,T){fr(h,w),0<T.length&&(h.i=null,h.g.set(Hn(h,w),j(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(var T=0;T<w.length;T++){var N=w[T];const ee=encodeURIComponent(String(N)),he=this.V(N);for(N=0;N<he.length;N++){var K=ee;he[N]!==""&&(K+="="+encodeURIComponent(String(he[N]))),h.push(K)}}return this.i=h.join("&")};function Hn(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function jr(h,w){w&&!h.j&&(Wt(h),h.i=null,h.g.forEach(function(T,N){var K=N.toLowerCase();N!=K&&(fr(this,N),zs(this,K,T))},h)),h.j=w}function ep(h,w){const T=new Wi;if(u.Image){const N=new Image;N.onload=b(vn,T,"TestLoadImage: loaded",!0,w,N),N.onerror=b(vn,T,"TestLoadImage: error",!1,w,N),N.onabort=b(vn,T,"TestLoadImage: abort",!1,w,N),N.ontimeout=b(vn,T,"TestLoadImage: timeout",!1,w,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else w(!1)}function Qc(h,w){const T=new Wi,N=new AbortController,K=setTimeout(()=>{N.abort(),vn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:N.signal}).then(ee=>{clearTimeout(K),ee.ok?vn(T,"TestPingServer: ok",!0,w):vn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),vn(T,"TestPingServer: error",!1,w)})}function vn(h,w,T,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(T)}catch{}}function tp(){this.g=new $l}function Jc(h,w,T){const N=T||"";try{Vs(h,function(K,ee){let he=K;f(K)&&(he=Ml(K)),w.push(N+ee+"="+encodeURIComponent(he))})}catch(K){throw w.push(N+"type="+encodeURIComponent("_badmap")),K}}function us(h){this.l=h.Ub||null,this.j=h.eb||!1}S(us,Bi),us.prototype.g=function(){return new Yi(this.l,this.j)},us.prototype.i=function(h){return function(){return h}}({});function Yi(h,w){Ct.call(this),this.D=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Yi,Ct),n=Yi.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=w,this.readyState=1,gr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(w.body=h),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?mr(this):gr(this),this.readyState==3&&Yc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,mr(this))},n.Qa=function(h){this.g&&(this.response=h,mr(this))},n.ga=function(){this.g&&mr(this)};function mr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,gr(h)}n.setRequestHeader=function(h,w){this.u.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=w.next();return h.join(`\r
`)};function gr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function cs(h){let w="";return V(h,function(T,N){w+=N,w+=":",w+=T,w+=`\r
`}),w}function Ws(h,w,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=cs(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Ye(h,w,T))}function it(h){Ct.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(it,Ct);var np=/^https?$/i,Ql=["POST","PUT"];n=it.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,w,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?Wo(this.o):Wo(dr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(ee){Xi(this,ee);return}if(h=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)T.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())T.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Ql,w,void 0))||N||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,he]of T)this.g.setRequestHeader(ee,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{na(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){Xi(this,ee)}};function Xi(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.m=5,ta(h),jn(h)}function ta(h){h.A||(h.A=!0,Pt(h,"complete"),Pt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Pt(this,"complete"),Pt(this,"abort"),jn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jn(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Jl(this):this.bb())},n.bb=function(){Jl(this)};function Jl(h){if(h.h&&typeof l<"u"&&(!h.v[1]||_n(h)!=4||h.Z()!=2)){if(h.u&&_n(h)==4)Dl(h.Ea,0,h);else if(Pt(h,"readystatechange"),_n(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var N;if(N=he===0){var K=String(h.D).match(Qi)[1]||null;!K&&u.self&&u.self.location&&(K=u.self.location.protocol.slice(0,-1)),N=!np.test(K?K.toLowerCase():"")}T=N}if(T)Pt(h,"complete"),Pt(h,"success");else{h.m=6;try{var ee=2<_n(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",ta(h)}}finally{jn(h)}}}}function jn(h,w){if(h.g){na(h);const T=h.g,N=h.v[0]?()=>{}:null;h.g=null,h.v=null,w||Pt(h,"ready");try{T.onreadystatechange=N}catch{}}}function na(h){h.I&&(u.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function _n(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),Vl(w)}};function Yl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ra(h){const w={};h=(h.g&&2<=_n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(W(h[N]))continue;var T=M(h[N]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=w[K]||[];w[K]=ee,ee.push(T)}A(w,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(h,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||w}function Xl(h){this.Aa=0,this.i=[],this.j=new Wi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,h),this.cb=Dr("retryDelaySeedMs",1e4,h),this.Wa=Dr("forwardChannelMaxRetries",2,h),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Gi(h&&h.concurrentRequestLimit),this.Da=new tp,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xl.prototype,n.la=8,n.G=1,n.connect=function(h,w,T,N){_t(0),this.W=h,this.H=w||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=td(this,null,this.W),Or(this)};function Ht(h){if(sa(h),h.G==3){var w=h.U++,T=Nn(h.I);if(Ye(T,"SID",h.K),Ye(T,"RID",w),Ye(T,"TYPE","terminate"),ds(h,T),w=new hr(h,h.j,w),w.L=2,w.v=Us(Nn(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=w.v,T=!0),T||(w.g=nd(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Xe(w)}ed(h)}function yr(h){h.g&&(Zl(h),h.g.cancel(),h.g=null)}function sa(h){yr(h),h.u&&(u.clearTimeout(h.u),h.u=null),aa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Or(h){if(!Rn(h.h)&&!h.s){h.s=!0;var w=h.Ga;we||te(),J||(we(),J=!0),Z.add(w,h),h.B=0}}function rp(h,w){return Bc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=w.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ur(_(h.Ga,h,w),Zc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new hr(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=E(ee),R(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Hs(this,K,w),T=Nn(this.I),Ye(T,"RID",h),Ye(T,"CVER",22),this.D&&Ye(T,"X-HTTP-Session-Id",this.D),ds(this,T),ee&&(this.O?w="headers="+encodeURIComponent(String(cs(ee)))+"&"+w:this.m&&Ws(T,this.m,ee)),Kl(this.h,K),this.Ua&&Ye(T,"TYPE","init"),this.P?(Ye(T,"$req",w),Ye(T,"SID","null"),K.T=!0,Yo(K,T,null)):Yo(K,T,w),this.G=2}}else this.G==3&&(h?ia(this,h):this.i.length==0||Rn(this.h)||ia(this))};function ia(h,w){var T;w?T=w.l:T=h.U++;const N=Nn(h.I);Ye(N,"SID",h.K),Ye(N,"RID",T),Ye(N,"AID",h.T),ds(h,N),h.m&&h.o&&Ws(N,h.m,h.o),T=new hr(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),w&&(h.i=w.D.concat(h.i)),w=Hs(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Kl(h.h,T),Yo(T,N,w)}function ds(h,w){h.H&&V(h.H,function(T,N){Ye(w,N,T)}),h.l&&Vs({},function(T,N){Ye(w,N,T)})}function Hs(h,w,T){T=Math.min(h.i.length,T);var N=h.l?_(h.l.Na,h.l,h):null;e:{var K=h.i;let ee=-1;for(;;){const he=["count="+T];ee==-1?0<T?(ee=K[0].g,he.push("ofs="+ee)):ee=0:he.push("ofs="+ee);let Ge=!0;for(let At=0;At<T;At++){let ze=K[At].g;const Mt=K[At].map;if(ze-=ee,0>ze)ee=Math.max(0,K[At].g-100),Ge=!1;else try{Jc(Mt,he,"req"+ze+"_")}catch{N&&N(Mt)}}if(Ge){N=he.join("&");break e}}}return h=h.i.splice(0,T),w.D=h,N}function Zi(h){if(!h.g&&!h.u){h.Y=1;var w=h.Fa;we||te(),J||(we(),J=!0),Z.add(w,h),h.v=0}}function oa(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ur(_(h.Fa,h),Zc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Xc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ur(_(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),yr(this),Xc(this))};function Zl(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Xc(h){h.g=new hr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var w=Nn(h.qa);Ye(w,"RID","rpc"),Ye(w,"SID",h.K),Ye(w,"AID",h.T),Ye(w,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ye(w,"TO",h.ja),Ye(w,"TYPE","xmlhttp"),ds(h,w),h.m&&h.o&&Ws(w,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Us(Nn(w)),T.m=null,T.P=!0,Hl(T,h)}n.Za=function(){this.C!=null&&(this.C=null,yr(this),oa(this),_t(19))};function aa(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function la(h,w){var T=null;if(h.g==w){aa(h),Zl(h),h.g=null;var N=2}else if(hn(h.h,w))T=w.D,zc(h.h,w),N=1;else return;if(h.G!=0){if(w.o)if(N==1){T=w.m?w.m.length:0,w=Date.now()-w.F;var K=h.B;N=zi(),Pt(N,new Ko(N,T)),Or(h)}else Zi(h);else if(K=w.s,K==3||K==0&&0<w.X||!(N==1&&rp(h,w)||N==2&&oa(h)))switch(T&&0<T.length&&(w=h.h,w.i=w.i.concat(T)),K){case 1:hs(h,5);break;case 4:hs(h,10);break;case 3:hs(h,6);break;default:hs(h,2)}}}function Zc(h,w){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*w}function hs(h,w){if(h.j.info("Error code "+w),w==2){var T=_(h.fb,h),N=h.Xa;const K=!N;N=new ls(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ji(N,"https"),Us(N),K?ep(N.toString(),T):Qc(N.toString(),T)}else _t(2);h.G=0,h.l&&h.l.sa(w),ed(h),sa(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function ed(h){if(h.G=0,h.ka=[],h.l){const w=Wc(h.h);(w.length!=0||h.i.length!=0)&&(P(h.ka,w),P(h.ka,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.ra()}}function td(h,w,T){var N=T instanceof ls?Nn(T):new ls(T);if(N.g!="")w&&(N.g=w+"."+N.g),$s(N,N.s);else{var K=u.location;N=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;var ee=new ls(null);N&&Ji(ee,N),w&&(ee.g=w),K&&$s(ee,K),T&&(ee.l=T),N=ee}return T=h.D,w=h.ya,T&&w&&Ye(N,T,w),Ye(N,"VER",h.la),ds(h,N),N}function nd(h,w,T){if(w&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Ca&&!h.pa?new it(new us({eb:T})):new it(h.pa),w.Ha(h.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eu(){}n=eu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ua(){}ua.prototype.g=function(h,w){return new fn(h,w)};function fn(h,w){Ct.call(this),this.g=new Xl(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(h?h["X-WebChannel-Client-Profile"]=w.va:h={"X-WebChannel-Client-Profile":w.va}),this.g.S=h,(h=w&&w.Sb)&&!W(h)&&(this.g.m=h),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!W(w)&&(this.g.D=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new Lr(this)}S(fn,Ct),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){Ht(this.g)},fn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Ml(h),h=T);w.i.push(new Uc(w.Ya++,h)),w.G==3&&Or(w)},fn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,fn.aa.N.call(this)};function rd(h){Ir.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const T in w){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}S(rd,Ir);function sd(){qo.call(this),this.status=1}S(sd,qo);function Lr(h){this.g=h}S(Lr,eu),Lr.prototype.ua=function(){Pt(this.g,"a")},Lr.prototype.ta=function(h){Pt(this.g,new rd(h))},Lr.prototype.sa=function(h){Pt(this.g,new sd)},Lr.prototype.ra=function(){Pt(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Hk=function(){return new ua},Wk=function(){return zi()},zk=Rr,qg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,bh=Qo,Mc.COMPLETE="complete",Bk=Mc,Ho.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Mu=Ho,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,Uk=it}).apply(typeof uh<"u"?uh:typeof self<"u"?self:typeof window<"u"?window:{});const zb="@firebase/firestore",Wb="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new dy("@firebase/firestore");function Ba(){return Io.logLevel}function ge(n,...e){if(Io.logLevel<=Fe.DEBUG){const t=e.map(my);Io.debug(`Firestore (${Sl}): ${n}`,...t)}}function Ns(n,...e){if(Io.logLevel<=Fe.ERROR){const t=e.map(my);Io.error(`Firestore (${Sl}): ${n}`,...t)}}function cl(n,...e){if(Io.logLevel<=Fe.WARN){const t=e.map(my);Io.warn(`Firestore (${Sl}): ${n}`,...t)}}function my(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: `+n;throw Ns(e),new Error(e)}function Ke(n,e){n||Ie()}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends es{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class nV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rV{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let o=new Ps;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ps,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},u=d=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ps)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string"),new qk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new an(e)}}class sV{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class iV{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new sV(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oV{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,tr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0);const r=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Hb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new Hb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=aV(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function Kg(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Le(r,s);{const o=Kk(),l=lV(o.encode(qb(n,t)),o.encode(qb(e,t)));return l!==0?l:Le(r,s)}}t+=r>65535?2:1}return Le(n.length,e.length)}function qb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function lV(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Le(n[t],e[t]);return Le(n.length,e.length)}function dl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=-62135596800,Gb=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Gb);return new Dt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ee(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kb)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gb}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Dt(0,0))}static max(){return new je(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="__name__";class Br{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(),r===void 0?r=e.length-t:r>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Br.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Le(e.length,t.length)}static compareSegments(e,t){const r=Br.isNumericId(e),s=Br.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Kg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wi.fromString(e.substring(4,e.length-2))}}class at extends Br{construct(e,t,r){return new at(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ee(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new at(t)}static emptyPath(){return new at([])}}const uV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Br{construct(e,t,r){return new Yt(e,t,r)}static isValidIdentifier(e){return uV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qb}static keyField(){return new Yt([Qb])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Ee(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Ee(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Ee(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new Ee(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(at.fromString(e))}static fromName(e){return new Ce(at.fromString(e).popFirst(5))}static empty(){return new Ce(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new at(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=-1;function cV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=je.fromTimestamp(r===1e9?new Dt(t+1,0):new Dt(t,r));return new Ci(s,Ce.empty(),e)}function dV(n){return new Ci(n.readTime,n.key,cc)}class Ci{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ci(je.min(),Ce.empty(),cc)}static max(){return new Ci(je.max(),Ce.empty(),cc)}}function hV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kl(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==fV)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&t()},d=>r(d))}),l=!0,o===s&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(s=>s?re.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new re((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let d=0;d<o;d++){const f=d;t(e[f]).next(g=>{l[f]=g,++u,u===o&&r(l)},g=>s(g))}})}static doWhile(e,t){return new re((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function mV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Tf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=-1;function Sf(n){return n==null}function Kh(n){return n===0&&1/n==-1/0}function gV(n){return typeof n=="number"&&Number.isInteger(n)&&!Kh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="";function yV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Jb(e)),e=vV(n.get(t),e);return Jb(e)}function vV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case Qk:t+="";break;default:t+=o}}return t}function Jb(n){return n+Qk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ch(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ch(this.root,e,this.comparator,!1)}getReverseIterator(){return new ch(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ch(this.root,e,this.comparator,!0)}}class ch{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Qt.RED,this.left=s??Qt.EMPTY,this.right=o??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Qt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xb(this.data.getIterator())}getIteratorFrom(e){return new Xb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Xb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new $n([])}unionWith(e){let t=new Ot(Yt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yk("Invalid base64 string: "+o):o}}(e);return new Zt(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const _V=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=_V.exec(n);if(Ke(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(n.seconds),nanos:Et(n.nanos)}}function Et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ai(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk="server_timestamp",Zk="__type__",eC="__previous_value__",tC="__local_write_time__";function yy(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Zk])===null||t===void 0?void 0:t.stringValue)===Xk}function kf(n){const e=n.mapValue.fields[eC];return yy(e)?kf(e):e}function dc(n){const e=Pi(n.mapValue.fields[tC].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,t,r,s,o,l,u,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=f}}const Gh="(default)";class hc{constructor(e,t){this.projectId=e,this.database=t||Gh}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="__type__",xV="__max__",dh={mapValue:{}},rC="__vector__",Qh="value";function Ii(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yy(n)?4:EV(n)?9007199254740991:bV(n)?10:11:Ie()}function Yr(n,e){if(n===e)return!0;const t=Ii(n);if(t!==Ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dc(n).isEqual(dc(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Pi(s.timestampValue),u=Pi(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return Ai(s.bytesValue).isEqual(Ai(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return Et(s.geoPointValue.latitude)===Et(o.geoPointValue.latitude)&&Et(s.geoPointValue.longitude)===Et(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Et(s.integerValue)===Et(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=Et(s.doubleValue),u=Et(o.doubleValue);return l===u?Kh(l)===Kh(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return dl(n.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(Yb(l)!==Yb(u))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(u[d]===void 0||!Yr(l[d],u[d])))return!1;return!0}(n,e);default:return Ie()}}function fc(n,e){return(n.values||[]).find(t=>Yr(t,e))!==void 0}function hl(n,e){if(n===e)return 0;const t=Ii(n),r=Ii(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(o,l){const u=Et(o.integerValue||o.doubleValue),d=Et(l.integerValue||l.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return Zb(n.timestampValue,e.timestampValue);case 4:return Zb(dc(n),dc(e));case 5:return Kg(n.stringValue,e.stringValue);case 6:return function(o,l){const u=Ai(o),d=Ai(l);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),d=l.split("/");for(let f=0;f<u.length&&f<d.length;f++){const g=Le(u[f],d[f]);if(g!==0)return g}return Le(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Le(Et(o.latitude),Et(l.latitude));return u!==0?u:Le(Et(o.longitude),Et(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return eE(n.arrayValue,e.arrayValue);case 10:return function(o,l){var u,d,f,g;const v=o.fields||{},_=l.fields||{},b=(u=v[Qh])===null||u===void 0?void 0:u.arrayValue,S=(d=_[Qh])===null||d===void 0?void 0:d.arrayValue,j=Le(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((g=S==null?void 0:S.values)===null||g===void 0?void 0:g.length)||0);return j!==0?j:eE(b,S)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===dh.mapValue&&l===dh.mapValue)return 0;if(o===dh.mapValue)return 1;if(l===dh.mapValue)return-1;const u=o.fields||{},d=Object.keys(u),f=l.fields||{},g=Object.keys(f);d.sort(),g.sort();for(let v=0;v<d.length&&v<g.length;++v){const _=Kg(d[v],g[v]);if(_!==0)return _;const b=hl(u[d[v]],f[g[v]]);if(b!==0)return b}return Le(d.length,g.length)}(n.mapValue,e.mapValue);default:throw Ie()}}function Zb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Pi(n),r=Pi(e),s=Le(t.seconds,r.seconds);return s!==0?s:Le(t.nanos,r.nanos)}function eE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=hl(t[s],r[s]);if(o)return o}return Le(t.length,r.length)}function fl(n){return Gg(n)}function Gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Pi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ai(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Gg(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Gg(t.fields[l])}`;return s+"}"}(n.mapValue):Ie()}function Eh(n){switch(Ii(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(n);return e?16+Eh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ai(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Eh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Mi(r.fields,(o,l)=>{s+=o.length+Eh(l)}),s}(n.mapValue);default:throw Ie()}}function Qg(n){return!!n&&"integerValue"in n}function vy(n){return!!n&&"arrayValue"in n}function tE(n){return!!n&&"nullValue"in n}function nE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Th(n){return!!n&&"mapValue"in n}function bV(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nC])===null||t===void 0?void 0:t.stringValue)===rC}function Gu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Mi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===xV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Th(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=Yt.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=Gu(l):s.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Th(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Th(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Mi(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new An(Gu(this.value))}}function sC(n){const e=[];return Mi(n.fields,(t,r)=>{const s=new Yt([t]);if(Th(r)){const o=sC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new ln(e,0,je.min(),je.min(),je.min(),An.empty(),0)}static newFoundDocument(e,t,r,s){return new ln(e,1,t,je.min(),r,s,0)}static newNoDocument(e,t){return new ln(e,2,t,je.min(),je.min(),An.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,je.min(),je.min(),An.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t){this.position=e,this.inclusive=t}}function rE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ce.comparator(Ce.fromName(l.referenceValue),t.key):r=hl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function sE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t="asc"){this.field=e,this.dir=t}}function TV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{}class Nt extends iC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new kV(e,t,r):t==="array-contains"?new AV(e,r):t==="in"?new IV(e,r):t==="not-in"?new RV(e,r):t==="array-contains-any"?new NV(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new CV(e,r):new PV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(hl(t,this.value)):t!==null&&Ii(this.value)===Ii(t)&&this.matchesComparison(hl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends iC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Xr(e,t)}matches(e){return oC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function oC(n){return n.op==="and"}function aC(n){return SV(n)&&oC(n)}function SV(n){for(const e of n.filters)if(e instanceof Xr)return!1;return!0}function Jg(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+fl(n.value);if(aC(n))return n.filters.map(e=>Jg(e)).join(",");{const e=n.filters.map(t=>Jg(t)).join(",");return`${n.op}(${e})`}}function lC(n,e){return n instanceof Nt?function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&Yr(r.value,s.value)}(n,e):n instanceof Xr?function(r,s){return s instanceof Xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,u)=>o&&lC(l,s.filters[u]),!0):!1}(n,e):void Ie()}function uC(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${fl(t.value)}`}(n):n instanceof Xr?function(t){return t.op.toString()+" {"+t.getFilters().map(uC).join(" ,")+"}"}(n):"Filter"}class kV extends Nt{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class CV extends Nt{constructor(e,t){super(e,"in",t),this.keys=cC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class PV extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=cC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function cC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class AV extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vy(t)&&fc(t.arrayValue,this.value)}}class IV extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fc(this.value.arrayValue,t)}}class RV extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!fc(this.value.arrayValue,t)}}class NV extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function iE(n,e=null,t=[],r=[],s=null,o=null,l=null){return new jV(n,e,t,r,s,o,l)}function _y(n){const e=De(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fl(r)).join(",")),e.le=t}return e.le}function wy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sE(n.startAt,e.startAt)&&sE(n.endAt,e.endAt)}function Yg(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function DV(n,e,t,r,s,o,l,u){return new Cf(n,e,t,r,s,o,l,u)}function xy(n){return new Cf(n)}function oE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OV(n){return n.collectionGroup!==null}function Qu(n){const e=De(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Ot(Yt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Yh(o,r))}),t.has(Yt.keyField().canonicalString())||e.he.push(new Yh(Yt.keyField(),r))}return e.he}function Kr(n){const e=De(n);return e.Pe||(e.Pe=LV(e,Qu(n))),e.Pe}function LV(n,e){if(n.limitType==="F")return iE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Yh(s.field,o)});const t=n.endAt?new Jh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jh(n.startAt.position,n.startAt.inclusive):null;return iE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xg(n,e,t){return new Cf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pf(n,e){return wy(Kr(n),Kr(e))&&n.limitType===e.limitType}function dC(n){return`${_y(Kr(n))}|lt:${n.limitType}`}function za(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>uC(s)).join(", ")}]`),Sf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>fl(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>fl(s)).join(",")),`Target(${r})`}(Kr(n))}; limitType=${n.limitType})`}function Af(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of Qu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,u,d){const f=rE(l,u,d);return l.inclusive?f<=0:f<0}(r.startAt,Qu(r),s)||r.endAt&&!function(l,u,d){const f=rE(l,u,d);return l.inclusive?f>=0:f>0}(r.endAt,Qu(r),s))}(n,e)}function MV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function hC(n){return(e,t)=>{let r=!1;for(const s of Qu(n)){const o=VV(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function VV(n,e,t){const r=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(o,l,u){const d=l.data.field(o),f=u.data.field(o);return d!==null&&f!==null?hl(d,f):Ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Jk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=new ht(Ce.comparator);function js(){return $V}const fC=new ht(Ce.comparator);function Vu(...n){let e=fC;for(const t of n)e=e.insert(t.key,t);return e}function pC(n){let e=fC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function So(){return Ju()}function mC(){return Ju()}function Ju(){return new Mo(n=>n.toString(),(n,e)=>n.isEqual(e))}const FV=new ht(Ce.comparator),UV=new Ot(Ce.comparator);function Ue(...n){let e=UV;for(const t of n)e=e.add(t);return e}const BV=new Ot(Le);function zV(){return BV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function gC(n){return{integerValue:""+n}}function WV(n,e){return gV(e)?gC(e):by(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function HV(n,e,t){return n instanceof Xh?function(s,o){const l={fields:{[Zk]:{stringValue:Xk},[tC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&yy(o)&&(o=kf(o)),o&&(l.fields[eC]=o),{mapValue:l}}(t,e):n instanceof pc?vC(n,e):n instanceof mc?_C(n,e):function(s,o){const l=yC(s,o),u=aE(l)+aE(s.Ie);return Qg(l)&&Qg(s.Ie)?gC(u):by(s.serializer,u)}(n,e)}function qV(n,e,t){return n instanceof pc?vC(n,e):n instanceof mc?_C(n,e):t}function yC(n,e){return n instanceof Zh?function(r){return Qg(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Xh extends If{}class pc extends If{constructor(e){super(),this.elements=e}}function vC(n,e){const t=wC(e);for(const r of n.elements)t.some(s=>Yr(s,r))||t.push(r);return{arrayValue:{values:t}}}class mc extends If{constructor(e){super(),this.elements=e}}function _C(n,e){let t=wC(e);for(const r of n.elements)t=t.filter(s=>!Yr(s,r));return{arrayValue:{values:t}}}class Zh extends If{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function aE(n){return Et(n.integerValue||n.doubleValue)}function wC(n){return vy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KV(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof pc&&s instanceof pc||r instanceof mc&&s instanceof mc?dl(r.elements,s.elements,Yr):r instanceof Zh&&s instanceof Zh?Yr(r.Ie,s.Ie):r instanceof Xh&&s instanceof Xh}(n.transform,e.transform)}class GV{constructor(e,t){this.version=e,this.transformResults=t}}class sr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Rf{}function xC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ey(n.key,sr.none()):new Pc(n.key,n.data,sr.none());{const t=n.data,r=An.empty();let s=new Ot(Yt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Vi(n.key,r,new $n(s.toArray()),sr.none())}}function QV(n,e,t){n instanceof Pc?function(s,o,l){const u=s.value.clone(),d=uE(s.fieldTransforms,o,l.transformResults);u.setAll(d),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Vi?function(s,o,l){if(!Sh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=uE(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(bC(s)),d.setAll(u),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Yu(n,e,t,r){return n instanceof Pc?function(o,l,u,d){if(!Sh(o.precondition,l))return u;const f=o.value.clone(),g=cE(o.fieldTransforms,d,l);return f.setAll(g),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vi?function(o,l,u,d){if(!Sh(o.precondition,l))return u;const f=cE(o.fieldTransforms,d,l),g=l.data;return g.setAll(bC(o)),g.setAll(f),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,u){return Sh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function JV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=yC(r.transform,s||null);o!=null&&(t===null&&(t=An.empty()),t.set(r.field,o))}return t||null}function lE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(o,l)=>KV(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Pc extends Rf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vi extends Rf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uE(n,e,t){const r=new Map;Ke(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,qV(l,u,t[s]))}return r}function cE(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,HV(o,l,e))}return r}class Ey extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YV extends Rf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&QV(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mC();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const d=xC(l,u);d!==null&&r.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(t,r)=>lE(t,r))&&dl(this.baseMutations,e.baseMutations,(t,r)=>lE(t,r))}}class Ty{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ke(e.mutations.length===r.length);let s=function(){return FV}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Ty(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,We;function t$(n){switch(n){case le.OK:return Ie();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Ie()}}function EC(n){if(n===void 0)return Ns("GRPC error has no .code"),le.UNKNOWN;switch(n){case kt.OK:return le.OK;case kt.CANCELLED:return le.CANCELLED;case kt.UNKNOWN:return le.UNKNOWN;case kt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case kt.INTERNAL:return le.INTERNAL;case kt.UNAVAILABLE:return le.UNAVAILABLE;case kt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case kt.NOT_FOUND:return le.NOT_FOUND;case kt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case kt.ABORTED:return le.ABORTED;case kt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case kt.DATA_LOSS:return le.DATA_LOSS;default:return Ie()}}(We=kt||(kt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=new wi([4294967295,4294967295],0);function dE(n){const e=Kk().encode(n),t=new Fk;return t.update(e),new Uint8Array(t.digest())}function hE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wi([t,r],0),new wi([s,o],0)]}class Sy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $u(`Invalid padding: ${t}`);if(r<0)throw new $u(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $u(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $u(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=wi.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(wi.fromNumber(r)));return s.compare(n$)===1&&(s=new wi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=dE(e),[r,s]=hE(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Sy(o,s,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=dE(e),[r,s]=hE(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class $u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nf(je.min(),s,new ht(Le),js(),Ue())}}class Ac{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ac(r,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class TC{constructor(e,t){this.targetId=e,this.ge=t}}class SC{constructor(e,t,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class fE{constructor(){this.pe=0,this.ye=pE(),this.we=Zt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ue(),t=Ue(),r=Ue();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie()}}),new Ac(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=pE()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ke(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class r${constructor(e){this.ke=e,this.qe=new Map,this.Qe=js(),this.$e=hh(),this.Ue=hh(),this.Ke=new ht(Le)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(Yg(o))if(r===0){const l=new Ce(o.path);this.ze(t,l,ln.newNoDocument(l,je.min()))}else Ke(r===1);else{const l=this.et(t);if(l!==r){const u=this.tt(e),d=u?this.nt(u,e,l):1;if(d!==0){this.Ye(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,f)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=Ai(r).toUint8Array()}catch(d){if(d instanceof Yk)return cl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new Sy(l,s,o)}catch(d){return cl(d instanceof $u?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.Ee===0?null:u}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&Yg(u.target)){const d=new Ce(u.target.path);this._t(d).has(l)||this.ut(l,d)||this.ze(l,d,ln.newNoDocument(d,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Ue();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(d=>{const f=this.Xe(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Nf(e,t,this.Ke,this.Qe,r);return this.Qe=js(),this.$e=hh(),this.Ue=hh(),this.Ke=new ht(Le),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new fE,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Ot(Le),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ot(Le),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new fE),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function hh(){return new ht(Ce.comparator)}function pE(){return new ht(Ce.comparator)}const s$={asc:"ASCENDING",desc:"DESCENDING"},i$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o$={and:"AND",or:"OR"};class a${constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zg(n,e){return n.useProto3Json||Sf(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function l$(n,e){return ef(n,e.toTimestamp())}function Gr(n){return Ke(!!n),je.fromTimestamp(function(t){const r=Pi(t);return new Dt(r.seconds,r.nanos)}(n))}function ky(n,e){return e0(n,e).canonicalString()}function e0(n,e){const t=function(s){return new at(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function CC(n){const e=at.fromString(n);return Ke(NC(e)),e}function t0(n,e){return ky(n.databaseId,e.path)}function eg(n,e){const t=CC(e);if(t.get(1)!==n.databaseId.projectId)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ee(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(AC(t))}function PC(n,e){return ky(n.databaseId,e)}function u$(n){const e=CC(n);return e.length===4?at.emptyPath():AC(e)}function n0(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AC(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function mE(n,e,t){return{name:t0(n,e),fields:t.value.mapValue.fields}}function c$(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,g){return f.useProto3Json?(Ke(g===void 0||typeof g=="string"),Zt.fromBase64String(g||"")):(Ke(g===void 0||g instanceof Buffer||g instanceof Uint8Array),Zt.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(f){const g=f.code===void 0?le.UNKNOWN:EC(f.code);return new Ee(g,f.message||"")}(l);t=new SC(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=eg(n,r.document.name),o=Gr(r.document.updateTime),l=r.document.createTime?Gr(r.document.createTime):je.min(),u=new An({mapValue:{fields:r.document.fields}}),d=ln.newFoundDocument(s,o,l,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new kh(f,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=eg(n,r.document),o=r.readTime?Gr(r.readTime):je.min(),l=ln.newNoDocument(s,o),u=r.removedTargetIds||[];t=new kh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=eg(n,r.document),o=r.removedTargetIds||[];t=new kh([],o,s,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new e$(s,o),u=r.targetId;t=new TC(u,l)}}return t}function d$(n,e){let t;if(e instanceof Pc)t={update:mE(n,e.key,e.value)};else if(e instanceof Ey)t={delete:t0(n,e.key)};else if(e instanceof Vi)t={update:mE(n,e.key,e.data),updateMask:w$(e.fieldMask)};else{if(!(e instanceof YV))return Ie();t={verify:t0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof Xh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof pc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof mc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Zh)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:l$(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie()}(n,e.precondition)),t}function h$(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?Gr(s.updateTime):Gr(o);return l.isEqual(je.min())&&(l=Gr(o)),new GV(l,s.transformResults||[])}(t,e))):[]}function f$(n,e){return{documents:[PC(n,e.path)]}}function p$(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PC(n,s);const o=function(f){if(f.length!==0)return RC(Xr.create(f,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(f){if(f.length!==0)return f.map(g=>function(_){return{field:Wa(_.field),direction:y$(_.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=Zg(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ht:t,parent:s}}function m$(n){let e=u$(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ke(r===1);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(v){const _=IC(v);return _ instanceof Xr&&aC(_)?_.getFilters():[_]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(_=>function(S){return new Yh(Ha(S.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(_))}(t.orderBy));let u=null;t.limit&&(u=function(v){let _;return _=typeof v=="object"?v.value:v,Sf(_)?null:_}(t.limit));let d=null;t.startAt&&(d=function(v){const _=!!v.before,b=v.values||[];return new Jh(b,_)}(t.startAt));let f=null;return t.endAt&&(f=function(v){const _=!v.before,b=v.values||[];return new Jh(b,_)}(t.endAt)),DV(e,s,l,o,u,"F",d,f)}function g$(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IC(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ha(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ha(t.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ha(t.unaryFilter.field);return Nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ha(t.unaryFilter.field);return Nt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(n):n.fieldFilter!==void 0?function(t){return Nt.create(Ha(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xr.create(t.compositeFilter.filters.map(r=>IC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(n):Ie()}function y$(n){return s$[n]}function v$(n){return i$[n]}function _$(n){return o$[n]}function Wa(n){return{fieldPath:n.canonicalString()}}function Ha(n){return Yt.fromServerFormat(n.fieldPath)}function RC(n){return n instanceof Nt?function(t){if(t.op==="=="){if(nE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NAN"}};if(tE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NAN"}};if(tE(t.value))return{unaryFilter:{field:Wa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(t.field),op:v$(t.op),value:t.value}}}(n):n instanceof Xr?function(t){const r=t.getFilters().map(s=>RC(s));return r.length===1?r[0]:{compositeFilter:{op:_$(t.op),filters:r}}}(n):Ie()}function w$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t,r,s,o=je.min(),l=je.min(),u=Zt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e){this.Tt=e}}function b$(n){const e=m$({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E${constructor(){this.Tn=new T$}addToCollectionParentIndex(e,t){return this.Tn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ci.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class T${constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ot(at.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ot(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jC=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(jC,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new pl(0)}static Kn(){return new pl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="LruGarbageCollector",S$=1048576;function vE([n,e],[t,r]){const s=Le(n,t);return s===0?Le(e,r):s}class k${constructor(e){this.Hn=e,this.buffer=new Ot(vE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C${constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(yE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Cl(t)?ge(yE,"Ignoring IndexedDB error during garbage collection: ",t):await kl(t)}await this.er(3e5)})}}class P${constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Tf.ae);const r=new k$(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(gE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gE):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,l,u,d,f;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(f=Date.now(),Ba()<=Fe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(d-u)+`ms
	Removed ${v} documents in `+(f-d)+`ms
Total Duration: ${f-g}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function A$(n,e){return new P$(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(){this.changes=new Mo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N${constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Yu(r.mutation,s,$n.empty(),Dt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ue()){const s=So();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=Vu();return o.forEach((u,d)=>{l=l.insert(u,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=So();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ue()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,s){let o=js();const l=Ju(),u=function(){return Ju()}();return t.forEach((d,f)=>{const g=r.get(f.key);s.has(f.key)&&(g===void 0||g.mutation instanceof Vi)?o=o.insert(f.key,f):g!==void 0?(l.set(f.key,g.mutation.getFieldMask()),Yu(g.mutation,f,g.mutation.getFieldMask(),Dt.now())):l.set(f.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,g)=>l.set(f,g)),t.forEach((f,g)=>{var v;return u.set(f,new R$(g,(v=l.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=Ju();let s=new ht((l,u)=>l-u),o=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(d=>{const f=t.get(d);if(f===null)return;let g=r.get(d)||$n.empty();g=u.applyToLocalView(f,g),r.set(d,g);const v=(s.get(u.batchId)||Ue()).add(d);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),f=d.key,g=d.value,v=mC();g.forEach(_=>{if(!o.has(_)){const b=xC(t.get(_),r.get(_));b!==null&&v.set(_,b),o=o.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,f,v))}return re.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return Ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):re.resolve(So());let u=cc,d=o;return l.next(f=>re.forEach(f,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?re.resolve():this.remoteDocumentCache.getEntry(e,g).next(_=>{d=d.insert(g,_)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,Ue())).next(g=>({batchId:u,changes:pC(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let s=Vu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Vu();return this.indexManager.getCollectionParents(e,o).next(u=>re.forEach(u,d=>{const f=function(v,_){return new Cf(_,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(g=>{g.forEach((v,_)=>{l=l.insert(v,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((d,f)=>{const g=f.getKey();l.get(g)===null&&(l=l.insert(g,ln.newInvalidDocument(g)))});let u=Vu();return l.forEach((d,f)=>{const g=o.get(d);g!==void 0&&Yu(g.mutation,f,$n.empty(),Dt.now()),Af(t,f)&&(u=u.insert(d,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return re.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Gr(s.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:b$(s.bundledQuery),readTime:Gr(s.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(){this.overlays=new ht(Ce.comparator),this.Rr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=So();return re.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const s=So(),o=t.length+1,l=new Ce(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const d=u.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return re.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new ht((f,g)=>f-g);const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=So(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}const u=So(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=s)););return re.resolve(u)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ZV(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ue(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.Vr=new Ot(zt.mr),this.gr=new Ot(zt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new zt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new zt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Ce(new at([])),r=new zt(t,e),s=new zt(t,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ce(new at([])),r=new zt(t,e),s=new zt(t,e+1);let o=Ue();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new zt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ce.comparator(e.key,t.key)||Le(e.Cr,t.Cr)}static pr(e,t){return Le(e.Cr,t.Cr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ot(zt.mr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new XV(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new zt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return re.resolve(l)}lookupMutationBatch(e,t){return re.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?gy:this.Fr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zt(t,0),s=new zt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const u=this.Or(l.Cr);o.push(u)}),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ot(Le);return t.forEach(s=>{const o=new zt(s,0),l=new zt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),re.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ce.isDocumentKey(o)||(o=o.child(""));const l=new zt(new Ce(o),0);let u=new Ot(Le);return this.Mr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(d.Cr)),!0)},l),re.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ke(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return re.forEach(t.mutations,s=>{const o=new zt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new zt(t,0),s=this.Mr.firstAfterOrEqual(r);return re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.kr=e,this.docs=function(){return new ht(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():ln.newInvalidDocument(s))}),re.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=js();const l=t.path,u=new Ce(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:f,value:{document:g}}=d.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||hV(dV(g),r)<=0||(s.has(g.key)||Af(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ie()}qr(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new V$(this)}getSize(e){return re.resolve(this.size)}}class V$ extends I${constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e){this.persistence=e,this.Qr=new Mo(t=>_y(t),wy),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Cy,this.targetCount=0,this.Kr=pl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),re.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new pl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.zn(t),re.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),re.waitFor(o).next(()=>s)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Tf(0),this.zr=!1,this.zr=!0,this.jr=new O$,this.referenceDelegate=e(this),this.Hr=new $$(this),this.indexManager=new E$,this.remoteDocumentCache=function(s){return new M$(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new x$(t),this.Yr=new j$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new L$(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new F$(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return re.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class F$ extends pV{constructor(e){super(),this.currentSequenceNumber=e}}class Py{constructor(e){this.persistence=e,this.ti=new Cy,this.ni=null}static ri(e){return new Py(e)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),re.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.ii,r=>{const s=Ce.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,je.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return re.or([()=>re.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class tf{constructor(e,t){this.persistence=e,this.oi=new Mo(r=>yV(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=A$(this,t)}static ri(e,t){return new tf(e,t)}Zr(){}Xr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return re.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?re.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(u=>{u||(r++,o.removeEntry(l,je.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),re.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Eh(e.data.value)),t}ar(e,t,r){return re.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return re.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Ue(),s=Ue();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ay(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return OL()?8:mV(cn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new U$;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(Ba()<=Fe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",za(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),re.resolve()):(Ba()<=Fe.DEBUG&&ge("QueryEngine","Query:",za(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Ba()<=Fe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",za(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(t))):re.resolve())}rs(e,t){if(oE(t))return re.resolve(null);let r=Kr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Xg(t,null,"F"),r=Kr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Ue(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.cs(t,u);return this.ls(t,f,l,d.readTime)?this.rs(e,Xg(t,null,"F")):this.hs(e,f,t,d)}))})))}ss(e,t,r,s){return oE(t)||s.isEqual(je.min())?re.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,s)?re.resolve(null):(Ba()<=Fe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),za(t)),this.hs(e,l,t,cV(s,cc)).next(u=>u))})}cs(e,t){let r=new Ot(hC(e));return t.forEach((s,o)=>{Af(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return Ba()<=Fe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",za(t)),this.ns.getDocumentsMatchingQuery(e,t,Ci.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="LocalStore",z$=3e8;class W${constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new ht(Le),this.Is=new Mo(o=>_y(o),wy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N$(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function H$(n,e,t,r){return new W$(n,e,t,r)}async function OC(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let d=Ue();for(const f of s){l.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}for(const f of o){u.push(f.batchId);for(const g of f.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next(f=>({Rs:f,removedBatchIds:l,addedBatchIds:u}))})})}function q$(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,d,f,g){const v=f.batch,_=v.keys();let b=re.resolve();return _.forEach(S=>{b=b.next(()=>g.getEntry(d,S)).next(j=>{const P=f.docVersions.get(S);Ke(P!==null),j.version.compareTo(P)<0&&(v.applyToRemoteDocument(j,f),j.isValidDocument()&&(j.setReadTime(f.commitVersion),g.addEntry(j)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(d,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let d=Ue();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(d=d.add(u.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function LC(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function K$(n,e){const t=De(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const u=[];e.targetChanges.forEach((g,v)=>{const _=s.get(v);if(!_)return;u.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,v)));let b=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(Zt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(j,P,D){return j.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=z$?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(_,b,g)&&u.push(t.Hr.updateTargetData(o,b))});let d=js(),f=Ue();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(G$(o,l,e.documentUpdates).next(g=>{d=g.Vs,f=g.fs})),!r.isEqual(je.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return re.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(t.Ts=s,o))}function G$(n,e,t){let r=Ue(),s=Ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=js();return t.forEach((u,d)=>{const f=o.get(u);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(je.min())?(e.removeEntry(u,d.readTime),l=l.insert(u,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),l=l.insert(u,d)):ge(Iy,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",d.version)}),{Vs:l,fs:s}})}function Q$(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=gy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function J$(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,re.resolve(s)):t.Hr.allocateTargetId(r).next(l=>(s=new yi(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function r0(n,e,t){const r=De(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Cl(l))throw l;ge(Iy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function _E(n,e,t){const r=De(n);let s=je.min(),o=Ue();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,f,g){const v=De(d),_=v.Is.get(g);return _!==void 0?re.resolve(v.Ts.get(_)):v.Hr.getTargetData(f,g)}(r,l,Kr(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(d=>{o=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?s:je.min(),t?o:Ue())).next(u=>(Y$(r,MV(e),u),{documents:u,gs:o})))}function Y$(n,e,t){let r=n.Es.get(e)||je.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class wE{constructor(){this.activeTargetIds=zV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X${constructor(){this.ho=new wE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new wE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="ConnectivityMonitor";class bE{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(xE,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(xE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function s0(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="RestConnection",e3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t3{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===Gh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,o){const l=s0(),u=this.bo(e,t.toUriEncodedString());ge(tg,`Sending RPC '${e}' ${l}:`,u,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,s,o),this.vo(e,u,d,r).then(f=>(ge(tg,`Received RPC '${e}' ${l}: `,f),f),f=>{throw cl(tg,`RPC '${e}' ${l} failed with error: `,f,"url: ",u,"request:",r),f})}Co(e,t,r,s,o,l){return this.So(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,t){const r=e3[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class r3 extends t3{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=s0();return new Promise((l,u)=>{const d=new Uk;d.setWithCredentials(!0),d.listenOnce(Bk.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case bh.NO_ERROR:const g=d.getResponseJson();ge(sn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case bh.TIMEOUT:ge(sn,`RPC '${e}' ${o} timed out`),u(new Ee(le.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const v=d.getStatus();if(ge(sn,`RPC '${e}' ${o} failed with status:`,v,"response text:",d.getResponseText()),v>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const b=_==null?void 0:_.error;if(b&&b.status&&b.message){const S=function(P){const D=P.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(D)>=0?D:le.UNKNOWN}(b.status);u(new Ee(S,b.message))}else u(new Ee(le.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Ee(le.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ge(sn,`RPC '${e}' ${o} completed.`)}});const f=JSON.stringify(s);ge(sn,`RPC '${e}' ${o} sending request:`,s),d.send(t,"POST",f,r,15)})}Wo(e,t,r){const s=s0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Hk(),u=Wk(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=o.join("");ge(sn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=l.createWebChannel(g,d);let _=!1,b=!1;const S=new n3({Fo:P=>{b?ge(sn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(_||(ge(sn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),_=!0),ge(sn,`RPC '${e}' stream ${s} sending:`,P),v.send(P))},Mo:()=>v.close()}),j=(P,D,W)=>{P.listen(D,F=>{try{W(F)}catch(q){setTimeout(()=>{throw q},0)}})};return j(v,Mu.EventType.OPEN,()=>{b||(ge(sn,`RPC '${e}' stream ${s} transport opened.`),S.Qo())}),j(v,Mu.EventType.CLOSE,()=>{b||(b=!0,ge(sn,`RPC '${e}' stream ${s} transport closed`),S.Uo())}),j(v,Mu.EventType.ERROR,P=>{b||(b=!0,cl(sn,`RPC '${e}' stream ${s} transport errored:`,P),S.Uo(new Ee(le.UNAVAILABLE,"The operation could not be completed")))}),j(v,Mu.EventType.MESSAGE,P=>{var D;if(!b){const W=P.data[0];Ke(!!W);const F=W,q=(F==null?void 0:F.error)||((D=F[0])===null||D===void 0?void 0:D.error);if(q){ge(sn,`RPC '${e}' stream ${s} received error:`,q);const B=q.status;let V=function(C){const R=kt[C];if(R!==void 0)return EC(R)}(B),A=q.message;V===void 0&&(V=le.INTERNAL,A="Unknown error status: "+B+" with message "+q.message),b=!0,S.Uo(new Ee(V,A)),v.close()}else ge(sn,`RPC '${e}' stream ${s} received:`,W),S.Ko(W)}}),j(u,zk.STAT_EVENT,P=>{P.stat===qg.PROXY?ge(sn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===qg.NOPROXY&&ge(sn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.$o()},0),S}}function ng(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n){return new a$(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="PersistentStream";class VC{constructor(e,t,r,s,o,l,u,d){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new MC(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Ns(t.toString()),Ns("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new Ee(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(EE,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ge(EE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s3 extends VC{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=c$(this.serializer,e),r=function(o){if(!("targetChange"in o))return je.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?je.min():l.readTime?Gr(l.readTime):je.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=n0(this.serializer),t.addTarget=function(o,l){let u;const d=l.target;if(u=Yg(d)?{documents:f$(o,d)}:{query:p$(o,d).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=kC(o,l.resumeToken);const f=Zg(o,l.expectedCount);f!==null&&(u.expectedCount=f)}else if(l.snapshotVersion.compareTo(je.min())>0){u.readTime=ef(o,l.snapshotVersion.toTimestamp());const f=Zg(o,l.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=g$(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=n0(this.serializer),t.removeTarget=e,this.I_(t)}}class i3 extends VC{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=h$(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=n0(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>d$(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{}class a3 extends o3{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,e0(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(le.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,e0(t,r),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(le.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class l3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ns(t),this.N_=!1):ge("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class u3{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{Vo(this)&&(ge(Ro,"Restarting streams for network reachability change."),await async function(d){const f=De(d);f.W_.add(4),await Ic(f),f.j_.set("Unknown"),f.W_.delete(4),await Df(f)}(this))})}),this.j_=new l3(r,s)}}async function Df(n){if(Vo(n))for(const e of n.G_)await e(!0)}async function Ic(n){for(const e of n.G_)await e(!1)}function $C(n,e){const t=De(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),Dy(t)?jy(t):Pl(t).c_()&&Ny(t,e))}function Ry(n,e){const t=De(n),r=Pl(t);t.K_.delete(e),r.c_()&&FC(t,e),t.K_.size===0&&(r.c_()?r.P_():Vo(t)&&t.j_.set("Unknown"))}function Ny(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pl(n).y_(e)}function FC(n,e){n.H_.Ne(e),Pl(n).w_(e)}function jy(n){n.H_=new r$({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Pl(n).start(),n.j_.B_()}function Dy(n){return Vo(n)&&!Pl(n).u_()&&n.K_.size>0}function Vo(n){return De(n).W_.size===0}function UC(n){n.H_=void 0}async function c3(n){n.j_.set("Online")}async function d3(n){n.K_.forEach((e,t)=>{Ny(n,e)})}async function h3(n,e){UC(n),Dy(n)?(n.j_.q_(e),jy(n)):n.j_.set("Unknown")}async function f3(n,e,t){if(n.j_.set("Online"),e instanceof SC&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(n,e)}catch(r){ge(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(n,r)}else if(e instanceof kh?n.H_.We(e):e instanceof TC?n.H_.Ze(e):n.H_.je(e),!t.isEqual(je.min()))try{const r=await LC(n.localStore);t.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const g=o.K_.get(f);g&&o.K_.set(f,g.withResumeToken(d.resumeToken,l))}}),u.targetMismatches.forEach((d,f)=>{const g=o.K_.get(d);if(!g)return;o.K_.set(d,g.withResumeToken(Zt.EMPTY_BYTE_STRING,g.snapshotVersion)),FC(o,d);const v=new yi(g.target,d,f,g.sequenceNumber);Ny(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){ge(Ro,"Failed to raise snapshot:",r),await nf(n,r)}}async function nf(n,e,t){if(!Cl(e))throw e;n.W_.add(1),await Ic(n),n.j_.set("Offline"),t||(t=()=>LC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Ro,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Df(n)})}function BC(n,e){return e().catch(t=>nf(n,t,e))}async function Of(n){const e=De(n),t=Ri(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:gy;for(;p3(e);)try{const s=await Q$(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,m3(e,s)}catch(s){await nf(e,s)}zC(e)&&WC(e)}function p3(n){return Vo(n)&&n.U_.length<10}function m3(n,e){n.U_.push(e);const t=Ri(n);t.c_()&&t.S_&&t.b_(e.mutations)}function zC(n){return Vo(n)&&!Ri(n).u_()&&n.U_.length>0}function WC(n){Ri(n).start()}async function g3(n){Ri(n).C_()}async function y3(n){const e=Ri(n);for(const t of n.U_)e.b_(t.mutations)}async function v3(n,e,t){const r=n.U_.shift(),s=Ty.from(r,e,t);await BC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Of(n)}async function _3(n,e){e&&Ri(n).S_&&await async function(r,s){if(function(l){return t$(l)&&l!==le.ABORTED}(s.code)){const o=r.U_.shift();Ri(r).h_(),await BC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Of(r)}}(n,e),zC(n)&&WC(n)}async function TE(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),ge(Ro,"RemoteStore received new credentials");const r=Vo(t);t.W_.add(3),await Ic(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Df(t)}async function w3(n,e){const t=De(n);e?(t.W_.delete(2),await Df(t)):e||(t.W_.add(2),await Ic(t),t.j_.set("Unknown"))}function Pl(n){return n.J_||(n.J_=function(t,r,s){const o=De(t);return o.M_(),new s3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:c3.bind(null,n),No:d3.bind(null,n),Lo:h3.bind(null,n),p_:f3.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),Dy(n)?jy(n):n.j_.set("Unknown")):(await n.J_.stop(),UC(n))})),n.J_}function Ri(n){return n.Y_||(n.Y_=function(t,r,s){const o=De(t);return o.M_(),new i3(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:g3.bind(null,n),Lo:_3.bind(null,n),D_:y3.bind(null,n),v_:v3.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Of(n)):(await n.Y_.stop(),n.U_.length>0&&(ge(Ro,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ps,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new Oy(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(n,e){if(Ns("AsyncQueue",`${e}: ${n}`),Cl(n))return new Ee(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=Vu(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.Z_=new ht(Ce.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ie():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ml{constructor(e,t,r,s,o,l,u,d,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new ml(e,t,Za.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class b3{constructor(){this.queries=kE(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=De(t),o=s.queries;s.queries=kE(),o.forEach((l,u)=>{for(const d of u.ta)d.onError(r)})})(this,new Ee(le.ABORTED,"Firestore shutting down"))}}function kE(){return new Mo(n=>dC(n),Pf)}async function HC(n,e){const t=De(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new x3,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=Ly(l,`Initialization of query '${za(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&My(t)}async function qC(n,e){const t=De(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function E3(n,e){const t=De(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(r=!0);l.ea=s}}r&&My(t)}function T3(n,e,t){const r=De(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function My(n){n.ia.forEach(e=>{e.next()})}var i0,CE;(CE=i0||(i0={}))._a="default",CE.Cache="cache";class KC{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==i0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.key=e}}class QC{constructor(e){this.key=e}}class S3{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ue(),this.mutatedKeys=Ue(),this.ya=hC(e),this.wa=new Za(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new SE,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const _=s.get(g),b=Af(this.query,v)?v:null,S=!!_&&this.mutatedKeys.has(_.key),j=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;_&&b?_.data.isEqual(b.data)?S!==j&&(r.track({type:3,doc:b}),P=!0):this.va(_,b)||(r.track({type:2,doc:b}),P=!0,(d&&this.ya(b,d)>0||f&&this.ya(b,f)<0)&&(u=!0)):!_&&b?(r.track({type:0,doc:b}),P=!0):_&&!b&&(r.track({type:1,doc:_}),P=!0,(d||f)&&(u=!0)),P&&(b?(l=l.add(b),o=j?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,v)=>function(b,S){const j=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return j(b)-j(S)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(r),s=s!=null&&s;const u=t&&!s?this.Fa():[],d=this.pa.size===0&&this.current&&!s?1:0,f=d!==this.ga;return this.ga=d,l.length!==0||f?{snapshot:new ml(this.query,e.wa,o,l,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new SE,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ue(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new QC(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new GC(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ue();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return ml.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Vy="SyncEngine";class k3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class C3{constructor(e){this.key=e,this.Ba=!1}}class P3{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Mo(u=>dC(u),Pf),this.qa=new Map,this.Qa=new Set,this.$a=new ht(Ce.comparator),this.Ua=new Map,this.Ka=new Cy,this.Wa={},this.Ga=new Map,this.za=pl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function A3(n,e,t=!0){const r=tP(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await JC(r,e,t,!0),s}async function I3(n,e){const t=tP(n);await JC(t,e,!0,!1)}async function JC(n,e,t,r){const s=await J$(n.localStore,Kr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await R3(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&$C(n.remoteStore,s),u}async function R3(n,e,t,r,s){n.Ha=(v,_,b)=>async function(j,P,D,W){let F=P.view.ba(D);F.ls&&(F=await _E(j.localStore,P.query,!1).then(({documents:A})=>P.view.ba(A,F)));const q=W&&W.targetChanges.get(P.targetId),B=W&&W.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(F,j.isPrimaryClient,q,B);return AE(j,P.targetId,V.Ma),V.snapshot}(n,v,_,b);const o=await _E(n.localStore,e,!0),l=new S3(e,o.gs),u=l.ba(o.documents),d=Ac.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),f=l.applyChanges(u,n.isPrimaryClient,d);AE(n,t,f.Ma);const g=new k3(e,t,l);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),f.snapshot}async function N3(n,e,t){const r=De(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Pf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await r0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ry(r.remoteStore,s.targetId),o0(r,s.targetId)}).catch(kl)):(o0(r,s.targetId),await r0(r.localStore,s.targetId,!0))}async function j3(n,e){const t=De(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ry(t.remoteStore,r.targetId))}async function D3(n,e,t){const r=U3(n);try{const s=await function(l,u){const d=De(l),f=Dt.now(),g=u.reduce((b,S)=>b.add(S.key),Ue());let v,_;return d.persistence.runTransaction("Locally write mutations","readwrite",b=>{let S=js(),j=Ue();return d.ds.getEntries(b,g).next(P=>{S=P,S.forEach((D,W)=>{W.isValidDocument()||(j=j.add(D))})}).next(()=>d.localDocuments.getOverlayedDocuments(b,S)).next(P=>{v=P;const D=[];for(const W of u){const F=JV(W,v.get(W.key).overlayedDocument);F!=null&&D.push(new Vi(W.key,F,sC(F.value.mapValue),sr.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,D,u)}).next(P=>{_=P;const D=P.applyToLocalDocumentSet(v,j);return d.documentOverlayCache.saveOverlays(b,P.batchId,D)})}).then(()=>({batchId:_.batchId,changes:pC(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,d){let f=l.Wa[l.currentUser.toKey()];f||(f=new ht(Le)),f=f.insert(u,d),l.Wa[l.currentUser.toKey()]=f}(r,s.batchId,t),await Rc(r,s.changes),await Of(r.remoteStore)}catch(s){const o=Ly(s,"Failed to persist write");t.reject(o)}}async function YC(n,e){const t=De(n);try{const r=await K$(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ua.get(o);l&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Ke(l.Ba):s.removedDocuments.size>0&&(Ke(l.Ba),l.Ba=!1))}),await Rc(t,r,e)}catch(r){await kl(r)}}function PE(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const d=De(l);d.onlineState=u;let f=!1;d.queries.forEach((g,v)=>{for(const _ of v.ta)_.sa(u)&&(f=!0)}),f&&My(d)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O3(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),o=s&&s.key;if(o){let l=new ht(Ce.comparator);l=l.insert(o,ln.newNoDocument(o,je.min()));const u=Ue().add(o),d=new Nf(je.min(),new Map,new ht(Le),l,u);await YC(r,d),r.$a=r.$a.remove(o),r.Ua.delete(e),$y(r)}else await r0(r.localStore,e,!1).then(()=>o0(r,e,t)).catch(kl)}async function L3(n,e){const t=De(n),r=e.batch.batchId;try{const s=await q$(t.localStore,e);ZC(t,r,null),XC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Rc(t,s)}catch(s){await kl(s)}}async function M3(n,e,t){const r=De(n);try{const s=await function(l,u){const d=De(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return d.mutationQueue.lookupMutationBatch(f,u).next(v=>(Ke(v!==null),g=v.keys(),d.mutationQueue.removeMutationBatch(f,v))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>d.localDocuments.getDocuments(f,g))})}(r.localStore,e);ZC(r,e,t),XC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Rc(r,s)}catch(s){await kl(s)}}function XC(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function ZC(n,e,t){const r=De(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function o0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||eP(n,r)})}function eP(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Ry(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),$y(n))}function AE(n,e,t){for(const r of t)r instanceof GC?(n.Ka.addReference(r.key,e),V3(n,r)):r instanceof QC?(ge(Vy,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||eP(n,r.key)):Ie()}function V3(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ge(Vy,"New document in limbo: "+t),n.Qa.add(r),$y(n))}function $y(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Ce(at.fromString(e)),r=n.za.next();n.Ua.set(r,new C3(t)),n.$a=n.$a.insert(t,r),$C(n.remoteStore,new yi(Kr(xy(t.path)),r,"TargetPurposeLimboResolution",Tf.ae))}}async function Rc(n,e,t){const r=De(n),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,d)=>{l.push(r.Ha(d,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){const v=f?!f.fromCache:(g=t==null?void 0:t.targetChanges.get(d.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(d.targetId,v?"current":"not-current")}if(f){s.push(f);const v=Ay.Yi(d.targetId,f);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(d,f){const g=De(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>re.forEach(f,_=>re.forEach(_.Hi,b=>g.persistence.referenceDelegate.addReference(v,_.targetId,b)).next(()=>re.forEach(_.Ji,b=>g.persistence.referenceDelegate.removeReference(v,_.targetId,b)))))}catch(v){if(!Cl(v))throw v;ge(Iy,"Failed to update sequence numbers: "+v)}for(const v of f){const _=v.targetId;if(!v.fromCache){const b=g.Ts.get(_),S=b.snapshotVersion,j=b.withLastLimboFreeSnapshotVersion(S);g.Ts=g.Ts.insert(_,j)}}}(r.localStore,o))}async function $3(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){ge(Vy,"User change. New user:",e.toKey());const r=await OC(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(d=>{d.reject(new Ee(le.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Rc(t,r.Rs)}}function F3(n,e){const t=De(n),r=t.Ua.get(e);if(r&&r.Ba)return Ue().add(r.key);{let s=Ue();const o=t.qa.get(e);if(!o)return s;for(const l of o){const u=t.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function tP(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=YC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O3.bind(null,e),e.La.p_=E3.bind(null,e.eventManager),e.La.Ja=T3.bind(null,e.eventManager),e}function U3(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M3.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return H$(this.persistence,new B$,e.initialUser,this.serializer)}Xa(e){return new DC(Py.ri,this.serializer)}Za(e){return new X$}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class B3 extends rf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ke(this.persistence.referenceDelegate instanceof tf);const r=this.persistence.referenceDelegate.garbageCollector;return new C$(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new DC(r=>tf.ri(r,t),this.serializer)}}class a0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>PE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$3.bind(null,this.syncEngine),await w3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b3}()}createDatastore(e){const t=jf(e.databaseInfo.databaseId),r=function(o){return new r3(o)}(e.databaseInfo);return function(o,l,u,d){return new a3(o,l,u,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,u){return new u3(r,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>PE(this.syncEngine,t,0),function(){return bE.D()?new bE:new Z$}())}createSyncEngine(e,t){return function(s,o,l,u,d,f,g){const v=new P3(s,o,l,u,d,f);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=De(s);ge(Ro,"RemoteStore shutting down."),o.W_.add(5),await Ic(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}a0.provider={build:()=>new a0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ns("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class z3{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=an.UNAUTHENTICATED,this.clientId=Gk.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ge(Ni,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ge(Ni,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ps;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ly(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rg(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Ni,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await OC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function IE(n,e){n.asyncQueue.verifyOperationInProgress();const t=await W3(n);ge(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TE(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>TE(e.remoteStore,s)),n._onlineComponents=e}async function W3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Ni,"Using user provided OfflineComponentProvider");try{await rg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;cl("Error using user provided cache. Falling back to memory cache: "+t),await rg(n,new rf)}}else ge(Ni,"Using default OfflineComponentProvider"),await rg(n,new B3(void 0));return n._offlineComponents}async function rP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Ni,"Using user provided OnlineComponentProvider"),await IE(n,n._uninitializedComponentsProvider._online)):(ge(Ni,"Using default OnlineComponentProvider"),await IE(n,new a0))),n._onlineComponents}function H3(n){return rP(n).then(e=>e.syncEngine)}async function sP(n){const e=await rP(n),t=e.eventManager;return t.onListen=A3.bind(null,e.syncEngine),t.onUnlisten=N3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=I3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j3.bind(null,e.syncEngine),t}function q3(n,e,t={}){const r=new Ps;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,f){const g=new nP({next:_=>{g.su(),l.enqueueAndForget(()=>qC(o,v));const b=_.docs.has(u);!b&&_.fromCache?f.reject(new Ee(le.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&d&&d.source==="server"?f.reject(new Ee(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new KC(xy(u.path),g,{includeMetadataChanges:!0,Ta:!0});return HC(o,v)}(await sP(n),n.asyncQueue,e,t,r)),r.promise}function K3(n,e,t={}){const r=new Ps;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,d,f){const g=new nP({next:_=>{g.su(),l.enqueueAndForget(()=>qC(o,v)),_.fromCache&&d.source==="server"?f.reject(new Ee(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),v=new KC(u,g,{includeMetadataChanges:!0,Ta:!0});return HC(o,v)}(await sP(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n,e,t){if(!t)throw new Ee(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function G3(n,e,t,r){if(e===!0&&r===!0)throw new Ee(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NE(n){if(!Ce.isDocumentKey(n))throw new Ee(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jE(n){if(Ce.isDocumentKey(n))throw new Ee(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function Cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ee(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fy(n);throw new Ee(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="firestore.googleapis.com",DE=!0;class OE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aP,this.ssl=DE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:DE;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S$)throw new Ee(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ee(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tV;switch(r.type){case"firstParty":return new iV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ee(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=RE.get(t);r&&(ge("ComponentProvider","Removing Datastore"),RE.delete(t),r.terminate())}(this),Promise.resolve()}}function Q3(n,e,t,r={}){var s;const o=(n=Cr(n,Lf))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==aP&&o.host!==u&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!Po(d,l)&&(n._setSettings(d),r.mockUserToken)){let f,g;if(typeof r.mockUserToken=="string")f=r.mockUserToken,g=an.MOCK_USER;else{f=Ok(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ee(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new an(v)}n._authCredentials=new nV(new qk(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mf(this.firestore,e,this._query)}}class In{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new In(this.firestore,e,this._key)}}class xi extends Mf{constructor(e,t,r){super(e,t,xy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new In(this.firestore,null,new Ce(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Xt(n,e,...t){if(n=mt(n),oP("collection","path",e),n instanceof Lf){const r=at.fromString(e,...t);return jE(r),new xi(n,null,r)}{if(!(n instanceof In||n instanceof xi))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return jE(r),new xi(n.firestore,null,r)}}function nr(n,e,...t){if(n=mt(n),arguments.length===1&&(e=Gk.newId()),oP("doc","path",e),n instanceof Lf){const r=at.fromString(e,...t);return NE(r),new In(n,null,new Ce(r))}{if(!(n instanceof In||n instanceof xi))throw new Ee(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(at.fromString(e,...t));return NE(r),new In(n.firestore,n instanceof xi?n.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="AsyncQueue";class ME{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new MC(this,"async_queue_retry"),this.Su=()=>{const r=ng();r&&ge(LE,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=ng();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=ng();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ps;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Cl(e))throw e;ge(LE,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Ns("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=Oy.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class $o extends Lf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new ME,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ME(e),this._firestoreClient=void 0,await e}}}function ji(n,e){const t=typeof n=="object"?n:py(),r=typeof n=="string"?n:e||Gh,s=Ef(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Nk("firestore");o&&Q3(s,...o)}return s}function Uy(n){if(n._terminated)throw new Ee(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||J3(n),n._firestoreClient}function J3(n){var e,t,r;const s=n._freezeSettings(),o=function(u,d,f,g){return new wV(u,d,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,iP(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new z3(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gl(Zt.fromBase64String(e))}catch(t){throw new Ee(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new gl(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ee(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ee(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ee(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=/^__.*__$/;class X3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Pc(e,this.data,t,this.fieldTransforms)}}class lP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class Hy{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return sf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(uP(this.Lu)&&Y3.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Z3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jf(e)}ju(e,t,r,s=!1){return new Hy({Lu:e,methodName:t,zu:r,path:Yt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qy(n){const e=n._freezeSettings(),t=jf(n._databaseId);return new Z3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function cP(n,e,t,r,s,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,s);Ky("Data must be an object, but it was:",l,r);const u=dP(r,l);let d,f;if(o.merge)d=new $n(l.fieldMask),f=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const _=l0(e,v,t);if(!l.contains(_))throw new Ee(le.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);fP(g,_)||g.push(_)}d=new $n(g),f=l.fieldTransforms.filter(v=>d.covers(v.field))}else d=null,f=l.fieldTransforms;return new X3(new An(u),d,f)}class $f extends By{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $f}}function e6(n,e,t,r){const s=n.ju(1,e,t);Ky("Data must be an object, but it was:",s,r);const o=[],l=An.empty();Mi(r,(d,f)=>{const g=Gy(e,d,t);f=mt(f);const v=s.Uu(g);if(f instanceof $f)o.push(g);else{const _=Ff(f,v);_!=null&&(o.push(g),l.set(g,_))}});const u=new $n(o);return new lP(l,u,s.fieldTransforms)}function t6(n,e,t,r,s,o){const l=n.ju(1,e,t),u=[l0(e,r,t)],d=[s];if(o.length%2!=0)throw new Ee(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)u.push(l0(e,o[_])),d.push(o[_+1]);const f=[],g=An.empty();for(let _=u.length-1;_>=0;--_)if(!fP(f,u[_])){const b=u[_];let S=d[_];S=mt(S);const j=l.Uu(b);if(S instanceof $f)f.push(b);else{const P=Ff(S,j);P!=null&&(f.push(b),g.set(b,P))}}const v=new $n(f);return new lP(g,v,l.fieldTransforms)}function Ff(n,e){if(hP(n=mt(n)))return Ky("Unsupported field value:",e,n),dP(n,e);if(n instanceof By)return function(r,s){if(!uP(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const u of r){let d=Ff(u,s.Ku(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Dt.fromDate(r);return{timestampValue:ef(s.serializer,o)}}if(r instanceof Dt){const o=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(s.serializer,o)}}if(r instanceof zy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gl)return{bytesValue:kC(s.serializer,r._byteString)};if(r instanceof In){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ky(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Wy)return function(l,u){return{mapValue:{fields:{[nC]:{stringValue:rC},[Qh]:{arrayValue:{values:l.toArray().map(f=>{if(typeof f!="number")throw u.Wu("VectorValues must only contain numeric values.");return by(u.serializer,f)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Fy(r)}`)}(n,e)}function dP(n,e){const t={};return Jk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(n,(r,s)=>{const o=Ff(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Dt||n instanceof zy||n instanceof gl||n instanceof In||n instanceof By||n instanceof Wy)}function Ky(n,e,t){if(!hP(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Fy(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function l0(n,e,t){if((e=mt(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return Gy(n,e);throw sf("Field path arguments must be of type string or ",n,!1,void 0,t)}const n6=new RegExp("[~\\*/\\[\\]]");function Gy(n,e,t){if(e.search(n6)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vf(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sf(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${r}`),l&&(d+=` in document ${s}`),d+=")"),new Ee(le.INVALID_ARGUMENT,u+n+d)}function fP(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new In(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mP("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r6 extends pP{data(){return super.data()}}function mP(n,e){return typeof e=="string"?Gy(n,e):e instanceof Vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ee(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i6{convertValue(e,t="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Mi(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Qh].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>Et(l.doubleValue));return new Wy(o)}convertGeoPoint(e){return new zy(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new Dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=at.fromString(e);Ke(NC(r));const s=new hc(r.get(1),r.get(3)),o=new Ce(r.popFirst(5));return s.isEqual(t)||Ns(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yP extends pP{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mP("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ch extends yP{data(e={}){return super.data(e)}}class o6{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ch(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ee(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const d=new Ch(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const d=new Ch(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,g=-1;return u.type!==0&&(f=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:a6(u.type),doc:d,oldIndex:f,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function a6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n){n=Cr(n,In);const e=Cr(n.firestore,$o);return q3(Uy(e),n._key).then(t=>l6(e,n,t))}class vP extends i6{constructor(e){super(),this.firestore=e}convertBytes(e){return new gl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new In(this.firestore,null,t)}}function ir(n){n=Cr(n,Mf);const e=Cr(n.firestore,$o),t=Uy(e),r=new vP(e);return s6(n._query),K3(t,n._query).then(s=>new o6(e,r,n,s))}function Qy(n,e,t){n=Cr(n,In);const r=Cr(n.firestore,$o),s=gP(n.converter,e,t);return Bf(r,[cP(qy(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,sr.none())])}function VE(n,e,t,...r){n=Cr(n,In);const s=Cr(n.firestore,$o),o=qy(s);let l;return l=typeof(e=mt(e))=="string"||e instanceof Vf?t6(o,"updateDoc",n._key,e,t,r):e6(o,"updateDoc",n._key,e),Bf(s,[l.toMutation(n._key,sr.exists(!0))])}function Ph(n){return Bf(Cr(n.firestore,$o),[new Ey(n._key,sr.none())])}function gc(n,e){const t=Cr(n.firestore,$o),r=nr(n),s=gP(n.converter,e);return Bf(t,[cP(qy(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function Bf(n,e){return function(r,s){const o=new Ps;return r.asyncQueue.enqueueAndForget(async()=>D3(await H3(r),s,o)),o.promise}(Uy(n),e)}function l6(n,e,t){const r=t.docs.get(e._key),s=new vP(n);return new yP(n,s,e._key,r,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Sl=s})(Lo),Ao(new ki("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new $o(new rV(r.getProvider("auth-internal")),new oV(l,r.getProvider("app-check-internal")),function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ee(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(f.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),qr(zb,Wb,e),qr(zb,Wb,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="firebasestorage.googleapis.com",wP="storageBucket",u6=2*60*1e3,c6=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt extends es{constructor(e,t,r=0){super(sg(e),`Firebase Storage: ${t} (${sg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function sg(n){return"storage/"+n}function Jy(){const n="An unknown error occurred, please check the error payload for server response.";return new yt(gt.UNKNOWN,n)}function d6(n){return new yt(gt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function h6(n){return new yt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function f6(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(gt.UNAUTHENTICATED,n)}function p6(){return new yt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function m6(n){return new yt(gt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function g6(){return new yt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function y6(){return new yt(gt.CANCELED,"User canceled the upload/download.")}function v6(n){return new yt(gt.INVALID_URL,"Invalid URL '"+n+"'.")}function _6(n){return new yt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function w6(){return new yt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+wP+"' property when initializing the app?")}function x6(){return new yt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b6(){return new yt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function E6(n){return new yt(gt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function u0(n){return new yt(gt.INVALID_ARGUMENT,n)}function xP(){return new yt(gt.APP_DELETED,"The Firebase app was deleted.")}function T6(n){return new yt(gt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xu(n,e){return new yt(gt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Iu(n){throw new yt(gt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Fn.makeFromUrl(e,t)}catch{return new Fn(e,"")}if(r.path==="")return r;throw _6(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),d={bucket:1,path:3};function f(q){q.path_=decodeURIComponent(q.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${_}`,"i"),S={bucket:1,path:3},j=t===_P?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",D=new RegExp(`^https?://${j}/${s}/${P}`,"i"),F=[{regex:u,indices:d,postModify:o},{regex:b,indices:S,postModify:f},{regex:D,indices:{bucket:1,path:2},postModify:f}];for(let q=0;q<F.length;q++){const B=F[q],V=B.regex.exec(e);if(V){const A=V[B.indices.bucket];let E=V[B.indices.path];E||(E=""),r=new Fn(A,E),B.postModify(r);break}}if(r==null)throw v6(e);return r}}class S6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function d(){return u===2}let f=!1;function g(...P){f||(f=!0,e.apply(null,P))}function v(P){s=setTimeout(()=>{s=null,n(b,d())},P)}function _(){o&&clearTimeout(o)}function b(P,...D){if(f){_();return}if(P){_(),g.call(null,P,...D);return}if(d()||l){_(),g.call(null,P,...D);return}r<64&&(r*=2);let F;u===1?(u=2,F=0):F=(r+Math.random())*1e3,v(F)}let S=!1;function j(P){S||(S=!0,_(),!f&&(s!==null?(P||(u=2),clearTimeout(s),v(0)):P||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,j(!0)},t),j}function C6(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(n){return n!==void 0}function A6(n){return typeof n=="object"&&!Array.isArray(n)}function Yy(n){return typeof n=="string"||n instanceof String}function $E(n){return Xy()&&n instanceof Blob}function Xy(){return typeof Blob<"u"}function FE(n,e,t,r){if(r<e)throw u0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw u0(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function bP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Co;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Co||(Co={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,t,r,s,o,l,u,d,f,g,v,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=v,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,S)=>{this.resolve_=b,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ph(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const d=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Co.NO_ERROR,d=o.getStatus();if(!u||I6(d,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Co.ABORT;r(!1,new ph(!1,null,g));return}const f=this.successCodes_.indexOf(d)!==-1;r(!0,new ph(f,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());P6(d)?o(d):o()}catch(d){l(d)}else if(u!==null){const d=Jy();d.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,d)):l(d)}else if(s.canceled){const d=this.appDelete_?xP():y6();l(d)}else{const d=g6();l(d)}};this.canceled_?t(!1,new ph(!1,null,!0)):this.backoffId_=k6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&C6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ph{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function N6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function j6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function D6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function O6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function L6(n,e,t,r,s,o,l=!0){const u=bP(n.urlParams),d=n.url+u,f=Object.assign({},n.headers);return D6(f,e),N6(f,t),j6(f,o),O6(f,r),new R6(d,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function V6(...n){const e=M6();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Xy())return new Blob(n);throw new yt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(n){if(typeof atob>"u")throw E6("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ig{constructor(e,t){this.data=e,this.contentType=t||null}}function U6(n,e){switch(n){case zr.RAW:return new ig(EP(e));case zr.BASE64:case zr.BASE64URL:return new ig(TP(n,e));case zr.DATA_URL:return new ig(z6(e),W6(e))}throw Jy()}function EP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function B6(n){let e;try{e=decodeURIComponent(n)}catch{throw Xu(zr.DATA_URL,"Malformed data URL.")}return EP(e)}function TP(n,e){switch(n){case zr.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw Xu(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case zr.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw Xu(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=F6(e)}catch(s){throw s.message.includes("polyfill")?s:Xu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class SP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Xu(zr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=H6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function z6(n){const e=new SP(n);return e.base64?TP(zr.BASE64,e.rest):B6(e.rest)}function W6(n){return new SP(n).contentType}function H6(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t){let r=0,s="";$E(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if($E(this.data_)){const r=this.data_,s=$6(r,e,t);return s===null?null:new hi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new hi(r,!0)}}static getBlob(...e){if(Xy()){const t=e.map(r=>r instanceof hi?r.data_:r);return new hi(V6.apply(null,t))}else{const t=e.map(l=>Yy(l)?U6(zr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new hi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(n){let e;try{e=JSON.parse(n)}catch{return null}return A6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function K6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function CP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n,e){return e}class gn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||G6}}let mh=null;function Q6(n){return!Yy(n)||n.length<2?n:CP(n)}function PP(){if(mh)return mh;const n=[];n.push(new gn("bucket")),n.push(new gn("generation")),n.push(new gn("metageneration")),n.push(new gn("name","fullPath",!0));function e(o,l){return Q6(l)}const t=new gn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new gn("size");return s.xform=r,n.push(s),n.push(new gn("timeCreated")),n.push(new gn("updated")),n.push(new gn("md5Hash",null,!0)),n.push(new gn("cacheControl",null,!0)),n.push(new gn("contentDisposition",null,!0)),n.push(new gn("contentEncoding",null,!0)),n.push(new gn("contentLanguage",null,!0)),n.push(new gn("contentType",null,!0)),n.push(new gn("metadata","customMetadata",!0)),mh=n,mh}function J6(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Fn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function Y6(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return J6(r,n),r}function AP(n,e,t){const r=kP(e);return r===null?null:Y6(n,r,t)}function X6(n,e,t,r){const s=kP(e);if(s===null||!Yy(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(f=>{const g=n.bucket,v=n.fullPath,_="/b/"+l(g)+"/o/"+l(v),b=zf(_,t,r),S=bP({alt:"media",token:f});return b+S})[0]}function Z6(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Zy{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n){if(!n)throw Jy()}function eF(n,e){function t(r,s){const o=AP(n,s,e);return IP(o!==null),o}return t}function tF(n,e){function t(r,s){const o=AP(n,s,e);return IP(o!==null),X6(o,s,n.host,n._protocol)}return t}function RP(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=p6():s=f6():t.getStatus()===402?s=h6(n.bucket):t.getStatus()===403?s=m6(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function NP(n){const e=RP(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=d6(n.path)),o.serverResponse=s.serverResponse,o}return t}function nF(n,e,t){const r=e.fullServerUrl(),s=zf(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new Zy(s,o,tF(n,t),l);return u.errorHandler=NP(e),u}function rF(n,e){const t=e.fullServerUrl(),r=zf(t,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function l(d,f){}const u=new Zy(r,s,l,o);return u.successCodes=[200,204],u.errorHandler=NP(e),u}function sF(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function iF(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=sF(null,e)),r}function oF(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let F="";for(let q=0;q<2;q++)F=F+Math.random().toString().slice(2);return F}const d=u();l["Content-Type"]="multipart/related; boundary="+d;const f=iF(e,r,s),g=Z6(f,t),v="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,_=`\r
--`+d+"--",b=hi.getBlob(v,r,_);if(b===null)throw x6();const S={name:f.fullPath},j=zf(o,n.host,n._protocol),P="POST",D=n.maxUploadRetryTime,W=new Zy(j,P,eF(n,t),D);return W.urlParams=S,W.headers=l,W.body=b.uploadData(),W.errorHandler=RP(e),W}class aF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Co.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Co.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Co.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Iu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Iu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Iu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Iu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Iu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lF extends aF{initXhr(){this.xhr_.responseType="text"}}function ev(){return new lF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,t){this._service=e,t instanceof Fn?this._location=t:this._location=Fn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new No(e,t)}get root(){const e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CP(this._location.path)}get storage(){return this._service}get parent(){const e=q6(this._location.path);if(e===null)return null;const t=new Fn(this._location.bucket,e);return new No(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw T6(e)}}function uF(n,e,t){n._throwIfRoot("uploadBytes");const r=oF(n.storage,n._location,PP(),new hi(e,!0),t);return n.storage.makeRequestWithTokens(r,ev).then(s=>({metadata:s,ref:n}))}function cF(n){n._throwIfRoot("getDownloadURL");const e=nF(n.storage,n._location,PP());return n.storage.makeRequestWithTokens(e,ev).then(t=>{if(t===null)throw b6();return t})}function dF(n){n._throwIfRoot("deleteObject");const e=rF(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ev)}function hF(n,e){const t=K6(n._location.path,e),r=new Fn(n._location.bucket,t);return new No(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(n){return/^[A-Za-z]+:\/\//.test(n)}function pF(n,e){return new No(n,e)}function jP(n,e){if(n instanceof tv){const t=n;if(t._bucket==null)throw w6();const r=new No(t,t._bucket);return e!=null?jP(r,e):r}else return e!==void 0?hF(n,e):n}function mF(n,e){if(e&&fF(e)){if(n instanceof tv)return pF(n,e);throw u0("To use ref(service, url), the first argument must be a Storage instance.")}else return jP(n,e)}function UE(n,e){const t=e==null?void 0:e[wP];return t==null?null:Fn.makeFromBucketSpec(t,n)}function gF(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Ok(s,n.app.options.projectId))}class tv{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=_P,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=u6,this._maxUploadRetryTime=c6,this._requests=new Set,s!=null?this._bucket=Fn.makeFromBucketSpec(s,this._host):this._bucket=UE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=UE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new No(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new S6(xP());{const l=L6(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const BE="@firebase/storage",zE="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="storage";function yF(n,e,t){return n=mt(n),uF(n,e,t)}function vF(n){return n=mt(n),cF(n)}function WE(n){return n=mt(n),dF(n)}function og(n,e){return n=mt(n),mF(n,e)}function _F(n=py(),e){n=mt(n);const r=Ef(n,DP).getImmediate({identifier:e}),s=Nk("storage");return s&&wF(r,...s),r}function wF(n,e,t,r={}){gF(n,e,t,r)}function xF(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new tv(t,r,s,e,Lo)}function bF(){Ao(new ki(DP,xF,"PUBLIC").setMultipleInstances(!0)),qr(BE,zE,""),qr(BE,zE,"esm2017")}bF();function nv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function OP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EF=OP,LP=new kc("auth","Firebase",OP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new dy("@firebase/auth");function TF(n,...e){of.logLevel<=Fe.WARN&&of.warn(`Auth (${Lo}): ${n}`,...e)}function Ah(n,...e){of.logLevel<=Fe.ERROR&&of.error(`Auth (${Lo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(n,...e){throw rv(n,...e)}function Qr(n,...e){return rv(n,...e)}function MP(n,e,t){const r=Object.assign(Object.assign({},EF()),{[e]:t});return new kc("auth","Firebase",r).create(e,{appName:n.name})}function bi(n){return MP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return LP.create(n,...e)}function Ae(n,e,...t){if(!n)throw rv(e,...t)}function bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ah(e),new Error(e)}function Ds(n,e){n||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SF(){return HE()==="http:"||HE()==="https:"}function HE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SF()||NL()||"connection"in navigator)?navigator.onLine:!0}function CF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ds(t>e,"Short delay should be less than long delay!"),this.isMobile=AL()||jL()}get(){return kF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){Ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=new Nc(3e4,6e4);function Fo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function $i(n,e,t,r,s={}){return $P(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Cc(Object.assign({key:n.config.apiKey},l)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:d},o);return RL()||(f.referrerPolicy="no-referrer"),VP.fetch()(FP(n,n.config.apiHost,t,u),f)})}async function $P(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},PF),e);try{const s=new RF(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw gh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[d,f]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(n,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw gh(n,"email-already-in-use",l);if(d==="USER_DISABLED")throw gh(n,"user-disabled",l);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw MP(n,g,f);Pr(n,g)}}catch(s){if(s instanceof es)throw s;Pr(n,"network-request-failed",{message:String(s)})}}async function Wf(n,e,t,r,s={}){const o=await $i(n,e,t,r,s);return"mfaPendingCredential"in o&&Pr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function FP(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?sv(n.config,s):`${n.config.apiScheme}://${s}`}function IF(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qr(this.auth,"network-request-failed")),AF.get())})}}function gh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Qr(n,e,r);return s.customData._tokenResponse=t,s}function qE(n){return n!==void 0&&n.enterprise!==void 0}class NF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IF(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function jF(n,e){return $i(n,"GET","/v2/recaptchaConfig",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(n,e){return $i(n,"POST","/v1/accounts:delete",e)}async function UP(n,e){return $i(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OF(n,e=!1){const t=mt(n),r=await t.getIdToken(e),s=iv(r);Ae(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Zu(ag(s.auth_time)),issuedAtTime:Zu(ag(s.iat)),expirationTime:Zu(ag(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ag(n){return Number(n)*1e3}function iv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ik(t);return s?JSON.parse(s):(Ah("Failed to decode base64 JWT payload"),null)}catch(s){return Ah("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function KE(n){const e=iv(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof es&&LF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function LF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(n){var e;const t=n.auth,r=await n.getIdToken(),s=await yc(n,UP(t,{idToken:r}));Ae(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?BP(o.providerUserInfo):[],u=$F(n.providerData,l),d=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),g=d?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new d0(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function VF(n){const e=mt(n);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $F(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function BP(n){return n.map(e=>{var{providerId:t}=e,r=nv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF(n,e){const t=await $P(n,{},async()=>{const r=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=FP(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",VP.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UF(n,e){return $i(n,"POST","/v2/accounts:revokeToken",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=KE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await FF(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new el;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Ae(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Ae(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Es{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=nv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new d0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await yc(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OF(this,e)}reload(){return VF(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Es(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await af(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(bi(this.auth));const e=await this.getIdToken();return await yc(this,DF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,u,d,f,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,_=(s=t.email)!==null&&s!==void 0?s:void 0,b=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(l=t.photoURL)!==null&&l!==void 0?l:void 0,j=(u=t.tenantId)!==null&&u!==void 0?u:void 0,P=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,D=(f=t.createdAt)!==null&&f!==void 0?f:void 0,W=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:F,emailVerified:q,isAnonymous:B,providerData:V,stsTokenManager:A}=t;Ae(F&&A,e,"internal-error");const E=el.fromJSON(this.name,A);Ae(typeof F=="string",e,"internal-error"),oi(v,e.name),oi(_,e.name),Ae(typeof q=="boolean",e,"internal-error"),Ae(typeof B=="boolean",e,"internal-error"),oi(b,e.name),oi(S,e.name),oi(j,e.name),oi(P,e.name),oi(D,e.name),oi(W,e.name);const C=new Es({uid:F,auth:e,email:_,emailVerified:q,displayName:v,isAnonymous:B,photoURL:S,phoneNumber:b,tenantId:j,stsTokenManager:E,createdAt:D,lastLoginAt:W});return V&&Array.isArray(V)&&(C.providerData=V.map(R=>Object.assign({},R))),P&&(C._redirectEventId=P),C}static async _fromIdTokenResponse(e,t,r=!1){const s=new el;s.updateFromServerResponse(t);const o=new Es({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await af(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Ae(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?BP(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new el;u.updateFromIdToken(r);const d=new Es({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new d0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=new Map;function Ts(n){Ds(n instanceof Function,"Expected a class definition");let e=GE.get(n);return e?(Ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,GE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zP.type="NONE";const QE=zP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(n,e,t){return`firebase:${n}:${e}:${t}`}class tl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Ih(this.userKey,s.apiKey,o),this.fullPersistenceKey=Ih("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Es._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new tl(Ts(QE),e,r);const s=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Ts(QE);const l=Ih(r,e.config.apiKey,e.name);let u=null;for(const f of t)try{const g=await f._get(l);if(g){const v=Es._fromJSON(e,g);f!==o&&(u=v),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new tl(o,e,r):(o=d[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(l)}catch{}})),new tl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(WP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QP(e))return"Blackberry";if(JP(e))return"Webos";if(HP(e))return"Safari";if((e.includes("chrome/")||qP(e))&&!e.includes("edge/"))return"Chrome";if(GP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function WP(n=cn()){return/firefox\//i.test(n)}function HP(n=cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qP(n=cn()){return/crios\//i.test(n)}function KP(n=cn()){return/iemobile/i.test(n)}function GP(n=cn()){return/android/i.test(n)}function QP(n=cn()){return/blackberry/i.test(n)}function JP(n=cn()){return/webos/i.test(n)}function ov(n=cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BF(n=cn()){var e;return ov(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zF(){return DL()&&document.documentMode===10}function YP(n=cn()){return ov(n)||GP(n)||JP(n)||QP(n)||/windows phone/i.test(n)||KP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(n,e=[]){let t;switch(n){case"Browser":t=JE(cn());break;case"Worker":t=`${JE(cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const d=e(o);l(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(n,e={}){return $i(n,"GET","/v2/passwordPolicy",Fo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=6;class KF{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:qF,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,u;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YE(this),this.idTokenSubscription=new YE(this),this.beforeStateQueue=new WF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ts(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await tl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await UP(this,{idToken:e}),r=await Es._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===u)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(bi(this));const t=e?mt(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(bi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ts(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HF(this),t=new KF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await UF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ts(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Ts(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{l=!0,d()}}else{const d=e.addObserver(t);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&TF(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Al(n){return mt(n)}class YE{constructor(e){this.auth=e,this.observer=null,this.addObserver=BL(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QF(n){Hf=n}function ZP(n){return Hf.loadJS(n)}function JF(){return Hf.recaptchaEnterpriseScript}function YF(){return Hf.gapiScript}function XF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZF{constructor(){this.enterprise=new eU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tU="recaptcha-enterprise",eA="NO_RECAPTCHA";class nU{constructor(e){this.type=tU,this.auth=Al(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{jF(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new NF(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,l(f.siteKey)}}).catch(d=>{u(d)})})}function s(o,l,u){const d=window.grecaptcha;qE(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{l(f)}).catch(()=>{l(eA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZF().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&qE(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=JF();d.length!==0&&(d+=u),ZP(d).then(()=>{s(u,o,l)}).catch(f=>{l(f)})}}).catch(u=>{l(u)})})}}async function XE(n,e,t,r=!1,s=!1){const o=new nU(n);let l;if(s)l=eA;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const d=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const d=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function ZE(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await XE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await XE(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(n,e){const t=Ef(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(Po(o,e??{}))return s;Pr(s,"already-initialized")}return t.initialize({options:e})}function sU(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ts);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iU(n,e,t){const r=Al(n);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=tA(e),{host:l,port:u}=oU(e),d=u===null?"":`:${u}`,f={url:`${o}//${l}${d}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(Po(f,r.config.emulator)&&Po(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,aU()}function tA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oU(n){const e=tA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:eT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:eT(l)}}}function eT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,t){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function lU(n,e){return $i(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(n,e){return Wf(n,"POST","/v1/accounts:signInWithPassword",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cU(n,e){return Wf(n,"POST","/v1/accounts:signInWithEmailLink",Fo(n,e))}async function dU(n,e){return Wf(n,"POST","/v1/accounts:signInWithEmailLink",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends av{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new vc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new vc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ZE(e,t,"signInWithPassword",uU);case"emailLink":return cU(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ZE(e,r,"signUpPassword",lU);case"emailLink":return dU(e,{idToken:t,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(n,e){return Wf(n,"POST","/v1/accounts:signInWithIdp",Fo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU="http://localhost";class jo extends av{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=nv(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new jo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return nl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nl(e,t)}buildRequest(){const e={requestUri:hU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pU(n){const e=Ou(Lu(n)).link,t=e?Ou(Lu(e)).deep_link_id:null,r=Ou(Lu(n)).deep_link_id;return(r?Ou(Lu(r)).link:null)||r||t||e||n}class lv{constructor(e){var t,r,s,o,l,u;const d=Ou(Lu(e)),f=(t=d.apiKey)!==null&&t!==void 0?t:null,g=(r=d.oobCode)!==null&&r!==void 0?r:null,v=fU((s=d.mode)!==null&&s!==void 0?s:null);Ae(f&&g&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=g,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=d.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=pU(e);try{return new lv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.providerId=Il.PROVIDER_ID}static credential(e,t){return vc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lv.parseLink(t);return Ae(r,"argument-error"),vc._fromEmailAndCode(e,r.code,r.tenantId)}}Il.PROVIDER_ID="password";Il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends nA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends jc{constructor(){super("facebook.com")}static credential(e){return jo._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jo._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return pi.credential(t,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends jc{constructor(){super("github.com")}static credential(e){return jo._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends jc{constructor(){super("twitter.com")}static credential(e,t){return jo._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return gi.credential(t,r)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Es._fromIdTokenResponse(e,r,s),l=tT(r);return new yl({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=tT(r);return new yl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function tT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends es{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new lf(e,t,r,s)}}function rA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(n,o,e,r):o})}async function mU(n,e,t=!1){const r=await yc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return yl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(n,e,t=!1){const{auth:r}=n;if(tr(r.app))return Promise.reject(bi(r));const s="reauthenticate";try{const o=await yc(n,rA(r,s,e,n),t);Ae(o.idToken,r,"internal-error");const l=iv(o.idToken);Ae(l,r,"internal-error");const{sub:u}=l;return Ae(n.uid===u,r,"user-mismatch"),yl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Pr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(n,e,t=!1){if(tr(n.app))return Promise.reject(bi(n));const r="signIn",s=await rA(n,r,e),o=await yl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function yU(n,e){return sA(Al(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(n){const e=Al(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function _U(n,e,t){return tr(n.app)?Promise.reject(bi(n)):yU(mt(n),Il.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vU(n),r})}function wU(n,e,t,r){return mt(n).onIdTokenChanged(e,t,r)}function xU(n,e,t){return mt(n).beforeAuthStateChanged(e,t)}function qf(n,e,t,r){return mt(n).onAuthStateChanged(e,t,r)}function Kf(n){return mt(n).signOut()}const uf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=1e3,EU=10;class oA extends iA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=YP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,d)=>{this.notifyListeners(l,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);zF()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EU):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},bU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oA.type="LOCAL";const TU=oA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA extends iA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aA.type="SESSION";const lA=aA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Gf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async f=>f(t.origin,o)),d=await SU(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,d)=>{const f=uv("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const _=v;if(_.data.eventId===f)switch(_.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(_.data.response);break;default:clearTimeout(g),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function CU(n){Jr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function PU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function IU(){return uA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firebaseLocalStorageDb",RU=1,cf="firebaseLocalStorage",dA="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qf(n,e){return n.transaction([cf],e?"readwrite":"readonly").objectStore(cf)}function NU(){const n=indexedDB.deleteDatabase(cA);return new Dc(n).toPromise()}function h0(){const n=indexedDB.open(cA,RU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(cf,{keyPath:dA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(cf)?e(r):(r.close(),await NU(),e(await h0()))})})}async function nT(n,e,t){const r=Qf(n,!0).put({[dA]:e,value:t});return new Dc(r).toPromise()}async function jU(n,e){const t=Qf(n,!1).get(e),r=await new Dc(t).toPromise();return r===void 0?null:r.value}function rT(n,e){const t=Qf(n,!0).delete(e);return new Dc(t).toPromise()}const DU=800,OU=3;class hA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await h0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>OU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gf._getInstance(IU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await PU(),!this.activeServiceWorker)return;this.sender=new kU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await h0();return await nT(e,uf,"1"),await rT(e,uf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jU(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Qf(s,!1).getAll();return new Dc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hA.type="LOCAL";const LU=hA;new Nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n,e){return e?Ts(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends av{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VU(n){return sA(n.auth,new cv(n),n.bypassAuthState)}function $U(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),gU(t,new cv(n),n.bypassAuthState)}async function FU(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),mU(t,new cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VU;case"linkViaPopup":case"linkViaRedirect":return FU;case"reauthViaPopup":case"reauthViaRedirect":return $U;default:Pr(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=new Nc(2e3,1e4);class Ya extends fA{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=uv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UU.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="pendingRedirect",Rh=new Map;class zU extends fA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const r=await WU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WU(n,e){const t=KU(e),r=qU(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function HU(n,e){Rh.set(n._key(),e)}function qU(n){return Ts(n._redirectPersistence)}function KU(n){return Ih(BU,n.config.apiKey,n.name)}async function GU(n,e,t=!1){if(tr(n.app))return Promise.reject(bi(n));const r=Al(n),s=MU(r,e),l=await new zU(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=10*60*1e3;class JU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!pA(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QU&&this.cachedEventUids.clear(),this.cachedEventUids.has(sT(e))}saveEventToCache(e){this.cachedEventUids.add(sT(e)),this.lastProcessedEventTime=Date.now()}}function sT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pA({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(n,e={}){return $i(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e8=/^https?/;async function t8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await XU(n);for(const t of e)try{if(n8(t))return}catch{}Pr(n,"unauthorized-domain")}function n8(n){const e=c0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!e8.test(t))return!1;if(ZU.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=new Nc(3e4,6e4);function iT(){const n=Jr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function s8(n){return new Promise((e,t)=>{var r,s,o;function l(){iT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iT(),t(Qr(n,"network-request-failed"))},timeout:r8.get()})}if(!((s=(r=Jr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Jr().gapi)===null||o===void 0)&&o.load)l();else{const u=XF("iframefcb");return Jr()[u]=()=>{gapi.load?l():t(Qr(n,"network-request-failed"))},ZP(`${YF()}?onload=${u}`).catch(d=>t(d))}}).catch(e=>{throw Nh=null,e})}let Nh=null;function i8(n){return Nh=Nh||s8(n),Nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=new Nc(5e3,15e3),a8="__/auth/iframe",l8="emulator/auth/iframe",u8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},c8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d8(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sv(e,l8):`https://${n.config.authDomain}/${a8}`,r={apiKey:e.apiKey,appName:n.name,v:Lo},s=c8.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Cc(r).slice(1)}`}async function h8(n){const e=await i8(n),t=Jr().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:d8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:u8,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Qr(n,"network-request-failed"),u=Jr().setTimeout(()=>{o(l)},o8.get());function d(){Jr().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p8=500,m8=600,g8="_blank",y8="http://localhost";class oT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v8(n,e,t,r=p8,s=m8){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d=Object.assign(Object.assign({},f8),{width:r.toString(),height:s.toString(),top:o,left:l}),f=cn().toLowerCase();t&&(u=qP(f)?g8:t),WP(f)&&(e=e||y8,d.scrollbars="yes");const g=Object.entries(d).reduce((_,[b,S])=>`${_}${b}=${S},`,"");if(BF(f)&&u!=="_self")return _8(e||"",u),new oT(null);const v=window.open(e||"",u,g);Ae(v,n,"popup-blocked");try{v.focus()}catch{}return new oT(v)}function _8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="__/auth/handler",x8="emulator/auth/handler",b8=encodeURIComponent("fac");async function aT(n,e,t,r,s,o){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Lo,eventId:s};if(e instanceof nA){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",UL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof jc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await n._getAppCheckToken(),f=d?`#${b8}=${encodeURIComponent(d)}`:"";return`${E8(n)}?${Cc(u).slice(1)}${f}`}function E8({config:n}){return n.emulator?sv(n,x8):`https://${n.authDomain}/${w8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="webStorageSupport";class T8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lA,this._completeRedirectFn=GU,this._overrideRedirectResult=HU}async _openPopup(e,t,r,s){var o;Ds((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await aT(e,t,r,c0(),s);return v8(e,l,uv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await aT(e,t,r,c0(),s);return CU(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ds(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await h8(e),r=new JU(e);return t.register("authEvent",s=>(Ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lg,{type:lg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[lg];l!==void 0&&t(!!l),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=t8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return YP()||HP()||ov()}}const S8=T8;var lT="@firebase/auth",uT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P8(n){Ao(new ki("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Ae(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XP(n)},f=new GF(r,s,o,d);return sU(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ao(new ki("auth-internal",e=>{const t=Al(e.getProvider("auth").getImmediate());return(r=>new k8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(lT,uT,C8(n)),qr(lT,uT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=5*60,I8=Dk("authIdTokenMaxAge")||A8;let cT=null;const R8=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>I8)return;const s=t==null?void 0:t.token;cT!==s&&(cT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function N8(n=py()){const e=Ef(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rU(n,{popupRedirectResolver:S8,persistence:[LU,TU,lA]}),r=Dk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=R8(o.toString());xU(t,l,()=>l(t.currentUser)),wU(t,u=>l(u))}}const s=Rk("auth");return s&&iU(t,`http://${s}`),t}function j8(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}QF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Qr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",j8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P8("Browser");console.log("initializeApp:",typeof fy);console.log("getFirestore:",typeof ji);const D8={apiKey:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",authDomain:"aussie-gut-pack.firebaseapp.com",projectId:"aussie-gut-pack",storageBucket:"aussie-gut-pack.firebasestorage.app",messagingSenderId:"834797498886",appId:"1:834797498886:web:cb2f88ab4523480400c987"},Jf=fy(D8);console.log("Firebase app:",Jf);const bt=ji(Jf);console.log("Firestore db:",bt);const ug=_F(Jf),As=N8(Jf);function O8(){const{isDarkMode:n}=I.useContext(Je),e=I.useRef(null),t=I.useRef(null),[r,s]=I.useState(!1),[o,l]=I.useState(!1),[u,d]=I.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[f,g]=I.useState(0),[v,_]=I.useState(null),[b,S]=I.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);I.useEffect(()=>{(async()=>{var M,z;const B=nr(bt,"content","home"),V=await Uf(B);let A={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"We are dedicated to bringing you information about Australian Shepherds and how to maintain a healthy gut. Our mission is to educate and inspire a natural approach to wellness for you and your furry friends.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin."],lastUpdated:null};if(V.exists()){const O=V.data();A={...A,...O,currentWorkout:{...A.currentWorkout,...O.currentWorkout,warmup:((M=O.currentWorkout)==null?void 0:M.warmup)||A.currentWorkout.warmup,main:((z=O.currentWorkout)==null?void 0:z.main)||A.currentWorkout.main},scheduledWorkouts:O.scheduledWorkouts||[],dailyChallenges:O.dailyChallenges||A.dailyChallenges}}const E=new Date,C=[...A.scheduledWorkouts];let R=!1;if(C.sort((O,se)=>new Date(O.updateDateTime)-new Date(se.updateDateTime)),C.length>0){const O=C[0],se=new Date(O.updateDateTime);E>=se&&(!A.lastUpdated||new Date(A.lastUpdated)<se)&&(A.currentWorkout={description:O.description||"",warmup:O.warmup||[],main:O.main||[]},C.shift(),A.scheduledWorkouts=C,A.lastUpdated=E.toISOString(),R=!0)}R&&await Qy(B,A,{merge:!0}),d(A);try{const O=Xt(bt,"content","blog","posts"),pe=(await ir(O)).docs.map(Ne=>({id:Ne.id,...Ne.data()}));if(pe.length>0){pe.sort((J,Z)=>new Date(Z.date)-new Date(J.date));const Ne=pe[0],we=j(Ne);_({...Ne,excerpt:we})}else _({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}catch(O){console.error("Error fetching blog posts:",O),_({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}})()},[]),console.log("Supabase client initialized:",Pn);const j=q=>{if(!q||!q.blocks||q.blocks.length===0)return"Read more...";const B=q.blocks.find(V=>V.type==="paragraph"||V.type==="list"||V.type==="bullet");return B?B.type==="paragraph"&&B.content?B.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(B.content)&&B.content.length>0?B.content[0]+(B.content.length>1?"...":""):"Read more...":"Read more..."};I.useEffect(()=>{const q=new IntersectionObserver(B=>{B.forEach(V=>{const A=V.isIntersecting;V.target===e.current&&s(A),V.target===t.current&&l(A)})},{threshold:.2});return e.current&&q.observe(e.current),t.current&&q.observe(t.current),()=>{e.current&&q.unobserve(e.current),t.current&&q.unobserve(t.current)}},[]),I.useEffect(()=>{const q=setInterval(()=>{g(B=>(B+1)%u.quotes.length)},4e3);return()=>clearInterval(q)},[u.quotes.length]),I.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(b))},[b]);const P={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},D={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},W=q=>{S(B=>B.includes(q)?B.filter(V=>V!==q):[...B,q])},F=u.dailyChallenges.length>0&&b.length===u.dailyChallenges.length&&u.dailyChallenges.every((q,B)=>b.includes(B));return m.jsxs("div",{className:`min-h-screen flex flex-col ${n?"bg-stone-900":"bg-white"}`,children:[m.jsx("section",{ref:e,className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:"container mx-auto text-center",children:[m.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),m.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."}),m.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[m.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[m.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"About Us"}),m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.aboutUs}),m.jsx("div",{className:"flex justify-center gap-4 mt-6",children:m.jsx(rr,{to:"/login",variant:"primary",className:`${n?"bg-red-600 text-white hover:bg-red-700":"bg-red-700 text-white hover:bg-red-800"}`,children:"Join the Pack"})})]}),m.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:m.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:m.jsx(B2,{className:"w-full h-full object-cover"})})})]})]})}),m.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),m.jsx("section",{ref:t,className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[m.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),m.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:m.jsx(hx,{mode:"wait",children:m.jsxs(Rb.p,{variants:P,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:['"',u.quotes[f],'"']},f)})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[m.jsxs("div",{children:[m.jsx("h3",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),m.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.currentWorkout.description}),m.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Warm Up"}),m.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"}`,children:(u.currentWorkout.warmup||[]).map((q,B)=>m.jsx("li",{className:"mb-2 text-lg",children:q},`warmup-${B}`))}),m.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Main Workout"}),m.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:(u.currentWorkout.main||[]).map((q,B)=>m.jsx("li",{className:"mb-2 text-lg",children:q},`main-${B}`))}),m.jsx(rr,{to:"/fitness-tips",variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900",children:"More Fitness Tips"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),m.jsx("ul",{className:`text-left list-disc pl-6 mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:(u.dailyChallenges||[]).map((q,B)=>m.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[m.jsx("input",{type:"checkbox",checked:b.includes(B),onChange:()=>W(B),className:"mr-2"}),q]},`challenge-${B}`))}),m.jsx(hx,{children:F&&m.jsx(Rb.p,{variants:D,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${n?"text-green-400":"text-green-600"}`,children:"Great job, Pack Leader!"})})]})]})]})}),m.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),v&&m.jsx("section",{className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:"container mx-auto text-center",children:[m.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),m.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:v.title}),m.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-gray-400":"text-gray-600"}`,children:v.date}),m.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:v.excerpt}),m.jsx(rr,{to:`/blog/${v.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900",children:"Read More"})]})}),m.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),m.jsxs("div",{className:`py-8 ${n?"bg-stone-800":"bg-stone-100"} text-center`,children:[m.jsx("p",{className:`text-lg mb-4 ${n?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),m.jsx(rr,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900",children:"Sign Up"})]})]})}const mA=I.createContext(),L8=({children:n})=>{const[e,t]=I.useState([]),r=d=>{t(f=>f.find(v=>v.id===d.id)?f.map(v=>v.id===d.id?{...v,quantity:v.quantity+1}:v):[...f,{...d,quantity:1}])},s=(d,f)=>{f<=0?o(d):t(g=>g.map(v=>v.id===d?{...v,quantity:f}:v))},o=d=>{t(f=>f.filter(g=>g.id!==d))},l=()=>{t([])},u=()=>e.reduce((d,f)=>d+f.price*f.quantity,0);return m.jsx(mA.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:u},children:n})},dv=()=>I.useContext(mA);function M8(){var O;const{isDarkMode:n}=I.useContext(Je),{cart:e,addToCart:t,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=dv(),[l,u]=I.useState([]),[d,f]=I.useState([]),[g,v]=I.useState(!1),[_,b]=I.useState(""),[S,j]=I.useState(""),[P,D]=I.useState(!1),[W,F]=I.useState(!0),[q,B]=I.useState(!1),V=I.useRef(null),A=I.useRef(null),E=dn();I.useEffect(()=>{console.log("isMiniCartOpen updated to:",P)},[P]),I.useEffect(()=>{console.log("showAll updated to:",g)},[g]),I.useEffect(()=>{const se=pe=>{const Ne=document.querySelector(".cart-button"),we=pe.target.closest(".add-to-cart-button"),J=Date.now(),Z=A.current?J-A.current:1/0;console.log("Outside click handler triggered, target:",pe.target),console.log("Is target an Add to Cart button?",!!we),console.log("Time since last Add to Cart click:",Z),console.log("IsMiniCartOpen?",P),console.log("OpenedByAdd?",q),P&&!pe.target.closest(".mini-cart-sidebar")&&!(Ne!=null&&Ne.contains(pe.target))&&!we&&Z>100&&!q&&(console.log("Outside click detected, closing sidebar"),D(!1))};return document.addEventListener("click",se),()=>document.removeEventListener("click",se)},[P,q]),I.useEffect(()=>{(async()=>{try{F(!0);const Ne=(await ir(Xt(bt,"categories"))).docs.map(Z=>({id:Z.id,...Z.data()}));u(Ne);const J=(await ir(Xt(bt,"products"))).docs.map(Z=>({id:Z.id,...Z.data()}));f(J)}catch(pe){console.error("Error fetching data from Firestore:",pe)}finally{F(!1)}})()},[]),I.useEffect(()=>(e.length>0&&(V.current&&clearTimeout(V.current),console.log("Cart updated, opening sidebar, cart length:",e.length),B(!0),D(!0),e.length!==1&&(V.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),D(!1),B(!1)},3e3))),()=>{V.current&&clearTimeout(V.current)}),[e]),I.useEffect(()=>{e.length===0&&P&&(console.log("Cart is empty, closing sidebar"),D(!1),B(!1))},[e,P]);const C=se=>{A.current=Date.now(),t(se)},R=se=>{const pe=[...se];switch(_){case"price-asc":return pe.sort((Ne,we)=>Ne.price-we.price);case"price-desc":return pe.sort((Ne,we)=>we.price-Ne.price);case"name-asc":return pe.sort((Ne,we)=>Ne.name.localeCompare(we.name));case"name-desc":return pe.sort((Ne,we)=>we.name.localeCompare(Ne.name));default:return pe}},M=S?d.filter(se=>se.categoryId===S):d,z=R(M);return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 flex ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:`text-4xl font-bold transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Products"}),m.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950",onClick:se=>{se.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",P),D(!P)},children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),m.jsx("span",{children:"Cart"}),Array.isArray(e)&&e.length>0&&m.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-6 w-6 flex items-center justify-center text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((se,pe)=>se+pe.quantity,0)})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Filter by Section:"}),m.jsxs("select",{value:S,onChange:se=>j(se.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[m.jsx("option",{value:"",children:"All Sections"}),l.map(se=>m.jsx("option",{value:se.id,children:se.name},se.id))]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Sort By:"}),m.jsxs("select",{value:_,onChange:se=>b(se.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[m.jsx("option",{value:"",children:"None"}),m.jsx("option",{value:"price-asc",children:"Price: Low to High"}),m.jsx("option",{value:"price-desc",children:"Price: High to Low"}),m.jsx("option",{value:"name-asc",children:"Name: A-Z"}),m.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),m.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),v(se=>{const pe=!se;return console.log("Setting showAll to:",pe),pe&&(console.log("Resetting filterCategory to show all products"),j("")),pe})},className:`px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${n?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]}),W?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):S?m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:((O=l.find(se=>se.id===S))==null?void 0:O.name)||"Section"}),z.length===0?m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:z.map(se=>m.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:se.image,alt:se.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:pe=>{pe.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${se.name}`)}}),m.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:se.name}),m.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:se.description}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",se.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",se.color]}),m.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",se.size]}),m.jsx("button",{onClick:pe=>{pe.stopPropagation(),A.current=Date.now(),C(se)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},se.id))})]}):g?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:z.map(se=>m.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:se.image,alt:se.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:pe=>{pe.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${se.name}`)}}),m.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:se.name}),m.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:se.description}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",se.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",se.color]}),m.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",se.size]}),m.jsx("button",{onClick:pe=>{pe.stopPropagation(),A.current=Date.now(),C(se)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},se.id))}):l.map(se=>m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:se.name}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:R(d.filter(pe=>pe.categoryId===se.id)).map(pe=>m.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:pe.image,alt:pe.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:Ne=>{Ne.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${pe.name}`)}}),m.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:pe.name}),m.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:pe.description}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",pe.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",pe.color]}),m.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",pe.size]}),m.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),A.current=Date.now(),C(pe)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},pe.id))})]},se.id))]}),P&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:se=>{se.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),D(!1)}}),m.jsx("div",{className:`mini-cart-sidebar w-80 p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${P?"translate-x-0":"translate-x-full"} ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:m.jsxs("div",{className:`mini-cart-content ${P?"active":""}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Your Cart"}),m.jsx("button",{onClick:se=>{se.stopPropagation(),console.log("Close button clicked, closing sidebar"),D(!1)},className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:""})]}),!Array.isArray(e)||e.length===0?m.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx(gf,{component:null,children:e.map(se=>m.jsx(mf,{timeout:300,classNames:"cart-item",children:m.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${n?"border-stone-600":"border-red-300"}`,children:[m.jsx("img",{src:se.image,alt:se.name,className:"w-16 h-16 object-cover rounded-md",onError:pe=>{pe.target.src="https://via.placeholder.com/80"}}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:`text-sm font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:se.name}),m.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["$",se.price.toFixed(2)," x ",se.quantity]}),m.jsx("div",{className:"flex items-center gap-2 mt-2",children:m.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[se.quantity===1?m.jsx("button",{onClick:pe=>{pe.stopPropagation(),s(se.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):m.jsx("button",{onClick:pe=>{pe.stopPropagation(),r(se.id,se.quantity-1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),m.jsx("span",{className:`text-sm mx-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:se.quantity}),m.jsx("button",{onClick:pe=>{pe.stopPropagation(),r(se.id,se.quantity+1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),m.jsx("button",{onClick:pe=>{pe.stopPropagation(),s(se.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-colors duration-300 ease-in-out",children:""})]})},se.id))}),m.jsxs("div",{className:"border-t pt-4 mt-4",children:[m.jsxs("p",{className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),m.jsx("button",{onClick:se=>{se.stopPropagation(),D(!1),E("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4",children:"Go to Cart"}),m.jsx("button",{onClick:se=>{se.stopPropagation(),D(!1),E("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2",children:"Proceed to Checkout"})]})]})]})})]})]})}function V8(){const{isDarkMode:n}=I.useContext(Je),{cart:e,updateQuantity:t,removeFromCart:r,clearCart:s,getTotalPrice:o}=dv(),[l,u]=I.useState(!1),[d,f]=I.useState({name:"",email:"",address:""}),g=dn(),v=async _=>{if(_.preventDefault(),!d.name||!d.email||!d.address){alert("Please fill in all fields to proceed with checkout.");return}u(!0);try{const b={items:e,total:o(),customer:d,createdAt:new Date().toISOString(),status:"pending"};await gc(Xt(bt,"orders"),b),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(b){console.error("Error placing order:",b),alert("Failed to place order. Please try again.")}finally{u(!1),f({name:"",email:"",address:""})}};return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:`text-lg mb-4 ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),m.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):m.jsxs("div",{className:"space-y-8",children:[m.jsx("div",{className:"space-y-4",children:e.map(_=>m.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:_.image,alt:_.name,className:"w-20 h-20 object-cover rounded-md",onError:b=>{b.target.src="https://via.placeholder.com/80"}}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:_.name}),m.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",_.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(_.price*_.quantity).toFixed(2)]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>t(_.id,_.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),m.jsx("span",{className:`text-lg ${n?"text-white":"text-red-600"}`,children:_.quantity}),m.jsx("button",{onClick:()=>t(_.id,_.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),m.jsx("button",{onClick:()=>r(_.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},_.id))}),m.jsxs("div",{className:`p-6 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-white":"text-red-600"}`,children:"Order Summary"}),m.jsxs("p",{className:`text-lg mb-4 ${n?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),m.jsxs("form",{onSubmit:v,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Full Name"}),m.jsx("input",{type:"text",value:d.name,onChange:_=>f({...d,name:_.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Email"}),m.jsx("input",{type:"email",value:d.email,onChange:_=>f({...d,email:_.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Shipping Address"}),m.jsx("textarea",{value:d.address,onChange:_=>f({...d,address:_.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),m.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function $8(){const{isDarkMode:n}=I.useContext(Je),{cart:e,updateQuantity:t,removeFromCart:r}=dv(),s=Object.values(e).reduce((l,u)=>l+u.price*u.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsxs("header",{className:"text-center mb-12",children:[m.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Checkout"}),m.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),m.jsx(rr,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,u])=>m.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[m.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:m.jsx("img",{src:u.image||"https://via.placeholder.com/80",alt:u.name,className:"w-full h-full object-cover rounded"})}),m.jsxs("div",{className:"flex-1 ml-4",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.name}),m.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Color: ",u.color]}),m.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Size: ",u.size]})]}),m.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:""})]}),m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx("button",{onClick:()=>t(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${n?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),m.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${n?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:u.quantity}),m.jsx("button",{onClick:()=>t(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${n?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),m.jsx("div",{className:"text-right ml-4",children:u.originalPrice?m.jsxs("div",{children:[m.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["$",(u.originalPrice*u.quantity).toFixed(2)]}),m.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})]}):m.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})})]},l))}),m.jsxs("div",{className:"mt-12 text-right",children:[m.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),m.jsx(rr,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const f0=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):"," Stress: Elevates cortisol, disrupting gut flora and increasing permeability"," Glyphosate: Kills beneficial bacteria, feeds pathogenic ones"," Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections"," Seed Oils: Feed pathogenic bacteria, have a long half-life"," Refined Sugars: Feed harmful bacteria, promote dysbiosis"," Long-term Restrictive Diets: Reduce microbiome diversity"," Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
 Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
 Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
 Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesnt survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
 Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
 A nutrient-dense, diverse, unprocessed diet with prebiotics
 Healthy exercise, sleep, and an uplifting social life worth enjoying
 Sun exposure and skin contact with nature
 Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connectedgood gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function p0({title:n,content:e,footer:t,className:r}){const{isDarkMode:s}=I.useContext(Je);return m.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[m.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:n}),e&&m.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),t&&m.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:t})]})}function F8(){const{isDarkMode:n}=I.useContext(Je);I.useEffect(()=>{});const e=f0.filter(r=>r.category==="Benefits"),t=f0.filter(r=>r.category!=="Benefits");return m.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${n?"bg-stone-900":"bg-white"}`,children:[m.jsx("div",{className:"pt-16"}),m.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),m.jsxs("section",{className:"mb-8 flex-grow",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),m.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),m.jsxs("section",{className:"py-12 px-6 flex-grow",children:[m.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>m.jsx(tt,{to:`/gut-health/${r.id}`,children:m.jsx(p0,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),m.jsxs("section",{className:"flex-grow",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:t.map(r=>m.jsx(tt,{to:`/gut-health/${r.id}`,children:m.jsx(p0,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${n?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function U8(){const{id:n}=ff(),{isDarkMode:e}=I.useContext(Je);dn();const t=f0.find(r=>r.id.toString()===n);return t?m.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[m.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:t.title}),m.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",t.category]}),Array.isArray(t.content)?m.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:t.content.map((r,s)=>m.jsx("li",{className:"mb-2",children:r},s))}):m.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:t.content}),m.jsx(rr,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):m.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[m.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),m.jsx(rr,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const B8=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function z8(){const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState([]),r=l=>t([...e,l]),s=l=>t(e.filter(u=>u.id!==l)),o=e.reduce((l,u)=>l+u.price,0);return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("h1",{className:`text-3xl font-bold mb-6 ${n?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-green-200":"text-green-700"}`,children:"Available Products"}),B8.map(l=>m.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${n?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[m.jsxs("div",{children:[m.jsx("h3",{className:`font-bold ${n?"text-gray-300":"text-gray-800"}`,children:l.name}),m.jsxs("p",{className:`${n?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),m.jsx(rr,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?m.jsx("p",{className:`${n?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):m.jsxs(m.Fragment,{children:[e.map(l=>m.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${n?"border-gray-700":"border-gray-300"}`,children:[m.jsx("span",{className:`${n?"text-gray-300":"text-gray-800"}`,children:l.name}),m.jsxs("div",{children:[m.jsxs("span",{className:`mr-4 ${n?"text-green-400":"text-green-700"}`,children:["$",l.price]}),m.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),m.jsxs("div",{className:`mt-4 font-bold ${n?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),m.jsx(rr,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}const W8=()=>{const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState([]),[r,s]=I.useState(!0),[o,l]=I.useState(null);I.useEffect(()=>{(async()=>{try{const g=Xt(bt,"content","blog","posts"),_=(await ir(g)).docs.map(b=>({id:b.id,title:b.data().title,blocks:b.data().blocks||[{type:"paragraph",content:""}],lastEdited:b.data().lastEdited||""}));if(console.log("Fetched blog posts:",_),_.length>0){const b=_.sort((S,j)=>{const P=S.lastEdited?new Date(S.lastEdited):new Date(0);return(j.lastEdited?new Date(j.lastEdited):new Date(0))-P});t(b)}else t([])}catch(g){console.error("Error fetching blog posts:",g),l("Failed to load blog posts: "+g.message),t([])}finally{s(!1)}})()},[]);const u=f=>f?new Date(f).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",d=f=>{if(!f.blocks||f.blocks.length===0)return"Read more...";const g=f.blocks.find(v=>v.type==="paragraph"||v.type==="list"||v.type==="bullet");return g?g.type==="paragraph"?g.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(g.content)?g.content[0]+(g.content.length>1?"...":""):"Read more...":"Read more..."};return r?m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Loading posts..."})]}):o?m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:o})]}):m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(f=>m.jsx(tt,{to:`/blog/${f.id}`,className:"block group",children:m.jsx(p0,{title:f.title,footer:m.jsxs("span",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",u(f.lastEdited)]}),content:m.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:d(f)}),className:`p-6 rounded-lg shadow-md transition-all duration-300 ease-in-out ${n?"bg-stone-800 hover:bg-stone-700":"bg-white hover:bg-stone-100"} group-hover:shadow-lg`})},f.id))})]})},H8=()=>{const{id:n}=ff(),{isDarkMode:e}=I.useContext(Je),[t,r]=I.useState(null);I.useEffect(()=>{(async()=>{const l=nr(bt,"content","blog","posts",n),u=await Uf(l);u.exists()?r({id:u.id,...u.data()}):r(null)})()},[n]);const s=o=>o?new Date(o).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return t?m.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:m.jsxs("div",{className:"max-w-3xl mx-auto",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:t.title}),m.jsxs("p",{className:`text-lg mb-8 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",s(t.lastEdited)]}),m.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:t.blocks&&t.blocks.length>0?t.blocks.map((o,l)=>m.jsx("div",{className:"mb-6",children:o.type==="paragraph"?m.jsx("p",{children:o.content}):o.type==="list"&&Array.isArray(o.content)?m.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:o.content.map((u,d)=>m.jsx("li",{children:u},d))}):o.type==="bullet"&&Array.isArray(o.content)?m.jsx("ul",{className:"list-disc pl-6 space-y-2",children:o.content.map((u,d)=>m.jsx("li",{children:u},d))}):o.type==="image"&&o.content?m.jsx("img",{src:o.content,alt:"Blog content",className:"w-full max-w-md mx-auto rounded-lg shadow-md"}):o.type==="link"&&o.content.url?m.jsx(tt,{to:o.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:o.content.text||o.content.url}):m.jsx("p",{className:"text-red-500",children:"Invalid block format"})},l)):m.jsx("p",{children:"No content available."})}),m.jsx(rr,{to:"/blog",variant:"primary",className:"mt-8 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})}):m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),m.jsx(rr,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},q8=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function K8(){const{isDarkMode:n}=I.useContext(Je);return m.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[m.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${n?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),m.jsx("div",{className:"space-y-4",children:q8.map((e,t)=>m.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${n?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[m.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${n?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,m.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:""})]}),m.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},t))})]})}class Oc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const G8=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Jt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:G8()},hv=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},Q8=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=hv(n);Jt.publicKey=t.publicKey,Jt.blockHeadless=t.blockHeadless,Jt.storageProvider=t.storageProvider,Jt.blockList=t.blockList,Jt.limitRate=t.limitRate,Jt.origin=t.origin||e},gA=async(n,e,t={})=>{const r=await fetch(Jt.origin+n,{method:"POST",headers:t,body:e}),s=await r.text(),o=new Oc(r.status,s);if(r.ok)return o;throw o},yA=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},J8=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},vA=n=>n.webdriver||!n.languages||n.languages.length===0,_A=()=>new Oc(451,"Unavailable For Headless Browser"),Y8=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},X8=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},Z8=(n,e)=>n instanceof FormData?n.get(e):n[e],wA=(n,e)=>{if(X8(n))return!1;Y8(n.list,n.watchVariable);const t=Z8(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},xA=()=>new Oc(403,"Forbidden"),e9=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},t9=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},bA=async(n,e,t)=>{if(!e.throttle||!t)return!1;e9(e.throttle,e.id);const r=e.id||n;return await t9(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},EA=()=>new Oc(429,"Too Many Requests"),n9=async(n,e,t,r)=>{const s=hv(r),o=s.publicKey||Jt.publicKey,l=s.blockHeadless||Jt.blockHeadless,u=s.storageProvider||Jt.storageProvider,d={...Jt.blockList,...s.blockList},f={...Jt.limitRate,...s.limitRate};return l&&vA(navigator)?Promise.reject(_A()):(yA(o,n,e),J8(t),t&&wA(d,t)?Promise.reject(xA()):await bA(location.pathname,f,u)?Promise.reject(EA()):gA("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},r9=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},s9=n=>typeof n=="string"?document.querySelector(n):n,i9=async(n,e,t,r)=>{const s=hv(r),o=s.publicKey||Jt.publicKey,l=s.blockHeadless||Jt.blockHeadless,u=Jt.storageProvider||s.storageProvider,d={...Jt.blockList,...s.blockList},f={...Jt.limitRate,...s.limitRate};if(l&&vA(navigator))return Promise.reject(_A());const g=s9(t);yA(o,n,e),r9(g);const v=new FormData(g);return wA(d,v)?Promise.reject(xA()):await bA(location.pathname,f,u)?Promise.reject(EA()):(v.append("lib_version","4.4.1"),v.append("service_id",n),v.append("template_id",e),v.append("user_id",o),gA("/api/v1.0/email/send-form",v))},o9={init:Q8,send:n9,sendForm:i9,EmailJSResponseStatus:Oc};function a9(){const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState({name:"",email:"",message:""}),[r,s]=I.useState(""),o=u=>{const{name:d,value:f}=u.target;t(g=>({...g,[d]:f}))},l=u=>{u.preventDefault(),s("Sending..."),o9.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(d=>{s("Thank you! Your inquiry has been sent."),t({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},d=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",d.text),setTimeout(()=>s(""),3e3)})};return m.jsx("div",{className:`min-h-screen py-12 px-4 ${n?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Contact Us"}),m.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),m.jsxs("form",{onSubmit:l,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Message"}),m.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&m.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:r})]})]})})}function l9(){const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState(""),[r,s]=I.useState(""),[o,l]=I.useState(!1),[u,d]=I.useState(null),f=dn();I.useEffect(()=>{const _=qf(As,b=>{l(!!b)});return()=>_()},[]);const g=async _=>{_.preventDefault(),d(null);try{await _U(As,e,r),l(!0)}catch(b){d("Failed to log in: "+b.message)}},v=async()=>{try{await Kf(As),l(!1),f("/admin")}catch(_){d("Failed to log out: "+_.message)}};return o?m.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n?"bg-stone-900":"bg-white"}`,children:[m.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("button",{onClick:()=>f("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),m.jsx("button",{onClick:()=>f("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),m.jsx("button",{onClick:()=>f("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),m.jsx("button",{onClick:()=>f("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),m.jsx("button",{onClick:v,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):m.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:`p-6 ${n?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[m.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),u&&m.jsx("p",{className:`text-red-500 mb-4 ${n?"text-red-400":"text-red-600"}`,children:u}),m.jsxs("form",{onSubmit:g,children:[m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"email",value:e,onChange:_=>t(_.target.value),className:`border p-2 w-full mb-4 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"password",value:r,onChange:_=>s(_.target.value),className:`border p-2 w-full mb-4 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function u9(){const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState([""]),[r,s]=I.useState(""),[o,l]=I.useState([""]),[u,d]=I.useState([""]),[f,g]=I.useState([]),[v,_]=I.useState(""),[b,S]=I.useState([""]),[j,P]=I.useState(null),D=dn();I.useEffect(()=>{const ie=qf(As,ne=>{ne||D("/admin")});return()=>ie()},[D]),I.useEffect(()=>{(async()=>{var ne,ce,Te,Ve,vt,Bn,ts,ar;try{const lr=nr(bt,"content","home"),ns=await Uf(lr);if(ns.exists()){const Lt=ns.data();t((ne=Lt.quotes)!=null&&ne.length?Lt.quotes:[""]),s(((ce=Lt.currentWorkout)==null?void 0:ce.description)||""),l((Ve=(Te=Lt.currentWorkout)==null?void 0:Te.warmup)!=null&&Ve.length?Lt.currentWorkout.warmup:[""]),d((Bn=(vt=Lt.currentWorkout)==null?void 0:vt.main)!=null&&Bn.length?Lt.currentWorkout.main:[""]),g((ts=Lt.scheduledWorkouts)!=null&&ts.length?Lt.scheduledWorkouts.map(rs=>({...rs,warmup:rs.warmup||[""],main:rs.main||[""]})):[{description:"",warmup:[""],main:[""],updateDateTime:""}]),_(Lt.aboutUs||""),S((ar=Lt.dailyChallenges)!=null&&ar.length?Lt.dailyChallenges:[""])}}catch(lr){P("Failed to load content: "+lr.message)}})()},[]);const W=async()=>{P(null);const ie={quotes:e.filter(ne=>ne.trim()!==""),currentWorkout:{description:r,warmup:o.filter(ne=>ne.trim()!==""),main:u.filter(ne=>ne.trim()!=="")},scheduledWorkouts:f.filter(ne=>ne.description.trim()&&(ne.warmup.length>0||ne.main.length>0)&&ne.updateDateTime.trim()).map(ne=>({description:ne.description,warmup:ne.warmup.filter(ce=>ce.trim()!==""),main:ne.main.filter(ce=>ce.trim()!==""),updateDateTime:ne.updateDateTime})),aboutUs:v.trim(),dailyChallenges:b.filter(ne=>ne.trim()!==""),lastUpdated:new Date().toISOString()};try{await Qy(nr(bt,"content","home"),ie),alert("Home page content saved successfully!"),D("/admin")}catch(ne){P("Error saving changes: "+ne.message)}},F=async()=>{try{await Kf(As),D("/admin")}catch(ie){P("Failed to log out: "+ie.message)}},q=()=>t([...e,""]),B=ie=>t(e.filter((ne,ce)=>ce!==ie)),V=(ie,ne)=>{const ce=[...e];ce[ie]=ne,t(ce)},A=()=>l([...o,""]),E=ie=>l(o.filter((ne,ce)=>ce!==ie)),C=(ie,ne)=>{const ce=[...o];ce[ie]=ne,l(ce)},R=()=>d([...u,""]),M=ie=>d(u.filter((ne,ce)=>ce!==ie)),z=(ie,ne)=>{const ce=[...u];ce[ie]=ne,d(ce)},O=()=>g([...f,{description:"",warmup:[""],main:[""],updateDateTime:""}]),se=ie=>g(f.filter((ne,ce)=>ce!==ie)),pe=(ie,ne,ce)=>{const Te=[...f];Te[ie][ne]=ce,g(Te)},Ne=ie=>{const ne=[...f];ne[ie].warmup.push(""),g(ne)},we=(ie,ne)=>{const ce=[...f];ce[ie].warmup=ce[ie].warmup.filter((Te,Ve)=>Ve!==ne),g(ce)},J=(ie,ne,ce)=>{const Te=[...f];Te[ie].warmup[ne]=ce,g(Te)},Z=ie=>{const ne=[...f];ne[ie].main.push(""),g(ne)},te=(ie,ne)=>{const ce=[...f];ce[ie].main=ce[ie].main.filter((Te,Ve)=>Ve!==ne),g(ce)},$=(ie,ne,ce)=>{const Te=[...f];Te[ie].main[ne]=ce,g(Te)},Q=()=>S([...b,""]),fe=ie=>S(b.filter((ne,ce)=>ce!==ie)),ye=(ie,ne)=>{const ce=[...b];ce[ie]=ne,S(ce)};return m.jsxs("div",{className:`min-h-screen p-6 ${n?"bg-stone-900":"bg-white"}`,children:[m.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),j&&m.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:j}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((ie,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ie,onChange:ce=>V(ne,ce.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${ne+1}`}),m.jsx("button",{onClick:()=>B(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},ne)),m.jsx("button",{onClick:q,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),m.jsx("textarea",{value:v,onChange:ie=>_(ie.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),m.jsx("textarea",{value:r,onChange:ie=>s(ie.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((ie,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ie,onChange:ce=>C(ne,ce.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${ne+1}`}),m.jsx("button",{onClick:()=>E(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${ne}`)),m.jsx("button",{onClick:A,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mt-4 mb-2`,children:"Main Workout Exercises"}),u.map((ie,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ie,onChange:ce=>z(ne,ce.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${ne+1}`}),m.jsx("button",{onClick:()=>M(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove"})]},`main-${ne}`)),m.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Main Exercise"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),f.map((ie,ne)=>m.jsxs("div",{className:`mb-4 border p-4 rounded ${n?"border-stone-600":"border-red-300"}`,children:[m.jsx("input",{type:"datetime-local",value:ie.updateDateTime?ie.updateDateTime.slice(0,16):"",onChange:ce=>pe(ne,"updateDateTime",new Date(ce.target.value).toISOString()),className:`border p-2 w-full mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),m.jsx("textarea",{value:ie.description,onChange:ce=>pe(ne,"description",ce.target.value),className:`border p-2 w-full h-24 mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"} mt-2 mb-2`,children:"Warm Up Exercises"}),ie.warmup.map((ce,Te)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ce,onChange:Ve=>J(ne,Te,Ve.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${Te+1}`}),m.jsx("button",{onClick:()=>we(ne,Te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ie.warmup.length===1,children:"Remove"})]},`warmup-${ne}-${Te}`)),m.jsx("button",{onClick:()=>Ne(ne),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mt-2 mb-2`,children:"Main Workout Exercises"}),ie.main.map((ce,Te)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ce,onChange:Ve=>$(ne,Te,Ve.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${Te+1}`}),m.jsx("button",{onClick:()=>te(ne,Te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ie.main.length===1,children:"Remove"})]},`main-${ne}-${Te}`)),m.jsx("button",{onClick:()=>Z(ne),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-2",children:"Add Main Exercise"}),m.jsx("button",{onClick:()=>se(ne),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:f.length===1&&!f[0].description,children:"Remove Workout"})]},ne)),m.jsx("button",{onClick:O,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),b.map((ie,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ie,onChange:ce=>ye(ne,ce.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${ne+1}`}),m.jsx("button",{onClick:()=>fe(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:b.length===1,children:"Remove"})]},ne)),m.jsx("button",{onClick:Q,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),m.jsx("button",{onClick:W,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),m.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:F,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function c9(){const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState([]),[r,s]=I.useState(null),[o,l]=I.useState(null),u=dn();I.useEffect(()=>{const V=qf(As,A=>{A||u("/admin")});return()=>V()},[u]),I.useEffect(()=>{(async()=>{try{const A=Xt(bt,"content","blog","posts"),R=(await ir(A)).docs.map(M=>({id:M.id,title:M.data().title||"",blocks:M.data().blocks||[{type:"paragraph",content:""}],lastEdited:M.data().lastEdited||""})).sort((M,z)=>{const O=M.lastEdited?new Date(M.lastEdited):new Date(0);return(z.lastEdited?new Date(z.lastEdited):new Date(0))-O});t(R.length?R:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:""}])}catch(A){l("Failed to load blog posts: "+A.message)}})()},[]);const d=async()=>{l(null);try{const V=Xt(bt,"content","blog","posts"),A=await ir(V);for(const E of A.docs)await Ph(E.ref);for(const E of e)if(E.title.trim()&&E.blocks.some(C=>C.type==="paragraph"||C.type==="image"||C.type==="link"?C.content.trim():C.content.some(R=>R.trim()))){const C=E.id||Date.now().toString();await Qy(nr(V,C),{id:C,title:E.title,blocks:E.blocks.map(R=>({type:R.type,content:R.type==="paragraph"||R.type==="image"?R.content:R.type==="link"?{url:R.content.url,text:R.content.text}:R.content.filter(M=>M.trim()!=="")})),lastEdited:E.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),u("/admin")}catch(V){l("Error saving blog posts: "+V.message)}},f=async()=>{try{await Kf(As),u("/admin")}catch(V){l("Failed to log out: "+V.message)}},g=()=>{const V=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:new Date().toISOString()}];t(V),s(V.length-1)},v=V=>{const A=e.filter((E,C)=>C!==V);t(A),s(null)},_=(V,A,E)=>{const C=[...e];C[V]={...C[V],[A]:E,lastEdited:new Date().toISOString()},t(C)},b=(V,A)=>{const E=[...e];E[V].blocks.push({type:A,content:A==="paragraph"||A==="image"?"":A==="link"?{url:"",text:""}:[""]}),E[V].lastEdited=new Date().toISOString(),t(E)},S=(V,A)=>{const E=[...e];E[V].blocks=E[V].blocks.filter((C,R)=>R!==A),E[V].lastEdited=new Date().toISOString(),t(E)},j=(V,A,E)=>{const C=[...e];C[V].blocks[A]={type:E,content:E==="paragraph"||E==="image"?"":E==="link"?{url:"",text:""}:[""]},C[V].lastEdited=new Date().toISOString(),t(C)},P=(V,A,E)=>{const C=[...e];C[V].blocks[A].content=E,C[V].lastEdited=new Date().toISOString(),t(C)},D=(V,A,E,C)=>{const R=[...e];R[V].blocks[A].content[E]=C,R[V].lastEdited=new Date().toISOString(),t(R)},W=(V,A)=>{const E=[...e];E[V].blocks[A].content.push(""),E[V].lastEdited=new Date().toISOString(),t(E)},F=(V,A,E)=>{const C=[...e];C[V].blocks[A].content=C[V].blocks[A].content.filter((R,M)=>M!==E),C[V].lastEdited=new Date().toISOString(),t(C)},q=(V,A,E,C)=>{const R=[...e];R[V].blocks[A].content[E]=C,R[V].lastEdited=new Date().toISOString(),t(R)},B=V=>V?new Date(V).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return m.jsxs("div",{className:`min-h-screen p-6 ${n?"bg-stone-900":"bg-white"}`,children:[m.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&m.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:o}),r===null?m.jsxs("div",{className:"mb-6",children:[e.length===0?m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):m.jsx("div",{className:"grid gap-4",children:e.map((V,A)=>m.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(A),children:[m.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:V.title||"Untitled Post"}),m.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",B(V.lastEdited)]})]},A))}),m.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),m.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:f,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:`mb-4 border p-4 rounded ${n?"border-stone-600":"border-red-300"}`,children:[m.jsx("input",{type:"text",value:e[r].title,onChange:V=>_(r,"title",V.target.value),className:`border p-2 w-full mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),m.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",B(e[r].lastEdited)]}),m.jsxs("div",{className:"mb-2",children:[m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((V,A)=>m.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Block Type:"}),m.jsxs("select",{value:V.type,onChange:E=>j(r,A,E.target.value),className:`border p-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[m.jsx("option",{value:"paragraph",children:"Paragraph"}),m.jsx("option",{value:"list",children:"Numbered List"}),m.jsx("option",{value:"bullet",children:"Bullet Points"}),m.jsx("option",{value:"image",children:"Image"}),m.jsx("option",{value:"link",children:"Link"})]}),m.jsx("button",{onClick:()=>S(r,A),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),V.type==="paragraph"?m.jsx("textarea",{value:V.content,onChange:E=>P(r,A,E.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):V.type==="image"?m.jsxs("div",{className:"space-y-2",children:[m.jsx("input",{type:"text",value:V.content,onChange:E=>P(r,A,E.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),V.content&&m.jsx("img",{src:V.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):V.type==="link"?m.jsxs("div",{className:"space-y-2",children:[m.jsx("input",{type:"text",value:V.content.url,onChange:E=>D(r,A,"url",E.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),m.jsx("input",{type:"text",value:V.content.text,onChange:E=>D(r,A,"text",E.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):m.jsxs("div",{children:[V.content.map((E,C)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:E,onChange:R=>q(r,A,C,R.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${C+1}`}),m.jsx("button",{onClick:()=>F(r,A,C),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[A].content.length===1,children:"Remove"})]},C)),m.jsx("button",{onClick:()=>W(r,A),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},A)),m.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[m.jsx("button",{onClick:()=>b(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),m.jsx("button",{onClick:()=>b(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),m.jsx("button",{onClick:()=>b(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),m.jsx("button",{onClick:()=>b(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Image"}),m.jsx("button",{onClick:()=>b(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),m.jsx("button",{onClick:()=>v(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),m.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),m.jsx("button",{onClick:d,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),m.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:f,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function d9(){const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState([]),[r,s]=I.useState([]),[o,l]=I.useState(""),[u,d]=I.useState({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""}),[f,g]=I.useState(null),[v,_]=I.useState(null),[b,S]=I.useState(null),j=dn();I.useEffect(()=>{const E=qf(As,C=>{C||j("/admin")});return()=>E()},[j]),I.useEffect(()=>{(async()=>{try{const R=(await ir(Xt(bt,"categories"))).docs.map(O=>({id:O.id,...O.data()}));t(R);const z=(await ir(Xt(bt,"products"))).docs.map(O=>({id:O.id,...O.data()}));s(z)}catch(C){S("Error fetching data from Firestore: "+C.message)}})()},[]);const P=async E=>{if(E.preventDefault(),!!o)try{const C=await gc(Xt(bt,"categories"),{name:o});t([...e,{id:C.id,name:o}]),l("")}catch(C){S("Error adding category: "+C.message)}},D=async E=>{try{const C=nr(bt,"categories",E.id);await VE(C,{name:E.name}),t(e.map(R=>R.id===E.id?{...R,name:E.name}:R)),g(null)}catch(C){S("Error updating category: "+C.message)}},W=async E=>{try{await Ph(nr(bt,"categories",E)),t(e.filter(R=>R.id!==E));const C=r.filter(R=>R.categoryId===E);for(const R of C){if(R.image&&R.image!=="https://via.placeholder.com/80"){const M=R.image.split("/products%2F")[1].split("?")[0],z=og(ug,`products/${decodeURIComponent(M)}`);await WE(z).catch(O=>{S(`Error deleting image for product ${R.id}: `+O.message)})}await Ph(nr(bt,"products",R.id))}s(r.filter(R=>R.categoryId!==E))}catch(C){S("Error deleting category: "+C.message)}},F=async E=>{if(!E)return null;const C=og(ug,`products/${E.name}`);return await yF(C,E),await vF(C)},q=async E=>{if(E.preventDefault(),!(!u.categoryId||!u.name||!u.price))try{const C=await F(u.image),R=await gc(Xt(bt,"products"),{categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:C||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"});s([...r,{id:R.id,categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:C||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"}]),d({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""})}catch(C){S("Error adding product: "+C.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},B=async E=>{try{const C=E.image instanceof File?await F(E.image):E.image,R=nr(bt,"products",E.id);await VE(R,{categoryId:E.categoryId,name:E.name,price:parseFloat(E.price),description:E.description,image:C||"https://via.placeholder.com/80",color:E.color,size:E.size}),s(r.map(M=>M.id===E.id?{...M,categoryId:E.categoryId,name:E.name,price:parseFloat(E.price),description:E.description,image:C||"https://via.placeholder.com/80",color:E.color,size:E.size}:M)),_(null)}catch(C){S("Error updating product: "+C.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},V=async E=>{try{const C=r.find(R=>R.id===E);if(C.image&&C.image!=="https://via.placeholder.com/80"){const R=C.image.split("/products%2F")[1].split("?")[0],M=og(ug,`products/${decodeURIComponent(R)}`);await WE(M).catch(z=>{S(`Error deleting image for product ${E}: `+z.message)})}await Ph(nr(bt,"products",E)),s(r.filter(R=>R.id!==E))}catch(C){S("Error deleting product: "+C.message)}},A=async()=>{try{await Kf(As),j("/admin")}catch(E){S("Failed to log out: "+E.message)}};return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),b&&m.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:b}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Add New Category"}),m.jsxs("form",{onSubmit:P,className:"flex gap-4",children:[m.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Manage Categories"}),m.jsx("div",{className:"space-y-4",children:e.map(E=>m.jsx("div",{className:`p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(f==null?void 0:f.id)===E.id?m.jsxs("div",{className:"flex gap-4",children:[m.jsx("input",{type:"text",value:f.name,onChange:C=>g({...f,name:C.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),m.jsx("button",{onClick:()=>D(f),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),m.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:E.name}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>g(E),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),m.jsx("button",{onClick:()=>W(E.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},E.id))})]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Add New Product"}),m.jsxs("form",{onSubmit:q,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Category"}),m.jsxs("select",{value:u.categoryId,onChange:E=>d({...u,categoryId:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[m.jsx("option",{value:"",children:"Select a category"}),e.map(E=>m.jsx("option",{value:E.id,children:E.name},E.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),m.jsx("input",{type:"text",value:u.name,onChange:E=>d({...u,name:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Price"}),m.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:E=>d({...u,price:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Description"}),m.jsx("textarea",{value:u.description,onChange:E=>d({...u,description:E.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Image"}),m.jsx("input",{type:"file",accept:"image/*",onChange:E=>d({...u,image:E.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Color"}),m.jsx("input",{type:"text",value:u.color,onChange:E=>d({...u,color:E.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Color (optional)"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Size"}),m.jsx("input",{type:"text",value:u.size,onChange:E=>d({...u,size:E.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Size (optional)"})]}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Manage Products"}),m.jsx("div",{className:"space-y-4",children:r.map(E=>{var C;return m.jsx("div",{className:`p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(v==null?void 0:v.id)===E.id?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Category"}),m.jsxs("select",{value:v.categoryId,onChange:R=>_({...v,categoryId:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[m.jsx("option",{value:"",children:"Select a category"}),e.map(R=>m.jsx("option",{value:R.id,children:R.name},R.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),m.jsx("input",{type:"text",value:v.name,onChange:R=>_({...v,name:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Price"}),m.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:R=>_({...v,price:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Description"}),m.jsx("textarea",{value:v.description,onChange:R=>_({...v,description:R.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Image"}),m.jsx("input",{type:"file",accept:"image/*",onChange:R=>_({...v,image:R.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),v.image&&typeof v.image=="string"&&m.jsx("img",{src:v.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Color"}),m.jsx("input",{type:"text",value:v.color,onChange:R=>_({...v,color:R.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Size"}),m.jsx("input",{type:"text",value:v.size,onChange:R=>_({...v,size:R.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:()=>B(v),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),m.jsx("button",{onClick:()=>_(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[E.image&&E.image!=="https://via.placeholder.com/80"&&m.jsx("img",{src:E.image,alt:E.name,className:"w-16 h-16 object-cover rounded-md"}),m.jsxs("div",{children:[m.jsx("span",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:E.name}),m.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((C=e.find(R=>R.id===E.categoryId))==null?void 0:C.name)||"Unknown"]}),m.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",E.price.toFixed(2)]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>_(E),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),m.jsx("button",{onClick:()=>V(E.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},E.id)})})]}),m.jsxs("div",{className:"mt-6 flex gap-4",children:[m.jsx("button",{onClick:()=>j("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:A,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const h9=()=>{const n=dn(),{isDarkMode:e}=I.useContext(Je),t=()=>{n("/fitness-tracker/create-custom-plan")};return m.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),m.jsx("div",{className:"text-center",children:m.jsx("button",{onClick:t,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),m.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx(tt,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),m.jsx(tt,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},f9=()=>{const{id:n}=ff(),{isDarkMode:e}=I.useContext(Je),[t,r]=I.useState(null),[s,o]=I.useState(!0);I.useEffect(()=>{(async()=>{const f=ji(),g=await Uf(nr(f,"customPlans",n));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[n]);const l=d=>{if(!(t!=null&&t.startDate))return"";const f=new Date(t.startDate);return f.setDate(f.getDate()+d*7),f.toLocaleDateString()},u=(d,f)=>{if(!(t!=null&&t.startDate))return"";const g=new Date(t.startDate);return g.setDate(g.getDate()+d*7+f),g.toLocaleDateString()};return s?m.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsx("p",{className:"text-xl",children:"Loading..."})}):t?m.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:t.name}),m.jsx("div",{className:"max-w-4xl mx-auto",children:t.weeks.map((d,f)=>m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",d.week," (",l(f),")"]}),d.days.map((g,v)=>m.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",u(f,v),")"]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),m.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((_,b)=>m.jsxs("li",{children:[_.name,": ",_.sets," sets x ",_.reps," ","reps"]},b))})]})]},v))]},f))})]})}):m.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=I.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},d)=>I.createElement("svg",{ref:d,...m9,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:TA("lucide",s),...u},[...l.map(([f,g])=>I.createElement(f,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl=(n,e)=>{const t=I.forwardRef(({className:r,...s},o)=>I.createElement(g9,{ref:o,iconNode:e,className:TA(`lucide-${p9(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],fv=Rl("ChevronDown",y9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],pv=Rl("ChevronUp",v9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rl=Rl("CircleCheckBig",_9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],sl=Rl("CircleX",w9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],b9=Rl("SquarePen",x9);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],T9=Rl("Trash2",E9),S9=()=>{const n=dn(),{isDarkMode:e}=I.useContext(Je),[t,r]=I.useState(""),[s,o]=I.useState(new Date().toISOString().split("T")[0]),[l,u]=I.useState([]),[d,f]=I.useState({}),[g,v]=I.useState(Array.from({length:6},(q,B)=>({week:B+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[_,b]=I.useState(Array(6).fill(!1));I.useEffect(()=>{(async()=>{const B=ji(),A=(await ir(Xt(B,"workouts"))).docs.map(C=>({id:C.id,...C.data()})),E=A.reduce((C,R)=>{const M=R.muscleGroup||"Other";return C[M]||(C[M]=[]),C[M].push(R),C},{});u(A),f(E)})()},[]);const S=q=>{const B=[..._];B[q]=!B[q],b(B)},j=(q,B)=>{var A;const V=[...g];V[q].days[B].workouts.push({name:((A=l[0])==null?void 0:A.name)||"",sets:3,reps:10}),v(V)},P=(q,B,V,A,E)=>{const C=[...g];C[q].days[B].workouts[V][A]=E,v(C)},D=async q=>{q.preventDefault();const B=ji(),V={userId:"anonymous",name:t,startDate:new Date(s).toISOString(),weeks:g},A=await gc(Xt(B,"customPlans"),V);n(`/fitness-tracker/plan/${A.id}`)},W=q=>{const B=new Date(s);return B.setDate(B.getDate()+q*7),B.toLocaleDateString()},F=(q,B)=>{const V=new Date(s);return V.setDate(V.getDate()+q*7+B),V.toLocaleDateString()};return m.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),m.jsxs("form",{onSubmit:D,children:[m.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),m.jsx("input",{type:"text",value:t,onChange:q=>r(q.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),m.jsx("input",{type:"date",value:s,onChange:q=>o(q.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((q,B)=>m.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>S(B),children:[m.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",q.week," (",W(B),")"]}),_[B]?m.jsx(pv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):m.jsx(fv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),_[B]&&m.jsx("div",{className:"mt-4",children:q.days.map((V,A)=>m.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[V.day," (",F(B,A),")"]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),V.workouts.length>0?V.workouts.map((E,C)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[m.jsx("select",{value:E.name,onChange:R=>P(B,A,C,"name",R.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(d).map(R=>m.jsx("optgroup",{label:R,children:d[R].map(M=>m.jsx("option",{value:M.name,children:M.name},M.id))},R))}),m.jsx("input",{type:"number",value:E.sets,onChange:R=>P(B,A,C,"sets",Number(R.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),m.jsx("input",{type:"text",value:E.reps,onChange:R=>P(B,A,C,"reps",R.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},C)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),m.jsx("button",{type:"button",onClick:()=>j(B,A),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},A))})]},B))}),m.jsx("div",{className:"mt-8 max-w-md mx-auto",children:m.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},k9=()=>{const n=dn(),{isDarkMode:e}=I.useContext(Je),{user:t,loading:r}=I.useContext(Oi),[s,o]=I.useState([]),[l,u]=I.useState([]),[d,f]=I.useState([]),[g,v]=I.useState([]),[_,b]=I.useState(new Date().toISOString().split("T")[0]);I.useEffect(()=>{(async()=>{try{const A=ji(),E=await ir(Xt(A,"workouts")),C=await ir(Xt(A,"foods")),R=E.docs.map(z=>({id:z.id,...z.data()})),M=C.docs.map(z=>({id:z.id,...z.data()}));console.log("Fetched workouts from 'workouts' collection:",R),console.log("Fetched meals from 'foods' collection:",M),o(R),u(M),R.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),M.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(A){console.error("Error fetching data:",A)}})()},[]);const S=l.reduce((V,A)=>{const E=A.category||"Misc";return V[E]||(V[E]=[]),V[E].push(A),V},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],P=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}f([...d,{name:s[0].name,sets:0,reps:0}])},D=(V,A,E)=>{const C=[...d];C[V][A]=A==="sets"||A==="reps"?Number(E):E,f(C)},W=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}v([...g,{name:l[0].name,quantity:1}])},F=(V,A,E)=>{const C=[...g];C[V][A]=A==="quantity"?Number(E):E,v(C)},q=V=>{const A=l.find(E=>E.name===V.name);return A?{protein:A.macros.protein*V.quantity,carbs:A.macros.carbs*V.quantity,fats:A.macros.fats*V.quantity}:{protein:0,carbs:0,fats:0}},B=async V=>{if(V.preventDefault(),!t){alert("Please log in to save a fitness log."),n("/login");return}const A=ji(),E={userId:t.uid,date:new Date(_).toISOString(),workouts:d,meals:g.map(C=>({...C,macros:q(C)}))};await gc(Xt(A,"userLogs"),E),n("/fitness-tracker/history")};return r?m.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),m.jsxs("form",{onSubmit:B,className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),m.jsx("input",{type:"date",value:_,onChange:V=>b(V.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):d.length>0?d.map((V,A)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[m.jsx("select",{value:V.name,onChange:E=>D(A,"name",E.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(E=>m.jsx("option",{value:E.name,children:E.name},E.id))}),m.jsx("input",{type:"number",value:V.sets,onChange:E=>D(A,"sets",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),m.jsx("input",{type:"number",value:V.reps,onChange:E=>D(A,"reps",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},A)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),m.jsx("button",{type:"button",onClick:P,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((V,A)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[m.jsx("select",{value:V.name,onChange:E=>F(A,"name",E.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:j.map(E=>S[E]&&m.jsx("optgroup",{label:E,children:S[E].map(C=>m.jsx("option",{value:C.name,children:C.name},C.id))},E))}),m.jsx("input",{type:"number",value:V.quantity,onChange:E=>F(A,"quantity",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},A)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),m.jsx("button",{type:"button",onClick:W,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),m.jsx("div",{className:"text-center",children:m.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},C9=()=>{const{isDarkMode:n}=I.useContext(Je),[e,t]=I.useState([]);return I.useEffect(()=>{(async()=>{const s=ji(),l=(await ir(Xt(s,"userLogs"))).docs.map(u=>({id:u.id,...u.data()}));t(l.sort((u,d)=>new Date(d.date)-new Date(u.date)))})()},[]),m.jsx("div",{className:`min-h-screen pt-20 ${n?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${n?"text-red-400":"text-red-800"}`,children:"Fitness History"}),m.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>m.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${n?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[m.jsx("h2",{className:`text-xl font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),m.jsxs("div",{className:"mt-2",children:[m.jsx("h3",{className:`font-semibold mb-1 ${n?"text-red-400":"text-red-800"}`,children:"Workouts:"}),m.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>m.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("h3",{className:`font-semibold mb-1 ${n?"text-red-400":"text-red-800"}`,children:"Meals:"}),m.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>m.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):m.jsx("p",{className:`text-center text-lg ${n?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},P9=()=>{const n=dn(),{isDarkMode:e}=I.useContext(Je),{user:t,loading:r}=I.useContext(Oi),[s,o]=I.useState(""),[l,u]=I.useState(new Date().toISOString().split("T")[0]),[d,f]=I.useState([]),[g,v]=I.useState([]),[_,b]=I.useState(Array.from({length:6},(J,Z)=>({week:Z+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[S,j]=I.useState(Array(6).fill(!1)),[P,D]=I.useState(null);I.useEffect(()=>{(async()=>{try{const{data:Z,error:te}=await Pn.from("foods").select("*");if(te)throw te;console.log("Fetched meals from Supabase 'foods' table:",Z),f(Z),Z.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(Z){console.error("Error fetching meals:",Z)}})()},[]),I.useEffect(()=>{(async()=>{if(t)try{const{data:Z,error:te}=await Pn.from("nutrition_plans").select("*");if(te)throw te;console.log("Fetched nutrition plans from Supabase:",Z),v(Z)}catch(Z){console.error("Error fetching nutrition plans:",Z)}})()},[t]);const W=d.reduce((J,Z)=>{const te=Z.category||"Misc";return J[te]||(J[te]=[]),J[te].push(Z),J},{}),F=["Meat","Fruit","Vegetable","Starch","Misc"],q=["Breakfast","Lunch","Dinner","Snacks"],B=J=>{const Z=[...S];Z[J]=!Z[J],j(Z)},V=(J,Z)=>{if(d.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const te=[..._];te[J].days[Z].meals.push({name:d[0].name,grams:d[0].portion||100,referencePortion:d[0].portion||100,macros:d[0].macros,mealTime:"Breakfast"}),b(te)},A=(J,Z,te,$,Q)=>{const fe=[..._],ye=fe[J].days[Z].meals[te];if($==="name"){const ie=d.find(ne=>ne.name===Q);ye.name=Q,ye.grams=ie.portion||100,ye.referencePortion=ie.portion||100,ye.macros=ie.macros}else ye[$]=$==="grams"?Number(Q):Q;b(fe)},E=(J,Z,te,$)=>{const Q=[..._];Q[J].days[Z].macros[te]=Number($),b(Q)},C=(J,Z)=>{const te=[..._],$=te[J].days[Z],Q={...$.meals[$.meals.length-1]};Q.name&&($.loggedMeals[Q.mealTime].push(Q),$.meals[$.meals.length-1]={name:d[0].name,grams:d[0].portion||100,referencePortion:d[0].portion||100,macros:d[0].macros,mealTime:"Breakfast"},b(te))},R=(J,Z,te,$,Q)=>{D({weekIndex:J,dayIndex:Z,mealTime:te,mealIndex:$,meal:Q})},M=()=>{if(!P)return;const{weekIndex:J,dayIndex:Z,mealTime:te,mealIndex:$,meal:Q}=P,fe=[..._];fe[J].days[Z].loggedMeals[te][$]=Q,b(fe),D(null)},z=(J,Z,te,$)=>{const Q=[..._];Q[J].days[Z].loggedMeals[te].splice($,1),b(Q)},O=J=>Object.values(J).flat().reduce((te,$)=>{const Q=$.grams/$.referencePortion;return{protein:te.protein+$.macros.protein*Q,carbs:te.carbs+$.macros.carbs*Q,fats:te.fats+$.macros.fats*Q}},{protein:0,carbs:0,fats:0}),se=(J,Z)=>({protein:J.protein>=Z.protein,carbs:J.carbs>=Z.carbs,fats:J.fats>=Z.fats}),pe=J=>{const Z=new Date(l);return Z.setDate(Z.getDate()+J*7),Z.toLocaleDateString()},Ne=(J,Z)=>{const te=new Date(l);return te.setDate(te.getDate()+J*7+Z),te.toLocaleDateString()},we=async J=>{if(J.preventDefault(),!t){alert("Please log in to save a nutrition plan."),n("/login");return}try{const Z={user_id:t.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(_)},{data:te,error:$}=await Pn.from("nutrition_plans").insert(Z).select();if($)throw $;n(`/nutrition-plan/${te[0].id}`)}catch(Z){console.error("Error saving nutrition plan:",Z),alert("Failed to save nutrition plan. Please try again.")}};return r?m.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Loading..."}):m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),g.length>0&&m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(J=>m.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>n(`/nutrition-plan/${J.id}`),children:[m.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:J.name}),m.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",J.start_date]})]},J.id))})]}),m.jsxs("form",{onSubmit:we,children:[m.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),m.jsx("input",{type:"text",value:s,onChange:J=>o(J.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),m.jsx("input",{type:"date",value:l,onChange:J=>u(J.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:_.map((J,Z)=>m.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[m.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>B(Z),children:[m.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",J.week," ",m.jsxs("span",{className:"text-sm font-normal",children:["(",pe(Z),")"]})]}),S[Z]?m.jsx(pv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):m.jsx(fv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),S[Z]&&m.jsx("div",{className:"mt-6 space-y-6",children:J.days.map((te,$)=>m.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[te.day," ",m.jsxs("span",{className:"text-sm font-normal",children:["(",Ne(Z,$),")"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),m.jsx("input",{type:"number",value:te.macros.protein,onChange:Q=>E(Z,$,"protein",Q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),m.jsx("input",{type:"number",value:te.macros.carbs,onChange:Q=>E(Z,$,"carbs",Q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),m.jsx("input",{type:"number",value:te.macros.fats,onChange:Q=>E(Z,$,"fats",Q.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),d.length===0?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):te.meals.length>0?te.meals.map((Q,fe)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[m.jsx("select",{value:Q.name,onChange:ye=>A(Z,$,fe,"name",ye.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ye=>W[ye]&&m.jsx("optgroup",{label:ye,children:W[ye].map(ie=>m.jsx("option",{value:ie.name,children:ie.name},ie.id))},ye))}),m.jsx("input",{type:"number",value:Q.grams,onChange:ye=>A(Z,$,fe,"grams",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),m.jsx("select",{value:Q.mealTime,onChange:ye=>A(Z,$,fe,"mealTime",ye.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:q.map(ye=>m.jsx("option",{value:ye,children:ye},ye))}),m.jsx("button",{type:"button",onClick:()=>C(Z,$),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},fe)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),m.jsx("button",{type:"button",onClick:()=>V(Z,$),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(te.loggedMeals).every(Q=>te.loggedMeals[Q].length===0)?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):q.map(Q=>m.jsxs("div",{className:"mb-6",children:[m.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:Q}),te.loggedMeals[Q].length>0?m.jsx("ul",{className:"space-y-2",children:te.loggedMeals[Q].map((fe,ye)=>m.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[m.jsxs("span",{className:"text-sm",children:[fe.name,": ",fe.grams,"g"]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{type:"button",onClick:()=>R(Z,$,Q,ye,{...fe}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:m.jsx(b9,{className:"w-5 h-5"})}),m.jsx("button",{type:"button",onClick:()=>z(Z,$,Q,ye),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:m.jsx(T9,{className:"w-5 h-5"})})]})]},ye))}):m.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",Q.toLowerCase()," logged."]})]},Q)),m.jsxs("div",{className:"mt-6",children:[m.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const Q=O(te.loggedMeals),fe=se(Q,te.macros);return m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${fe.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Q.protein/te.macros.protein*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[Q.protein.toFixed(1),"g /"," ",te.macros.protein,"g"]}),fe.protein?m.jsx(rl,{className:"w-5 h-5 text-green-500"}):m.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${fe.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Q.carbs/te.macros.carbs*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[Q.carbs.toFixed(1),"g /"," ",te.macros.carbs,"g"]}),fe.carbs?m.jsx(rl,{className:"w-5 h-5 text-green-500"}):m.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${fe.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Q.fats/te.macros.fats*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[Q.fats.toFixed(1),"g /"," ",te.macros.fats,"g"]}),fe.fats?m.jsx(rl,{className:"w-5 h-5 text-green-500"}):m.jsx(sl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},$))})]},Z))}),m.jsx("div",{className:"mt-12 max-w-md mx-auto",children:m.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),P&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:m.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[m.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),m.jsx("select",{value:P.meal.name,onChange:J=>{const Z=d.find(te=>te.name===J.target.value);D({...P,meal:{...P.meal,name:J.target.value,grams:Z.portion||100,referencePortion:Z.portion||100,macros:Z.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(J=>W[J]&&m.jsx("optgroup",{label:J,children:W[J].map(Z=>m.jsx("option",{value:Z.name,children:Z.name},Z.id))},J))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),m.jsx("input",{type:"number",value:P.meal.grams,onChange:J=>D({...P,meal:{...P.meal,grams:Number(J.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),m.jsx("select",{value:P.meal.mealTime,onChange:J=>D({...P,meal:{...P.meal,mealTime:J.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:q.map(J=>m.jsx("option",{value:J,children:J},J))})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{type:"button",onClick:M,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),m.jsx("button",{type:"button",onClick:()=>D(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},A9=()=>{const{id:n}=ff(),{isDarkMode:e}=I.useContext(Je),[t,r]=I.useState(null),[s,o]=I.useState([]);I.useEffect(()=>{(async()=>{try{const{data:b,error:S}=await Pn.from("nutrition_plans").select("*").eq("id",n).single();if(S)throw S;r({...b,weeks:JSON.parse(b.weeks)}),o(Array(JSON.parse(b.weeks).length).fill(!1))}catch(b){console.error("Error fetching nutrition plan:",b)}})()},[n]);const l=_=>{const b=[...s];b[_]=!b[_],o(b)},u=_=>Object.values(_).flat().reduce((S,j)=>{const P=j.grams/j.referencePortion;return{protein:S.protein+j.macros.protein*P,carbs:S.carbs+j.macros.carbs*P,fats:S.fats+j.macros.fats*P}},{protein:0,carbs:0,fats:0}),d=(_,b)=>({protein:_.protein>=b.protein,carbs:_.carbs>=b.carbs,fats:_.fats>=b.fats}),f=_=>{const b=new Date(t.start_date);return b.setDate(b.getDate()+_*7),b.toLocaleDateString()},g=(_,b)=>{const S=new Date(t.start_date);return S.setDate(S.getDate()+_*7+b),S.toLocaleDateString()};if(!t)return m.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Loading..."});const v=["Breakfast","Lunch","Dinner","Snacks"];return m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:t.name}),m.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(t.start_date).toLocaleDateString()]}),m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:t.weeks.map((_,b)=>m.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[m.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>l(b),children:[m.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",_.week," ",m.jsxs("span",{className:"text-sm font-normal",children:["(",f(b),")"]})]}),s[b]?m.jsx(pv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):m.jsx(fv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),s[b]&&m.jsx("div",{className:"mt-6 space-y-6",children:_.days.map((S,j)=>m.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[S.day," ",m.jsxs("span",{className:"text-sm font-normal",children:["(",g(b,j),")"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),m.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[S.macros.protein,"g"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),m.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[S.macros.carbs,"g"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),m.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[S.macros.fats,"g"]})]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(S.loggedMeals).every(P=>S.loggedMeals[P].length===0)?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):v.map(P=>m.jsxs("div",{className:"mb-6",children:[m.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:P}),S.loggedMeals[P].length>0?m.jsx("ul",{className:"space-y-2",children:S.loggedMeals[P].map((D,W)=>m.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:m.jsxs("span",{className:"text-sm",children:[D.name,": ",D.grams,"g"]})},W))}):m.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",P.toLowerCase()," logged."]})]},P)),m.jsxs("div",{className:"mt-6",children:[m.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const P=u(S.loggedMeals),D=d(P,S.macros);return m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${D.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(P.protein/S.macros.protein*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[P.protein.toFixed(1),"g /"," ",S.macros.protein,"g"]}),D.protein?m.jsx(rl,{className:"w-5 h-5 text-green-500"}):m.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${D.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(P.carbs/S.macros.carbs*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[P.carbs.toFixed(1),"g /"," ",S.macros.carbs,"g"]}),D.carbs?m.jsx(rl,{className:"w-5 h-5 text-green-500"}):m.jsx(sl,{className:"w-5 h-5 text-red-500"})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${D.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(P.fats/S.macros.fats*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[P.fats.toFixed(1),"g /"," ",S.macros.fats,"g"]}),D.fats?m.jsx(rl,{className:"w-5 h-5 text-green-500"}):m.jsx(sl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},j))})]},b))})]})},I9=()=>{const[n,e]=I.useState(""),[t,r]=I.useState(""),[s,o]=I.useState(null),[l,u]=I.useState(!1),{login:d}=I.useContext(Oi),{isDarkMode:f}=I.useContext(Je),g=dn(),v=async _=>{var b,S;_.preventDefault(),o(null),u(!0);try{await d(n,t);const j=((S=(b=location.state)==null?void 0:b.from)==null?void 0:S.pathname)||"/profile";g(j,{replace:!0})}catch(j){o(j.message),console.error("Login error:",j.message)}finally{u(!1)}};return m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${f?"text-red-400":"text-red-800"}`,children:"Login"}),m.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${f?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[m.jsxs("form",{onSubmit:v,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${f?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),m.jsx("input",{type:"email",value:n,onChange:_=>e(_.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${f?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${f?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),m.jsx("input",{type:"password",value:t,onChange:_=>r(_.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${f?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&m.jsx("p",{className:`text-center text-sm mb-4 ${f?"text-red-400":"text-red-800"}`,children:s}),m.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${f?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?m.jsxs(m.Fragment,{children:[m.jsx(V2,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),m.jsx("div",{className:"mt-4 text-center",children:m.jsx(tt,{to:"/forgot-password",className:`text-sm hover:underline ${f?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),m.jsx("div",{className:"mt-2 text-center",children:m.jsxs("p",{className:`text-sm ${f?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",m.jsx(tt,{to:"/signup",className:`hover:underline ${f?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},R9=()=>{var j,P,D;const{user:n,loading:e,refreshUser:t}=I.useContext(Oi),{isDarkMode:r}=I.useContext(Je),s=dn(),[o,l]=I.useState(((j=n==null?void 0:n.user_metadata)==null?void 0:j.displayName)||""),[u,d]=I.useState([]),[f,g]=I.useState(null),[v,_]=I.useState(null);if(I.useEffect(()=>{(async()=>{if(n)try{const{data:F,error:q}=await Pn.from("nutrition_plans").select("*").eq("user_id",n.id);if(q)throw q;d(F||[])}catch(F){console.error("Error fetching nutrition plans:",F.message)}})()},[n]),e)return m.jsx("div",{children:"Loading..."});if(!n)return s("/login"),null;const b=async W=>{W.preventDefault(),g(null),_(null);try{const{error:F}=await Pn.auth.updateUser({data:{displayName:o}});if(F)throw F;_("Profile updated successfully!"),await t()}catch(F){g("Failed to update profile. Please try again."),console.error("Update profile error:",F.message)}},S=(P=n==null?void 0:n.user_metadata)!=null&&P.displayName?n.user_metadata.displayName.charAt(0).toUpperCase()+n.user_metadata.displayName.slice(1):"User";return m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[S," - Dashboard "]}),m.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",S,"!"]}),m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Email:"})," ",n.email]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Username:"})," ",((D=n.user_metadata)==null?void 0:D.displayName)||"Not set"]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(n.created_at).toLocaleDateString()]}),m.jsxs("p",{children:[m.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(n.updated_at).toLocaleDateString()]}),n.user_metadata&&Object.keys(n.user_metadata).length>0?m.jsxs("div",{children:[m.jsx("span",{className:"font-medium",children:"Additional Info:"}),m.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(n.user_metadata).map(([W,F])=>m.jsxs("li",{children:[W,": ",F]},W))})]}):m.jsx("p",{children:"No additional user metadata available."})]})]}),m.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),u.length>0?m.jsx("ul",{className:"space-y-2",children:u.map(W=>m.jsx("li",{children:m.jsx(Link,{to:`/nutrition-plan/${W.id}`,className:"hover:text-red-600 transition-colors duration-200",children:W.name||`Plan ${W.id}`})},W.id))}):m.jsx("p",{children:"No nutrition plans found."})]}),m.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),m.jsxs("form",{onSubmit:b,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),m.jsx("input",{type:"text",value:o,onChange:W=>l(W.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),f&&m.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:f}),v&&m.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:v}),m.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),m.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[m.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),m.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),m.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),m.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},N9=()=>{const{user:n,loading:e}=I.useContext(Oi),t=Zr();return e?m.jsx("div",{children:"Loading..."}):n?m.jsx(xT,{}):m.jsx(P1,{to:"/login",state:{from:t},replace:!0})},Je=I.createContext();function j9(){const[n,e]=I.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});I.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(n))},[n]);const t=()=>e(s=>!s),r="/aussie-gut-pack/";return console.log("Basename:",r),m.jsx(L8,{children:m.jsx(T2,{children:m.jsx(Je.Provider,{value:{isDarkMode:n,toggleTheme:t},children:m.jsx(eR,{basename:r,children:m.jsx(gf,{children:m.jsx(mf,{classNames:"fade",timeout:300,children:m.jsx(I1,{children:m.jsxs(Qe,{path:"/",element:m.jsx($2,{}),children:[m.jsx(Qe,{index:!0,element:m.jsx(O8,{})}),m.jsx(Qe,{path:"products",element:m.jsx(M8,{})}),m.jsx(Qe,{path:"cart",element:m.jsx(V8,{})}),m.jsx(Qe,{path:"checkout",element:m.jsx($8,{})}),m.jsx(Qe,{path:"gut-health",element:m.jsx(F8,{})}),m.jsx(Qe,{path:"gut-health/:id",element:m.jsx(U8,{})}),m.jsx(Qe,{path:"purchase",element:m.jsx(z8,{})}),m.jsx(Qe,{path:"blog",element:m.jsx(W8,{})}),m.jsx(Qe,{path:"blog/:id",element:m.jsx(H8,{})}),m.jsx(Qe,{path:"faq",element:m.jsx(K8,{})}),m.jsx(Qe,{path:"contact",element:m.jsx(a9,{})}),m.jsx(Qe,{path:"admin",element:m.jsx(l9,{})}),m.jsx(Qe,{path:"admin/home",element:m.jsx(u9,{})}),m.jsx(Qe,{path:"admin/blog",element:m.jsx(c9,{})}),m.jsx(Qe,{path:"admin/products",element:m.jsx(d9,{})}),m.jsx(Qe,{path:"fitness-tracker",element:m.jsx(h9,{})}),m.jsx(Qe,{path:"fitness-tracker/plan/:id",element:m.jsx(f9,{})}),m.jsx(Qe,{path:"fitness-tracker/create-custom-plan",element:m.jsx(S9,{})}),m.jsx(Qe,{path:"fitness-tracker/log",element:m.jsx(k9,{})}),m.jsx(Qe,{path:"fitness-tracker/history",element:m.jsx(C9,{})}),m.jsx(Qe,{path:"nutrition",element:m.jsx(P9,{})}),m.jsx(Qe,{path:"nutrition-plan/:id",element:m.jsx(A9,{})}),m.jsx(Qe,{path:"login",element:m.jsx(I9,{})}),m.jsx(Qe,{element:m.jsx(N9,{}),children:m.jsx(Qe,{path:"profile",element:m.jsx(R9,{})})}),m.jsx(Qe,{path:"*",element:m.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})}console.log("Main.jsx is running");MI.createRoot(document.getElementById("root")).render(m.jsx(jt.StrictMode,{children:m.jsx(j9,{})}));export{df as g};
