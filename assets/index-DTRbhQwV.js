(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function ig(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tp={exports:{}},Bl={},Sp={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ix;function xP(){if(ix)return Me;ix=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function _(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,j={};function N(B,J,ve){this.props=B,this.context=J,this.refs=j,this.updater=ve||C}N.prototype.isReactComponent={},N.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},N.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function L(){}L.prototype=N.prototype;function H(B,J,ve){this.props=B,this.context=J,this.refs=j,this.updater=ve||C}var $=H.prototype=new L;$.constructor=H,R($,N.prototype),$.isPureReactComponent=!0;var q=Array.isArray,W=Object.prototype.hasOwnProperty,O={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function E(B,J,ve){var je,ce={},ne=null,he=null;if(J!=null)for(je in J.ref!==void 0&&(he=J.ref),J.key!==void 0&&(ne=""+J.key),J)W.call(J,je)&&!k.hasOwnProperty(je)&&(ce[je]=J[je]);var Te=arguments.length-2;if(Te===1)ce.children=ve;else if(1<Te){for(var Ve=Array(Te),pt=0;pt<Te;pt++)Ve[pt]=arguments[pt+2];ce.children=Ve}if(B&&B.defaultProps)for(je in Te=B.defaultProps,Te)ce[je]===void 0&&(ce[je]=Te[je]);return{$$typeof:t,type:B,key:ne,ref:he,props:ce,_owner:O.current}}function S(B,J){return{$$typeof:t,type:B.type,key:J,ref:B.ref,props:B.props,_owner:B._owner}}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function V(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ve){return J[ve]})}var U=/\/+/g;function D(B,J){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):J.toString(36)}function ie(B,J,ve,je,ce){var ne=typeof B;(ne==="undefined"||ne==="boolean")&&(B=null);var he=!1;if(B===null)he=!0;else switch(ne){case"string":case"number":he=!0;break;case"object":switch(B.$$typeof){case t:case e:he=!0}}if(he)return he=B,ce=ce(he),B=je===""?"."+D(he,0):je,q(ce)?(ve="",B!=null&&(ve=B.replace(U,"$&/")+"/"),ie(ce,J,ve,"",function(pt){return pt})):ce!=null&&(I(ce)&&(ce=S(ce,ve+(!ce.key||he&&he.key===ce.key?"":(""+ce.key).replace(U,"$&/")+"/")+B)),J.push(ce)),1;if(he=0,je=je===""?".":je+":",q(B))for(var Te=0;Te<B.length;Te++){ne=B[Te];var Ve=je+D(ne,Te);he+=ie(ne,J,ve,Ve,ce)}else if(Ve=_(B),typeof Ve=="function")for(B=Ve.call(B),Te=0;!(ne=B.next()).done;)ne=ne.value,Ve=je+D(ne,Te++),he+=ie(ne,J,ve,Ve,ce);else if(ne==="object")throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return he}function me(B,J,ve){if(B==null)return B;var je=[],ce=0;return ie(B,je,"","",function(ne){return J.call(ve,ne,ce++)}),je}function ae(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(ve){(B._status===0||B._status===-1)&&(B._status=1,B._result=ve)},function(ve){(B._status===0||B._status===-1)&&(B._status=2,B._result=ve)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var te={current:null},Y={transition:null},re={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:Y,ReactCurrentOwner:O};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:me,forEach:function(B,J,ve){me(B,function(){J.apply(this,arguments)},ve)},count:function(B){var J=0;return me(B,function(){J++}),J},toArray:function(B){return me(B,function(J){return J})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Me.Component=N,Me.Fragment=n,Me.Profiler=i,Me.PureComponent=H,Me.StrictMode=r,Me.Suspense=d,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Me.act=ee,Me.cloneElement=function(B,J,ve){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var je=R({},B.props),ce=B.key,ne=B.ref,he=B._owner;if(J!=null){if(J.ref!==void 0&&(ne=J.ref,he=O.current),J.key!==void 0&&(ce=""+J.key),B.type&&B.type.defaultProps)var Te=B.type.defaultProps;for(Ve in J)W.call(J,Ve)&&!k.hasOwnProperty(Ve)&&(je[Ve]=J[Ve]===void 0&&Te!==void 0?Te[Ve]:J[Ve])}var Ve=arguments.length-2;if(Ve===1)je.children=ve;else if(1<Ve){Te=Array(Ve);for(var pt=0;pt<Ve;pt++)Te[pt]=arguments[pt+2];je.children=Te}return{$$typeof:t,type:B.type,key:ce,ref:ne,props:je,_owner:he}},Me.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Me.createElement=E,Me.createFactory=function(B){var J=E.bind(null,B);return J.type=B,J},Me.createRef=function(){return{current:null}},Me.forwardRef=function(B){return{$$typeof:c,render:B}},Me.isValidElement=I,Me.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:ae}},Me.memo=function(B,J){return{$$typeof:p,type:B,compare:J===void 0?null:J}},Me.startTransition=function(B){var J=Y.transition;Y.transition={};try{B()}finally{Y.transition=J}},Me.unstable_act=ee,Me.useCallback=function(B,J){return te.current.useCallback(B,J)},Me.useContext=function(B){return te.current.useContext(B)},Me.useDebugValue=function(){},Me.useDeferredValue=function(B){return te.current.useDeferredValue(B)},Me.useEffect=function(B,J){return te.current.useEffect(B,J)},Me.useId=function(){return te.current.useId()},Me.useImperativeHandle=function(B,J,ve){return te.current.useImperativeHandle(B,J,ve)},Me.useInsertionEffect=function(B,J){return te.current.useInsertionEffect(B,J)},Me.useLayoutEffect=function(B,J){return te.current.useLayoutEffect(B,J)},Me.useMemo=function(B,J){return te.current.useMemo(B,J)},Me.useReducer=function(B,J,ve){return te.current.useReducer(B,J,ve)},Me.useRef=function(B){return te.current.useRef(B)},Me.useState=function(B){return te.current.useState(B)},Me.useSyncExternalStore=function(B,J,ve){return te.current.useSyncExternalStore(B,J,ve)},Me.useTransition=function(){return te.current.useTransition()},Me.version="18.3.1",Me}var ox;function og(){return ox||(ox=1,Sp.exports=xP()),Sp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ax;function wP(){if(ax)return Bl;ax=1;var t=og(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,p){var y,w={},_=null,C=null;p!==void 0&&(_=""+p),d.key!==void 0&&(_=""+d.key),d.ref!==void 0&&(C=d.ref);for(y in d)r.call(d,y)&&!a.hasOwnProperty(y)&&(w[y]=d[y]);if(c&&c.defaultProps)for(y in d=c.defaultProps,d)w[y]===void 0&&(w[y]=d[y]);return{$$typeof:e,type:c,key:_,ref:C,props:w,_owner:i.current}}return Bl.Fragment=n,Bl.jsx=l,Bl.jsxs=l,Bl}var lx;function _P(){return lx||(lx=1,Tp.exports=wP()),Tp.exports}var m=_P(),P=og();const Yn=ig(P);var dd={},Cp={exports:{}},yn={},kp={exports:{}},Pp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ux;function EP(){return ux||(ux=1,function(t){function e(Y,re){var ee=Y.length;Y.push(re);e:for(;0<ee;){var B=ee-1>>>1,J=Y[B];if(0<i(J,re))Y[B]=re,Y[ee]=J,ee=B;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var re=Y[0],ee=Y.pop();if(ee!==re){Y[0]=ee;e:for(var B=0,J=Y.length,ve=J>>>1;B<ve;){var je=2*(B+1)-1,ce=Y[je],ne=je+1,he=Y[ne];if(0>i(ce,ee))ne<J&&0>i(he,ce)?(Y[B]=he,Y[ne]=ee,B=ne):(Y[B]=ce,Y[je]=ee,B=je);else if(ne<J&&0>i(he,ee))Y[B]=he,Y[ne]=ee,B=ne;else break e}}return re}function i(Y,re){var ee=Y.sortIndex-re.sortIndex;return ee!==0?ee:Y.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],p=[],y=1,w=null,_=3,C=!1,R=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(Y){for(var re=n(p);re!==null;){if(re.callback===null)r(p);else if(re.startTime<=Y)r(p),re.sortIndex=re.expirationTime,e(d,re);else break;re=n(p)}}function q(Y){if(j=!1,$(Y),!R)if(n(d)!==null)R=!0,ae(W);else{var re=n(p);re!==null&&te(q,re.startTime-Y)}}function W(Y,re){R=!1,j&&(j=!1,L(E),E=-1),C=!0;var ee=_;try{for($(re),w=n(d);w!==null&&(!(w.expirationTime>re)||Y&&!V());){var B=w.callback;if(typeof B=="function"){w.callback=null,_=w.priorityLevel;var J=B(w.expirationTime<=re);re=t.unstable_now(),typeof J=="function"?w.callback=J:w===n(d)&&r(d),$(re)}else r(d);w=n(d)}if(w!==null)var ve=!0;else{var je=n(p);je!==null&&te(q,je.startTime-re),ve=!1}return ve}finally{w=null,_=ee,C=!1}}var O=!1,k=null,E=-1,S=5,I=-1;function V(){return!(t.unstable_now()-I<S)}function U(){if(k!==null){var Y=t.unstable_now();I=Y;var re=!0;try{re=k(!0,Y)}finally{re?D():(O=!1,k=null)}}else O=!1}var D;if(typeof H=="function")D=function(){H(U)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,me=ie.port2;ie.port1.onmessage=U,D=function(){me.postMessage(null)}}else D=function(){N(U,0)};function ae(Y){k=Y,O||(O=!0,D())}function te(Y,re){E=N(function(){Y(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){R||C||(R=!0,ae(W))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(Y){switch(_){case 1:case 2:case 3:var re=3;break;default:re=_}var ee=_;_=re;try{return Y()}finally{_=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,re){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ee=_;_=Y;try{return re()}finally{_=ee}},t.unstable_scheduleCallback=function(Y,re,ee){var B=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?B+ee:B):ee=B,Y){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ee+J,Y={id:y++,callback:re,priorityLevel:Y,startTime:ee,expirationTime:J,sortIndex:-1},ee>B?(Y.sortIndex=ee,e(p,Y),n(d)===null&&Y===n(p)&&(j?(L(E),E=-1):j=!0,te(q,ee-B))):(Y.sortIndex=J,e(d,Y),R||C||(R=!0,ae(W))),Y},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(Y){var re=_;return function(){var ee=_;_=re;try{return Y.apply(this,arguments)}finally{_=ee}}}}(Pp)),Pp}var cx;function bP(){return cx||(cx=1,kp.exports=EP()),kp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dx;function TP(){if(dx)return yn;dx=1;var t=og(),e=bP();function n(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function _(s){return d.call(w,s)?!0:d.call(y,s)?!1:p.test(s)?w[s]=!0:(y[s]=!0,!1)}function C(s,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function R(s,o,u,f){if(o===null||typeof o>"u"||C(s,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(s,o,u,f,g,x,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=x,this.removeEmptyString=T}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){N[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];N[o]=new j(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){N[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){N[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){N[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){N[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){N[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){N[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){N[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function H(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(L,H);N[o]=new j(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(L,H);N[o]=new j(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(L,H);N[o]=new j(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){N[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),N.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){N[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function $(s,o,u,f){var g=N.hasOwnProperty(o)?N[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(R(o,u,g,f)&&(u=null),f||g===null?_(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?s.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?s.setAttributeNS(f,o,u):s.setAttribute(o,u))))}var q=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),O=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),Y=Symbol.iterator;function re(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Object.assign,B;function J(s){if(B===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+s}var ve=!1;function je(s,o){if(!s||ve)return"";ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(X){var f=X}Reflect.construct(s,[],o)}else{try{o.call()}catch(X){f=X}s.call(o.prototype)}else{try{throw Error()}catch(X){f=X}s()}}catch(X){if(X&&f&&typeof X.stack=="string"){for(var g=X.stack.split(`
`),x=f.stack.split(`
`),T=g.length-1,M=x.length-1;1<=T&&0<=M&&g[T]!==x[M];)M--;for(;1<=T&&0<=M;T--,M--)if(g[T]!==x[M]){if(T!==1||M!==1)do if(T--,M--,0>M||g[T]!==x[M]){var F=`
`+g[T].replace(" at new "," at ");return s.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",s.displayName)),F}while(1<=T&&0<=M);break}}}finally{ve=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?J(s):""}function ce(s){switch(s.tag){case 5:return J(s.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return s=je(s.type,!1),s;case 11:return s=je(s.type.render,!1),s;case 1:return s=je(s.type,!0),s;default:return""}}function ne(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case O:return"Portal";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case ie:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case I:return(s._context.displayName||"Context")+".Provider";case U:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case me:return o=s.displayName||null,o!==null?o:ne(s.type)||"Memo";case ae:o=s._payload,s=s._init;try{return ne(s(o))}catch{}}return null}function he(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(o);case 8:return o===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Te(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ve(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function pt(s){var o=Ve(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,x=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(T){f=""+T,x.call(this,T)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Vn(s){s._valueTracker||(s._valueTracker=pt(s))}function Kr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return s&&(f=Ve(s)?s.checked?"true":"false":s.value),s=f,s!==u?(o.setValue(s),!0):!1}function Zn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function er(s,o){var u=o.checked;return ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Gr(s,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Te(o.value!=null?o.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Nt(s,o){o=o.checked,o!=null&&$(s,"checked",o,!1)}function Qr(s,o){Nt(s,o);var u=Te(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?bo(s,o.type,u):o.hasOwnProperty("defaultValue")&&bo(s,o.type,Te(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Yu(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function bo(s,o,u){(o!=="number"||Zn(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Yr=Array.isArray;function Xr(s,o,u,f){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&f&&(s[u].defaultSelected=!0)}else{for(u=""+Te(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,f&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function Ya(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function To(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(Yr(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:Te(u)}}function So(s,o){var u=Te(o.value),f=Te(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function Xa(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function bt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tt(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?bt(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Jr,Ja=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return s(o,u,f,g)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Jr=Jr||document.createElement("div"),Jr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Jr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ks(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ci=["Webkit","ms","Moz","O"];Object.keys(Si).forEach(function(s){Ci.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Si[o]=Si[s]})});function Za(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Si.hasOwnProperty(s)&&Si[s]?(""+o).trim():o+"px"}function el(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Za(u,o[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,g):s[u]=g}}var tl=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nl(s,o){if(o){if(tl[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function rl(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ki=null;function Co(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ko=null,On=null,Er=null;function Po(s){if(s=kl(s)){if(typeof ko!="function")throw Error(n(280));var o=s.stateNode;o&&(o=Cc(o),ko(s.stateNode,s.type,o))}}function br(s){On?Er?Er.push(s):Er=[s]:On=s}function sl(){if(On){var s=On,o=Er;if(Er=On=null,Po(s),o)for(s=0;s<o.length;s++)Po(o[s])}}function Pi(s,o){return s(o)}function il(){}var Zr=!1;function ol(s,o,u){if(Zr)return s(o,u);Zr=!0;try{return Pi(s,o,u)}finally{Zr=!1,(On!==null||Er!==null)&&(il(),sl())}}function mt(s,o){var u=s.stateNode;if(u===null)return null;var f=Cc(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Io=!1;if(c)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){Io=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{Io=!1}function Ii(s,o,u,f,g,x,T,M,F){var X=Array.prototype.slice.call(arguments,3);try{o.apply(u,X)}catch(le){this.onError(le)}}var Ai=!1,Ao=null,nr=!1,al=null,Xh={onError:function(s){Ai=!0,Ao=s}};function Ro(s,o,u,f,g,x,T,M,F){Ai=!1,Ao=null,Ii.apply(Xh,arguments)}function Xu(s,o,u,f,g,x,T,M,F){if(Ro.apply(this,arguments),Ai){if(Ai){var X=Ao;Ai=!1,Ao=null}else throw Error(n(198));nr||(nr=!0,al=X)}}function rr(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Ri(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function sr(s){if(rr(s)!==s)throw Error(n(188))}function Ju(s){var o=s.alternate;if(!o){if(o=rr(s),o===null)throw Error(n(188));return o!==s?null:s}for(var u=s,f=o;;){var g=u.return;if(g===null)break;var x=g.alternate;if(x===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===x.child){for(x=g.child;x;){if(x===u)return sr(g),s;if(x===f)return sr(g),o;x=x.sibling}throw Error(n(188))}if(u.return!==f.return)u=g,f=x;else{for(var T=!1,M=g.child;M;){if(M===u){T=!0,u=g,f=x;break}if(M===f){T=!0,f=g,u=x;break}M=M.sibling}if(!T){for(M=x.child;M;){if(M===u){T=!0,u=x,f=g;break}if(M===f){T=!0,f=x,u=g;break}M=M.sibling}if(!T)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:o}function ll(s){return s=Ju(s),s!==null?No(s):null}function No(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=No(s);if(o!==null)return o;s=s.sibling}return null}var Do=e.unstable_scheduleCallback,ul=e.unstable_cancelCallback,Zu=e.unstable_shouldYield,Jh=e.unstable_requestPaint,Qe=e.unstable_now,ec=e.unstable_getCurrentPriorityLevel,Ni=e.unstable_ImmediatePriority,Ps=e.unstable_UserBlockingPriority,Fn=e.unstable_NormalPriority,cl=e.unstable_LowPriority,tc=e.unstable_IdlePriority,Di=null,En=null;function nc(s){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(Di,s,void 0,(s.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:sc,dl=Math.log,rc=Math.LN2;function sc(s){return s>>>=0,s===0?32:31-(dl(s)/rc|0)|0}var jo=64,Lo=4194304;function Is(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ji(s,o){var u=s.pendingLanes;if(u===0)return 0;var f=0,g=s.suspendedLanes,x=s.pingedLanes,T=u&268435455;if(T!==0){var M=T&~g;M!==0?f=Is(M):(x&=T,x!==0&&(f=Is(x)))}else T=u&~g,T!==0?f=Is(T):x!==0&&(f=Is(x));if(f===0)return 0;if(o!==0&&o!==f&&!(o&g)&&(g=f&-f,x=o&-o,g>=x||g===16&&(x&4194240)!==0))return o;if(f&4&&(f|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)u=31-rn(o),g=1<<u,f|=s[u],o&=~g;return f}function Zh(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function es(s,o){for(var u=s.suspendedLanes,f=s.pingedLanes,g=s.expirationTimes,x=s.pendingLanes;0<x;){var T=31-rn(x),M=1<<T,F=g[T];F===-1?(!(M&u)||M&f)&&(g[T]=Zh(M,o)):F<=o&&(s.expiredLanes|=M),x&=~M}}function bn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Li(){var s=jo;return jo<<=1,!(jo&4194240)&&(jo=64),s}function As(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Rs(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-rn(o),s[o]=u}function Ke(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-rn(u),x=1<<g;o[g]=0,f[g]=-1,s[g]=-1,u&=~x}}function Ns(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var f=31-rn(u),g=1<<f;g&o|s[f]&o&&(s[f]|=o),u&=~g}}var $e=0;function Ds(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var ic,Mo,oc,ac,lc,hl=!1,Tr=[],Ot=null,ir=null,or=null,js=new Map,$n=new Map,Sr=[],ef="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uc(s,o){switch(s){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":js.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$n.delete(o.pointerId)}}function cn(s,o,u,f,g,x){return s===null||s.nativeEvent!==x?(s={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:x,targetContainers:[g]},o!==null&&(o=kl(o),o!==null&&Mo(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function tf(s,o,u,f,g){switch(o){case"focusin":return Ot=cn(Ot,s,o,u,f,g),!0;case"dragenter":return ir=cn(ir,s,o,u,f,g),!0;case"mouseover":return or=cn(or,s,o,u,f,g),!0;case"pointerover":var x=g.pointerId;return js.set(x,cn(js.get(x)||null,s,o,u,f,g)),!0;case"gotpointercapture":return x=g.pointerId,$n.set(x,cn($n.get(x)||null,s,o,u,f,g)),!0}return!1}function cc(s){var o=$i(s.target);if(o!==null){var u=rr(o);if(u!==null){if(o=u.tag,o===13){if(o=Ri(u),o!==null){s.blockedOn=o,lc(s.priority,function(){oc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function ts(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Vo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);ki=f,u.target.dispatchEvent(f),ki=null}else return o=kl(u),o!==null&&Mo(o),s.blockedOn=u,!1;o.shift()}return!0}function Mi(s,o,u){ts(s)&&u.delete(o)}function dc(){hl=!1,Ot!==null&&ts(Ot)&&(Ot=null),ir!==null&&ts(ir)&&(ir=null),or!==null&&ts(or)&&(or=null),js.forEach(Mi),$n.forEach(Mi)}function ar(s,o){s.blockedOn===o&&(s.blockedOn=null,hl||(hl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,dc)))}function lr(s){function o(g){return ar(g,s)}if(0<Tr.length){ar(Tr[0],s);for(var u=1;u<Tr.length;u++){var f=Tr[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Ot!==null&&ar(Ot,s),ir!==null&&ar(ir,s),or!==null&&ar(or,s),js.forEach(o),$n.forEach(o),u=0;u<Sr.length;u++)f=Sr[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<Sr.length&&(u=Sr[0],u.blockedOn===null);)cc(u),u.blockedOn===null&&Sr.shift()}var ns=q.ReactCurrentBatchConfig,Ls=!0;function tt(s,o,u,f){var g=$e,x=ns.transition;ns.transition=null;try{$e=1,fl(s,o,u,f)}finally{$e=g,ns.transition=x}}function nf(s,o,u,f){var g=$e,x=ns.transition;ns.transition=null;try{$e=4,fl(s,o,u,f)}finally{$e=g,ns.transition=x}}function fl(s,o,u,f){if(Ls){var g=Vo(s,o,u,f);if(g===null)pf(s,o,f,Vi,u),uc(s,f);else if(tf(g,s,o,u,f))f.stopPropagation();else if(uc(s,f),o&4&&-1<ef.indexOf(s)){for(;g!==null;){var x=kl(g);if(x!==null&&ic(x),x=Vo(s,o,u,f),x===null&&pf(s,o,f,Vi,u),x===g)break;g=x}g!==null&&f.stopPropagation()}else pf(s,o,f,null,u)}}var Vi=null;function Vo(s,o,u,f){if(Vi=null,s=Co(f),s=$i(s),s!==null)if(o=rr(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Ri(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Vi=s,null}function pl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case Ni:return 1;case Ps:return 4;case Fn:case cl:return 16;case tc:return 536870912;default:return 16}default:return 16}}var Tn=null,Oo=null,dn=null;function ml(){if(dn)return dn;var s,o=Oo,u=o.length,f,g="value"in Tn?Tn.value:Tn.textContent,x=g.length;for(s=0;s<u&&o[s]===g[s];s++);var T=u-s;for(f=1;f<=T&&o[u-f]===g[x-f];f++);return dn=g.slice(s,1<f?1-f:void 0)}function Fo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Cr(){return!0}function gl(){return!1}function Ft(s){function o(u,f,g,x,T){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Cr:gl,this.isPropagationStopped=gl,this}return ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),o}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=Ft(ur),kr=ee({},ur,{view:0,detail:0}),rf=Ft(kr),Uo,rs,Ms,Oi=ee({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ms&&(Ms&&s.type==="mousemove"?(Uo=s.screenX-Ms.screenX,rs=s.screenY-Ms.screenY):rs=Uo=0,Ms=s),Uo)},movementY:function(s){return"movementY"in s?s.movementY:rs}}),Bo=Ft(Oi),yl=ee({},Oi,{dataTransfer:0}),hc=Ft(yl),zo=ee({},kr,{relatedTarget:0}),Wo=Ft(zo),fc=ee({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),ss=Ft(fc),pc=ee({},ur,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),mc=Ft(pc),gc=ee({},ur,{data:0}),vl=Ft(gc),Ho={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vc(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=yc[s])?!!o[s]:!1}function Pr(){return vc}var h=ee({},kr,{key:function(s){if(s.key){var o=Ho[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Fo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?sn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pr,charCode:function(s){return s.type==="keypress"?Fo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Fo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v=Ft(h),b=ee({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),A=Ft(b),K=ee({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pr}),Z=Ft(K),pe=ee({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Ft(pe),St=ee({},Oi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Ft(St),Dt=[9,13,27,32],wt=c&&"CompositionEvent"in window,Un=null;c&&"documentMode"in document&&(Un=document.documentMode);var Sn=c&&"TextEvent"in window&&!Un,Fi=c&&(!wt||Un&&8<Un&&11>=Un),qo=" ",Z0=!1;function ey(s,o){switch(s){case"keyup":return Dt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ty(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ko=!1;function gk(s,o){switch(s){case"compositionend":return ty(o);case"keypress":return o.which!==32?null:(Z0=!0,qo);case"textInput":return s=o.data,s===qo&&Z0?null:s;default:return null}}function yk(s,o){if(Ko)return s==="compositionend"||!wt&&ey(s,o)?(s=ml(),dn=Oo=Tn=null,Ko=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Fi&&o.locale!=="ko"?null:o.data;default:return null}}var vk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!vk[s.type]:o==="textarea"}function ry(s,o,u,f){br(f),o=bc(o,"onChange"),0<o.length&&(u=new $o("onChange","change",null,u,f),s.push({event:u,listeners:o}))}var xl=null,wl=null;function xk(s){_y(s,0)}function xc(s){var o=Jo(s);if(Kr(o))return s}function wk(s,o){if(s==="change")return o}var sy=!1;if(c){var sf;if(c){var of="oninput"in document;if(!of){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),of=typeof iy.oninput=="function"}sf=of}else sf=!1;sy=sf&&(!document.documentMode||9<document.documentMode)}function oy(){xl&&(xl.detachEvent("onpropertychange",ay),wl=xl=null)}function ay(s){if(s.propertyName==="value"&&xc(wl)){var o=[];ry(o,wl,s,Co(s)),ol(xk,o)}}function _k(s,o,u){s==="focusin"?(oy(),xl=o,wl=u,xl.attachEvent("onpropertychange",ay)):s==="focusout"&&oy()}function Ek(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return xc(wl)}function bk(s,o){if(s==="click")return xc(o)}function Tk(s,o){if(s==="input"||s==="change")return xc(o)}function Sk(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var cr=typeof Object.is=="function"?Object.is:Sk;function _l(s,o){if(cr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!d.call(o,g)||!cr(s[g],o[g]))return!1}return!0}function ly(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function uy(s,o){var u=ly(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=o&&f>=o)return{node:u,offset:o-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ly(u)}}function cy(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?cy(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function dy(){for(var s=window,o=Zn();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Zn(s.document)}return o}function af(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Ck(s){var o=dy(),u=s.focusedElem,f=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&cy(u.ownerDocument.documentElement,u)){if(f!==null&&af(u)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,x=Math.min(f.start,g);f=f.end===void 0?x:Math.min(f.end,g),!s.extend&&x>f&&(g=f,f=x,x=g),g=uy(u,x);var T=uy(u,f);g&&T&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),x>f?(s.addRange(o),s.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var kk=c&&"documentMode"in document&&11>=document.documentMode,Go=null,lf=null,El=null,uf=!1;function hy(s,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;uf||Go==null||Go!==Zn(f)||(f=Go,"selectionStart"in f&&af(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),El&&_l(El,f)||(El=f,f=bc(lf,"onSelect"),0<f.length&&(o=new $o("onSelect","select",null,o,u),s.push({event:o,listeners:f}),o.target=Go)))}function wc(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Qo={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},cf={},fy={};c&&(fy=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function _c(s){if(cf[s])return cf[s];if(!Qo[s])return s;var o=Qo[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in fy)return cf[s]=o[u];return s}var py=_c("animationend"),my=_c("animationiteration"),gy=_c("animationstart"),yy=_c("transitionend"),vy=new Map,xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(s,o){vy.set(s,o),a(o,[s])}for(var df=0;df<xy.length;df++){var hf=xy[df],Pk=hf.toLowerCase(),Ik=hf[0].toUpperCase()+hf.slice(1);Vs(Pk,"on"+Ik)}Vs(py,"onAnimationEnd"),Vs(my,"onAnimationIteration"),Vs(gy,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(yy,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ak=new Set("cancel close invalid load scroll toggle".split(" ").concat(bl));function wy(s,o,u){var f=s.type||"unknown-event";s.currentTarget=u,Xu(f,o,void 0,s),s.currentTarget=null}function _y(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],g=f.event;f=f.listeners;e:{var x=void 0;if(o)for(var T=f.length-1;0<=T;T--){var M=f[T],F=M.instance,X=M.currentTarget;if(M=M.listener,F!==x&&g.isPropagationStopped())break e;wy(g,M,X),x=F}else for(T=0;T<f.length;T++){if(M=f[T],F=M.instance,X=M.currentTarget,M=M.listener,F!==x&&g.isPropagationStopped())break e;wy(g,M,X),x=F}}}if(nr)throw s=al,nr=!1,al=null,s}function Ze(s,o){var u=o[wf];u===void 0&&(u=o[wf]=new Set);var f=s+"__bubble";u.has(f)||(Ey(o,s,2,!1),u.add(f))}function ff(s,o,u){var f=0;o&&(f|=4),Ey(u,s,f,o)}var Ec="_reactListening"+Math.random().toString(36).slice(2);function Tl(s){if(!s[Ec]){s[Ec]=!0,r.forEach(function(u){u!=="selectionchange"&&(Ak.has(u)||ff(u,!1,s),ff(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ec]||(o[Ec]=!0,ff("selectionchange",!1,o))}}function Ey(s,o,u,f){switch(pl(o)){case 1:var g=tt;break;case 4:g=nf;break;default:g=fl}u=g.bind(null,o,u,s),g=void 0,!Io||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function pf(s,o,u,f,g){var x=f;if(!(o&1)&&!(o&2)&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var M=f.stateNode.containerInfo;if(M===g||M.nodeType===8&&M.parentNode===g)break;if(T===4)for(T=f.return;T!==null;){var F=T.tag;if((F===3||F===4)&&(F=T.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;T=T.return}for(;M!==null;){if(T=$i(M),T===null)return;if(F=T.tag,F===5||F===6){f=x=T;continue e}M=M.parentNode}}f=f.return}ol(function(){var X=x,le=Co(u),de=[];e:{var oe=vy.get(s);if(oe!==void 0){var ge=$o,we=s;switch(s){case"keypress":if(Fo(u)===0)break e;case"keydown":case"keyup":ge=v;break;case"focusin":we="focus",ge=Wo;break;case"focusout":we="blur",ge=Wo;break;case"beforeblur":case"afterblur":ge=Wo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Z;break;case py:case my:case gy:ge=ss;break;case yy:ge=qe;break;case"scroll":ge=rf;break;case"wheel":ge=Ue;break;case"copy":case"cut":case"paste":ge=mc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=A}var _e=(o&4)!==0,gt=!_e&&s==="scroll",G=_e?oe!==null?oe+"Capture":null:oe;_e=[];for(var z=X,Q;z!==null;){Q=z;var fe=Q.stateNode;if(Q.tag===5&&fe!==null&&(Q=fe,G!==null&&(fe=mt(z,G),fe!=null&&_e.push(Sl(z,fe,Q)))),gt)break;z=z.return}0<_e.length&&(oe=new ge(oe,we,null,u,le),de.push({event:oe,listeners:_e}))}}if(!(o&7)){e:{if(oe=s==="mouseover"||s==="pointerover",ge=s==="mouseout"||s==="pointerout",oe&&u!==ki&&(we=u.relatedTarget||u.fromElement)&&($i(we)||we[is]))break e;if((ge||oe)&&(oe=le.window===le?le:(oe=le.ownerDocument)?oe.defaultView||oe.parentWindow:window,ge?(we=u.relatedTarget||u.toElement,ge=X,we=we?$i(we):null,we!==null&&(gt=rr(we),we!==gt||we.tag!==5&&we.tag!==6)&&(we=null)):(ge=null,we=X),ge!==we)){if(_e=Bo,fe="onMouseLeave",G="onMouseEnter",z="mouse",(s==="pointerout"||s==="pointerover")&&(_e=A,fe="onPointerLeave",G="onPointerEnter",z="pointer"),gt=ge==null?oe:Jo(ge),Q=we==null?oe:Jo(we),oe=new _e(fe,z+"leave",ge,u,le),oe.target=gt,oe.relatedTarget=Q,fe=null,$i(le)===X&&(_e=new _e(G,z+"enter",we,u,le),_e.target=Q,_e.relatedTarget=gt,fe=_e),gt=fe,ge&&we)t:{for(_e=ge,G=we,z=0,Q=_e;Q;Q=Yo(Q))z++;for(Q=0,fe=G;fe;fe=Yo(fe))Q++;for(;0<z-Q;)_e=Yo(_e),z--;for(;0<Q-z;)G=Yo(G),Q--;for(;z--;){if(_e===G||G!==null&&_e===G.alternate)break t;_e=Yo(_e),G=Yo(G)}_e=null}else _e=null;ge!==null&&by(de,oe,ge,_e,!1),we!==null&&gt!==null&&by(de,gt,we,_e,!0)}}e:{if(oe=X?Jo(X):window,ge=oe.nodeName&&oe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&oe.type==="file")var Ee=wk;else if(ny(oe))if(sy)Ee=Tk;else{Ee=Ek;var Se=_k}else(ge=oe.nodeName)&&ge.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Ee=bk);if(Ee&&(Ee=Ee(s,X))){ry(de,Ee,u,le);break e}Se&&Se(s,oe,X),s==="focusout"&&(Se=oe._wrapperState)&&Se.controlled&&oe.type==="number"&&bo(oe,"number",oe.value)}switch(Se=X?Jo(X):window,s){case"focusin":(ny(Se)||Se.contentEditable==="true")&&(Go=Se,lf=X,El=null);break;case"focusout":El=lf=Go=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,hy(de,u,le);break;case"selectionchange":if(kk)break;case"keydown":case"keyup":hy(de,u,le)}var Ce;if(wt)e:{switch(s){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Ko?ey(s,u)&&(Re="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Re="onCompositionStart");Re&&(Fi&&u.locale!=="ko"&&(Ko||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Ko&&(Ce=ml()):(Tn=le,Oo="value"in Tn?Tn.value:Tn.textContent,Ko=!0)),Se=bc(X,Re),0<Se.length&&(Re=new vl(Re,s,null,u,le),de.push({event:Re,listeners:Se}),Ce?Re.data=Ce:(Ce=ty(u),Ce!==null&&(Re.data=Ce)))),(Ce=Sn?gk(s,u):yk(s,u))&&(X=bc(X,"onBeforeInput"),0<X.length&&(le=new vl("onBeforeInput","beforeinput",null,u,le),de.push({event:le,listeners:X}),le.data=Ce))}_y(de,o)})}function Sl(s,o,u){return{instance:s,listener:o,currentTarget:u}}function bc(s,o){for(var u=o+"Capture",f=[];s!==null;){var g=s,x=g.stateNode;g.tag===5&&x!==null&&(g=x,x=mt(s,u),x!=null&&f.unshift(Sl(s,x,g)),x=mt(s,o),x!=null&&f.push(Sl(s,x,g))),s=s.return}return f}function Yo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function by(s,o,u,f,g){for(var x=o._reactName,T=[];u!==null&&u!==f;){var M=u,F=M.alternate,X=M.stateNode;if(F!==null&&F===f)break;M.tag===5&&X!==null&&(M=X,g?(F=mt(u,x),F!=null&&T.unshift(Sl(u,F,M))):g||(F=mt(u,x),F!=null&&T.push(Sl(u,F,M)))),u=u.return}T.length!==0&&s.push({event:o,listeners:T})}var Rk=/\r\n?/g,Nk=/\u0000|\uFFFD/g;function Ty(s){return(typeof s=="string"?s:""+s).replace(Rk,`
`).replace(Nk,"")}function Tc(s,o,u){if(o=Ty(o),Ty(s)!==o&&u)throw Error(n(425))}function Sc(){}var mf=null,gf=null;function yf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var vf=typeof setTimeout=="function"?setTimeout:void 0,Dk=typeof clearTimeout=="function"?clearTimeout:void 0,Sy=typeof Promise=="function"?Promise:void 0,jk=typeof queueMicrotask=="function"?queueMicrotask:typeof Sy<"u"?function(s){return Sy.resolve(null).then(s).catch(Lk)}:vf;function Lk(s){setTimeout(function(){throw s})}function xf(s,o){var u=o,f=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){s.removeChild(g),lr(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);lr(o)}function Os(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Cy(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Xo=Math.random().toString(36).slice(2),Ir="__reactFiber$"+Xo,Cl="__reactProps$"+Xo,is="__reactContainer$"+Xo,wf="__reactEvents$"+Xo,Mk="__reactListeners$"+Xo,Vk="__reactHandles$"+Xo;function $i(s){var o=s[Ir];if(o)return o;for(var u=s.parentNode;u;){if(o=u[is]||u[Ir]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Cy(s);s!==null;){if(u=s[Ir])return u;s=Cy(s)}return o}s=u,u=s.parentNode}return null}function kl(s){return s=s[Ir]||s[is],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Jo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Cc(s){return s[Cl]||null}var _f=[],Zo=-1;function Fs(s){return{current:s}}function et(s){0>Zo||(s.current=_f[Zo],_f[Zo]=null,Zo--)}function Ye(s,o){Zo++,_f[Zo]=s.current,s.current=o}var $s={},Kt=Fs($s),hn=Fs(!1),Ui=$s;function ea(s,o){var u=s.type.contextTypes;if(!u)return $s;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},x;for(x in u)g[x]=o[x];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function fn(s){return s=s.childContextTypes,s!=null}function kc(){et(hn),et(Kt)}function ky(s,o,u){if(Kt.current!==$s)throw Error(n(168));Ye(Kt,o),Ye(hn,u)}function Py(s,o,u){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(n(108,he(s)||"Unknown",g));return ee({},u,f)}function Pc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||$s,Ui=Kt.current,Ye(Kt,s),Ye(hn,hn.current),!0}function Iy(s,o,u){var f=s.stateNode;if(!f)throw Error(n(169));u?(s=Py(s,o,Ui),f.__reactInternalMemoizedMergedChildContext=s,et(hn),et(Kt),Ye(Kt,s)):et(hn),Ye(hn,u)}var os=null,Ic=!1,Ef=!1;function Ay(s){os===null?os=[s]:os.push(s)}function Ok(s){Ic=!0,Ay(s)}function Us(){if(!Ef&&os!==null){Ef=!0;var s=0,o=$e;try{var u=os;for($e=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}os=null,Ic=!1}catch(g){throw os!==null&&(os=os.slice(s+1)),Do(Ni,Us),g}finally{$e=o,Ef=!1}}return null}var ta=[],na=0,Ac=null,Rc=0,Bn=[],zn=0,Bi=null,as=1,ls="";function zi(s,o){ta[na++]=Rc,ta[na++]=Ac,Ac=s,Rc=o}function Ry(s,o,u){Bn[zn++]=as,Bn[zn++]=ls,Bn[zn++]=Bi,Bi=s;var f=as;s=ls;var g=32-rn(f)-1;f&=~(1<<g),u+=1;var x=32-rn(o)+g;if(30<x){var T=g-g%5;x=(f&(1<<T)-1).toString(32),f>>=T,g-=T,as=1<<32-rn(o)+g|u<<g|f,ls=x+s}else as=1<<x|u<<g|f,ls=s}function bf(s){s.return!==null&&(zi(s,1),Ry(s,1,0))}function Tf(s){for(;s===Ac;)Ac=ta[--na],ta[na]=null,Rc=ta[--na],ta[na]=null;for(;s===Bi;)Bi=Bn[--zn],Bn[zn]=null,ls=Bn[--zn],Bn[zn]=null,as=Bn[--zn],Bn[zn]=null}var Cn=null,kn=null,nt=!1,dr=null;function Ny(s,o){var u=Kn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function Dy(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,Cn=s,kn=Os(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,Cn=s,kn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Bi!==null?{id:as,overflow:ls}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Kn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,Cn=s,kn=null,!0):!1;default:return!1}}function Sf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Cf(s){if(nt){var o=kn;if(o){var u=o;if(!Dy(s,o)){if(Sf(s))throw Error(n(418));o=Os(u.nextSibling);var f=Cn;o&&Dy(s,o)?Ny(f,u):(s.flags=s.flags&-4097|2,nt=!1,Cn=s)}}else{if(Sf(s))throw Error(n(418));s.flags=s.flags&-4097|2,nt=!1,Cn=s}}}function jy(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Cn=s}function Nc(s){if(s!==Cn)return!1;if(!nt)return jy(s),nt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!yf(s.type,s.memoizedProps)),o&&(o=kn)){if(Sf(s))throw Ly(),Error(n(418));for(;o;)Ny(s,o),o=Os(o.nextSibling)}if(jy(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){kn=Os(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}kn=null}}else kn=Cn?Os(s.stateNode.nextSibling):null;return!0}function Ly(){for(var s=kn;s;)s=Os(s.nextSibling)}function ra(){kn=Cn=null,nt=!1}function kf(s){dr===null?dr=[s]:dr.push(s)}var Fk=q.ReactCurrentBatchConfig;function Pl(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var f=u.stateNode}if(!f)throw Error(n(147,s));var g=f,x=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===x?o.ref:(o=function(T){var M=g.refs;T===null?delete M[x]:M[x]=T},o._stringRef=x,o)}if(typeof s!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,s))}return s}function Dc(s,o){throw s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function My(s){var o=s._init;return o(s._payload)}function Vy(s){function o(G,z){if(s){var Q=G.deletions;Q===null?(G.deletions=[z],G.flags|=16):Q.push(z)}}function u(G,z){if(!s)return null;for(;z!==null;)o(G,z),z=z.sibling;return null}function f(G,z){for(G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function g(G,z){return G=Qs(G,z),G.index=0,G.sibling=null,G}function x(G,z,Q){return G.index=Q,s?(Q=G.alternate,Q!==null?(Q=Q.index,Q<z?(G.flags|=2,z):Q):(G.flags|=2,z)):(G.flags|=1048576,z)}function T(G){return s&&G.alternate===null&&(G.flags|=2),G}function M(G,z,Q,fe){return z===null||z.tag!==6?(z=vp(Q,G.mode,fe),z.return=G,z):(z=g(z,Q),z.return=G,z)}function F(G,z,Q,fe){var Ee=Q.type;return Ee===k?le(G,z,Q.props.children,fe,Q.key):z!==null&&(z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===ae&&My(Ee)===z.type)?(fe=g(z,Q.props),fe.ref=Pl(G,z,Q),fe.return=G,fe):(fe=rd(Q.type,Q.key,Q.props,null,G.mode,fe),fe.ref=Pl(G,z,Q),fe.return=G,fe)}function X(G,z,Q,fe){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=xp(Q,G.mode,fe),z.return=G,z):(z=g(z,Q.children||[]),z.return=G,z)}function le(G,z,Q,fe,Ee){return z===null||z.tag!==7?(z=Xi(Q,G.mode,fe,Ee),z.return=G,z):(z=g(z,Q),z.return=G,z)}function de(G,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number")return z=vp(""+z,G.mode,Q),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case W:return Q=rd(z.type,z.key,z.props,null,G.mode,Q),Q.ref=Pl(G,null,z),Q.return=G,Q;case O:return z=xp(z,G.mode,Q),z.return=G,z;case ae:var fe=z._init;return de(G,fe(z._payload),Q)}if(Yr(z)||re(z))return z=Xi(z,G.mode,Q,null),z.return=G,z;Dc(G,z)}return null}function oe(G,z,Q,fe){var Ee=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Ee!==null?null:M(G,z,""+Q,fe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case W:return Q.key===Ee?F(G,z,Q,fe):null;case O:return Q.key===Ee?X(G,z,Q,fe):null;case ae:return Ee=Q._init,oe(G,z,Ee(Q._payload),fe)}if(Yr(Q)||re(Q))return Ee!==null?null:le(G,z,Q,fe,null);Dc(G,Q)}return null}function ge(G,z,Q,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(Q)||null,M(z,G,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case W:return G=G.get(fe.key===null?Q:fe.key)||null,F(z,G,fe,Ee);case O:return G=G.get(fe.key===null?Q:fe.key)||null,X(z,G,fe,Ee);case ae:var Se=fe._init;return ge(G,z,Q,Se(fe._payload),Ee)}if(Yr(fe)||re(fe))return G=G.get(Q)||null,le(z,G,fe,Ee,null);Dc(z,fe)}return null}function we(G,z,Q,fe){for(var Ee=null,Se=null,Ce=z,Re=z=0,Mt=null;Ce!==null&&Re<Q.length;Re++){Ce.index>Re?(Mt=Ce,Ce=null):Mt=Ce.sibling;var We=oe(G,Ce,Q[Re],fe);if(We===null){Ce===null&&(Ce=Mt);break}s&&Ce&&We.alternate===null&&o(G,Ce),z=x(We,z,Re),Se===null?Ee=We:Se.sibling=We,Se=We,Ce=Mt}if(Re===Q.length)return u(G,Ce),nt&&zi(G,Re),Ee;if(Ce===null){for(;Re<Q.length;Re++)Ce=de(G,Q[Re],fe),Ce!==null&&(z=x(Ce,z,Re),Se===null?Ee=Ce:Se.sibling=Ce,Se=Ce);return nt&&zi(G,Re),Ee}for(Ce=f(G,Ce);Re<Q.length;Re++)Mt=ge(Ce,G,Re,Q[Re],fe),Mt!==null&&(s&&Mt.alternate!==null&&Ce.delete(Mt.key===null?Re:Mt.key),z=x(Mt,z,Re),Se===null?Ee=Mt:Se.sibling=Mt,Se=Mt);return s&&Ce.forEach(function(Ys){return o(G,Ys)}),nt&&zi(G,Re),Ee}function _e(G,z,Q,fe){var Ee=re(Q);if(typeof Ee!="function")throw Error(n(150));if(Q=Ee.call(Q),Q==null)throw Error(n(151));for(var Se=Ee=null,Ce=z,Re=z=0,Mt=null,We=Q.next();Ce!==null&&!We.done;Re++,We=Q.next()){Ce.index>Re?(Mt=Ce,Ce=null):Mt=Ce.sibling;var Ys=oe(G,Ce,We.value,fe);if(Ys===null){Ce===null&&(Ce=Mt);break}s&&Ce&&Ys.alternate===null&&o(G,Ce),z=x(Ys,z,Re),Se===null?Ee=Ys:Se.sibling=Ys,Se=Ys,Ce=Mt}if(We.done)return u(G,Ce),nt&&zi(G,Re),Ee;if(Ce===null){for(;!We.done;Re++,We=Q.next())We=de(G,We.value,fe),We!==null&&(z=x(We,z,Re),Se===null?Ee=We:Se.sibling=We,Se=We);return nt&&zi(G,Re),Ee}for(Ce=f(G,Ce);!We.done;Re++,We=Q.next())We=ge(Ce,G,Re,We.value,fe),We!==null&&(s&&We.alternate!==null&&Ce.delete(We.key===null?Re:We.key),z=x(We,z,Re),Se===null?Ee=We:Se.sibling=We,Se=We);return s&&Ce.forEach(function(vP){return o(G,vP)}),nt&&zi(G,Re),Ee}function gt(G,z,Q,fe){if(typeof Q=="object"&&Q!==null&&Q.type===k&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case W:e:{for(var Ee=Q.key,Se=z;Se!==null;){if(Se.key===Ee){if(Ee=Q.type,Ee===k){if(Se.tag===7){u(G,Se.sibling),z=g(Se,Q.props.children),z.return=G,G=z;break e}}else if(Se.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===ae&&My(Ee)===Se.type){u(G,Se.sibling),z=g(Se,Q.props),z.ref=Pl(G,Se,Q),z.return=G,G=z;break e}u(G,Se);break}else o(G,Se);Se=Se.sibling}Q.type===k?(z=Xi(Q.props.children,G.mode,fe,Q.key),z.return=G,G=z):(fe=rd(Q.type,Q.key,Q.props,null,G.mode,fe),fe.ref=Pl(G,z,Q),fe.return=G,G=fe)}return T(G);case O:e:{for(Se=Q.key;z!==null;){if(z.key===Se)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){u(G,z.sibling),z=g(z,Q.children||[]),z.return=G,G=z;break e}else{u(G,z);break}else o(G,z);z=z.sibling}z=xp(Q,G.mode,fe),z.return=G,G=z}return T(G);case ae:return Se=Q._init,gt(G,z,Se(Q._payload),fe)}if(Yr(Q))return we(G,z,Q,fe);if(re(Q))return _e(G,z,Q,fe);Dc(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,z!==null&&z.tag===6?(u(G,z.sibling),z=g(z,Q),z.return=G,G=z):(u(G,z),z=vp(Q,G.mode,fe),z.return=G,G=z),T(G)):u(G,z)}return gt}var sa=Vy(!0),Oy=Vy(!1),jc=Fs(null),Lc=null,ia=null,Pf=null;function If(){Pf=ia=Lc=null}function Af(s){var o=jc.current;et(jc),s._currentValue=o}function Rf(s,o,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===u)break;s=s.return}}function oa(s,o){Lc=s,Pf=ia=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(pn=!0),s.firstContext=null)}function Wn(s){var o=s._currentValue;if(Pf!==s)if(s={context:s,memoizedValue:o,next:null},ia===null){if(Lc===null)throw Error(n(308));ia=s,Lc.dependencies={lanes:0,firstContext:s}}else ia=ia.next=s;return o}var Wi=null;function Nf(s){Wi===null?Wi=[s]:Wi.push(s)}function Fy(s,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Nf(o)):(u.next=g.next,g.next=u),o.interleaved=u,us(s,f)}function us(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Bs=!1;function Df(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $y(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function cs(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function zs(s,o,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,ze&2){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,us(s,u)}return g=f.interleaved,g===null?(o.next=o,Nf(f)):(o.next=g.next,g.next=o),f.interleaved=o,us(s,u)}function Mc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,Ns(s,u)}}function Uy(s,o){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};x===null?g=x=T:x=x.next=T,u=u.next}while(u!==null);x===null?g=x=o:x=x.next=o}else g=x=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:x,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Vc(s,o,u,f){var g=s.updateQueue;Bs=!1;var x=g.firstBaseUpdate,T=g.lastBaseUpdate,M=g.shared.pending;if(M!==null){g.shared.pending=null;var F=M,X=F.next;F.next=null,T===null?x=X:T.next=X,T=F;var le=s.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==T&&(M===null?le.firstBaseUpdate=X:M.next=X,le.lastBaseUpdate=F))}if(x!==null){var de=g.baseState;T=0,le=X=F=null,M=x;do{var oe=M.lane,ge=M.eventTime;if((f&oe)===oe){le!==null&&(le=le.next={eventTime:ge,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var we=s,_e=M;switch(oe=o,ge=u,_e.tag){case 1:if(we=_e.payload,typeof we=="function"){de=we.call(ge,de,oe);break e}de=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=_e.payload,oe=typeof we=="function"?we.call(ge,de,oe):we,oe==null)break e;de=ee({},de,oe);break e;case 2:Bs=!0}}M.callback!==null&&M.lane!==0&&(s.flags|=64,oe=g.effects,oe===null?g.effects=[M]:oe.push(M))}else ge={eventTime:ge,lane:oe,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(X=le=ge,F=de):le=le.next=ge,T|=oe;if(M=M.next,M===null){if(M=g.shared.pending,M===null)break;oe=M,M=oe.next,oe.next=null,g.lastBaseUpdate=oe,g.shared.pending=null}}while(!0);if(le===null&&(F=de),g.baseState=F,g.firstBaseUpdate=X,g.lastBaseUpdate=le,o=g.shared.interleaved,o!==null){g=o;do T|=g.lane,g=g.next;while(g!==o)}else x===null&&(g.shared.lanes=0);Ki|=T,s.lanes=T,s.memoizedState=de}}function By(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(n(191,g));g.call(f)}}}var Il={},Ar=Fs(Il),Al=Fs(Il),Rl=Fs(Il);function Hi(s){if(s===Il)throw Error(n(174));return s}function jf(s,o){switch(Ye(Rl,o),Ye(Al,s),Ye(Ar,Il),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Tt(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Tt(o,s)}et(Ar),Ye(Ar,o)}function aa(){et(Ar),et(Al),et(Rl)}function zy(s){Hi(Rl.current);var o=Hi(Ar.current),u=Tt(o,s.type);o!==u&&(Ye(Al,s),Ye(Ar,u))}function Lf(s){Al.current===s&&(et(Ar),et(Al))}var st=Fs(0);function Oc(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Mf=[];function Vf(){for(var s=0;s<Mf.length;s++)Mf[s]._workInProgressVersionPrimary=null;Mf.length=0}var Fc=q.ReactCurrentDispatcher,Of=q.ReactCurrentBatchConfig,qi=0,it=null,Ct=null,jt=null,$c=!1,Nl=!1,Dl=0,$k=0;function Gt(){throw Error(n(321))}function Ff(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!cr(s[u],o[u]))return!1;return!0}function $f(s,o,u,f,g,x){if(qi=x,it=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fc.current=s===null||s.memoizedState===null?Wk:Hk,s=u(f,g),Nl){x=0;do{if(Nl=!1,Dl=0,25<=x)throw Error(n(301));x+=1,jt=Ct=null,o.updateQueue=null,Fc.current=qk,s=u(f,g)}while(Nl)}if(Fc.current=zc,o=Ct!==null&&Ct.next!==null,qi=0,jt=Ct=it=null,$c=!1,o)throw Error(n(300));return s}function Uf(){var s=Dl!==0;return Dl=0,s}function Rr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?it.memoizedState=jt=s:jt=jt.next=s,jt}function Hn(){if(Ct===null){var s=it.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var o=jt===null?it.memoizedState:jt.next;if(o!==null)jt=o,Ct=s;else{if(s===null)throw Error(n(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},jt===null?it.memoizedState=jt=s:jt=jt.next=s}return jt}function jl(s,o){return typeof o=="function"?o(s):o}function Bf(s){var o=Hn(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var f=Ct,g=f.baseQueue,x=u.pending;if(x!==null){if(g!==null){var T=g.next;g.next=x.next,x.next=T}f.baseQueue=g=x,u.pending=null}if(g!==null){x=g.next,f=f.baseState;var M=T=null,F=null,X=x;do{var le=X.lane;if((qi&le)===le)F!==null&&(F=F.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),f=X.hasEagerState?X.eagerState:s(f,X.action);else{var de={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};F===null?(M=F=de,T=f):F=F.next=de,it.lanes|=le,Ki|=le}X=X.next}while(X!==null&&X!==x);F===null?T=f:F.next=M,cr(f,o.memoizedState)||(pn=!0),o.memoizedState=f,o.baseState=T,o.baseQueue=F,u.lastRenderedState=f}if(s=u.interleaved,s!==null){g=s;do x=g.lane,it.lanes|=x,Ki|=x,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function zf(s){var o=Hn(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var f=u.dispatch,g=u.pending,x=o.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do x=s(x,T.action),T=T.next;while(T!==g);cr(x,o.memoizedState)||(pn=!0),o.memoizedState=x,o.baseQueue===null&&(o.baseState=x),u.lastRenderedState=x}return[x,f]}function Wy(){}function Hy(s,o){var u=it,f=Hn(),g=o(),x=!cr(f.memoizedState,g);if(x&&(f.memoizedState=g,pn=!0),f=f.queue,Wf(Gy.bind(null,u,f,s),[s]),f.getSnapshot!==o||x||jt!==null&&jt.memoizedState.tag&1){if(u.flags|=2048,Ll(9,Ky.bind(null,u,f,g,o),void 0,null),Lt===null)throw Error(n(349));qi&30||qy(u,o,g)}return g}function qy(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=it.updateQueue,o===null?(o={lastEffect:null,stores:null},it.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Ky(s,o,u,f){o.value=u,o.getSnapshot=f,Qy(o)&&Yy(s)}function Gy(s,o,u){return u(function(){Qy(o)&&Yy(s)})}function Qy(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!cr(s,u)}catch{return!0}}function Yy(s){var o=us(s,1);o!==null&&mr(o,s,1,-1)}function Xy(s){var o=Rr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:s},o.queue=s,s=s.dispatch=zk.bind(null,it,s),[o.memoizedState,s]}function Ll(s,o,u,f){return s={tag:s,create:o,destroy:u,deps:f,next:null},o=it.updateQueue,o===null?(o={lastEffect:null,stores:null},it.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,o.lastEffect=s)),s}function Jy(){return Hn().memoizedState}function Uc(s,o,u,f){var g=Rr();it.flags|=s,g.memoizedState=Ll(1|o,u,void 0,f===void 0?null:f)}function Bc(s,o,u,f){var g=Hn();f=f===void 0?null:f;var x=void 0;if(Ct!==null){var T=Ct.memoizedState;if(x=T.destroy,f!==null&&Ff(f,T.deps)){g.memoizedState=Ll(o,u,x,f);return}}it.flags|=s,g.memoizedState=Ll(1|o,u,x,f)}function Zy(s,o){return Uc(8390656,8,s,o)}function Wf(s,o){return Bc(2048,8,s,o)}function ev(s,o){return Bc(4,2,s,o)}function tv(s,o){return Bc(4,4,s,o)}function nv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function rv(s,o,u){return u=u!=null?u.concat([s]):null,Bc(4,4,nv.bind(null,o,s),u)}function Hf(){}function sv(s,o){var u=Hn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Ff(o,f[1])?f[0]:(u.memoizedState=[s,o],s)}function iv(s,o){var u=Hn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Ff(o,f[1])?f[0]:(s=s(),u.memoizedState=[s,o],s)}function ov(s,o,u){return qi&21?(cr(u,o)||(u=Li(),it.lanes|=u,Ki|=u,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,pn=!0),s.memoizedState=u)}function Uk(s,o){var u=$e;$e=u!==0&&4>u?u:4,s(!0);var f=Of.transition;Of.transition={};try{s(!1),o()}finally{$e=u,Of.transition=f}}function av(){return Hn().memoizedState}function Bk(s,o,u){var f=Ks(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},lv(s))uv(o,u);else if(u=Fy(s,o,u,f),u!==null){var g=an();mr(u,s,f,g),cv(u,o,f)}}function zk(s,o,u){var f=Ks(s),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(lv(s))uv(o,g);else{var x=s.alternate;if(s.lanes===0&&(x===null||x.lanes===0)&&(x=o.lastRenderedReducer,x!==null))try{var T=o.lastRenderedState,M=x(T,u);if(g.hasEagerState=!0,g.eagerState=M,cr(M,T)){var F=o.interleaved;F===null?(g.next=g,Nf(o)):(g.next=F.next,F.next=g),o.interleaved=g;return}}catch{}finally{}u=Fy(s,o,g,f),u!==null&&(g=an(),mr(u,s,f,g),cv(u,o,f))}}function lv(s){var o=s.alternate;return s===it||o!==null&&o===it}function uv(s,o){Nl=$c=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function cv(s,o,u){if(u&4194240){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,Ns(s,u)}}var zc={readContext:Wn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},Wk={readContext:Wn,useCallback:function(s,o){return Rr().memoizedState=[s,o===void 0?null:o],s},useContext:Wn,useEffect:Zy,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Uc(4194308,4,nv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Uc(4194308,4,s,o)},useInsertionEffect:function(s,o){return Uc(4,2,s,o)},useMemo:function(s,o){var u=Rr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var f=Rr();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=Bk.bind(null,it,s),[f.memoizedState,s]},useRef:function(s){var o=Rr();return s={current:s},o.memoizedState=s},useState:Xy,useDebugValue:Hf,useDeferredValue:function(s){return Rr().memoizedState=s},useTransition:function(){var s=Xy(!1),o=s[0];return s=Uk.bind(null,s[1]),Rr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var f=it,g=Rr();if(nt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Lt===null)throw Error(n(349));qi&30||qy(f,o,u)}g.memoizedState=u;var x={value:u,getSnapshot:o};return g.queue=x,Zy(Gy.bind(null,f,x,s),[s]),f.flags|=2048,Ll(9,Ky.bind(null,f,x,u,o),void 0,null),u},useId:function(){var s=Rr(),o=Lt.identifierPrefix;if(nt){var u=ls,f=as;u=(f&~(1<<32-rn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=Dl++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=$k++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Hk={readContext:Wn,useCallback:sv,useContext:Wn,useEffect:Wf,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:iv,useReducer:Bf,useRef:Jy,useState:function(){return Bf(jl)},useDebugValue:Hf,useDeferredValue:function(s){var o=Hn();return ov(o,Ct.memoizedState,s)},useTransition:function(){var s=Bf(jl)[0],o=Hn().memoizedState;return[s,o]},useMutableSource:Wy,useSyncExternalStore:Hy,useId:av,unstable_isNewReconciler:!1},qk={readContext:Wn,useCallback:sv,useContext:Wn,useEffect:Wf,useImperativeHandle:rv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:iv,useReducer:zf,useRef:Jy,useState:function(){return zf(jl)},useDebugValue:Hf,useDeferredValue:function(s){var o=Hn();return Ct===null?o.memoizedState=s:ov(o,Ct.memoizedState,s)},useTransition:function(){var s=zf(jl)[0],o=Hn().memoizedState;return[s,o]},useMutableSource:Wy,useSyncExternalStore:Hy,useId:av,unstable_isNewReconciler:!1};function hr(s,o){if(s&&s.defaultProps){o=ee({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function qf(s,o,u,f){o=s.memoizedState,u=u(f,o),u=u==null?o:ee({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Wc={isMounted:function(s){return(s=s._reactInternals)?rr(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var f=an(),g=Ks(s),x=cs(f,g);x.payload=o,u!=null&&(x.callback=u),o=zs(s,x,g),o!==null&&(mr(o,s,g,f),Mc(o,s,g))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var f=an(),g=Ks(s),x=cs(f,g);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=zs(s,x,g),o!==null&&(mr(o,s,g,f),Mc(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=an(),f=Ks(s),g=cs(u,f);g.tag=2,o!=null&&(g.callback=o),o=zs(s,g,f),o!==null&&(mr(o,s,f,u),Mc(o,s,f))}};function dv(s,o,u,f,g,x,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,x,T):o.prototype&&o.prototype.isPureReactComponent?!_l(u,f)||!_l(g,x):!0}function hv(s,o,u){var f=!1,g=$s,x=o.contextType;return typeof x=="object"&&x!==null?x=Wn(x):(g=fn(o)?Ui:Kt.current,f=o.contextTypes,x=(f=f!=null)?ea(s,g):$s),o=new o(u,x),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Wc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=x),o}function fv(s,o,u,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==s&&Wc.enqueueReplaceState(o,o.state,null)}function Kf(s,o,u,f){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},Df(s);var x=o.contextType;typeof x=="object"&&x!==null?g.context=Wn(x):(x=fn(o)?Ui:Kt.current,g.context=ea(s,x)),g.state=s.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(qf(s,o,x,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Wc.enqueueReplaceState(g,g.state,null),Vc(s,u,g,f),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function la(s,o){try{var u="",f=o;do u+=ce(f),f=f.return;while(f);var g=u}catch(x){g=`
Error generating stack: `+x.message+`
`+x.stack}return{value:s,source:o,stack:g,digest:null}}function Gf(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Qf(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Kk=typeof WeakMap=="function"?WeakMap:Map;function pv(s,o,u){u=cs(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){Xc||(Xc=!0,cp=f),Qf(s,o)},u}function mv(s,o,u){u=cs(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Qf(s,o)}}var x=s.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(u.callback=function(){Qf(s,o),typeof f!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),u}function gv(s,o,u){var f=s.pingCache;if(f===null){f=s.pingCache=new Kk;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),s=aP.bind(null,s,o,u),o.then(s,s))}function yv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function vv(s,o,u,f,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=cs(-1,1),o.tag=2,zs(u,o,1))),u.lanes|=1),s)}var Gk=q.ReactCurrentOwner,pn=!1;function on(s,o,u,f){o.child=s===null?Oy(o,null,u,f):sa(o,s.child,u,f)}function xv(s,o,u,f,g){u=u.render;var x=o.ref;return oa(o,g),f=$f(s,o,u,f,x,g),u=Uf(),s!==null&&!pn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,ds(s,o,g)):(nt&&u&&bf(o),o.flags|=1,on(s,o,f,g),o.child)}function wv(s,o,u,f,g){if(s===null){var x=u.type;return typeof x=="function"&&!yp(x)&&x.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=x,_v(s,o,x,f,g)):(s=rd(u.type,null,f,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(x=s.child,!(s.lanes&g)){var T=x.memoizedProps;if(u=u.compare,u=u!==null?u:_l,u(T,f)&&s.ref===o.ref)return ds(s,o,g)}return o.flags|=1,s=Qs(x,f),s.ref=o.ref,s.return=o,o.child=s}function _v(s,o,u,f,g){if(s!==null){var x=s.memoizedProps;if(_l(x,f)&&s.ref===o.ref)if(pn=!1,o.pendingProps=f=x,(s.lanes&g)!==0)s.flags&131072&&(pn=!0);else return o.lanes=s.lanes,ds(s,o,g)}return Yf(s,o,u,f,g)}function Ev(s,o,u){var f=o.pendingProps,g=f.children,x=s!==null?s.memoizedState:null;if(f.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ca,Pn),Pn|=u;else{if(!(u&1073741824))return s=x!==null?x.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Ye(ca,Pn),Pn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=x!==null?x.baseLanes:u,Ye(ca,Pn),Pn|=f}else x!==null?(f=x.baseLanes|u,o.memoizedState=null):f=u,Ye(ca,Pn),Pn|=f;return on(s,o,g,u),o.child}function bv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Yf(s,o,u,f,g){var x=fn(u)?Ui:Kt.current;return x=ea(o,x),oa(o,g),u=$f(s,o,u,f,x,g),f=Uf(),s!==null&&!pn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,ds(s,o,g)):(nt&&f&&bf(o),o.flags|=1,on(s,o,u,g),o.child)}function Tv(s,o,u,f,g){if(fn(u)){var x=!0;Pc(o)}else x=!1;if(oa(o,g),o.stateNode===null)qc(s,o),hv(o,u,f),Kf(o,u,f,g),f=!0;else if(s===null){var T=o.stateNode,M=o.memoizedProps;T.props=M;var F=T.context,X=u.contextType;typeof X=="object"&&X!==null?X=Wn(X):(X=fn(u)?Ui:Kt.current,X=ea(o,X));var le=u.getDerivedStateFromProps,de=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function";de||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==f||F!==X)&&fv(o,T,f,X),Bs=!1;var oe=o.memoizedState;T.state=oe,Vc(o,f,T,g),F=o.memoizedState,M!==f||oe!==F||hn.current||Bs?(typeof le=="function"&&(qf(o,u,le,f),F=o.memoizedState),(M=Bs||dv(o,u,M,f,oe,F,X))?(de||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=F),T.props=f,T.state=F,T.context=X,f=M):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{T=o.stateNode,$y(s,o),M=o.memoizedProps,X=o.type===o.elementType?M:hr(o.type,M),T.props=X,de=o.pendingProps,oe=T.context,F=u.contextType,typeof F=="object"&&F!==null?F=Wn(F):(F=fn(u)?Ui:Kt.current,F=ea(o,F));var ge=u.getDerivedStateFromProps;(le=typeof ge=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(M!==de||oe!==F)&&fv(o,T,f,F),Bs=!1,oe=o.memoizedState,T.state=oe,Vc(o,f,T,g);var we=o.memoizedState;M!==de||oe!==we||hn.current||Bs?(typeof ge=="function"&&(qf(o,u,ge,f),we=o.memoizedState),(X=Bs||dv(o,u,X,f,oe,we,F)||!1)?(le||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,we,F),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,we,F)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||M===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=we),T.props=f,T.state=we,T.context=F,f=X):(typeof T.componentDidUpdate!="function"||M===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),f=!1)}return Xf(s,o,u,f,x,g)}function Xf(s,o,u,f,g,x){bv(s,o);var T=(o.flags&128)!==0;if(!f&&!T)return g&&Iy(o,u,!1),ds(s,o,x);f=o.stateNode,Gk.current=o;var M=T&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&T?(o.child=sa(o,s.child,null,x),o.child=sa(o,null,M,x)):on(s,o,M,x),o.memoizedState=f.state,g&&Iy(o,u,!0),o.child}function Sv(s){var o=s.stateNode;o.pendingContext?ky(s,o.pendingContext,o.pendingContext!==o.context):o.context&&ky(s,o.context,!1),jf(s,o.containerInfo)}function Cv(s,o,u,f,g){return ra(),kf(g),o.flags|=256,on(s,o,u,f),o.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function Zf(s){return{baseLanes:s,cachePool:null,transitions:null}}function kv(s,o,u){var f=o.pendingProps,g=st.current,x=!1,T=(o.flags&128)!==0,M;if((M=T)||(M=s!==null&&s.memoizedState===null?!1:(g&2)!==0),M?(x=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),Ye(st,g&1),s===null)return Cf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(T=f.children,s=f.fallback,x?(f=o.mode,x=o.child,T={mode:"hidden",children:T},!(f&1)&&x!==null?(x.childLanes=0,x.pendingProps=T):x=sd(T,f,0,null),s=Xi(s,f,u,null),x.return=o,s.return=o,x.sibling=s,o.child=x,o.child.memoizedState=Zf(u),o.memoizedState=Jf,s):ep(o,T));if(g=s.memoizedState,g!==null&&(M=g.dehydrated,M!==null))return Qk(s,o,T,f,M,g,u);if(x){x=f.fallback,T=o.mode,g=s.child,M=g.sibling;var F={mode:"hidden",children:f.children};return!(T&1)&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=F,o.deletions=null):(f=Qs(g,F),f.subtreeFlags=g.subtreeFlags&14680064),M!==null?x=Qs(M,x):(x=Xi(x,T,u,null),x.flags|=2),x.return=o,f.return=o,f.sibling=x,o.child=f,f=x,x=o.child,T=s.child.memoizedState,T=T===null?Zf(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},x.memoizedState=T,x.childLanes=s.childLanes&~u,o.memoizedState=Jf,f}return x=s.child,s=x.sibling,f=Qs(x,{mode:"visible",children:f.children}),!(o.mode&1)&&(f.lanes=u),f.return=o,f.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=f,o.memoizedState=null,f}function ep(s,o){return o=sd({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Hc(s,o,u,f){return f!==null&&kf(f),sa(o,s.child,null,u),s=ep(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Qk(s,o,u,f,g,x,T){if(u)return o.flags&256?(o.flags&=-257,f=Gf(Error(n(422))),Hc(s,o,T,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(x=f.fallback,g=o.mode,f=sd({mode:"visible",children:f.children},g,0,null),x=Xi(x,g,T,null),x.flags|=2,f.return=o,x.return=o,f.sibling=x,o.child=f,o.mode&1&&sa(o,s.child,null,T),o.child.memoizedState=Zf(T),o.memoizedState=Jf,x);if(!(o.mode&1))return Hc(s,o,T,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var M=f.dgst;return f=M,x=Error(n(419)),f=Gf(x,f,void 0),Hc(s,o,T,f)}if(M=(T&s.childLanes)!==0,pn||M){if(f=Lt,f!==null){switch(T&-T){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(f.suspendedLanes|T)?0:g,g!==0&&g!==x.retryLane&&(x.retryLane=g,us(s,g),mr(f,s,g,-1))}return gp(),f=Gf(Error(n(421))),Hc(s,o,T,f)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=lP.bind(null,s),g._reactRetry=o,null):(s=x.treeContext,kn=Os(g.nextSibling),Cn=o,nt=!0,dr=null,s!==null&&(Bn[zn++]=as,Bn[zn++]=ls,Bn[zn++]=Bi,as=s.id,ls=s.overflow,Bi=o),o=ep(o,f.children),o.flags|=4096,o)}function Pv(s,o,u){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),Rf(s.return,o,u)}function tp(s,o,u,f,g){var x=s.memoizedState;x===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(x.isBackwards=o,x.rendering=null,x.renderingStartTime=0,x.last=f,x.tail=u,x.tailMode=g)}function Iv(s,o,u){var f=o.pendingProps,g=f.revealOrder,x=f.tail;if(on(s,o,f.children,u),f=st.current,f&2)f=f&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Pv(s,u,o);else if(s.tag===19)Pv(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(Ye(st,f),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&Oc(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),tp(o,!1,g,u,x);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&Oc(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}tp(o,!0,u,null,x);break;case"together":tp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function qc(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ds(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Ki|=o.lanes,!(u&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,u=Qs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Qs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Yk(s,o,u){switch(o.tag){case 3:Sv(o),ra();break;case 5:zy(o);break;case 1:fn(o.type)&&Pc(o);break;case 4:jf(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Ye(jc,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ye(st,st.current&1),o.flags|=128,null):u&o.child.childLanes?kv(s,o,u):(Ye(st,st.current&1),s=ds(s,o,u),s!==null?s.sibling:null);Ye(st,st.current&1);break;case 19:if(f=(u&o.childLanes)!==0,s.flags&128){if(f)return Iv(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ye(st,st.current),f)break;return null;case 22:case 23:return o.lanes=0,Ev(s,o,u)}return ds(s,o,u)}var Av,np,Rv,Nv;Av=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},np=function(){},Rv=function(s,o,u,f){var g=s.memoizedProps;if(g!==f){s=o.stateNode,Hi(Ar.current);var x=null;switch(u){case"input":g=er(s,g),f=er(s,f),x=[];break;case"select":g=ee({},g,{value:void 0}),f=ee({},f,{value:void 0}),x=[];break;case"textarea":g=Ya(s,g),f=Ya(s,f),x=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=Sc)}nl(u,f);var T;u=null;for(X in g)if(!f.hasOwnProperty(X)&&g.hasOwnProperty(X)&&g[X]!=null)if(X==="style"){var M=g[X];for(T in M)M.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(i.hasOwnProperty(X)?x||(x=[]):(x=x||[]).push(X,null));for(X in f){var F=f[X];if(M=g!=null?g[X]:void 0,f.hasOwnProperty(X)&&F!==M&&(F!=null||M!=null))if(X==="style")if(M){for(T in M)!M.hasOwnProperty(T)||F&&F.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in F)F.hasOwnProperty(T)&&M[T]!==F[T]&&(u||(u={}),u[T]=F[T])}else u||(x||(x=[]),x.push(X,u)),u=F;else X==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,M=M?M.__html:void 0,F!=null&&M!==F&&(x=x||[]).push(X,F)):X==="children"?typeof F!="string"&&typeof F!="number"||(x=x||[]).push(X,""+F):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(i.hasOwnProperty(X)?(F!=null&&X==="onScroll"&&Ze("scroll",s),x||M===F||(x=[])):(x=x||[]).push(X,F))}u&&(x=x||[]).push("style",u);var X=x;(o.updateQueue=X)&&(o.flags|=4)}},Nv=function(s,o,u,f){u!==f&&(o.flags|=4)};function Ml(s,o){if(!nt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Qt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=f,s.childLanes=u,o}function Xk(s,o,u){var f=o.pendingProps;switch(Tf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(o),null;case 1:return fn(o.type)&&kc(),Qt(o),null;case 3:return f=o.stateNode,aa(),et(hn),et(Kt),Vf(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Nc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,dr!==null&&(fp(dr),dr=null))),np(s,o),Qt(o),null;case 5:Lf(o);var g=Hi(Rl.current);if(u=o.type,s!==null&&o.stateNode!=null)Rv(s,o,u,f,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Qt(o),null}if(s=Hi(Ar.current),Nc(o)){f=o.stateNode,u=o.type;var x=o.memoizedProps;switch(f[Ir]=o,f[Cl]=x,s=(o.mode&1)!==0,u){case"dialog":Ze("cancel",f),Ze("close",f);break;case"iframe":case"object":case"embed":Ze("load",f);break;case"video":case"audio":for(g=0;g<bl.length;g++)Ze(bl[g],f);break;case"source":Ze("error",f);break;case"img":case"image":case"link":Ze("error",f),Ze("load",f);break;case"details":Ze("toggle",f);break;case"input":Gr(f,x),Ze("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!x.multiple},Ze("invalid",f);break;case"textarea":To(f,x),Ze("invalid",f)}nl(u,x),g=null;for(var T in x)if(x.hasOwnProperty(T)){var M=x[T];T==="children"?typeof M=="string"?f.textContent!==M&&(x.suppressHydrationWarning!==!0&&Tc(f.textContent,M,s),g=["children",M]):typeof M=="number"&&f.textContent!==""+M&&(x.suppressHydrationWarning!==!0&&Tc(f.textContent,M,s),g=["children",""+M]):i.hasOwnProperty(T)&&M!=null&&T==="onScroll"&&Ze("scroll",f)}switch(u){case"input":Vn(f),Yu(f,x,!0);break;case"textarea":Vn(f),Xa(f);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(f.onclick=Sc)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{T=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=bt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(u,{is:f.is}):(s=T.createElement(u),u==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,u),s[Ir]=o,s[Cl]=f,Av(s,o,!1,!1),o.stateNode=s;e:{switch(T=rl(u,f),u){case"dialog":Ze("cancel",s),Ze("close",s),g=f;break;case"iframe":case"object":case"embed":Ze("load",s),g=f;break;case"video":case"audio":for(g=0;g<bl.length;g++)Ze(bl[g],s);g=f;break;case"source":Ze("error",s),g=f;break;case"img":case"image":case"link":Ze("error",s),Ze("load",s),g=f;break;case"details":Ze("toggle",s),g=f;break;case"input":Gr(s,f),g=er(s,f),Ze("invalid",s);break;case"option":g=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},g=ee({},f,{value:void 0}),Ze("invalid",s);break;case"textarea":To(s,f),g=Ya(s,f),Ze("invalid",s);break;default:g=f}nl(u,g),M=g;for(x in M)if(M.hasOwnProperty(x)){var F=M[x];x==="style"?el(s,F):x==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Ja(s,F)):x==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&ks(s,F):typeof F=="number"&&ks(s,""+F):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(i.hasOwnProperty(x)?F!=null&&x==="onScroll"&&Ze("scroll",s):F!=null&&$(s,x,F,T))}switch(u){case"input":Vn(s),Yu(s,f,!1);break;case"textarea":Vn(s),Xa(s);break;case"option":f.value!=null&&s.setAttribute("value",""+Te(f.value));break;case"select":s.multiple=!!f.multiple,x=f.value,x!=null?Xr(s,!!f.multiple,x,!1):f.defaultValue!=null&&Xr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Sc)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Qt(o),null;case 6:if(s&&o.stateNode!=null)Nv(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(u=Hi(Rl.current),Hi(Ar.current),Nc(o)){if(f=o.stateNode,u=o.memoizedProps,f[Ir]=o,(x=f.nodeValue!==u)&&(s=Cn,s!==null))switch(s.tag){case 3:Tc(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Tc(f.nodeValue,u,(s.mode&1)!==0)}x&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Ir]=o,o.stateNode=f}return Qt(o),null;case 13:if(et(st),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(nt&&kn!==null&&o.mode&1&&!(o.flags&128))Ly(),ra(),o.flags|=98560,x=!1;else if(x=Nc(o),f!==null&&f.dehydrated!==null){if(s===null){if(!x)throw Error(n(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Ir]=o}else ra(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;Qt(o),x=!1}else dr!==null&&(fp(dr),dr=null),x=!0;if(!x)return o.flags&65536?o:null}return o.flags&128?(o.lanes=u,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,o.mode&1&&(s===null||st.current&1?kt===0&&(kt=3):gp())),o.updateQueue!==null&&(o.flags|=4),Qt(o),null);case 4:return aa(),np(s,o),s===null&&Tl(o.stateNode.containerInfo),Qt(o),null;case 10:return Af(o.type._context),Qt(o),null;case 17:return fn(o.type)&&kc(),Qt(o),null;case 19:if(et(st),x=o.memoizedState,x===null)return Qt(o),null;if(f=(o.flags&128)!==0,T=x.rendering,T===null)if(f)Ml(x,!1);else{if(kt!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(T=Oc(s),T!==null){for(o.flags|=128,Ml(x,!1),f=T.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)x=u,s=f,x.flags&=14680066,T=x.alternate,T===null?(x.childLanes=0,x.lanes=s,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=T.childLanes,x.lanes=T.lanes,x.child=T.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=T.memoizedProps,x.memoizedState=T.memoizedState,x.updateQueue=T.updateQueue,x.type=T.type,s=T.dependencies,x.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Ye(st,st.current&1|2),o.child}s=s.sibling}x.tail!==null&&Qe()>da&&(o.flags|=128,f=!0,Ml(x,!1),o.lanes=4194304)}else{if(!f)if(s=Oc(T),s!==null){if(o.flags|=128,f=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ml(x,!0),x.tail===null&&x.tailMode==="hidden"&&!T.alternate&&!nt)return Qt(o),null}else 2*Qe()-x.renderingStartTime>da&&u!==1073741824&&(o.flags|=128,f=!0,Ml(x,!1),o.lanes=4194304);x.isBackwards?(T.sibling=o.child,o.child=T):(u=x.last,u!==null?u.sibling=T:o.child=T,x.last=T)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=Qe(),o.sibling=null,u=st.current,Ye(st,f?u&1|2:u&1),o):(Qt(o),null);case 22:case 23:return mp(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&o.mode&1?Pn&1073741824&&(Qt(o),o.subtreeFlags&6&&(o.flags|=8192)):Qt(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function Jk(s,o){switch(Tf(o),o.tag){case 1:return fn(o.type)&&kc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return aa(),et(hn),et(Kt),Vf(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Lf(o),null;case 13:if(et(st),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ra()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return et(st),null;case 4:return aa(),null;case 10:return Af(o.type._context),null;case 22:case 23:return mp(),null;case 24:return null;default:return null}}var Kc=!1,Yt=!1,Zk=typeof WeakSet=="function"?WeakSet:Set,xe=null;function ua(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){ut(s,o,f)}else u.current=null}function rp(s,o,u){try{u()}catch(f){ut(s,o,f)}}var Dv=!1;function eP(s,o){if(mf=Ls,s=dy(),af(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var T=0,M=-1,F=-1,X=0,le=0,de=s,oe=null;t:for(;;){for(var ge;de!==u||g!==0&&de.nodeType!==3||(M=T+g),de!==x||f!==0&&de.nodeType!==3||(F=T+f),de.nodeType===3&&(T+=de.nodeValue.length),(ge=de.firstChild)!==null;)oe=de,de=ge;for(;;){if(de===s)break t;if(oe===u&&++X===g&&(M=T),oe===x&&++le===f&&(F=T),(ge=de.nextSibling)!==null)break;de=oe,oe=de.parentNode}de=ge}u=M===-1||F===-1?null:{start:M,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(gf={focusedElem:s,selectionRange:u},Ls=!1,xe=o;xe!==null;)if(o=xe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,xe=s;else for(;xe!==null;){o=xe;try{var we=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var _e=we.memoizedProps,gt=we.memoizedState,G=o.stateNode,z=G.getSnapshotBeforeUpdate(o.elementType===o.type?_e:hr(o.type,_e),gt);G.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Q=o.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(fe){ut(o,o.return,fe)}if(s=o.sibling,s!==null){s.return=o.return,xe=s;break}xe=o.return}return we=Dv,Dv=!1,we}function Vl(s,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&s)===s){var x=g.destroy;g.destroy=void 0,x!==void 0&&rp(o,u,x)}g=g.next}while(g!==f)}}function Gc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function sp(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function jv(s){var o=s.alternate;o!==null&&(s.alternate=null,jv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Ir],delete o[Cl],delete o[wf],delete o[Mk],delete o[Vk])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Lv(s){return s.tag===5||s.tag===3||s.tag===4}function Mv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Lv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ip(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Sc));else if(f!==4&&(s=s.child,s!==null))for(ip(s,o,u),s=s.sibling;s!==null;)ip(s,o,u),s=s.sibling}function op(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(op(s,o,u),s=s.sibling;s!==null;)op(s,o,u),s=s.sibling}var $t=null,fr=!1;function Ws(s,o,u){for(u=u.child;u!==null;)Vv(s,o,u),u=u.sibling}function Vv(s,o,u){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(Di,u)}catch{}switch(u.tag){case 5:Yt||ua(u,o);case 6:var f=$t,g=fr;$t=null,Ws(s,o,u),$t=f,fr=g,$t!==null&&(fr?(s=$t,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):$t.removeChild(u.stateNode));break;case 18:$t!==null&&(fr?(s=$t,u=u.stateNode,s.nodeType===8?xf(s.parentNode,u):s.nodeType===1&&xf(s,u),lr(s)):xf($t,u.stateNode));break;case 4:f=$t,g=fr,$t=u.stateNode.containerInfo,fr=!0,Ws(s,o,u),$t=f,fr=g;break;case 0:case 11:case 14:case 15:if(!Yt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var x=g,T=x.destroy;x=x.tag,T!==void 0&&(x&2||x&4)&&rp(u,o,T),g=g.next}while(g!==f)}Ws(s,o,u);break;case 1:if(!Yt&&(ua(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(M){ut(u,o,M)}Ws(s,o,u);break;case 21:Ws(s,o,u);break;case 22:u.mode&1?(Yt=(f=Yt)||u.memoizedState!==null,Ws(s,o,u),Yt=f):Ws(s,o,u);break;default:Ws(s,o,u)}}function Ov(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new Zk),o.forEach(function(f){var g=uP.bind(null,s,f);u.has(f)||(u.add(f),f.then(g,g))})}}function pr(s,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var x=s,T=o,M=T;e:for(;M!==null;){switch(M.tag){case 5:$t=M.stateNode,fr=!1;break e;case 3:$t=M.stateNode.containerInfo,fr=!0;break e;case 4:$t=M.stateNode.containerInfo,fr=!0;break e}M=M.return}if($t===null)throw Error(n(160));Vv(x,T,g),$t=null,fr=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(X){ut(g,o,X)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Fv(o,s),o=o.sibling}function Fv(s,o){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(pr(o,s),Nr(s),f&4){try{Vl(3,s,s.return),Gc(3,s)}catch(_e){ut(s,s.return,_e)}try{Vl(5,s,s.return)}catch(_e){ut(s,s.return,_e)}}break;case 1:pr(o,s),Nr(s),f&512&&u!==null&&ua(u,u.return);break;case 5:if(pr(o,s),Nr(s),f&512&&u!==null&&ua(u,u.return),s.flags&32){var g=s.stateNode;try{ks(g,"")}catch(_e){ut(s,s.return,_e)}}if(f&4&&(g=s.stateNode,g!=null)){var x=s.memoizedProps,T=u!==null?u.memoizedProps:x,M=s.type,F=s.updateQueue;if(s.updateQueue=null,F!==null)try{M==="input"&&x.type==="radio"&&x.name!=null&&Nt(g,x),rl(M,T);var X=rl(M,x);for(T=0;T<F.length;T+=2){var le=F[T],de=F[T+1];le==="style"?el(g,de):le==="dangerouslySetInnerHTML"?Ja(g,de):le==="children"?ks(g,de):$(g,le,de,X)}switch(M){case"input":Qr(g,x);break;case"textarea":So(g,x);break;case"select":var oe=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!x.multiple;var ge=x.value;ge!=null?Xr(g,!!x.multiple,ge,!1):oe!==!!x.multiple&&(x.defaultValue!=null?Xr(g,!!x.multiple,x.defaultValue,!0):Xr(g,!!x.multiple,x.multiple?[]:"",!1))}g[Cl]=x}catch(_e){ut(s,s.return,_e)}}break;case 6:if(pr(o,s),Nr(s),f&4){if(s.stateNode===null)throw Error(n(162));g=s.stateNode,x=s.memoizedProps;try{g.nodeValue=x}catch(_e){ut(s,s.return,_e)}}break;case 3:if(pr(o,s),Nr(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{lr(o.containerInfo)}catch(_e){ut(s,s.return,_e)}break;case 4:pr(o,s),Nr(s);break;case 13:pr(o,s),Nr(s),g=s.child,g.flags&8192&&(x=g.memoizedState!==null,g.stateNode.isHidden=x,!x||g.alternate!==null&&g.alternate.memoizedState!==null||(up=Qe())),f&4&&Ov(s);break;case 22:if(le=u!==null&&u.memoizedState!==null,s.mode&1?(Yt=(X=Yt)||le,pr(o,s),Yt=X):pr(o,s),Nr(s),f&8192){if(X=s.memoizedState!==null,(s.stateNode.isHidden=X)&&!le&&s.mode&1)for(xe=s,le=s.child;le!==null;){for(de=xe=le;xe!==null;){switch(oe=xe,ge=oe.child,oe.tag){case 0:case 11:case 14:case 15:Vl(4,oe,oe.return);break;case 1:ua(oe,oe.return);var we=oe.stateNode;if(typeof we.componentWillUnmount=="function"){f=oe,u=oe.return;try{o=f,we.props=o.memoizedProps,we.state=o.memoizedState,we.componentWillUnmount()}catch(_e){ut(f,u,_e)}}break;case 5:ua(oe,oe.return);break;case 22:if(oe.memoizedState!==null){Bv(de);continue}}ge!==null?(ge.return=oe,xe=ge):Bv(de)}le=le.sibling}e:for(le=null,de=s;;){if(de.tag===5){if(le===null){le=de;try{g=de.stateNode,X?(x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(M=de.stateNode,F=de.memoizedProps.style,T=F!=null&&F.hasOwnProperty("display")?F.display:null,M.style.display=Za("display",T))}catch(_e){ut(s,s.return,_e)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=X?"":de.memoizedProps}catch(_e){ut(s,s.return,_e)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===s)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===s)break e;for(;de.sibling===null;){if(de.return===null||de.return===s)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:pr(o,s),Nr(s),f&4&&Ov(s);break;case 21:break;default:pr(o,s),Nr(s)}}function Nr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(Lv(u)){var f=u;break e}u=u.return}throw Error(n(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(ks(g,""),f.flags&=-33);var x=Mv(s);op(s,x,g);break;case 3:case 4:var T=f.stateNode.containerInfo,M=Mv(s);ip(s,M,T);break;default:throw Error(n(161))}}catch(F){ut(s,s.return,F)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function tP(s,o,u){xe=s,$v(s)}function $v(s,o,u){for(var f=(s.mode&1)!==0;xe!==null;){var g=xe,x=g.child;if(g.tag===22&&f){var T=g.memoizedState!==null||Kc;if(!T){var M=g.alternate,F=M!==null&&M.memoizedState!==null||Yt;M=Kc;var X=Yt;if(Kc=T,(Yt=F)&&!X)for(xe=g;xe!==null;)T=xe,F=T.child,T.tag===22&&T.memoizedState!==null?zv(g):F!==null?(F.return=T,xe=F):zv(g);for(;x!==null;)xe=x,$v(x),x=x.sibling;xe=g,Kc=M,Yt=X}Uv(s)}else g.subtreeFlags&8772&&x!==null?(x.return=g,xe=x):Uv(s)}}function Uv(s){for(;xe!==null;){var o=xe;if(o.flags&8772){var u=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Yt||Gc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Yt)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:hr(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var x=o.updateQueue;x!==null&&By(o,x,f);break;case 3:var T=o.updateQueue;if(T!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}By(o,T,u)}break;case 5:var M=o.stateNode;if(u===null&&o.flags&4){u=M;var F=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var X=o.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&lr(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Yt||o.flags&512&&sp(o)}catch(oe){ut(o,o.return,oe)}}if(o===s){xe=null;break}if(u=o.sibling,u!==null){u.return=o.return,xe=u;break}xe=o.return}}function Bv(s){for(;xe!==null;){var o=xe;if(o===s){xe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,xe=u;break}xe=o.return}}function zv(s){for(;xe!==null;){var o=xe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Gc(4,o)}catch(F){ut(o,u,F)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(F){ut(o,g,F)}}var x=o.return;try{sp(o)}catch(F){ut(o,x,F)}break;case 5:var T=o.return;try{sp(o)}catch(F){ut(o,T,F)}}}catch(F){ut(o,o.return,F)}if(o===s){xe=null;break}var M=o.sibling;if(M!==null){M.return=o.return,xe=M;break}xe=o.return}}var nP=Math.ceil,Qc=q.ReactCurrentDispatcher,ap=q.ReactCurrentOwner,qn=q.ReactCurrentBatchConfig,ze=0,Lt=null,_t=null,Ut=0,Pn=0,ca=Fs(0),kt=0,Ol=null,Ki=0,Yc=0,lp=0,Fl=null,mn=null,up=0,da=1/0,hs=null,Xc=!1,cp=null,Hs=null,Jc=!1,qs=null,Zc=0,$l=0,dp=null,ed=-1,td=0;function an(){return ze&6?Qe():ed!==-1?ed:ed=Qe()}function Ks(s){return s.mode&1?ze&2&&Ut!==0?Ut&-Ut:Fk.transition!==null?(td===0&&(td=Li()),td):(s=$e,s!==0||(s=window.event,s=s===void 0?16:pl(s.type)),s):1}function mr(s,o,u,f){if(50<$l)throw $l=0,dp=null,Error(n(185));Rs(s,u,f),(!(ze&2)||s!==Lt)&&(s===Lt&&(!(ze&2)&&(Yc|=u),kt===4&&Gs(s,Ut)),gn(s,f),u===1&&ze===0&&!(o.mode&1)&&(da=Qe()+500,Ic&&Us()))}function gn(s,o){var u=s.callbackNode;es(s,o);var f=ji(s,s===Lt?Ut:0);if(f===0)u!==null&&ul(u),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(u!=null&&ul(u),o===1)s.tag===0?Ok(Hv.bind(null,s)):Ay(Hv.bind(null,s)),jk(function(){!(ze&6)&&Us()}),u=null;else{switch(Ds(f)){case 1:u=Ni;break;case 4:u=Ps;break;case 16:u=Fn;break;case 536870912:u=tc;break;default:u=Fn}u=Zv(u,Wv.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function Wv(s,o){if(ed=-1,td=0,ze&6)throw Error(n(327));var u=s.callbackNode;if(ha()&&s.callbackNode!==u)return null;var f=ji(s,s===Lt?Ut:0);if(f===0)return null;if(f&30||f&s.expiredLanes||o)o=nd(s,f);else{o=f;var g=ze;ze|=2;var x=Kv();(Lt!==s||Ut!==o)&&(hs=null,da=Qe()+500,Qi(s,o));do try{iP();break}catch(M){qv(s,M)}while(!0);If(),Qc.current=x,ze=g,_t!==null?o=0:(Lt=null,Ut=0,o=kt)}if(o!==0){if(o===2&&(g=bn(s),g!==0&&(f=g,o=hp(s,g))),o===1)throw u=Ol,Qi(s,0),Gs(s,f),gn(s,Qe()),u;if(o===6)Gs(s,f);else{if(g=s.current.alternate,!(f&30)&&!rP(g)&&(o=nd(s,f),o===2&&(x=bn(s),x!==0&&(f=x,o=hp(s,x))),o===1))throw u=Ol,Qi(s,0),Gs(s,f),gn(s,Qe()),u;switch(s.finishedWork=g,s.finishedLanes=f,o){case 0:case 1:throw Error(n(345));case 2:Yi(s,mn,hs);break;case 3:if(Gs(s,f),(f&130023424)===f&&(o=up+500-Qe(),10<o)){if(ji(s,0)!==0)break;if(g=s.suspendedLanes,(g&f)!==f){an(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=vf(Yi.bind(null,s,mn,hs),o);break}Yi(s,mn,hs);break;case 4:if(Gs(s,f),(f&4194240)===f)break;for(o=s.eventTimes,g=-1;0<f;){var T=31-rn(f);x=1<<T,T=o[T],T>g&&(g=T),f&=~x}if(f=g,f=Qe()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*nP(f/1960))-f,10<f){s.timeoutHandle=vf(Yi.bind(null,s,mn,hs),f);break}Yi(s,mn,hs);break;case 5:Yi(s,mn,hs);break;default:throw Error(n(329))}}}return gn(s,Qe()),s.callbackNode===u?Wv.bind(null,s):null}function hp(s,o){var u=Fl;return s.current.memoizedState.isDehydrated&&(Qi(s,o).flags|=256),s=nd(s,o),s!==2&&(o=mn,mn=u,o!==null&&fp(o)),s}function fp(s){mn===null?mn=s:mn.push.apply(mn,s)}function rP(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],x=g.getSnapshot;g=g.value;try{if(!cr(x(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Gs(s,o){for(o&=~lp,o&=~Yc,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-rn(o),f=1<<u;s[u]=-1,o&=~f}}function Hv(s){if(ze&6)throw Error(n(327));ha();var o=ji(s,0);if(!(o&1))return gn(s,Qe()),null;var u=nd(s,o);if(s.tag!==0&&u===2){var f=bn(s);f!==0&&(o=f,u=hp(s,f))}if(u===1)throw u=Ol,Qi(s,0),Gs(s,o),gn(s,Qe()),u;if(u===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Yi(s,mn,hs),gn(s,Qe()),null}function pp(s,o){var u=ze;ze|=1;try{return s(o)}finally{ze=u,ze===0&&(da=Qe()+500,Ic&&Us())}}function Gi(s){qs!==null&&qs.tag===0&&!(ze&6)&&ha();var o=ze;ze|=1;var u=qn.transition,f=$e;try{if(qn.transition=null,$e=1,s)return s()}finally{$e=f,qn.transition=u,ze=o,!(ze&6)&&Us()}}function mp(){Pn=ca.current,et(ca)}function Qi(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,Dk(u)),_t!==null)for(u=_t.return;u!==null;){var f=u;switch(Tf(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&kc();break;case 3:aa(),et(hn),et(Kt),Vf();break;case 5:Lf(f);break;case 4:aa();break;case 13:et(st);break;case 19:et(st);break;case 10:Af(f.type._context);break;case 22:case 23:mp()}u=u.return}if(Lt=s,_t=s=Qs(s.current,null),Ut=Pn=o,kt=0,Ol=null,lp=Yc=Ki=0,mn=Fl=null,Wi!==null){for(o=0;o<Wi.length;o++)if(u=Wi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,x=u.pending;if(x!==null){var T=x.next;x.next=g,f.next=T}u.pending=f}Wi=null}return s}function qv(s,o){do{var u=_t;try{if(If(),Fc.current=zc,$c){for(var f=it.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}$c=!1}if(qi=0,jt=Ct=it=null,Nl=!1,Dl=0,ap.current=null,u===null||u.return===null){kt=1,Ol=o,_t=null;break}e:{var x=s,T=u.return,M=u,F=o;if(o=Ut,M.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var X=F,le=M,de=le.tag;if(!(le.mode&1)&&(de===0||de===11||de===15)){var oe=le.alternate;oe?(le.updateQueue=oe.updateQueue,le.memoizedState=oe.memoizedState,le.lanes=oe.lanes):(le.updateQueue=null,le.memoizedState=null)}var ge=yv(T);if(ge!==null){ge.flags&=-257,vv(ge,T,M,x,o),ge.mode&1&&gv(x,X,o),o=ge,F=X;var we=o.updateQueue;if(we===null){var _e=new Set;_e.add(F),o.updateQueue=_e}else we.add(F);break e}else{if(!(o&1)){gv(x,X,o),gp();break e}F=Error(n(426))}}else if(nt&&M.mode&1){var gt=yv(T);if(gt!==null){!(gt.flags&65536)&&(gt.flags|=256),vv(gt,T,M,x,o),kf(la(F,M));break e}}x=F=la(F,M),kt!==4&&(kt=2),Fl===null?Fl=[x]:Fl.push(x),x=T;do{switch(x.tag){case 3:x.flags|=65536,o&=-o,x.lanes|=o;var G=pv(x,F,o);Uy(x,G);break e;case 1:M=F;var z=x.type,Q=x.stateNode;if(!(x.flags&128)&&(typeof z.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Hs===null||!Hs.has(Q)))){x.flags|=65536,o&=-o,x.lanes|=o;var fe=mv(x,M,o);Uy(x,fe);break e}}x=x.return}while(x!==null)}Qv(u)}catch(Ee){o=Ee,_t===u&&u!==null&&(_t=u=u.return);continue}break}while(!0)}function Kv(){var s=Qc.current;return Qc.current=zc,s===null?zc:s}function gp(){(kt===0||kt===3||kt===2)&&(kt=4),Lt===null||!(Ki&268435455)&&!(Yc&268435455)||Gs(Lt,Ut)}function nd(s,o){var u=ze;ze|=2;var f=Kv();(Lt!==s||Ut!==o)&&(hs=null,Qi(s,o));do try{sP();break}catch(g){qv(s,g)}while(!0);if(If(),ze=u,Qc.current=f,_t!==null)throw Error(n(261));return Lt=null,Ut=0,kt}function sP(){for(;_t!==null;)Gv(_t)}function iP(){for(;_t!==null&&!Zu();)Gv(_t)}function Gv(s){var o=Jv(s.alternate,s,Pn);s.memoizedProps=s.pendingProps,o===null?Qv(s):_t=o,ap.current=null}function Qv(s){var o=s;do{var u=o.alternate;if(s=o.return,o.flags&32768){if(u=Jk(u,o),u!==null){u.flags&=32767,_t=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{kt=6,_t=null;return}}else if(u=Xk(u,o,Pn),u!==null){_t=u;return}if(o=o.sibling,o!==null){_t=o;return}_t=o=s}while(o!==null);kt===0&&(kt=5)}function Yi(s,o,u){var f=$e,g=qn.transition;try{qn.transition=null,$e=1,oP(s,o,u,f)}finally{qn.transition=g,$e=f}return null}function oP(s,o,u,f){do ha();while(qs!==null);if(ze&6)throw Error(n(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var x=u.lanes|u.childLanes;if(Ke(s,x),s===Lt&&(_t=Lt=null,Ut=0),!(u.subtreeFlags&2064)&&!(u.flags&2064)||Jc||(Jc=!0,Zv(Fn,function(){return ha(),null})),x=(u.flags&15990)!==0,u.subtreeFlags&15990||x){x=qn.transition,qn.transition=null;var T=$e;$e=1;var M=ze;ze|=4,ap.current=null,eP(s,u),Fv(u,s),Ck(gf),Ls=!!mf,gf=mf=null,s.current=u,tP(u),Jh(),ze=M,$e=T,qn.transition=x}else s.current=u;if(Jc&&(Jc=!1,qs=s,Zc=g),x=s.pendingLanes,x===0&&(Hs=null),nc(u.stateNode),gn(s,Qe()),o!==null)for(f=s.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(Xc)throw Xc=!1,s=cp,cp=null,s;return Zc&1&&s.tag!==0&&ha(),x=s.pendingLanes,x&1?s===dp?$l++:($l=0,dp=s):$l=0,Us(),null}function ha(){if(qs!==null){var s=Ds(Zc),o=qn.transition,u=$e;try{if(qn.transition=null,$e=16>s?16:s,qs===null)var f=!1;else{if(s=qs,qs=null,Zc=0,ze&6)throw Error(n(331));var g=ze;for(ze|=4,xe=s.current;xe!==null;){var x=xe,T=x.child;if(xe.flags&16){var M=x.deletions;if(M!==null){for(var F=0;F<M.length;F++){var X=M[F];for(xe=X;xe!==null;){var le=xe;switch(le.tag){case 0:case 11:case 15:Vl(8,le,x)}var de=le.child;if(de!==null)de.return=le,xe=de;else for(;xe!==null;){le=xe;var oe=le.sibling,ge=le.return;if(jv(le),le===X){xe=null;break}if(oe!==null){oe.return=ge,xe=oe;break}xe=ge}}}var we=x.alternate;if(we!==null){var _e=we.child;if(_e!==null){we.child=null;do{var gt=_e.sibling;_e.sibling=null,_e=gt}while(_e!==null)}}xe=x}}if(x.subtreeFlags&2064&&T!==null)T.return=x,xe=T;else e:for(;xe!==null;){if(x=xe,x.flags&2048)switch(x.tag){case 0:case 11:case 15:Vl(9,x,x.return)}var G=x.sibling;if(G!==null){G.return=x.return,xe=G;break e}xe=x.return}}var z=s.current;for(xe=z;xe!==null;){T=xe;var Q=T.child;if(T.subtreeFlags&2064&&Q!==null)Q.return=T,xe=Q;else e:for(T=z;xe!==null;){if(M=xe,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Gc(9,M)}}catch(Ee){ut(M,M.return,Ee)}if(M===T){xe=null;break e}var fe=M.sibling;if(fe!==null){fe.return=M.return,xe=fe;break e}xe=M.return}}if(ze=g,Us(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(Di,s)}catch{}f=!0}return f}finally{$e=u,qn.transition=o}}return!1}function Yv(s,o,u){o=la(u,o),o=pv(s,o,1),s=zs(s,o,1),o=an(),s!==null&&(Rs(s,1,o),gn(s,o))}function ut(s,o,u){if(s.tag===3)Yv(s,s,u);else for(;o!==null;){if(o.tag===3){Yv(o,s,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Hs===null||!Hs.has(f))){s=la(u,s),s=mv(o,s,1),o=zs(o,s,1),s=an(),o!==null&&(Rs(o,1,s),gn(o,s));break}}o=o.return}}function aP(s,o,u){var f=s.pingCache;f!==null&&f.delete(o),o=an(),s.pingedLanes|=s.suspendedLanes&u,Lt===s&&(Ut&u)===u&&(kt===4||kt===3&&(Ut&130023424)===Ut&&500>Qe()-up?Qi(s,0):lp|=u),gn(s,o)}function Xv(s,o){o===0&&(s.mode&1?(o=Lo,Lo<<=1,!(Lo&130023424)&&(Lo=4194304)):o=1);var u=an();s=us(s,o),s!==null&&(Rs(s,o,u),gn(s,u))}function lP(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Xv(s,u)}function uP(s,o){var u=0;switch(s.tag){case 13:var f=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(o),Xv(s,u)}var Jv;Jv=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||hn.current)pn=!0;else{if(!(s.lanes&u)&&!(o.flags&128))return pn=!1,Yk(s,o,u);pn=!!(s.flags&131072)}else pn=!1,nt&&o.flags&1048576&&Ry(o,Rc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;qc(s,o),s=o.pendingProps;var g=ea(o,Kt.current);oa(o,u),g=$f(null,o,f,s,g,u);var x=Uf();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,fn(f)?(x=!0,Pc(o)):x=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Df(o),g.updater=Wc,o.stateNode=g,g._reactInternals=o,Kf(o,f,s,u),o=Xf(null,o,f,!0,x,u)):(o.tag=0,nt&&x&&bf(o),on(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(qc(s,o),s=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=dP(f),s=hr(f,s),g){case 0:o=Yf(null,o,f,s,u);break e;case 1:o=Tv(null,o,f,s,u);break e;case 11:o=xv(null,o,f,s,u);break e;case 14:o=wv(null,o,f,hr(f.type,s),u);break e}throw Error(n(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:hr(f,g),Yf(s,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:hr(f,g),Tv(s,o,f,g,u);case 3:e:{if(Sv(o),s===null)throw Error(n(387));f=o.pendingProps,x=o.memoizedState,g=x.element,$y(s,o),Vc(o,f,null,u);var T=o.memoizedState;if(f=T.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=x,o.memoizedState=x,o.flags&256){g=la(Error(n(423)),o),o=Cv(s,o,f,u,g);break e}else if(f!==g){g=la(Error(n(424)),o),o=Cv(s,o,f,u,g);break e}else for(kn=Os(o.stateNode.containerInfo.firstChild),Cn=o,nt=!0,dr=null,u=Oy(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ra(),f===g){o=ds(s,o,u);break e}on(s,o,f,u)}o=o.child}return o;case 5:return zy(o),s===null&&Cf(o),f=o.type,g=o.pendingProps,x=s!==null?s.memoizedProps:null,T=g.children,yf(f,g)?T=null:x!==null&&yf(f,x)&&(o.flags|=32),bv(s,o),on(s,o,T,u),o.child;case 6:return s===null&&Cf(o),null;case 13:return kv(s,o,u);case 4:return jf(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=sa(o,null,f,u):on(s,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:hr(f,g),xv(s,o,f,g,u);case 7:return on(s,o,o.pendingProps,u),o.child;case 8:return on(s,o,o.pendingProps.children,u),o.child;case 12:return on(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,x=o.memoizedProps,T=g.value,Ye(jc,f._currentValue),f._currentValue=T,x!==null)if(cr(x.value,T)){if(x.children===g.children&&!hn.current){o=ds(s,o,u);break e}}else for(x=o.child,x!==null&&(x.return=o);x!==null;){var M=x.dependencies;if(M!==null){T=x.child;for(var F=M.firstContext;F!==null;){if(F.context===f){if(x.tag===1){F=cs(-1,u&-u),F.tag=2;var X=x.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?F.next=F:(F.next=le.next,le.next=F),X.pending=F}}x.lanes|=u,F=x.alternate,F!==null&&(F.lanes|=u),Rf(x.return,u,o),M.lanes|=u;break}F=F.next}}else if(x.tag===10)T=x.type===o.type?null:x.child;else if(x.tag===18){if(T=x.return,T===null)throw Error(n(341));T.lanes|=u,M=T.alternate,M!==null&&(M.lanes|=u),Rf(T,u,o),T=x.sibling}else T=x.child;if(T!==null)T.return=x;else for(T=x;T!==null;){if(T===o){T=null;break}if(x=T.sibling,x!==null){x.return=T.return,T=x;break}T=T.return}x=T}on(s,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,oa(o,u),g=Wn(g),f=f(g),o.flags|=1,on(s,o,f,u),o.child;case 14:return f=o.type,g=hr(f,o.pendingProps),g=hr(f.type,g),wv(s,o,f,g,u);case 15:return _v(s,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:hr(f,g),qc(s,o),o.tag=1,fn(f)?(s=!0,Pc(o)):s=!1,oa(o,u),hv(o,f,g),Kf(o,f,g,u),Xf(null,o,f,!0,s,u);case 19:return Iv(s,o,u);case 22:return Ev(s,o,u)}throw Error(n(156,o.tag))};function Zv(s,o){return Do(s,o)}function cP(s,o,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(s,o,u,f){return new cP(s,o,u,f)}function yp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function dP(s){if(typeof s=="function")return yp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===U)return 11;if(s===me)return 14}return 2}function Qs(s,o){var u=s.alternate;return u===null?(u=Kn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function rd(s,o,u,f,g,x){var T=2;if(f=s,typeof s=="function")yp(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case k:return Xi(u.children,g,x,o);case E:T=8,g|=8;break;case S:return s=Kn(12,u,o,g|2),s.elementType=S,s.lanes=x,s;case D:return s=Kn(13,u,o,g),s.elementType=D,s.lanes=x,s;case ie:return s=Kn(19,u,o,g),s.elementType=ie,s.lanes=x,s;case te:return sd(u,g,x,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:T=10;break e;case V:T=9;break e;case U:T=11;break e;case me:T=14;break e;case ae:T=16,f=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return o=Kn(T,u,o,g),o.elementType=s,o.type=f,o.lanes=x,o}function Xi(s,o,u,f){return s=Kn(7,s,f,o),s.lanes=u,s}function sd(s,o,u,f){return s=Kn(22,s,f,o),s.elementType=te,s.lanes=u,s.stateNode={isHidden:!1},s}function vp(s,o,u){return s=Kn(6,s,null,o),s.lanes=u,s}function xp(s,o,u){return o=Kn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function hP(s,o,u,f,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=As(0),this.expirationTimes=As(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=As(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function wp(s,o,u,f,g,x,T,M,F){return s=new hP(s,o,u,M,F),o===1?(o=1,x===!0&&(o|=8)):o=0,x=Kn(3,null,null,o),s.current=x,x.stateNode=s,x.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Df(x),s}function fP(s,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:f==null?null:""+f,children:s,containerInfo:o,implementation:u}}function ex(s){if(!s)return $s;s=s._reactInternals;e:{if(rr(s)!==s||s.tag!==1)throw Error(n(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(fn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(s.tag===1){var u=s.type;if(fn(u))return Py(s,u,o)}return o}function tx(s,o,u,f,g,x,T,M,F){return s=wp(u,f,!0,s,g,x,T,M,F),s.context=ex(null),u=s.current,f=an(),g=Ks(u),x=cs(f,g),x.callback=o??null,zs(u,x,g),s.current.lanes=g,Rs(s,g,f),gn(s,f),s}function id(s,o,u,f){var g=o.current,x=an(),T=Ks(g);return u=ex(u),o.context===null?o.context=u:o.pendingContext=u,o=cs(x,T),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=zs(g,o,T),s!==null&&(mr(s,g,T,x),Mc(s,g,T)),T}function od(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function nx(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function _p(s,o){nx(s,o),(s=s.alternate)&&nx(s,o)}function pP(){return null}var rx=typeof reportError=="function"?reportError:function(s){console.error(s)};function Ep(s){this._internalRoot=s}ad.prototype.render=Ep.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));id(s,o,null,null)},ad.prototype.unmount=Ep.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Gi(function(){id(null,s,null,null)}),o[is]=null}};function ad(s){this._internalRoot=s}ad.prototype.unstable_scheduleHydration=function(s){if(s){var o=ac();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Sr.length&&o!==0&&o<Sr[u].priority;u++);Sr.splice(u,0,s),u===0&&cc(s)}};function bp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ld(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function sx(){}function mP(s,o,u,f,g){if(g){if(typeof f=="function"){var x=f;f=function(){var X=od(T);x.call(X)}}var T=tx(o,f,s,0,null,!1,!1,"",sx);return s._reactRootContainer=T,s[is]=T.current,Tl(s.nodeType===8?s.parentNode:s),Gi(),T}for(;g=s.lastChild;)s.removeChild(g);if(typeof f=="function"){var M=f;f=function(){var X=od(F);M.call(X)}}var F=wp(s,0,!1,null,null,!1,!1,"",sx);return s._reactRootContainer=F,s[is]=F.current,Tl(s.nodeType===8?s.parentNode:s),Gi(function(){id(o,F,u,f)}),F}function ud(s,o,u,f,g){var x=u._reactRootContainer;if(x){var T=x;if(typeof g=="function"){var M=g;g=function(){var F=od(T);M.call(F)}}id(o,T,s,g)}else T=mP(u,o,s,g,f);return od(T)}ic=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=Is(o.pendingLanes);u!==0&&(Ns(o,u|1),gn(o,Qe()),!(ze&6)&&(da=Qe()+500,Us()))}break;case 13:Gi(function(){var f=us(s,1);if(f!==null){var g=an();mr(f,s,1,g)}}),_p(s,1)}},Mo=function(s){if(s.tag===13){var o=us(s,134217728);if(o!==null){var u=an();mr(o,s,134217728,u)}_p(s,134217728)}},oc=function(s){if(s.tag===13){var o=Ks(s),u=us(s,o);if(u!==null){var f=an();mr(u,s,o,f)}_p(s,o)}},ac=function(){return $e},lc=function(s,o){var u=$e;try{return $e=s,o()}finally{$e=u}},ko=function(s,o,u){switch(o){case"input":if(Qr(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==s&&f.form===s.form){var g=Cc(f);if(!g)throw Error(n(90));Kr(f),Qr(f,g)}}}break;case"textarea":So(s,u);break;case"select":o=u.value,o!=null&&Xr(s,!!u.multiple,o,!1)}},Pi=pp,il=Gi;var gP={usingClientEntryPoint:!1,Events:[kl,Jo,Cc,br,sl,pp]},Ul={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yP={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=ll(s),s===null?null:s.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||pP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cd.isDisabled&&cd.supportsFiber)try{Di=cd.inject(yP),En=cd}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gP,yn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bp(o))throw Error(n(200));return fP(s,o,null,u)},yn.createRoot=function(s,o){if(!bp(s))throw Error(n(299));var u=!1,f="",g=rx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=wp(s,1,!1,null,null,u,!1,f,g),s[is]=o.current,Tl(s.nodeType===8?s.parentNode:s),new Ep(o)},yn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=ll(o),s=s===null?null:s.stateNode,s},yn.flushSync=function(s){return Gi(s)},yn.hydrate=function(s,o,u){if(!ld(o))throw Error(n(200));return ud(null,s,o,!0,u)},yn.hydrateRoot=function(s,o,u){if(!bp(s))throw Error(n(405));var f=u!=null&&u.hydratedSources||null,g=!1,x="",T=rx;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),o=tx(o,null,s,1,u??null,g,!1,x,T),s[is]=o.current,Tl(s),f)for(s=0;s<f.length;s++)u=f[s],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new ad(o)},yn.render=function(s,o,u){if(!ld(o))throw Error(n(200));return ud(null,s,o,!1,u)},yn.unmountComponentAtNode=function(s){if(!ld(s))throw Error(n(40));return s._reactRootContainer?(Gi(function(){ud(null,null,s,!1,function(){s._reactRootContainer=null,s[is]=null})}),!0):!1},yn.unstable_batchedUpdates=pp,yn.unstable_renderSubtreeIntoContainer=function(s,o,u,f){if(!ld(u))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return ud(s,o,u,!1,f)},yn.version="18.3.1-next-f1338f8080-20240426",yn}var hx;function TE(){if(hx)return Cp.exports;hx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cp.exports=TP(),Cp.exports}var fx;function SP(){if(fx)return dd;fx=1;var t=TE();return dd.createRoot=t.createRoot,dd.hydrateRoot=t.hydrateRoot,dd}var CP=SP();const kP=ig(CP);var zl={},px;function PP(){if(px)return zl;px=1,Object.defineProperty(zl,"__esModule",{value:!0}),zl.parse=l,zl.serialize=p;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,a=(()=>{const _=function(){};return _.prototype=Object.create(null),_})();function l(_,C){const R=new a,j=_.length;if(j<2)return R;const N=(C==null?void 0:C.decode)||y;let L=0;do{const H=_.indexOf("=",L);if(H===-1)break;const $=_.indexOf(";",L),q=$===-1?j:$;if(H>q){L=_.lastIndexOf(";",H-1)+1;continue}const W=c(_,L,H),O=d(_,H,W),k=_.slice(W,O);if(R[k]===void 0){let E=c(_,H+1,q),S=d(_,q,E);const I=N(_.slice(E,S));R[k]=I}L=q+1}while(L<j);return R}function c(_,C,R){do{const j=_.charCodeAt(C);if(j!==32&&j!==9)return C}while(++C<R);return R}function d(_,C,R){for(;C>R;){const j=_.charCodeAt(--C);if(j!==32&&j!==9)return C+1}return R}function p(_,C,R){const j=(R==null?void 0:R.encode)||encodeURIComponent;if(!t.test(_))throw new TypeError(`argument name is invalid: ${_}`);const N=j(C);if(!e.test(N))throw new TypeError(`argument val is invalid: ${C}`);let L=_+"="+N;if(!R)return L;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);L+="; Max-Age="+R.maxAge}if(R.domain){if(!n.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);L+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);L+="; Path="+R.path}if(R.expires){if(!w(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);L+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(L+="; HttpOnly"),R.secure&&(L+="; Secure"),R.partitioned&&(L+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":L+="; Priority=Low";break;case"medium":L+="; Priority=Medium";break;case"high":L+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":L+="; SameSite=Strict";break;case"lax":L+="; SameSite=Lax";break;case"none":L+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return L}function y(_){if(_.indexOf("%")===-1)return _;try{return decodeURIComponent(_)}catch{return _}}function w(_){return i.call(_)==="[object Date]"}return zl}PP();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mx="popstate";function IP(t={}){function e(r,i){let{pathname:a,search:l,hash:c}=r.location;return am("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hu(i)}return RP(e,n,null,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Br(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AP(){return Math.random().toString(36).substring(2,10)}function gx(t,e){return{usr:t.state,key:t.key,idx:e}}function am(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$a(e):e,state:n,key:e&&e.key||r||AP()}}function hu({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $a(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function RP(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,c="POP",d=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function w(){c="POP";let N=y(),L=N==null?null:N-p;p=N,d&&d({action:c,location:j.location,delta:L})}function _(N,L){c="PUSH";let H=am(j.location,N,L);p=y()+1;let $=gx(H,p),q=j.createHref(H);try{l.pushState($,"",q)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;i.location.assign(q)}a&&d&&d({action:c,location:j.location,delta:1})}function C(N,L){c="REPLACE";let H=am(j.location,N,L);p=y();let $=gx(H,p),q=j.createHref(H);l.replaceState($,"",q),a&&d&&d({action:c,location:j.location,delta:0})}function R(N){let L=i.location.origin!=="null"?i.location.origin:i.location.href,H=typeof N=="string"?N:hu(N);return H=H.replace(/ $/,"%20"),at(L,`No window.location.(origin|href) available to create URL for href: ${H}`),new URL(H,L)}let j={get action(){return c},get location(){return t(i,l)},listen(N){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(mx,w),d=N,()=>{i.removeEventListener(mx,w),d=null}},createHref(N){return e(i,N)},createURL:R,encodeLocation(N){let L=R(N);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:_,replace:C,go(N){return l.go(N)}};return j}function SE(t,e,n="/"){return NP(t,e,n,!1)}function NP(t,e,n,r){let i=typeof e=="string"?$a(e):e,a=ui(i.pathname||"/",n);if(a==null)return null;let l=CE(t);DP(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=WP(a);c=BP(l[d],p,r)}return c}function CE(t,e=[],n=[],r=""){let i=(a,l,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(at(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length));let p=gs([r,d.relativePath]),y=n.concat(d);a.children&&a.children.length>0&&(at(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),CE(a.children,e,y,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:$P(p,a.index),routesMeta:y})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let d of kE(a.path))i(a,l,d)}),e}function kE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=kE(r.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...l),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function DP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var jP=/^:[\w-]+$/,LP=3,MP=2,VP=1,OP=10,FP=-2,yx=t=>t==="*";function $P(t,e){let n=t.split("/"),r=n.length;return n.some(yx)&&(r+=FP),e&&(r+=MP),n.filter(i=>!yx(i)).reduce((i,a)=>i+(jP.test(a)?LP:a===""?VP:OP),r)}function UP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function BP(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],p=c===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",w=Bd({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),_=d.route;if(!w&&p&&n&&!r[r.length-1].route.index&&(w=Bd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!w)return null;Object.assign(i,w.params),l.push({params:i,pathname:gs([a,w.pathname]),pathnameBase:GP(gs([a,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(a=gs([a,w.pathnameBase]))}return l}function Bd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:w},_)=>{if(y==="*"){let R=c[_]||"";l=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const C=c[_];return w&&!C?p[y]=void 0:p[y]=(C||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:t}}function zP(t,e=!1,n=!0){Br(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function WP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ui(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HP(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?$a(t):t;return{pathname:n?n.startsWith("/")?n:qP(n,e):e,search:QP(r),hash:YP(i)}}function qP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ip(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function KP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PE(t){let e=KP(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function IE(t,e,n,r=!1){let i;typeof t=="string"?i=$a(t):(i={...t},at(!i.pathname||!i.pathname.includes("?"),Ip("?","pathname","search",i)),at(!i.pathname||!i.pathname.includes("#"),Ip("#","pathname","hash",i)),at(!i.search||!i.search.includes("#"),Ip("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=n;else{let w=e.length-1;if(!r&&l.startsWith("..")){let _=l.split("/");for(;_[0]==="..";)_.shift(),w-=1;i.pathname=_.join("/")}c=w>=0?e[w]:"/"}let d=HP(i,c),p=l&&l!=="/"&&l.endsWith("/"),y=(a||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var gs=t=>t.join("/").replace(/\/\/+/g,"/"),GP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var AE=["POST","PUT","PATCH","DELETE"];new Set(AE);var JP=["GET",...AE];new Set(JP);var Ua=P.createContext(null);Ua.displayName="DataRouter";var gh=P.createContext(null);gh.displayName="DataRouterState";var RE=P.createContext({isTransitioning:!1});RE.displayName="ViewTransition";var ZP=P.createContext(new Map);ZP.displayName="Fetchers";var eI=P.createContext(null);eI.displayName="Await";var Hr=P.createContext(null);Hr.displayName="Navigation";var Iu=P.createContext(null);Iu.displayName="Location";var wr=P.createContext({outlet:null,matches:[],isDataRoute:!1});wr.displayName="Route";var ag=P.createContext(null);ag.displayName="RouteError";function tI(t,{relative:e}={}){at(Au(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Hr),{hash:i,pathname:a,search:l}=Ru(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:gs([n,a])),r.createHref({pathname:c,search:l,hash:i})}function Au(){return P.useContext(Iu)!=null}function xi(){return at(Au(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Iu).location}var NE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function DE(t){P.useContext(Hr).static||P.useLayoutEffect(t)}function _n(){let{isDataRoute:t}=P.useContext(wr);return t?gI():nI()}function nI(){at(Au(),"useNavigate() may be used only in the context of a <Router> component.");let t=P.useContext(Ua),{basename:e,navigator:n}=P.useContext(Hr),{matches:r}=P.useContext(wr),{pathname:i}=xi(),a=JSON.stringify(PE(r)),l=P.useRef(!1);return DE(()=>{l.current=!0}),P.useCallback((d,p={})=>{if(Br(l.current,NE),!l.current)return;if(typeof d=="number"){n.go(d);return}let y=IE(d,JSON.parse(a),i,p.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:gs([e,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[e,n,a,i,t])}var rI=P.createContext(null);function sI(t){let e=P.useContext(wr).outlet;return e&&P.createElement(rI.Provider,{value:t},e)}function yh(){let{matches:t}=P.useContext(wr),e=t[t.length-1];return e?e.params:{}}function Ru(t,{relative:e}={}){let{matches:n}=P.useContext(wr),{pathname:r}=xi(),i=JSON.stringify(PE(n));return P.useMemo(()=>IE(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function iI(t,e){return jE(t,e)}function jE(t,e,n,r){var H;at(Au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=P.useContext(Hr),{matches:l}=P.useContext(wr),c=l[l.length-1],d=c?c.params:{},p=c?c.pathname:"/",y=c?c.pathnameBase:"/",w=c&&c.route;{let $=w&&w.path||"";LE(p,!w||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let _=xi(),C;if(e){let $=typeof e=="string"?$a(e):e;at(y==="/"||((H=$.pathname)==null?void 0:H.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${$.pathname}" was given in the \`location\` prop.`),C=$}else C=_;let R=C.pathname||"/",j=R;if(y!=="/"){let $=y.replace(/^\//,"").split("/");j="/"+R.replace(/^\//,"").split("/").slice($.length).join("/")}let N=!a&&n&&n.matches&&n.matches.length>0?n.matches:SE(t,{pathname:j});Br(w||N!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Br(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=cI(N&&N.map($=>Object.assign({},$,{params:Object.assign({},d,$.params),pathname:gs([y,i.encodeLocation?i.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?y:gs([y,i.encodeLocation?i.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,n,r);return e&&L?P.createElement(Iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},L):L}function oI(){let t=mI(),e=XP(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:i},n):null,l)}var aI=P.createElement(oI,null),lI=class extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?P.createElement(wr.Provider,{value:this.props.routeContext},P.createElement(ag.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function uI({routeContext:t,match:e,children:n}){let r=P.useContext(Ua);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(wr.Provider,{value:t},n)}function cI(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let d=i.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);at(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let p=i[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:y,errors:w}=n,_=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!w||w[p.route.id]===void 0);if(p.route.lazy||_){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,p,y)=>{let w,_=!1,C=null,R=null;n&&(w=a&&p.route.id?a[p.route.id]:void 0,C=p.route.errorElement||aI,l&&(c<0&&y===0?(LE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,R=null):c===y&&(_=!0,R=p.route.hydrateFallbackElement||null)));let j=e.concat(i.slice(0,y+1)),N=()=>{let L;return w?L=C:_?L=R:p.route.Component?L=P.createElement(p.route.Component,null):p.route.element?L=p.route.element:L=d,P.createElement(uI,{match:p,routeContext:{outlet:d,matches:j,isDataRoute:n!=null},children:L})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?P.createElement(lI,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):N()},null)}function lg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dI(t){let e=P.useContext(Ua);return at(e,lg(t)),e}function hI(t){let e=P.useContext(gh);return at(e,lg(t)),e}function fI(t){let e=P.useContext(wr);return at(e,lg(t)),e}function ug(t){let e=fI(t),n=e.matches[e.matches.length-1];return at(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function pI(){return ug("useRouteId")}function mI(){var r;let t=P.useContext(ag),e=hI("useRouteError"),n=ug("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function gI(){let{router:t}=dI("useNavigate"),e=ug("useNavigate"),n=P.useRef(!1);return DE(()=>{n.current=!0}),P.useCallback(async(i,a={})=>{Br(n.current,NE),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var vx={};function LE(t,e,n){!e&&!vx[t]&&(vx[t]=!0,Br(!1,n))}P.memo(yI);function yI({routes:t,future:e,state:n}){return jE(t,void 0,n,e)}function vI(t){return sI(t.context)}function Xe(t){at(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xI({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){at(!Au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=P.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof n=="string"&&(n=$a(n));let{pathname:d="/",search:p="",hash:y="",state:w=null,key:_="default"}=n,C=P.useMemo(()=>{let R=ui(d,l);return R==null?null:{location:{pathname:R,search:p,hash:y,state:w,key:_},navigationType:r}},[l,d,p,y,w,_,r]);return Br(C!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:P.createElement(Hr.Provider,{value:c},P.createElement(Iu.Provider,{children:e,value:C}))}function wI({children:t,location:e}){return iI(lm(t),e)}function lm(t,e=[]){let n=[];return P.Children.forEach(t,(r,i)=>{if(!P.isValidElement(r))return;let a=[...e,i];if(r.type===P.Fragment){n.push.apply(n,lm(r.props.children,a));return}at(r.type===Xe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),at(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=lm(r.props.children,a)),n.push(l)}),n}var Cd="get",kd="application/x-www-form-urlencoded";function vh(t){return t!=null&&typeof t.tagName=="string"}function _I(t){return vh(t)&&t.tagName.toLowerCase()==="button"}function EI(t){return vh(t)&&t.tagName.toLowerCase()==="form"}function bI(t){return vh(t)&&t.tagName.toLowerCase()==="input"}function TI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function SI(t,e){return t.button===0&&(!e||e==="_self")&&!TI(t)}var hd=null;function CI(){if(hd===null)try{new FormData(document.createElement("form"),0),hd=!1}catch{hd=!0}return hd}var kI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ap(t){return t!=null&&!kI.has(t)?(Br(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kd}"`),null):t}function PI(t,e){let n,r,i,a,l;if(EI(t)){let c=t.getAttribute("action");r=c?ui(c,e):null,n=t.getAttribute("method")||Cd,i=Ap(t.getAttribute("enctype"))||kd,a=new FormData(t)}else if(_I(t)||bI(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||c.getAttribute("action");if(r=d?ui(d,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Cd,i=Ap(t.getAttribute("formenctype"))||Ap(c.getAttribute("enctype"))||kd,a=new FormData(c,t),!CI()){let{name:p,type:y,value:w}=t;if(y==="image"){let _=p?`${p}.`:"";a.append(`${_}x`,"0"),a.append(`${_}y`,"0")}else p&&a.append(p,w)}}else{if(vh(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Cd,r=null,i=kd,l=t}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}function cg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function II(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function RI(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await II(a,n);return l.links?l.links():[]}return[]}));return LI(r.flat(1).filter(AI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function xx(t,e,n,r,i,a){let l=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,c=(d,p)=>{var y;return n[p].pathname!==d.pathname||((y=n[p].route.path)==null?void 0:y.endsWith("*"))&&n[p].params["*"]!==d.params["*"]};return a==="assets"?e.filter((d,p)=>l(d,p)||c(d,p)):a==="data"?e.filter((d,p)=>{var w;let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(l(d,p)||c(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function NI(t,e){return DI(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function DI(t){return[...new Set(t)]}function jI(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function LI(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(jI(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function MI(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function VI(){let t=P.useContext(Ua);return cg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function OI(){let t=P.useContext(gh);return cg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var dg=P.createContext(void 0);dg.displayName="FrameworkContext";function ME(){let t=P.useContext(dg);return cg(t,"You must render this element inside a <HydratedRouter> element"),t}function FI(t,e){let n=P.useContext(dg),[r,i]=P.useState(!1),[a,l]=P.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:w}=e,_=P.useRef(null);P.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let j=L=>{L.forEach(H=>{l(H.isIntersecting)})},N=new IntersectionObserver(j,{threshold:.5});return _.current&&N.observe(_.current),()=>{N.disconnect()}}},[t]),P.useEffect(()=>{if(r){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[r]);let C=()=>{i(!0)},R=()=>{i(!1),l(!1)};return n?t!=="intent"?[a,_,{}]:[a,_,{onFocus:Wl(c,C),onBlur:Wl(d,R),onMouseEnter:Wl(p,C),onMouseLeave:Wl(y,R),onTouchStart:Wl(w,C)}]:[!1,_,{}]}function Wl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $I({page:t,...e}){let{router:n}=VI(),r=P.useMemo(()=>SE(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?P.createElement(BI,{page:t,matches:r,...e}):null}function UI(t){let{manifest:e,routeModules:n}=ME(),[r,i]=P.useState([]);return P.useEffect(()=>{let a=!1;return RI(t,e,n).then(l=>{a||i(l)}),()=>{a=!0}},[t,e,n]),r}function BI({page:t,matches:e,...n}){let r=xi(),{manifest:i,routeModules:a}=ME(),{loaderData:l,matches:c}=OI(),d=P.useMemo(()=>xx(t,e,c,i,r,"data"),[t,e,c,i,r]),p=P.useMemo(()=>xx(t,e,c,i,r,"assets"),[t,e,c,i,r]),y=P.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let C=new Set,R=!1;if(e.forEach(N=>{var H;let L=i.routes[N.route.id];!L||!L.hasLoader||(!d.some($=>$.route.id===N.route.id)&&N.route.id in l&&((H=a[N.route.id])!=null&&H.shouldRevalidate)||L.hasClientLoader?R=!0:C.add(N.route.id))}),C.size===0)return[];let j=MI(t);return R&&C.size>0&&j.searchParams.set("_routes",e.filter(N=>C.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[l,r,i,d,e,t,a]),w=P.useMemo(()=>NI(p,i),[p,i]),_=UI(p);return P.createElement(P.Fragment,null,y.map(C=>P.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...n})),w.map(C=>P.createElement("link",{key:C,rel:"modulepreload",href:C,...n})),_.map(({key:C,link:R})=>P.createElement("link",{key:C,...R})))}function zI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var VE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VE&&(window.__reactRouterVersion="7.1.5")}catch{}function WI({basename:t,children:e,window:n}){let r=P.useRef();r.current==null&&(r.current=IP({window:n,v5Compat:!0}));let i=r.current,[a,l]=P.useState({action:i.action,location:i.location}),c=P.useCallback(d=>{P.startTransition(()=>l(d))},[l]);return P.useLayoutEffect(()=>i.listen(c),[i,c]),P.createElement(xI,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var OE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xn=P.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:c,target:d,to:p,preventScrollReset:y,viewTransition:w,..._},C){let{basename:R}=P.useContext(Hr),j=typeof p=="string"&&OE.test(p),N,L=!1;if(typeof p=="string"&&j&&(N=p,VE))try{let S=new URL(window.location.href),I=p.startsWith("//")?new URL(S.protocol+p):new URL(p),V=ui(I.pathname,R);I.origin===S.origin&&V!=null?p=V+I.search+I.hash:L=!0}catch{Br(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=tI(p,{relative:i}),[$,q,W]=FI(r,_),O=GI(p,{replace:l,state:c,target:d,preventScrollReset:y,relative:i,viewTransition:w});function k(S){e&&e(S),S.defaultPrevented||O(S)}let E=P.createElement("a",{..._,...W,href:N||H,onClick:L||a?e:k,ref:zI(C,q),target:d,"data-discover":!j&&n==="render"?"true":void 0});return $&&!j?P.createElement(P.Fragment,null,E,P.createElement($I,{page:H})):E});Xn.displayName="Link";var HI=P.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:c,children:d,...p},y){let w=Ru(l,{relative:p.relative}),_=xi(),C=P.useContext(gh),{navigator:R,basename:j}=P.useContext(Hr),N=C!=null&&ZI(w)&&c===!0,L=R.encodeLocation?R.encodeLocation(w).pathname:w.pathname,H=_.pathname,$=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(H=H.toLowerCase(),$=$?$.toLowerCase():null,L=L.toLowerCase()),$&&j&&($=ui($,j)||$);const q=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let W=H===L||!i&&H.startsWith(L)&&H.charAt(q)==="/",O=$!=null&&($===L||!i&&$.startsWith(L)&&$.charAt(L.length)==="/"),k={isActive:W,isPending:O,isTransitioning:N},E=W?e:void 0,S;typeof r=="function"?S=r(k):S=[r,W?"active":null,O?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(k):a;return P.createElement(Xn,{...p,"aria-current":E,className:S,ref:y,style:I,to:l,viewTransition:c},typeof d=="function"?d(k):d)});HI.displayName="NavLink";var qI=P.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:l=Cd,action:c,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:w,..._},C)=>{let R=XI(),j=JI(c,{relative:p}),N=l.toLowerCase()==="get"?"get":"post",L=typeof c=="string"&&OE.test(c),H=$=>{if(d&&d($),$.defaultPrevented)return;$.preventDefault();let q=$.nativeEvent.submitter,W=(q==null?void 0:q.getAttribute("formmethod"))||l;R(q||$.currentTarget,{fetcherKey:e,method:W,navigate:n,replace:i,state:a,relative:p,preventScrollReset:y,viewTransition:w})};return P.createElement("form",{ref:C,method:N,action:j,onSubmit:r?d:H,..._,"data-discover":!L&&t==="render"?"true":void 0})});qI.displayName="Form";function KI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FE(t){let e=P.useContext(Ua);return at(e,KI(t)),e}function GI(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let c=_n(),d=xi(),p=Ru(t,{relative:a});return P.useCallback(y=>{if(SI(y,e)){y.preventDefault();let w=n!==void 0?n:hu(d)===hu(p);c(t,{replace:w,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[d,c,p,n,r,e,t,i,a,l])}var QI=0,YI=()=>`__${String(++QI)}__`;function XI(){let{router:t}=FE("useSubmit"),{basename:e}=P.useContext(Hr),n=pI();return P.useCallback(async(r,i={})=>{let{action:a,method:l,encType:c,formData:d,body:p}=PI(r,e);if(i.navigate===!1){let y=i.fetcherKey||YI();await t.fetch(y,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:d,body:p,formMethod:i.method||l,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function JI(t,{relative:e}={}){let{basename:n}=P.useContext(Hr),r=P.useContext(wr);at(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Ru(t||".",{relative:e})},l=xi();if(t==null){a.search=l.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(y=>y==="")){c.delete("index"),d.filter(w=>w).forEach(w=>c.append("index",w));let y=c.toString();a.search=y?`?${y}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:gs([n,a.pathname])),hu(a)}function ZI(t,e={}){let n=P.useContext(RE);at(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=FE("useViewTransitionState"),i=Ru(t,{relative:e.relative});if(!n.isTransitioning)return!1;let a=ui(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=ui(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Bd(i.pathname,l)!=null||Bd(i.pathname,a)!=null}new TextEncoder;var eA=TE();const fd=ig(eA);function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(null,arguments)}function hg(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function um(t,e){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},um(t,e)}function fg(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,um(t,e)}function tA(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function nA(t,e){t.classList?t.classList.add(e):tA(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function wx(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function rA(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=wx(t.className,e):t.setAttribute("class",wx(t.className&&t.className.baseVal||"",e))}const _x={disabled:!1},Wd=Yn.createContext(null);var $E=function(e){return e.scrollTop},Kl="unmounted",Zi="exited",eo="entering",pa="entered",cm="exiting",Cs=function(t){fg(e,t);function e(r,i){var a;a=t.call(this,r,i)||this;var l=i,c=l&&!l.isMounting?r.enter:r.appear,d;return a.appearStatus=null,r.in?c?(d=Zi,a.appearStatus=eo):d=pa:r.unmountOnExit||r.mountOnEnter?d=Kl:d=Zi,a.state={status:d},a.nextCallback=null,a}e.getDerivedStateFromProps=function(i,a){var l=i.in;return l&&a.status===Kl?{status:Zi}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var a=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==eo&&l!==pa&&(a=eo):(l===eo||l===pa)&&(a=cm)}this.updateStatus(!1,a)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,a,l,c;return a=l=c=i,i!=null&&typeof i!="number"&&(a=i.exit,l=i.enter,c=i.appear!==void 0?i.appear:l),{exit:a,enter:l,appear:c}},n.updateStatus=function(i,a){if(i===void 0&&(i=!1),a!==null)if(this.cancelNextCallback(),a===eo){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:fd.findDOMNode(this);l&&$E(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zi&&this.setState({status:Kl})},n.performEnter=function(i){var a=this,l=this.props.enter,c=this.context?this.context.isMounting:i,d=this.props.nodeRef?[c]:[fd.findDOMNode(this),c],p=d[0],y=d[1],w=this.getTimeouts(),_=c?w.appear:w.enter;if(!i&&!l||_x.disabled){this.safeSetState({status:pa},function(){a.props.onEntered(p)});return}this.props.onEnter(p,y),this.safeSetState({status:eo},function(){a.props.onEntering(p,y),a.onTransitionEnd(_,function(){a.safeSetState({status:pa},function(){a.props.onEntered(p,y)})})})},n.performExit=function(){var i=this,a=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:fd.findDOMNode(this);if(!a||_x.disabled){this.safeSetState({status:Zi},function(){i.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:cm},function(){i.props.onExiting(c),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:Zi},function(){i.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,a){a=this.setNextCallback(a),this.setState(i,a)},n.setNextCallback=function(i){var a=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,a.nextCallback=null,i(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(i,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:fd.findDOMNode(this),c=i==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],y=d[1];this.props.addEndListener(p,y)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Kl)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var c=hg(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Yn.createElement(Wd.Provider,{value:null},typeof l=="function"?l(i,c):Yn.cloneElement(Yn.Children.only(l),c))},e}(Yn.Component);Cs.contextType=Wd;Cs.propTypes={};function fa(){}Cs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fa,onEntering:fa,onEntered:fa,onExit:fa,onExiting:fa,onExited:fa};Cs.UNMOUNTED=Kl;Cs.EXITED=Zi;Cs.ENTERING=eo;Cs.ENTERED=pa;Cs.EXITING=cm;var sA=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return nA(e,r)})},Rp=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return rA(e,r)})},xh=function(t){fg(e,t);function e(){for(var r,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=t.call.apply(t,[this].concat(a))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(c,d){var p=r.resolveArguments(c,d),y=p[0],w=p[1];r.removeClasses(y,"exit"),r.addClass(y,w?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(c,d)},r.onEntering=function(c,d){var p=r.resolveArguments(c,d),y=p[0],w=p[1],_=w?"appear":"enter";r.addClass(y,_,"active"),r.props.onEntering&&r.props.onEntering(c,d)},r.onEntered=function(c,d){var p=r.resolveArguments(c,d),y=p[0],w=p[1],_=w?"appear":"enter";r.removeClasses(y,_),r.addClass(y,_,"done"),r.props.onEntered&&r.props.onEntered(c,d)},r.onExit=function(c){var d=r.resolveArguments(c),p=d[0];r.removeClasses(p,"appear"),r.removeClasses(p,"enter"),r.addClass(p,"exit","base"),r.props.onExit&&r.props.onExit(c)},r.onExiting=function(c){var d=r.resolveArguments(c),p=d[0];r.addClass(p,"exit","active"),r.props.onExiting&&r.props.onExiting(c)},r.onExited=function(c){var d=r.resolveArguments(c),p=d[0];r.removeClasses(p,"exit"),r.addClass(p,"exit","done"),r.props.onExited&&r.props.onExited(c)},r.resolveArguments=function(c,d){return r.props.nodeRef?[r.props.nodeRef.current,c]:[c,d]},r.getClassNames=function(c){var d=r.props.classNames,p=typeof d=="string",y=p&&d?d+"-":"",w=p?""+y+c:d[c],_=p?w+"-active":d[c+"Active"],C=p?w+"-done":d[c+"Done"];return{baseClassName:w,activeClassName:_,doneClassName:C}},r}var n=e.prototype;return n.addClass=function(i,a,l){var c=this.getClassNames(a)[l+"ClassName"],d=this.getClassNames("enter"),p=d.doneClassName;a==="appear"&&l==="done"&&p&&(c+=" "+p),l==="active"&&i&&$E(i),c&&(this.appliedClasses[a][l]=c,sA(i,c))},n.removeClasses=function(i,a){var l=this.appliedClasses[a],c=l.base,d=l.active,p=l.done;this.appliedClasses[a]={},c&&Rp(i,c),d&&Rp(i,d),p&&Rp(i,p)},n.render=function(){var i=this.props;i.classNames;var a=hg(i,["classNames"]);return Yn.createElement(Cs,zd({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(Yn.Component);xh.defaultProps={classNames:""};xh.propTypes={};function iA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pg(t,e){var n=function(a){return e&&P.isValidElement(a)?e(a):a},r=Object.create(null);return t&&P.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function oA(t,e){t=t||{},e=e||{};function n(y){return y in e?e[y]:t[y]}var r=Object.create(null),i=[];for(var a in t)a in e?i.length&&(r[a]=i,i=[]):i.push(a);var l,c={};for(var d in e){if(r[d])for(l=0;l<r[d].length;l++){var p=r[d][l];c[r[d][l]]=n(p)}c[d]=n(d)}for(l=0;l<i.length;l++)c[i[l]]=n(i[l]);return c}function ro(t,e,n){return n[e]!=null?n[e]:t.props[e]}function aA(t,e){return pg(t.children,function(n){return P.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ro(n,"appear",t),enter:ro(n,"enter",t),exit:ro(n,"exit",t)})})}function lA(t,e,n){var r=pg(t.children),i=oA(e,r);return Object.keys(i).forEach(function(a){var l=i[a];if(P.isValidElement(l)){var c=a in e,d=a in r,p=e[a],y=P.isValidElement(p)&&!p.props.in;d&&(!c||y)?i[a]=P.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:ro(l,"exit",t),enter:ro(l,"enter",t)}):!d&&c&&!y?i[a]=P.cloneElement(l,{in:!1}):d&&c&&P.isValidElement(p)&&(i[a]=P.cloneElement(l,{onExited:n.bind(null,l),in:p.props.in,exit:ro(l,"exit",t),enter:ro(l,"enter",t)}))}}),i}var uA=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},cA={component:"div",childFactory:function(e){return e}},wh=function(t){fg(e,t);function e(r,i){var a;a=t.call(this,r,i)||this;var l=a.handleExited.bind(iA(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,a){var l=a.children,c=a.handleExited,d=a.firstRender;return{children:d?aA(i,c):lA(i,l,c),firstRender:!1}},n.handleExited=function(i,a){var l=pg(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(c){var d=zd({},c.children);return delete d[i.key],{children:d}}))},n.render=function(){var i=this.props,a=i.component,l=i.childFactory,c=hg(i,["component","childFactory"]),d=this.state.contextValue,p=uA(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,a===null?Yn.createElement(Wd.Provider,{value:d},p):Yn.createElement(Wd.Provider,{value:d},Yn.createElement(a,c,p))},e}(Yn.Component);wh.propTypes={};wh.defaultProps=cA;const dA=()=>{};var Ex={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],c=t[n++],d=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},BE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,c=l?t[i+1]:0,d=i+2<t.length,p=d?t[i+2]:0,y=a>>2,w=(a&3)<<4|c>>4;let _=(c&15)<<2|p>>6,C=p&63;d||(C=64,l||(_=64)),r.push(n[y],n[w],n[_],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(UE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const w=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||p==null||w==null)throw new fA;const _=a<<2|c>>4;if(r.push(_),p!==64){const C=c<<4&240|p>>2;if(r.push(C),w!==64){const R=p<<6&192|w;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pA=function(t){const e=UE(t);return BE.encodeByteArray(e,!0)},Hd=function(t){return pA(t).replace(/\./g,"")},zE=function(t){try{return BE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=()=>mA().__FIREBASE_DEFAULTS__,yA=()=>{if(typeof process>"u"||typeof Ex>"u")return;const t=Ex.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zE(t[1]);return e&&JSON.parse(e)},_h=()=>{try{return dA()||gA()||yA()||vA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},WE=t=>{var e,n;return(n=(e=_h())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HE=t=>{const e=WE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qE=()=>{var t;return(t=_h())===null||t===void 0?void 0:t.config},KE=t=>{var e;return(e=_h())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hd(JSON.stringify(n)),Hd(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function _A(){var t;const e=(t=_h())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SA(){const t=nn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CA(){return!_A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kA(){try{return typeof indexedDB=="object"}catch{return!1}}function PA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="FirebaseError";class qr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IA,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nu.prototype.create)}}class Nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?AA(a,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new qr(i,c,r)}}function AA(t,e){return t.replace(RA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const RA=/\{\$([^}]+)}/g;function NA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(bx(a)&&bx(l)){if(!uo(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function bx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Gl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Ql(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DA(t,e){const n=new jA(t,e);return n.subscribe.bind(n)}class jA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Np),i.error===void 0&&(i.error=Np),i.complete===void 0&&(i.complete=Np);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(t){return t&&t._delegate?t._delegate:t}class ci{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OA(e))try{this.getOrInitializeService({instanceIdentifier:to})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=to){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=to){return this.instances.has(e)}getOptions(e=to){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=to){return this.component?this.component.multipleInstances?e:to:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VA(t){return t===to?void 0:t}function OA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const $A={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},UA=Oe.INFO,BA={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},zA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=BA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mg{constructor(e){this.name=e,this._logLevel=UA,this._logHandler=zA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$A[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const WA=(t,e)=>e.some(n=>t instanceof n);let Tx,Sx;function HA(){return Tx||(Tx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qA(){return Sx||(Sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QE=new WeakMap,dm=new WeakMap,YE=new WeakMap,Dp=new WeakMap,gg=new WeakMap;function KA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(ii(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&QE.set(n,t)}).catch(()=>{}),gg.set(e,t),e}function GA(t){if(dm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});dm.set(t,e)}let hm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ii(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QA(t){hm=t(hm)}function YA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jp(this),e,...n);return YE.set(r,e.sort?e.sort():[e]),ii(r)}:qA().includes(t)?function(...e){return t.apply(jp(this),e),ii(QE.get(this))}:function(...e){return ii(t.apply(jp(this),e))}}function XA(t){return typeof t=="function"?YA(t):(t instanceof IDBTransaction&&GA(t),WA(t,HA())?new Proxy(t,hm):t)}function ii(t){if(t instanceof IDBRequest)return KA(t);if(Dp.has(t))return Dp.get(t);const e=XA(t);return e!==t&&(Dp.set(t,e),gg.set(e,t)),e}const jp=t=>gg.get(t);function JA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),c=ii(l);return r&&l.addEventListener("upgradeneeded",d=>{r(ii(l.result),d.oldVersion,d.newVersion,ii(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const ZA=["get","getKey","getAll","getAllKeys","count"],eR=["put","add","delete","clear"],Lp=new Map;function Cx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=eR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZA.includes(n)))return;const a=async function(l,...c){const d=this.transaction(l,i?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),i&&d.done]))[0]};return Lp.set(e,a),a}QA(t=>({...t,get:(e,n,r)=>Cx(e,n)||t.get(e,n,r),has:(e,n)=>!!Cx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fm="@firebase/app",kx="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new mg("@firebase/app"),rR="@firebase/app-compat",sR="@firebase/analytics-compat",iR="@firebase/analytics",oR="@firebase/app-check-compat",aR="@firebase/app-check",lR="@firebase/auth",uR="@firebase/auth-compat",cR="@firebase/database",dR="@firebase/data-connect",hR="@firebase/database-compat",fR="@firebase/functions",pR="@firebase/functions-compat",mR="@firebase/installations",gR="@firebase/installations-compat",yR="@firebase/messaging",vR="@firebase/messaging-compat",xR="@firebase/performance",wR="@firebase/performance-compat",_R="@firebase/remote-config",ER="@firebase/remote-config-compat",bR="@firebase/storage",TR="@firebase/storage-compat",SR="@firebase/firestore",CR="@firebase/vertexai",kR="@firebase/firestore-compat",PR="firebase",IR="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="[DEFAULT]",AR={[fm]:"fire-core",[rR]:"fire-core-compat",[iR]:"fire-analytics",[sR]:"fire-analytics-compat",[aR]:"fire-app-check",[oR]:"fire-app-check-compat",[lR]:"fire-auth",[uR]:"fire-auth-compat",[cR]:"fire-rtdb",[dR]:"fire-data-connect",[hR]:"fire-rtdb-compat",[fR]:"fire-fn",[pR]:"fire-fn-compat",[mR]:"fire-iid",[gR]:"fire-iid-compat",[yR]:"fire-fcm",[vR]:"fire-fcm-compat",[xR]:"fire-perf",[wR]:"fire-perf-compat",[_R]:"fire-rc",[ER]:"fire-rc-compat",[bR]:"fire-gcs",[TR]:"fire-gcs-compat",[SR]:"fire-fst",[kR]:"fire-fst-compat",[CR]:"fire-vertex","fire-js":"fire-js",[PR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Map,RR=new Map,mm=new Map;function Px(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function co(t){const e=t.name;if(mm.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,t);for(const n of qd.values())Px(n,t);for(const n of RR.values())Px(n,t);return!0}function Eh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new Nu("app","Firebase",NR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ci("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=IR;function yg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(n||(n=qE()),!n)throw oi.create("no-options");const a=qd.get(i);if(a){if(uo(n,a.options)&&uo(r,a.config))return a;throw oi.create("duplicate-app",{appName:i})}const l=new FA(i);for(const d of mm.values())l.addComponent(d);const c=new DR(n,r,l);return qd.set(i,c),c}function vg(t=pm){const e=qd.get(t);if(!e&&t===pm&&qE())return yg();if(!e)throw oi.create("no-app",{appName:t});return e}function Lr(t,e,n){var r;let i=(r=AR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(c.join(" "));return}co(new ci(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebase-heartbeat-database",LR=1,fu="firebase-heartbeat-store";let Mp=null;function XE(){return Mp||(Mp=JA(jR,LR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fu)}catch(n){console.warn(n)}}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),Mp}async function MR(t){try{const n=(await XE()).transaction(fu),r=await n.objectStore(fu).get(JE(t));return await n.done,r}catch(e){if(e instanceof qr)_s.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(n.message)}}}async function Ix(t,e){try{const r=(await XE()).transaction(fu,"readwrite");await r.objectStore(fu).put(e,JE(t)),await r.done}catch(n){if(n instanceof qr)_s.warn(n.message);else{const r=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_s.warn(r.message)}}}function JE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=1024,OR=30;class FR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ax();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>OR){const l=BR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ax(),{heartbeatsToSend:r,unsentEntries:i}=$R(this._heartbeatsCache.heartbeats),a=Hd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return _s.warn(n),""}}}function Ax(){return new Date().toISOString().substring(0,10)}function $R(t,e=VR){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Rx(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Rx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kA()?PA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ix(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ix(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Rx(t){return Hd(JSON.stringify({version:2,heartbeats:t})).length}function BR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){co(new ci("platform-logger",e=>new tR(e),"PRIVATE")),co(new ci("heartbeat",e=>new FR(e),"PRIVATE")),Lr(fm,kx,t),Lr(fm,kx,"esm2017"),Lr("fire-js","")}zR("");var WR="firebase",HR="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(WR,HR,"app");var Nx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,ZE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,E){function S(){}S.prototype=E.prototype,k.D=E.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(I,V,U){for(var D=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)D[ie-2]=arguments[ie];return E.prototype[V].apply(I,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,E,S){S||(S=0);var I=Array(16);if(typeof E=="string")for(var V=0;16>V;++V)I[V]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(V=0;16>V;++V)I[V]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=k.g[0],S=k.g[1],V=k.g[2];var U=k.g[3],D=E+(U^S&(V^U))+I[0]+3614090360&4294967295;E=S+(D<<7&4294967295|D>>>25),D=U+(V^E&(S^V))+I[1]+3905402710&4294967295,U=E+(D<<12&4294967295|D>>>20),D=V+(S^U&(E^S))+I[2]+606105819&4294967295,V=U+(D<<17&4294967295|D>>>15),D=S+(E^V&(U^E))+I[3]+3250441966&4294967295,S=V+(D<<22&4294967295|D>>>10),D=E+(U^S&(V^U))+I[4]+4118548399&4294967295,E=S+(D<<7&4294967295|D>>>25),D=U+(V^E&(S^V))+I[5]+1200080426&4294967295,U=E+(D<<12&4294967295|D>>>20),D=V+(S^U&(E^S))+I[6]+2821735955&4294967295,V=U+(D<<17&4294967295|D>>>15),D=S+(E^V&(U^E))+I[7]+4249261313&4294967295,S=V+(D<<22&4294967295|D>>>10),D=E+(U^S&(V^U))+I[8]+1770035416&4294967295,E=S+(D<<7&4294967295|D>>>25),D=U+(V^E&(S^V))+I[9]+2336552879&4294967295,U=E+(D<<12&4294967295|D>>>20),D=V+(S^U&(E^S))+I[10]+4294925233&4294967295,V=U+(D<<17&4294967295|D>>>15),D=S+(E^V&(U^E))+I[11]+2304563134&4294967295,S=V+(D<<22&4294967295|D>>>10),D=E+(U^S&(V^U))+I[12]+1804603682&4294967295,E=S+(D<<7&4294967295|D>>>25),D=U+(V^E&(S^V))+I[13]+4254626195&4294967295,U=E+(D<<12&4294967295|D>>>20),D=V+(S^U&(E^S))+I[14]+2792965006&4294967295,V=U+(D<<17&4294967295|D>>>15),D=S+(E^V&(U^E))+I[15]+1236535329&4294967295,S=V+(D<<22&4294967295|D>>>10),D=E+(V^U&(S^V))+I[1]+4129170786&4294967295,E=S+(D<<5&4294967295|D>>>27),D=U+(S^V&(E^S))+I[6]+3225465664&4294967295,U=E+(D<<9&4294967295|D>>>23),D=V+(E^S&(U^E))+I[11]+643717713&4294967295,V=U+(D<<14&4294967295|D>>>18),D=S+(U^E&(V^U))+I[0]+3921069994&4294967295,S=V+(D<<20&4294967295|D>>>12),D=E+(V^U&(S^V))+I[5]+3593408605&4294967295,E=S+(D<<5&4294967295|D>>>27),D=U+(S^V&(E^S))+I[10]+38016083&4294967295,U=E+(D<<9&4294967295|D>>>23),D=V+(E^S&(U^E))+I[15]+3634488961&4294967295,V=U+(D<<14&4294967295|D>>>18),D=S+(U^E&(V^U))+I[4]+3889429448&4294967295,S=V+(D<<20&4294967295|D>>>12),D=E+(V^U&(S^V))+I[9]+568446438&4294967295,E=S+(D<<5&4294967295|D>>>27),D=U+(S^V&(E^S))+I[14]+3275163606&4294967295,U=E+(D<<9&4294967295|D>>>23),D=V+(E^S&(U^E))+I[3]+4107603335&4294967295,V=U+(D<<14&4294967295|D>>>18),D=S+(U^E&(V^U))+I[8]+1163531501&4294967295,S=V+(D<<20&4294967295|D>>>12),D=E+(V^U&(S^V))+I[13]+2850285829&4294967295,E=S+(D<<5&4294967295|D>>>27),D=U+(S^V&(E^S))+I[2]+4243563512&4294967295,U=E+(D<<9&4294967295|D>>>23),D=V+(E^S&(U^E))+I[7]+1735328473&4294967295,V=U+(D<<14&4294967295|D>>>18),D=S+(U^E&(V^U))+I[12]+2368359562&4294967295,S=V+(D<<20&4294967295|D>>>12),D=E+(S^V^U)+I[5]+4294588738&4294967295,E=S+(D<<4&4294967295|D>>>28),D=U+(E^S^V)+I[8]+2272392833&4294967295,U=E+(D<<11&4294967295|D>>>21),D=V+(U^E^S)+I[11]+1839030562&4294967295,V=U+(D<<16&4294967295|D>>>16),D=S+(V^U^E)+I[14]+4259657740&4294967295,S=V+(D<<23&4294967295|D>>>9),D=E+(S^V^U)+I[1]+2763975236&4294967295,E=S+(D<<4&4294967295|D>>>28),D=U+(E^S^V)+I[4]+1272893353&4294967295,U=E+(D<<11&4294967295|D>>>21),D=V+(U^E^S)+I[7]+4139469664&4294967295,V=U+(D<<16&4294967295|D>>>16),D=S+(V^U^E)+I[10]+3200236656&4294967295,S=V+(D<<23&4294967295|D>>>9),D=E+(S^V^U)+I[13]+681279174&4294967295,E=S+(D<<4&4294967295|D>>>28),D=U+(E^S^V)+I[0]+3936430074&4294967295,U=E+(D<<11&4294967295|D>>>21),D=V+(U^E^S)+I[3]+3572445317&4294967295,V=U+(D<<16&4294967295|D>>>16),D=S+(V^U^E)+I[6]+76029189&4294967295,S=V+(D<<23&4294967295|D>>>9),D=E+(S^V^U)+I[9]+3654602809&4294967295,E=S+(D<<4&4294967295|D>>>28),D=U+(E^S^V)+I[12]+3873151461&4294967295,U=E+(D<<11&4294967295|D>>>21),D=V+(U^E^S)+I[15]+530742520&4294967295,V=U+(D<<16&4294967295|D>>>16),D=S+(V^U^E)+I[2]+3299628645&4294967295,S=V+(D<<23&4294967295|D>>>9),D=E+(V^(S|~U))+I[0]+4096336452&4294967295,E=S+(D<<6&4294967295|D>>>26),D=U+(S^(E|~V))+I[7]+1126891415&4294967295,U=E+(D<<10&4294967295|D>>>22),D=V+(E^(U|~S))+I[14]+2878612391&4294967295,V=U+(D<<15&4294967295|D>>>17),D=S+(U^(V|~E))+I[5]+4237533241&4294967295,S=V+(D<<21&4294967295|D>>>11),D=E+(V^(S|~U))+I[12]+1700485571&4294967295,E=S+(D<<6&4294967295|D>>>26),D=U+(S^(E|~V))+I[3]+2399980690&4294967295,U=E+(D<<10&4294967295|D>>>22),D=V+(E^(U|~S))+I[10]+4293915773&4294967295,V=U+(D<<15&4294967295|D>>>17),D=S+(U^(V|~E))+I[1]+2240044497&4294967295,S=V+(D<<21&4294967295|D>>>11),D=E+(V^(S|~U))+I[8]+1873313359&4294967295,E=S+(D<<6&4294967295|D>>>26),D=U+(S^(E|~V))+I[15]+4264355552&4294967295,U=E+(D<<10&4294967295|D>>>22),D=V+(E^(U|~S))+I[6]+2734768916&4294967295,V=U+(D<<15&4294967295|D>>>17),D=S+(U^(V|~E))+I[13]+1309151649&4294967295,S=V+(D<<21&4294967295|D>>>11),D=E+(V^(S|~U))+I[4]+4149444226&4294967295,E=S+(D<<6&4294967295|D>>>26),D=U+(S^(E|~V))+I[11]+3174756917&4294967295,U=E+(D<<10&4294967295|D>>>22),D=V+(E^(U|~S))+I[2]+718787259&4294967295,V=U+(D<<15&4294967295|D>>>17),D=S+(U^(V|~E))+I[9]+3951481745&4294967295,k.g[0]=k.g[0]+E&4294967295,k.g[1]=k.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+U&4294967295}r.prototype.u=function(k,E){E===void 0&&(E=k.length);for(var S=E-this.blockSize,I=this.B,V=this.h,U=0;U<E;){if(V==0)for(;U<=S;)i(this,k,U),U+=this.blockSize;if(typeof k=="string"){for(;U<E;)if(I[V++]=k.charCodeAt(U++),V==this.blockSize){i(this,I),V=0;break}}else for(;U<E;)if(I[V++]=k[U++],V==this.blockSize){i(this,I),V=0;break}}this.h=V,this.o+=E},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var E=1;E<k.length-8;++E)k[E]=0;var S=8*this.o;for(E=k.length-8;E<k.length;++E)k[E]=S&255,S/=256;for(this.u(k),k=Array(16),E=S=0;4>E;++E)for(var I=0;32>I;I+=8)k[S++]=this.g[E]>>>I&255;return k};function a(k,E){var S=c;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=E(k)}function l(k,E){this.h=E;for(var S=[],I=!0,V=k.length-1;0<=V;V--){var U=k[V]|0;I&&U==E||(S[V]=U,I=!1)}this.g=S}var c={};function d(k){return-128<=k&&128>k?a(k,function(E){return new l([E|0],0>E?-1:0)}):new l([k|0],0>k?-1:0)}function p(k){if(isNaN(k)||!isFinite(k))return w;if(0>k)return N(p(-k));for(var E=[],S=1,I=0;k>=S;I++)E[I]=k/S|0,S*=4294967296;return new l(E,0)}function y(k,E){if(k.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k.charAt(0)=="-")return N(y(k.substring(1),E));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=p(Math.pow(E,8)),I=w,V=0;V<k.length;V+=8){var U=Math.min(8,k.length-V),D=parseInt(k.substring(V,V+U),E);8>U?(U=p(Math.pow(E,U)),I=I.j(U).add(p(D))):(I=I.j(S),I=I.add(p(D)))}return I}var w=d(0),_=d(1),C=d(16777216);t=l.prototype,t.m=function(){if(j(this))return-N(this).m();for(var k=0,E=1,S=0;S<this.g.length;S++){var I=this.i(S);k+=(0<=I?I:4294967296+I)*E,E*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(R(this))return"0";if(j(this))return"-"+N(this).toString(k);for(var E=p(Math.pow(k,6)),S=this,I="";;){var V=q(S,E).g;S=L(S,V.j(E));var U=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=V,R(S))return U+I;for(;6>U.length;)U="0"+U;I=U+I}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function R(k){if(k.h!=0)return!1;for(var E=0;E<k.g.length;E++)if(k.g[E]!=0)return!1;return!0}function j(k){return k.h==-1}t.l=function(k){return k=L(this,k),j(k)?-1:R(k)?0:1};function N(k){for(var E=k.g.length,S=[],I=0;I<E;I++)S[I]=~k.g[I];return new l(S,~k.h).add(_)}t.abs=function(){return j(this)?N(this):this},t.add=function(k){for(var E=Math.max(this.g.length,k.g.length),S=[],I=0,V=0;V<=E;V++){var U=I+(this.i(V)&65535)+(k.i(V)&65535),D=(U>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);I=D>>>16,U&=65535,D&=65535,S[V]=D<<16|U}return new l(S,S[S.length-1]&-2147483648?-1:0)};function L(k,E){return k.add(N(E))}t.j=function(k){if(R(this)||R(k))return w;if(j(this))return j(k)?N(this).j(N(k)):N(N(this).j(k));if(j(k))return N(this.j(N(k)));if(0>this.l(C)&&0>k.l(C))return p(this.m()*k.m());for(var E=this.g.length+k.g.length,S=[],I=0;I<2*E;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var V=0;V<k.g.length;V++){var U=this.i(I)>>>16,D=this.i(I)&65535,ie=k.i(V)>>>16,me=k.i(V)&65535;S[2*I+2*V]+=D*me,H(S,2*I+2*V),S[2*I+2*V+1]+=U*me,H(S,2*I+2*V+1),S[2*I+2*V+1]+=D*ie,H(S,2*I+2*V+1),S[2*I+2*V+2]+=U*ie,H(S,2*I+2*V+2)}for(I=0;I<E;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=E;I<2*E;I++)S[I]=0;return new l(S,0)};function H(k,E){for(;(k[E]&65535)!=k[E];)k[E+1]+=k[E]>>>16,k[E]&=65535,E++}function $(k,E){this.g=k,this.h=E}function q(k,E){if(R(E))throw Error("division by zero");if(R(k))return new $(w,w);if(j(k))return E=q(N(k),E),new $(N(E.g),N(E.h));if(j(E))return E=q(k,N(E)),new $(N(E.g),E.h);if(30<k.g.length){if(j(k)||j(E))throw Error("slowDivide_ only works with positive integers.");for(var S=_,I=E;0>=I.l(k);)S=W(S),I=W(I);var V=O(S,1),U=O(I,1);for(I=O(I,2),S=O(S,2);!R(I);){var D=U.add(I);0>=D.l(k)&&(V=V.add(S),U=D),I=O(I,1),S=O(S,1)}return E=L(k,V.j(E)),new $(V,E)}for(V=w;0<=k.l(E);){for(S=Math.max(1,Math.floor(k.m()/E.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),U=p(S),D=U.j(E);j(D)||0<D.l(k);)S-=I,U=p(S),D=U.j(E);R(U)&&(U=_),V=V.add(U),k=L(k,D)}return new $(V,k)}t.A=function(k){return q(this,k).h},t.and=function(k){for(var E=Math.max(this.g.length,k.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)&k.i(I);return new l(S,this.h&k.h)},t.or=function(k){for(var E=Math.max(this.g.length,k.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)|k.i(I);return new l(S,this.h|k.h)},t.xor=function(k){for(var E=Math.max(this.g.length,k.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)^k.i(I);return new l(S,this.h^k.h)};function W(k){for(var E=k.g.length+1,S=[],I=0;I<E;I++)S[I]=k.i(I)<<1|k.i(I-1)>>>31;return new l(S,k.h)}function O(k,E){var S=E>>5;E%=32;for(var I=k.g.length-S,V=[],U=0;U<I;U++)V[U]=0<E?k.i(U+S)>>>E|k.i(U+S+1)<<32-E:k.i(U+S);return new l(V,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZE=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,ai=l}).apply(typeof Nx<"u"?Nx:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eb,Yl,tb,Pd,gm,nb,rb,sb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,b){return h==Array.prototype||h==Object.prototype||(h[v]=b.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var v=0;v<h.length;++v){var b=h[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(h,v){if(v)e:{var b=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var K=h[A];if(!(K in b))break e;b=b[K]}h=h[h.length-1],A=b[h],v=v(A),v!=A&&v!=null&&e(b,h,{configurable:!0,writable:!0,value:v})}}function a(h,v){h instanceof String&&(h+="");var b=0,A=!1,K={next:function(){if(!A&&b<h.length){var Z=b++;return{value:v(Z,h[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}i("Array.prototype.values",function(h){return h||function(){return a(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,b){return h.call.apply(h.bind,arguments)}function w(h,v,b){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,A),h.apply(v,K)}}return function(){return h.apply(v,arguments)}}function _(h,v,b){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:w,_.apply(null,arguments)}function C(h,v){var b=Array.prototype.slice.call(arguments,1);return function(){var A=b.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function R(h,v){function b(){}b.prototype=v.prototype,h.aa=v.prototype,h.prototype=new b,h.prototype.constructor=h,h.Qb=function(A,K,Z){for(var pe=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)pe[qe-2]=arguments[qe];return v.prototype[K].apply(A,pe)}}function j(h){const v=h.length;if(0<v){const b=Array(v);for(let A=0;A<v;A++)b[A]=h[A];return b}return[]}function N(h,v){for(let b=1;b<arguments.length;b++){const A=arguments[b];if(d(A)){const K=h.length||0,Z=A.length||0;h.length=K+Z;for(let pe=0;pe<Z;pe++)h[K+pe]=A[pe]}else h.push(A)}}class L{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function H(h){return/^[\s\xa0]*$/.test(h)}function $(){var h=c.navigator;return h&&(h=h.userAgent)?h:""}function q(h){return q[" "](h),h}q[" "]=function(){};var W=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function O(h,v,b){for(const A in h)v.call(b,h[A],A,h)}function k(h,v){for(const b in h)v.call(void 0,h[b],b,h)}function E(h){const v={};for(const b in h)v[b]=h[b];return v}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,v){let b,A;for(let K=1;K<arguments.length;K++){A=arguments[K];for(b in A)h[b]=A[b];for(let Z=0;Z<S.length;Z++)b=S[Z],Object.prototype.hasOwnProperty.call(A,b)&&(h[b]=A[b])}}function V(h){var v=1;h=h.split(":");const b=[];for(;0<v&&h.length;)b.push(h.shift()),v--;return h.length&&b.push(h.join(":")),b}function U(h){c.setTimeout(()=>{throw h},0)}function D(){var h=re;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ie{constructor(){this.h=this.g=null}add(v,b){const A=me.get();A.set(v,b),this.h?this.h.next=A:this.g=A,this.h=A}}var me=new L(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let te,Y=!1,re=new ie,ee=()=>{const h=c.Promise.resolve(void 0);te=()=>{h.then(B)}};var B=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(b){U(b)}var v=me;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}Y=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var je=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const b=()=>{};c.addEventListener("test",b,v),c.removeEventListener("test",b,v)}catch{}return h}();function ce(h,v){if(ve.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var b=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(W){e:{try{q(v.nodeName);var K=!0;break e}catch{}K=!1}K||(v=null)}}else b=="mouseover"?v=h.fromElement:b=="mouseout"&&(v=h.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ce.aa.h.call(this)}}R(ce,ve);var ne={2:"touch",3:"pen",4:"mouse"};ce.prototype.h=function(){ce.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),Te=0;function Ve(h,v,b,A,K){this.listener=h,this.proxy=null,this.src=v,this.type=b,this.capture=!!A,this.ha=K,this.key=++Te,this.da=this.fa=!1}function pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vn(h){this.src=h,this.g={},this.h=0}Vn.prototype.add=function(h,v,b,A,K){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var pe=Zn(h,v,A,K);return-1<pe?(v=h[pe],b||(v.fa=!1)):(v=new Ve(v,this.src,Z,!!A,K),v.fa=b,h.push(v)),v};function Kr(h,v){var b=v.type;if(b in h.g){var A=h.g[b],K=Array.prototype.indexOf.call(A,v,void 0),Z;(Z=0<=K)&&Array.prototype.splice.call(A,K,1),Z&&(pt(v),h.g[b].length==0&&(delete h.g[b],h.h--))}}function Zn(h,v,b,A){for(var K=0;K<h.length;++K){var Z=h[K];if(!Z.da&&Z.listener==v&&Z.capture==!!b&&Z.ha==A)return K}return-1}var er="closure_lm_"+(1e6*Math.random()|0),Gr={};function Nt(h,v,b,A,K){if(Array.isArray(v)){for(var Z=0;Z<v.length;Z++)Nt(h,v[Z],b,A,K);return null}return b=Xa(b),h&&h[he]?h.K(v,b,p(A)?!!A.capture:!1,K):Qr(h,v,b,!1,A,K)}function Qr(h,v,b,A,K,Z){if(!v)throw Error("Invalid event type");var pe=p(K)?!!K.capture:!!K,qe=To(h);if(qe||(h[er]=qe=new Vn(h)),b=qe.add(v,b,A,pe,Z),b.proxy)return b;if(A=Yu(),b.proxy=A,A.src=h,A.listener=b,h.addEventListener)je||(K=pe),K===void 0&&(K=!1),h.addEventListener(v.toString(),A,K);else if(h.attachEvent)h.attachEvent(Xr(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Yu(){function h(b){return v.call(h.src,h.listener,b)}const v=Ya;return h}function bo(h,v,b,A,K){if(Array.isArray(v))for(var Z=0;Z<v.length;Z++)bo(h,v[Z],b,A,K);else A=p(A)?!!A.capture:!!A,b=Xa(b),h&&h[he]?(h=h.i,v=String(v).toString(),v in h.g&&(Z=h.g[v],b=Zn(Z,b,A,K),-1<b&&(pt(Z[b]),Array.prototype.splice.call(Z,b,1),Z.length==0&&(delete h.g[v],h.h--)))):h&&(h=To(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Zn(v,b,A,K)),(b=-1<h?v[h]:null)&&Yr(b))}function Yr(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[he])Kr(v.i,h);else{var b=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(b,A,h.capture):v.detachEvent?v.detachEvent(Xr(b),A):v.addListener&&v.removeListener&&v.removeListener(A),(b=To(v))?(Kr(b,h),b.h==0&&(b.src=null,v[er]=null)):pt(h)}}}function Xr(h){return h in Gr?Gr[h]:Gr[h]="on"+h}function Ya(h,v){if(h.da)h=!0;else{v=new ce(v,this);var b=h.listener,A=h.ha||h.src;h.fa&&Yr(h),h=b.call(A,v)}return h}function To(h){return h=h[er],h instanceof Vn?h:null}var So="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xa(h){return typeof h=="function"?h:(h[So]||(h[So]=function(v){return h.handleEvent(v)}),h[So])}function bt(){J.call(this),this.i=new Vn(this),this.M=this,this.F=null}R(bt,J),bt.prototype[he]=!0,bt.prototype.removeEventListener=function(h,v,b,A){bo(this,h,v,b,A)};function Tt(h,v){var b,A=h.F;if(A)for(b=[];A;A=A.F)b.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new ve(v,h);else if(v instanceof ve)v.target=v.target||h;else{var K=v;v=new ve(A,h),I(v,K)}if(K=!0,b)for(var Z=b.length-1;0<=Z;Z--){var pe=v.g=b[Z];K=Jr(pe,A,!0,v)&&K}if(pe=v.g=h,K=Jr(pe,A,!0,v)&&K,K=Jr(pe,A,!1,v)&&K,b)for(Z=0;Z<b.length;Z++)pe=v.g=b[Z],K=Jr(pe,A,!1,v)&&K}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var b=h.g[v],A=0;A<b.length;A++)pt(b[A]);delete h.g[v],h.h--}}this.F=null},bt.prototype.K=function(h,v,b,A){return this.i.add(String(h),v,!1,b,A)},bt.prototype.L=function(h,v,b,A){return this.i.add(String(h),v,!0,b,A)};function Jr(h,v,b,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var K=!0,Z=0;Z<v.length;++Z){var pe=v[Z];if(pe&&!pe.da&&pe.capture==b){var qe=pe.listener,St=pe.ha||pe.src;pe.fa&&Kr(h.i,pe),K=qe.call(St,A)!==!1&&K}}return K&&!A.defaultPrevented}function Ja(h,v,b){if(typeof h=="function")b&&(h=_(h,b));else if(h&&typeof h.handleEvent=="function")h=_(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(h,v||0)}function ks(h){h.g=Ja(()=>{h.g=null,h.i&&(h.i=!1,ks(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Si extends J{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ks(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(h){J.call(this),this.h=h,this.g={}}R(Ci,J);var Za=[];function el(h){O(h.g,function(v,b){this.g.hasOwnProperty(b)&&Yr(v)},h),h.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),el(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tl=c.JSON.stringify,nl=c.JSON.parse,rl=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function ki(){}ki.prototype.h=null;function Co(h){return h.h||(h.h=h.i())}function ko(){}var On={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Er(){ve.call(this,"d")}R(Er,ve);function Po(){ve.call(this,"c")}R(Po,ve);var br={},sl=null;function Pi(){return sl=sl||new bt}br.La="serverreachability";function il(h){ve.call(this,br.La,h)}R(il,ve);function Zr(h){const v=Pi();Tt(v,new il(v))}br.STAT_EVENT="statevent";function ol(h,v){ve.call(this,br.STAT_EVENT,h),this.stat=v}R(ol,ve);function mt(h){const v=Pi();Tt(v,new ol(v,h))}br.Ma="timingevent";function Io(h,v){ve.call(this,br.Ma,h),this.size=v}R(Io,ve);function tr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},v)}function Ii(){this.g=!0}Ii.prototype.xa=function(){this.g=!1};function Ai(h,v,b,A,K,Z){h.info(function(){if(h.g)if(Z)for(var pe="",qe=Z.split("&"),St=0;St<qe.length;St++){var Ue=qe[St].split("=");if(1<Ue.length){var Dt=Ue[0];Ue=Ue[1];var wt=Dt.split("_");pe=2<=wt.length&&wt[1]=="type"?pe+(Dt+"="+Ue+"&"):pe+(Dt+"=redacted&")}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+A+") [attempt "+K+"]: "+v+`
`+b+`
`+pe})}function Ao(h,v,b,A,K,Z,pe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+K+"]: "+v+`
`+b+`
`+Z+" "+pe})}function nr(h,v,b,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Xh(h,b)+(A?" "+A:"")})}function al(h,v){h.info(function(){return"TIMEOUT: "+v})}Ii.prototype.info=function(){};function Xh(h,v){if(!h.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(h=0;h<b.length;h++)if(Array.isArray(b[h])){var A=b[h];if(!(2>A.length)){var K=A[1];if(Array.isArray(K)&&!(1>K.length)){var Z=K[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var pe=1;pe<K.length;pe++)K[pe]=""}}}}return tl(b)}catch{return v}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rr;function Ri(){}R(Ri,ki),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},rr=new Ri;function sr(h,v,b,A){this.j=h,this.i=v,this.l=b,this.R=A||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ju}function Ju(){this.i=null,this.g="",this.h=!1}var ll={},No={};function Do(h,v,b){h.L=1,h.v=Ns(bn(v)),h.m=b,h.P=!0,ul(h,null)}function ul(h,v){h.F=Date.now(),Qe(h),h.A=bn(h.v);var b=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),js(b.i,"t",A),h.C=0,b=h.j.J,h.h=new Ju,h.g=gc(h.j,b?v:null,!h.m),0<h.O&&(h.M=new Si(_(h.Y,h,h.g),h.O)),v=h.U,b=h.g,A=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(Za[0]=K.toString()),K=Za);for(var Z=0;Z<K.length;Z++){var pe=Nt(b,K[Z],A||v.handleEvent,!1,v.h||v);if(!pe)break;v.g[pe.key]=pe}v=h.H?E(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Zr(),Ai(h.i,h.u,h.A,h.l,h.R,h.m)}sr.prototype.ca=function(h){h=h.target;const v=this.M;v&&dn(h)==3?v.j():this.Y(h)},sr.prototype.Y=function(h){try{if(h==this.g)e:{const wt=dn(this.g);var v=this.g.Ba();const Un=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||ml(this.g)))){this.J||wt!=4||v==7||(v==8||0>=Un?Zr(3):Zr(2)),Ni(this);var b=this.g.Z();this.X=b;t:if(Zu(this)){var A=ml(this.g);h="";var K=A.length,Z=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),Ps(this);var pe="";break t}this.h.i=new c.TextDecoder}for(v=0;v<K;v++)this.h.h=!0,h+=this.h.i.decode(A[v],{stream:!(Z&&v==K-1)});A.length=0,this.h.g+=h,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=b==200,Ao(this.i,this.u,this.A,this.l,this.R,wt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,St=this.g;if((qe=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(qe)){var Ue=qe;break t}}Ue=null}if(b=Ue)nr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cl(this,b);else{this.o=!1,this.s=3,mt(12),Fn(this),Ps(this);break e}}if(this.P){b=!0;let Sn;for(;!this.J&&this.C<pe.length;)if(Sn=Jh(this,pe),Sn==No){wt==4&&(this.s=4,mt(14),b=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==ll){this.s=4,mt(15),nr(this.i,this.l,pe,"[Invalid Chunk]"),b=!1;break}else nr(this.i,this.l,Sn,null),cl(this,Sn);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||pe.length!=0||this.h.h||(this.s=1,mt(16),b=!1),this.o=this.o&&b,!b)nr(this.i,this.l,pe,"[Invalid Chunked Response]"),Fn(this),Ps(this);else if(0<pe.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),yl(Dt),Dt.M=!0,mt(11))}}else nr(this.i,this.l,pe,null),cl(this,pe);wt==4&&Fn(this),this.o&&!this.J&&(wt==4?Wo(this.j,this):(this.o=!1,Qe(this)))}else Fo(this.g),b==400&&0<pe.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Fn(this),Ps(this)}}}catch{}finally{}};function Zu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Jh(h,v){var b=h.C,A=v.indexOf(`
`,b);return A==-1?No:(b=Number(v.substring(b,A)),isNaN(b)?ll:(A+=1,A+b>v.length?No:(v=v.slice(A,A+b),h.C=A+b,v)))}sr.prototype.cancel=function(){this.J=!0,Fn(this)};function Qe(h){h.S=Date.now()+h.I,ec(h,h.I)}function ec(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=tr(_(h.ba,h),v)}function Ni(h){h.B&&(c.clearTimeout(h.B),h.B=null)}sr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(al(this.i,this.A),this.L!=2&&(Zr(),mt(17)),Fn(this),this.s=2,Ps(this)):ec(this,this.S-h)};function Ps(h){h.j.G==0||h.J||Wo(h.j,h)}function Fn(h){Ni(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,el(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function cl(h,v){try{var b=h.j;if(b.G!=0&&(b.g==h||rn(b.h,h))){if(!h.K&&rn(b.h,h)&&b.G==3){try{var A=b.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var K=A;if(K[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<h.F)zo(b),ur(b);else break e;Bo(b),mt(18)}}else b.za=K[1],0<b.za-b.T&&37500>K[2]&&b.F&&b.v==0&&!b.C&&(b.C=tr(_(b.Za,b),6e3));if(1>=nc(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ss(b,11)}else if((h.K||b.g==h)&&zo(b),!H(v))for(K=b.Da.g.parse(v),v=0;v<K.length;v++){let Ue=K[v];if(b.T=Ue[0],Ue=Ue[1],b.G==2)if(Ue[0]=="c"){b.K=Ue[1],b.ia=Ue[2];const Dt=Ue[3];Dt!=null&&(b.la=Dt,b.j.info("VER="+b.la));const wt=Ue[4];wt!=null&&(b.Aa=wt,b.j.info("SVER="+b.Aa));const Un=Ue[5];Un!=null&&typeof Un=="number"&&0<Un&&(A=1.5*Un,b.L=A,b.j.info("backChannelRequestTimeoutMs_="+A)),A=b;const Sn=h.g;if(Sn){const Fi=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fi){var Z=A.h;Z.g||Fi.indexOf("spdy")==-1&&Fi.indexOf("quic")==-1&&Fi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(dl(Z,Z.h),Z.h=null))}if(A.D){const qo=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(A.ya=qo,Ke(A.I,A.D,qo))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-h.F,b.j.info("Handshake RTT: "+b.R+"ms")),A=b;var pe=h;if(A.qa=mc(A,A.J?A.ia:null,A.W),pe.K){rc(A.h,pe);var qe=pe,St=A.L;St&&(qe.I=St),qe.B&&(Ni(qe),Qe(qe)),A.g=pe}else Oi(A);0<b.i.length&&kr(b)}else Ue[0]!="stop"&&Ue[0]!="close"||ss(b,7);else b.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ss(b,7):Ft(b):Ue[0]!="noop"&&b.l&&b.l.ta(Ue),b.v=0)}}Zr(4)}catch{}}var tc=class{constructor(h,v){this.g=h,this.map=v}};function Di(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function En(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function nc(h){return h.h?1:h.g?h.g.size:0}function rn(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function dl(h,v){h.g?h.g.add(v):h.h=v}function rc(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Di.prototype.cancel=function(){if(this.i=sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const b of h.g.values())v=v.concat(b.D);return v}return j(h.i)}function jo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],b=h.length,A=0;A<b;A++)v.push(h[A]);return v}v=[],b=0;for(A in h)v[b++]=h[A];return v}function Lo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var b=0;b<h;b++)v.push(b);return v}v=[],b=0;for(const A in h)v[b++]=A;return v}}}function Is(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var b=Lo(h),A=jo(h),K=A.length,Z=0;Z<K;Z++)v.call(void 0,A[Z],b&&b[Z],h)}var ji=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zh(h,v){if(h){h=h.split("&");for(var b=0;b<h.length;b++){var A=h[b].indexOf("="),K=null;if(0<=A){var Z=h[b].substring(0,A);K=h[b].substring(A+1)}else Z=h[b];v(Z,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function es(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof es){this.h=h.h,Li(this,h.j),this.o=h.o,this.g=h.g,As(this,h.s),this.l=h.l;var v=h.i,b=new Tr;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Rs(this,b),this.m=h.m}else h&&(v=String(h).match(ji))?(this.h=!1,Li(this,v[1]||"",!0),this.o=$e(v[2]||""),this.g=$e(v[3]||"",!0),As(this,v[4]),this.l=$e(v[5]||"",!0),Rs(this,v[6]||"",!0),this.m=$e(v[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}es.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Ds(v,Mo,!0),":");var b=this.g;return(b||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Ds(v,Mo,!0),"@"),h.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&h.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&h.push("/"),h.push(Ds(b,b.charAt(0)=="/"?ac:oc,!0))),(b=this.i.toString())&&h.push("?",b),(b=this.m)&&h.push("#",Ds(b,hl)),h.join("")};function bn(h){return new es(h)}function Li(h,v,b){h.j=b?$e(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function As(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Rs(h,v,b){v instanceof Tr?(h.i=v,Sr(h.i,h.h)):(b||(v=Ds(v,lc)),h.i=new Tr(v,h.h))}function Ke(h,v,b){h.i.set(v,b)}function Ns(h){return Ke(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function $e(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ds(h,v,b){return typeof h=="string"?(h=encodeURI(h).replace(v,ic),b&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ic(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Mo=/[#\/\?@]/g,oc=/[#\?:]/g,ac=/[#\?]/g,lc=/[#\?@]/g,hl=/#/g;function Tr(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Ot(h){h.g||(h.g=new Map,h.h=0,h.i&&Zh(h.i,function(v,b){h.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}t=Tr.prototype,t.add=function(h,v){Ot(this),this.i=null,h=$n(this,h);var b=this.g.get(h);return b||this.g.set(h,b=[]),b.push(v),this.h+=1,this};function ir(h,v){Ot(h),v=$n(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function or(h,v){return Ot(h),v=$n(h,v),h.g.has(v)}t.forEach=function(h,v){Ot(this),this.g.forEach(function(b,A){b.forEach(function(K){h.call(v,K,A,this)},this)},this)},t.na=function(){Ot(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let A=0;A<v.length;A++){const K=h[A];for(let Z=0;Z<K.length;Z++)b.push(v[A])}return b},t.V=function(h){Ot(this);let v=[];if(typeof h=="string")or(this,h)&&(v=v.concat(this.g.get($n(this,h))));else{h=Array.from(this.g.values());for(let b=0;b<h.length;b++)v=v.concat(h[b])}return v},t.set=function(h,v){return Ot(this),this.i=null,h=$n(this,h),or(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},t.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function js(h,v,b){ir(h,v),0<b.length&&(h.i=null,h.g.set($n(h,v),j(b)),h.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var A=v[b];const Z=encodeURIComponent(String(A)),pe=this.V(A);for(A=0;A<pe.length;A++){var K=Z;pe[A]!==""&&(K+="="+encodeURIComponent(String(pe[A]))),h.push(K)}}return this.i=h.join("&")};function $n(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Sr(h,v){v&&!h.j&&(Ot(h),h.i=null,h.g.forEach(function(b,A){var K=A.toLowerCase();A!=K&&(ir(this,A),js(this,K,b))},h)),h.j=v}function ef(h,v){const b=new Ii;if(c.Image){const A=new Image;A.onload=C(cn,b,"TestLoadImage: loaded",!0,v,A),A.onerror=C(cn,b,"TestLoadImage: error",!1,v,A),A.onabort=C(cn,b,"TestLoadImage: abort",!1,v,A),A.ontimeout=C(cn,b,"TestLoadImage: timeout",!1,v,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function uc(h,v){const b=new Ii,A=new AbortController,K=setTimeout(()=>{A.abort(),cn(b,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(Z=>{clearTimeout(K),Z.ok?cn(b,"TestPingServer: ok",!0,v):cn(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(K),cn(b,"TestPingServer: error",!1,v)})}function cn(h,v,b,A,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),A(b)}catch{}}function tf(){this.g=new rl}function cc(h,v,b){const A=b||"";try{Is(h,function(K,Z){let pe=K;p(K)&&(pe=tl(K)),v.push(A+Z+"="+encodeURIComponent(pe))})}catch(K){throw v.push(A+"type="+encodeURIComponent("_badmap")),K}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}R(ts,ki),ts.prototype.g=function(){return new Mi(this.l,this.j)},ts.prototype.i=function(h){return function(){return h}}({});function Mi(h,v){bt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Mi,bt),t=Mi.prototype,t.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,lr(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,lr(this)),this.g&&(this.readyState=3,lr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function dc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ar(this):lr(this),this.readyState==3&&dc(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ar(this))},t.Qa=function(h){this.g&&(this.response=h,ar(this))},t.ga=function(){this.g&&ar(this)};function ar(h){h.readyState=4,h.l=null,h.j=null,h.v=null,lr(h)}t.setRequestHeader=function(h,v){this.u.append(h,v)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,h.push(b[0]+": "+b[1]),b=v.next();return h.join(`\r
`)};function lr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ns(h){let v="";return O(h,function(b,A){v+=A,v+=":",v+=b,v+=`\r
`}),v}function Ls(h,v,b){e:{for(A in b){var A=!1;break e}A=!0}A||(b=ns(b),typeof h=="string"?b!=null&&encodeURIComponent(String(b)):Ke(h,v,b))}function tt(h){bt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(tt,bt);var nf=/^https?$/i,fl=["POST","PUT"];t=tt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,v,b,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rr.g(),this.v=this.o?Co(this.o):Co(rr),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(Z){Vi(this,Z);return}if(h=b||"",b=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var K in A)b.set(K,A[K]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())b.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(b.keys()).find(Z=>Z.toLowerCase()=="content-type"),K=c.FormData&&h instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fl,v,void 0))||A||K||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of b)this.g.setRequestHeader(Z,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oo(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Vi(this,Z)}};function Vi(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Vo(h),Tn(h)}function Vo(h){h.A||(h.A=!0,Tt(h,"complete"),Tt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Tt(this,"complete"),Tt(this,"abort"),Tn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tn(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?pl(this):this.bb())},t.bb=function(){pl(this)};function pl(h){if(h.h&&typeof l<"u"&&(!h.v[1]||dn(h)!=4||h.Z()!=2)){if(h.u&&dn(h)==4)Ja(h.Ea,0,h);else if(Tt(h,"readystatechange"),dn(h)==4){h.h=!1;try{const pe=h.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var A;if(A=pe===0){var K=String(h.D).match(ji)[1]||null;!K&&c.self&&c.self.location&&(K=c.self.location.protocol.slice(0,-1)),A=!nf.test(K?K.toLowerCase():"")}b=A}if(b)Tt(h,"complete"),Tt(h,"success");else{h.m=6;try{var Z=2<dn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Vo(h)}}finally{Tn(h)}}}}function Tn(h,v){if(h.g){Oo(h);const b=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Tt(h,"ready");try{b.onreadystatechange=A}catch{}}}function Oo(h){h.I&&(c.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function dn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),nl(v)}};function ml(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fo(h){const v={};h=(h.g&&2<=dn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(H(h[A]))continue;var b=V(h[A]);const K=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const Z=v[K]||[];v[K]=Z,Z.push(b)}k(v,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cr(h,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[h]||v}function gl(h){this.Aa=0,this.i=[],this.j=new Ii,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cr("baseRetryDelayMs",5e3,h),this.cb=Cr("retryDelaySeedMs",1e4,h),this.Wa=Cr("forwardChannelMaxRetries",2,h),this.wa=Cr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Di(h&&h.concurrentRequestLimit),this.Da=new tf,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gl.prototype,t.la=8,t.G=1,t.connect=function(h,v,b,A){mt(0),this.W=h,this.H=v||{},b&&A!==void 0&&(this.H.OSID=b,this.H.OAID=A),this.F=this.X,this.I=mc(this,null,this.W),kr(this)};function Ft(h){if($o(h),h.G==3){var v=h.U++,b=bn(h.I);if(Ke(b,"SID",h.K),Ke(b,"RID",v),Ke(b,"TYPE","terminate"),rs(h,b),v=new sr(h,h.j,v),v.L=2,v.v=Ns(bn(b)),b=!1,c.navigator&&c.navigator.sendBeacon)try{b=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&c.Image&&(new Image().src=v.v,b=!0),b||(v.g=gc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Qe(v)}pc(h)}function ur(h){h.g&&(yl(h),h.g.cancel(),h.g=null)}function $o(h){ur(h),h.u&&(c.clearTimeout(h.u),h.u=null),zo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&c.clearTimeout(h.s),h.s=null)}function kr(h){if(!En(h.h)&&!h.s){h.s=!0;var v=h.Ga;te||ee(),Y||(te(),Y=!0),re.add(v,h),h.B=0}}function rf(h,v){return nc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=tr(_(h.Ga,h,v),fc(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new sr(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=E(Z),I(Z,this.S)):Z=this.S),this.m!==null||this.O||(K.H=Z,Z=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var A=this.i[b];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Ms(this,K,v),b=bn(this.I),Ke(b,"RID",h),Ke(b,"CVER",22),this.D&&Ke(b,"X-HTTP-Session-Id",this.D),rs(this,b),Z&&(this.O?v="headers="+encodeURIComponent(String(ns(Z)))+"&"+v:this.m&&Ls(b,this.m,Z)),dl(this.h,K),this.Ua&&Ke(b,"TYPE","init"),this.P?(Ke(b,"$req",v),Ke(b,"SID","null"),K.T=!0,Do(K,b,null)):Do(K,b,v),this.G=2}}else this.G==3&&(h?Uo(this,h):this.i.length==0||En(this.h)||Uo(this))};function Uo(h,v){var b;v?b=v.l:b=h.U++;const A=bn(h.I);Ke(A,"SID",h.K),Ke(A,"RID",b),Ke(A,"AID",h.T),rs(h,A),h.m&&h.o&&Ls(A,h.m,h.o),b=new sr(h,h.j,b,h.B+1),h.m===null&&(b.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Ms(h,b,1e3),b.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),dl(h.h,b),Do(b,A,v)}function rs(h,v){h.H&&O(h.H,function(b,A){Ke(v,A,b)}),h.l&&Is({},function(b,A){Ke(v,A,b)})}function Ms(h,v,b){b=Math.min(h.i.length,b);var A=h.l?_(h.l.Na,h.l,h):null;e:{var K=h.i;let Z=-1;for(;;){const pe=["count="+b];Z==-1?0<b?(Z=K[0].g,pe.push("ofs="+Z)):Z=0:pe.push("ofs="+Z);let qe=!0;for(let St=0;St<b;St++){let Ue=K[St].g;const Dt=K[St].map;if(Ue-=Z,0>Ue)Z=Math.max(0,K[St].g-100),qe=!1;else try{cc(Dt,pe,"req"+Ue+"_")}catch{A&&A(Dt)}}if(qe){A=pe.join("&");break e}}}return h=h.i.splice(0,b),v.D=h,A}function Oi(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;te||ee(),Y||(te(),Y=!0),re.add(v,h),h.v=0}}function Bo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=tr(_(h.Fa,h),fc(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,hc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=tr(_(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),ur(this),hc(this))};function yl(h){h.A!=null&&(c.clearTimeout(h.A),h.A=null)}function hc(h){h.g=new sr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=bn(h.qa);Ke(v,"RID","rpc"),Ke(v,"SID",h.K),Ke(v,"AID",h.T),Ke(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ke(v,"TO",h.ja),Ke(v,"TYPE","xmlhttp"),rs(h,v),h.m&&h.o&&Ls(v,h.m,h.o),h.L&&(h.g.I=h.L);var b=h.g;h=h.ia,b.L=1,b.v=Ns(bn(v)),b.m=null,b.P=!0,ul(b,h)}t.Za=function(){this.C!=null&&(this.C=null,ur(this),Bo(this),mt(19))};function zo(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Wo(h,v){var b=null;if(h.g==v){zo(h),yl(h),h.g=null;var A=2}else if(rn(h.h,v))b=v.D,rc(h.h,v),A=1;else return;if(h.G!=0){if(v.o)if(A==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var K=h.B;A=Pi(),Tt(A,new Io(A,b)),kr(h)}else Oi(h);else if(K=v.s,K==3||K==0&&0<v.X||!(A==1&&rf(h,v)||A==2&&Bo(h)))switch(b&&0<b.length&&(v=h.h,v.i=v.i.concat(b)),K){case 1:ss(h,5);break;case 4:ss(h,10);break;case 3:ss(h,6);break;default:ss(h,2)}}}function fc(h,v){let b=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(b*=2),b*v}function ss(h,v){if(h.j.info("Error code "+v),v==2){var b=_(h.fb,h),A=h.Xa;const K=!A;A=new es(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Li(A,"https"),Ns(A),K?ef(A.toString(),b):uc(A.toString(),b)}else mt(2);h.G=0,h.l&&h.l.sa(v),pc(h),$o(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function pc(h){if(h.G=0,h.ka=[],h.l){const v=sc(h.h);(v.length!=0||h.i.length!=0)&&(N(h.ka,v),N(h.ka,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.ra()}}function mc(h,v,b){var A=b instanceof es?bn(b):new es(b);if(A.g!="")v&&(A.g=v+"."+A.g),As(A,A.s);else{var K=c.location;A=K.protocol,v=v?v+"."+K.hostname:K.hostname,K=+K.port;var Z=new es(null);A&&Li(Z,A),v&&(Z.g=v),K&&As(Z,K),b&&(Z.l=b),A=Z}return b=h.D,v=h.ya,b&&v&&Ke(A,b,v),Ke(A,"VER",h.la),rs(h,A),A}function gc(h,v,b){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new tt(new ts({eb:b})):new tt(h.pa),v.Ha(h.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vl(){}t=vl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ho(){}Ho.prototype.g=function(h,v){return new sn(h,v)};function sn(h,v){bt.call(this),this.g=new gl(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!H(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!H(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Pr(this)}R(sn,bt),sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ft(this.g)},sn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var b={};b.__data__=h,h=b}else this.u&&(b={},b.__data__=tl(h),h=b);v.i.push(new tc(v.Ya++,h)),v.G==3&&kr(v)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,sn.aa.N.call(this)};function yc(h){Er.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const b in v){h=b;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}R(yc,Er);function vc(){Po.call(this),this.status=1}R(vc,Po);function Pr(h){this.g=h}R(Pr,vl),Pr.prototype.ua=function(){Tt(this.g,"a")},Pr.prototype.ta=function(h){Tt(this.g,new yc(h))},Pr.prototype.sa=function(h){Tt(this.g,new vc)},Pr.prototype.ra=function(){Tt(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,sb=function(){return new Ho},rb=function(){return Pi()},nb=br,gm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Pd=Ro,Xu.COMPLETE="complete",tb=Xu,ko.EventType=On,On.OPEN="a",On.CLOSE="b",On.ERROR="c",On.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Yl=ko,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,eb=tt}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});const Dx="@firebase/firestore",jx="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new mg("@firebase/firestore");function ma(){return ho.logLevel}function ye(t,...e){if(ho.logLevel<=Oe.DEBUG){const n=e.map(xg);ho.debug(`Firestore (${Ba}): ${t}`,...n)}}function Es(t,...e){if(ho.logLevel<=Oe.ERROR){const n=e.map(xg);ho.error(`Firestore (${Ba}): ${t}`,...n)}}function Ia(t,...e){if(ho.logLevel<=Oe.WARN){const n=e.map(xg);ho.warn(`Firestore (${Ba}): ${t}`,...n)}}function xg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t="Unexpected state"){const e=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+t;throw Es(e),new Error(e)}function He(t,e){t||Ae()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends qr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class KR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GR{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let a=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ys,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const d=a;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},c=d=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ys)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new ib(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Zt(e)}}class QR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class YR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new QR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Lx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XR{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,In(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){He(this.o===void 0);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.R;return this.R=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Lx(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string"),this.R=n.token,new Lx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=JR(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Le(t,e){return t<e?-1:t>e?1:0}function ym(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Le(r,i);{const a=ob(),l=ZR(a.encode(Mx(t,n)),a.encode(Mx(e,n)));return l!==0?l:Le(r,i)}}n+=r>65535?2:1}return Le(t.length,e.length)}function Mx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function ZR(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Le(t[n],e[n]);return Le(t.length,e.length)}function Aa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx=-62135596800,Ox=1e6;class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ox);return new At(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new be(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new be(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vx)throw new be(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ox}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Vx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new At(0,0))}static max(){return new Ne(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="__name__";class Dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(),r===void 0?r=e.length-n:r>e.length-n&&Ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Dr.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Le(e.length,n.length)}static compareSegments(e,n){const r=Dr.isNumericId(e),i=Dr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Dr.extractNumericId(e).compare(Dr.extractNumericId(n)):ym(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}}class rt extends Dr{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const eN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Dr{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return eN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fx}static keyField(){return new Ht([Fx])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new be(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new be(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new be(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(a(),i++)}if(a(),l)throw new be(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(rt.fromString(e))}static fromName(e){return new ke(rt.fromString(e).popFirst(5))}static empty(){return new ke(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=-1;function tN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new At(n+1,0):new At(n,r));return new di(i,ke.empty(),e)}function nN(t){return new di(t.readTime,t.key,pu)}class di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new di(Ne.min(),ke.empty(),pu)}static max(){return new di(Ne.max(),ke.empty(),pu)}}function rN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==sN)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let i=0,a=0,l=!1;e.forEach(c=>{++i,c.next(()=>{++a,l&&a===i&&n()},d=>r(d))}),l=!0,a===i&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(i=>i?se.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new se((r,i)=>{const a=e.length,l=new Array(a);let c=0;for(let d=0;d<a;d++){const p=d;n(e[p]).next(y=>{l[p]=y,++c,c===a&&r(l)},y=>i(y))}})}static doWhile(e,n){return new se((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function oN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}bh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=-1;function Th(t){return t==null}function Kd(t){return t===0&&1/t==-1/0}function aN(t){return typeof t=="number"&&Number.isInteger(t)&&!Kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="";function lN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$x(e)),e=uN(t.get(n),e);return $x(e)}function uN(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case lb:n+="";break;default:n+=a}}return n}function $x(t){return t+lb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ub(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new lt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,n,r,i,a){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bx(this.data.getIterator())}getIteratorFrom(e){return new Bx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class Bx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Nn([])}unionWith(e){let n=new Rt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Aa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new cb("Invalid base64 string: "+a):a}}(e);return new qt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const cN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(He(!!t),typeof t=="string"){let e=0;const n=cN.exec(t);if(He(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="server_timestamp",hb="__type__",fb="__previous_value__",pb="__local_write_time__";function _g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hb])===null||n===void 0?void 0:n.stringValue)===db}function Sh(t){const e=t.mapValue.fields[fb];return _g(e)?Sh(e):e}function mu(t){const e=hi(t.mapValue.fields[pb].timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,r,i,a,l,c,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=p}}const Gd="(default)";class gu{constructor(e,n){this.projectId=e,this.database=n||Gd}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database===Gd}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="__type__",hN="__max__",gd={mapValue:{}},gb="__vector__",Qd="value";function pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_g(t)?4:pN(t)?9007199254740991:fN(t)?10:11:Ae()}function zr(t,e){if(t===e)return!0;const n=pi(t);if(n!==pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mu(t).isEqual(mu(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=hi(i.timestampValue),c=hi(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return fi(i.bytesValue).isEqual(fi(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return xt(i.geoPointValue.latitude)===xt(a.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return xt(i.integerValue)===xt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=xt(i.doubleValue),c=xt(a.doubleValue);return l===c?Kd(l)===Kd(c):isNaN(l)&&isNaN(c)}return!1}(t,e);case 9:return Aa(t.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(Ux(l)!==Ux(c))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(c[d]===void 0||!zr(l[d],c[d])))return!1;return!0}(t,e);default:return Ae()}}function yu(t,e){return(t.values||[]).find(n=>zr(n,e))!==void 0}function Ra(t,e){if(t===e)return 0;const n=pi(t),r=pi(e);if(n!==r)return Le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(a,l){const c=xt(a.integerValue||a.doubleValue),d=xt(l.integerValue||l.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return zx(t.timestampValue,e.timestampValue);case 4:return zx(mu(t),mu(e));case 5:return ym(t.stringValue,e.stringValue);case 6:return function(a,l){const c=fi(a),d=fi(l);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(a,l){const c=a.split("/"),d=l.split("/");for(let p=0;p<c.length&&p<d.length;p++){const y=Le(c[p],d[p]);if(y!==0)return y}return Le(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,l){const c=Le(xt(a.latitude),xt(l.latitude));return c!==0?c:Le(xt(a.longitude),xt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wx(t.arrayValue,e.arrayValue);case 10:return function(a,l){var c,d,p,y;const w=a.fields||{},_=l.fields||{},C=(c=w[Qd])===null||c===void 0?void 0:c.arrayValue,R=(d=_[Qd])===null||d===void 0?void 0:d.arrayValue,j=Le(((p=C==null?void 0:C.values)===null||p===void 0?void 0:p.length)||0,((y=R==null?void 0:R.values)===null||y===void 0?void 0:y.length)||0);return j!==0?j:Wx(C,R)}(t.mapValue,e.mapValue);case 11:return function(a,l){if(a===gd.mapValue&&l===gd.mapValue)return 0;if(a===gd.mapValue)return 1;if(l===gd.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),p=l.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const _=ym(d[w],y[w]);if(_!==0)return _;const C=Ra(c[d[w]],p[y[w]]);if(C!==0)return C}return Le(d.length,y.length)}(t.mapValue,e.mapValue);default:throw Ae()}}function zx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);const n=hi(t),r=hi(e),i=Le(n.seconds,r.seconds);return i!==0?i:Le(n.nanos,r.nanos)}function Wx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Ra(n[i],r[i]);if(a)return a}return Le(n.length,r.length)}function Na(t){return vm(t)}function vm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=vm(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${vm(n.fields[l])}`;return i+"}"}(t.mapValue):Ae()}function Id(t){switch(pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sh(t);return e?16+Id(e):16;case 5:return 2*t.stringValue.length;case 6:return fi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Id(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return wi(r.fields,(a,l)=>{i+=a.length+Id(l)}),i}(t.mapValue);default:throw Ae()}}function xm(t){return!!t&&"integerValue"in t}function Eg(t){return!!t&&"arrayValue"in t}function Hx(t){return!!t&&"nullValue"in t}function qx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ad(t){return!!t&&"mapValue"in t}function fN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mb])===null||n===void 0?void 0:n.stringValue)===gb}function nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ad(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((l,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,i),r={},i=[],n=c.popLast()}l?r[c.lastSegment()]=nu(l):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Ad(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ad(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){wi(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new xn(nu(this.value))}}function yb(t){const e=[];return wi(t.fields,(n,r)=>{const i=new Ht([n]);if(Ad(r)){const a=yb(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,i,a,l,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new en(e,0,Ne.min(),Ne.min(),Ne.min(),xn.empty(),0)}static newFoundDocument(e,n,r,i){return new en(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new en(e,2,n,Ne.min(),Ne.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Ne.min(),Ne.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n){this.position=e,this.inclusive=n}}function Kx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=ke.comparator(ke.fromName(l.referenceValue),n.key):r=Ra(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Gx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,n="asc"){this.field=e,this.dir=n}}function mN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class Pt extends vb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new yN(e,n,r):n==="array-contains"?new wN(e,r):n==="in"?new _N(e,r):n==="not-in"?new EN(e,r):n==="array-contains-any"?new bN(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new vN(e,r):new xN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ra(n,this.value)):n!==null&&pi(this.value)===pi(n)&&this.matchesComparison(Ra(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends vb{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Wr(e,n)}matches(e){return xb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function xb(t){return t.op==="and"}function wb(t){return gN(t)&&xb(t)}function gN(t){for(const e of t.filters)if(e instanceof Wr)return!1;return!0}function wm(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+Na(t.value);if(wb(t))return t.filters.map(e=>wm(e)).join(",");{const e=t.filters.map(n=>wm(n)).join(",");return`${t.op}(${e})`}}function _b(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&zr(r.value,i.value)}(t,e):t instanceof Wr?function(r,i){return i instanceof Wr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,l,c)=>a&&_b(l,i.filters[c]),!0):!1}(t,e):void Ae()}function Eb(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Na(n.value)}`}(t):t instanceof Wr?function(n){return n.op.toString()+" {"+n.getFilters().map(Eb).join(" ,")+"}"}(t):"Filter"}class yN extends Pt{constructor(e,n,r){super(e,n,r),this.key=ke.fromName(r.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class vN extends Pt{constructor(e,n){super(e,"in",n),this.keys=bb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xN extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=bb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ke.fromName(r.referenceValue))}class wN extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Eg(n)&&yu(n.arrayValue,this.value)}}class _N extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yu(this.value.arrayValue,n)}}class EN extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!yu(this.value.arrayValue,n)}}class bN extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n=null,r=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.le=null}}function Qx(t,e=null,n=[],r=[],i=null,a=null,l=null){return new TN(t,e,n,r,i,a,l)}function bg(t){const e=De(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>wm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Na(r)).join(",")),e.le=n}return e.le}function Tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_b(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gx(t.startAt,e.startAt)&&Gx(t.endAt,e.endAt)}function _m(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n=null,r=[],i=[],a=null,l="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=d,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function SN(t,e,n,r,i,a,l,c){return new Ch(t,e,n,r,i,a,l,c)}function Sg(t){return new Ch(t)}function Yx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CN(t){return t.collectionGroup!==null}function ru(t){const e=De(t);if(e.he===null){e.he=[];const n=new Set;for(const a of e.explicitOrderBy)e.he.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Rt(Ht.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.he.push(new Xd(a,r))}),n.has(Ht.keyField().canonicalString())||e.he.push(new Xd(Ht.keyField(),r))}return e.he}function Mr(t){const e=De(t);return e.Pe||(e.Pe=kN(e,ru(t))),e.Pe}function kN(t,e){if(t.limitType==="F")return Qx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Xd(i.field,a)});const n=t.endAt?new Yd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yd(t.startAt.position,t.startAt.inclusive):null;return Qx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Em(t,e,n){return new Ch(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kh(t,e){return Tg(Mr(t),Mr(e))&&t.limitType===e.limitType}function Tb(t){return`${bg(Mr(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Eb(i)).join(", ")}]`),Th(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Na(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Na(i)).join(",")),`Target(${r})`}(Mr(t))}; limitType=${t.limitType})`}function Ph(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ke.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of ru(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,c,d){const p=Kx(l,c,d);return l.inclusive?p<=0:p<0}(r.startAt,ru(r),i)||r.endAt&&!function(l,c,d){const p=Kx(l,c,d);return l.inclusive?p>=0:p>0}(r.endAt,ru(r),i))}(t,e)}function PN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Sb(t){return(e,n)=>{let r=!1;for(const i of ru(t)){const a=IN(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function IN(t,e,n){const r=t.field.isKeyField()?ke.comparator(e.key,n.key):function(a,l,c){const d=l.data.field(a),p=c.data.field(a);return d!==null&&p!==null?Ra(d,p):Ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return ub(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=new lt(ke.comparator);function bs(){return AN}const Cb=new lt(ke.comparator);function Xl(...t){let e=Cb;for(const n of t)e=e.insert(n.key,n);return e}function kb(t){let e=Cb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function so(){return su()}function Pb(){return su()}function su(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const RN=new lt(ke.comparator),NN=new Rt(ke.comparator);function Fe(...t){let e=NN;for(const n of t)e=e.add(n);return e}const DN=new Rt(Le);function jN(){return DN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function Ib(t){return{integerValue:""+t}}function LN(t,e){return aN(e)?Ib(e):Cg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this._=void 0}}function MN(t,e,n){return t instanceof Jd?function(i,a){const l={fields:{[hb]:{stringValue:db},[pb]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_g(a)&&(a=Sh(a)),a&&(l.fields[fb]=a),{mapValue:l}}(n,e):t instanceof vu?Rb(t,e):t instanceof xu?Nb(t,e):function(i,a){const l=Ab(i,a),c=Xx(l)+Xx(i.Ie);return xm(l)&&xm(i.Ie)?Ib(c):Cg(i.serializer,c)}(t,e)}function VN(t,e,n){return t instanceof vu?Rb(t,e):t instanceof xu?Nb(t,e):n}function Ab(t,e){return t instanceof Zd?function(r){return xm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Jd extends Ih{}class vu extends Ih{constructor(e){super(),this.elements=e}}function Rb(t,e){const n=Db(e);for(const r of t.elements)n.some(i=>zr(i,r))||n.push(r);return{arrayValue:{values:n}}}class xu extends Ih{constructor(e){super(),this.elements=e}}function Nb(t,e){let n=Db(e);for(const r of t.elements)n=n.filter(i=>!zr(i,r));return{arrayValue:{values:n}}}class Zd extends Ih{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Xx(t){return xt(t.integerValue||t.doubleValue)}function Db(t){return Eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ON(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vu&&i instanceof vu||r instanceof xu&&i instanceof xu?Aa(r.elements,i.elements,zr):r instanceof Zd&&i instanceof Zd?zr(r.Ie,i.Ie):r instanceof Jd&&i instanceof Jd}(t.transform,e.transform)}class FN{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ah{}function jb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kg(t.key,Jn.none()):new ju(t.key,t.data,Jn.none());{const n=t.data,r=xn.empty();let i=new Rt(Ht.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new _i(t.key,r,new Nn(i.toArray()),Jn.none())}}function $N(t,e,n){t instanceof ju?function(i,a,l){const c=i.value.clone(),d=Zx(i.fieldTransforms,a,l.transformResults);c.setAll(d),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):t instanceof _i?function(i,a,l){if(!Rd(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=Zx(i.fieldTransforms,a,l.transformResults),d=a.data;d.setAll(Lb(i)),d.setAll(c),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function iu(t,e,n,r){return t instanceof ju?function(a,l,c,d){if(!Rd(a.precondition,l))return c;const p=a.value.clone(),y=ew(a.fieldTransforms,d,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof _i?function(a,l,c,d){if(!Rd(a.precondition,l))return c;const p=ew(a.fieldTransforms,d,l),y=l.data;return y.setAll(Lb(a)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(a,l,c){return Rd(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c}(t,e,n)}function UN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=Ab(r.transform,i||null);a!=null&&(n===null&&(n=xn.empty()),n.set(r.field,a))}return n||null}function Jx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Aa(r,i,(a,l)=>ON(a,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ju extends Ah{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _i extends Ah{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Lb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Zx(t,e,n){const r=new Map;He(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,c=e.data.field(a.field);r.set(a.field,VN(l,c,n[i]))}return r}function ew(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,MN(a,l,e))}return r}class kg extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BN extends Ah{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&$N(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Pb();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=n.has(i.key)?null:c;const d=jb(l,c);d!==null&&r.set(i.key,d),l.isValidDocument()||l.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Aa(this.mutations,e.mutations,(n,r)=>Jx(n,r))&&Aa(this.baseMutations,e.baseMutations,(n,r)=>Jx(n,r))}}class Pg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){He(e.mutations.length===r.length);let i=function(){return RN}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Pg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,Be;function qN(t){switch(t){case ue.OK:return Ae();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ae()}}function Mb(t){if(t===void 0)return Es("GRPC error has no .code"),ue.UNKNOWN;switch(t){case Et.OK:return ue.OK;case Et.CANCELLED:return ue.CANCELLED;case Et.UNKNOWN:return ue.UNKNOWN;case Et.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Et.INTERNAL:return ue.INTERNAL;case Et.UNAVAILABLE:return ue.UNAVAILABLE;case Et.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Et.NOT_FOUND:return ue.NOT_FOUND;case Et.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Et.ABORTED:return ue.ABORTED;case Et.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Et.DATA_LOSS:return ue.DATA_LOSS;default:return Ae()}}(Be=Et||(Et={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new ai([4294967295,4294967295],0);function tw(t){const e=ob().encode(t),n=new ZE;return n.update(e),new Uint8Array(n.digest())}function nw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ai([n,r],0),new ai([i,a],0)]}class Ig{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=ai.fromNumber(this.Ee)}Ae(e,n,r){let i=e.add(n.multiply(ai.fromNumber(r)));return i.compare(KN)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=tw(e),[r,i]=nw(n);for(let a=0;a<this.hashCount;a++){const l=this.Ae(r,i,a);if(!this.Re(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Ig(a,i,n);return r.forEach(c=>l.insert(c)),l}insert(e){if(this.Ee===0)return;const n=tw(e),[r,i]=nw(n);for(let a=0;a<this.hashCount;a++){const l=this.Ae(r,i,a);this.Ve(l)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rh(Ne.min(),i,new lt(Le),bs(),Fe())}}class Lu{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Lu(r,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n,r,i){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=i}}class Vb{constructor(e,n){this.targetId=e,this.ge=n}}class Ob{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class rw{constructor(){this.pe=0,this.ye=sw(),this.we=qt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Fe(),n=Fe(),r=Fe();return this.ye.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ae()}}),new Lu(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=sw()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,He(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class GN{constructor(e){this.ke=e,this.qe=new Map,this.Qe=bs(),this.$e=yd(),this.Ue=yd(),this.Ke=new lt(Le)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,i)=>{this.Je(i)&&n(i)})}Ze(e){const n=e.targetId,r=e.ge.count,i=this.Xe(n);if(i){const a=i.target;if(_m(a))if(r===0){const l=new ke(a.path);this.ze(n,l,en.newNoDocument(l,Ne.min()))}else He(r===1);else{const l=this.et(n);if(l!==r){const c=this.tt(e),d=c?this.nt(c,e,l):1;if(d!==0){this.Ye(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,p)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,c;try{l=fi(r).toUint8Array()}catch(d){if(d instanceof cb)return Ia("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Ig(l,i,a)}catch(d){return Ia(d instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ee===0?null:c}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const l=this.ke.it(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.ze(n,a,null),i++)}),i}ot(e){const n=new Map;this.qe.forEach((a,l)=>{const c=this.Xe(l);if(c){if(a.current&&_m(c.target)){const d=new ke(c.target.path);this._t(d).has(l)||this.ut(l,d)||this.ze(l,d,en.newNoDocument(d,e))}a.ve&&(n.set(l,a.Fe()),a.Me())}});let r=Fe();this.Ue.forEach((a,l)=>{let c=!0;l.forEachWhile(d=>{const p=this.Xe(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.Qe.forEach((a,l)=>l.setReadTime(e));const i=new Rh(e,n,this.Ke,this.Qe,r);return this.Qe=bs(),this.$e=yd(),this.Ue=yd(),this.Ke=new lt(Le),i}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const i=this.He(e);this.ut(e,n)?i.xe(n,1):i.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new rw,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new Rt(Le),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Rt(Le),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new rw),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function yd(){return new lt(ke.comparator)}function sw(){return new lt(ke.comparator)}const QN={asc:"ASCENDING",desc:"DESCENDING"},YN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XN={and:"AND",or:"OR"};class JN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function eh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZN(t,e){return eh(t,e.toTimestamp())}function Vr(t){return He(!!t),Ne.fromTimestamp(function(n){const r=hi(n);return new At(r.seconds,r.nanos)}(t))}function Ag(t,e){return Tm(t,e).canonicalString()}function Tm(t,e){const n=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $b(t){const e=rt.fromString(t);return He(Hb(e)),e}function Sm(t,e){return Ag(t.databaseId,e.path)}function Vp(t,e){const n=$b(e);if(n.get(1)!==t.databaseId.projectId)throw new be(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new be(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(Bb(n))}function Ub(t,e){return Ag(t.databaseId,e)}function e1(t){const e=$b(t);return e.length===4?rt.emptyPath():Bb(e)}function Cm(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bb(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iw(t,e,n){return{name:Sm(t,e),fields:n.value.mapValue.fields}}function t1(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,y){return p.useProto3Json?(He(y===void 0||typeof y=="string"),qt.fromBase64String(y||"")):(He(y===void 0||y instanceof Buffer||y instanceof Uint8Array),qt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&function(p){const y=p.code===void 0?ue.UNKNOWN:Mb(p.code);return new be(y,p.message||"")}(l);n=new Ob(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vp(t,r.document.name),a=Vr(r.document.updateTime),l=r.document.createTime?Vr(r.document.createTime):Ne.min(),c=new xn({mapValue:{fields:r.document.fields}}),d=en.newFoundDocument(i,a,l,c),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Nd(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vp(t,r.document),a=r.readTime?Vr(r.readTime):Ne.min(),l=en.newNoDocument(i,a),c=r.removedTargetIds||[];n=new Nd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vp(t,r.document),a=r.removedTargetIds||[];n=new Nd([],a,i,null)}else{if(!("filter"in e))return Ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new HN(i,a),c=r.targetId;n=new Vb(c,l)}}return n}function n1(t,e){let n;if(e instanceof ju)n={update:iw(t,e.key,e.value)};else if(e instanceof kg)n={delete:Sm(t,e.key)};else if(e instanceof _i)n={update:iw(t,e.key,e.data),updateMask:d1(e.fieldMask)};else{if(!(e instanceof BN))return Ae();n={verify:Sm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const c=l.transform;if(c instanceof Jd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zd)return{fieldPath:l.field.canonicalString(),increment:c.Ie};throw Ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:ZN(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae()}(t,e.precondition)),n}function r1(t,e){return t&&t.length>0?(He(e!==void 0),t.map(n=>function(i,a){let l=i.updateTime?Vr(i.updateTime):Vr(a);return l.isEqual(Ne.min())&&(l=Vr(a)),new FN(l,i.transformResults||[])}(n,e))):[]}function s1(t,e){return{documents:[Ub(t,e.path)]}}function i1(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ub(t,i);const a=function(p){if(p.length!==0)return Wb(Wr.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const l=function(p){if(p.length!==0)return p.map(y=>function(_){return{field:ya(_.field),direction:l1(_.dir)}}(y))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=bm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ht:n,parent:i}}function o1(t){let e=e1(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){He(r===1);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];n.where&&(a=function(w){const _=zb(w);return _ instanceof Wr&&wb(_)?_.getFilters():[_]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(_=>function(R){return new Xd(va(R.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(_))}(n.orderBy));let c=null;n.limit&&(c=function(w){let _;return _=typeof w=="object"?w.value:w,Th(_)?null:_}(n.limit));let d=null;n.startAt&&(d=function(w){const _=!!w.before,C=w.values||[];return new Yd(C,_)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const _=!w.before,C=w.values||[];return new Yd(C,_)}(n.endAt)),SN(e,i,l,a,c,"F",d,p)}function a1(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=va(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=va(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=va(n.unaryFilter.field);return Pt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=va(n.unaryFilter.field);return Pt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Wr.create(n.compositeFilter.filters.map(r=>zb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae()}}(n.compositeFilter.op))}(t):Ae()}function l1(t){return QN[t]}function u1(t){return YN[t]}function c1(t){return XN[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return Ht.fromServerFormat(t.fieldPath)}function Wb(t){return t instanceof Pt?function(n){if(n.op==="=="){if(qx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(Hx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(Hx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:u1(n.op),value:n.value}}}(t):t instanceof Wr?function(n){const r=n.getFilters().map(i=>Wb(i));return r.length===1?r[0]:{compositeFilter:{op:c1(n.op),filters:r}}}(t):Ae()}function d1(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Hb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n,r,i,a=Ne.min(),l=Ne.min(),c=qt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.Tt=e}}function f1(t){const e=o1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Em(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.Tn=new m1}addToCollectionParentIndex(e,n){return this.Tn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(di.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class m1{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Rt(rt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qb=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(qb,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Da(0)}static Kn(){return new Da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="LruGarbageCollector",g1=1048576;function lw([t,e],[n,r]){const i=Le(t,n);return i===0?Le(e,r):i}class y1{constructor(e){this.Hn=e,this.buffer=new Rt(lw),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();lw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class v1{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ye(aw,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wa(n)?ye(aw,"Ignoring IndexedDB error during garbage collection: ",n):await za(n)}await this.er(3e5)})}}class x1{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(bh.ae);const r=new y1(n);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ow)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ow):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,i,a,l,c,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,l=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,c=Date.now(),this.removeTargets(e,r,n))).next(w=>(a=w,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(p=Date.now(),ma()<=Oe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${w} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:w})))}}function w1(t,e){return new x1(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&iu(r.mutation,i,Nn.empty(),At.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Fe()){const i=so();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let l=Xl();return a.forEach((c,d)=>{l=l.insert(c,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=so();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,c)=>{n.set(l,c)})})}computeViews(e,n,r,i){let a=bs();const l=su(),c=function(){return su()}();return n.forEach((d,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof _i)?a=a.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),iu(y.mutation,p,y.mutation.getFieldMask(),At.now())):l.set(p.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,a).next(d=>(d.forEach((p,y)=>l.set(p,y)),n.forEach((p,y)=>{var w;return c.set(p,new E1(y,(w=l.get(p))!==null&&w!==void 0?w:null))}),c))}recalculateAndSaveOverlays(e,n){const r=su();let i=new lt((l,c)=>l-c),a=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const c of l)c.keys().forEach(d=>{const p=n.get(d);if(p===null)return;let y=r.get(d)||Nn.empty();y=c.applyToLocalView(p,y),r.set(d,y);const w=(i.get(c.batchId)||Fe()).add(d);i=i.insert(c.batchId,w)})}).next(()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),p=d.key,y=d.value,w=Pb();y.forEach(_=>{if(!a.has(_)){const C=jb(n.get(_),r.get(_));C!==null&&w.set(_,C),a=a.add(_)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return ke.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):se.resolve(so());let c=pu,d=a;return l.next(p=>se.forEach(p,(y,w)=>(c<w.largestBatchId&&(c=w.largestBatchId),a.get(y)?se.resolve():this.remoteDocumentCache.getEntry(e,y).next(_=>{d=d.insert(y,_)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,d,p,Fe())).next(y=>({batchId:c,changes:kb(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(r=>{let i=Xl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Xl();return this.indexManager.getCollectionParents(e,a).next(c=>se.forEach(c,d=>{const p=function(w,_){return new Ch(_,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(y=>{y.forEach((w,_)=>{l=l.insert(w,_)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(l=>{a.forEach((d,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,en.newInvalidDocument(y)))});let c=Xl();return l.forEach((d,p)=>{const y=a.get(d);y!==void 0&&iu(y.mutation,p,Nn.empty(),At.now()),Ph(n,p)&&(c=c.insert(d,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return se.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Vr(i.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(i){return{name:i.name,query:f1(i.bundledQuery),readTime:Vr(i.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(){this.overlays=new lt(ke.comparator),this.Rr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=so();return se.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.Et(e,n,a)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Rr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const i=so(),a=n.length+1,l=new ke(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const d=c.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&d.largestBatchId>r&&i.set(d.getKey(),d)}return se.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new lt((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=a.get(p.largestBatchId);y===null&&(y=so(),a=a.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const c=so(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((p,y)=>c.set(p,y)),!(c.size()>=i)););return se.resolve(c)}Et(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new WN(n,r));let a=this.Rr.get(n);a===void 0&&(a=Fe(),this.Rr.set(n,a)),this.Rr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.Vr=new Rt(Vt.mr),this.gr=new Rt(Vt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new Vt(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new ke(new rt([])),r=new Vt(n,e),i=new Vt(n,e+1),a=[];return this.gr.forEachInRange([r,i],l=>{this.wr(l),a.push(l.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new ke(new rt([])),r=new Vt(n,e),i=new Vt(n,e+1);let a=Fe();return this.gr.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Vt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return ke.comparator(e.key,n.key)||Le(e.Cr,n.Cr)}static pr(e,n){return Le(e.Cr,n.Cr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Rt(Vt.mr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new zN(a,n,r,i);this.mutationQueue.push(l);for(const c of i)this.Mr=this.Mr.add(new Vt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,n){return se.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Nr(r),a=i<0?0:i;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?wg:this.Fr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),i=new Vt(n,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([r,i],l=>{const c=this.Or(l.Cr);a.push(c)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rt(Le);return n.forEach(i=>{const a=new Vt(i,0),l=new Vt(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,l],c=>{r=r.add(c.Cr)})}),se.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ke.isDocumentKey(a)||(a=a.child(""));const l=new Vt(new ke(a),0);let c=new Rt(Le);return this.Mr.forEachWhile(d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(d.Cr)),!0)},l),se.resolve(this.Br(c))}Br(e){const n=[];return e.forEach(r=>{const i=this.Or(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){He(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return se.forEach(n.mutations,i=>{const a=new Vt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new Vt(n,0),i=this.Mr.firstAfterOrEqual(r);return se.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.kr=e,this.docs=function(){return new lt(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=bs();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():en.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=bs();const l=n.path,c=new ke(l.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||rN(nN(y),r)<=0||(i.has(y.key)||Ph(n,y))&&(a=a.insert(y.key,y.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Ae()}qr(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new I1(this)}getSize(e){return se.resolve(this.size)}}class I1 extends _1{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.persistence=e,this.Qr=new vo(n=>bg(n),Tg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Rg,this.targetCount=0,this.Kr=Da.Un()}forEachTarget(e,n){return this.Qr.forEach((r,i)=>n(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),se.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new Da(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.zn(n),se.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Qr.forEach((l,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Qr.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),se.waitFor(a).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new bh(0),this.zr=!1,this.zr=!0,this.jr=new C1,this.referenceDelegate=e(this),this.Hr=new A1(this),this.indexManager=new p1,this.remoteDocumentCache=function(i){return new P1(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new h1(n),this.Yr=new T1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new S1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new k1(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const i=new R1(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(a=>this.referenceDelegate.Xr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}ei(e,n){return se.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class R1 extends iN{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.ti=new Rg,this.ni=null}static ri(e){return new Ng(e)}get ii(){if(this.ni)return this.ni;throw Ae()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),se.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(i=>this.ii.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.ii.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.ii,r=>{const i=ke.fromPath(r);return this.si(e,i).next(a=>{a||n.removeEntry(i,Ne.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return se.or([()=>se.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class th{constructor(e,n){this.persistence=e,this.oi=new vo(r=>lN(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=w1(this,n)}static ri(e,n){return new th(e,n)}Zr(){}Xr(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return se.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(a=>a?se.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.qr(e,l=>this.ar(e,l,n).next(c=>{c||(r++,a.removeEntry(l,Ne.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Id(e.data.value)),n}ar(e,n,r){return se.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.oi.get(n);return se.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=i}static Yi(e,n){let r=Fe(),i=Fe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Dg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return CA()?8:oN(nn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.rs(e,n).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ss(e,n,i,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new N1;return this._s(e,n,l).next(c=>{if(a.result=c,this.Xi)return this.us(e,n,l,c.size)})}).next(()=>a.result)}us(e,n,r,i){return r.documentReadCount<this.es?(ma()<=Oe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),se.resolve()):(ma()<=Oe.DEBUG&&ye("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(ma()<=Oe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(n))):se.resolve())}rs(e,n){if(Yx(n))return se.resolve(null);let r=Mr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Em(n,null,"F"),r=Mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Fe(...a);return this.ns.getDocuments(e,l).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const p=this.cs(n,c);return this.ls(n,p,l,d.readTime)?this.rs(e,Em(n,null,"F")):this.hs(e,p,n,d)}))})))}ss(e,n,r,i){return Yx(n)||i.isEqual(Ne.min())?se.resolve(null):this.ns.getDocuments(e,r).next(a=>{const l=this.cs(n,a);return this.ls(n,l,r,i)?se.resolve(null):(ma()<=Oe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ga(n)),this.hs(e,l,n,tN(i,pu)).next(c=>c))})}cs(e,n){let r=new Rt(Sb(e));return n.forEach((i,a)=>{Ph(e,a)&&(r=r.add(a))}),r}ls(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}_s(e,n,r){return ma()<=Oe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",ga(n)),this.ns.getDocumentsMatchingQuery(e,n,di.min(),r)}hs(e,n,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="LocalStore",j1=3e8;class L1{constructor(e,n,r,i){this.persistence=e,this.Ps=n,this.serializer=i,this.Ts=new lt(Le),this.Is=new vo(a=>bg(a),Tg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b1(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function M1(t,e,n,r){return new L1(t,e,n,r)}async function Gb(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],c=[];let d=Fe();for(const p of i){l.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of a){c.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next(p=>({Rs:p,removedBatchIds:l,addedBatchIds:c}))})})}function V1(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.ds.newChangeBuffer({trackRemovals:!0});return function(c,d,p,y){const w=p.batch,_=w.keys();let C=se.resolve();return _.forEach(R=>{C=C.next(()=>y.getEntry(d,R)).next(j=>{const N=p.docVersions.get(R);He(N!==null),j.version.compareTo(N)<0&&(w.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))})}),C.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=Fe();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(d=d.add(c.batch.mutations[p].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Qb(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function O1(t,e){const n=De(t),r=e.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const c=[];e.targetChanges.forEach((y,w)=>{const _=i.get(w);if(!_)return;c.push(n.Hr.removeMatchingKeys(a,y.removedDocuments,w).next(()=>n.Hr.addMatchingKeys(a,y.addedDocuments,w)));let C=_.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(qt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):y.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(y.resumeToken,r)),i=i.insert(w,C),function(j,N,L){return j.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=j1?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(_,C,y)&&c.push(n.Hr.updateTargetData(a,C))});let d=bs(),p=Fe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,y))}),c.push(F1(a,l,e.documentUpdates).next(y=>{d=y.Vs,p=y.fs})),!r.isEqual(Ne.min())){const y=n.Hr.getLastRemoteSnapshotVersion(a).next(w=>n.Hr.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(y)}return se.waitFor(c).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,d,p)).next(()=>d)}).then(a=>(n.Ts=i,a))}function F1(t,e,n){let r=Fe(),i=Fe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let l=bs();return n.forEach((c,d)=>{const p=a.get(c);d.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(Ne.min())?(e.removeEntry(c,d.readTime),l=l.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),l=l.insert(c,d)):ye(jg,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),{Vs:l,fs:i}})}function $1(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function U1(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Hr.getTargetData(r,e).next(a=>a?(i=a,se.resolve(i)):n.Hr.allocateTargetId(r).next(l=>(i=new si(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function km(t,e,n){const r=De(t),i=r.Ts.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Wa(l))throw l;ye(jg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)}function uw(t,e,n){const r=De(t);let i=Ne.min(),a=Fe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(d,p,y){const w=De(d),_=w.Is.get(y);return _!==void 0?se.resolve(w.Ts.get(_)):w.Hr.getTargetData(p,y)}(r,l,Mr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,c.targetId).next(d=>{a=d})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,n?i:Ne.min(),n?a:Fe())).next(c=>(B1(r,PN(e),c),{documents:c,gs:a})))}function B1(t,e,n){let r=t.Es.get(e)||Ne.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Es.set(e,r)}class cw{constructor(){this.activeTargetIds=jN()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class z1{constructor(){this.ho=new cw,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new cw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="ConnectivityMonitor";class hw{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ye(dw,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ye(dw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd=null;function Pm(){return vd===null?vd=function(){return 268435456+Math.round(2147483648*Math.random())}():vd++,"0x"+vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="RestConnection",H1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class q1{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Gd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,n,r,i,a){const l=Pm(),c=this.bo(e,n.toUriEncodedString());ye(Op,`Sending RPC '${e}' ${l}:`,c,r);const d={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(d,i,a),this.vo(e,c,d,r).then(p=>(ye(Op,`Received RPC '${e}' ${l}: `,p),p),p=>{throw Ia(Op,`RPC '${e}' ${l} failed with error: `,p,"url: ",c,"request:",r),p})}Co(e,n,r,i,a,l){return this.So(e,n,r,i,a)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}bo(e,n){const r=H1[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class G1 extends q1{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,i){const a=Pm();return new Promise((l,c)=>{const d=new eb;d.setWithCredentials(!0),d.listenOnce(tb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pd.NO_ERROR:const y=d.getResponseJson();ye(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),l(y);break;case Pd.TIMEOUT:ye(Xt,`RPC '${e}' ${a} timed out`),c(new be(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Pd.HTTP_ERROR:const w=d.getStatus();if(ye(Xt,`RPC '${e}' ${a} failed with status:`,w,"response text:",d.getResponseText()),w>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const C=_==null?void 0:_.error;if(C&&C.status&&C.message){const R=function(N){const L=N.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(L)>=0?L:ue.UNKNOWN}(C.status);c(new be(R,C.message))}else c(new be(ue.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new be(ue.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ye(Xt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(i);ye(Xt,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",p,r,15)})}Wo(e,n,r){const i=Pm(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=sb(),c=rb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Do(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=a.join("");ye(Xt,`Creating RPC '${e}' stream ${i}: ${y}`,d);const w=l.createWebChannel(y,d);let _=!1,C=!1;const R=new K1({Fo:N=>{C?ye(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(_||(ye(Xt,`Opening RPC '${e}' stream ${i} transport.`),w.open(),_=!0),ye(Xt,`RPC '${e}' stream ${i} sending:`,N),w.send(N))},Mo:()=>w.close()}),j=(N,L,H)=>{N.listen(L,$=>{try{H($)}catch(q){setTimeout(()=>{throw q},0)}})};return j(w,Yl.EventType.OPEN,()=>{C||(ye(Xt,`RPC '${e}' stream ${i} transport opened.`),R.Qo())}),j(w,Yl.EventType.CLOSE,()=>{C||(C=!0,ye(Xt,`RPC '${e}' stream ${i} transport closed`),R.Uo())}),j(w,Yl.EventType.ERROR,N=>{C||(C=!0,Ia(Xt,`RPC '${e}' stream ${i} transport errored:`,N),R.Uo(new be(ue.UNAVAILABLE,"The operation could not be completed")))}),j(w,Yl.EventType.MESSAGE,N=>{var L;if(!C){const H=N.data[0];He(!!H);const $=H,q=($==null?void 0:$.error)||((L=$[0])===null||L===void 0?void 0:L.error);if(q){ye(Xt,`RPC '${e}' stream ${i} received error:`,q);const W=q.status;let O=function(S){const I=Et[S];if(I!==void 0)return Mb(I)}(W),k=q.message;O===void 0&&(O=ue.INTERNAL,k="Unknown error status: "+W+" with message "+q.message),C=!0,R.Uo(new be(O,k)),w.close()}else ye(Xt,`RPC '${e}' stream ${i} received:`,H),R.Ko(H)}}),j(c,nb.STAT_EVENT,N=>{N.stat===gm.PROXY?ye(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===gm.NOPROXY&&ye(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.$o()},0),R}}function Fp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){return new JN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=i,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,n-r);i>0&&ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="PersistentStream";class Xb{constructor(e,n,r,i,a,l,c,d){this.Ti=e,this.n_=r,this.r_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Yb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Es(n.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===n&&this.V_(r,i)},r=>{e(()=>{const i=new be(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ye(fw,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ye(fw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Q1 extends Xb{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=t1(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ne.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ne.min():l.readTime?Vr(l.readTime):Ne.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=Cm(this.serializer),n.addTarget=function(a,l){let c;const d=l.target;if(c=_m(d)?{documents:s1(a,d)}:{query:i1(a,d).ht},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Fb(a,l.resumeToken);const p=bm(a,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ne.min())>0){c.readTime=eh(a,l.snapshotVersion.toTimestamp());const p=bm(a,l.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=a1(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=Cm(this.serializer),n.removeTarget=e,this.I_(n)}}class Y1 extends Xb{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=r1(e.writeResults,e.commitTime),r=Vr(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=Cm(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>n1(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{}class J1 extends X1{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new be(ue.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.So(e,Tm(n,r),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(ue.UNKNOWN,a.toString())})}Co(e,n,r,i,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Co(e,Tm(n,r),i,l,c,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(ue.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Z1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Es(n),this.N_=!1):ye("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="RemoteStore";class e2{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(l=>{r.enqueueAndForget(async()=>{xo(this)&&(ye(fo,"Restarting streams for network reachability change."),await async function(d){const p=De(d);p.W_.add(4),await Mu(p),p.j_.set("Unknown"),p.W_.delete(4),await Dh(p)}(this))})}),this.j_=new Z1(r,i)}}async function Dh(t){if(xo(t))for(const e of t.G_)await e(!0)}async function Mu(t){for(const e of t.G_)await e(!1)}function Jb(t,e){const n=De(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),Og(n)?Vg(n):Ha(n).c_()&&Mg(n,e))}function Lg(t,e){const n=De(t),r=Ha(n);n.K_.delete(e),r.c_()&&Zb(n,e),n.K_.size===0&&(r.c_()?r.P_():xo(n)&&n.j_.set("Unknown"))}function Mg(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ha(t).y_(e)}function Zb(t,e){t.H_.Ne(e),Ha(t).w_(e)}function Vg(t){t.H_=new GN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Ha(t).start(),t.j_.B_()}function Og(t){return xo(t)&&!Ha(t).u_()&&t.K_.size>0}function xo(t){return De(t).W_.size===0}function eT(t){t.H_=void 0}async function t2(t){t.j_.set("Online")}async function n2(t){t.K_.forEach((e,n)=>{Mg(t,e)})}async function r2(t,e){eT(t),Og(t)?(t.j_.q_(e),Vg(t)):t.j_.set("Unknown")}async function s2(t,e,n){if(t.j_.set("Online"),e instanceof Ob&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const c of a.targetIds)i.K_.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.K_.delete(c),i.H_.removeTarget(c))}(t,e)}catch(r){ye(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nh(t,r)}else if(e instanceof Nd?t.H_.We(e):e instanceof Vb?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Ne.min()))try{const r=await Qb(t.localStore);n.compareTo(r)>=0&&await function(a,l){const c=a.H_.ot(l);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=a.K_.get(p);y&&a.K_.set(p,y.withResumeToken(d.resumeToken,l))}}),c.targetMismatches.forEach((d,p)=>{const y=a.K_.get(d);if(!y)return;a.K_.set(d,y.withResumeToken(qt.EMPTY_BYTE_STRING,y.snapshotVersion)),Zb(a,d);const w=new si(y.target,d,p,y.sequenceNumber);Mg(a,w)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ye(fo,"Failed to raise snapshot:",r),await nh(t,r)}}async function nh(t,e,n){if(!Wa(e))throw e;t.W_.add(1),await Mu(t),t.j_.set("Offline"),n||(n=()=>Qb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye(fo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Dh(t)})}function tT(t,e){return e().catch(n=>nh(t,n,e))}async function jh(t){const e=De(t),n=mi(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:wg;for(;i2(e);)try{const i=await $1(e.localStore,r);if(i===null){e.U_.length===0&&n.P_();break}r=i.batchId,o2(e,i)}catch(i){await nh(e,i)}nT(e)&&rT(e)}function i2(t){return xo(t)&&t.U_.length<10}function o2(t,e){t.U_.push(e);const n=mi(t);n.c_()&&n.S_&&n.b_(e.mutations)}function nT(t){return xo(t)&&!mi(t).u_()&&t.U_.length>0}function rT(t){mi(t).start()}async function a2(t){mi(t).C_()}async function l2(t){const e=mi(t);for(const n of t.U_)e.b_(n.mutations)}async function u2(t,e,n){const r=t.U_.shift(),i=Pg.from(r,e,n);await tT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jh(t)}async function c2(t,e){e&&mi(t).S_&&await async function(r,i){if(function(l){return qN(l)&&l!==ue.ABORTED}(i.code)){const a=r.U_.shift();mi(r).h_(),await tT(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await jh(r)}}(t,e),nT(t)&&rT(t)}async function pw(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),ye(fo,"RemoteStore received new credentials");const r=xo(n);n.W_.add(3),await Mu(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Dh(n)}async function d2(t,e){const n=De(t);e?(n.W_.delete(2),await Dh(n)):e||(n.W_.add(2),await Mu(n),n.j_.set("Unknown"))}function Ha(t){return t.J_||(t.J_=function(n,r,i){const a=De(n);return a.M_(),new Q1(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{xo:t2.bind(null,t),No:n2.bind(null,t),Lo:r2.bind(null,t),p_:s2.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Og(t)?Vg(t):t.j_.set("Unknown")):(await t.J_.stop(),eT(t))})),t.J_}function mi(t){return t.Y_||(t.Y_=function(n,r,i){const a=De(n);return a.M_(),new Y1(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:a2.bind(null,t),Lo:c2.bind(null,t),D_:l2.bind(null,t),v_:u2.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await jh(t)):(await t.Y_.stop(),t.U_.length>0&&(ye(fo,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,c=new Fg(e,n,l,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(t,e){if(Es("AsyncQueue",`${e}: ${t}`),Wa(t))return new be(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{static emptySet(e){return new Sa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ke.comparator(n.key,r.key):(n,r)=>ke.comparator(n.key,r.key),this.keyedMap=Xl(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.Z_=new lt(ke.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ae():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ja{constructor(e,n,r,i,a,l,c,d,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach(c=>{l.push({type:0,doc:c})}),new ja(e,n,Sa.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class f2{constructor(){this.queries=gw(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const i=De(n),a=i.queries;i.queries=gw(),a.forEach((l,c)=>{for(const d of c.ta)d.onError(r)})})(this,new be(ue.ABORTED,"Firestore shutting down"))}}function gw(){return new vo(t=>Tb(t),kh)}async function sT(t,e){const n=De(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.na()&&e.ra()&&(r=2):(a=new h2,r=e.ra()?0:1);try{switch(r){case 0:a.ea=await n.onListen(i,!0);break;case 1:a.ea=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const c=$g(l,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.ta.push(e),e.sa(n.onlineState),a.ea&&e.oa(a.ea)&&Ug(n)}async function iT(t,e){const n=De(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.ta.indexOf(e);l>=0&&(a.ta.splice(l,1),a.ta.length===0?i=e.ra()?0:1:!a.na()&&e.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function p2(t,e){const n=De(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const c of l.ta)c.oa(i)&&(r=!0);l.ea=i}}r&&Ug(n)}function m2(t,e,n){const r=De(t),i=r.queries.get(e);if(i)for(const a of i.ta)a.onError(n);r.queries.delete(e)}function Ug(t){t.ia.forEach(e=>{e.next()})}var Im,yw;(yw=Im||(Im={}))._a="default",yw.Cache="cache";class oT{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Im.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.key=e}}class lT{constructor(e){this.key=e}}class g2{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Fe(),this.mutatedKeys=Fe(),this.ya=Sb(e),this.wa=new Sa(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new mw,i=n?n.wa:this.wa;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,w)=>{const _=i.get(y),C=Ph(this.query,w)?w:null,R=!!_&&this.mutatedKeys.has(_.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let N=!1;_&&C?_.data.isEqual(C.data)?R!==j&&(r.track({type:3,doc:C}),N=!0):this.va(_,C)||(r.track({type:2,doc:C}),N=!0,(d&&this.ya(C,d)>0||p&&this.ya(C,p)<0)&&(c=!0)):!_&&C?(r.track({type:0,doc:C}),N=!0):_&&!C&&(r.track({type:1,doc:_}),N=!0,(d||p)&&(c=!0)),N&&(C?(l=l.add(C),a=j?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{wa:l,Da:r,ls:c,mutatedKeys:a}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((y,w)=>function(C,R){const j=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return j(C)-j(R)}(y.type,w.type)||this.ya(y.doc,w.doc)),this.Ca(r),i=i!=null&&i;const c=n&&!i?this.Fa():[],d=this.pa.size===0&&this.current&&!i?1:0,p=d!==this.ga;return this.ga=d,l.length!==0||p?{snapshot:new ja(this.query,e.wa,a,l,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:c}:{Ma:c}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new mw,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Fe(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new lT(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new aT(r))}),n}Oa(e){this.fa=e.gs,this.pa=Fe();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return ja.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Bg="SyncEngine";class y2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class v2{constructor(e){this.key=e,this.Ba=!1}}class x2{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new vo(c=>Tb(c),kh),this.qa=new Map,this.Qa=new Set,this.$a=new lt(ke.comparator),this.Ua=new Map,this.Ka=new Rg,this.Wa={},this.Ga=new Map,this.za=Da.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function w2(t,e,n=!0){const r=pT(t);let i;const a=r.ka.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Na()):i=await uT(r,e,n,!0),i}async function _2(t,e){const n=pT(t);await uT(n,e,!0,!1)}async function uT(t,e,n,r){const i=await U1(t.localStore,Mr(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await E2(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&Jb(t.remoteStore,i),c}async function E2(t,e,n,r,i){t.Ha=(w,_,C)=>async function(j,N,L,H){let $=N.view.ba(L);$.ls&&($=await uw(j.localStore,N.query,!1).then(({documents:k})=>N.view.ba(k,$)));const q=H&&H.targetChanges.get(N.targetId),W=H&&H.targetMismatches.get(N.targetId)!=null,O=N.view.applyChanges($,j.isPrimaryClient,q,W);return xw(j,N.targetId,O.Ma),O.snapshot}(t,w,_,C);const a=await uw(t.localStore,e,!0),l=new g2(e,a.gs),c=l.ba(a.documents),d=Lu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(c,t.isPrimaryClient,d);xw(t,n,p.Ma);const y=new y2(e,n,l);return t.ka.set(e,y),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),p.snapshot}async function b2(t,e,n){const r=De(t),i=r.ka.get(e),a=r.qa.get(i.targetId);if(a.length>1)return r.qa.set(i.targetId,a.filter(l=>!kh(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await km(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Lg(r.remoteStore,i.targetId),Am(r,i.targetId)}).catch(za)):(Am(r,i.targetId),await km(r.localStore,i.targetId,!0))}async function T2(t,e){const n=De(t),r=n.ka.get(e),i=n.qa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lg(n.remoteStore,r.targetId))}async function S2(t,e,n){const r=N2(t);try{const i=await function(l,c){const d=De(l),p=At.now(),y=c.reduce((C,R)=>C.add(R.key),Fe());let w,_;return d.persistence.runTransaction("Locally write mutations","readwrite",C=>{let R=bs(),j=Fe();return d.ds.getEntries(C,y).next(N=>{R=N,R.forEach((L,H)=>{H.isValidDocument()||(j=j.add(L))})}).next(()=>d.localDocuments.getOverlayedDocuments(C,R)).next(N=>{w=N;const L=[];for(const H of c){const $=UN(H,w.get(H.key).overlayedDocument);$!=null&&L.push(new _i(H.key,$,yb($.value.mapValue),Jn.exists(!0)))}return d.mutationQueue.addMutationBatch(C,p,L,c)}).next(N=>{_=N;const L=N.applyToLocalDocumentSet(w,j);return d.documentOverlayCache.saveOverlays(C,N.batchId,L)})}).then(()=>({batchId:_.batchId,changes:kb(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,c,d){let p=l.Wa[l.currentUser.toKey()];p||(p=new lt(Le)),p=p.insert(c,d),l.Wa[l.currentUser.toKey()]=p}(r,i.batchId,n),await Vu(r,i.changes),await jh(r.remoteStore)}catch(i){const a=$g(i,"Failed to persist write");n.reject(a)}}async function cT(t,e){const n=De(t);try{const r=await O1(n.localStore,e);e.targetChanges.forEach((i,a)=>{const l=n.Ua.get(a);l&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Ba=!0:i.modifiedDocuments.size>0?He(l.Ba):i.removedDocuments.size>0&&(He(l.Ba),l.Ba=!1))}),await Vu(n,r,e)}catch(r){await za(r)}}function vw(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ka.forEach((a,l)=>{const c=l.view.sa(e);c.snapshot&&i.push(c.snapshot)}),function(l,c){const d=De(l);d.onlineState=c;let p=!1;d.queries.forEach((y,w)=>{for(const _ of w.ta)_.sa(c)&&(p=!0)}),p&&Ug(d)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function C2(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Ua.get(e),a=i&&i.key;if(a){let l=new lt(ke.comparator);l=l.insert(a,en.newNoDocument(a,Ne.min()));const c=Fe().add(a),d=new Rh(Ne.min(),new Map,new lt(Le),l,c);await cT(r,d),r.$a=r.$a.remove(a),r.Ua.delete(e),zg(r)}else await km(r.localStore,e,!1).then(()=>Am(r,e,n)).catch(za)}async function k2(t,e){const n=De(t),r=e.batch.batchId;try{const i=await V1(n.localStore,e);hT(n,r,null),dT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vu(n,i)}catch(i){await za(i)}}async function P2(t,e,n){const r=De(t);try{const i=await function(l,c){const d=De(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.mutationQueue.lookupMutationBatch(p,c).next(w=>(He(w!==null),y=w.keys(),d.mutationQueue.removeMutationBatch(p,w))).next(()=>d.mutationQueue.performConsistencyCheck(p)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>d.localDocuments.getDocuments(p,y))})}(r.localStore,e);hT(r,e,n),dT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vu(r,i)}catch(i){await za(i)}}function dT(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function hT(t,e,n){const r=De(t);let i=r.Wa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function Am(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||fT(t,r)})}function fT(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(Lg(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),zg(t))}function xw(t,e,n){for(const r of n)r instanceof aT?(t.Ka.addReference(r.key,e),I2(t,r)):r instanceof lT?(ye(Bg,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||fT(t,r.key)):Ae()}function I2(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(ye(Bg,"New document in limbo: "+n),t.Qa.add(r),zg(t))}function zg(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new ke(rt.fromString(e)),r=t.za.next();t.Ua.set(r,new v2(n)),t.$a=t.$a.insert(n,r),Jb(t.remoteStore,new si(Mr(Sg(n.path)),r,"TargetPurposeLimboResolution",bh.ae))}}async function Vu(t,e,n){const r=De(t),i=[],a=[],l=[];r.ka.isEmpty()||(r.ka.forEach((c,d)=>{l.push(r.Ha(d,e,n).then(p=>{var y;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(p){i.push(p);const w=Dg.Yi(d.targetId,p);a.push(w)}}))}),await Promise.all(l),r.La.p_(i),await async function(d,p){const y=De(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>se.forEach(p,_=>se.forEach(_.Hi,C=>y.persistence.referenceDelegate.addReference(w,_.targetId,C)).next(()=>se.forEach(_.Ji,C=>y.persistence.referenceDelegate.removeReference(w,_.targetId,C)))))}catch(w){if(!Wa(w))throw w;ye(jg,"Failed to update sequence numbers: "+w)}for(const w of p){const _=w.targetId;if(!w.fromCache){const C=y.Ts.get(_),R=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(R);y.Ts=y.Ts.insert(_,j)}}}(r.localStore,a))}async function A2(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){ye(Bg,"User change. New user:",e.toKey());const r=await Gb(n.localStore,e);n.currentUser=e,function(a,l){a.Ga.forEach(c=>{c.forEach(d=>{d.reject(new be(ue.CANCELLED,l))})}),a.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vu(n,r.Rs)}}function R2(t,e){const n=De(t),r=n.Ua.get(e);if(r&&r.Ba)return Fe().add(r.key);{let i=Fe();const a=n.qa.get(e);if(!a)return i;for(const l of a){const c=n.ka.get(l);i=i.unionWith(c.view.Sa)}return i}}function pT(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C2.bind(null,e),e.La.p_=p2.bind(null,e.eventManager),e.La.Ja=m2.bind(null,e.eventManager),e}function N2(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P2.bind(null,e),e}class rh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return M1(this.persistence,new D1,e.initialUser,this.serializer)}Xa(e){return new Kb(Ng.ri,this.serializer)}Za(e){return new z1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rh.provider={build:()=>new rh};class D2 extends rh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){He(this.persistence.referenceDelegate instanceof th);const r=this.persistence.referenceDelegate.garbageCollector;return new v1(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new Kb(r=>th.ri(r,n),this.serializer)}}class Rm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>vw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A2.bind(null,this.syncEngine),await d2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f2}()}createDatastore(e){const n=Nh(e.databaseInfo.databaseId),r=function(a){return new G1(a)}(e.databaseInfo);return function(a,l,c,d){return new J1(a,l,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,l,c){return new e2(r,i,a,l,c)}(this.localStore,this.datastore,e.asyncQueue,n=>vw(this.syncEngine,n,0),function(){return hw.D()?new hw:new W1}())}createSyncEngine(e,n){return function(i,a,l,c,d,p,y){const w=new x2(i,a,l,c,d,p);return y&&(w.ja=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=De(i);ye(fo,"RemoteStore shutting down."),a.W_.add(5),await Mu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rm.provider={build:()=>new Rm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="FirestoreClient";class j2{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zt.UNAUTHENTICATED,this.clientId=ab.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{ye(gi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ye(gi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$g(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $p(t,e){t.asyncQueue.verifyOperationInProgress(),ye(gi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ww(t,e){t.asyncQueue.verifyOperationInProgress();const n=await L2(t);ye(gi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pw(e.remoteStore,i)),t._onlineComponents=e}async function L2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(gi,"Using user provided OfflineComponentProvider");try{await $p(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ia("Error using user provided cache. Falling back to memory cache: "+n),await $p(t,new rh)}}else ye(gi,"Using default OfflineComponentProvider"),await $p(t,new D2(void 0));return t._offlineComponents}async function gT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(gi,"Using user provided OnlineComponentProvider"),await ww(t,t._uninitializedComponentsProvider._online)):(ye(gi,"Using default OnlineComponentProvider"),await ww(t,new Rm))),t._onlineComponents}function M2(t){return gT(t).then(e=>e.syncEngine)}async function yT(t){const e=await gT(t),n=e.eventManager;return n.onListen=w2.bind(null,e.syncEngine),n.onUnlisten=b2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=T2.bind(null,e.syncEngine),n}function V2(t,e,n={}){const r=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,c,d,p){const y=new mT({next:_=>{y.su(),l.enqueueAndForget(()=>iT(a,w));const C=_.docs.has(c);!C&&_.fromCache?p.reject(new be(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&_.fromCache&&d&&d.source==="server"?p.reject(new be(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),w=new oT(Sg(c.path),y,{includeMetadataChanges:!0,Ta:!0});return sT(a,w)}(await yT(t),t.asyncQueue,e,n,r)),r.promise}function O2(t,e,n={}){const r=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,c,d,p){const y=new mT({next:_=>{y.su(),l.enqueueAndForget(()=>iT(a,w)),_.fromCache&&d.source==="server"?p.reject(new be(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),w=new oT(c,y,{includeMetadataChanges:!0,Ta:!0});return sT(a,w)}(await yT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e,n){if(!n)throw new be(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function F2(t,e,n,r){if(e===!0&&r===!0)throw new be(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ew(t){if(!ke.isDocumentKey(t))throw new be(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bw(t){if(ke.isDocumentKey(t))throw new be(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae()}function yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new be(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wg(t);throw new be(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="firestore.googleapis.com",Tw=!0;class Sw{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new be(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wT,this.ssl=Tw}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Tw;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g1)throw new be(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qR;switch(r.type){case"firstParty":return new YR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_w.get(n);r&&(ye("ComponentProvider","Removing Datastore"),_w.delete(n),r.terminate())}(this),Promise.resolve()}}function $2(t,e,n,r={}){var i;const a=(t=yr(t,Lh))._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;a.host!==wT&&a.host!==c&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:c,ssl:!1,emulatorOptions:r});if(!uo(d,l)&&(t._setSettings(d),r.mockUserToken)){let p,y;if(typeof r.mockUserToken=="string")p=r.mockUserToken,y=Zt.MOCK_USER;else{p=GE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new be(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Zt(w)}t._authCredentials=new KR(new ib(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Mh(this.firestore,e,this._query)}}class wn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class li extends Mh{constructor(e,n,r){super(e,n,Sg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ke(e))}withConverter(e){return new li(this.firestore,e,this._path)}}function It(t,e,...n){if(t=dt(t),xT("collection","path",e),t instanceof Lh){const r=rt.fromString(e,...n);return bw(r),new li(t,null,r)}{if(!(t instanceof wn||t instanceof li))throw new be(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return bw(r),new li(t.firestore,null,r)}}function An(t,e,...n){if(t=dt(t),arguments.length===1&&(e=ab.newId()),xT("doc","path",e),t instanceof Lh){const r=rt.fromString(e,...n);return Ew(r),new wn(t,null,new ke(r))}{if(!(t instanceof wn||t instanceof li))throw new be(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return Ew(r),new wn(t.firestore,t instanceof li?t.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="AsyncQueue";class kw{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Yb(this,"async_queue_retry"),this.Su=()=>{const r=Fp();r&&ye(Cw,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=Fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new ys;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Wa(e))throw e;ye(Cw,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const i=function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),c}(r);throw Es("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const i=Fg.createAndSchedule(this,e,n,r,a=>this.Fu(a));return this.fu.push(i),i}Du(){this.gu&&Ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class wo extends Lh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new kw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kw(e),this._firestoreClient=void 0,await e}}}function vr(t,e){const n=typeof t=="object"?t:vg(),r=typeof t=="string"?t:e||Gd,i=Eh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=HE("firestore");a&&$2(i,...a)}return i}function Hg(t){if(t._terminated)throw new be(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||U2(t),t._firestoreClient}function U2(t){var e,n,r;const i=t._freezeSettings(),a=function(c,d,p,y){return new dN(c,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,vT(y.experimentalLongPollingOptions),y.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new j2(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._byteString=e}static fromBase64String(e){try{return new La(qt.fromBase64String(e))}catch(n){throw new be(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new La(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new be(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new be(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new be(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=/^__.*__$/;class z2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _i(e,this.data,this.fieldMask,n,this.fieldTransforms):new ju(e,this.data,n,this.fieldTransforms)}}class _T{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new _i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ET(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class Qg{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Qg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return sh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(ET(this.Lu)&&B2.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class W2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nh(e)}ju(e,n,r,i=!1){return new Qg({Lu:e,methodName:n,zu:r,path:Ht.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yg(t){const e=t._freezeSettings(),n=Nh(t._databaseId);return new W2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bT(t,e,n,r,i,a={}){const l=t.ju(a.merge||a.mergeFields?2:0,e,n,i);Xg("Data must be an object, but it was:",l,r);const c=TT(r,l);let d,p;if(a.merge)d=new Nn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const w of a.mergeFields){const _=Nm(e,w,n);if(!l.contains(_))throw new be(ue.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);CT(y,_)||y.push(_)}d=new Nn(y),p=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,p=l.fieldTransforms;return new z2(new xn(c),d,p)}class Oh extends qg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oh}}function H2(t,e,n,r){const i=t.ju(1,e,n);Xg("Data must be an object, but it was:",i,r);const a=[],l=xn.empty();wi(r,(d,p)=>{const y=Jg(e,d,n);p=dt(p);const w=i.Uu(y);if(p instanceof Oh)a.push(y);else{const _=Fh(p,w);_!=null&&(a.push(y),l.set(y,_))}});const c=new Nn(a);return new _T(l,c,i.fieldTransforms)}function q2(t,e,n,r,i,a){const l=t.ju(1,e,n),c=[Nm(e,r,n)],d=[i];if(a.length%2!=0)throw new be(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<a.length;_+=2)c.push(Nm(e,a[_])),d.push(a[_+1]);const p=[],y=xn.empty();for(let _=c.length-1;_>=0;--_)if(!CT(p,c[_])){const C=c[_];let R=d[_];R=dt(R);const j=l.Uu(C);if(R instanceof Oh)p.push(C);else{const N=Fh(R,j);N!=null&&(p.push(C),y.set(C,N))}}const w=new Nn(p);return new _T(y,w,l.fieldTransforms)}function Fh(t,e){if(ST(t=dt(t)))return Xg("Unsupported field value:",e,t),TT(t,e);if(t instanceof qg)return function(r,i){if(!ET(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){const a=[];let l=0;for(const c of r){let d=Fh(c,i.Ku(l));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),l++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=At.fromDate(r);return{timestampValue:eh(i.serializer,a)}}if(r instanceof At){const a=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eh(i.serializer,a)}}if(r instanceof Kg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof La)return{bytesValue:Fb(i.serializer,r._byteString)};if(r instanceof wn){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ag(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gg)return function(l,c){return{mapValue:{fields:{[mb]:{stringValue:gb},[Qd]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw c.Wu("VectorValues must only contain numeric values.");return Cg(c.serializer,p)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${Wg(r)}`)}(t,e)}function TT(t,e){const n={};return ub(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wi(t,(r,i)=>{const a=Fh(i,e.qu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function ST(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof Kg||t instanceof La||t instanceof wn||t instanceof qg||t instanceof Gg)}function Xg(t,e,n){if(!ST(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Wg(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function Nm(t,e,n){if((e=dt(e))instanceof Vh)return e._internalPath;if(typeof e=="string")return Jg(t,e);throw sh("Field path arguments must be of type string or ",t,!1,void 0,n)}const K2=new RegExp("[~\\*/\\[\\]]");function Jg(t,e,n){if(e.search(K2)>=0)throw sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vh(...e.split("."))._internalPath}catch{throw sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sh(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||l)&&(d+=" (found",a&&(d+=` in field ${r}`),l&&(d+=` in document ${i}`),d+=")"),new be(ue.INVALID_ARGUMENT,c+t+d)}function CT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new G2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(PT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class G2 extends kT{data(){return super.data()}}function PT(t,e){return typeof e=="string"?Jg(t,e):e instanceof Vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new be(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Y2{convertValue(e,n="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return wi(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Qd].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>xt(l.doubleValue));return new Gg(a)}convertGeoPoint(e){return new Kg(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Sh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mu(e));default:return null}}convertTimestamp(e){const n=hi(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);He(Hb(r));const i=new gu(r.get(1),r.get(3)),a=new ke(r.popFirst(5));return i.isEqual(n)||Es(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class AT extends kT{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(PT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dd extends AT{data(e={}){return super.data(e)}}class X2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dd(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new be(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(c=>{const d=new Dd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const d=new Dd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Zl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:J2(c.type),doc:d,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function J2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){t=yr(t,wn);const e=yr(t.firestore,wo);return V2(Hg(e),t._key).then(n=>Z2(e,t,n))}class RT extends Y2{constructor(e){super(),this.firestore=e}convertBytes(e){return new La(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function Mn(t){t=yr(t,Mh);const e=yr(t.firestore,wo),n=Hg(e),r=new RT(e);return Q2(t._query),O2(n,t._query).then(i=>new X2(e,r,t,i))}function Zg(t,e,n){t=yr(t,wn);const r=yr(t.firestore,wo),i=IT(t.converter,e,n);return $h(r,[bT(Yg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jn.none())])}function Pw(t,e,n,...r){t=yr(t,wn);const i=yr(t.firestore,wo),a=Yg(i);let l;return l=typeof(e=dt(e))=="string"||e instanceof Vh?q2(a,"updateDoc",t._key,e,n,r):H2(a,"updateDoc",t._key,e),$h(i,[l.toMutation(t._key,Jn.exists(!0))])}function jd(t){return $h(yr(t.firestore,wo),[new kg(t._key,Jn.none())])}function Ma(t,e){const n=yr(t.firestore,wo),r=An(t),i=IT(t.converter,e);return $h(n,[bT(Yg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function $h(t,e){return function(r,i){const a=new ys;return r.asyncQueue.enqueueAndForget(async()=>S2(await M2(r),i,a)),a.promise}(Hg(t),e)}function Z2(t,e,n){const r=n.docs.get(e._key),i=new RT(t);return new AT(t,i,e._key,r,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ba=i})(yo),co(new ci("firestore",(r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),c=new wo(new GR(r.getProvider("auth-internal")),new XR(l,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new be(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(p.options.projectId,y)}(l,i),l);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),Lr(Dx,jx,e),Lr(Dx,jx,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="firebasestorage.googleapis.com",DT="storageBucket",eD=2*60*1e3,tD=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends qr{constructor(e,n,r=0){super(Up(e),`Firebase Storage: ${n} (${Up(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function Up(t){return"storage/"+t}function e0(){const t="An unknown error occurred, please check the error payload for server response.";return new ft(ht.UNKNOWN,t)}function nD(t){return new ft(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function rD(t){return new ft(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function sD(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(ht.UNAUTHENTICATED,t)}function iD(){return new ft(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oD(t){return new ft(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function aD(){return new ft(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lD(){return new ft(ht.CANCELED,"User canceled the upload/download.")}function uD(t){return new ft(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function cD(t){return new ft(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function dD(){return new ft(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DT+"' property when initializing the app?")}function hD(){return new ft(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fD(){return new ft(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pD(t){return new ft(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dm(t){return new ft(ht.INVALID_ARGUMENT,t)}function jT(){return new ft(ht.APP_DELETED,"The Firebase app was deleted.")}function mD(t){return new ft(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ou(t,e){return new ft(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Hl(t){throw new ft(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Dn.makeFromUrl(e,n)}catch{return new Dn(e,"")}if(r.path==="")return r;throw cD(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),d={bucket:1,path:3};function p(q){q.path_=decodeURIComponent(q.path)}const y="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${y}/b/${i}/o${_}`,"i"),R={bucket:1,path:3},j=n===NT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",L=new RegExp(`^https?://${j}/${i}/${N}`,"i"),$=[{regex:c,indices:d,postModify:a},{regex:C,indices:R,postModify:p},{regex:L,indices:{bucket:1,path:2},postModify:p}];for(let q=0;q<$.length;q++){const W=$[q],O=W.regex.exec(e);if(O){const k=O[W.indices.bucket];let E=O[W.indices.path];E||(E=""),r=new Dn(k,E),W.postModify(r);break}}if(r==null)throw uD(e);return r}}class gD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(t,e,n){let r=1,i=null,a=null,l=!1,c=0;function d(){return c===2}let p=!1;function y(...N){p||(p=!0,e.apply(null,N))}function w(N){i=setTimeout(()=>{i=null,t(C,d())},N)}function _(){a&&clearTimeout(a)}function C(N,...L){if(p){_();return}if(N){_(),y.call(null,N,...L);return}if(d()||l){_(),y.call(null,N,...L);return}r<64&&(r*=2);let $;c===1?(c=2,$=0):$=(r+Math.random())*1e3,w($)}let R=!1;function j(N){R||(R=!0,_(),!p&&(i!==null?(N||(c=2),clearTimeout(i),w(0)):N||(c=1)))}return w(0),a=setTimeout(()=>{l=!0,j(!0)},n),j}function vD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){return t!==void 0}function wD(t){return typeof t=="object"&&!Array.isArray(t)}function t0(t){return typeof t=="string"||t instanceof String}function Iw(t){return n0()&&t instanceof Blob}function n0(){return typeof Blob<"u"}function Aw(t,e,n,r){if(r<e)throw Dm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function LT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ao;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ao||(ao={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n,r,i,a,l,c,d,p,y,w,_=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=w,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,R)=>{this.resolve_=C,this.reject_=R,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xd(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const d=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===ao.NO_ERROR,d=a.getStatus();if(!c||_D(d,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===ao.ABORT;r(!1,new xd(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new xd(p,a))})},n=(r,i)=>{const a=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());xD(d)?a(d):a()}catch(d){l(d)}else if(c!==null){const d=e0();d.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,d)):l(d)}else if(i.canceled){const d=this.appDelete_?jT():lD();l(d)}else{const d=aD();l(d)}};this.canceled_?n(!1,new xd(!1,null,!0)):this.backoffId_=yD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function TD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function CD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function kD(t,e,n,r,i,a,l=!0){const c=LT(t.urlParams),d=t.url+c,p=Object.assign({},t.headers);return SD(p,e),bD(p,n),TD(p,a),CD(p,r),new ED(d,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ID(...t){const e=PD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(n0())return new Blob(t);throw new ft(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function AD(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){if(typeof atob>"u")throw pD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bp{constructor(e,n){this.data=e,this.contentType=n||null}}function ND(t,e){switch(t){case jr.RAW:return new Bp(MT(e));case jr.BASE64:case jr.BASE64URL:return new Bp(VT(t,e));case jr.DATA_URL:return new Bp(jD(e),LD(e))}throw e0()}function MT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=t.charCodeAt(++n);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DD(t){let e;try{e=decodeURIComponent(t)}catch{throw ou(jr.DATA_URL,"Malformed data URL.")}return MT(e)}function VT(t,e){switch(t){case jr.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw ou(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case jr.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw ou(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RD(e)}catch(i){throw i.message.includes("polyfill")?i:ou(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class OT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ou(jr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=MD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function jD(t){const e=new OT(t);return e.base64?VT(jr.BASE64,e.rest):DD(e.rest)}function LD(t){return new OT(t).contentType}function MD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,n){let r=0,i="";Iw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Iw(this.data_)){const r=this.data_,i=AD(r,e,n);return i===null?null:new Zs(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zs(r,!0)}}static getBlob(...e){if(n0()){const n=e.map(r=>r instanceof Zs?r.data_:r);return new Zs(ID.apply(null,n))}else{const n=e.map(l=>t0(l)?ND(jr.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(l=>{for(let c=0;c<l.length;c++)i[a++]=l[c]}),new Zs(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t){let e;try{e=JSON.parse(t)}catch{return null}return wD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function OD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $T(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t,e){return e}class ln{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||FD}}let wd=null;function $D(t){return!t0(t)||t.length<2?t:$T(t)}function UT(){if(wd)return wd;const t=[];t.push(new ln("bucket")),t.push(new ln("generation")),t.push(new ln("metageneration")),t.push(new ln("name","fullPath",!0));function e(a,l){return $D(l)}const n=new ln("name");n.xform=e,t.push(n);function r(a,l){return l!==void 0?Number(l):l}const i=new ln("size");return i.xform=r,t.push(i),t.push(new ln("timeCreated")),t.push(new ln("updated")),t.push(new ln("md5Hash",null,!0)),t.push(new ln("cacheControl",null,!0)),t.push(new ln("contentDisposition",null,!0)),t.push(new ln("contentEncoding",null,!0)),t.push(new ln("contentLanguage",null,!0)),t.push(new ln("contentType",null,!0)),t.push(new ln("metadata","customMetadata",!0)),wd=t,wd}function UD(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Dn(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function BD(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const l=n[a];r[l.local]=l.xform(r,e[l.server])}return UD(r,t),r}function BT(t,e,n){const r=FT(e);return r===null?null:BD(t,r,n)}function zD(t,e,n,r){const i=FT(e);if(i===null||!t0(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const y=t.bucket,w=t.fullPath,_="/b/"+l(y)+"/o/"+l(w),C=Uh(_,n,r),R=LT({alt:"media",token:p});return C+R})[0]}function WD(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class r0{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){if(!t)throw e0()}function HD(t,e){function n(r,i){const a=BT(t,i,e);return zT(a!==null),a}return n}function qD(t,e){function n(r,i){const a=BT(t,i,e);return zT(a!==null),zD(a,i,t.host,t._protocol)}return n}function WT(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=iD():i=sD():n.getStatus()===402?i=rD(t.bucket):n.getStatus()===403?i=oD(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function HT(t){const e=WT(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=nD(t.path)),a.serverResponse=i.serverResponse,a}return n}function KD(t,e,n){const r=e.fullServerUrl(),i=Uh(r,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,c=new r0(i,a,qD(t,n),l);return c.errorHandler=HT(e),c}function GD(t,e){const n=e.fullServerUrl(),r=Uh(n,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function l(d,p){}const c=new r0(r,i,l,a);return c.successCodes=[200,204],c.errorHandler=HT(e),c}function QD(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function YD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=QD(null,e)),r}function XD(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let $="";for(let q=0;q<2;q++)$=$+Math.random().toString().slice(2);return $}const d=c();l["Content-Type"]="multipart/related; boundary="+d;const p=YD(e,r,i),y=WD(p,n),w="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,_=`\r
--`+d+"--",C=Zs.getBlob(w,r,_);if(C===null)throw hD();const R={name:p.fullPath},j=Uh(a,t.host,t._protocol),N="POST",L=t.maxUploadRetryTime,H=new r0(j,N,HD(t,n),L);return H.urlParams=R,H.headers=l,H.body=C.uploadData(),H.errorHandler=WT(e),H}class JD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ao.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ao.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ao.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Hl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ZD extends JD{initXhr(){this.xhr_.responseType="text"}}function s0(){return new ZD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this._service=e,n instanceof Dn?this._location=n:this._location=Dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new po(e,n)}get root(){const e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $T(this._location.path)}get storage(){return this._service}get parent(){const e=VD(this._location.path);if(e===null)return null;const n=new Dn(this._location.bucket,e);return new po(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw mD(e)}}function ej(t,e,n){t._throwIfRoot("uploadBytes");const r=XD(t.storage,t._location,UT(),new Zs(e,!0),n);return t.storage.makeRequestWithTokens(r,s0).then(i=>({metadata:i,ref:t}))}function tj(t){t._throwIfRoot("getDownloadURL");const e=KD(t.storage,t._location,UT());return t.storage.makeRequestWithTokens(e,s0).then(n=>{if(n===null)throw fD();return n})}function nj(t){t._throwIfRoot("deleteObject");const e=GD(t.storage,t._location);return t.storage.makeRequestWithTokens(e,s0)}function rj(t,e){const n=OD(t._location.path,e),r=new Dn(t._location.bucket,n);return new po(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(t){return/^[A-Za-z]+:\/\//.test(t)}function ij(t,e){return new po(t,e)}function qT(t,e){if(t instanceof i0){const n=t;if(n._bucket==null)throw dD();const r=new po(n,n._bucket);return e!=null?qT(r,e):r}else return e!==void 0?rj(t,e):t}function oj(t,e){if(e&&sj(e)){if(t instanceof i0)return ij(t,e);throw Dm("To use ref(service, url), the first argument must be a Storage instance.")}else return qT(t,e)}function Rw(t,e){const n=e==null?void 0:e[DT];return n==null?null:Dn.makeFromBucketSpec(n,t)}function aj(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:GE(i,t.app.options.projectId))}class i0{constructor(e,n,r,i,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=NT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eD,this._maxUploadRetryTime=tD,this._requests=new Set,i!=null?this._bucket=Dn.makeFromBucketSpec(i,this._host):this._bucket=Rw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=Rw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Aw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Aw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new po(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new gD(jT());{const l=kD(e,this._appId,r,i,n,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Nw="@firebase/storage",Dw="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="storage";function lj(t,e,n){return t=dt(t),ej(t,e,n)}function uj(t){return t=dt(t),tj(t)}function jw(t){return t=dt(t),nj(t)}function zp(t,e){return t=dt(t),oj(t,e)}function cj(t=vg(),e){t=dt(t);const r=Eh(t,KT).getImmediate({identifier:e}),i=HE("storage");return i&&dj(r,...i),r}function dj(t,e,n,r={}){aj(t,e,n,r)}function hj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new i0(n,r,i,e,yo)}function fj(){co(new ci(KT,hj,"PUBLIC").setMultipleInstances(!0)),Lr(Nw,Dw,""),Lr(Nw,Dw,"esm2017")}fj();function o0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function GT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pj=GT,QT=new Nu("auth","Firebase",GT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new mg("@firebase/auth");function mj(t,...e){ih.logLevel<=Oe.WARN&&ih.warn(`Auth (${yo}): ${t}`,...e)}function Ld(t,...e){ih.logLevel<=Oe.ERROR&&ih.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,...e){throw a0(t,...e)}function Or(t,...e){return a0(t,...e)}function YT(t,e,n){const r=Object.assign(Object.assign({},pj()),{[e]:n});return new Nu("auth","Firebase",r).create(e,{appName:t.name})}function vs(t){return YT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QT.create(t,...e)}function Ie(t,e,...n){if(!t)throw a0(e,...n)}function fs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ld(e),new Error(e)}function Ts(t,e){t||fs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gj(){return Lw()==="http:"||Lw()==="https:"}function Lw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gj()||bA()||"connection"in navigator)?navigator.onLine:!0}function vj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ts(n>e,"Short delay should be less than long delay!"),this.isMobile=wA()||TA()}get(){return yj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t,e){Ts(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Fu(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bi(t,e,n,r,i={}){return JT(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const c=Du(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:d},a);return EA()||(p.referrerPolicy="no-referrer"),XT.fetch()(ZT(t,t.config.apiHost,n,c),p)})}async function JT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xj),e);try{const i=new Ej(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw _d(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[d,p]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw _d(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw _d(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw _d(t,"user-disabled",l);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw YT(t,y,p);xr(t,y)}}catch(i){if(i instanceof qr)throw i;xr(t,"network-request-failed",{message:String(i)})}}async function $u(t,e,n,r,i={}){const a=await bi(t,e,n,r,i);return"mfaPendingCredential"in a&&xr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function ZT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?l0(t.config,i):`${t.config.apiScheme}://${i}`}function _j(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ej{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Or(this.auth,"network-request-failed")),wj.get())})}}function _d(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Or(t,e,r);return i.customData._tokenResponse=n,i}function Mw(t){return t!==void 0&&t.enterprise!==void 0}class bj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return _j(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Tj(t,e){return bi(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sj(t,e){return bi(t,"POST","/v1/accounts:delete",e)}async function eS(t,e){return bi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Cj(t,e=!1){const n=dt(t),r=await n.getIdToken(e),i=u0(r);Ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:au(Wp(i.auth_time)),issuedAtTime:au(Wp(i.iat)),expirationTime:au(Wp(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Wp(t){return Number(t)*1e3}function u0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ld("JWT malformed, contained fewer than 3 sections"),null;try{const i=zE(n);return i?JSON.parse(i):(Ld("Failed to decode base64 JWT payload"),null)}catch(i){return Ld("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vw(t){const e=u0(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qr&&kj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await wu(t,eS(n,{idToken:r}));Ie(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?tS(a.providerUserInfo):[],c=Aj(t.providerData,l),d=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),y=d?p:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Lm(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(t,w)}async function Ij(t){const e=dt(t);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Aj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tS(t){return t.map(e=>{var{providerId:n}=e,r=o0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rj(t,e){const n=await JT(t,{},async()=>{const r=Du({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=ZT(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",XT.fetch()(l,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Nj(t,e){return bi(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=Vw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await Rj(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Ca;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ie(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ca,this.toJSON())}_performRefresh(){return fs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ps{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=o0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Lm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await wu(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Cj(this,e)}reload(){return Ij(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ps(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await wu(this,Sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,c,d,p,y;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,_=(i=n.email)!==null&&i!==void 0?i:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,R=(l=n.photoURL)!==null&&l!==void 0?l:void 0,j=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,L=(p=n.createdAt)!==null&&p!==void 0?p:void 0,H=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:$,emailVerified:q,isAnonymous:W,providerData:O,stsTokenManager:k}=n;Ie($&&k,e,"internal-error");const E=Ca.fromJSON(this.name,k);Ie(typeof $=="string",e,"internal-error"),Xs(w,e.name),Xs(_,e.name),Ie(typeof q=="boolean",e,"internal-error"),Ie(typeof W=="boolean",e,"internal-error"),Xs(C,e.name),Xs(R,e.name),Xs(j,e.name),Xs(N,e.name),Xs(L,e.name),Xs(H,e.name);const S=new ps({uid:$,auth:e,email:_,emailVerified:q,displayName:w,isAnonymous:W,photoURL:R,phoneNumber:C,tenantId:j,stsTokenManager:E,createdAt:L,lastLoginAt:H});return O&&Array.isArray(O)&&(S.providerData=O.map(I=>Object.assign({},I))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ca;i.updateFromServerResponse(n);const a=new ps({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await oh(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ie(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?tS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Ca;c.updateFromIdToken(r);const d=new ps({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=new Map;function ms(t){Ts(t instanceof Function,"Expected a class definition");let e=Ow.get(t);return e?(Ts(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ow.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nS.type="NONE";const Fw=nS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(t,e,n){return`firebase:${t}:${e}:${n}`}class ka{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Md(this.userKey,i.apiKey,a),this.fullPersistenceKey=Md("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ps._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ka(ms(Fw),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||ms(Fw);const l=Md(r,e.config.apiKey,e.name);let c=null;for(const p of n)try{const y=await p._get(l);if(y){const w=ps._fromJSON(e,y);p!==a&&(c=w),a=p;break}}catch{}const d=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new ka(a,e,r):(a=d[0],c&&await a._set(l,c.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new ka(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lS(e))return"Blackberry";if(uS(e))return"Webos";if(sS(e))return"Safari";if((e.includes("chrome/")||iS(e))&&!e.includes("edge/"))return"Chrome";if(aS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rS(t=nn()){return/firefox\//i.test(t)}function sS(t=nn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iS(t=nn()){return/crios\//i.test(t)}function oS(t=nn()){return/iemobile/i.test(t)}function aS(t=nn()){return/android/i.test(t)}function lS(t=nn()){return/blackberry/i.test(t)}function uS(t=nn()){return/webos/i.test(t)}function c0(t=nn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dj(t=nn()){var e;return c0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jj(){return SA()&&document.documentMode===10}function cS(t=nn()){return c0(t)||aS(t)||uS(t)||lS(t)||/windows phone/i.test(t)||oS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e=[]){let n;switch(t){case"Browser":n=$w(nn());break;case"Worker":n=`${$w(nn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,c)=>{try{const d=e(a);l(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mj(t,e={}){return bi(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=6;class Oj{constructor(e){var n,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:Vj,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,l,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uw(this),this.idTokenSubscription=new Uw(this),this.beforeStateQueue=new Lj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ms(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ka.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eS(this,{idToken:e}),r=await ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(In(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(vs(this));const n=e?dt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mj(this),n=new Oj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Nj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ms(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await ka.create(this,[ms(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,i);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&mj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _o(t){return dt(t)}class Uw{constructor(e){this.auth=e,this.observer=null,this.addObserver=DA(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $j(t){Bh=t}function hS(t){return Bh.loadJS(t)}function Uj(){return Bh.recaptchaEnterpriseScript}function Bj(){return Bh.gapiScript}function zj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class Wj{constructor(){this.enterprise=new Hj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Hj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const qj="recaptcha-enterprise",fS="NO_RECAPTCHA";class Kj{constructor(e){this.type=qj,this.auth=_o(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{Tj(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new bj(d);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(d=>{c(d)})})}function i(a,l,c){const d=window.grecaptcha;Mw(d)?d.enterprise.ready(()=>{d.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(fS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wj().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(c=>{if(!n&&Mw(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=Uj();d.length!==0&&(d+=c),hS(d).then(()=>{i(c,a,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function Bw(t,e,n,r=!1,i=!1){const a=new Kj(t);let l;if(i)l=fS;else try{l=await a.verify(n)}catch{l=await a.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Mm(t,e,n,r,i){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Bw(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Bw(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t,e){const n=Eh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(uo(a,e??{}))return i;xr(i,"already-initialized")}return n.initialize({options:e})}function Qj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ms);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Yj(t,e,n){const r=_o(t);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=pS(e),{host:l,port:c}=Xj(e),d=c===null?"":`:${c}`,p={url:`${a}//${l}${d}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(uo(p,r.config.emulator)&&uo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Jj()}function pS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Xj(t){const e=pS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:zw(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:zw(l)}}}function zw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Jj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return fs("not implemented")}_getIdTokenResponse(e){return fs("not implemented")}_linkToIdToken(e,n){return fs("not implemented")}_getReauthenticationResolver(e){return fs("not implemented")}}async function Zj(t,e){return bi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){return $u(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e){return $u(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function nL(t,e){return $u(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends d0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new _u(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _u(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mm(e,n,"signInWithPassword",eL);case"emailLink":return tL(e,{email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mm(e,r,"signUpPassword",Zj);case"emailLink":return nL(e,{idToken:n,email:this._email,oobCode:this._password});default:xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e){return $u(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL="http://localhost";class mo extends d0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=o0(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new mo(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Pa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Pa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pa(e,n)}buildRequest(){const e={requestUri:rL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Du(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iL(t){const e=Gl(Ql(t)).link,n=e?Gl(Ql(e)).deep_link_id:null,r=Gl(Ql(t)).deep_link_id;return(r?Gl(Ql(r)).link:null)||r||n||e||t}class h0{constructor(e){var n,r,i,a,l,c;const d=Gl(Ql(e)),p=(n=d.apiKey)!==null&&n!==void 0?n:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,w=sL((i=d.mode)!==null&&i!==void 0?i:null);Ie(p&&y&&w,"argument-error"),this.apiKey=p,this.operation=w,this.code=y,this.continueUrl=(a=d.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=iL(e);try{return new h0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.providerId=qa.PROVIDER_ID}static credential(e,n){return _u._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=h0.parseLink(n);return Ie(r,"argument-error"),_u._fromEmailAndCode(e,r.code,r.tenantId)}}qa.PROVIDER_ID="password";qa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends mS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Uu{constructor(){super("facebook.com")}static credential(e){return mo._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mo._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ti.credential(n,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Uu{constructor(){super("github.com")}static credential(e){return mo._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Uu{constructor(){super("twitter.com")}static credential(e,n){return mo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ri.credential(n,r)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e){return $u(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ps._fromIdTokenResponse(e,r,i),l=Ww(r);return new go({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ww(r);return new go({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ww(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah extends qr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ah.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ah(e,n,r,i)}}function gS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ah._fromErrorAndOperation(t,a,e,r):a})}async function aL(t,e,n=!1){const r=await wu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return go._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject(vs(r));const i="reauthenticate";try{const a=await wu(t,gS(r,i,e,t),n);Ie(a.idToken,r,"internal-error");const l=u0(a.idToken);Ie(l,r,"internal-error");const{sub:c}=l;return Ie(t.uid===c,r,"user-mismatch"),go._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&xr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e,n=!1){if(In(t.app))return Promise.reject(vs(t));const r="signIn",i=await gS(t,r,e),a=await go._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function uL(t,e){return yS(_o(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(t){const e=_o(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cL(t,e,n){if(In(t.app))return Promise.reject(vs(t));const r=_o(t),l=await Mm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oL).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&vS(t),d}),c=await go._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function xS(t,e,n){return In(t.app)?Promise.reject(vs(t)):uL(dt(t),qa.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vS(t),r})}function dL(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function hL(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}function Bu(t,e,n,r){return dt(t).onAuthStateChanged(e,n,r)}function zu(t){return dt(t).signOut()}const lh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lh,"1"),this.storage.removeItem(lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=1e3,pL=10;class _S extends wS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,d)=>{this.notifyListeners(l,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);jj()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,pL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_S.type="LOCAL";const mL=_S;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends wS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ES.type="SESSION";const bS=ES;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(n.origin,a)),d=await gL(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,d)=>{const p=f0("",20);i.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(w){const _=w;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(_.data.response);break;default:clearTimeout(y),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function vL(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function xL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _L(){return TS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebaseLocalStorageDb",EL=1,uh="firebaseLocalStorage",CS="fbase_key";class Wu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wh(t,e){return t.transaction([uh],e?"readwrite":"readonly").objectStore(uh)}function bL(){const t=indexedDB.deleteDatabase(SS);return new Wu(t).toPromise()}function Vm(){const t=indexedDB.open(SS,EL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uh,{keyPath:CS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uh)?e(r):(r.close(),await bL(),e(await Vm()))})})}async function Hw(t,e,n){const r=Wh(t,!0).put({[CS]:e,value:n});return new Wu(r).toPromise()}async function TL(t,e){const n=Wh(t,!1).get(e),r=await new Wu(n).toPromise();return r===void 0?null:r.value}function qw(t,e){const n=Wh(t,!0).delete(e);return new Wu(n).toPromise()}const SL=800,CL=3;class kS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zh._getInstance(_L()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xL(),!this.activeServiceWorker)return;this.sender=new yL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||wL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vm();return await Hw(e,lh,"1"),await qw(e,lh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Wh(i,!1).getAll();return new Wu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kS.type="LOCAL";const kL=kS;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){return e?ms(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends d0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IL(t){return yS(t.auth,new p0(t),t.bypassAuthState)}function AL(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),lL(n,new p0(t),t.bypassAuthState)}async function RL(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),aL(n,new p0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IL;case"linkViaPopup":case"linkViaRedirect":return RL;case"reauthViaPopup":case"reauthViaRedirect":return AL;default:xr(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=new Fu(2e3,1e4);class xa extends PS{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,xa.currentPopupAction&&xa.currentPopupAction.cancel(),xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=f0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NL.get())};e()}}xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="pendingRedirect",Vd=new Map;class jL extends PS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vd.get(this.auth._key());if(!e){try{const r=await LL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vd.set(this.auth._key(),e)}return this.bypassAuthState||Vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LL(t,e){const n=OL(e),r=VL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ML(t,e){Vd.set(t._key(),e)}function VL(t){return ms(t._redirectPersistence)}function OL(t){return Md(DL,t.config.apiKey,t.name)}async function FL(t,e,n=!1){if(In(t.app))return Promise.reject(vs(t));const r=_o(t),i=PL(r,e),l=await new jL(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=10*60*1e3;class UL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!IS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Or(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$L&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kw(e))}saveEventToCache(e){this.cachedEventUids.add(Kw(e)),this.lastProcessedEventTime=Date.now()}}function Kw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function BL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL(t,e={}){return bi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HL=/^https?/;async function qL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zL(t);for(const n of e)try{if(KL(n))return}catch{}xr(t,"unauthorized-domain")}function KL(t){const e=jm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!HL.test(n))return!1;if(WL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=new Fu(3e4,6e4);function Gw(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QL(t){return new Promise((e,n)=>{var r,i,a;function l(){Gw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gw(),n(Or(t,"network-request-failed"))},timeout:GL.get()})}if(!((i=(r=Fr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Fr().gapi)===null||a===void 0)&&a.load)l();else{const c=zj("iframefcb");return Fr()[c]=()=>{gapi.load?l():n(Or(t,"network-request-failed"))},hS(`${Bj()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw Od=null,e})}let Od=null;function YL(t){return Od=Od||QL(t),Od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=new Fu(5e3,15e3),JL="__/auth/iframe",ZL="emulator/auth/iframe",eM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nM(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?l0(e,ZL):`https://${t.config.authDomain}/${JL}`,r={apiKey:e.apiKey,appName:t.name,v:yo},i=tM.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Du(r).slice(1)}`}async function rM(t){const e=await YL(t),n=Fr().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:nM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eM,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Or(t,"network-request-failed"),c=Fr().setTimeout(()=>{a(l)},XL.get());function d(){Fr().clearTimeout(c),i(r)}r.ping(d).then(d,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iM=500,oM=600,aM="_blank",lM="http://localhost";class Qw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uM(t,e,n,r=iM,i=oM){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},sM),{width:r.toString(),height:i.toString(),top:a,left:l}),p=nn().toLowerCase();n&&(c=iS(p)?aM:n),rS(p)&&(e=e||lM,d.scrollbars="yes");const y=Object.entries(d).reduce((_,[C,R])=>`${_}${C}=${R},`,"");if(Dj(p)&&c!=="_self")return cM(e||"",c),new Qw(null);const w=window.open(e||"",c,y);Ie(w,t,"popup-blocked");try{w.focus()}catch{}return new Qw(w)}function cM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="__/auth/handler",hM="emulator/auth/handler",fM=encodeURIComponent("fac");async function Yw(t,e,n,r,i,a){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yo,eventId:i};if(e instanceof mS){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",NA(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))l[y]=w}if(e instanceof Uu){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(l.scopes=y.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const d=await t._getAppCheckToken(),p=d?`#${fM}=${encodeURIComponent(d)}`:"";return`${pM(t)}?${Du(c).slice(1)}${p}`}function pM({config:t}){return t.emulator?l0(t,hM):`https://${t.authDomain}/${dM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="webStorageSupport";class mM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bS,this._completeRedirectFn=FL,this._overrideRedirectResult=ML}async _openPopup(e,n,r,i){var a;Ts((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await Yw(e,n,r,jm(),i);return uM(e,l,f0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await Yw(e,n,r,jm(),i);return vL(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Ts(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rM(e),r=new UL(e);return n.register("authEvent",i=>(Ie(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},i=>{var a;const l=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Hp];l!==void 0&&n(!!l),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cS()||sS()||c0()}}const gM=mM;var Xw="@firebase/auth",Jw="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xM(t){co(new ci("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;Ie(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dS(t)},p=new Fj(r,i,a,d);return Qj(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),co(new ci("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(r=>new yM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(Xw,Jw,vM(t)),Lr(Xw,Jw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=5*60,_M=KE("authIdTokenMaxAge")||wM;let Zw=null;const EM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_M)return;const i=n==null?void 0:n.token;Zw!==i&&(Zw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function bM(t=vg()){const e=Eh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Gj(t,{popupRedirectResolver:gM,persistence:[kL,mL,bS]}),r=KE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=EM(a.toString());hL(n,l,()=>l(n.currentUser)),dL(n,c=>l(c))}}const i=WE("auth");return i&&Yj(n,`http://${i}`),n}function TM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$j({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Or("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",TM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xM("Browser");console.log("initializeApp:",typeof yg);console.log("getFirestore:",typeof vr);const SM={apiKey:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",authDomain:"aussie-gut-pack.firebaseapp.com",projectId:"aussie-gut-pack",storageBucket:"aussie-gut-pack.firebasestorage.app",messagingSenderId:"834797498886",appId:"1:834797498886:web:cb2f88ab4523480400c987"},Hh=yg(SM);console.log("Firebase app:",Hh);const vt=vr(Hh);console.log("Firestore db:",vt);const qp=cj(Hh),jn=bM(Hh),Ka=P.createContext(),CM=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState(!0);P.useEffect(()=>{const d=Bu(jn,p=>{n(p),i(!1)});return()=>d()},[]);const a=async(d,p)=>{try{await xS(jn,d,p)}catch(y){throw y}},l=async()=>{try{await zu(jn)}catch(d){throw d}},c=async(d,p)=>{try{await cL(jn,d,p)}catch(y){throw y}};return m.jsx(Ka.Provider,{value:{user:e,login:a,logout:l,signup:c,loading:r},children:t})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...c},d)=>P.createElement("svg",{ref:d,...PM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:AS("lucide",i),...c},[...l.map(([p,y])=>P.createElement(p,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=(t,e)=>{const n=P.forwardRef(({className:r,...i},a)=>P.createElement(IM,{ref:a,iconNode:e,className:AS(`lucide-${kM(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],m0=_r("ChevronDown",AM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],g0=_r("ChevronUp",RM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kp=_r("CircleCheckBig",NM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Gp=_r("CircleX",DM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]],LM=_r("Dog",jM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],VM=_r("Menu",MM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],e_=_r("Moon",OM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],$M=_r("SquarePen",FM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],t_=_r("Sun",UM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zM=_r("Trash2",BM);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HM=_r("X",WM);function qM(){const t=xi(),[e,n]=P.useState(!1),{isDarkMode:r,toggleTheme:i}=P.useContext(Ge),a=[{name:"Home",href:"/"},{name:"Blog",href:"/blog"},{name:"Products",href:"/products"},{name:"Contact",href:"/contact"},{name:"Fitness Tracker",href:"/fitness-tracker"},{name:"Nutrition",href:"/nutrition"}],l=()=>n(!e),c=d=>d==="/"?t.pathname==="/":d==="/fitness-tracker"?t.pathname.startsWith(d):t.pathname===d;return console.log("Rendering Navigation component. isMenuOpen:",e),m.jsxs("nav",{className:`fixed top-0 left-0 w-full z-50 shadow-md transition-colors duration-300 ease-in-out ${r?"bg-stone-900 text-red-400":"bg-red-800 text-white"}`,children:[m.jsxs("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[m.jsxs(Xn,{to:"/",className:"flex items-center space-x-2",onClick:()=>n(!1),children:[m.jsx(LM,{className:`w-6 h-6 ${r?"text-red-400":"text-white"}`}),m.jsx("span",{className:"text-xl font-bold",children:"Aussie Gut Pack"})]}),m.jsx("div",{className:"block md:hidden",children:m.jsx("button",{onClick:l,className:"focus:outline-none","aria-label":"Toggle menu",children:e?m.jsx(HM,{className:"w-6 h-6 text-white"}):m.jsx(VM,{className:"w-6 h-6 text-white"})})}),m.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[a.map(d=>m.jsx(Xn,{to:d.href,className:`px-3 py-2 rounded-md transition-colors duration-200 ${c(d.href)?"bg-red-600 text-white":"hover:bg-red-700"}`,children:d.name},d.href)),m.jsx("button",{onClick:i,className:`p-2 rounded-md transition-colors duration-200 ${r?"bg-red-800 hover:bg-red-900W":"bg-red-700 hover:bg-red-800"}`,"aria-label":"Toggle theme",children:r?m.jsx(t_,{className:"w-6 h-6 text-white"}):m.jsx(e_,{className:"w-6 h-6 text-white"})})]})]}),e&&m.jsxs("div",{className:`block md:hidden flex flex-col space-y-2 py-4 px-6 transition-all duration-300 ease-in-out ${r?"bg-stone-900 text-red-400":"bg-red-800 text-white"} border-t ${r?"border-stone-700":"border-red-900"}`,children:[a.map(d=>m.jsx(Xn,{to:d.href,className:`px-3 py-2 rounded-md transition-colors duration-200 ${c(d.href)?"bg-red-600 text-white":"hover:bg-red-700"}`,onClick:()=>n(!1),children:d.name},d.href)),m.jsxs("button",{onClick:i,className:`px-3 py-2 rounded-md transition-colors duration-200 flex items-center space-x-2 ${r?"bg-red-800 hover:bg-red-900":"bg-red-700 hover:bg-red-800"}`,"aria-label":"Toggle theme",children:[r?m.jsx(t_,{className:"w-6 h-6 text-white"}):m.jsx(e_,{className:"w-6 h-6 text-white"}),m.jsx("span",{children:r?"Light Mode":"Dark Mode"})]})]})]})}const KM=()=>{const{isDarkMode:t}=P.useContext(Ge),{user:e,logout:n}=P.useContext(Ka);return m.jsx("div",{className:`${t?"dark":""}`,children:m.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[m.jsx(qM,{}),m.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:m.jsx(vI,{})}),m.jsx("footer",{className:"bg-red-800 text-white p-4 text-center",children:m.jsxs("p",{children:[" ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})})]})})};function Rn({to:t,children:e,variant:n,className:r,...i}){const a="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=n==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return t?m.jsx(Xn,{to:t,className:`${a} ${l} ${r}`,...i,children:e}):m.jsx("button",{className:`${a} ${l} ${r}`,...i,children:e})}const GM="/aussie-gut-pack/assets/aussie-BleX4DhZ.png",QM="/aussie-gut-pack/assets/goggins-BJp9afAd.png",n_=[GM,QM],YM=()=>{const[t,e]=P.useState(0);return P.useEffect(()=>{const n=setInterval(()=>{e(r=>(r+1)%n_.length)},5e3);return()=>clearInterval(n)},[]),m.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:n_.map((n,r)=>m.jsx("div",{className:`absolute inset-0 w-[120%] h-full bg-cover bg-center transition-opacity duration-1000 ease-in-out ${r===t?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${n})`}},r))})},y0=P.createContext({});function v0(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const x0=typeof window<"u",RS=x0?P.useLayoutEffect:P.useEffect,qh=P.createContext(null),w0=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class XM extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=r instanceof HTMLElement&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function JM({children:t,isPresent:e,anchorX:n}){const r=P.useId(),i=P.useRef(null),a=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(w0);return P.useInsertionEffect(()=>{const{width:c,height:d,top:p,left:y,right:w}=a.current;if(e||!i.current||!c||!d)return;const _=n==="left"?`left: ${y}`:`right: ${w}`;i.current.dataset.motionPopId=r;const C=document.createElement("style");return l&&(C.nonce=l),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${_}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.removeChild(C)}},[e]),m.jsx(XM,{isPresent:e,childRef:i,sizeRef:a,children:P.cloneElement(t,{ref:i})})}const ZM=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:c})=>{const d=v0(eV),p=P.useId(),y=P.useCallback(_=>{d.set(_,!0);for(const C of d.values())if(!C)return;r&&r()},[d,r]),w=P.useMemo(()=>({id:p,initial:e,isPresent:n,custom:i,onExitComplete:y,register:_=>(d.set(_,!1),()=>d.delete(_))}),a?[Math.random(),y]:[n,y]);return P.useMemo(()=>{d.forEach((_,C)=>d.set(C,!1))},[n]),P.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),l==="popLayout"&&(t=m.jsx(JM,{isPresent:n,anchorX:c,children:t})),m.jsx(qh.Provider,{value:w,children:t})};function eV(){return new Map}function NS(t=!0){const e=P.useContext(qh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=P.useId();P.useEffect(()=>{if(t)return i(a)},[t]);const l=P.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const Ed=t=>t.key||"";function r_(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const s_=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:c="left"})=>{const[d,p]=NS(l),y=P.useMemo(()=>r_(t),[t]),w=l&&!d?[]:y.map(Ed),_=P.useRef(!0),C=P.useRef(y),R=v0(()=>new Map),[j,N]=P.useState(y),[L,H]=P.useState(y);RS(()=>{_.current=!1,C.current=y;for(let W=0;W<L.length;W++){const O=Ed(L[W]);w.includes(O)?R.delete(O):R.get(O)!==!0&&R.set(O,!1)}},[L,w.length,w.join("-")]);const $=[];if(y!==j){let W=[...y];for(let O=0;O<L.length;O++){const k=L[O],E=Ed(k);w.includes(E)||(W.splice(O,0,k),$.push(k))}return a==="wait"&&$.length&&(W=$),H(r_(W)),N(y),null}const{forceRender:q}=P.useContext(y0);return m.jsx(m.Fragment,{children:L.map(W=>{const O=Ed(W),k=l&&!d?!1:y===L||w.includes(O),E=()=>{if(R.has(O))R.set(O,!0);else return;let S=!0;R.forEach(I=>{I||(S=!1)}),S&&(q==null||q(),H(C.current),l&&(p==null||p()),r&&r())};return m.jsx(ZM,{isPresent:k,initial:!_.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,onExitComplete:k?void 0:E,anchorX:c,children:W},O)})})};function _0(t,e){t.indexOf(e)===-1&&t.push(e)}function E0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ln=t=>t;let DS=Ln;const tV={useManualTiming:!1};function b0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Va=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class T0{constructor(){this.subscriptions=[]}add(e){return _0(this.subscriptions,e),()=>E0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xs=t=>t*1e3,ws=t=>t/1e3;function jS(t,e){return e?t*(1e3/e):0}const nV=b0(()=>window.ScrollTimeline!==void 0);class rV{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(nV()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class sV extends rV{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function S0(t,e){return t?t[e]||t.default||t:void 0}const Om=2e4;function LS(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Om;)e+=n,r=t.next(e);return e>=Om?1/0:e}function C0(t){return typeof t=="function"}function i_(t,e){t.timeline=e,t.onfinish=null}const k0=t=>Array.isArray(t)&&typeof t[0]=="number",iV={linearEasing:void 0};function oV(t,e){const n=b0(t);return()=>{var r;return(r=iV[e])!==null&&r!==void 0?r:n()}}const ch=oV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),MS=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(Va(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function VS(t){return!!(typeof t=="function"&&ch()||!t||typeof t=="string"&&(t in Fm||ch())||k0(t)||Array.isArray(t)&&t.every(VS))}const eu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Fm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:eu([0,.65,.55,1]),circOut:eu([.55,0,1,.45]),backIn:eu([.31,.01,.66,-.59]),backOut:eu([.33,1.53,.69,.99])};function OS(t,e){if(t)return typeof t=="function"&&ch()?MS(t,e):k0(t)?eu(t):Array.isArray(t)?t.map(n=>OS(n,e)||Fm.easeOut):Fm[t]}const bd=["read","resolveKeyframes","update","preRender","render","postRender"],o_={value:null};function aV(t,e){let n=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1},d=0;function p(w){l.has(w)&&(y.schedule(w),t()),d++,w(c)}const y={schedule:(w,_=!1,C=!1)=>{const j=C&&i?n:r;return _&&l.add(w),j.has(w)||j.add(w),w},cancel:w=>{r.delete(w),l.delete(w)},process:w=>{if(c=w,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(p),e&&o_.value&&o_.value.frameloop[e].push(d),d=0,n.clear(),i=!1,a&&(a=!1,y.process(w))}};return y}const lV=40;function FS(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=bd.reduce((L,H)=>(L[H]=aV(a,e?H:void 0),L),{}),{read:c,resolveKeyframes:d,update:p,preRender:y,render:w,postRender:_}=l,C=()=>{const L=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(L-i.timestamp,lV),1),i.timestamp=L,i.isProcessing=!0,c.process(i),d.process(i),p.process(i),y.process(i),w.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},R=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:bd.reduce((L,H)=>{const $=l[H];return L[H]=(q,W=!1,O=!1)=>(n||R(),$.schedule(q,W,O)),L},{}),cancel:L=>{for(let H=0;H<bd.length;H++)l[bd[H]].cancel(L)},state:i,steps:l}}const{schedule:Je,cancel:yi,state:Bt,steps:Qp}=FS(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ln,!0),{schedule:P0}=FS(queueMicrotask,!1);let Fd;function uV(){Fd=void 0}const $r={now:()=>(Fd===void 0&&$r.set(Bt.isProcessing||tV.useManualTiming?Bt.timestamp:performance.now()),Fd),set:t=>{Fd=t,queueMicrotask(uV)}},gr={x:!1,y:!1};function $S(){return gr.x||gr.y}function cV(t){return t==="x"||t==="y"?gr[t]?null:(gr[t]=!0,()=>{gr[t]=!1}):gr.x||gr.y?null:(gr.x=gr.y=!0,()=>{gr.x=gr.y=!1})}function dV(t,e,n){var r;if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function US(t,e){const n=dV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function a_(t){return!(t.pointerType==="touch"||$S())}function hV(t,e,n={}){const[r,i,a]=US(t,n),l=c=>{if(!a_(c))return;const{target:d}=c,p=e(d,c);if(typeof p!="function"||!d)return;const y=w=>{a_(w)&&(p(w),d.removeEventListener("pointerleave",y))};d.addEventListener("pointerleave",y,i)};return r.forEach(c=>{c.addEventListener("pointerenter",l,i)}),a}function l_(t,e){const n=`${e}PointerCapture`;if(t.target instanceof Element&&n in t.target&&t.pointerId!==void 0)try{t.target[n](t.pointerId)}catch{}}const BS=(t,e)=>e?t===e?!0:BS(t,e.parentElement):!1,I0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,fV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function pV(t){return fV.has(t.tagName)||t.tabIndex!==-1}const tu=new WeakSet;function u_(t){return e=>{e.key==="Enter"&&t(e)}}function Yp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=u_(()=>{if(tu.has(n))return;Yp(n,"down");const i=u_(()=>{Yp(n,"up")}),a=()=>Yp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function c_(t){return I0(t)&&!$S()}function gV(t,e,n={}){const[r,i,a]=US(t,n),l=c=>{const d=c.currentTarget;if(!d||!c_(c)||tu.has(d))return;tu.add(d),l_(c,"set");const p=e(d,c),y=(C,R)=>{d.removeEventListener("pointerup",w),d.removeEventListener("pointercancel",_),l_(C,"release"),!(!c_(C)||!tu.has(d))&&(tu.delete(d),typeof p=="function"&&p(C,{success:R}))},w=C=>{(C.isTrusted?yV(C,d instanceof Element?d.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?y(C,!1):y(C,!(d instanceof Element)||BS(d,C.target))},_=C=>{y(C,!1)};d.addEventListener("pointerup",w,i),d.addEventListener("pointercancel",_,i),d.addEventListener("lostpointercapture",_,i)};return r.forEach(c=>{c=n.useGlobalTarget?window:c;let d=!1;c instanceof HTMLElement&&(d=!0,!pV(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0)),c.addEventListener("pointerdown",l,i),d&&c.addEventListener("focus",p=>mV(p,i),i)}),a}function yV(t,e){return t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom}const d_=30,vV=t=>!isNaN(parseFloat(t));class xV{constructor(e,n={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=$r.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=$r.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=vV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new T0);const r=this.events[e].add(n);return e==="change"?()=>{r(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$r.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>d_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,d_);return jS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eu(t,e){return new xV(t,e)}const zS=P.createContext({strict:!1}),h_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Oa={};for(const t in h_)Oa[t]={isEnabled:e=>h_[t].some(n=>!!e[n])};function wV(t){for(const e in t)Oa[e]={...Oa[e],...t[e]}}const _V=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_V.has(t)}let WS=t=>!dh(t);function EV(t){t&&(WS=e=>e.startsWith("on")?!dh(e):t(e))}try{EV(require("@emotion/is-prop-valid").default)}catch{}function bV(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(WS(i)||n===!0&&dh(i)||!e&&!dh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function TV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Kh=P.createContext({});function Gh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function bu(t){return typeof t=="string"||Array.isArray(t)}const A0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],R0=["initial",...A0];function Qh(t){return Gh(t.animate)||R0.some(e=>bu(t[e]))}function HS(t){return!!(Qh(t)||t.variants)}function SV(t,e){if(Qh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||bu(n)?n:void 0,animate:bu(r)?r:void 0}}return t.inherit!==!1?e:{}}function CV(t){const{initial:e,animate:n}=SV(t,P.useContext(Kh));return P.useMemo(()=>({initial:e,animate:n}),[f_(e),f_(n)])}function f_(t){return Array.isArray(t)?t.join(" "):t}const kV=Symbol.for("motionComponentSymbol");function wa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function PV(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):wa(n)&&(n.current=r))},[e])}const N0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),IV="framerAppearId",qS="data-"+N0(IV),KS=P.createContext({});function AV(t,e,n,r,i){var a,l;const{visualElement:c}=P.useContext(Kh),d=P.useContext(zS),p=P.useContext(qh),y=P.useContext(w0).reducedMotion,w=P.useRef(null);r=r||d.renderer,!w.current&&r&&(w.current=r(t,{visualState:e,parent:c,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const _=w.current,C=P.useContext(KS);_&&!_.projection&&i&&(_.type==="html"||_.type==="svg")&&RV(w.current,n,i,C);const R=P.useRef(!1);P.useInsertionEffect(()=>{_&&R.current&&_.update(n,p)});const j=n[qS],N=P.useRef(!!j&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,j))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,j)));return RS(()=>{_&&(R.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),P0.render(_.render),N.current&&_.animationState&&_.animationState.animateChanges())}),P.useEffect(()=>{_&&(!N.current&&_.animationState&&_.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)===null||L===void 0||L.call(window,j)}),N.current=!1))}),_}function RV(t,e,n,r){const{layoutId:i,layout:a,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:GS(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||c&&wa(c),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:p})}function GS(t){if(t)return t.options.allowProjection!==!1?t.projection:GS(t.parent)}function NV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,l;t&&wV(t);function c(p,y){let w;const _={...P.useContext(w0),...p,layoutId:DV(p)},{isStatic:C}=_,R=CV(p),j=r(p,C);if(!C&&x0){jV();const N=LV(_);w=N.MeasureLayout,R.visualElement=AV(i,j,_,e,N.ProjectionNode)}return m.jsxs(Kh.Provider,{value:R,children:[w&&R.visualElement?m.jsx(w,{visualElement:R.visualElement,..._}):null,n(i,p,PV(j,R.visualElement,y),j,C,R.visualElement)]})}c.displayName=`motion.${typeof i=="string"?i:`create(${(l=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&l!==void 0?l:""})`}`;const d=P.forwardRef(c);return d[kV]=i,d}function DV({layoutId:t}){const e=P.useContext(y0).id;return e&&t!==void 0?e+"-"+t:t}function jV(t,e){P.useContext(zS).strict}function LV(t){const{drag:e,layout:n}=Oa;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const QS=t=>e=>typeof e=="string"&&e.startsWith(t),D0=QS("--"),MV=QS("var(--"),j0=t=>MV(t)?VV.test(t.split("/*")[0].trim()):!1,VV=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Tu={};function OV(t){for(const e in t)Tu[e]=t[e],D0(e)&&(Tu[e].isCSSVariable=!0)}const Ga=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Eo=new Set(Ga);function YS(t,{layout:e,layoutId:n}){return Eo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Tu[t]||t==="opacity")}const tn=t=>!!(t&&t.getVelocity),XS=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ss=(t,e,n)=>n>e?e:n<t?t:n,Qa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Su={...Qa,transform:t=>Ss(0,1,t)},Td={...Qa,default:1},Hu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Js=Hu("deg"),Ur=Hu("%"),Pe=Hu("px"),FV=Hu("vh"),$V=Hu("vw"),p_={...Ur,parse:t=>Ur.parse(t)/100,transform:t=>Ur.transform(t*100)},UV={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,radius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe},BV={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:Td,scaleX:Td,scaleY:Td,scaleZ:Td,skew:Js,skewX:Js,skewY:Js,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Su,originX:p_,originY:p_,originZ:Pe},m_={...Qa,transform:Math.round},L0={...UV,...BV,zIndex:m_,size:Pe,fillOpacity:Su,strokeOpacity:Su,numOctaves:m_},zV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},WV=Ga.length;function HV(t,e,n){let r="",i=!0;for(let a=0;a<WV;a++){const l=Ga[a],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const p=XS(c,L0[l]);if(!d){i=!1;const y=zV[l]||l;r+=`${y}(${p}) `}n&&(e[l]=p)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function M0(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,c=!1;for(const d in e){const p=e[d];if(Eo.has(d)){l=!0;continue}else if(D0(d)){i[d]=p;continue}else{const y=XS(p,L0[d]);d.startsWith("origin")?(c=!0,a[d]=y):r[d]=y}}if(e.transform||(l||n?r.transform=HV(e,t.transform,n):r.transform&&(r.transform="none")),c){const{originX:d="50%",originY:p="50%",originZ:y=0}=a;r.transformOrigin=`${d} ${p} ${y}`}}const V0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JS(t,e,n){for(const r in e)!tn(e[r])&&!YS(r,n)&&(t[r]=e[r])}function qV({transformTemplate:t},e){return P.useMemo(()=>{const n=V0();return M0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function KV(t,e){const n=t.style||{},r={};return JS(r,n,t),Object.assign(r,qV(t,e)),r}function GV(t,e){const n={},r=KV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const QV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O0(t){return typeof t!="string"||t.includes("-")?!1:!!(QV.indexOf(t)>-1||/[A-Z]/u.test(t))}const YV={offset:"stroke-dashoffset",array:"stroke-dasharray"},XV={offset:"strokeDashoffset",array:"strokeDasharray"};function JV(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?YV:XV;t[a.offset]=Pe.transform(-r);const l=Pe.transform(e),c=Pe.transform(n);t[a.array]=`${l} ${c}`}function g_(t,e,n){return typeof t=="string"?t:Pe.transform(e+n*t)}function ZV(t,e,n){const r=g_(e,t.x,t.width),i=g_(n,t.y,t.height);return`${r} ${i}`}function F0(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:l,pathSpacing:c=1,pathOffset:d=0,...p},y,w){if(M0(t,p,w),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:_,style:C,dimensions:R}=t;_.transform&&(R&&(C.transform=_.transform),delete _.transform),R&&(i!==void 0||a!==void 0||C.transform)&&(C.transformOrigin=ZV(R,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(_.x=e),n!==void 0&&(_.y=n),r!==void 0&&(_.scale=r),l!==void 0&&JV(_,l,c,d,!1)}const ZS=()=>({...V0(),attrs:{}}),$0=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eO(t,e,n,r){const i=P.useMemo(()=>{const a=ZS();return F0(a,e,$0(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};JS(a,t.style,t),i.style={...a,...i.style}}return i}function tO(t=!1){return(n,r,i,{latestValues:a},l)=>{const d=(O0(n)?eO:GV)(r,a,l,n),p=bV(r,typeof n=="string",t),y=n!==P.Fragment?{...p,...d,ref:i}:{},{children:w}=r,_=P.useMemo(()=>tn(w)?w.get():w,[w]);return P.createElement(n,{...y,children:_})}}function y_(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function U0(t,e,n,r){if(typeof e=="function"){const[i,a]=y_(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=y_(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const $m=t=>Array.isArray(t),nO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),rO=t=>$m(t)?t[t.length-1]||0:t;function $d(t){const e=tn(t)?t.get():t;return nO(e)?e.toValue():e}function sO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const l={latestValues:iO(r,i,a,t),renderState:e()};return n&&(l.onMount=c=>n({props:r,current:c,...l}),l.onUpdate=c=>n(c)),l}const eC=t=>(e,n)=>{const r=P.useContext(Kh),i=P.useContext(qh),a=()=>sO(t,e,r,i);return n?a():v0(a)};function iO(t,e,n,r){const i={},a=r(t,{});for(const _ in a)i[_]=$d(a[_]);let{initial:l,animate:c}=t;const d=Qh(t),p=HS(t);e&&p&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let y=n?n.initial===!1:!1;y=y||l===!1;const w=y?c:l;if(w&&typeof w!="boolean"&&!Gh(w)){const _=Array.isArray(w)?w:[w];for(let C=0;C<_.length;C++){const R=U0(t,_[C]);if(R){const{transitionEnd:j,transition:N,...L}=R;for(const H in L){let $=L[H];if(Array.isArray($)){const q=y?$.length-1:0;$=$[q]}$!==null&&(i[H]=$)}for(const H in j)i[H]=j[H]}}}return i}function B0(t,e,n){var r;const{style:i}=t,a={};for(const l in i)(tn(i[l])||e.style&&tn(e.style[l])||YS(l,t)||((r=n==null?void 0:n.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[l]=i[l]);return a}const oO={useVisualState:eC({scrapeMotionValuesFromProps:B0,createRenderState:V0})};function tC(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function nC(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const rC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sC(t,e,n,r){nC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(rC.has(i)?i:N0(i),e.attrs[i])}function iC(t,e,n){const r=B0(t,e,n);for(const i in t)if(tn(t[i])||tn(e[i])){const a=Ga.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const v_=["x","y","width","height","cx","cy","r"],aO={useVisualState:eC({scrapeMotionValuesFromProps:iC,createRenderState:ZS,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const c in i)if(Eo.has(c)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let c=0;c<v_.length;c++){const d=v_[c];t[d]!==e[d]&&(l=!0)}l&&Je.read(()=>{tC(n,r),Je.render(()=>{F0(r,i,$0(n.tagName),t.transformTemplate),sC(n,r)})})}})};function lO(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...O0(r)?aO:oO,preloadedFeatures:t,useRender:tO(i),createVisualElement:e,Component:r};return NV(l)}}function Cu(t,e,n){const r=t.getProps();return U0(r,e,n!==void 0?n:r.custom,t)}const oC=new Set(["width","height","top","left","right","bottom",...Ga]);function uO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Eu(n))}function cO(t,e){const n=Cu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const l in a){const c=rO(a[l]);uO(t,l,c)}}function dO(t){return!!(tn(t)&&t.add)}function Um(t,e){const n=t.getValue("willChange");if(dO(n))return n.add(e)}function aC(t){return t.props[qS]}const lC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,hO=1e-7,fO=12;function pO(t,e,n,r,i){let a,l,c=0;do l=e+(n-e)/2,a=lC(l,r,i)-t,a>0?n=l:e=l;while(Math.abs(a)>hO&&++c<fO);return l}function qu(t,e,n,r){if(t===e&&n===r)return Ln;const i=a=>pO(a,0,1,t,n);return a=>a===0||a===1?a:lC(i(a),e,r)}const uC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cC=t=>e=>1-t(1-e),dC=qu(.33,1.53,.69,.99),z0=cC(dC),hC=uC(z0),fC=t=>(t*=2)<1?.5*z0(t):.5*(2-Math.pow(2,-10*(t-1))),W0=t=>1-Math.sin(Math.acos(t)),pC=cC(W0),mC=uC(W0),gC=t=>/^0[^.\s]+$/u.test(t);function mO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gC(t):!0}const lu=t=>Math.round(t*1e5)/1e5,H0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gO(t){return t==null}const yO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,q0=(t,e)=>n=>!!(typeof n=="string"&&yO.test(n)&&n.startsWith(t)||e&&!gO(n)&&Object.prototype.hasOwnProperty.call(n,e)),yC=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,l,c]=r.match(H0);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},vO=t=>Ss(0,255,t),Xp={...Qa,transform:t=>Math.round(vO(t))},io={test:q0("rgb","red"),parse:yC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xp.transform(t)+", "+Xp.transform(e)+", "+Xp.transform(n)+", "+lu(Su.transform(r))+")"};function xO(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Bm={test:q0("#"),parse:xO,transform:io.transform},_a={test:q0("hsl","hue"),parse:yC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ur.transform(lu(e))+", "+Ur.transform(lu(n))+", "+lu(Su.transform(r))+")"},Jt={test:t=>io.test(t)||Bm.test(t)||_a.test(t),parse:t=>io.test(t)?io.parse(t):_a.test(t)?_a.parse(t):Bm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?io.transform(t):_a.transform(t)},wO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _O(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(H0))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(wO))===null||n===void 0?void 0:n.length)||0)>0}const vC="number",xC="color",EO="var",bO="var(",x_="${}",TO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ku(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(TO,d=>(Jt.test(d)?(r.color.push(a),i.push(xC),n.push(Jt.parse(d))):d.startsWith(bO)?(r.var.push(a),i.push(EO),n.push(d)):(r.number.push(a),i.push(vC),n.push(parseFloat(d))),++a,x_)).split(x_);return{values:n,split:c,indexes:r,types:i}}function wC(t){return ku(t).values}function _C(t){const{split:e,types:n}=ku(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const c=n[l];c===vC?a+=lu(i[l]):c===xC?a+=Jt.transform(i[l]):a+=i[l]}return a}}const SO=t=>typeof t=="number"?0:t;function CO(t){const e=wC(t);return _C(t)(e.map(SO))}const vi={test:_O,parse:wC,createTransformer:_C,getAnimatableNone:CO},kO=new Set(["brightness","contrast","saturate","opacity"]);function PO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(H0)||[];if(!r)return t;const i=n.replace(r,"");let a=kO.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const IO=/\b([a-z-]*)\(.*?\)/gu,zm={...vi,getAnimatableNone:t=>{const e=t.match(IO);return e?e.map(PO).join(" "):t}},AO={...L0,color:Jt,backgroundColor:Jt,outlineColor:Jt,fill:Jt,stroke:Jt,borderColor:Jt,borderTopColor:Jt,borderRightColor:Jt,borderBottomColor:Jt,borderLeftColor:Jt,filter:zm,WebkitFilter:zm},EC=t=>AO[t];function bC(t,e){let n=EC(t);return n!==zm&&(n=vi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const RO=new Set(["auto","none","0"]);function NO(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!RO.has(a)&&ku(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=bC(n,i)}const oo=t=>t*180/Math.PI,Wm=t=>{const e=oo(Math.atan2(t[1],t[0]));return Hm(e)},DO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Wm,rotateZ:Wm,skewX:t=>oo(Math.atan(t[1])),skewY:t=>oo(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Hm=t=>(t=t%360,t<0&&(t+=360),t),w_=Wm,__=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),E_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),jO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:__,scaleY:E_,scale:t=>(__(t)+E_(t))/2,rotateX:t=>Hm(oo(Math.atan2(t[6],t[5]))),rotateY:t=>Hm(oo(Math.atan2(-t[2],t[0]))),rotateZ:w_,rotate:w_,skewX:t=>oo(Math.atan(t[4])),skewY:t=>oo(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function b_(t){return t.includes("scale")?1:0}function qm(t,e){if(!t||t==="none")return b_(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=jO,i=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=DO,i=c}if(!i)return b_(e);const a=r[e],l=i[1].split(",").map(MO);return typeof a=="function"?a(l):l[a]}const LO=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return qm(n,e)};function MO(t){return parseFloat(t.trim())}const T_=t=>t===Qa||t===Pe,VO=new Set(["x","y","z"]),OO=Ga.filter(t=>!VO.has(t));function FO(t){const e=[];return OO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Fa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>qm(e,"x"),y:(t,{transform:e})=>qm(e,"y")};Fa.translateX=Fa.x;Fa.translateY=Fa.y;const lo=new Set;let Km=!1,Gm=!1;function TC(){if(Gm){const t=Array.from(lo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=FO(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,l])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gm=!1,Km=!1,lo.forEach(t=>t.complete()),lo.clear()}function SC(){lo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gm=!0)})}function $O(){SC(),TC()}class K0{constructor(e,n,r,i,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(lo.add(this),Km||(Km=!0,Je.read(SC),Je.resolveKeyframes(TC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=i==null?void 0:i.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const d=r.readValue(n,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),i&&l===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),lo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,lo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const CC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),UO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BO(t){const e=UO.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function kC(t,e,n=1){const[r,i]=BO(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return CC(l)?parseFloat(l):l}return j0(i)?kC(i,e,n+1):i}const PC=t=>e=>e.test(t),zO={test:t=>t==="auto",parse:t=>t},IC=[Qa,Pe,Ur,Js,$V,FV,zO],S_=t=>IC.find(PC(t));class AC extends K0{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let p=e[d];if(typeof p=="string"&&(p=p.trim(),j0(p))){const y=kC(p,n.current);y!==void 0&&(e[d]=y),d===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!oC.has(r)||e.length!==2)return;const[i,a]=e,l=S_(i),c=S_(a);if(l!==c)if(T_(l)&&T_(c))for(let d=0;d<e.length;d++){const p=e[d];typeof p=="string"&&(e[d]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)mO(e[i])&&r.push(i);r.length&&NO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fa[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const l=i.length-1,c=i[l];i[l]=Fa[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([d,p])=>{n.getValue(d).set(p)}),this.resolveNoneKeyframes()}}const C_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(vi.test(t)||t==="0")&&!t.startsWith("url("));function WO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function HO(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=C_(i,e),c=C_(a,e);return!l||!c?!1:WO(t)||(n==="spring"||C0(n))&&r}const qO=t=>t!==null;function Yh(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(qO),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const KO=40;class RC{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=$r.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:l,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>KO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$O(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=$r.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:l,onComplete:c,onUpdate:d,isGenerator:p}=this.options;if(!p&&!HO(e,r,i,a))if(l)this.options.duration=0;else{d&&d(Yh(e,this.options,n)),c&&c(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,n);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ot=(t,e,n)=>t+(e-t)*n;function Jp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function GO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;i=Jp(d,c,t+1/3),a=Jp(d,c,t),l=Jp(d,c,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function hh(t,e){return n=>n>0?e:t}const Zp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},QO=[Bm,io,_a],YO=t=>QO.find(e=>e.test(t));function k_(t){const e=YO(t);if(!e)return!1;let n=e.parse(t);return e===_a&&(n=GO(n)),n}const P_=(t,e)=>{const n=k_(t),r=k_(e);if(!n||!r)return hh(t,e);const i={...n};return a=>(i.red=Zp(n.red,r.red,a),i.green=Zp(n.green,r.green,a),i.blue=Zp(n.blue,r.blue,a),i.alpha=ot(n.alpha,r.alpha,a),io.transform(i))},XO=(t,e)=>n=>e(t(n)),Ku=(...t)=>t.reduce(XO),Qm=new Set(["none","hidden"]);function JO(t,e){return Qm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function ZO(t,e){return n=>ot(t,e,n)}function G0(t){return typeof t=="number"?ZO:typeof t=="string"?j0(t)?hh:Jt.test(t)?P_:n4:Array.isArray(t)?NC:typeof t=="object"?Jt.test(t)?P_:e4:hh}function NC(t,e){const n=[...t],r=n.length,i=t.map((a,l)=>G0(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=i[l](a);return n}}function e4(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=G0(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function t4(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],c=t.indexes[l][i[l]],d=(n=t.values[c])!==null&&n!==void 0?n:0;r[a]=d,i[l]++}return r}const n4=(t,e)=>{const n=vi.createTransformer(e),r=ku(t),i=ku(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Qm.has(t)&&!i.values.length||Qm.has(e)&&!r.values.length?JO(t,e):Ku(NC(t4(r,i),i.values),n):hh(t,e)};function DC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ot(t,e,n):G0(t)(t,e)}const r4=5;function jC(t,e,n){const r=Math.max(e-r4,0);return jS(n-t(r),e-r)}const ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},I_=.001;function s4({duration:t=ct.duration,bounce:e=ct.bounce,velocity:n=ct.velocity,mass:r=ct.mass}){let i,a,l=1-e;l=Ss(ct.minDamping,ct.maxDamping,l),t=Ss(ct.minDuration,ct.maxDuration,ws(t)),l<1?(i=p=>{const y=p*l,w=y*t,_=y-n,C=Ym(p,l),R=Math.exp(-w);return I_-_/C*R},a=p=>{const w=p*l*t,_=w*n+n,C=Math.pow(l,2)*Math.pow(p,2)*t,R=Math.exp(-w),j=Ym(Math.pow(p,2),l);return(-i(p)+I_>0?-1:1)*((_-C)*R)/j}):(i=p=>{const y=Math.exp(-p*t),w=(p-n)*t+1;return-.001+y*w},a=p=>{const y=Math.exp(-p*t),w=(n-p)*(t*t);return y*w});const c=5/t,d=o4(i,a,c);if(t=xs(t),isNaN(d))return{stiffness:ct.stiffness,damping:ct.damping,duration:t};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:t}}}const i4=12;function o4(t,e,n){let r=n;for(let i=1;i<i4;i++)r=r-t(r)/e(r);return r}function Ym(t,e){return t*Math.sqrt(1-e*e)}const a4=["duration","bounce"],l4=["stiffness","damping","mass"];function A_(t,e){return e.some(n=>t[n]!==void 0)}function u4(t){let e={velocity:ct.velocity,stiffness:ct.stiffness,damping:ct.damping,mass:ct.mass,isResolvedFromDuration:!1,...t};if(!A_(t,l4)&&A_(t,a4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Ss(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ct.mass,stiffness:i,damping:a}}else{const n=s4(t);e={...e,...n,mass:ct.mass},e.isResolvedFromDuration=!0}return e}function LC(t=ct.visualDuration,e=ct.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:p,mass:y,duration:w,velocity:_,isResolvedFromDuration:C}=u4({...n,velocity:-ws(n.velocity||0)}),R=_||0,j=p/(2*Math.sqrt(d*y)),N=l-a,L=ws(Math.sqrt(d/y)),H=Math.abs(N)<5;r||(r=H?ct.restSpeed.granular:ct.restSpeed.default),i||(i=H?ct.restDelta.granular:ct.restDelta.default);let $;if(j<1){const W=Ym(L,j);$=O=>{const k=Math.exp(-j*L*O);return l-k*((R+j*L*N)/W*Math.sin(W*O)+N*Math.cos(W*O))}}else if(j===1)$=W=>l-Math.exp(-L*W)*(N+(R+L*N)*W);else{const W=L*Math.sqrt(j*j-1);$=O=>{const k=Math.exp(-j*L*O),E=Math.min(W*O,300);return l-k*((R+j*L*N)*Math.sinh(E)+W*N*Math.cosh(E))/W}}const q={calculatedDuration:C&&w||null,next:W=>{const O=$(W);if(C)c.done=W>=w;else{let k=0;j<1&&(k=W===0?xs(R):jC($,W,O));const E=Math.abs(k)<=r,S=Math.abs(l-O)<=i;c.done=E&&S}return c.value=c.done?l:O,c},toString:()=>{const W=Math.min(LS(q),Om),O=MS(k=>q.next(W*k).value,W,30);return W+"ms "+O}};return q}function R_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:d,restDelta:p=.5,restSpeed:y}){const w=t[0],_={done:!1,value:w},C=E=>c!==void 0&&E<c||d!==void 0&&E>d,R=E=>c===void 0?d:d===void 0||Math.abs(c-E)<Math.abs(d-E)?c:d;let j=n*e;const N=w+j,L=l===void 0?N:l(N);L!==N&&(j=L-w);const H=E=>-j*Math.exp(-E/r),$=E=>L+H(E),q=E=>{const S=H(E),I=$(E);_.done=Math.abs(S)<=p,_.value=_.done?L:I};let W,O;const k=E=>{C(_.value)&&(W=E,O=LC({keyframes:[_.value,R(_.value)],velocity:jC($,E,_.value),damping:i,stiffness:a,restDelta:p,restSpeed:y}))};return k(0),{calculatedDuration:null,next:E=>{let S=!1;return!O&&W===void 0&&(S=!0,q(E),k(E)),W!==void 0&&E>=W?O.next(E-W):(!S&&q(E),_)}}}const c4=qu(.42,0,1,1),d4=qu(0,0,.58,1),MC=qu(.42,0,.58,1),h4=t=>Array.isArray(t)&&typeof t[0]!="number",f4={linear:Ln,easeIn:c4,easeInOut:MC,easeOut:d4,circIn:W0,circInOut:mC,circOut:pC,backIn:z0,backInOut:hC,backOut:dC,anticipate:fC},N_=t=>{if(k0(t)){DS(t.length===4);const[e,n,r,i]=t;return qu(e,n,r,i)}else if(typeof t=="string")return f4[t];return t};function p4(t,e,n){const r=[],i=n||DC,a=t.length-1;for(let l=0;l<a;l++){let c=i(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||Ln:e;c=Ku(d,c)}r.push(c)}return r}function m4(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(DS(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=p4(e,r,i),d=c.length,p=y=>{if(l&&y<t[0])return e[0];let w=0;if(d>1)for(;w<t.length-2&&!(y<t[w+1]);w++);const _=Va(t[w],t[w+1],y);return c[w](_)};return n?y=>p(Ss(t[0],t[a-1],y)):p}function g4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Va(0,e,r);t.push(ot(n,1,i))}}function y4(t){const e=[0];return g4(e,t.length-1),e}function v4(t,e){return t.map(n=>n*e)}function x4(t,e){return t.map(()=>e||MC).splice(0,t.length-1)}function fh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=h4(r)?r.map(N_):N_(r),a={done:!1,value:e[0]},l=v4(n&&n.length===e.length?n:y4(e),t),c=m4(l,e,{ease:Array.isArray(i)?i:x4(e,i)});return{calculatedDuration:t,next:d=>(a.value=c(d),a.done=d>=t,a)}}const w4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Je.update(e,!0),stop:()=>yi(e),now:()=>Bt.isProcessing?Bt.timestamp:$r.now()}},_4={decay:R_,inertia:R_,tween:fh,keyframes:fh,spring:LC},E4=t=>t/100;class Q0 extends RC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,l=(i==null?void 0:i.KeyframeResolver)||K0,c=(d,p)=>this.onKeyframesResolved(d,p);this.resolver=new l(a,c,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=this.options,c=C0(n)?n:_4[n]||fh;let d,p;c!==fh&&typeof e[0]!="number"&&(d=Ku(E4,DC(e[0],e[1])),e=[0,100]);const y=c({...this.options,keyframes:e});a==="mirror"&&(p=c({...this.options,keyframes:[...e].reverse(),velocity:-l})),y.calculatedDuration===null&&(y.calculatedDuration=LS(y));const{calculatedDuration:w}=y,_=w+i,C=_*(r+1)-i;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:d,calculatedDuration:w,resolvedDuration:_,totalDuration:C}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:l,mapPercentToKeyframes:c,keyframes:d,calculatedDuration:p,totalDuration:y,resolvedDuration:w}=r;if(this.startTime===null)return a.next(0);const{delay:_,repeat:C,repeatType:R,repeatDelay:j,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const L=this.currentTime-_*(this.speed>=0?1:-1),H=this.speed>=0?L<0:L>y;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let $=this.currentTime,q=a;if(C){const E=Math.min(this.currentTime,y)/w;let S=Math.floor(E),I=E%1;!I&&E>=1&&(I=1),I===1&&S--,S=Math.min(S,C+1),!!(S%2)&&(R==="reverse"?(I=1-I,j&&(I-=j/w)):R==="mirror"&&(q=l)),$=Ss(0,1,I)*w}const W=H?{done:!1,value:d[0]}:q.next($);c&&(W.value=c(W.value));let{done:O}=W;!H&&p!==null&&(O=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&i!==void 0&&(W.value=Yh(d,this.options,i)),N&&N(W.value),k&&this.finish(),W}get duration(){const{resolved:e}=this;return e?ws(e.calculatedDuration):0}get time(){return ws(this.currentTime)}set time(e){e=xs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ws(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=w4,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const b4=new Set(["opacity","clipPath","filter","transform"]);function T4(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:c="easeInOut",times:d}={}){const p={[e]:n};d&&(p.offset=d);const y=OS(c,i);return Array.isArray(y)&&(p.easing=y),t.animate(p,{delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const S4=b0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ph=10,C4=2e4;function k4(t){return C0(t.type)||t.type==="spring"||!VS(t.ease)}function P4(t,e){const n=new Q0({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<C4;)r=n.sample(a),i.push(r.value),a+=ph;return{times:void 0,keyframes:i,duration:a-ph,ease:"linear"}}const VC={anticipate:fC,backInOut:hC,circInOut:mC};function I4(t){return t in VC}class D_ extends RC{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new AC(a,(l,c)=>this.onKeyframesResolved(l,c),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:l,motionValue:c,name:d,startTime:p}=this.options;if(!c.owner||!c.owner.current)return!1;if(typeof a=="string"&&ch()&&I4(a)&&(a=VC[a]),k4(this.options)){const{onComplete:w,onUpdate:_,motionValue:C,element:R,...j}=this.options,N=P4(e,j);e=N.keyframes,e.length===1&&(e[1]=e[0]),r=N.duration,i=N.times,a=N.ease,l="keyframes"}const y=T4(c.owner.current,d,e,{...this.options,duration:r,times:i,ease:a});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(i_(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:w}=this.options;c.set(Yh(e,this.options,n)),w&&w(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:i,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ws(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ws(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=xs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Ln;const{animation:r}=n;i_(r,e)}return Ln}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:l,times:c}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:w,element:_,...C}=this.options,R=new Q0({...C,keyframes:r,duration:i,type:a,ease:l,times:c,isGenerator:!0}),j=xs(this.time);p.setWithVelocity(R.sample(j-ph).value,R.sample(j).value,ph)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:l,type:c}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=n.owner.getProps();return S4()&&r&&b4.has(r)&&!d&&!p&&!i&&a!=="mirror"&&l!==0&&c!=="inertia"}}const A4={type:"spring",stiffness:500,damping:25,restSpeed:10},R4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),N4={type:"keyframes",duration:.8},D4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},j4=(t,{keyframes:e})=>e.length>2?N4:Eo.has(t)?t.startsWith("scale")?R4(e[1]):A4:D4;function L4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const Y0=(t,e,n,r={},i,a)=>l=>{const c=S0(r,t)||{},d=c.delay||r.delay||0;let{elapsed:p=0}=r;p=p-xs(d);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:_=>{e.set(_),c.onUpdate&&c.onUpdate(_)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:a?void 0:i};L4(c)||(y={...y,...j4(t,y)}),y.duration&&(y.duration=xs(y.duration)),y.repeatDelay&&(y.repeatDelay=xs(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(w=!0)),y.allowFlatten=!c.type&&!c.ease,w&&!a&&e.get()!==void 0){const _=Yh(y.keyframes,c);if(_!==void 0)return Je.update(()=>{y.onUpdate(_),y.onComplete()}),new sV([])}return!a&&D_.supports(y)?new D_(y):new Q0(y)};function M4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function OC(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:l=t.getDefaultTransition(),transitionEnd:c,...d}=e;r&&(l=r);const p=[],y=i&&t.animationState&&t.animationState.getState()[i];for(const w in d){const _=t.getValue(w,(a=t.latestValues[w])!==null&&a!==void 0?a:null),C=d[w];if(C===void 0||y&&M4(y,w))continue;const R={delay:n,...S0(l||{},w)};let j=!1;if(window.MotionHandoffAnimation){const L=aC(t);if(L){const H=window.MotionHandoffAnimation(L,w,Je);H!==null&&(R.startTime=H,j=!0)}}Um(t,w),_.start(Y0(w,_,C,t.shouldReduceMotion&&oC.has(w)?{type:!1}:R,t,j));const N=_.animation;N&&p.push(N)}return c&&Promise.all(p).then(()=>{Je.update(()=>{c&&cO(t,c)})}),p}function Xm(t,e,n={}){var r;const i=Cu(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const l=i?()=>Promise.all(OC(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:w,staggerDirection:_}=a;return V4(t,e,y+p,w,_,n)}:()=>Promise.resolve(),{when:d}=a;if(d){const[p,y]=d==="beforeChildren"?[l,c]:[c,l];return p().then(()=>y())}else return Promise.all([l(),c(n.delay)])}function V4(t,e,n=0,r=0,i=1,a){const l=[],c=(t.variantChildren.size-1)*r,d=i===1?(p=0)=>p*r:(p=0)=>c-p*r;return Array.from(t.variantChildren).sort(O4).forEach((p,y)=>{p.notify("AnimationStart",e),l.push(Xm(p,e,{...a,delay:n+d(y)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function O4(t,e){return t.sortNodePosition(e)}function F4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Xm(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Xm(t,e,n);else{const i=typeof e=="function"?Cu(t,e,n.custom):e;r=Promise.all(OC(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function FC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const $4=R0.length;function $C(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?$C(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<$4;n++){const r=R0[n],i=t.props[r];(bu(i)||i===!1)&&(e[r]=i)}return e}const U4=[...A0].reverse(),B4=A0.length;function z4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>F4(t,n,r)))}function W4(t){let e=z4(t),n=j_(),r=!0;const i=d=>(p,y)=>{var w;const _=Cu(t,y,d==="exit"?(w=t.presenceContext)===null||w===void 0?void 0:w.custom:void 0);if(_){const{transition:C,transitionEnd:R,...j}=_;p={...p,...j,...R}}return p};function a(d){e=d(t)}function l(d){const{props:p}=t,y=$C(t.parent)||{},w=[],_=new Set;let C={},R=1/0;for(let N=0;N<B4;N++){const L=U4[N],H=n[L],$=p[L]!==void 0?p[L]:y[L],q=bu($),W=L===d?H.isActive:null;W===!1&&(R=N);let O=$===y[L]&&$!==p[L]&&q;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),H.protectedKeys={...C},!H.isActive&&W===null||!$&&!H.prevProp||Gh($)||typeof $=="boolean")continue;const k=H4(H.prevProp,$);let E=k||L===d&&H.isActive&&!O&&q||N>R&&q,S=!1;const I=Array.isArray($)?$:[$];let V=I.reduce(i(L),{});W===!1&&(V={});const{prevResolvedValues:U={}}=H,D={...U,...V},ie=te=>{E=!0,_.has(te)&&(S=!0,_.delete(te)),H.needsAnimating[te]=!0;const Y=t.getValue(te);Y&&(Y.liveStyle=!1)};for(const te in D){const Y=V[te],re=U[te];if(C.hasOwnProperty(te))continue;let ee=!1;$m(Y)&&$m(re)?ee=!FC(Y,re):ee=Y!==re,ee?Y!=null?ie(te):_.add(te):Y!==void 0&&_.has(te)?ie(te):H.protectedKeys[te]=!0}H.prevProp=$,H.prevResolvedValues=V,H.isActive&&(C={...C,...V}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(O&&k)||S)&&w.push(...I.map(te=>({animation:te,options:{type:L}})))}if(_.size){const N={};if(typeof p.initial!="boolean"){const L=Cu(t,Array.isArray(p.initial)?p.initial[0]:p.initial);L&&L.transition&&(N.transition=L.transition)}_.forEach(L=>{const H=t.getBaseTarget(L),$=t.getValue(L);$&&($.liveStyle=!0),N[L]=H??null}),w.push({animation:N})}let j=!!w.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(w):Promise.resolve()}function c(d,p){var y;if(n[d].isActive===p)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(_=>{var C;return(C=_.animationState)===null||C===void 0?void 0:C.setActive(d,p)}),n[d].isActive=p;const w=l(d);for(const _ in n)n[_].protectedKeys={};return w}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=j_(),r=!0}}}function H4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FC(e,t):!1}function Ji(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function j_(){return{animate:Ji(!0),whileInView:Ji(),whileHover:Ji(),whileTap:Ji(),whileDrag:Ji(),whileFocus:Ji(),exit:Ji()}}class Ti{constructor(e){this.isMounted=!1,this.node=e}update(){}}class q4 extends Ti{constructor(e){super(e),e.animationState||(e.animationState=W4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let K4=0;class G4 extends Ti{constructor(){super(...arguments),this.id=K4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Q4={animation:{Feature:q4},exit:{Feature:G4}};function Pu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Gu(t){return{point:{x:t.pageX,y:t.pageY}}}const Y4=t=>e=>I0(e)&&t(e,Gu(e));function uu(t,e,n,r){return Pu(t,e,Y4(n),r)}function UC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function X4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function J4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const BC=1e-4,Z4=1-BC,e3=1+BC,zC=.01,t3=0-zC,n3=0+zC;function un(t){return t.max-t.min}function r3(t,e,n){return Math.abs(t-e)<=n}function L_(t,e,n,r=.5){t.origin=r,t.originPoint=ot(e.min,e.max,t.origin),t.scale=un(n)/un(e),t.translate=ot(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Z4&&t.scale<=e3||isNaN(t.scale))&&(t.scale=1),(t.translate>=t3&&t.translate<=n3||isNaN(t.translate))&&(t.translate=0)}function cu(t,e,n,r){L_(t.x,e.x,n.x,r?r.originX:void 0),L_(t.y,e.y,n.y,r?r.originY:void 0)}function M_(t,e,n){t.min=n.min+e.min,t.max=t.min+un(e)}function s3(t,e,n){M_(t.x,e.x,n.x),M_(t.y,e.y,n.y)}function V_(t,e,n){t.min=e.min-n.min,t.max=t.min+un(e)}function du(t,e,n){V_(t.x,e.x,n.x),V_(t.y,e.y,n.y)}const O_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ea=()=>({x:O_(),y:O_()}),F_=()=>({min:0,max:0}),yt=()=>({x:F_(),y:F_()});function Qn(t){return[t("x"),t("y")]}function em(t){return t===void 0||t===1}function Jm({scale:t,scaleX:e,scaleY:n}){return!em(t)||!em(e)||!em(n)}function no(t){return Jm(t)||WC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function WC(t){return $_(t.x)||$_(t.y)}function $_(t){return t&&t!=="0%"}function mh(t,e,n){const r=t-n,i=e*r;return n+i}function U_(t,e,n,r,i){return i!==void 0&&(t=mh(t,i,r)),mh(t,n,r)+e}function Zm(t,e=0,n=1,r,i){t.min=U_(t.min,e,n,r,i),t.max=U_(t.max,e,n,r,i)}function HC(t,{x:e,y:n}){Zm(t.x,e.translate,e.scale,e.originPoint),Zm(t.y,n.translate,n.scale,n.originPoint)}const B_=.999999999999,z_=1.0000000000001;function i3(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let c=0;c<i;c++){a=n[c],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ta(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,HC(t,l)),r&&no(a.latestValues)&&Ta(t,a.latestValues))}e.x<z_&&e.x>B_&&(e.x=1),e.y<z_&&e.y>B_&&(e.y=1)}function ba(t,e){t.min=t.min+e,t.max=t.max+e}function W_(t,e,n,r,i=.5){const a=ot(t.min,t.max,i);Zm(t,e,n,a,r)}function Ta(t,e){W_(t.x,e.x,e.scaleX,e.scale,e.originX),W_(t.y,e.y,e.scaleY,e.scale,e.originY)}function qC(t,e){return UC(J4(t.getBoundingClientRect(),e))}function o3(t,e,n){const r=qC(t,n),{scroll:i}=e;return i&&(ba(r.x,i.offset.x),ba(r.y,i.offset.y)),r}const KC=({current:t})=>t?t.ownerDocument.defaultView:null,H_=(t,e)=>Math.abs(t-e);function a3(t,e){const n=H_(t.x,e.x),r=H_(t.y,e.y);return Math.sqrt(n**2+r**2)}class GC{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=nm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,C=a3(w.offset,{x:0,y:0})>=3;if(!_&&!C)return;const{point:R}=w,{timestamp:j}=Bt;this.history.push({...R,timestamp:j});const{onStart:N,onMove:L}=this.handlers;_||(N&&N(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,w)},this.handlePointerMove=(w,_)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=tm(_,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(w,_)=>{this.end();const{onEnd:C,onSessionEnd:R,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=nm(w.type==="pointercancel"?this.lastMoveEventInfo:tm(_,this.transformPagePoint),this.history);this.startEvent&&C&&C(w,N),R&&R(w,N)},!I0(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const l=Gu(e),c=tm(l,this.transformPagePoint),{point:d}=c,{timestamp:p}=Bt;this.history=[{...d,timestamp:p}];const{onSessionStart:y}=n;y&&y(e,nm(c,this.history)),this.removeListeners=Ku(uu(this.contextWindow,"pointermove",this.handlePointerMove),uu(this.contextWindow,"pointerup",this.handlePointerUp),uu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function tm(t,e){return e?{point:e(t.point)}:t}function q_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nm({point:t},e){return{point:t,delta:q_(t,QC(e)),offset:q_(t,l3(e)),velocity:u3(e,.1)}}function l3(t){return t[0]}function QC(t){return t[t.length-1]}function u3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=QC(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>xs(e)));)n--;if(!r)return{x:0,y:0};const a=ws(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function c3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ot(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ot(n,t,r.max):Math.min(t,n)),t}function K_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function d3(t,{top:e,left:n,bottom:r,right:i}){return{x:K_(t.x,n,i),y:K_(t.y,e,r)}}function G_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function h3(t,e){return{x:G_(t.x,e.x),y:G_(t.y,e.y)}}function f3(t,e){let n=.5;const r=un(t),i=un(e);return i>r?n=Va(e.min,e.max-r,t.min):r>i&&(n=Va(t.min,t.max-i,e.min)),Ss(0,1,n)}function p3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const eg=.35;function m3(t=eg){return t===!1?t=0:t===!0&&(t=eg),{x:Q_(t,"left","right"),y:Q_(t,"top","bottom")}}function Q_(t,e,n){return{min:Y_(t,e),max:Y_(t,n)}}function Y_(t,e){return typeof t=="number"?t:t[e]||0}const g3=new WeakMap;class y3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=y=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Gu(y).point)},a=(y,w)=>{const{drag:_,dragPropagation:C,onDragStart:R}=this.getProps();if(_&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cV(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qn(N=>{let L=this.getAxisMotionValue(N).get()||0;if(Ur.test(L)){const{projection:H}=this.visualElement;if(H&&H.layout){const $=H.layout.layoutBox[N];$&&(L=un($)*(parseFloat(L)/100))}}this.originPoint[N]=L}),R&&Je.postRender(()=>R(y,w)),Um(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},l=(y,w)=>{const{dragPropagation:_,dragDirectionLock:C,onDirectionLock:R,onDrag:j}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:N}=w;if(C&&this.currentDirection===null){this.currentDirection=v3(N),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",w.point,N),this.updateAxis("y",w.point,N),this.visualElement.render(),j&&j(y,w)},c=(y,w)=>this.stop(y,w),d=()=>Qn(y=>{var w;return this.getAnimationState(y)==="paused"&&((w=this.getAxisMotionValue(y).animation)===null||w===void 0?void 0:w.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new GC(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:KC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Je.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Sd(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=c3(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&wa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=d3(i.layoutBox,n):this.constraints=!1,this.elastic=m3(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Qn(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=p3(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wa(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=o3(r,i.root,this.visualElement.getTransformPagePoint());let l=h3(i.layout.layoutBox,a);if(n){const c=n(X4(l));this.hasMutatedConstraints=!!c,c&&(l=UC(c))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},p=Qn(y=>{if(!Sd(y,n,this.currentDirection))return;let w=d&&d[y]||{};l&&(w={min:0,max:0});const _=i?200:1e6,C=i?40:1e7,R={type:"inertia",velocity:r?e[y]:0,bounceStiffness:_,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(y,R)});return Promise.all(p).then(c)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Um(this.visualElement,e),r.start(Y0(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qn(n=>{const{drag:r}=this.getProps();if(!Sd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[n];a.set(e[n]-ot(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wa(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Qn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();i[l]=f3({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qn(l=>{if(!Sd(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:p}=this.constraints[l];c.set(ot(d,p,i[l]))})}addListeners(){if(!this.visualElement.current)return;g3.set(this.visualElement,this);const e=this.visualElement.current,n=uu(e,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();wa(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Je.read(r);const l=Pu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Qn(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=d[y].translate,w.set(w.get()+d[y].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=eg,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function Sd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function v3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class x3 extends Ti{constructor(e){super(e),this.removeGroupControls=Ln,this.removeListeners=Ln,this.controls=new y3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const X_=t=>(e,n)=>{t&&Je.postRender(()=>t(e,n))};class w3 extends Ti{constructor(){super(...arguments),this.removePointerDownListener=Ln}onPointerDown(e){this.session=new GC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:X_(e),onStart:X_(n),onMove:r,onEnd:(a,l)=>{delete this.session,i&&Je.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=uu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ud={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function J_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ql={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Pe.test(t))t=parseFloat(t);else return t;const n=J_(t,e.target.x),r=J_(t,e.target.y);return`${n}% ${r}%`}},_3={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=vi.parse(t);if(i.length>5)return r;const a=vi.createTransformer(t),l=typeof i[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;i[0+l]/=c,i[1+l]/=d;const p=ot(c,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=p),typeof i[3+l]=="number"&&(i[3+l]/=p),a(i)}};class E3 extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;OV(b3),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ud.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,l=r.projection;return l&&(l.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||Je.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),P0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function YC(t){const[e,n]=NS(),r=P.useContext(y0);return m.jsx(E3,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(KS),isPresent:e,safeToRemove:n})}const b3={borderRadius:{...ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ql,borderTopRightRadius:ql,borderBottomLeftRadius:ql,borderBottomRightRadius:ql,boxShadow:_3};function T3(t,e,n){const r=tn(t)?t:Eu(t);return r.start(Y0("",r,e,n)),r.animation}function S3(t){return t instanceof SVGElement&&t.tagName!=="svg"}const C3=(t,e)=>t.depth-e.depth;class k3{constructor(){this.children=[],this.isDirty=!1}add(e){_0(this.children,e),this.isDirty=!0}remove(e){E0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(C3),this.isDirty=!1,this.children.forEach(e)}}function P3(t,e){const n=$r.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(yi(r),t(a-e))};return Je.read(r,!0),()=>yi(r)}const XC=["TopLeft","TopRight","BottomLeft","BottomRight"],I3=XC.length,Z_=t=>typeof t=="string"?parseFloat(t):t,eE=t=>typeof t=="number"||Pe.test(t);function A3(t,e,n,r,i,a){i?(t.opacity=ot(0,n.opacity!==void 0?n.opacity:1,R3(r)),t.opacityExit=ot(e.opacity!==void 0?e.opacity:1,0,N3(r))):a&&(t.opacity=ot(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let l=0;l<I3;l++){const c=`border${XC[l]}Radius`;let d=tE(e,c),p=tE(n,c);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||eE(d)===eE(p)?(t[c]=Math.max(ot(Z_(d),Z_(p),r),0),(Ur.test(p)||Ur.test(d))&&(t[c]+="%")):t[c]=p}(e.rotate||n.rotate)&&(t.rotate=ot(e.rotate||0,n.rotate||0,r))}function tE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const R3=JC(0,.5,pC),N3=JC(.5,.95,Ln);function JC(t,e,n){return r=>r<t?0:r>e?1:n(Va(t,e,r))}function nE(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){nE(t.x,e.x),nE(t.y,e.y)}function rE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function sE(t,e,n,r,i){return t-=e,t=mh(t,1/n,r),i!==void 0&&(t=mh(t,1/i,r)),t}function D3(t,e=0,n=1,r=.5,i,a=t,l=t){if(Ur.test(e)&&(e=parseFloat(e),e=ot(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=ot(a.min,a.max,r);t===a&&(c-=e),t.min=sE(t.min,e,n,c,i),t.max=sE(t.max,e,n,c,i)}function iE(t,e,[n,r,i],a,l){D3(t,e[n],e[r],e[i],e.scale,a,l)}const j3=["x","scaleX","originX"],L3=["y","scaleY","originY"];function oE(t,e,n,r){iE(t.x,e,j3,n?n.x:void 0,r?r.x:void 0),iE(t.y,e,L3,n?n.y:void 0,r?r.y:void 0)}function aE(t){return t.translate===0&&t.scale===1}function ZC(t){return aE(t.x)&&aE(t.y)}function lE(t,e){return t.min===e.min&&t.max===e.max}function M3(t,e){return lE(t.x,e.x)&&lE(t.y,e.y)}function uE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ek(t,e){return uE(t.x,e.x)&&uE(t.y,e.y)}function cE(t){return un(t.x)/un(t.y)}function dE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class V3{constructor(){this.members=[]}add(e){_0(this.members,e),e.scheduleRender()}remove(e){if(E0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function O3(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:w,rotateY:_,skewX:C,skewY:R}=n;p&&(r=`perspective(${p}px) ${r}`),y&&(r+=`rotate(${y}deg) `),w&&(r+=`rotateX(${w}deg) `),_&&(r+=`rotateY(${_}deg) `),C&&(r+=`skewX(${C}deg) `),R&&(r+=`skewY(${R}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(r+=`scale(${c}, ${d})`),r||"none"}const rm=["","X","Y","Z"],F3={visibility:"hidden"},hE=1e3;let $3=0;function sm(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function tk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=aC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Je,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&tk(r)}function nk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},c=e==null?void 0:e()){this.id=$3++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(z3),this.nodes.forEach(G3),this.nodes.forEach(Q3),this.nodes.forEach(W3)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new k3)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new T0),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=S3(l),this.instance=l;const{layoutId:d,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(p||d)&&(this.isLayoutDirty=!0),t){let w;const _=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,w&&w(),w=P3(_,250),Ud.hasAnimatedSinceResize&&(Ud.hasAnimatedSinceResize=!1,this.nodes.forEach(pE))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||p)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:_,hasRelativeLayoutChanged:C,layout:R})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||y.getDefaultTransition()||eF,{onLayoutAnimationStart:N,onLayoutAnimationComplete:L}=y.getProps(),H=!this.targetLayout||!ek(this.targetLayout,R),$=!_&&C;if(this.options.layoutRoot||this.resumeFrom||$||_&&(H||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(w,$);const q={...S0(j,"layout"),onPlay:N,onComplete:L};(y.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q)}else _||pE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=R})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Y3),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const w=this.path[y];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fE);return}this.isUpdating||this.nodes.forEach(q3),this.isUpdating=!1,this.nodes.forEach(K3),this.nodes.forEach(U3),this.nodes.forEach(B3),this.clearAllSnapshots();const c=$r.now();Bt.delta=Ss(0,1e3/60,c-Bt.timestamp),Bt.timestamp=c,Bt.isProcessing=!0,Qp.update.process(Bt),Qp.preRender.process(Bt),Qp.render.process(Bt),Bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,P0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(H3),this.sharedNodes.forEach(X3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!un(this.snapshot.measuredBox.x)&&!un(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!ZC(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;l&&(c||no(this.latestValues)||y)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),tF(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:c}=this.options;if(!c)return yt();const d=c.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(nF))){const{scroll:y}=this.root;y&&(ba(d.x,y.offset.x),ba(d.y,y.offset.y))}return d}removeElementScroll(l){var c;const d=yt();if(Gn(d,l),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return d;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:w,options:_}=y;y!==this.root&&w&&_.layoutScroll&&(w.wasRoot&&Gn(d,l),ba(d.x,w.offset.x),ba(d.y,w.offset.y))}return d}applyTransform(l,c=!1){const d=yt();Gn(d,l);for(let p=0;p<this.path.length;p++){const y=this.path[p];!c&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Ta(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),no(y.latestValues)&&Ta(d,y.latestValues)}return no(this.latestValues)&&Ta(d,this.latestValues),d}removeTransform(l){const c=yt();Gn(c,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!no(p.latestValues))continue;Jm(p.latestValues)&&p.updateSnapshot();const y=yt(),w=p.measurePageBox();Gn(y,w),oE(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return no(this.latestValues)&&oE(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var c;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(l||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:_}=this.options;if(!(!this.layout||!(w||_))){if(this.resolvedRelativeTargetAt=Bt.timestamp,!this.targetDelta&&!this.relativeTarget){const C=this.getClosestProjectingParent();C&&C.layout&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),du(this.relativeTargetOrigin,this.layout.layoutBox,C.layout.layoutBox),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=yt(),this.targetWithTransforms=yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),HC(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const C=this.getClosestProjectingParent();C&&!!C.resumingFrom==!!this.resumingFrom&&!C.options.layoutScroll&&C.target&&this.animationProgress!==1?(this.relativeParent=C,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yt(),this.relativeTargetOrigin=yt(),du(this.relativeTargetOrigin,this.target,C.target),Gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Jm(this.parent.latestValues)||WC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let p=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Bt.timestamp&&(p=!1),p)return;const{layout:y,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||w))return;Gn(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,C=this.treeScale.y;i3(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=yt());const{target:R}=c;if(!R){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rE(this.prevProjectionDelta.x,this.projectionDelta.x),rE(this.prevProjectionDelta.y,this.projectionDelta.y)),cu(this.projectionDelta,this.layoutCorrected,R,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==C||!dE(this.projectionDelta.x,this.prevProjectionDelta.x)||!dE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",R))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),l){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ea(),this.projectionDelta=Ea(),this.projectionDeltaWithTransform=Ea()}setAnimationOrigin(l,c=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},w=Ea();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const _=yt(),C=d?d.source:void 0,R=this.layout?this.layout.source:void 0,j=C!==R,N=this.getStack(),L=!N||N.members.length<=1,H=!!(j&&!L&&this.options.crossfade===!0&&!this.path.some(Z3));this.animationProgress=0;let $;this.mixTargetDelta=q=>{const W=q/1e3;mE(w.x,l.x,W),mE(w.y,l.y,W),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(du(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),J3(this.relativeTarget,this.relativeTargetOrigin,_,W),$&&M3(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=yt()),Gn($,this.relativeTarget)),j&&(this.animationValues=y,A3(y,p,this.latestValues,W,H,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=W},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{Ud.hasAnimatedSinceResize=!0,this.currentAnimation=T3(0,hE,{...l,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:p,latestValues:y}=l;if(!(!c||!d||!p)){if(this!==l&&this.layout&&p&&rk(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||yt();const w=un(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+w;const _=un(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+_}Gn(c,d),Ta(c,y),cu(this.projectionDeltaWithTransform,this.layoutCorrected,c,y)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new V3),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:c}=this.options;return c?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:c}=this.options;return c?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const p={};d.z&&sm("z",l,p,this.animationValues);for(let y=0;y<rm.length;y++)sm(`rotate${rm[y]}`,l,p,this.animationValues),sm(`skew${rm[y]}`,l,p,this.animationValues);l.render();for(const y in p)l.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);l.scheduleRender()}getProjectionStyles(l){var c,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return F3;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=$d(l==null?void 0:l.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=$d(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!no(this.latestValues)&&(j.transform=y?y({},""):"none",this.hasProjected=!1),j}const _=w.animationValues||w.latestValues;this.applyTransformsToTarget(),p.transform=O3(this.projectionDeltaWithTransform,this.treeScale,_),y&&(p.transform=y(_,p.transform));const{x:C,y:R}=this.projectionDelta;p.transformOrigin=`${C.origin*100}% ${R.origin*100}% 0`,w.animationValues?p.opacity=w===this?(d=(c=_.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:p.opacity=w===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const j in Tu){if(_[j]===void 0)continue;const{correct:N,applyTo:L,isCSSVariable:H}=Tu[j],$=p.transform==="none"?_[j]:N(_[j],w);if(L){const q=L.length;for(let W=0;W<q;W++)p[L[W]]=$}else H?this.options.visualElement.renderState.vars[j]=$:p[j]=$}return this.options.layoutId&&(p.pointerEvents=w===this?$d(l==null?void 0:l.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(fE),this.root.sharedNodes.clear()}}}function U3(t){t.updateLayout()}function B3(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,l=n.source!==t.layout.source;a==="size"?Qn(w=>{const _=l?n.measuredBox[w]:n.layoutBox[w],C=un(_);_.min=r[w].min,_.max=_.min+C}):rk(a,n.layoutBox,r)&&Qn(w=>{const _=l?n.measuredBox[w]:n.layoutBox[w],C=un(r[w]);_.max=_.min+C,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[w].max=t.relativeTarget[w].min+C)});const c=Ea();cu(c,r,n.layoutBox);const d=Ea();l?cu(d,t.applyTransform(i,!0),n.measuredBox):cu(d,r,n.layoutBox);const p=!ZC(c);let y=!1;if(!t.resumeFrom){const w=t.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:_,layout:C}=w;if(_&&C){const R=yt();du(R,n.layoutBox,_.layoutBox);const j=yt();du(j,r,C.layoutBox),ek(R,j)||(y=!0),w.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=R,t.relativeParent=w)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function z3(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function W3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function H3(t){t.clearSnapshot()}function fE(t){t.clearMeasurements()}function q3(t){t.isLayoutDirty=!1}function K3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function pE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function G3(t){t.resolveTargetDelta()}function Q3(t){t.calcProjection()}function Y3(t){t.resetSkewAndRotation()}function X3(t){t.removeLeadSnapshot()}function mE(t,e,n){t.translate=ot(e.translate,0,n),t.scale=ot(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function gE(t,e,n,r){t.min=ot(e.min,n.min,r),t.max=ot(e.max,n.max,r)}function J3(t,e,n,r){gE(t.x,e.x,n.x,r),gE(t.y,e.y,n.y,r)}function Z3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eF={duration:.45,ease:[.4,0,.1,1]},yE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),vE=yE("applewebkit/")&&!yE("chrome/")?Math.round:Ln;function xE(t){t.min=vE(t.min),t.max=vE(t.max)}function tF(t){xE(t.x),xE(t.y)}function rk(t,e,n){return t==="position"||t==="preserve-aspect"&&!r3(cE(e),cE(n),.2)}function nF(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const rF=nk({attachResizeListener:(t,e)=>Pu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),im={current:void 0},sk=nk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!im.current){const t=new rF({});t.mount(window),t.setOptions({layoutScroll:!0}),im.current=t}return im.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),sF={pan:{Feature:w3},drag:{Feature:x3,ProjectionNode:sk,MeasureLayout:YC}};function wE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Je.postRender(()=>a(e,Gu(e)))}class iF extends Ti{mount(){const{current:e}=this.node;e&&(this.unmount=hV(e,(n,r)=>(wE(this.node,r,"Start"),i=>wE(this.node,i,"End"))))}unmount(){}}class oF extends Ti{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ku(Pu(this.node.current,"focus",()=>this.onFocus()),Pu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _E(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Je.postRender(()=>a(e,Gu(e)))}class aF extends Ti{mount(){const{current:e}=this.node;e&&(this.unmount=gV(e,(n,r)=>(_E(this.node,r,"Start"),(i,{success:a})=>_E(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const tg=new WeakMap,om=new WeakMap,lF=t=>{const e=tg.get(t.target);e&&e(t)},uF=t=>{t.forEach(lF)};function cF({root:t,...e}){const n=t||document;om.has(n)||om.set(n,{});const r=om.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(uF,{root:t,...e})),r[i]}function dF(t,e,n){const r=cF(e);return tg.set(t,n),r.observe(t),()=>{tg.delete(t),r.unobserve(t)}}const hF={some:0,all:1};class fF extends Ti{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:hF[i]},c=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:w}=this.node.getProps(),_=p?y:w;_&&_(d)};return dF(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(pF(e,n))&&this.startObserver()}unmount(){}}function pF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const mF={inView:{Feature:fF},tap:{Feature:aF},focus:{Feature:oF},hover:{Feature:iF}},gF={layout:{ProjectionNode:sk,MeasureLayout:YC}},ng={current:null},ik={current:!1};function yF(){if(ik.current=!0,!!x0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>ng.current=t.matches;t.addListener(e),e()}else ng.current=!1}const vF=[...IC,Jt,vi],xF=t=>vF.find(PC(t)),wF=new WeakMap;function _F(t,e,n){for(const r in e){const i=e[r],a=n[r];if(tn(i))t.addValue(r,i);else if(tn(a))t.addValue(r,Eu(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,Eu(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const EE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class EF{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=K0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const C=$r.now();this.renderScheduledAt<C&&(this.renderScheduledAt=C,Je.render(this.render,!1,!0))};const{latestValues:d,renderState:p,onUpdate:y}=l;this.onUpdate=y,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Qh(n),this.isVariantNode=HS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:w,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const C in _){const R=_[C];d[C]!==void 0&&tn(R)&&R.set(d[C],!1)}}mount(e){this.current=e,wF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ik.current||yF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ng.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Eo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Je.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Oa){const n=Oa[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<EE.length;r++){const i=EE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=_F(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Eu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(CC(i)||gC(i))?i=parseFloat(i):!xF(i)&&vi.test(n)&&(i=bC(e,n)),this.setBaseTarget(e,tn(i)?i.get():i)),tn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const l=U0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(i=l[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!tn(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new T0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class ok extends EF{constructor(){super(...arguments),this.KeyframeResolver=AC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;tn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function bF(t){return window.getComputedStyle(t)}class TF extends ok{constructor(){super(...arguments),this.type="html",this.renderInstance=nC}readValueFromInstance(e,n){if(Eo.has(n))return LO(e,n);{const r=bF(e),i=(D0(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return qC(e,n)}build(e,n,r){M0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return B0(e,n,r)}}class SF extends ok{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&tC(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Eo.has(n)){const r=EC(n);return r&&r.default||0}return n=rC.has(n)?n:N0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return iC(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Je.postRender(this.updateDimensions)}build(e,n,r){F0(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){sC(e,n,r,i)}mount(e){this.isSVGTag=$0(e.tagName),super.mount(e)}}const CF=(t,e)=>O0(t)?new SF(e):new TF(e,{allowProjection:t!==P.Fragment}),kF=lO({...Q4,...mF,...sF,...gF},CF),bE=TV(kF);function PF(){const{isDarkMode:t}=P.useContext(Ge),e=P.useRef(null),n=P.useRef(null),[r,i]=P.useState(!1),[a,l]=P.useState(!1),[c,d]=P.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[p,y]=P.useState(0),[w,_]=P.useState(null),[C,R]=P.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);P.useEffect(()=>{(async()=>{var V,U;const W=An(vt,"content","home"),O=await Ou(W);let k={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"We are dedicated to bringing you information about Australian Shepherds and how to maintain a healthy gut. Our mission is to educate and inspire a natural approach to wellness for you and your furry friends.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin."],lastUpdated:null};if(O.exists()){const D=O.data();k={...k,...D,currentWorkout:{...k.currentWorkout,...D.currentWorkout,warmup:((V=D.currentWorkout)==null?void 0:V.warmup)||k.currentWorkout.warmup,main:((U=D.currentWorkout)==null?void 0:U.main)||k.currentWorkout.main},scheduledWorkouts:D.scheduledWorkouts||[],dailyChallenges:D.dailyChallenges||k.dailyChallenges}}const E=new Date,S=[...k.scheduledWorkouts];let I=!1;if(S.sort((D,ie)=>new Date(D.updateDateTime)-new Date(ie.updateDateTime)),S.length>0){const D=S[0],ie=new Date(D.updateDateTime);E>=ie&&(!k.lastUpdated||new Date(k.lastUpdated)<ie)&&(k.currentWorkout={description:D.description||"",warmup:D.warmup||[],main:D.main||[]},S.shift(),k.scheduledWorkouts=S,k.lastUpdated=E.toISOString(),I=!0)}I&&await Zg(W,k,{merge:!0}),d(k);try{const D=It(vt,"content","blog","posts"),me=(await Mn(D)).docs.map(ae=>({id:ae.id,...ae.data()}));if(me.length>0){me.sort((Y,re)=>new Date(re.date)-new Date(Y.date));const ae=me[0],te=j(ae);_({...ae,excerpt:te})}else _({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}catch(D){console.error("Error fetching blog posts:",D),_({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}})()},[]);const j=q=>{if(!q||!q.blocks||q.blocks.length===0)return"Read more...";const W=q.blocks.find(O=>O.type==="paragraph"||O.type==="list"||O.type==="bullet");return W?W.type==="paragraph"&&W.content?W.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(W.content)&&W.content.length>0?W.content[0]+(W.content.length>1?"...":""):"Read more...":"Read more..."};P.useEffect(()=>{const q=new IntersectionObserver(W=>{W.forEach(O=>{const k=O.isIntersecting;O.target===e.current&&i(k),O.target===n.current&&l(k)})},{threshold:.2});return e.current&&q.observe(e.current),n.current&&q.observe(n.current),()=>{e.current&&q.unobserve(e.current),n.current&&q.unobserve(n.current)}},[]),P.useEffect(()=>{const q=setInterval(()=>{y(W=>(W+1)%c.quotes.length)},4e3);return()=>clearInterval(q)},[c.quotes.length]),P.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(C))},[C]);const N={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},L={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},H=q=>{R(W=>W.includes(q)?W.filter(O=>O!==q):[...W,q])},$=c.dailyChallenges.length>0&&C.length===c.dailyChallenges.length&&c.dailyChallenges.every((q,W)=>C.includes(W));return m.jsxs("div",{className:`min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[m.jsx("section",{ref:e,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:"container mx-auto text-center",children:[m.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),m.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."}),m.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${r?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[m.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[m.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"About Us"}),m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:c.aboutUs}),m.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[m.jsx(Rn,{to:"/fitness-tips",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900",children:"Learn More"}),m.jsx(Rn,{to:"/signup",variant:"primary",className:`${t?"bg-red-600 text-white hover:bg-red-700":"bg-red-700 text-white hover:bg-red-800"}`,children:"Join the Pack"})]})]}),m.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:m.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:m.jsx(YM,{className:"w-full h-full object-cover"})})})]})]})}),m.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),m.jsx("section",{ref:n,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[m.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),m.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:m.jsx(s_,{mode:"wait",children:m.jsxs(bE.p,{variants:N,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:['"',c.quotes[p],'"']},p)})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[m.jsxs("div",{children:[m.jsx("h3",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),m.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:c.currentWorkout.description}),m.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Warm Up"}),m.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"}`,children:(c.currentWorkout.warmup||[]).map((q,W)=>m.jsx("li",{className:"mb-2 text-lg",children:q},`warmup-${W}`))}),m.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Main Workout"}),m.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:(c.currentWorkout.main||[]).map((q,W)=>m.jsx("li",{className:"mb-2 text-lg",children:q},`main-${W}`))}),m.jsx(Rn,{to:"/fitness-tips",variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900",children:"More Fitness Tips"})]}),m.jsxs("div",{children:[m.jsx("h3",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),m.jsx("ul",{className:`text-left list-disc pl-6 mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:(c.dailyChallenges||[]).map((q,W)=>m.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[m.jsx("input",{type:"checkbox",checked:C.includes(W),onChange:()=>H(W),className:"mr-2"}),q]},`challenge-${W}`))}),m.jsx(s_,{children:$&&m.jsx(bE.p,{variants:L,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-green-400":"text-green-600"}`,children:"Great job, Pack Leader!"})})]})]})]})}),m.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),w&&m.jsx("section",{className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:"container mx-auto text-center",children:[m.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),m.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:w.title}),m.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:w.date}),m.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:w.excerpt}),m.jsx(Rn,{to:`/blog/${w.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900",children:"Read More"})]})}),m.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),m.jsxs("div",{className:`py-8 ${t?"bg-stone-800":"bg-stone-100"} text-center`,children:[m.jsx("p",{className:`text-lg mb-4 ${t?"text-white":"text-red-600"}`,children:"Want more? Check out our full library of fitness tips!"}),m.jsx(Rn,{to:"/fitness-tips",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900",children:"Explore Now"})]})]})}const ak=P.createContext(),IF=({children:t})=>{const[e,n]=P.useState([]),r=d=>{n(p=>p.find(w=>w.id===d.id)?p.map(w=>w.id===d.id?{...w,quantity:w.quantity+1}:w):[...p,{...d,quantity:1}])},i=(d,p)=>{p<=0?a(d):n(y=>y.map(w=>w.id===d?{...w,quantity:p}:w))},a=d=>{n(p=>p.filter(y=>y.id!==d))},l=()=>{n([])},c=()=>e.reduce((d,p)=>d+p.price*p.quantity,0);return m.jsx(ak.Provider,{value:{cart:e,addToCart:r,updateQuantity:i,removeFromCart:a,clearCart:l,getTotalPrice:c},children:t})},X0=()=>P.useContext(ak);function AF(){var D;const{isDarkMode:t}=P.useContext(Ge),{cart:e,addToCart:n,updateQuantity:r,removeFromCart:i,getTotalPrice:a}=X0(),[l,c]=P.useState([]),[d,p]=P.useState([]),[y,w]=P.useState(!1),[_,C]=P.useState(""),[R,j]=P.useState(""),[N,L]=P.useState(!1),[H,$]=P.useState(!0),[q,W]=P.useState(!1),O=P.useRef(null),k=P.useRef(null),E=_n();P.useEffect(()=>{console.log("isMiniCartOpen updated to:",N)},[N]),P.useEffect(()=>{console.log("showAll updated to:",y)},[y]),P.useEffect(()=>{const ie=me=>{const ae=document.querySelector(".cart-button"),te=me.target.closest(".add-to-cart-button"),Y=Date.now(),re=k.current?Y-k.current:1/0;console.log("Outside click handler triggered, target:",me.target),console.log("Is target an Add to Cart button?",!!te),console.log("Time since last Add to Cart click:",re),console.log("IsMiniCartOpen?",N),console.log("OpenedByAdd?",q),N&&!me.target.closest(".mini-cart-sidebar")&&!(ae!=null&&ae.contains(me.target))&&!te&&re>100&&!q&&(console.log("Outside click detected, closing sidebar"),L(!1))};return document.addEventListener("click",ie),()=>document.removeEventListener("click",ie)},[N,q]),P.useEffect(()=>{(async()=>{try{$(!0);const ae=(await Mn(It(vt,"categories"))).docs.map(re=>({id:re.id,...re.data()}));c(ae);const Y=(await Mn(It(vt,"products"))).docs.map(re=>({id:re.id,...re.data()}));p(Y)}catch(me){console.error("Error fetching data from Firestore:",me)}finally{$(!1)}})()},[]),P.useEffect(()=>(e.length>0&&(O.current&&clearTimeout(O.current),console.log("Cart updated, opening sidebar, cart length:",e.length),W(!0),L(!0),e.length!==1&&(O.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),L(!1),W(!1)},3e3))),()=>{O.current&&clearTimeout(O.current)}),[e]),P.useEffect(()=>{e.length===0&&N&&(console.log("Cart is empty, closing sidebar"),L(!1),W(!1))},[e,N]);const S=ie=>{k.current=Date.now(),n(ie)},I=ie=>{const me=[...ie];switch(_){case"price-asc":return me.sort((ae,te)=>ae.price-te.price);case"price-desc":return me.sort((ae,te)=>te.price-ae.price);case"name-asc":return me.sort((ae,te)=>ae.name.localeCompare(te.name));case"name-desc":return me.sort((ae,te)=>te.name.localeCompare(ae.name));default:return me}},V=R?d.filter(ie=>ie.categoryId===R):d,U=I(V);return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 flex ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsx("h1",{className:`text-4xl font-bold transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Products"}),m.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950",onClick:ie=>{ie.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",N),L(!N)},children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),m.jsx("span",{children:"Cart"}),Array.isArray(e)&&e.length>0&&m.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-6 w-6 flex items-center justify-center text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((ie,me)=>ie+me.quantity,0)})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Filter by Section:"}),m.jsxs("select",{value:R,onChange:ie=>j(ie.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[m.jsx("option",{value:"",children:"All Sections"}),l.map(ie=>m.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Sort By:"}),m.jsxs("select",{value:_,onChange:ie=>C(ie.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[m.jsx("option",{value:"",children:"None"}),m.jsx("option",{value:"price-asc",children:"Price: Low to High"}),m.jsx("option",{value:"price-desc",children:"Price: High to Low"}),m.jsx("option",{value:"name-asc",children:"Name: A-Z"}),m.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),m.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",y),w(ie=>{const me=!ie;return console.log("Setting showAll to:",me),me&&(console.log("Resetting filterCategory to show all products"),j("")),me})},className:`px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${t?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:y?"Group by Category":"Show All Products"})]}),H?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):R?m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:((D=l.find(ie=>ie.id===R))==null?void 0:D.name)||"Section"}),U.length===0?m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:U.map(ie=>m.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:ie.image,alt:ie.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:me=>{me.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${ie.name}`)}}),m.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:ie.name}),m.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:ie.description}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",ie.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Color: ",ie.color]}),m.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Size: ",ie.size]}),m.jsx("button",{onClick:me=>{me.stopPropagation(),k.current=Date.now(),S(ie)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},ie.id))})]}):y?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:U.map(ie=>m.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:ie.image,alt:ie.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:me=>{me.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${ie.name}`)}}),m.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:ie.name}),m.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:ie.description}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",ie.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Color: ",ie.color]}),m.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Size: ",ie.size]}),m.jsx("button",{onClick:me=>{me.stopPropagation(),k.current=Date.now(),S(ie)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},ie.id))}):l.map(ie=>m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:ie.name}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:I(d.filter(me=>me.categoryId===ie.id)).map(me=>m.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:me.image,alt:me.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:ae=>{ae.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${me.name}`)}}),m.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:me.name}),m.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:me.description}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",me.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Color: ",me.color]}),m.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Size: ",me.size]}),m.jsx("button",{onClick:ae=>{ae.stopPropagation(),k.current=Date.now(),S(me)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},me.id))})]},ie.id))]}),N&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:ie=>{ie.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),L(!1)}}),m.jsx("div",{className:`mini-cart-sidebar w-80 p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${N?"translate-x-0":"translate-x-full"} ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:m.jsxs("div",{className:`mini-cart-content ${N?"active":""}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Your Cart"}),m.jsx("button",{onClick:ie=>{ie.stopPropagation(),console.log("Close button clicked, closing sidebar"),L(!1)},className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:""})]}),!Array.isArray(e)||e.length===0?m.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):m.jsxs("div",{className:"space-y-4",children:[m.jsx(wh,{component:null,children:e.map(ie=>m.jsx(xh,{timeout:300,classNames:"cart-item",children:m.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${t?"border-stone-600":"border-red-300"}`,children:[m.jsx("img",{src:ie.image,alt:ie.name,className:"w-16 h-16 object-cover rounded-md",onError:me=>{me.target.src="https://via.placeholder.com/80"}}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:`text-sm font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:ie.name}),m.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["$",ie.price.toFixed(2)," x ",ie.quantity]}),m.jsx("div",{className:"flex items-center gap-2 mt-2",children:m.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[ie.quantity===1?m.jsx("button",{onClick:me=>{me.stopPropagation(),i(ie.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):m.jsx("button",{onClick:me=>{me.stopPropagation(),r(ie.id,ie.quantity-1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),m.jsx("span",{className:`text-sm mx-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:ie.quantity}),m.jsx("button",{onClick:me=>{me.stopPropagation(),r(ie.id,ie.quantity+1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),m.jsx("button",{onClick:me=>{me.stopPropagation(),i(ie.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-colors duration-300 ease-in-out",children:""})]})},ie.id))}),m.jsxs("div",{className:"border-t pt-4 mt-4",children:[m.jsxs("p",{className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Subtotal: $",a().toFixed(2)]}),m.jsx("button",{onClick:ie=>{ie.stopPropagation(),L(!1),E("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4",children:"Go to Cart"}),m.jsx("button",{onClick:ie=>{ie.stopPropagation(),L(!1),E("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2",children:"Proceed to Checkout"})]})]})]})})]})]})}function RF(){const{isDarkMode:t}=P.useContext(Ge),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:i,getTotalPrice:a}=X0(),[l,c]=P.useState(!1),[d,p]=P.useState({name:"",email:"",address:""}),y=_n(),w=async _=>{if(_.preventDefault(),!d.name||!d.email||!d.address){alert("Please fill in all fields to proceed with checkout.");return}c(!0);try{const C={items:e,total:a(),customer:d,createdAt:new Date().toISOString(),status:"pending"};await Ma(It(vt,"orders"),C),i(),alert("Order placed successfully! Thank you for your purchase."),y("/")}catch(C){console.error("Error placing order:",C),alert("Failed to place order. Please try again.")}finally{c(!1),p({name:"",email:"",address:""})}};return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),m.jsx("button",{onClick:()=>y("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):m.jsxs("div",{className:"space-y-8",children:[m.jsx("div",{className:"space-y-4",children:e.map(_=>m.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("img",{src:_.image,alt:_.name,className:"w-20 h-20 object-cover rounded-md",onError:C=>{C.target.src="https://via.placeholder.com/80"}}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:_.name}),m.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",_.price.toFixed(2)]}),m.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(_.price*_.quantity).toFixed(2)]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>n(_.id,_.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),m.jsx("span",{className:`text-lg ${t?"text-white":"text-red-600"}`,children:_.quantity}),m.jsx("button",{onClick:()=>n(_.id,_.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),m.jsx("button",{onClick:()=>r(_.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},_.id))}),m.jsxs("div",{className:`p-6 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-white":"text-red-600"}`,children:"Order Summary"}),m.jsxs("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:["Total: $",a().toFixed(2)]}),m.jsxs("form",{onSubmit:w,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Full Name"}),m.jsx("input",{type:"text",value:d.name,onChange:_=>p({...d,name:_.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Email"}),m.jsx("input",{type:"email",value:d.email,onChange:_=>p({...d,email:_.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Shipping Address"}),m.jsx("textarea",{value:d.address,onChange:_=>p({...d,address:_.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),m.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function NF(){const{isDarkMode:t}=P.useContext(Ge),{cart:e,updateQuantity:n,removeFromCart:r}=X0(),i=Object.values(e).reduce((l,c)=>l+c.price*c.quantity,0),a=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsxs("header",{className:"text-center mb-12",children:[m.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Checkout"}),m.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),m.jsx(Rn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,c])=>m.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[m.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:m.jsx("img",{src:c.image||"https://via.placeholder.com/80",alt:c.name,className:"w-full h-full object-cover rounded"})}),m.jsxs("div",{className:"flex-1 ml-4",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:c.name}),m.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Color: ",c.color]}),m.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Size: ",c.size]})]}),m.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:""})]}),m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx("button",{onClick:()=>n(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),m.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${t?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:c.quantity}),m.jsx("button",{onClick:()=>n(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),m.jsx("div",{className:"text-right ml-4",children:c.originalPrice?m.jsxs("div",{children:[m.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["$",(c.originalPrice*c.quantity).toFixed(2)]}),m.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(c.price*c.quantity).toFixed(2)]})]}):m.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(c.price*c.quantity).toFixed(2)]})})]},l))}),m.jsxs("div",{className:"mt-12 text-right",children:[m.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Total: $",i.toFixed(2)]}),m.jsx(Rn,{onClick:a,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const rg=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):"," Stress: Elevates cortisol, disrupting gut flora and increasing permeability"," Glyphosate: Kills beneficial bacteria, feeds pathogenic ones"," Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections"," Seed Oils: Feed pathogenic bacteria, have a long half-life"," Refined Sugars: Feed harmful bacteria, promote dysbiosis"," Long-term Restrictive Diets: Reduce microbiome diversity"," Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
 Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
 Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
 Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesnt survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
 Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
 A nutrient-dense, diverse, unprocessed diet with prebiotics
 Healthy exercise, sleep, and an uplifting social life worth enjoying
 Sun exposure and skin contact with nature
 Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connectedgood gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function sg({title:t,content:e,footer:n,className:r}){const{isDarkMode:i}=P.useContext(Ge);return m.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${i?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[m.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${i?"text-red-400":"text-red-800"}`,children:t}),e&&m.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${i?"text-white":"text-red-600"}`,children:e}),n&&m.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${i?"text-white":"text-red-600"}`,children:n})]})}function DF(){const{isDarkMode:t}=P.useContext(Ge);P.useEffect(()=>{});const e=rg.filter(r=>r.category==="Benefits"),n=rg.filter(r=>r.category!=="Benefits");return m.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[m.jsx("div",{className:"pt-16"}),m.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),m.jsxs("section",{className:"mb-8 flex-grow",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),m.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),m.jsxs("section",{className:"py-12 px-6 flex-grow",children:[m.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>m.jsx(Xn,{to:`/gut-health/${r.id}`,children:m.jsx(sg,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),m.jsxs("section",{className:"flex-grow",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:n.map(r=>m.jsx(Xn,{to:`/gut-health/${r.id}`,children:m.jsx(sg,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${t?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function jF(){const{id:t}=yh(),{isDarkMode:e}=P.useContext(Ge);_n();const n=rg.find(r=>r.id.toString()===t);return n?m.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[m.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),m.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",n.category]}),Array.isArray(n.content)?m.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content.map((r,i)=>m.jsx("li",{className:"mb-2",children:r},i))}):m.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content}),m.jsx(Rn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):m.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[m.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),m.jsx(Rn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const LF=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function MF(){const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState([]),r=l=>n([...e,l]),i=l=>n(e.filter(c=>c.id!==l)),a=e.reduce((l,c)=>l+c.price,0);return m.jsxs("div",{className:"container mx-auto px-4 py-8",children:[m.jsx("h1",{className:`text-3xl font-bold mb-6 ${t?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Available Products"}),LF.map(l=>m.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${t?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[m.jsxs("div",{children:[m.jsx("h3",{className:`font-bold ${t?"text-gray-300":"text-gray-800"}`,children:l.name}),m.jsxs("p",{className:`${t?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),m.jsx(Rn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?m.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):m.jsxs(m.Fragment,{children:[e.map(l=>m.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${t?"border-gray-700":"border-gray-300"}`,children:[m.jsx("span",{className:`${t?"text-gray-300":"text-gray-800"}`,children:l.name}),m.jsxs("div",{children:[m.jsxs("span",{className:`mr-4 ${t?"text-green-400":"text-green-700"}`,children:["$",l.price]}),m.jsx("button",{onClick:()=>i(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),m.jsxs("div",{className:`mt-4 font-bold ${t?"text-green-300":"text-green-800"}`,children:["Total: $",a.toFixed(2)]}),m.jsx(Rn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}const VF=()=>{const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState([]),[r,i]=P.useState(!0),[a,l]=P.useState(null);P.useEffect(()=>{(async()=>{try{const y=It(vt,"content","blog","posts"),_=(await Mn(y)).docs.map(C=>({id:C.id,title:C.data().title,blocks:C.data().blocks||[{type:"paragraph",content:""}],lastEdited:C.data().lastEdited||""}));if(console.log("Fetched blog posts:",_),_.length>0){const C=_.sort((R,j)=>{const N=R.lastEdited?new Date(R.lastEdited):new Date(0);return(j.lastEdited?new Date(j.lastEdited):new Date(0))-N});n(C)}else n([])}catch(y){console.error("Error fetching blog posts:",y),l("Failed to load blog posts: "+y.message),n([])}finally{i(!1)}})()},[]);const c=p=>p?new Date(p).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",d=p=>{if(!p.blocks||p.blocks.length===0)return"Read more...";const y=p.blocks.find(w=>w.type==="paragraph"||w.type==="list"||w.type==="bullet");return y?y.type==="paragraph"?y.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(y.content)?y.content[0]+(y.content.length>1?"...":""):"Read more...":"Read more..."};return r?m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Loading posts..."})]}):a?m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:a})]}):m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(p=>m.jsx(Xn,{to:`/blog/${p.id}`,className:"block group",children:m.jsx(sg,{title:p.title,footer:m.jsxs("span",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",c(p.lastEdited)]}),content:m.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:d(p)}),className:`p-6 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-stone-800 hover:bg-stone-700":"bg-white hover:bg-stone-100"} group-hover:shadow-lg`})},p.id))})]})},OF=()=>{const{id:t}=yh(),{isDarkMode:e}=P.useContext(Ge),[n,r]=P.useState(null);P.useEffect(()=>{(async()=>{const l=An(vt,"content","blog","posts",t),c=await Ou(l);c.exists()?r({id:c.id,...c.data()}):r(null)})()},[t]);const i=a=>a?new Date(a).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return n?m.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:m.jsxs("div",{className:"max-w-3xl mx-auto",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),m.jsxs("p",{className:`text-lg mb-8 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",i(n.lastEdited)]}),m.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:n.blocks&&n.blocks.length>0?n.blocks.map((a,l)=>m.jsx("div",{className:"mb-6",children:a.type==="paragraph"?m.jsx("p",{children:a.content}):a.type==="list"&&Array.isArray(a.content)?m.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:a.content.map((c,d)=>m.jsx("li",{children:c},d))}):a.type==="bullet"&&Array.isArray(a.content)?m.jsx("ul",{className:"list-disc pl-6 space-y-2",children:a.content.map((c,d)=>m.jsx("li",{children:c},d))}):a.type==="image"&&a.content?m.jsx("img",{src:a.content,alt:"Blog content",className:"w-full max-w-md mx-auto rounded-lg shadow-md"}):a.type==="link"&&a.content.url?m.jsx(Xn,{to:a.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:a.content.text||a.content.url}):m.jsx("p",{className:"text-red-500",children:"Invalid block format"})},l)):m.jsx("p",{children:"No content available."})}),m.jsx(Rn,{to:"/blog",variant:"primary",className:"mt-8 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})}):m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),m.jsx(Rn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},FF=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function $F(){const{isDarkMode:t}=P.useContext(Ge);return m.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[m.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${t?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),m.jsx("div",{className:"space-y-4",children:FF.map((e,n)=>m.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[m.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${t?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,m.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:""})]}),m.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},n))})]})}class Qu{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const UF=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Wt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:UF()},J0=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},BF=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=J0(t);Wt.publicKey=n.publicKey,Wt.blockHeadless=n.blockHeadless,Wt.storageProvider=n.storageProvider,Wt.blockList=n.blockList,Wt.limitRate=n.limitRate,Wt.origin=n.origin||e},lk=async(t,e,n={})=>{const r=await fetch(Wt.origin+t,{method:"POST",headers:n,body:e}),i=await r.text(),a=new Qu(r.status,i);if(r.ok)return a;throw a},uk=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},zF=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},ck=t=>t.webdriver||!t.languages||t.languages.length===0,dk=()=>new Qu(451,"Unavailable For Headless Browser"),WF=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},HF=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},qF=(t,e)=>t instanceof FormData?t.get(e):t[e],hk=(t,e)=>{if(HF(t))return!1;WF(t.list,t.watchVariable);const n=qF(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},fk=()=>new Qu(403,"Forbidden"),KF=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},GF=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},pk=async(t,e,n)=>{if(!e.throttle||!n)return!1;KF(e.throttle,e.id);const r=e.id||t;return await GF(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},mk=()=>new Qu(429,"Too Many Requests"),QF=async(t,e,n,r)=>{const i=J0(r),a=i.publicKey||Wt.publicKey,l=i.blockHeadless||Wt.blockHeadless,c=i.storageProvider||Wt.storageProvider,d={...Wt.blockList,...i.blockList},p={...Wt.limitRate,...i.limitRate};return l&&ck(navigator)?Promise.reject(dk()):(uk(a,t,e),zF(n),n&&hk(d,n)?Promise.reject(fk()):await pk(location.pathname,p,c)?Promise.reject(mk()):lk("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},YF=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},XF=t=>typeof t=="string"?document.querySelector(t):t,JF=async(t,e,n,r)=>{const i=J0(r),a=i.publicKey||Wt.publicKey,l=i.blockHeadless||Wt.blockHeadless,c=Wt.storageProvider||i.storageProvider,d={...Wt.blockList,...i.blockList},p={...Wt.limitRate,...i.limitRate};if(l&&ck(navigator))return Promise.reject(dk());const y=XF(n);uk(a,t,e),YF(y);const w=new FormData(y);return hk(d,w)?Promise.reject(fk()):await pk(location.pathname,p,c)?Promise.reject(mk()):(w.append("lib_version","4.4.1"),w.append("service_id",t),w.append("template_id",e),w.append("user_id",a),lk("/api/v1.0/email/send-form",w))},ZF={init:BF,send:QF,sendForm:JF,EmailJSResponseStatus:Qu};function e6(){const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState({name:"",email:"",message:""}),[r,i]=P.useState(""),a=c=>{const{name:d,value:p}=c.target;n(y=>({...y,[d]:p}))},l=c=>{c.preventDefault(),i("Sending..."),ZF.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(d=>{i("Thank you! Your inquiry has been sent."),n({name:"",email:"",message:""}),setTimeout(()=>i(""),3e3)},d=>{i("Failed to send message. Please try again."),console.error("EmailJS error:",d.text),setTimeout(()=>i(""),3e3)})};return m.jsx("div",{className:`min-h-screen py-12 px-4 ${t?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Contact Us"}),m.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),m.jsxs("form",{onSubmit:l,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),m.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:a,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Email"}),m.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:a,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Message"}),m.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:a,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&m.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:r})]})]})})}function t6(){const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState(""),[r,i]=P.useState(""),[a,l]=P.useState(!1),[c,d]=P.useState(null),p=_n();P.useEffect(()=>{const _=Bu(jn,C=>{l(!!C)});return()=>_()},[]);const y=async _=>{_.preventDefault(),d(null);try{await xS(jn,e,r),l(!0)}catch(C){d("Failed to log in: "+C.message)}},w=async()=>{try{await zu(jn),l(!1),p("/admin")}catch(_){d("Failed to log out: "+_.message)}};return a?m.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:[m.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),m.jsxs("div",{className:"flex flex-col gap-4",children:[m.jsx("button",{onClick:()=>p("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),m.jsx("button",{onClick:()=>p("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),m.jsx("button",{onClick:()=>p("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),m.jsx("button",{onClick:()=>p("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),m.jsx("button",{onClick:w,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):m.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:m.jsxs("div",{className:`p-6 ${t?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[m.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),c&&m.jsx("p",{className:`text-red-500 mb-4 ${t?"text-red-400":"text-red-600"}`,children:c}),m.jsxs("form",{onSubmit:y,children:[m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"email",value:e,onChange:_=>n(_.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"password",value:r,onChange:_=>i(_.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function n6(){const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState([""]),[r,i]=P.useState(""),[a,l]=P.useState([""]),[c,d]=P.useState([""]),[p,y]=P.useState([]),[w,_]=P.useState(""),[C,R]=P.useState([""]),[j,N]=P.useState(null),L=_n();P.useEffect(()=>{const ce=Bu(jn,ne=>{ne||L("/admin")});return()=>ce()},[L]),P.useEffect(()=>{(async()=>{var ne,he,Te,Ve,pt,Vn,Kr,Zn;try{const er=An(vt,"content","home"),Gr=await Ou(er);if(Gr.exists()){const Nt=Gr.data();n((ne=Nt.quotes)!=null&&ne.length?Nt.quotes:[""]),i(((he=Nt.currentWorkout)==null?void 0:he.description)||""),l((Ve=(Te=Nt.currentWorkout)==null?void 0:Te.warmup)!=null&&Ve.length?Nt.currentWorkout.warmup:[""]),d((Vn=(pt=Nt.currentWorkout)==null?void 0:pt.main)!=null&&Vn.length?Nt.currentWorkout.main:[""]),y((Kr=Nt.scheduledWorkouts)!=null&&Kr.length?Nt.scheduledWorkouts.map(Qr=>({...Qr,warmup:Qr.warmup||[""],main:Qr.main||[""]})):[{description:"",warmup:[""],main:[""],updateDateTime:""}]),_(Nt.aboutUs||""),R((Zn=Nt.dailyChallenges)!=null&&Zn.length?Nt.dailyChallenges:[""])}}catch(er){N("Failed to load content: "+er.message)}})()},[]);const H=async()=>{N(null);const ce={quotes:e.filter(ne=>ne.trim()!==""),currentWorkout:{description:r,warmup:a.filter(ne=>ne.trim()!==""),main:c.filter(ne=>ne.trim()!=="")},scheduledWorkouts:p.filter(ne=>ne.description.trim()&&(ne.warmup.length>0||ne.main.length>0)&&ne.updateDateTime.trim()).map(ne=>({description:ne.description,warmup:ne.warmup.filter(he=>he.trim()!==""),main:ne.main.filter(he=>he.trim()!==""),updateDateTime:ne.updateDateTime})),aboutUs:w.trim(),dailyChallenges:C.filter(ne=>ne.trim()!==""),lastUpdated:new Date().toISOString()};try{await Zg(An(vt,"content","home"),ce),alert("Home page content saved successfully!"),L("/admin")}catch(ne){N("Error saving changes: "+ne.message)}},$=async()=>{try{await zu(jn),L("/admin")}catch(ce){N("Failed to log out: "+ce.message)}},q=()=>n([...e,""]),W=ce=>n(e.filter((ne,he)=>he!==ce)),O=(ce,ne)=>{const he=[...e];he[ce]=ne,n(he)},k=()=>l([...a,""]),E=ce=>l(a.filter((ne,he)=>he!==ce)),S=(ce,ne)=>{const he=[...a];he[ce]=ne,l(he)},I=()=>d([...c,""]),V=ce=>d(c.filter((ne,he)=>he!==ce)),U=(ce,ne)=>{const he=[...c];he[ce]=ne,d(he)},D=()=>y([...p,{description:"",warmup:[""],main:[""],updateDateTime:""}]),ie=ce=>y(p.filter((ne,he)=>he!==ce)),me=(ce,ne,he)=>{const Te=[...p];Te[ce][ne]=he,y(Te)},ae=ce=>{const ne=[...p];ne[ce].warmup.push(""),y(ne)},te=(ce,ne)=>{const he=[...p];he[ce].warmup=he[ce].warmup.filter((Te,Ve)=>Ve!==ne),y(he)},Y=(ce,ne,he)=>{const Te=[...p];Te[ce].warmup[ne]=he,y(Te)},re=ce=>{const ne=[...p];ne[ce].main.push(""),y(ne)},ee=(ce,ne)=>{const he=[...p];he[ce].main=he[ce].main.filter((Te,Ve)=>Ve!==ne),y(he)},B=(ce,ne,he)=>{const Te=[...p];Te[ce].main[ne]=he,y(Te)},J=()=>R([...C,""]),ve=ce=>R(C.filter((ne,he)=>he!==ce)),je=(ce,ne)=>{const he=[...C];he[ce]=ne,R(he)};return m.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[m.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),j&&m.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:j}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((ce,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ce,onChange:he=>O(ne,he.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${ne+1}`}),m.jsx("button",{onClick:()=>W(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},ne)),m.jsx("button",{onClick:q,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),m.jsx("textarea",{value:w,onChange:ce=>_(ce.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),m.jsx("textarea",{value:r,onChange:ce=>i(ce.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),a.map((ce,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ce,onChange:he=>S(ne,he.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${ne+1}`}),m.jsx("button",{onClick:()=>E(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:a.length===1,children:"Remove"})]},`warmup-${ne}`)),m.jsx("button",{onClick:k,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mt-4 mb-2`,children:"Main Workout Exercises"}),c.map((ce,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ce,onChange:he=>U(ne,he.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${ne+1}`}),m.jsx("button",{onClick:()=>V(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:c.length===1,children:"Remove"})]},`main-${ne}`)),m.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Main Exercise"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),p.map((ce,ne)=>m.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[m.jsx("input",{type:"datetime-local",value:ce.updateDateTime?ce.updateDateTime.slice(0,16):"",onChange:he=>me(ne,"updateDateTime",new Date(he.target.value).toISOString()),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),m.jsx("textarea",{value:ce.description,onChange:he=>me(ne,"description",he.target.value),className:`border p-2 w-full h-24 mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-2 mb-2`,children:"Warm Up Exercises"}),ce.warmup.map((he,Te)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:he,onChange:Ve=>Y(ne,Te,Ve.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${Te+1}`}),m.jsx("button",{onClick:()=>te(ne,Te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ce.warmup.length===1,children:"Remove"})]},`warmup-${ne}-${Te}`)),m.jsx("button",{onClick:()=>ae(ne),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mt-2 mb-2`,children:"Main Workout Exercises"}),ce.main.map((he,Te)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:he,onChange:Ve=>B(ne,Te,Ve.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${Te+1}`}),m.jsx("button",{onClick:()=>ee(ne,Te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ce.main.length===1,children:"Remove"})]},`main-${ne}-${Te}`)),m.jsx("button",{onClick:()=>re(ne),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-2",children:"Add Main Exercise"}),m.jsx("button",{onClick:()=>ie(ne),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:p.length===1&&!p[0].description,children:"Remove Workout"})]},ne)),m.jsx("button",{onClick:D,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),C.map((ce,ne)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:ce,onChange:he=>je(ne,he.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${ne+1}`}),m.jsx("button",{onClick:()=>ve(ne),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:C.length===1,children:"Remove"})]},ne)),m.jsx("button",{onClick:J,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),m.jsx("button",{onClick:H,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),m.jsx("button",{onClick:()=>L("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function r6(){const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState([]),[r,i]=P.useState(null),[a,l]=P.useState(null),c=_n();P.useEffect(()=>{const O=Bu(jn,k=>{k||c("/admin")});return()=>O()},[c]),P.useEffect(()=>{(async()=>{try{const k=It(vt,"content","blog","posts"),I=(await Mn(k)).docs.map(V=>({id:V.id,title:V.data().title||"",blocks:V.data().blocks||[{type:"paragraph",content:""}],lastEdited:V.data().lastEdited||""})).sort((V,U)=>{const D=V.lastEdited?new Date(V.lastEdited):new Date(0);return(U.lastEdited?new Date(U.lastEdited):new Date(0))-D});n(I.length?I:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:""}])}catch(k){l("Failed to load blog posts: "+k.message)}})()},[]);const d=async()=>{l(null);try{const O=It(vt,"content","blog","posts"),k=await Mn(O);for(const E of k.docs)await jd(E.ref);for(const E of e)if(E.title.trim()&&E.blocks.some(S=>S.type==="paragraph"||S.type==="image"||S.type==="link"?S.content.trim():S.content.some(I=>I.trim()))){const S=E.id||Date.now().toString();await Zg(An(O,S),{id:S,title:E.title,blocks:E.blocks.map(I=>({type:I.type,content:I.type==="paragraph"||I.type==="image"?I.content:I.type==="link"?{url:I.content.url,text:I.content.text}:I.content.filter(V=>V.trim()!=="")})),lastEdited:E.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),i(null),c("/admin")}catch(O){l("Error saving blog posts: "+O.message)}},p=async()=>{try{await zu(jn),c("/admin")}catch(O){l("Failed to log out: "+O.message)}},y=()=>{const O=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:new Date().toISOString()}];n(O),i(O.length-1)},w=O=>{const k=e.filter((E,S)=>S!==O);n(k),i(null)},_=(O,k,E)=>{const S=[...e];S[O]={...S[O],[k]:E,lastEdited:new Date().toISOString()},n(S)},C=(O,k)=>{const E=[...e];E[O].blocks.push({type:k,content:k==="paragraph"||k==="image"?"":k==="link"?{url:"",text:""}:[""]}),E[O].lastEdited=new Date().toISOString(),n(E)},R=(O,k)=>{const E=[...e];E[O].blocks=E[O].blocks.filter((S,I)=>I!==k),E[O].lastEdited=new Date().toISOString(),n(E)},j=(O,k,E)=>{const S=[...e];S[O].blocks[k]={type:E,content:E==="paragraph"||E==="image"?"":E==="link"?{url:"",text:""}:[""]},S[O].lastEdited=new Date().toISOString(),n(S)},N=(O,k,E)=>{const S=[...e];S[O].blocks[k].content=E,S[O].lastEdited=new Date().toISOString(),n(S)},L=(O,k,E,S)=>{const I=[...e];I[O].blocks[k].content[E]=S,I[O].lastEdited=new Date().toISOString(),n(I)},H=(O,k)=>{const E=[...e];E[O].blocks[k].content.push(""),E[O].lastEdited=new Date().toISOString(),n(E)},$=(O,k,E)=>{const S=[...e];S[O].blocks[k].content=S[O].blocks[k].content.filter((I,V)=>V!==E),S[O].lastEdited=new Date().toISOString(),n(S)},q=(O,k,E,S)=>{const I=[...e];I[O].blocks[k].content[E]=S,I[O].lastEdited=new Date().toISOString(),n(I)},W=O=>O?new Date(O).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return m.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[m.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),a&&m.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:a}),r===null?m.jsxs("div",{className:"mb-6",children:[e.length===0?m.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):m.jsx("div",{className:"grid gap-4",children:e.map((O,k)=>m.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>i(k),children:[m.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:O.title||"Untitled Post"}),m.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",W(O.lastEdited)]})]},k))}),m.jsx("button",{onClick:y,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),m.jsx("button",{onClick:()=>c("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:p,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[m.jsx("input",{type:"text",value:e[r].title,onChange:O=>_(r,"title",O.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),m.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",W(e[r].lastEdited)]}),m.jsxs("div",{className:"mb-2",children:[m.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((O,k)=>m.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Block Type:"}),m.jsxs("select",{value:O.type,onChange:E=>j(r,k,E.target.value),className:`border p-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[m.jsx("option",{value:"paragraph",children:"Paragraph"}),m.jsx("option",{value:"list",children:"Numbered List"}),m.jsx("option",{value:"bullet",children:"Bullet Points"}),m.jsx("option",{value:"image",children:"Image"}),m.jsx("option",{value:"link",children:"Link"})]}),m.jsx("button",{onClick:()=>R(r,k),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),O.type==="paragraph"?m.jsx("textarea",{value:O.content,onChange:E=>N(r,k,E.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):O.type==="image"?m.jsxs("div",{className:"space-y-2",children:[m.jsx("input",{type:"text",value:O.content,onChange:E=>N(r,k,E.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),O.content&&m.jsx("img",{src:O.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):O.type==="link"?m.jsxs("div",{className:"space-y-2",children:[m.jsx("input",{type:"text",value:O.content.url,onChange:E=>L(r,k,"url",E.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),m.jsx("input",{type:"text",value:O.content.text,onChange:E=>L(r,k,"text",E.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):m.jsxs("div",{children:[O.content.map((E,S)=>m.jsxs("div",{className:"flex mb-2",children:[m.jsx("input",{type:"text",value:E,onChange:I=>q(r,k,S,I.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${S+1}`}),m.jsx("button",{onClick:()=>$(r,k,S),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[k].content.length===1,children:"Remove"})]},S)),m.jsx("button",{onClick:()=>H(r,k),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},k)),m.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[m.jsx("button",{onClick:()=>C(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),m.jsx("button",{onClick:()=>C(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),m.jsx("button",{onClick:()=>C(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),m.jsx("button",{onClick:()=>C(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Image"}),m.jsx("button",{onClick:()=>C(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),m.jsx("button",{onClick:()=>w(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),m.jsx("button",{onClick:()=>i(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),m.jsx("button",{onClick:d,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),m.jsx("button",{onClick:()=>c("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:p,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function s6(){const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState([]),[r,i]=P.useState([]),[a,l]=P.useState(""),[c,d]=P.useState({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""}),[p,y]=P.useState(null),[w,_]=P.useState(null),[C,R]=P.useState(null),j=_n();P.useEffect(()=>{const E=Bu(jn,S=>{S||j("/admin")});return()=>E()},[j]),P.useEffect(()=>{(async()=>{try{const I=(await Mn(It(vt,"categories"))).docs.map(D=>({id:D.id,...D.data()}));n(I);const U=(await Mn(It(vt,"products"))).docs.map(D=>({id:D.id,...D.data()}));i(U)}catch(S){R("Error fetching data from Firestore: "+S.message)}})()},[]);const N=async E=>{if(E.preventDefault(),!!a)try{const S=await Ma(It(vt,"categories"),{name:a});n([...e,{id:S.id,name:a}]),l("")}catch(S){R("Error adding category: "+S.message)}},L=async E=>{try{const S=An(vt,"categories",E.id);await Pw(S,{name:E.name}),n(e.map(I=>I.id===E.id?{...I,name:E.name}:I)),y(null)}catch(S){R("Error updating category: "+S.message)}},H=async E=>{try{await jd(An(vt,"categories",E)),n(e.filter(I=>I.id!==E));const S=r.filter(I=>I.categoryId===E);for(const I of S){if(I.image&&I.image!=="https://via.placeholder.com/80"){const V=I.image.split("/products%2F")[1].split("?")[0],U=zp(qp,`products/${decodeURIComponent(V)}`);await jw(U).catch(D=>{R(`Error deleting image for product ${I.id}: `+D.message)})}await jd(An(vt,"products",I.id))}i(r.filter(I=>I.categoryId!==E))}catch(S){R("Error deleting category: "+S.message)}},$=async E=>{if(!E)return null;const S=zp(qp,`products/${E.name}`);return await lj(S,E),await uj(S)},q=async E=>{if(E.preventDefault(),!(!c.categoryId||!c.name||!c.price))try{const S=await $(c.image),I=await Ma(It(vt,"products"),{categoryId:c.categoryId,name:c.name,price:parseFloat(c.price),description:c.description||"No description available",image:S||"https://via.placeholder.com/80",color:c.color||"N/A",size:c.size||"N/A"});i([...r,{id:I.id,categoryId:c.categoryId,name:c.name,price:parseFloat(c.price),description:c.description||"No description available",image:S||"https://via.placeholder.com/80",color:c.color||"N/A",size:c.size||"N/A"}]),d({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""})}catch(S){R("Error adding product: "+S.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},W=async E=>{try{const S=E.image instanceof File?await $(E.image):E.image,I=An(vt,"products",E.id);await Pw(I,{categoryId:E.categoryId,name:E.name,price:parseFloat(E.price),description:E.description,image:S||"https://via.placeholder.com/80",color:E.color,size:E.size}),i(r.map(V=>V.id===E.id?{...V,categoryId:E.categoryId,name:E.name,price:parseFloat(E.price),description:E.description,image:S||"https://via.placeholder.com/80",color:E.color,size:E.size}:V)),_(null)}catch(S){R("Error updating product: "+S.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},O=async E=>{try{const S=r.find(I=>I.id===E);if(S.image&&S.image!=="https://via.placeholder.com/80"){const I=S.image.split("/products%2F")[1].split("?")[0],V=zp(qp,`products/${decodeURIComponent(I)}`);await jw(V).catch(U=>{R(`Error deleting image for product ${E}: `+U.message)})}await jd(An(vt,"products",E)),i(r.filter(I=>I.id!==E))}catch(S){R("Error deleting product: "+S.message)}},k=async()=>{try{await zu(jn),j("/admin")}catch(E){R("Failed to log out: "+E.message)}};return m.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[m.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),C&&m.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:C}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Category"}),m.jsxs("form",{onSubmit:N,className:"flex gap-4",children:[m.jsx("input",{type:"text",value:a,onChange:E=>l(E.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Categories"}),m.jsx("div",{className:"space-y-4",children:e.map(E=>m.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(p==null?void 0:p.id)===E.id?m.jsxs("div",{className:"flex gap-4",children:[m.jsx("input",{type:"text",value:p.name,onChange:S=>y({...p,name:S.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),m.jsx("button",{onClick:()=>L(p),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),m.jsx("button",{onClick:()=>y(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:E.name}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>y(E),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),m.jsx("button",{onClick:()=>H(E.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},E.id))})]}),m.jsxs("div",{className:"mb-12",children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Product"}),m.jsxs("form",{onSubmit:q,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),m.jsxs("select",{value:c.categoryId,onChange:E=>d({...c,categoryId:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[m.jsx("option",{value:"",children:"Select a category"}),e.map(E=>m.jsx("option",{value:E.id,children:E.name},E.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),m.jsx("input",{type:"text",value:c.name,onChange:E=>d({...c,name:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),m.jsx("input",{type:"number",step:"0.01",value:c.price,onChange:E=>d({...c,price:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),m.jsx("textarea",{value:c.description,onChange:E=>d({...c,description:E.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),m.jsx("input",{type:"file",accept:"image/*",onChange:E=>d({...c,image:E.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Color"}),m.jsx("input",{type:"text",value:c.color,onChange:E=>d({...c,color:E.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Color (optional)"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Size"}),m.jsx("input",{type:"text",value:c.size,onChange:E=>d({...c,size:E.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Size (optional)"})]}),m.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),m.jsxs("div",{children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Products"}),m.jsx("div",{className:"space-y-4",children:r.map(E=>{var S;return m.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(w==null?void 0:w.id)===E.id?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),m.jsxs("select",{value:w.categoryId,onChange:I=>_({...w,categoryId:I.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[m.jsx("option",{value:"",children:"Select a category"}),e.map(I=>m.jsx("option",{value:I.id,children:I.name},I.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),m.jsx("input",{type:"text",value:w.name,onChange:I=>_({...w,name:I.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),m.jsx("input",{type:"number",step:"0.01",value:w.price,onChange:I=>_({...w,price:I.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),m.jsx("textarea",{value:w.description,onChange:I=>_({...w,description:I.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),m.jsx("input",{type:"file",accept:"image/*",onChange:I=>_({...w,image:I.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),w.image&&typeof w.image=="string"&&m.jsx("img",{src:w.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Color"}),m.jsx("input",{type:"text",value:w.color,onChange:I=>_({...w,color:I.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Size"}),m.jsx("input",{type:"text",value:w.size,onChange:I=>_({...w,size:I.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:()=>W(w),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),m.jsx("button",{onClick:()=>_(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[E.image&&E.image!=="https://via.placeholder.com/80"&&m.jsx("img",{src:E.image,alt:E.name,className:"w-16 h-16 object-cover rounded-md"}),m.jsxs("div",{children:[m.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:E.name}),m.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((S=e.find(I=>I.id===E.categoryId))==null?void 0:S.name)||"Unknown"]}),m.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",E.price.toFixed(2)]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>_(E),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),m.jsx("button",{onClick:()=>O(E.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},E.id)})})]}),m.jsxs("div",{className:"mt-6 flex gap-4",children:[m.jsx("button",{onClick:()=>j("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),m.jsx("button",{onClick:k,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const i6=()=>{const t=_n(),{isDarkMode:e}=P.useContext(Ge),n=()=>{t("/fitness-tracker/create-custom-plan")};return m.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),m.jsxs("div",{className:"max-w-2xl mx-auto",children:[m.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),m.jsx("div",{className:"text-center",children:m.jsx("button",{onClick:n,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),m.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx(Xn,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),m.jsx(Xn,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},o6=()=>{const{id:t}=yh(),{isDarkMode:e}=P.useContext(Ge),[n,r]=P.useState(null),[i,a]=P.useState(!0);P.useEffect(()=>{(async()=>{const p=vr(),y=await Ou(An(p,"customPlans",t));y.exists()&&r({id:y.id,...y.data()}),a(!1)})()},[t]);const l=d=>{if(!(n!=null&&n.startDate))return"";const p=new Date(n.startDate);return p.setDate(p.getDate()+d*7),p.toLocaleDateString()},c=(d,p)=>{if(!(n!=null&&n.startDate))return"";const y=new Date(n.startDate);return y.setDate(y.getDate()+d*7+p),y.toLocaleDateString()};return i?m.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsx("p",{className:"text-xl",children:"Loading..."})}):n?m.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:n.name}),m.jsx("div",{className:"max-w-4xl mx-auto",children:n.weeks.map((d,p)=>m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",d.week," (",l(p),")"]}),d.days.map((y,w)=>m.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[y.day," (",c(p,w),")"]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),m.jsx("ul",{className:"list-disc pl-5",children:y.workouts.map((_,C)=>m.jsxs("li",{children:[_.name,": ",_.sets," sets x ",_.reps," ","reps"]},C))})]})]},w))]},p))})]})}):m.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsx("p",{className:"text-xl",children:"Plan not found."})})},a6=()=>{const t=_n(),{isDarkMode:e}=P.useContext(Ge),[n,r]=P.useState(""),[i,a]=P.useState(new Date().toISOString().split("T")[0]),[l,c]=P.useState([]),[d,p]=P.useState({}),[y,w]=P.useState(Array.from({length:6},(q,W)=>({week:W+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[_,C]=P.useState(Array(6).fill(!1));P.useEffect(()=>{(async()=>{const W=vr(),k=(await Mn(It(W,"workouts"))).docs.map(S=>({id:S.id,...S.data()})),E=k.reduce((S,I)=>{const V=I.muscleGroup||"Other";return S[V]||(S[V]=[]),S[V].push(I),S},{});c(k),p(E)})()},[]);const R=q=>{const W=[..._];W[q]=!W[q],C(W)},j=(q,W)=>{var k;const O=[...y];O[q].days[W].workouts.push({name:((k=l[0])==null?void 0:k.name)||"",sets:3,reps:10}),w(O)},N=(q,W,O,k,E)=>{const S=[...y];S[q].days[W].workouts[O][k]=E,w(S)},L=async q=>{q.preventDefault();const W=vr(),O={userId:"anonymous",name:n,startDate:new Date(i).toISOString(),weeks:y},k=await Ma(It(W,"customPlans"),O);t(`/fitness-tracker/plan/${k.id}`)},H=q=>{const W=new Date(i);return W.setDate(W.getDate()+q*7),W.toLocaleDateString()},$=(q,W)=>{const O=new Date(i);return O.setDate(O.getDate()+q*7+W),O.toLocaleDateString()};return m.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),m.jsxs("form",{onSubmit:L,children:[m.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),m.jsx("input",{type:"text",value:n,onChange:q=>r(q.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),m.jsx("input",{type:"date",value:i,onChange:q=>a(q.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:y.map((q,W)=>m.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>R(W),children:[m.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",q.week," (",H(W),")"]}),_[W]?m.jsx(g0,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):m.jsx(m0,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),_[W]&&m.jsx("div",{className:"mt-4",children:q.days.map((O,k)=>m.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[O.day," (",$(W,k),")"]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),O.workouts.length>0?O.workouts.map((E,S)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[m.jsx("select",{value:E.name,onChange:I=>N(W,k,S,"name",I.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(d).map(I=>m.jsx("optgroup",{label:I,children:d[I].map(V=>m.jsx("option",{value:V.name,children:V.name},V.id))},I))}),m.jsx("input",{type:"number",value:E.sets,onChange:I=>N(W,k,S,"sets",Number(I.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),m.jsx("input",{type:"text",value:E.reps,onChange:I=>N(W,k,S,"reps",I.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},S)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),m.jsx("button",{type:"button",onClick:()=>j(W,k),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},k))})]},W))}),m.jsx("div",{className:"mt-8 max-w-md mx-auto",children:m.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},l6=()=>{const t=_n(),{isDarkMode:e}=P.useContext(Ge),{user:n,loading:r}=P.useContext(Ka),[i,a]=P.useState([]),[l,c]=P.useState([]),[d,p]=P.useState([]),[y,w]=P.useState([]),[_,C]=P.useState(new Date().toISOString().split("T")[0]);P.useEffect(()=>{(async()=>{try{const k=vr(),E=await Mn(It(k,"workouts")),S=await Mn(It(k,"foods")),I=E.docs.map(U=>({id:U.id,...U.data()})),V=S.docs.map(U=>({id:U.id,...U.data()}));console.log("Fetched workouts from 'workouts' collection:",I),console.log("Fetched meals from 'foods' collection:",V),a(I),c(V),I.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),V.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(k){console.error("Error fetching data:",k)}})()},[]);const R=l.reduce((O,k)=>{const E=k.category||"Misc";return O[E]||(O[E]=[]),O[E].push(k),O},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],N=()=>{if(i.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}p([...d,{name:i[0].name,sets:0,reps:0}])},L=(O,k,E)=>{const S=[...d];S[O][k]=k==="sets"||k==="reps"?Number(E):E,p(S)},H=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}w([...y,{name:l[0].name,quantity:1}])},$=(O,k,E)=>{const S=[...y];S[O][k]=k==="quantity"?Number(E):E,w(S)},q=O=>{const k=l.find(E=>E.name===O.name);return k?{protein:k.macros.protein*O.quantity,carbs:k.macros.carbs*O.quantity,fats:k.macros.fats*O.quantity}:{protein:0,carbs:0,fats:0}},W=async O=>{if(O.preventDefault(),!n){alert("Please log in to save a fitness log."),t("/login");return}const k=vr(),E={userId:n.uid,date:new Date(_).toISOString(),workouts:d,meals:y.map(S=>({...S,macros:q(S)}))};await Ma(It(k,"userLogs"),E),t("/fitness-tracker/history")};return r?m.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),m.jsxs("form",{onSubmit:W,className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),m.jsx("input",{type:"date",value:_,onChange:O=>C(O.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),i.length===0?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):d.length>0?d.map((O,k)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[m.jsx("select",{value:O.name,onChange:E=>L(k,"name",E.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:i.map(E=>m.jsx("option",{value:E.name,children:E.name},E.id))}),m.jsx("input",{type:"number",value:O.sets,onChange:E=>L(k,"sets",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),m.jsx("input",{type:"number",value:O.reps,onChange:E=>L(k,"reps",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},k)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),m.jsx("button",{type:"button",onClick:N,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),m.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[m.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):y.length>0?y.map((O,k)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[m.jsx("select",{value:O.name,onChange:E=>$(k,"name",E.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:j.map(E=>R[E]&&m.jsx("optgroup",{label:E,children:R[E].map(S=>m.jsx("option",{value:S.name,children:S.name},S.id))},E))}),m.jsx("input",{type:"number",value:O.quantity,onChange:E=>$(k,"quantity",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},k)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),m.jsx("button",{type:"button",onClick:H,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),m.jsx("div",{className:"text-center",children:m.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},u6=()=>{const{isDarkMode:t}=P.useContext(Ge),[e,n]=P.useState([]);return P.useEffect(()=>{(async()=>{const i=vr(),l=(await Mn(It(i,"userLogs"))).docs.map(c=>({id:c.id,...c.data()}));n(l.sort((c,d)=>new Date(d.date)-new Date(c.date)))})()},[]),m.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness History"}),m.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>m.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${t?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[m.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),m.jsxs("div",{className:"mt-2",children:[m.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),m.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((i,a)=>m.jsxs("li",{children:[i.name,": ",i.sets," sets x ",i.reps," ","reps"]},a))})]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Meals:"}),m.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((i,a)=>m.jsxs("li",{children:[i.name," (",i.quantity,"g): Protein"," ",i.macros.protein.toFixed(1),"g, Carbs"," ",i.macros.carbs.toFixed(1),"g, Fats"," ",i.macros.fats.toFixed(1),"g"]},a))})]})]},r.id)):m.jsx("p",{className:`text-center text-lg ${t?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},c6=()=>{const t=_n(),{isDarkMode:e}=P.useContext(Ge),{user:n,loading:r}=P.useContext(Ka),[i,a]=P.useState(""),[l,c]=P.useState(new Date().toISOString().split("T")[0]),[d,p]=P.useState([]),[y,w]=P.useState(Array.from({length:6},(ae,te)=>({week:te+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[_,C]=P.useState(Array(6).fill(!1)),[R,j]=P.useState(null);P.useEffect(()=>{(async()=>{try{const te=vr(),re=(await Mn(It(te,"foods"))).docs.map(ee=>({id:ee.id,...ee.data()}));console.log("Fetched meals from 'foods' collection:",re),p(re),re.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(te){console.error("Error fetching meals:",te)}})()},[]);const N=d.reduce((ae,te)=>{const Y=te.category||"Misc";return ae[Y]||(ae[Y]=[]),ae[Y].push(te),ae},{}),L=["Meat","Fruit","Vegetable","Starch","Misc"],H=["Breakfast","Lunch","Dinner","Snacks"],$=ae=>{const te=[..._];te[ae]=!te[ae],C(te)},q=(ae,te)=>{if(d.length===0){alert("No meals available to add. Please add meals in Firestore.");return}const Y=[...y];Y[ae].days[te].meals.push({name:d[0].name,grams:d[0].portion||100,referencePortion:d[0].portion||100,macros:d[0].macros,mealTime:"Breakfast"}),w(Y)},W=(ae,te,Y,re,ee)=>{const B=[...y],J=B[ae].days[te].meals[Y];if(re==="name"){const ve=d.find(je=>je.name===ee);J.name=ee,J.grams=ve.portion||100,J.referencePortion=ve.portion||100,J.macros=ve.macros}else J[re]=re==="grams"?Number(ee):ee;w(B)},O=(ae,te,Y,re)=>{const ee=[...y];ee[ae].days[te].macros[Y]=Number(re),w(ee)},k=(ae,te)=>{const Y=[...y],re=Y[ae].days[te],ee={...re.meals[re.meals.length-1]};ee.name&&(re.loggedMeals[ee.mealTime].push(ee),re.meals[re.meals.length-1]={name:d[0].name,grams:d[0].portion||100,referencePortion:d[0].portion||100,macros:d[0].macros,mealTime:"Breakfast"},w(Y))},E=(ae,te,Y,re,ee)=>{j({weekIndex:ae,dayIndex:te,mealTime:Y,mealIndex:re,meal:ee})},S=()=>{if(!R)return;const{weekIndex:ae,dayIndex:te,mealTime:Y,mealIndex:re,meal:ee}=R,B=[...y];B[ae].days[te].loggedMeals[Y][re]=ee,w(B),j(null)},I=(ae,te,Y,re)=>{const ee=[...y];ee[ae].days[te].loggedMeals[Y].splice(re,1),w(ee)},V=ae=>Object.values(ae).flat().reduce((Y,re)=>{const ee=re.grams/re.referencePortion;return{protein:Y.protein+re.macros.protein*ee,carbs:Y.carbs+re.macros.carbs*ee,fats:Y.fats+re.macros.fats*ee}},{protein:0,carbs:0,fats:0}),U=(ae,te)=>({protein:ae.protein>=te.protein,carbs:ae.carbs>=te.carbs,fats:ae.fats>=te.fats}),D=ae=>{const te=new Date(l);return te.setDate(te.getDate()+ae*7),te.toLocaleDateString()},ie=(ae,te)=>{const Y=new Date(l);return Y.setDate(Y.getDate()+ae*7+te),Y.toLocaleDateString()},me=async ae=>{if(ae.preventDefault(),!n){alert("Please log in to save a nutrition plan."),t("/login");return}const te=vr(),Y={userId:n.uid,name:i,startDate:new Date(l).toISOString(),weeks:y},re=await Ma(It(te,"nutritionPlans"),Y);t(`/nutrition-plan/${re.id}`)};return r?m.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Loading..."}):m.jsxs("div",{className:"container mx-auto px-4 py-12",children:[m.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),m.jsxs("form",{onSubmit:me,children:[m.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),m.jsx("input",{type:"text",value:i,onChange:ae=>a(ae.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),m.jsx("input",{type:"date",value:l,onChange:ae=>c(ae.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:y.map((ae,te)=>m.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[m.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>$(te),children:[m.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",ae.week," ",m.jsxs("span",{className:"text-sm font-normal",children:["(",D(te),")"]})]}),_[te]?m.jsx(g0,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):m.jsx(m0,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),_[te]&&m.jsx("div",{className:"mt-6 space-y-6",children:ae.days.map((Y,re)=>m.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[Y.day," ",m.jsxs("span",{className:"text-sm font-normal",children:["(",ie(te,re),")"]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),m.jsx("input",{type:"number",value:Y.macros.protein,onChange:ee=>O(te,re,"protein",ee.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),m.jsx("input",{type:"number",value:Y.macros.carbs,onChange:ee=>O(te,re,"carbs",ee.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),m.jsxs("div",{children:[m.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),m.jsx("input",{type:"number",value:Y.macros.fats,onChange:ee=>O(te,re,"fats",ee.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),d.length===0?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):Y.meals.length>0?Y.meals.map((ee,B)=>m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[m.jsx("select",{value:ee.name,onChange:J=>W(te,re,B,"name",J.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:L.map(J=>N[J]&&m.jsx("optgroup",{label:J,children:N[J].map(ve=>m.jsx("option",{value:ve.name,children:ve.name},ve.id))},J))}),m.jsx("input",{type:"number",value:ee.grams,onChange:J=>W(te,re,B,"grams",J.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),m.jsx("select",{value:ee.mealTime,onChange:J=>W(te,re,B,"mealTime",J.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:H.map(J=>m.jsx("option",{value:J,children:J},J))}),m.jsx("button",{type:"button",onClick:()=>k(te,re),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},B)):m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),m.jsx("button",{type:"button",onClick:()=>q(te,re),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(Y.loggedMeals).every(ee=>Y.loggedMeals[ee].length===0)?m.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):H.map(ee=>m.jsxs("div",{className:"mb-6",children:[m.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:ee}),Y.loggedMeals[ee].length>0?m.jsx("ul",{className:"space-y-2",children:Y.loggedMeals[ee].map((B,J)=>m.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[m.jsxs("span",{className:"text-sm",children:[B.name,": ",B.grams,"g"]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{type:"button",onClick:()=>E(te,re,ee,J,{...B}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:m.jsx($M,{className:"w-5 h-5"})}),m.jsx("button",{type:"button",onClick:()=>I(te,re,ee,J),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:m.jsx(zM,{className:"w-5 h-5"})})]})]},J))}):m.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",ee.toLowerCase()," logged."]})]},ee)),m.jsxs("div",{className:"mt-6",children:[m.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const ee=V(Y.loggedMeals),B=U(ee,Y.macros);return m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${B.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ee.protein/Y.macros.protein*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[ee.protein.toFixed(1),"g /"," ",Y.macros.protein,"g"]}),B.protein?m.jsx(Kp,{className:"w-5 h-5 text-green-500"}):m.jsx(Gp,{className:"w-5 h-5 text-red-500"})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${B.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ee.carbs/Y.macros.carbs*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[ee.carbs.toFixed(1),"g /"," ",Y.macros.carbs,"g"]}),B.carbs?m.jsx(Kp,{className:"w-5 h-5 text-green-500"}):m.jsx(Gp,{className:"w-5 h-5 text-red-500"})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),m.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:m.jsx("div",{className:`h-full ${B.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ee.fats/Y.macros.fats*100,100)}%`}})}),m.jsxs("span",{className:"text-sm",children:[ee.fats.toFixed(1),"g /"," ",Y.macros.fats,"g"]}),B.fats?m.jsx(Kp,{className:"w-5 h-5 text-green-500"}):m.jsx(Gp,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},re))})]},te))}),m.jsx("div",{className:"mt-12 max-w-md mx-auto",children:m.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),R&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:m.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[m.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),m.jsx("select",{value:R.meal.name,onChange:ae=>{const te=d.find(Y=>Y.name===ae.target.value);j({...R,meal:{...R.meal,name:ae.target.value,grams:te.portion||100,referencePortion:te.portion||100,macros:te.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:L.map(ae=>N[ae]&&m.jsx("optgroup",{label:ae,children:N[ae].map(te=>m.jsx("option",{value:te.name,children:te.name},te.id))},ae))})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),m.jsx("input",{type:"number",value:R.meal.grams,onChange:ae=>j({...R,meal:{...R.meal,grams:Number(ae.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),m.jsx("select",{value:R.meal.mealTime,onChange:ae=>j({...R,meal:{...R.meal,mealTime:ae.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:H.map(ae=>m.jsx("option",{value:ae,children:ae},ae))})]}),m.jsxs("div",{className:"flex space-x-4",children:[m.jsx("button",{type:"button",onClick:S,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),m.jsx("button",{type:"button",onClick:()=>j(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},d6=()=>{const{id:t}=yh(),e=_n(),{isDarkMode:n}=P.useContext(Ge),{user:r,loading:i}=P.useContext(Ka),[a,l]=P.useState(null),[c,d]=P.useState([]),p=["Breakfast","Lunch","Dinner","Snacks"];P.useEffect(()=>{!i&&r?(async()=>{try{const N=vr(),L=await Ou(An(N,"nutritionPlans",t));if(L.exists()){const H=L.data();if(H.userId!==(r==null?void 0:r.uid)){alert("You do not have permission to view this plan."),e("/nutrition");return}l(H),d(Array(H.weeks.length).fill(!1))}else console.error("Plan not found"),e("/nutrition")}catch(N){console.error("Error fetching plan:",N),e("/nutrition")}})():!i&&!r&&(alert("Please log in to view your nutrition plan."),e("/login"))},[t,r,i,e]);const y=j=>{const N=[...c];N[j]=!N[j],d(N)},w=j=>{const N=new Date(a.startDate);return N.setDate(N.getDate()+j*7),N.toLocaleDateString()},_=(j,N)=>{const L=new Date(a.startDate);return L.setDate(L.getDate()+j*7+N),L.toLocaleDateString()},C=j=>Object.values(j).flat().reduce((L,H)=>{const $=H.grams/H.referencePortion;return{protein:L.protein+H.macros.protein*$,carbs:L.carbs+H.macros.carbs*$,fats:L.fats+H.macros.fats*$}},{protein:0,carbs:0,fats:0}),R=(j,N)=>({protein:j.protein>=N.protein,carbs:j.carbs>=N.carbs,fats:j.fats>=N.fats});return i?m.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):a?m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${n?"text-red-400":"text-red-800"}`,children:a.name}),m.jsxs("p",{className:`text-center mb-8 ${n?"text-red-400":"text-red-800"}`,children:["Start Date: ",new Date(a.startDate).toLocaleDateString()]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.weeks.map((j,N)=>m.jsxs("div",{className:`p-6 rounded-lg shadow-md ${n?"bg-stone-800":"bg-red-50"}`,children:[m.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${n?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>y(N),children:[m.jsxs("h2",{className:`text-2xl font-semibold ${n?"text-red-400":"text-red-800"}`,children:["Week ",j.week," (",w(N),")"]}),c[N]?m.jsx(g0,{className:`w-6 h-6 ${n?"text-red-400":"text-red-800"}`}):m.jsx(m0,{className:`w-6 h-6 ${n?"text-red-400":"text-red-800"}`})]}),c[N]&&m.jsx("div",{className:"mt-4",children:j.days.map((L,H)=>m.jsxs("div",{className:`border p-4 rounded-md mb-4 ${n?"border-stone-600":"border-red-200"}`,children:[m.jsxs("h3",{className:`text-xl font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:[L.day," (",_(N,H),")"]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:`text-base font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:"Macro Goals:"}),m.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-4",children:[m.jsx("div",{children:m.jsxs("p",{children:["Protein: ",L.macros.protein,"g"]})}),m.jsx("div",{children:m.jsxs("p",{children:["Carbs: ",L.macros.carbs,"g"]})}),m.jsx("div",{children:m.jsxs("p",{children:["Fats: ",L.macros.fats,"g"]})})]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:`text-base font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:"Planned Meals:"}),L.meals.length>0?m.jsx("ul",{className:"list-disc pl-5",children:L.meals.map(($,q)=>m.jsxs("li",{children:[$.name,": ",$.grams,"g (",$.mealTime,")"]},q))}):m.jsx("p",{className:`text-sm italic ${n?"text-red-400":"text-red-800"}`,children:"No meals planned."})]}),m.jsxs("div",{children:[m.jsx("h4",{className:`text-base font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:"Logged Meals:"}),Object.keys(L.loggedMeals).every($=>L.loggedMeals[$].length===0)?m.jsx("p",{className:`text-sm italic ${n?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):p.map($=>m.jsxs("div",{className:"mb-4",children:[m.jsx("h5",{className:`text-lg font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:$}),L.loggedMeals[$].length>0?m.jsx("ul",{className:"list-disc pl-5 mb-4",children:L.loggedMeals[$].map((q,W)=>m.jsxs("li",{children:[q.name,": ",q.grams,"g"]},W))}):m.jsxs("p",{className:`text-sm italic ${n?"text-red-400":"text-red-800"}`,children:["No ",$.toLowerCase()," logged."]})]},$)),m.jsxs("div",{children:[m.jsx("h5",{className:`text-sm font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:"Total Macros:"}),(()=>{const $=C(L.loggedMeals),q=R($,L.macros);return m.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-4",children:[m.jsx("div",{children:m.jsxs("p",{children:["Protein: ",$.protein.toFixed(1),"g /"," ",L.macros.protein,"g",m.jsx("span",{className:`ml-2 ${q.protein?"text-green-500":"text-red-500"}`,children:q.protein?"":""})]})}),m.jsx("div",{children:m.jsxs("p",{children:["Carbs: ",$.carbs.toFixed(1),"g /"," ",L.macros.carbs,"g",m.jsx("span",{className:`ml-2 ${q.carbs?"text-green-500":"text-red-500"}`,children:q.carbs?"":""})]})}),m.jsx("div",{children:m.jsxs("p",{children:["Fats: ",$.fats.toFixed(1),"g /"," ",L.macros.fats,"g",m.jsx("span",{className:`ml-2 ${q.fats?"text-green-500":"text-red-500"}`,children:q.fats?"":""})]})})]})})()]})]})]},H))})]},N))})]}):m.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading plan..."})},h6=()=>{const t=_n(),{login:e,signup:n}=P.useContext(Ka),{isDarkMode:r}=P.useContext(Ge),[i,a]=P.useState(""),[l,c]=P.useState(""),[d,p]=P.useState(""),[y,w]=P.useState(!1),_=async C=>{C.preventDefault(),p("");try{y?await n(i,l):await e(i,l),t("/fitness-tracker")}catch(R){p(R.message)}};return m.jsxs("div",{className:"container mx-auto px-4 py-10",children:[m.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${r?"text-red-400":"text-red-800"}`,children:y?"Sign Up":"Login"}),m.jsxs("form",{onSubmit:_,className:"max-w-md mx-auto",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${r?"text-red-400":"text-red-800"}`,children:"Email"}),m.jsx("input",{type:"email",value:i,onChange:C=>a(C.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${r?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:`block text-xl font-semibold mb-2 ${r?"text-red-400":"text-red-800"}`,children:"Password"}),m.jsx("input",{type:"password",value:l,onChange:C=>c(C.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${r?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),d&&m.jsx("p",{className:"text-red-500 mb-4",children:d}),m.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:y?"Sign Up":"Login"}),m.jsxs("p",{className:"mt-4 text-center",children:[y?"Already have an account?":"Don't have an account?"," ",m.jsx("button",{type:"button",onClick:()=>w(!y),className:`hover:underline ${r?"text-red-400":"text-red-800"}`,children:y?"Login":"Sign Up"})]})]})]})},Ge=P.createContext();function f6(){const[t,e]=P.useState(()=>{const i=localStorage.getItem("theme");return i?JSON.parse(i):!0});P.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(t))},[t]);const n=()=>e(i=>!i),r="/aussie-gut-pack/";return console.log("Basename:",r),m.jsx(IF,{children:m.jsx(CM,{children:m.jsx(Ge.Provider,{value:{isDarkMode:t,toggleTheme:n},children:m.jsx(WI,{basename:r,children:m.jsx(wh,{children:m.jsx(xh,{classNames:"fade",timeout:300,children:m.jsx(wI,{children:m.jsxs(Xe,{path:"/",element:m.jsx(KM,{}),children:[m.jsx(Xe,{index:!0,element:m.jsx(PF,{})}),m.jsx(Xe,{path:"products",element:m.jsx(AF,{})}),m.jsx(Xe,{path:"cart",element:m.jsx(RF,{})}),m.jsx(Xe,{path:"checkout",element:m.jsx(NF,{})}),m.jsx(Xe,{path:"gut-health",element:m.jsx(DF,{})}),m.jsx(Xe,{path:"gut-health/:id",element:m.jsx(jF,{})}),m.jsx(Xe,{path:"purchase",element:m.jsx(MF,{})}),m.jsx(Xe,{path:"blog",element:m.jsx(VF,{})}),m.jsx(Xe,{path:"blog/:id",element:m.jsx(OF,{})}),m.jsx(Xe,{path:"faq",element:m.jsx($F,{})}),m.jsx(Xe,{path:"contact",element:m.jsx(e6,{})}),m.jsx(Xe,{path:"admin",element:m.jsx(t6,{})}),m.jsx(Xe,{path:"admin/home",element:m.jsx(n6,{})}),m.jsx(Xe,{path:"admin/blog",element:m.jsx(r6,{})}),m.jsx(Xe,{path:"admin/products",element:m.jsx(s6,{})}),m.jsx(Xe,{path:"fitness-tracker",element:m.jsx(i6,{})}),m.jsx(Xe,{path:"fitness-tracker/plan/:id",element:m.jsx(o6,{})}),m.jsx(Xe,{path:"fitness-tracker/create-custom-plan",element:m.jsx(a6,{})}),m.jsx(Xe,{path:"fitness-tracker/log",element:m.jsx(l6,{})}),m.jsx(Xe,{path:"fitness-tracker/history",element:m.jsx(u6,{})}),m.jsx(Xe,{path:"nutrition",element:m.jsx(c6,{})})," ",m.jsx(Xe,{path:"nutrition-plan/:id",element:m.jsx(d6,{})})," ",m.jsx(Xe,{path:"login",element:m.jsx(h6,{})}),m.jsx(Xe,{path:"*",element:m.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})}console.log("Main.jsx is running");kP.createRoot(document.getElementById("root")).render(m.jsx(Yn.StrictMode,{children:m.jsx(f6,{})}));
