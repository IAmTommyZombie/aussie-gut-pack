var mI=Object.defineProperty;var gI=(n,e,t)=>e in n?mI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Es=(n,e,t)=>gI(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Vo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yI(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Lm={exports:{}},Nu={},Mm={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx;function vI(){if(qx)return $e;qx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(K){return K===null||typeof K!="object"?null:(K=v&&K[v]||K["@@iterator"],typeof K=="function"?K:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,j={};function A(K,ee,Ee){this.props=K,this.context=ee,this.refs=j,this.updater=Ee||E}A.prototype.isReactComponent={},A.prototype.setState=function(K,ee){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ee,"setState")},A.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function D(){}D.prototype=A.prototype;function V(K,ee,Ee){this.props=K,this.context=ee,this.refs=j,this.updater=Ee||E}var $=V.prototype=new D;$.constructor=V,C($,A.prototype),$.isPureReactComponent=!0;var W=Array.isArray,H=Object.prototype.hasOwnProperty,F={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function b(K,ee,Ee){var Le,ie={},q=null,Q=null;if(ee!=null)for(Le in ee.ref!==void 0&&(Q=ee.ref),ee.key!==void 0&&(q=""+ee.key),ee)H.call(ee,Le)&&!I.hasOwnProperty(Le)&&(ie[Le]=ee[Le]);var te=arguments.length-2;if(te===1)ie.children=Ee;else if(1<te){for(var pe=Array(te),ge=0;ge<te;ge++)pe[ge]=arguments[ge+2];ie.children=pe}if(K&&K.defaultProps)for(Le in te=K.defaultProps,te)ie[Le]===void 0&&(ie[Le]=te[Le]);return{$$typeof:n,type:K,key:q,ref:Q,props:ie,_owner:F.current}}function S(K,ee){return{$$typeof:n,type:K.type,key:ee,ref:K.ref,props:K.props,_owner:K._owner}}function R(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function M(K){var ee={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Ee){return ee[Ee]})}var B=/\/+/g;function O(K,ee){return typeof K=="object"&&K!==null&&K.key!=null?M(""+K.key):ee.toString(36)}function re(K,ee,Ee,Le,ie){var q=typeof K;(q==="undefined"||q==="boolean")&&(K=null);var Q=!1;if(K===null)Q=!0;else switch(q){case"string":case"number":Q=!0;break;case"object":switch(K.$$typeof){case n:case e:Q=!0}}if(Q)return Q=K,ie=ie(Q),K=Le===""?"."+O(Q,0):Le,W(ie)?(Ee="",K!=null&&(Ee=K.replace(B,"$&/")+"/"),re(ie,ee,Ee,"",function(ge){return ge})):ie!=null&&(R(ie)&&(ie=S(ie,Ee+(!ie.key||Q&&Q.key===ie.key?"":(""+ie.key).replace(B,"$&/")+"/")+K)),ee.push(ie)),1;if(Q=0,Le=Le===""?".":Le+":",W(K))for(var te=0;te<K.length;te++){q=K[te];var pe=Le+O(q,te);Q+=re(q,ee,Ee,pe,ie)}else if(pe=w(K),typeof pe=="function")for(K=pe.call(K),te=0;!(q=K.next()).done;)q=q.value,pe=Le+O(q,te++),Q+=re(q,ee,Ee,pe,ie);else if(q==="object")throw ee=String(K),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Q}function he(K,ee,Ee){if(K==null)return K;var Le=[],ie=0;return re(K,Le,"","",function(q){return ee.call(Ee,q,ie++)}),Le}function Se(K){if(K._status===-1){var ee=K._result;ee=ee(),ee.then(function(Ee){(K._status===0||K._status===-1)&&(K._status=1,K._result=Ee)},function(Ee){(K._status===0||K._status===-1)&&(K._status=2,K._result=Ee)}),K._status===-1&&(K._status=0,K._result=ee)}if(K._status===1)return K._result.default;throw K._result}var we={current:null},le={transition:null},me={ReactCurrentDispatcher:we,ReactCurrentBatchConfig:le,ReactCurrentOwner:F};function fe(){throw Error("act(...) is not supported in production builds of React.")}return $e.Children={map:he,forEach:function(K,ee,Ee){he(K,function(){ee.apply(this,arguments)},Ee)},count:function(K){var ee=0;return he(K,function(){ee++}),ee},toArray:function(K){return he(K,function(ee){return ee})||[]},only:function(K){if(!R(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},$e.Component=A,$e.Fragment=t,$e.Profiler=s,$e.PureComponent=V,$e.StrictMode=r,$e.Suspense=c,$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,$e.act=fe,$e.cloneElement=function(K,ee,Ee){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var Le=C({},K.props),ie=K.key,q=K.ref,Q=K._owner;if(ee!=null){if(ee.ref!==void 0&&(q=ee.ref,Q=F.current),ee.key!==void 0&&(ie=""+ee.key),K.type&&K.type.defaultProps)var te=K.type.defaultProps;for(pe in ee)H.call(ee,pe)&&!I.hasOwnProperty(pe)&&(Le[pe]=ee[pe]===void 0&&te!==void 0?te[pe]:ee[pe])}var pe=arguments.length-2;if(pe===1)Le.children=Ee;else if(1<pe){te=Array(pe);for(var ge=0;ge<pe;ge++)te[ge]=arguments[ge+2];Le.children=te}return{$$typeof:n,type:K.type,key:ie,ref:q,props:Le,_owner:Q}},$e.createContext=function(K){return K={$$typeof:l,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:o,_context:K},K.Consumer=K},$e.createElement=b,$e.createFactory=function(K){var ee=b.bind(null,K);return ee.type=K,ee},$e.createRef=function(){return{current:null}},$e.forwardRef=function(K){return{$$typeof:u,render:K}},$e.isValidElement=R,$e.lazy=function(K){return{$$typeof:g,_payload:{_status:-1,_result:K},_init:Se}},$e.memo=function(K,ee){return{$$typeof:h,type:K,compare:ee===void 0?null:ee}},$e.startTransition=function(K){var ee=le.transition;le.transition={};try{K()}finally{le.transition=ee}},$e.unstable_act=fe,$e.useCallback=function(K,ee){return we.current.useCallback(K,ee)},$e.useContext=function(K){return we.current.useContext(K)},$e.useDebugValue=function(){},$e.useDeferredValue=function(K){return we.current.useDeferredValue(K)},$e.useEffect=function(K,ee){return we.current.useEffect(K,ee)},$e.useId=function(){return we.current.useId()},$e.useImperativeHandle=function(K,ee,Ee){return we.current.useImperativeHandle(K,ee,Ee)},$e.useInsertionEffect=function(K,ee){return we.current.useInsertionEffect(K,ee)},$e.useLayoutEffect=function(K,ee){return we.current.useLayoutEffect(K,ee)},$e.useMemo=function(K,ee){return we.current.useMemo(K,ee)},$e.useReducer=function(K,ee,Ee){return we.current.useReducer(K,ee,Ee)},$e.useRef=function(K){return we.current.useRef(K)},$e.useState=function(K){return we.current.useState(K)},$e.useSyncExternalStore=function(K,ee,Ee){return we.current.useSyncExternalStore(K,ee,Ee)},$e.useTransition=function(){return we.current.useTransition()},$e.version="18.3.1",$e}var Kx;function $0(){return Kx||(Kx=1,Mm.exports=vI()),Mm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function wI(){if(Gx)return Nu;Gx=1;var n=$0(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,h){var g,v={},w=null,E=null;h!==void 0&&(w=""+h),c.key!==void 0&&(w=""+c.key),c.ref!==void 0&&(E=c.ref);for(g in c)r.call(c,g)&&!o.hasOwnProperty(g)&&(v[g]=c[g]);if(u&&u.defaultProps)for(g in c=u.defaultProps,c)v[g]===void 0&&(v[g]=c[g]);return{$$typeof:e,type:u,key:w,ref:E,props:v,_owner:s.current}}return Nu.Fragment=t,Nu.jsx=l,Nu.jsxs=l,Nu}var Qx;function xI(){return Qx||(Qx=1,Lm.exports=wI()),Lm.exports}var p=xI(),P=$0();const tt=Vo(P);var lh={},Vm={exports:{}},Pn={},$m={exports:{}},Fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jx;function _I(){return Jx||(Jx=1,function(n){function e(le,me){var fe=le.length;le.push(me);e:for(;0<fe;){var K=fe-1>>>1,ee=le[K];if(0<s(ee,me))le[K]=me,le[fe]=ee,fe=K;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var me=le[0],fe=le.pop();if(fe!==me){le[0]=fe;e:for(var K=0,ee=le.length,Ee=ee>>>1;K<Ee;){var Le=2*(K+1)-1,ie=le[Le],q=Le+1,Q=le[q];if(0>s(ie,fe))q<ee&&0>s(Q,ie)?(le[K]=Q,le[q]=fe,K=q):(le[K]=ie,le[Le]=fe,K=Le);else if(q<ee&&0>s(Q,fe))le[K]=Q,le[q]=fe,K=q;else break e}}return me}function s(le,me){var fe=le.sortIndex-me.sortIndex;return fe!==0?fe:le.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();n.unstable_now=function(){return l.now()-u}}var c=[],h=[],g=1,v=null,w=3,E=!1,C=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(le){for(var me=t(h);me!==null;){if(me.callback===null)r(h);else if(me.startTime<=le)r(h),me.sortIndex=me.expirationTime,e(c,me);else break;me=t(h)}}function W(le){if(j=!1,$(le),!C)if(t(c)!==null)C=!0,Se(H);else{var me=t(h);me!==null&&we(W,me.startTime-le)}}function H(le,me){C=!1,j&&(j=!1,D(b),b=-1),E=!0;var fe=w;try{for($(me),v=t(c);v!==null&&(!(v.expirationTime>me)||le&&!M());){var K=v.callback;if(typeof K=="function"){v.callback=null,w=v.priorityLevel;var ee=K(v.expirationTime<=me);me=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(c)&&r(c),$(me)}else r(c);v=t(c)}if(v!==null)var Ee=!0;else{var Le=t(h);Le!==null&&we(W,Le.startTime-me),Ee=!1}return Ee}finally{v=null,w=fe,E=!1}}var F=!1,I=null,b=-1,S=5,R=-1;function M(){return!(n.unstable_now()-R<S)}function B(){if(I!==null){var le=n.unstable_now();R=le;var me=!0;try{me=I(!0,le)}finally{me?O():(F=!1,I=null)}}else F=!1}var O;if(typeof V=="function")O=function(){V(B)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,he=re.port2;re.port1.onmessage=B,O=function(){he.postMessage(null)}}else O=function(){A(B,0)};function Se(le){I=le,F||(F=!0,O())}function we(le,me){b=A(function(){le(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){C||E||(C=!0,Se(H))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(le){switch(w){case 1:case 2:case 3:var me=3;break;default:me=w}var fe=w;w=me;try{return le()}finally{w=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,me){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var fe=w;w=le;try{return me()}finally{w=fe}},n.unstable_scheduleCallback=function(le,me,fe){var K=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?K+fe:K):fe=K,le){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=fe+ee,le={id:g++,callback:me,priorityLevel:le,startTime:fe,expirationTime:ee,sortIndex:-1},fe>K?(le.sortIndex=fe,e(h,le),t(c)===null&&le===t(h)&&(j?(D(b),b=-1):j=!0,we(W,fe-K))):(le.sortIndex=ee,e(c,le),C||E||(C=!0,Se(H))),le},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(le){var me=w;return function(){var fe=w;w=me;try{return le.apply(this,arguments)}finally{w=fe}}}}(Fm)),Fm}var Yx;function bI(){return Yx||(Yx=1,$m.exports=_I()),$m.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xx;function EI(){if(Xx)return Pn;Xx=1;var n=$0(),e=bI();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(i){return c.call(v,i)?!0:c.call(g,i)?!1:h.test(i)?v[i]=!0:(g[i]=!0,!1)}function E(i,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function C(i,a,d,m){if(a===null||typeof a>"u"||E(i,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function j(i,a,d,m,y,_,k){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=k}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){A[i]=new j(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];A[a]=new j(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){A[i]=new j(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){A[i]=new j(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){A[i]=new j(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){A[i]=new j(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){A[i]=new j(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){A[i]=new j(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){A[i]=new j(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,V);A[a]=new j(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,V);A[a]=new j(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,V);A[a]=new j(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){A[i]=new j(i,1,!1,i.toLowerCase(),null,!1,!1)}),A.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){A[i]=new j(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,a,d,m){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(C(a,d,y,m)&&(d=null),m||y===null?w(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):y.mustUseProperty?i[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,m=y.attributeNamespace,d===null?i.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,m?i.setAttributeNS(m,a,d):i.setAttribute(a,d))))}var W=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),F=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),we=Symbol.for("react.offscreen"),le=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=le&&i[le]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Object.assign,K;function ee(i){if(K===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);K=a&&a[1]||""}return`
`+K+i}var Ee=!1;function Le(i,a){if(!i||Ee)return"";Ee=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var m=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){m=X}i.call(a.prototype)}else{try{throw Error()}catch(X){m=X}i()}}catch(X){if(X&&m&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),_=m.stack.split(`
`),k=y.length-1,L=_.length-1;1<=k&&0<=L&&y[k]!==_[L];)L--;for(;1<=k&&0<=L;k--,L--)if(y[k]!==_[L]){if(k!==1||L!==1)do if(k--,L--,0>L||y[k]!==_[L]){var U=`
`+y[k].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=k&&0<=L);break}}}finally{Ee=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?ee(i):""}function ie(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Le(i.type,!1),i;case 11:return i=Le(i.type.render,!1),i;case 1:return i=Le(i.type,!0),i;default:return""}}function q(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case I:return"Fragment";case F:return"Portal";case S:return"Profiler";case b:return"StrictMode";case O:return"Suspense";case re:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case he:return a=i.displayName||null,a!==null?a:q(i.type)||"Memo";case Se:a=i._payload,i=i._init;try{return q(i(a))}catch{}}return null}function Q(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(a);case 8:return a===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function te(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function pe(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ge(i){var a=pe(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(k){m=""+k,_.call(this,k)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(k){m=""+k},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function We(i){i._valueTracker||(i._valueTracker=ge(i))}function He(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=pe(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function It(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Dn(i,a){var d=a.checked;return fe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function ss(i,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=te(a.value!=null?a.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function $t(i,a){a=a.checked,a!=null&&$(i,"checked",a,!1)}function is(i,a){$t(i,a);var d=te(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?qo(i,a.type,d):a.hasOwnProperty("defaultValue")&&qo(i,a.type,te(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Kc(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function qo(i,a,d){(a!=="number"||It(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var os=Array.isArray;function as(i,a,d,m){if(i=i.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<i.length;d++)y=a.hasOwnProperty("$"+i[d].value),i[d].selected!==y&&(i[d].selected=y),y&&m&&(i[d].defaultSelected=!0)}else{for(d=""+te(d),a=null,y=0;y<i.length;y++){if(i[y].value===d){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Fl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return fe({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ko(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(t(92));if(os(d)){if(1<d.length)throw Error(t(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:te(d)}}function Go(i,a){var d=te(a.value),m=te(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Ul(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Rt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Rt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var ls,Bl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,y){MSApp.execUnsafeLocalFunction(function(){return i(a,d,m,y)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(ls=ls||document.createElement("div"),ls.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=ls.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Fs(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wi=["Webkit","ms","Moz","O"];Object.keys(zi).forEach(function(i){Wi.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),zi[a]=zi[i]})});function zl(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||zi.hasOwnProperty(i)&&zi[i]?(""+a).trim():a+"px"}function Wl(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,y=zl(d,a[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,y):i[d]=y}}var Hl=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ql(i,a){if(a){if(Hl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Kl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function Qo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Jo=null,Kn=null,Dr=null;function Yo(i){if(i=yu(i)){if(typeof Jo!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Ed(a),Jo(i.stateNode,i.type,a))}}function Or(i){Kn?Dr?Dr.push(i):Dr=[i]:Kn=i}function Gl(){if(Kn){var i=Kn,a=Dr;if(Dr=Kn=null,Yo(i),a)for(i=0;i<a.length;i++)Yo(a[i])}}function qi(i,a){return i(a)}function Ql(){}var us=!1;function Jl(i,a,d){if(us)return i(a,d);us=!0;try{return qi(i,a,d)}finally{us=!1,(Kn!==null||Dr!==null)&&(Ql(),Gl())}}function bt(i,a){var d=i.stateNode;if(d===null)return null;var m=Ed(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(t(231,a,typeof d));return d}var Xo=!1;if(u)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){Xo=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{Xo=!1}function Ki(i,a,d,m,y,_,k,L,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(d,X)}catch(oe){this.onError(oe)}}var Gi=!1,Zo=null,hr=!1,Yl=null,cp={onError:function(i){Gi=!0,Zo=i}};function ea(i,a,d,m,y,_,k,L,U){Gi=!1,Zo=null,Ki.apply(cp,arguments)}function Gc(i,a,d,m,y,_,k,L,U){if(ea.apply(this,arguments),Gi){if(Gi){var X=Zo;Gi=!1,Zo=null}else throw Error(t(198));hr||(hr=!0,Yl=X)}}function fr(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function Qi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function pr(i){if(fr(i)!==i)throw Error(t(188))}function Qc(i){var a=i.alternate;if(!a){if(a=fr(i),a===null)throw Error(t(188));return a!==i?null:i}for(var d=i,m=a;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return pr(y),i;if(_===m)return pr(y),a;_=_.sibling}throw Error(t(188))}if(d.return!==m.return)d=y,m=_;else{for(var k=!1,L=y.child;L;){if(L===d){k=!0,d=y,m=_;break}if(L===m){k=!0,m=y,d=_;break}L=L.sibling}if(!k){for(L=_.child;L;){if(L===d){k=!0,d=_,m=y;break}if(L===m){k=!0,m=_,d=y;break}L=L.sibling}if(!k)throw Error(t(189))}}if(d.alternate!==m)throw Error(t(190))}if(d.tag!==3)throw Error(t(188));return d.stateNode.current===d?i:a}function Xl(i){return i=Qc(i),i!==null?ta(i):null}function ta(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=ta(i);if(a!==null)return a;i=i.sibling}return null}var na=e.unstable_scheduleCallback,Zl=e.unstable_cancelCallback,Jc=e.unstable_shouldYield,dp=e.unstable_requestPaint,nt=e.unstable_now,Yc=e.unstable_getCurrentPriorityLevel,Ji=e.unstable_ImmediatePriority,Us=e.unstable_UserBlockingPriority,Gn=e.unstable_NormalPriority,eu=e.unstable_LowPriority,Xc=e.unstable_IdlePriority,Yi=null,On=null;function Zc(i){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(Yi,i,void 0,(i.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:td,tu=Math.log,ed=Math.LN2;function td(i){return i>>>=0,i===0?32:31-(tu(i)/ed|0)|0}var ra=64,sa=4194304;function Bs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Xi(i,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,y=i.suspendedLanes,_=i.pingedLanes,k=d&268435455;if(k!==0){var L=k&~y;L!==0?m=Bs(L):(_&=k,_!==0&&(m=Bs(_)))}else k=d&~y,k!==0?m=Bs(k):_!==0&&(m=Bs(_));if(m===0)return 0;if(a!==0&&a!==m&&!(a&y)&&(y=m&-m,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if(m&4&&(m|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)d=31-mn(a),y=1<<d,m|=i[d],a&=~y;return m}function hp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cs(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes;0<_;){var k=31-mn(_),L=1<<k,U=y[k];U===-1?(!(L&d)||L&m)&&(y[k]=hp(L,a)):U<=a&&(i.expiredLanes|=L),_&=~L}}function Ln(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Zi(){var i=ra;return ra<<=1,!(ra&4194240)&&(ra=64),i}function zs(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Ws(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-mn(a),i[a]=d}function et(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var y=31-mn(d),_=1<<y;a[y]=0,m[y]=-1,i[y]=-1,d&=~_}}function Hs(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-mn(d),y=1<<m;y&a|i[m]&a&&(i[m]|=a),d&=~y}}var ze=0;function qs(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var nd,ia,rd,sd,id,nu=!1,Lr=[],Kt=null,mr=null,gr=null,Ks=new Map,Qn=new Map,Mr=[],fp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function od(i,a){switch(i){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Ks.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qn.delete(a.pointerId)}}function _n(i,a,d,m,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[y]},a!==null&&(a=yu(a),a!==null&&ia(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function pp(i,a,d,m,y){switch(a){case"focusin":return Kt=_n(Kt,i,a,d,m,y),!0;case"dragenter":return mr=_n(mr,i,a,d,m,y),!0;case"mouseover":return gr=_n(gr,i,a,d,m,y),!0;case"pointerover":var _=y.pointerId;return Ks.set(_,_n(Ks.get(_)||null,i,a,d,m,y)),!0;case"gotpointercapture":return _=y.pointerId,Qn.set(_,_n(Qn.get(_)||null,i,a,d,m,y)),!0}return!1}function ad(i){var a=so(i.target);if(a!==null){var d=fr(a);if(d!==null){if(a=d.tag,a===13){if(a=Qi(d),a!==null){i.blockedOn=a,id(i.priority,function(){rd(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ds(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=oa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Hi=m,d.target.dispatchEvent(m),Hi=null}else return a=yu(d),a!==null&&ia(a),i.blockedOn=d,!1;a.shift()}return!0}function eo(i,a,d){ds(i)&&d.delete(a)}function ld(){nu=!1,Kt!==null&&ds(Kt)&&(Kt=null),mr!==null&&ds(mr)&&(mr=null),gr!==null&&ds(gr)&&(gr=null),Ks.forEach(eo),Qn.forEach(eo)}function yr(i,a){i.blockedOn===a&&(i.blockedOn=null,nu||(nu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ld)))}function vr(i){function a(y){return yr(y,i)}if(0<Lr.length){yr(Lr[0],i);for(var d=1;d<Lr.length;d++){var m=Lr[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Kt!==null&&yr(Kt,i),mr!==null&&yr(mr,i),gr!==null&&yr(gr,i),Ks.forEach(a),Qn.forEach(a),d=0;d<Mr.length;d++)m=Mr[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Mr.length&&(d=Mr[0],d.blockedOn===null);)ad(d),d.blockedOn===null&&Mr.shift()}var hs=W.ReactCurrentBatchConfig,Gs=!0;function ut(i,a,d,m){var y=ze,_=hs.transition;hs.transition=null;try{ze=1,ru(i,a,d,m)}finally{ze=y,hs.transition=_}}function mp(i,a,d,m){var y=ze,_=hs.transition;hs.transition=null;try{ze=4,ru(i,a,d,m)}finally{ze=y,hs.transition=_}}function ru(i,a,d,m){if(Gs){var y=oa(i,a,d,m);if(y===null)kp(i,a,m,to,d),od(i,m);else if(pp(y,i,a,d,m))m.stopPropagation();else if(od(i,m),a&4&&-1<fp.indexOf(i)){for(;y!==null;){var _=yu(y);if(_!==null&&nd(_),_=oa(i,a,d,m),_===null&&kp(i,a,m,to,d),_===y)break;y=_}y!==null&&m.stopPropagation()}else kp(i,a,m,null,d)}}var to=null;function oa(i,a,d,m){if(to=null,i=Qo(m),i=so(i),i!==null)if(a=fr(i),a===null)i=null;else if(d=a.tag,d===13){if(i=Qi(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return to=i,null}function su(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yc()){case Ji:return 1;case Us:return 4;case Gn:case eu:return 16;case Xc:return 536870912;default:return 16}default:return 16}}var Mn=null,aa=null,bn=null;function iu(){if(bn)return bn;var i,a=aa,d=a.length,m,y="value"in Mn?Mn.value:Mn.textContent,_=y.length;for(i=0;i<d&&a[i]===y[i];i++);var k=d-i;for(m=1;m<=k&&a[d-m]===y[_-m];m++);return bn=y.slice(i,1<m?1-m:void 0)}function la(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Vr(){return!0}function ou(){return!1}function Gt(i){function a(d,m,y,_,k){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=_,this.target=k,this.currentTarget=null;for(var L in i)i.hasOwnProperty(L)&&(d=i[L],this[L]=d?d(_):_[L]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Vr:ou,this.isPropagationStopped=ou,this}return fe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Vr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Vr)},persist:function(){},isPersistent:Vr}),a}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Gt(wr),$r=fe({},wr,{view:0,detail:0}),gp=Gt($r),ca,fs,Qs,no=fe({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qs&&(Qs&&i.type==="mousemove"?(ca=i.screenX-Qs.screenX,fs=i.screenY-Qs.screenY):fs=ca=0,Qs=i),ca)},movementY:function(i){return"movementY"in i?i.movementY:fs}}),da=Gt(no),au=fe({},no,{dataTransfer:0}),ud=Gt(au),ha=fe({},$r,{relatedTarget:0}),fa=Gt(ha),cd=fe({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),ps=Gt(cd),dd=fe({},wr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),hd=Gt(dd),fd=fe({},wr,{data:0}),lu=Gt(fd),pa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function md(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=pd[i])?!!a[i]:!1}function Fr(){return md}var f=fe({},$r,{key:function(i){if(i.key){var a=pa[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=la(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(i){return i.type==="keypress"?la(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?la(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),x=Gt(f),T=fe({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Gt(T),G=fe({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Z=Gt(G),de=fe({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ye=Gt(de),jt=fe({},no,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Gt(jt),Ft=[9,13,27,32],Ct=u&&"CompositionEvent"in window,Jn=null;u&&"documentMode"in document&&(Jn=document.documentMode);var Vn=u&&"TextEvent"in window&&!Jn,ro=u&&(!Ct||Jn&&8<Jn&&11>=Jn),ma=" ",Fv=!1;function Uv(i,a){switch(i){case"keyup":return Ft.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ga=!1;function h1(i,a){switch(i){case"compositionend":return Bv(a);case"keypress":return a.which!==32?null:(Fv=!0,ma);case"textInput":return i=a.data,i===ma&&Fv?null:i;default:return null}}function f1(i,a){if(ga)return i==="compositionend"||!Ct&&Uv(i,a)?(i=iu(),bn=aa=Mn=null,ga=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ro&&a.locale!=="ko"?null:a.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!p1[i.type]:a==="textarea"}function Wv(i,a,d,m){Or(m),a=xd(a,"onChange"),0<a.length&&(d=new ua("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var uu=null,cu=null;function m1(i){lw(i,0)}function gd(i){var a=_a(i);if(He(a))return i}function g1(i,a){if(i==="change")return a}var Hv=!1;if(u){var yp;if(u){var vp="oninput"in document;if(!vp){var qv=document.createElement("div");qv.setAttribute("oninput","return;"),vp=typeof qv.oninput=="function"}yp=vp}else yp=!1;Hv=yp&&(!document.documentMode||9<document.documentMode)}function Kv(){uu&&(uu.detachEvent("onpropertychange",Gv),cu=uu=null)}function Gv(i){if(i.propertyName==="value"&&gd(cu)){var a=[];Wv(a,cu,i,Qo(i)),Jl(m1,a)}}function y1(i,a,d){i==="focusin"?(Kv(),uu=a,cu=d,uu.attachEvent("onpropertychange",Gv)):i==="focusout"&&Kv()}function v1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gd(cu)}function w1(i,a){if(i==="click")return gd(a)}function x1(i,a){if(i==="input"||i==="change")return gd(a)}function _1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var xr=typeof Object.is=="function"?Object.is:_1;function du(i,a){if(xr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!c.call(a,y)||!xr(i[y],a[y]))return!1}return!0}function Qv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jv(i,a){var d=Qv(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Qv(d)}}function Yv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Yv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Xv(){for(var i=window,a=It();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=It(i.document)}return a}function wp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function b1(i){var a=Xv(),d=i.focusedElem,m=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&Yv(d.ownerDocument.documentElement,d)){if(m!==null&&wp(d)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=d.textContent.length,_=Math.min(m.start,y);m=m.end===void 0?_:Math.min(m.end,y),!i.extend&&_>m&&(y=m,m=_,_=y),y=Jv(d,_);var k=Jv(d,m);y&&k&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),_>m?(i.addRange(a),i.extend(k.node,k.offset)):(a.setEnd(k.node,k.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var E1=u&&"documentMode"in document&&11>=document.documentMode,ya=null,xp=null,hu=null,_p=!1;function Zv(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;_p||ya==null||ya!==It(m)||(m=ya,"selectionStart"in m&&wp(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hu&&du(hu,m)||(hu=m,m=xd(xp,"onSelect"),0<m.length&&(a=new ua("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=ya)))}function yd(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var va={animationend:yd("Animation","AnimationEnd"),animationiteration:yd("Animation","AnimationIteration"),animationstart:yd("Animation","AnimationStart"),transitionend:yd("Transition","TransitionEnd")},bp={},ew={};u&&(ew=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function vd(i){if(bp[i])return bp[i];if(!va[i])return i;var a=va[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in ew)return bp[i]=a[d];return i}var tw=vd("animationend"),nw=vd("animationiteration"),rw=vd("animationstart"),sw=vd("transitionend"),iw=new Map,ow="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(i,a){iw.set(i,a),o(a,[i])}for(var Ep=0;Ep<ow.length;Ep++){var Tp=ow[Ep],T1=Tp.toLowerCase(),S1=Tp[0].toUpperCase()+Tp.slice(1);Js(T1,"on"+S1)}Js(tw,"onAnimationEnd"),Js(nw,"onAnimationIteration"),Js(rw,"onAnimationStart"),Js("dblclick","onDoubleClick"),Js("focusin","onFocus"),Js("focusout","onBlur"),Js(sw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k1=new Set("cancel close invalid load scroll toggle".split(" ").concat(fu));function aw(i,a,d){var m=i.type||"unknown-event";i.currentTarget=d,Gc(m,a,void 0,i),i.currentTarget=null}function lw(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],y=m.event;m=m.listeners;e:{var _=void 0;if(a)for(var k=m.length-1;0<=k;k--){var L=m[k],U=L.instance,X=L.currentTarget;if(L=L.listener,U!==_&&y.isPropagationStopped())break e;aw(y,L,X),_=U}else for(k=0;k<m.length;k++){if(L=m[k],U=L.instance,X=L.currentTarget,L=L.listener,U!==_&&y.isPropagationStopped())break e;aw(y,L,X),_=U}}}if(hr)throw i=Yl,hr=!1,Yl=null,i}function at(i,a){var d=a[Np];d===void 0&&(d=a[Np]=new Set);var m=i+"__bubble";d.has(m)||(uw(a,i,2,!1),d.add(m))}function Sp(i,a,d){var m=0;a&&(m|=4),uw(d,i,m,a)}var wd="_reactListening"+Math.random().toString(36).slice(2);function pu(i){if(!i[wd]){i[wd]=!0,r.forEach(function(d){d!=="selectionchange"&&(k1.has(d)||Sp(d,!1,i),Sp(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[wd]||(a[wd]=!0,Sp("selectionchange",!1,a))}}function uw(i,a,d,m){switch(su(a)){case 1:var y=ut;break;case 4:y=mp;break;default:y=ru}d=y.bind(null,a,d,i),y=void 0,!Xo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(a,d,{capture:!0,passive:y}):i.addEventListener(a,d,!0):y!==void 0?i.addEventListener(a,d,{passive:y}):i.addEventListener(a,d,!1)}function kp(i,a,d,m,y){var _=m;if(!(a&1)&&!(a&2)&&m!==null)e:for(;;){if(m===null)return;var k=m.tag;if(k===3||k===4){var L=m.stateNode.containerInfo;if(L===y||L.nodeType===8&&L.parentNode===y)break;if(k===4)for(k=m.return;k!==null;){var U=k.tag;if((U===3||U===4)&&(U=k.stateNode.containerInfo,U===y||U.nodeType===8&&U.parentNode===y))return;k=k.return}for(;L!==null;){if(k=so(L),k===null)return;if(U=k.tag,U===5||U===6){m=_=k;continue e}L=L.parentNode}}m=m.return}Jl(function(){var X=_,oe=Qo(d),ue=[];e:{var se=iw.get(i);if(se!==void 0){var ye=ua,_e=i;switch(i){case"keypress":if(la(d)===0)break e;case"keydown":case"keyup":ye=x;break;case"focusin":_e="focus",ye=fa;break;case"focusout":_e="blur",ye=fa;break;case"beforeblur":case"afterblur":ye=fa;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=ud;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=Z;break;case tw:case nw:case rw:ye=ps;break;case sw:ye=Ye;break;case"scroll":ye=gp;break;case"wheel":ye=qe;break;case"copy":case"cut":case"paste":ye=hd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=N}var be=(a&4)!==0,Et=!be&&i==="scroll",J=be?se!==null?se+"Capture":null:se;be=[];for(var z=X,Y;z!==null;){Y=z;var ce=Y.stateNode;if(Y.tag===5&&ce!==null&&(Y=ce,J!==null&&(ce=bt(z,J),ce!=null&&be.push(mu(z,ce,Y)))),Et)break;z=z.return}0<be.length&&(se=new ye(se,_e,null,d,oe),ue.push({event:se,listeners:be}))}}if(!(a&7)){e:{if(se=i==="mouseover"||i==="pointerover",ye=i==="mouseout"||i==="pointerout",se&&d!==Hi&&(_e=d.relatedTarget||d.fromElement)&&(so(_e)||_e[ms]))break e;if((ye||se)&&(se=oe.window===oe?oe:(se=oe.ownerDocument)?se.defaultView||se.parentWindow:window,ye?(_e=d.relatedTarget||d.toElement,ye=X,_e=_e?so(_e):null,_e!==null&&(Et=fr(_e),_e!==Et||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(ye=null,_e=X),ye!==_e)){if(be=da,ce="onMouseLeave",J="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(be=N,ce="onPointerLeave",J="onPointerEnter",z="pointer"),Et=ye==null?se:_a(ye),Y=_e==null?se:_a(_e),se=new be(ce,z+"leave",ye,d,oe),se.target=Et,se.relatedTarget=Y,ce=null,so(oe)===X&&(be=new be(J,z+"enter",_e,d,oe),be.target=Y,be.relatedTarget=Et,ce=be),Et=ce,ye&&_e)t:{for(be=ye,J=_e,z=0,Y=be;Y;Y=wa(Y))z++;for(Y=0,ce=J;ce;ce=wa(ce))Y++;for(;0<z-Y;)be=wa(be),z--;for(;0<Y-z;)J=wa(J),Y--;for(;z--;){if(be===J||J!==null&&be===J.alternate)break t;be=wa(be),J=wa(J)}be=null}else be=null;ye!==null&&cw(ue,se,ye,be,!1),_e!==null&&Et!==null&&cw(ue,Et,_e,be,!0)}}e:{if(se=X?_a(X):window,ye=se.nodeName&&se.nodeName.toLowerCase(),ye==="select"||ye==="input"&&se.type==="file")var Te=g1;else if(zv(se))if(Hv)Te=x1;else{Te=v1;var Ce=y1}else(ye=se.nodeName)&&ye.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Te=w1);if(Te&&(Te=Te(i,X))){Wv(ue,Te,d,oe);break e}Ce&&Ce(i,se,X),i==="focusout"&&(Ce=se._wrapperState)&&Ce.controlled&&se.type==="number"&&qo(se,"number",se.value)}switch(Ce=X?_a(X):window,i){case"focusin":(zv(Ce)||Ce.contentEditable==="true")&&(ya=Ce,xp=X,hu=null);break;case"focusout":hu=xp=ya=null;break;case"mousedown":_p=!0;break;case"contextmenu":case"mouseup":case"dragend":_p=!1,Zv(ue,d,oe);break;case"selectionchange":if(E1)break;case"keydown":case"keyup":Zv(ue,d,oe)}var Pe;if(Ct)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ga?Uv(i,d)&&(je="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(je="onCompositionStart");je&&(ro&&d.locale!=="ko"&&(ga||je!=="onCompositionStart"?je==="onCompositionEnd"&&ga&&(Pe=iu()):(Mn=oe,aa="value"in Mn?Mn.value:Mn.textContent,ga=!0)),Ce=xd(X,je),0<Ce.length&&(je=new lu(je,i,null,d,oe),ue.push({event:je,listeners:Ce}),Pe?je.data=Pe:(Pe=Bv(d),Pe!==null&&(je.data=Pe)))),(Pe=Vn?h1(i,d):f1(i,d))&&(X=xd(X,"onBeforeInput"),0<X.length&&(oe=new lu("onBeforeInput","beforeinput",null,d,oe),ue.push({event:oe,listeners:X}),oe.data=Pe))}lw(ue,a)})}function mu(i,a,d){return{instance:i,listener:a,currentTarget:d}}function xd(i,a){for(var d=a+"Capture",m=[];i!==null;){var y=i,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=bt(i,d),_!=null&&m.unshift(mu(i,_,y)),_=bt(i,a),_!=null&&m.push(mu(i,_,y))),i=i.return}return m}function wa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function cw(i,a,d,m,y){for(var _=a._reactName,k=[];d!==null&&d!==m;){var L=d,U=L.alternate,X=L.stateNode;if(U!==null&&U===m)break;L.tag===5&&X!==null&&(L=X,y?(U=bt(d,_),U!=null&&k.unshift(mu(d,U,L))):y||(U=bt(d,_),U!=null&&k.push(mu(d,U,L)))),d=d.return}k.length!==0&&i.push({event:a,listeners:k})}var C1=/\r\n?/g,P1=/\u0000|\uFFFD/g;function dw(i){return(typeof i=="string"?i:""+i).replace(C1,`
`).replace(P1,"")}function _d(i,a,d){if(a=dw(a),dw(i)!==a&&d)throw Error(t(425))}function bd(){}var Cp=null,Pp=null;function Ap(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ip=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,I1=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(i){return hw.resolve(null).then(i).catch(R1)}:Ip;function R1(i){setTimeout(function(){throw i})}function Rp(i,a){var d=a,m=0;do{var y=d.nextSibling;if(i.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(m===0){i.removeChild(y),vr(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=y}while(d);vr(a)}function Ys(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function fw(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var xa=Math.random().toString(36).slice(2),Ur="__reactFiber$"+xa,gu="__reactProps$"+xa,ms="__reactContainer$"+xa,Np="__reactEvents$"+xa,N1="__reactListeners$"+xa,j1="__reactHandles$"+xa;function so(i){var a=i[Ur];if(a)return a;for(var d=i.parentNode;d;){if(a=d[ms]||d[Ur]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=fw(i);i!==null;){if(d=i[Ur])return d;i=fw(i)}return a}i=d,d=i.parentNode}return null}function yu(i){return i=i[Ur]||i[ms],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _a(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ed(i){return i[gu]||null}var jp=[],ba=-1;function Xs(i){return{current:i}}function lt(i){0>ba||(i.current=jp[ba],jp[ba]=null,ba--)}function rt(i,a){ba++,jp[ba]=i.current,i.current=a}var Zs={},sn=Xs(Zs),En=Xs(!1),io=Zs;function Ea(i,a){var d=i.type.contextTypes;if(!d)return Zs;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in d)y[_]=a[_];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Tn(i){return i=i.childContextTypes,i!=null}function Td(){lt(En),lt(sn)}function pw(i,a,d){if(sn.current!==Zs)throw Error(t(168));rt(sn,a),rt(En,d)}function mw(i,a,d){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(t(108,Q(i)||"Unknown",y));return fe({},d,m)}function Sd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Zs,io=sn.current,rt(sn,i),rt(En,En.current),!0}function gw(i,a,d){var m=i.stateNode;if(!m)throw Error(t(169));d?(i=mw(i,a,io),m.__reactInternalMemoizedMergedChildContext=i,lt(En),lt(sn),rt(sn,i)):lt(En),rt(En,d)}var gs=null,kd=!1,Dp=!1;function yw(i){gs===null?gs=[i]:gs.push(i)}function D1(i){kd=!0,yw(i)}function ei(){if(!Dp&&gs!==null){Dp=!0;var i=0,a=ze;try{var d=gs;for(ze=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}gs=null,kd=!1}catch(y){throw gs!==null&&(gs=gs.slice(i+1)),na(Ji,ei),y}finally{ze=a,Dp=!1}}return null}var Ta=[],Sa=0,Cd=null,Pd=0,Yn=[],Xn=0,oo=null,ys=1,vs="";function ao(i,a){Ta[Sa++]=Pd,Ta[Sa++]=Cd,Cd=i,Pd=a}function vw(i,a,d){Yn[Xn++]=ys,Yn[Xn++]=vs,Yn[Xn++]=oo,oo=i;var m=ys;i=vs;var y=32-mn(m)-1;m&=~(1<<y),d+=1;var _=32-mn(a)+y;if(30<_){var k=y-y%5;_=(m&(1<<k)-1).toString(32),m>>=k,y-=k,ys=1<<32-mn(a)+y|d<<y|m,vs=_+i}else ys=1<<_|d<<y|m,vs=i}function Op(i){i.return!==null&&(ao(i,1),vw(i,1,0))}function Lp(i){for(;i===Cd;)Cd=Ta[--Sa],Ta[Sa]=null,Pd=Ta[--Sa],Ta[Sa]=null;for(;i===oo;)oo=Yn[--Xn],Yn[Xn]=null,vs=Yn[--Xn],Yn[Xn]=null,ys=Yn[--Xn],Yn[Xn]=null}var $n=null,Fn=null,ct=!1,_r=null;function ww(i,a){var d=nr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function xw(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,$n=i,Fn=Ys(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,$n=i,Fn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=oo!==null?{id:ys,overflow:vs}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=nr(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,$n=i,Fn=null,!0):!1;default:return!1}}function Mp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Vp(i){if(ct){var a=Fn;if(a){var d=a;if(!xw(i,a)){if(Mp(i))throw Error(t(418));a=Ys(d.nextSibling);var m=$n;a&&xw(i,a)?ww(m,d):(i.flags=i.flags&-4097|2,ct=!1,$n=i)}}else{if(Mp(i))throw Error(t(418));i.flags=i.flags&-4097|2,ct=!1,$n=i}}}function _w(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;$n=i}function Ad(i){if(i!==$n)return!1;if(!ct)return _w(i),ct=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Ap(i.type,i.memoizedProps)),a&&(a=Fn)){if(Mp(i))throw bw(),Error(t(418));for(;a;)ww(i,a),a=Ys(a.nextSibling)}if(_w(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){Fn=Ys(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}Fn=null}}else Fn=$n?Ys(i.stateNode.nextSibling):null;return!0}function bw(){for(var i=Fn;i;)i=Ys(i.nextSibling)}function ka(){Fn=$n=null,ct=!1}function $p(i){_r===null?_r=[i]:_r.push(i)}var O1=W.ReactCurrentBatchConfig;function vu(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(t(309));var m=d.stateNode}if(!m)throw Error(t(147,i));var y=m,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(k){var L=y.refs;k===null?delete L[_]:L[_]=k},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!d._owner)throw Error(t(290,i))}return i}function Id(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Ew(i){var a=i._init;return a(i._payload)}function Tw(i){function a(J,z){if(i){var Y=J.deletions;Y===null?(J.deletions=[z],J.flags|=16):Y.push(z)}}function d(J,z){if(!i)return null;for(;z!==null;)a(J,z),z=z.sibling;return null}function m(J,z){for(J=new Map;z!==null;)z.key!==null?J.set(z.key,z):J.set(z.index,z),z=z.sibling;return J}function y(J,z){return J=li(J,z),J.index=0,J.sibling=null,J}function _(J,z,Y){return J.index=Y,i?(Y=J.alternate,Y!==null?(Y=Y.index,Y<z?(J.flags|=2,z):Y):(J.flags|=2,z)):(J.flags|=1048576,z)}function k(J){return i&&J.alternate===null&&(J.flags|=2),J}function L(J,z,Y,ce){return z===null||z.tag!==6?(z=Im(Y,J.mode,ce),z.return=J,z):(z=y(z,Y),z.return=J,z)}function U(J,z,Y,ce){var Te=Y.type;return Te===I?oe(J,z,Y.props.children,ce,Y.key):z!==null&&(z.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Se&&Ew(Te)===z.type)?(ce=y(z,Y.props),ce.ref=vu(J,z,Y),ce.return=J,ce):(ce=eh(Y.type,Y.key,Y.props,null,J.mode,ce),ce.ref=vu(J,z,Y),ce.return=J,ce)}function X(J,z,Y,ce){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=Rm(Y,J.mode,ce),z.return=J,z):(z=y(z,Y.children||[]),z.return=J,z)}function oe(J,z,Y,ce,Te){return z===null||z.tag!==7?(z=go(Y,J.mode,ce,Te),z.return=J,z):(z=y(z,Y),z.return=J,z)}function ue(J,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number")return z=Im(""+z,J.mode,Y),z.return=J,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case H:return Y=eh(z.type,z.key,z.props,null,J.mode,Y),Y.ref=vu(J,null,z),Y.return=J,Y;case F:return z=Rm(z,J.mode,Y),z.return=J,z;case Se:var ce=z._init;return ue(J,ce(z._payload),Y)}if(os(z)||me(z))return z=go(z,J.mode,Y,null),z.return=J,z;Id(J,z)}return null}function se(J,z,Y,ce){var Te=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Te!==null?null:L(J,z,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:return Y.key===Te?U(J,z,Y,ce):null;case F:return Y.key===Te?X(J,z,Y,ce):null;case Se:return Te=Y._init,se(J,z,Te(Y._payload),ce)}if(os(Y)||me(Y))return Te!==null?null:oe(J,z,Y,ce,null);Id(J,Y)}return null}function ye(J,z,Y,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return J=J.get(Y)||null,L(z,J,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case H:return J=J.get(ce.key===null?Y:ce.key)||null,U(z,J,ce,Te);case F:return J=J.get(ce.key===null?Y:ce.key)||null,X(z,J,ce,Te);case Se:var Ce=ce._init;return ye(J,z,Y,Ce(ce._payload),Te)}if(os(ce)||me(ce))return J=J.get(Y)||null,oe(z,J,ce,Te,null);Id(z,ce)}return null}function _e(J,z,Y,ce){for(var Te=null,Ce=null,Pe=z,je=z=0,zt=null;Pe!==null&&je<Y.length;je++){Pe.index>je?(zt=Pe,Pe=null):zt=Pe.sibling;var Qe=se(J,Pe,Y[je],ce);if(Qe===null){Pe===null&&(Pe=zt);break}i&&Pe&&Qe.alternate===null&&a(J,Pe),z=_(Qe,z,je),Ce===null?Te=Qe:Ce.sibling=Qe,Ce=Qe,Pe=zt}if(je===Y.length)return d(J,Pe),ct&&ao(J,je),Te;if(Pe===null){for(;je<Y.length;je++)Pe=ue(J,Y[je],ce),Pe!==null&&(z=_(Pe,z,je),Ce===null?Te=Pe:Ce.sibling=Pe,Ce=Pe);return ct&&ao(J,je),Te}for(Pe=m(J,Pe);je<Y.length;je++)zt=ye(Pe,J,je,Y[je],ce),zt!==null&&(i&&zt.alternate!==null&&Pe.delete(zt.key===null?je:zt.key),z=_(zt,z,je),Ce===null?Te=zt:Ce.sibling=zt,Ce=zt);return i&&Pe.forEach(function(ui){return a(J,ui)}),ct&&ao(J,je),Te}function be(J,z,Y,ce){var Te=me(Y);if(typeof Te!="function")throw Error(t(150));if(Y=Te.call(Y),Y==null)throw Error(t(151));for(var Ce=Te=null,Pe=z,je=z=0,zt=null,Qe=Y.next();Pe!==null&&!Qe.done;je++,Qe=Y.next()){Pe.index>je?(zt=Pe,Pe=null):zt=Pe.sibling;var ui=se(J,Pe,Qe.value,ce);if(ui===null){Pe===null&&(Pe=zt);break}i&&Pe&&ui.alternate===null&&a(J,Pe),z=_(ui,z,je),Ce===null?Te=ui:Ce.sibling=ui,Ce=ui,Pe=zt}if(Qe.done)return d(J,Pe),ct&&ao(J,je),Te;if(Pe===null){for(;!Qe.done;je++,Qe=Y.next())Qe=ue(J,Qe.value,ce),Qe!==null&&(z=_(Qe,z,je),Ce===null?Te=Qe:Ce.sibling=Qe,Ce=Qe);return ct&&ao(J,je),Te}for(Pe=m(J,Pe);!Qe.done;je++,Qe=Y.next())Qe=ye(Pe,J,je,Qe.value,ce),Qe!==null&&(i&&Qe.alternate!==null&&Pe.delete(Qe.key===null?je:Qe.key),z=_(Qe,z,je),Ce===null?Te=Qe:Ce.sibling=Qe,Ce=Qe);return i&&Pe.forEach(function(pI){return a(J,pI)}),ct&&ao(J,je),Te}function Et(J,z,Y,ce){if(typeof Y=="object"&&Y!==null&&Y.type===I&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case H:e:{for(var Te=Y.key,Ce=z;Ce!==null;){if(Ce.key===Te){if(Te=Y.type,Te===I){if(Ce.tag===7){d(J,Ce.sibling),z=y(Ce,Y.props.children),z.return=J,J=z;break e}}else if(Ce.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Se&&Ew(Te)===Ce.type){d(J,Ce.sibling),z=y(Ce,Y.props),z.ref=vu(J,Ce,Y),z.return=J,J=z;break e}d(J,Ce);break}else a(J,Ce);Ce=Ce.sibling}Y.type===I?(z=go(Y.props.children,J.mode,ce,Y.key),z.return=J,J=z):(ce=eh(Y.type,Y.key,Y.props,null,J.mode,ce),ce.ref=vu(J,z,Y),ce.return=J,J=ce)}return k(J);case F:e:{for(Ce=Y.key;z!==null;){if(z.key===Ce)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){d(J,z.sibling),z=y(z,Y.children||[]),z.return=J,J=z;break e}else{d(J,z);break}else a(J,z);z=z.sibling}z=Rm(Y,J.mode,ce),z.return=J,J=z}return k(J);case Se:return Ce=Y._init,Et(J,z,Ce(Y._payload),ce)}if(os(Y))return _e(J,z,Y,ce);if(me(Y))return be(J,z,Y,ce);Id(J,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,z!==null&&z.tag===6?(d(J,z.sibling),z=y(z,Y),z.return=J,J=z):(d(J,z),z=Im(Y,J.mode,ce),z.return=J,J=z),k(J)):d(J,z)}return Et}var Ca=Tw(!0),Sw=Tw(!1),Rd=Xs(null),Nd=null,Pa=null,Fp=null;function Up(){Fp=Pa=Nd=null}function Bp(i){var a=Rd.current;lt(Rd),i._currentValue=a}function zp(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function Aa(i,a){Nd=i,Fp=Pa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(Sn=!0),i.firstContext=null)}function Zn(i){var a=i._currentValue;if(Fp!==i)if(i={context:i,memoizedValue:a,next:null},Pa===null){if(Nd===null)throw Error(t(308));Pa=i,Nd.dependencies={lanes:0,firstContext:i}}else Pa=Pa.next=i;return a}var lo=null;function Wp(i){lo===null?lo=[i]:lo.push(i)}function kw(i,a,d,m){var y=a.interleaved;return y===null?(d.next=d,Wp(a)):(d.next=y.next,y.next=d),a.interleaved=d,ws(i,m)}function ws(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var ti=!1;function Hp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cw(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function xs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ni(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,Ge&2){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,ws(i,d)}return y=m.interleaved,y===null?(a.next=a,Wp(m)):(a.next=y.next,y.next=a),m.interleaved=a,ws(i,d)}function jd(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Hs(i,d)}}function Pw(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var k={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?y=_=k:_=_.next=k,d=d.next}while(d!==null);_===null?y=_=a:_=_.next=a}else y=_=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function Dd(i,a,d,m){var y=i.updateQueue;ti=!1;var _=y.firstBaseUpdate,k=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var U=L,X=U.next;U.next=null,k===null?_=X:k.next=X,k=U;var oe=i.alternate;oe!==null&&(oe=oe.updateQueue,L=oe.lastBaseUpdate,L!==k&&(L===null?oe.firstBaseUpdate=X:L.next=X,oe.lastBaseUpdate=U))}if(_!==null){var ue=y.baseState;k=0,oe=X=U=null,L=_;do{var se=L.lane,ye=L.eventTime;if((m&se)===se){oe!==null&&(oe=oe.next={eventTime:ye,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var _e=i,be=L;switch(se=a,ye=d,be.tag){case 1:if(_e=be.payload,typeof _e=="function"){ue=_e.call(ye,ue,se);break e}ue=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=be.payload,se=typeof _e=="function"?_e.call(ye,ue,se):_e,se==null)break e;ue=fe({},ue,se);break e;case 2:ti=!0}}L.callback!==null&&L.lane!==0&&(i.flags|=64,se=y.effects,se===null?y.effects=[L]:se.push(L))}else ye={eventTime:ye,lane:se,tag:L.tag,payload:L.payload,callback:L.callback,next:null},oe===null?(X=oe=ye,U=ue):oe=oe.next=ye,k|=se;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;se=L,L=se.next,se.next=null,y.lastBaseUpdate=se,y.shared.pending=null}}while(!0);if(oe===null&&(U=ue),y.baseState=U,y.firstBaseUpdate=X,y.lastBaseUpdate=oe,a=y.shared.interleaved,a!==null){y=a;do k|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);ho|=k,i.lanes=k,i.memoizedState=ue}}function Aw(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],y=m.callback;if(y!==null){if(m.callback=null,m=d,typeof y!="function")throw Error(t(191,y));y.call(m)}}}var wu={},Br=Xs(wu),xu=Xs(wu),_u=Xs(wu);function uo(i){if(i===wu)throw Error(t(174));return i}function qp(i,a){switch(rt(_u,a),rt(xu,i),rt(Br,wu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Nt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Nt(a,i)}lt(Br),rt(Br,a)}function Ia(){lt(Br),lt(xu),lt(_u)}function Iw(i){uo(_u.current);var a=uo(Br.current),d=Nt(a,i.type);a!==d&&(rt(xu,i),rt(Br,d))}function Kp(i){xu.current===i&&(lt(Br),lt(xu))}var ft=Xs(0);function Od(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Gp=[];function Qp(){for(var i=0;i<Gp.length;i++)Gp[i]._workInProgressVersionPrimary=null;Gp.length=0}var Ld=W.ReactCurrentDispatcher,Jp=W.ReactCurrentBatchConfig,co=0,pt=null,Dt=null,Ut=null,Md=!1,bu=!1,Eu=0,L1=0;function on(){throw Error(t(321))}function Yp(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!xr(i[d],a[d]))return!1;return!0}function Xp(i,a,d,m,y,_){if(co=_,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ld.current=i===null||i.memoizedState===null?F1:U1,i=d(m,y),bu){_=0;do{if(bu=!1,Eu=0,25<=_)throw Error(t(301));_+=1,Ut=Dt=null,a.updateQueue=null,Ld.current=B1,i=d(m,y)}while(bu)}if(Ld.current=Fd,a=Dt!==null&&Dt.next!==null,co=0,Ut=Dt=pt=null,Md=!1,a)throw Error(t(300));return i}function Zp(){var i=Eu!==0;return Eu=0,i}function zr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?pt.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function er(){if(Dt===null){var i=pt.alternate;i=i!==null?i.memoizedState:null}else i=Dt.next;var a=Ut===null?pt.memoizedState:Ut.next;if(a!==null)Ut=a,Dt=i;else{if(i===null)throw Error(t(310));Dt=i,i={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ut===null?pt.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function Tu(i,a){return typeof a=="function"?a(i):a}function em(i){var a=er(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=Dt,y=m.baseQueue,_=d.pending;if(_!==null){if(y!==null){var k=y.next;y.next=_.next,_.next=k}m.baseQueue=y=_,d.pending=null}if(y!==null){_=y.next,m=m.baseState;var L=k=null,U=null,X=_;do{var oe=X.lane;if((co&oe)===oe)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),m=X.hasEagerState?X.eagerState:i(m,X.action);else{var ue={lane:oe,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(L=U=ue,k=m):U=U.next=ue,pt.lanes|=oe,ho|=oe}X=X.next}while(X!==null&&X!==_);U===null?k=m:U.next=L,xr(m,a.memoizedState)||(Sn=!0),a.memoizedState=m,a.baseState=k,a.baseQueue=U,d.lastRenderedState=m}if(i=d.interleaved,i!==null){y=i;do _=y.lane,pt.lanes|=_,ho|=_,y=y.next;while(y!==i)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function tm(i){var a=er(),d=a.queue;if(d===null)throw Error(t(311));d.lastRenderedReducer=i;var m=d.dispatch,y=d.pending,_=a.memoizedState;if(y!==null){d.pending=null;var k=y=y.next;do _=i(_,k.action),k=k.next;while(k!==y);xr(_,a.memoizedState)||(Sn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),d.lastRenderedState=_}return[_,m]}function Rw(){}function Nw(i,a){var d=pt,m=er(),y=a(),_=!xr(m.memoizedState,y);if(_&&(m.memoizedState=y,Sn=!0),m=m.queue,nm(Ow.bind(null,d,m,i),[i]),m.getSnapshot!==a||_||Ut!==null&&Ut.memoizedState.tag&1){if(d.flags|=2048,Su(9,Dw.bind(null,d,m,y,a),void 0,null),Bt===null)throw Error(t(349));co&30||jw(d,a,y)}return y}function jw(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function Dw(i,a,d,m){a.value=d,a.getSnapshot=m,Lw(a)&&Mw(i)}function Ow(i,a,d){return d(function(){Lw(a)&&Mw(i)})}function Lw(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!xr(i,d)}catch{return!0}}function Mw(i){var a=ws(i,1);a!==null&&Sr(a,i,1,-1)}function Vw(i){var a=zr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:i},a.queue=i,i=i.dispatch=$1.bind(null,pt,i),[a.memoizedState,i]}function Su(i,a,d,m){return i={tag:i,create:a,destroy:d,deps:m,next:null},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i)),i}function $w(){return er().memoizedState}function Vd(i,a,d,m){var y=zr();pt.flags|=i,y.memoizedState=Su(1|a,d,void 0,m===void 0?null:m)}function $d(i,a,d,m){var y=er();m=m===void 0?null:m;var _=void 0;if(Dt!==null){var k=Dt.memoizedState;if(_=k.destroy,m!==null&&Yp(m,k.deps)){y.memoizedState=Su(a,d,_,m);return}}pt.flags|=i,y.memoizedState=Su(1|a,d,_,m)}function Fw(i,a){return Vd(8390656,8,i,a)}function nm(i,a){return $d(2048,8,i,a)}function Uw(i,a){return $d(4,2,i,a)}function Bw(i,a){return $d(4,4,i,a)}function zw(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Ww(i,a,d){return d=d!=null?d.concat([i]):null,$d(4,4,zw.bind(null,a,i),d)}function rm(){}function Hw(i,a){var d=er();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Yp(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function qw(i,a){var d=er();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&Yp(a,m[1])?m[0]:(i=i(),d.memoizedState=[i,a],i)}function Kw(i,a,d){return co&21?(xr(d,a)||(d=Zi(),pt.lanes|=d,ho|=d,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,Sn=!0),i.memoizedState=d)}function M1(i,a){var d=ze;ze=d!==0&&4>d?d:4,i(!0);var m=Jp.transition;Jp.transition={};try{i(!1),a()}finally{ze=d,Jp.transition=m}}function Gw(){return er().memoizedState}function V1(i,a,d){var m=oi(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},Qw(i))Jw(a,d);else if(d=kw(i,a,d,m),d!==null){var y=vn();Sr(d,i,m,y),Yw(d,a,m)}}function $1(i,a,d){var m=oi(i),y={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(Qw(i))Jw(a,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var k=a.lastRenderedState,L=_(k,d);if(y.hasEagerState=!0,y.eagerState=L,xr(L,k)){var U=a.interleaved;U===null?(y.next=y,Wp(a)):(y.next=U.next,U.next=y),a.interleaved=y;return}}catch{}finally{}d=kw(i,a,y,m),d!==null&&(y=vn(),Sr(d,i,m,y),Yw(d,a,m))}}function Qw(i){var a=i.alternate;return i===pt||a!==null&&a===pt}function Jw(i,a){bu=Md=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function Yw(i,a,d){if(d&4194240){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,Hs(i,d)}}var Fd={readContext:Zn,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},F1={readContext:Zn,useCallback:function(i,a){return zr().memoizedState=[i,a===void 0?null:a],i},useContext:Zn,useEffect:Fw,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,Vd(4194308,4,zw.bind(null,a,i),d)},useLayoutEffect:function(i,a){return Vd(4194308,4,i,a)},useInsertionEffect:function(i,a){return Vd(4,2,i,a)},useMemo:function(i,a){var d=zr();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var m=zr();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=V1.bind(null,pt,i),[m.memoizedState,i]},useRef:function(i){var a=zr();return i={current:i},a.memoizedState=i},useState:Vw,useDebugValue:rm,useDeferredValue:function(i){return zr().memoizedState=i},useTransition:function(){var i=Vw(!1),a=i[0];return i=M1.bind(null,i[1]),zr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var m=pt,y=zr();if(ct){if(d===void 0)throw Error(t(407));d=d()}else{if(d=a(),Bt===null)throw Error(t(349));co&30||jw(m,a,d)}y.memoizedState=d;var _={value:d,getSnapshot:a};return y.queue=_,Fw(Ow.bind(null,m,_,i),[i]),m.flags|=2048,Su(9,Dw.bind(null,m,_,d,a),void 0,null),d},useId:function(){var i=zr(),a=Bt.identifierPrefix;if(ct){var d=vs,m=ys;d=(m&~(1<<32-mn(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Eu++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=L1++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},U1={readContext:Zn,useCallback:Hw,useContext:Zn,useEffect:nm,useImperativeHandle:Ww,useInsertionEffect:Uw,useLayoutEffect:Bw,useMemo:qw,useReducer:em,useRef:$w,useState:function(){return em(Tu)},useDebugValue:rm,useDeferredValue:function(i){var a=er();return Kw(a,Dt.memoizedState,i)},useTransition:function(){var i=em(Tu)[0],a=er().memoizedState;return[i,a]},useMutableSource:Rw,useSyncExternalStore:Nw,useId:Gw,unstable_isNewReconciler:!1},B1={readContext:Zn,useCallback:Hw,useContext:Zn,useEffect:nm,useImperativeHandle:Ww,useInsertionEffect:Uw,useLayoutEffect:Bw,useMemo:qw,useReducer:tm,useRef:$w,useState:function(){return tm(Tu)},useDebugValue:rm,useDeferredValue:function(i){var a=er();return Dt===null?a.memoizedState=i:Kw(a,Dt.memoizedState,i)},useTransition:function(){var i=tm(Tu)[0],a=er().memoizedState;return[i,a]},useMutableSource:Rw,useSyncExternalStore:Nw,useId:Gw,unstable_isNewReconciler:!1};function br(i,a){if(i&&i.defaultProps){a=fe({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function sm(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:fe({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Ud={isMounted:function(i){return(i=i._reactInternals)?fr(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var m=vn(),y=oi(i),_=xs(m,y);_.payload=a,d!=null&&(_.callback=d),a=ni(i,_,y),a!==null&&(Sr(a,i,y,m),jd(a,i,y))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=vn(),y=oi(i),_=xs(m,y);_.tag=1,_.payload=a,d!=null&&(_.callback=d),a=ni(i,_,y),a!==null&&(Sr(a,i,y,m),jd(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=vn(),m=oi(i),y=xs(d,m);y.tag=2,a!=null&&(y.callback=a),a=ni(i,y,m),a!==null&&(Sr(a,i,m,d),jd(a,i,m))}};function Xw(i,a,d,m,y,_,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,k):a.prototype&&a.prototype.isPureReactComponent?!du(d,m)||!du(y,_):!0}function Zw(i,a,d){var m=!1,y=Zs,_=a.contextType;return typeof _=="object"&&_!==null?_=Zn(_):(y=Tn(a)?io:sn.current,m=a.contextTypes,_=(m=m!=null)?Ea(i,y):Zs),a=new a(d,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Ud,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=_),a}function ex(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&Ud.enqueueReplaceState(a,a.state,null)}function im(i,a,d,m){var y=i.stateNode;y.props=d,y.state=i.memoizedState,y.refs={},Hp(i);var _=a.contextType;typeof _=="object"&&_!==null?y.context=Zn(_):(_=Tn(a)?io:sn.current,y.context=Ea(i,_)),y.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(sm(i,a,_,d),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Ud.enqueueReplaceState(y,y.state,null),Dd(i,d,y,m),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function Ra(i,a){try{var d="",m=a;do d+=ie(m),m=m.return;while(m);var y=d}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:y,digest:null}}function om(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function am(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var z1=typeof WeakMap=="function"?WeakMap:Map;function tx(i,a,d){d=xs(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){Gd||(Gd=!0,bm=m),am(i,a)},d}function nx(i,a,d){d=xs(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;d.payload=function(){return m(y)},d.callback=function(){am(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){am(i,a),typeof m!="function"&&(si===null?si=new Set([this]):si.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})}),d}function rx(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new z1;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(y.add(d),i=rI.bind(null,i,a,d),a.then(i,i))}function sx(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function ix(i,a,d,m,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=xs(-1,1),a.tag=2,ni(d,a,1))),d.lanes|=1),i)}var W1=W.ReactCurrentOwner,Sn=!1;function yn(i,a,d,m){a.child=i===null?Sw(a,null,d,m):Ca(a,i.child,d,m)}function ox(i,a,d,m,y){d=d.render;var _=a.ref;return Aa(a,y),m=Xp(i,a,d,m,_,y),d=Zp(),i!==null&&!Sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,_s(i,a,y)):(ct&&d&&Op(a),a.flags|=1,yn(i,a,m,y),a.child)}function ax(i,a,d,m,y){if(i===null){var _=d.type;return typeof _=="function"&&!Am(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=_,lx(i,a,_,m,y)):(i=eh(d.type,null,m,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!(i.lanes&y)){var k=_.memoizedProps;if(d=d.compare,d=d!==null?d:du,d(k,m)&&i.ref===a.ref)return _s(i,a,y)}return a.flags|=1,i=li(_,m),i.ref=a.ref,i.return=a,a.child=i}function lx(i,a,d,m,y){if(i!==null){var _=i.memoizedProps;if(du(_,m)&&i.ref===a.ref)if(Sn=!1,a.pendingProps=m=_,(i.lanes&y)!==0)i.flags&131072&&(Sn=!0);else return a.lanes=i.lanes,_s(i,a,y)}return lm(i,a,d,m,y)}function ux(i,a,d){var m=a.pendingProps,y=m.children,_=i!==null?i.memoizedState:null;if(m.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(ja,Un),Un|=d;else{if(!(d&1073741824))return i=_!==null?_.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,rt(ja,Un),Un|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:d,rt(ja,Un),Un|=m}else _!==null?(m=_.baseLanes|d,a.memoizedState=null):m=d,rt(ja,Un),Un|=m;return yn(i,a,y,d),a.child}function cx(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function lm(i,a,d,m,y){var _=Tn(d)?io:sn.current;return _=Ea(a,_),Aa(a,y),d=Xp(i,a,d,m,_,y),m=Zp(),i!==null&&!Sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,_s(i,a,y)):(ct&&m&&Op(a),a.flags|=1,yn(i,a,d,y),a.child)}function dx(i,a,d,m,y){if(Tn(d)){var _=!0;Sd(a)}else _=!1;if(Aa(a,y),a.stateNode===null)zd(i,a),Zw(a,d,m),im(a,d,m,y),m=!0;else if(i===null){var k=a.stateNode,L=a.memoizedProps;k.props=L;var U=k.context,X=d.contextType;typeof X=="object"&&X!==null?X=Zn(X):(X=Tn(d)?io:sn.current,X=Ea(a,X));var oe=d.getDerivedStateFromProps,ue=typeof oe=="function"||typeof k.getSnapshotBeforeUpdate=="function";ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==m||U!==X)&&ex(a,k,m,X),ti=!1;var se=a.memoizedState;k.state=se,Dd(a,m,k,y),U=a.memoizedState,L!==m||se!==U||En.current||ti?(typeof oe=="function"&&(sm(a,d,oe,m),U=a.memoizedState),(L=ti||Xw(a,d,L,m,se,U,X))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(a.flags|=4194308)):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=U),k.props=m,k.state=U,k.context=X,m=L):(typeof k.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{k=a.stateNode,Cw(i,a),L=a.memoizedProps,X=a.type===a.elementType?L:br(a.type,L),k.props=X,ue=a.pendingProps,se=k.context,U=d.contextType,typeof U=="object"&&U!==null?U=Zn(U):(U=Tn(d)?io:sn.current,U=Ea(a,U));var ye=d.getDerivedStateFromProps;(oe=typeof ye=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(L!==ue||se!==U)&&ex(a,k,m,U),ti=!1,se=a.memoizedState,k.state=se,Dd(a,m,k,y);var _e=a.memoizedState;L!==ue||se!==_e||En.current||ti?(typeof ye=="function"&&(sm(a,d,ye,m),_e=a.memoizedState),(X=ti||Xw(a,d,X,m,se,_e,U)||!1)?(oe||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(m,_e,U),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(m,_e,U)),typeof k.componentDidUpdate=="function"&&(a.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=_e),k.props=m,k.state=_e,k.context=U,m=X):(typeof k.componentDidUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||L===i.memoizedProps&&se===i.memoizedState||(a.flags|=1024),m=!1)}return um(i,a,d,m,_,y)}function um(i,a,d,m,y,_){cx(i,a);var k=(a.flags&128)!==0;if(!m&&!k)return y&&gw(a,d,!1),_s(i,a,_);m=a.stateNode,W1.current=a;var L=k&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&k?(a.child=Ca(a,i.child,null,_),a.child=Ca(a,null,L,_)):yn(i,a,L,_),a.memoizedState=m.state,y&&gw(a,d,!0),a.child}function hx(i){var a=i.stateNode;a.pendingContext?pw(i,a.pendingContext,a.pendingContext!==a.context):a.context&&pw(i,a.context,!1),qp(i,a.containerInfo)}function fx(i,a,d,m,y){return ka(),$p(y),a.flags|=256,yn(i,a,d,m),a.child}var cm={dehydrated:null,treeContext:null,retryLane:0};function dm(i){return{baseLanes:i,cachePool:null,transitions:null}}function px(i,a,d){var m=a.pendingProps,y=ft.current,_=!1,k=(a.flags&128)!==0,L;if((L=k)||(L=i!==null&&i.memoizedState===null?!1:(y&2)!==0),L?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),rt(ft,y&1),i===null)return Vp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(k=m.children,i=m.fallback,_?(m=a.mode,_=a.child,k={mode:"hidden",children:k},!(m&1)&&_!==null?(_.childLanes=0,_.pendingProps=k):_=th(k,m,0,null),i=go(i,m,d,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=dm(d),a.memoizedState=cm,i):hm(a,k));if(y=i.memoizedState,y!==null&&(L=y.dehydrated,L!==null))return H1(i,a,k,m,L,y,d);if(_){_=m.fallback,k=a.mode,y=i.child,L=y.sibling;var U={mode:"hidden",children:m.children};return!(k&1)&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=U,a.deletions=null):(m=li(y,U),m.subtreeFlags=y.subtreeFlags&14680064),L!==null?_=li(L,_):(_=go(_,k,d,null),_.flags|=2),_.return=a,m.return=a,m.sibling=_,a.child=m,m=_,_=a.child,k=i.child.memoizedState,k=k===null?dm(d):{baseLanes:k.baseLanes|d,cachePool:null,transitions:k.transitions},_.memoizedState=k,_.childLanes=i.childLanes&~d,a.memoizedState=cm,m}return _=i.child,i=_.sibling,m=li(_,{mode:"visible",children:m.children}),!(a.mode&1)&&(m.lanes=d),m.return=a,m.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=m,a.memoizedState=null,m}function hm(i,a){return a=th({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function Bd(i,a,d,m){return m!==null&&$p(m),Ca(a,i.child,null,d),i=hm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function H1(i,a,d,m,y,_,k){if(d)return a.flags&256?(a.flags&=-257,m=om(Error(t(422))),Bd(i,a,k,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=m.fallback,y=a.mode,m=th({mode:"visible",children:m.children},y,0,null),_=go(_,y,k,null),_.flags|=2,m.return=a,_.return=a,m.sibling=_,a.child=m,a.mode&1&&Ca(a,i.child,null,k),a.child.memoizedState=dm(k),a.memoizedState=cm,_);if(!(a.mode&1))return Bd(i,a,k,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var L=m.dgst;return m=L,_=Error(t(419)),m=om(_,m,void 0),Bd(i,a,k,m)}if(L=(k&i.childLanes)!==0,Sn||L){if(m=Bt,m!==null){switch(k&-k){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(m.suspendedLanes|k)?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,ws(i,y),Sr(m,i,y,-1))}return Pm(),m=om(Error(t(421))),Bd(i,a,k,m)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=sI.bind(null,i),y._reactRetry=a,null):(i=_.treeContext,Fn=Ys(y.nextSibling),$n=a,ct=!0,_r=null,i!==null&&(Yn[Xn++]=ys,Yn[Xn++]=vs,Yn[Xn++]=oo,ys=i.id,vs=i.overflow,oo=a),a=hm(a,m.children),a.flags|=4096,a)}function mx(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),zp(i.return,a,d)}function fm(i,a,d,m,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=d,_.tailMode=y)}function gx(i,a,d){var m=a.pendingProps,y=m.revealOrder,_=m.tail;if(yn(i,a,m.children,d),m=ft.current,m&2)m=m&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&mx(i,d,a);else if(i.tag===19)mx(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(rt(ft,m),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)i=d.alternate,i!==null&&Od(i)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),fm(a,!1,y,d,_);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Od(i)===null){a.child=y;break}i=y.sibling,y.sibling=d,d=y,y=i}fm(a,!0,d,null,_);break;case"together":fm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function zd(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function _s(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),ho|=a.lanes,!(d&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,d=li(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=li(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function q1(i,a,d){switch(a.tag){case 3:hx(a),ka();break;case 5:Iw(a);break;case 1:Tn(a.type)&&Sd(a);break;case 4:qp(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;rt(Rd,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(rt(ft,ft.current&1),a.flags|=128,null):d&a.child.childLanes?px(i,a,d):(rt(ft,ft.current&1),i=_s(i,a,d),i!==null?i.sibling:null);rt(ft,ft.current&1);break;case 19:if(m=(d&a.childLanes)!==0,i.flags&128){if(m)return gx(i,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),rt(ft,ft.current),m)break;return null;case 22:case 23:return a.lanes=0,ux(i,a,d)}return _s(i,a,d)}var yx,pm,vx,wx;yx=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},pm=function(){},vx=function(i,a,d,m){var y=i.memoizedProps;if(y!==m){i=a.stateNode,uo(Br.current);var _=null;switch(d){case"input":y=Dn(i,y),m=Dn(i,m),_=[];break;case"select":y=fe({},y,{value:void 0}),m=fe({},m,{value:void 0}),_=[];break;case"textarea":y=Fl(i,y),m=Fl(i,m),_=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=bd)}ql(d,m);var k;d=null;for(X in y)if(!m.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var L=y[X];for(k in L)L.hasOwnProperty(k)&&(d||(d={}),d[k]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in m){var U=m[X];if(L=y!=null?y[X]:void 0,m.hasOwnProperty(X)&&U!==L&&(U!=null||L!=null))if(X==="style")if(L){for(k in L)!L.hasOwnProperty(k)||U&&U.hasOwnProperty(k)||(d||(d={}),d[k]="");for(k in U)U.hasOwnProperty(k)&&L[k]!==U[k]&&(d||(d={}),d[k]=U[k])}else d||(_||(_=[]),_.push(X,d)),d=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,L=L?L.__html:void 0,U!=null&&L!==U&&(_=_||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&at("scroll",i),_||L===U||(_=[])):(_=_||[]).push(X,U))}d&&(_=_||[]).push("style",d);var X=_;(a.updateQueue=X)&&(a.flags|=4)}},wx=function(i,a,d,m){d!==m&&(a.flags|=4)};function ku(i,a){if(!ct)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function an(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function K1(i,a,d){var m=a.pendingProps;switch(Lp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(a),null;case 1:return Tn(a.type)&&Td(),an(a),null;case 3:return m=a.stateNode,Ia(),lt(En),lt(sn),Qp(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(Ad(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,_r!==null&&(Sm(_r),_r=null))),pm(i,a),an(a),null;case 5:Kp(a);var y=uo(_u.current);if(d=a.type,i!==null&&a.stateNode!=null)vx(i,a,d,m,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return an(a),null}if(i=uo(Br.current),Ad(a)){m=a.stateNode,d=a.type;var _=a.memoizedProps;switch(m[Ur]=a,m[gu]=_,i=(a.mode&1)!==0,d){case"dialog":at("cancel",m),at("close",m);break;case"iframe":case"object":case"embed":at("load",m);break;case"video":case"audio":for(y=0;y<fu.length;y++)at(fu[y],m);break;case"source":at("error",m);break;case"img":case"image":case"link":at("error",m),at("load",m);break;case"details":at("toggle",m);break;case"input":ss(m,_),at("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},at("invalid",m);break;case"textarea":Ko(m,_),at("invalid",m)}ql(d,_),y=null;for(var k in _)if(_.hasOwnProperty(k)){var L=_[k];k==="children"?typeof L=="string"?m.textContent!==L&&(_.suppressHydrationWarning!==!0&&_d(m.textContent,L,i),y=["children",L]):typeof L=="number"&&m.textContent!==""+L&&(_.suppressHydrationWarning!==!0&&_d(m.textContent,L,i),y=["children",""+L]):s.hasOwnProperty(k)&&L!=null&&k==="onScroll"&&at("scroll",m)}switch(d){case"input":We(m),Kc(m,_,!0);break;case"textarea":We(m),Ul(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=bd)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{k=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Rt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=k.createElement(d,{is:m.is}):(i=k.createElement(d),d==="select"&&(k=i,m.multiple?k.multiple=!0:m.size&&(k.size=m.size))):i=k.createElementNS(i,d),i[Ur]=a,i[gu]=m,yx(i,a,!1,!1),a.stateNode=i;e:{switch(k=Kl(d,m),d){case"dialog":at("cancel",i),at("close",i),y=m;break;case"iframe":case"object":case"embed":at("load",i),y=m;break;case"video":case"audio":for(y=0;y<fu.length;y++)at(fu[y],i);y=m;break;case"source":at("error",i),y=m;break;case"img":case"image":case"link":at("error",i),at("load",i),y=m;break;case"details":at("toggle",i),y=m;break;case"input":ss(i,m),y=Dn(i,m),at("invalid",i);break;case"option":y=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},y=fe({},m,{value:void 0}),at("invalid",i);break;case"textarea":Ko(i,m),y=Fl(i,m),at("invalid",i);break;default:y=m}ql(d,y),L=y;for(_ in L)if(L.hasOwnProperty(_)){var U=L[_];_==="style"?Wl(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Bl(i,U)):_==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&Fs(i,U):typeof U=="number"&&Fs(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&at("scroll",i):U!=null&&$(i,_,U,k))}switch(d){case"input":We(i),Kc(i,m,!1);break;case"textarea":We(i),Ul(i);break;case"option":m.value!=null&&i.setAttribute("value",""+te(m.value));break;case"select":i.multiple=!!m.multiple,_=m.value,_!=null?as(i,!!m.multiple,_,!1):m.defaultValue!=null&&as(i,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=bd)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return an(a),null;case 6:if(i&&a.stateNode!=null)wx(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(d=uo(_u.current),uo(Br.current),Ad(a)){if(m=a.stateNode,d=a.memoizedProps,m[Ur]=a,(_=m.nodeValue!==d)&&(i=$n,i!==null))switch(i.tag){case 3:_d(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&_d(m.nodeValue,d,(i.mode&1)!==0)}_&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Ur]=a,a.stateNode=m}return an(a),null;case 13:if(lt(ft),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ct&&Fn!==null&&a.mode&1&&!(a.flags&128))bw(),ka(),a.flags|=98560,_=!1;else if(_=Ad(a),m!==null&&m.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Ur]=a}else ka(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;an(a),_=!1}else _r!==null&&(Sm(_r),_r=null),_=!0;if(!_)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,a.mode&1&&(i===null||ft.current&1?Ot===0&&(Ot=3):Pm())),a.updateQueue!==null&&(a.flags|=4),an(a),null);case 4:return Ia(),pm(i,a),i===null&&pu(a.stateNode.containerInfo),an(a),null;case 10:return Bp(a.type._context),an(a),null;case 17:return Tn(a.type)&&Td(),an(a),null;case 19:if(lt(ft),_=a.memoizedState,_===null)return an(a),null;if(m=(a.flags&128)!==0,k=_.rendering,k===null)if(m)ku(_,!1);else{if(Ot!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(k=Od(i),k!==null){for(a.flags|=128,ku(_,!1),m=k.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)_=d,i=m,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,i=k.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return rt(ft,ft.current&1|2),a.child}i=i.sibling}_.tail!==null&&nt()>Da&&(a.flags|=128,m=!0,ku(_,!1),a.lanes=4194304)}else{if(!m)if(i=Od(k),i!==null){if(a.flags|=128,m=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),ku(_,!0),_.tail===null&&_.tailMode==="hidden"&&!k.alternate&&!ct)return an(a),null}else 2*nt()-_.renderingStartTime>Da&&d!==1073741824&&(a.flags|=128,m=!0,ku(_,!1),a.lanes=4194304);_.isBackwards?(k.sibling=a.child,a.child=k):(d=_.last,d!==null?d.sibling=k:a.child=k,_.last=k)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=nt(),a.sibling=null,d=ft.current,rt(ft,m?d&1|2:d&1),a):(an(a),null);case 22:case 23:return Cm(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&a.mode&1?Un&1073741824&&(an(a),a.subtreeFlags&6&&(a.flags|=8192)):an(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function G1(i,a){switch(Lp(a),a.tag){case 1:return Tn(a.type)&&Td(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ia(),lt(En),lt(sn),Qp(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return Kp(a),null;case 13:if(lt(ft),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ka()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return lt(ft),null;case 4:return Ia(),null;case 10:return Bp(a.type._context),null;case 22:case 23:return Cm(),null;case 24:return null;default:return null}}var Wd=!1,ln=!1,Q1=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Na(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){yt(i,a,m)}else d.current=null}function mm(i,a,d){try{d()}catch(m){yt(i,a,m)}}var xx=!1;function J1(i,a){if(Cp=Gs,i=Xv(),wp(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var k=0,L=-1,U=-1,X=0,oe=0,ue=i,se=null;t:for(;;){for(var ye;ue!==d||y!==0&&ue.nodeType!==3||(L=k+y),ue!==_||m!==0&&ue.nodeType!==3||(U=k+m),ue.nodeType===3&&(k+=ue.nodeValue.length),(ye=ue.firstChild)!==null;)se=ue,ue=ye;for(;;){if(ue===i)break t;if(se===d&&++X===y&&(L=k),se===_&&++oe===m&&(U=k),(ye=ue.nextSibling)!==null)break;ue=se,se=ue.parentNode}ue=ye}d=L===-1||U===-1?null:{start:L,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(Pp={focusedElem:i,selectionRange:d},Gs=!1,xe=a;xe!==null;)if(a=xe,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,xe=i;else for(;xe!==null;){a=xe;try{var _e=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var be=_e.memoizedProps,Et=_e.memoizedState,J=a.stateNode,z=J.getSnapshotBeforeUpdate(a.elementType===a.type?be:br(a.type,be),Et);J.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){yt(a,a.return,ce)}if(i=a.sibling,i!==null){i.return=a.return,xe=i;break}xe=a.return}return _e=xx,xx=!1,_e}function Cu(i,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&i)===i){var _=y.destroy;y.destroy=void 0,_!==void 0&&mm(a,d,_)}y=y.next}while(y!==m)}}function Hd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function gm(i){var a=i.ref;if(a!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof a=="function"?a(i):a.current=i}}function _x(i){var a=i.alternate;a!==null&&(i.alternate=null,_x(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Ur],delete a[gu],delete a[Np],delete a[N1],delete a[j1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function bx(i){return i.tag===5||i.tag===3||i.tag===4}function Ex(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||bx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ym(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=bd));else if(m!==4&&(i=i.child,i!==null))for(ym(i,a,d),i=i.sibling;i!==null;)ym(i,a,d),i=i.sibling}function vm(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(vm(i,a,d),i=i.sibling;i!==null;)vm(i,a,d),i=i.sibling}var Qt=null,Er=!1;function ri(i,a,d){for(d=d.child;d!==null;)Tx(i,a,d),d=d.sibling}function Tx(i,a,d){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(Yi,d)}catch{}switch(d.tag){case 5:ln||Na(d,a);case 6:var m=Qt,y=Er;Qt=null,ri(i,a,d),Qt=m,Er=y,Qt!==null&&(Er?(i=Qt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Qt.removeChild(d.stateNode));break;case 18:Qt!==null&&(Er?(i=Qt,d=d.stateNode,i.nodeType===8?Rp(i.parentNode,d):i.nodeType===1&&Rp(i,d),vr(i)):Rp(Qt,d.stateNode));break;case 4:m=Qt,y=Er,Qt=d.stateNode.containerInfo,Er=!0,ri(i,a,d),Qt=m,Er=y;break;case 0:case 11:case 14:case 15:if(!ln&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var _=y,k=_.destroy;_=_.tag,k!==void 0&&(_&2||_&4)&&mm(d,a,k),y=y.next}while(y!==m)}ri(i,a,d);break;case 1:if(!ln&&(Na(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(L){yt(d,a,L)}ri(i,a,d);break;case 21:ri(i,a,d);break;case 22:d.mode&1?(ln=(m=ln)||d.memoizedState!==null,ri(i,a,d),ln=m):ri(i,a,d);break;default:ri(i,a,d)}}function Sx(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new Q1),a.forEach(function(m){var y=iI.bind(null,i,m);d.has(m)||(d.add(m),m.then(y,y))})}}function Tr(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];try{var _=i,k=a,L=k;e:for(;L!==null;){switch(L.tag){case 5:Qt=L.stateNode,Er=!1;break e;case 3:Qt=L.stateNode.containerInfo,Er=!0;break e;case 4:Qt=L.stateNode.containerInfo,Er=!0;break e}L=L.return}if(Qt===null)throw Error(t(160));Tx(_,k,y),Qt=null,Er=!1;var U=y.alternate;U!==null&&(U.return=null),y.return=null}catch(X){yt(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)kx(a,i),a=a.sibling}function kx(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Tr(a,i),Wr(i),m&4){try{Cu(3,i,i.return),Hd(3,i)}catch(be){yt(i,i.return,be)}try{Cu(5,i,i.return)}catch(be){yt(i,i.return,be)}}break;case 1:Tr(a,i),Wr(i),m&512&&d!==null&&Na(d,d.return);break;case 5:if(Tr(a,i),Wr(i),m&512&&d!==null&&Na(d,d.return),i.flags&32){var y=i.stateNode;try{Fs(y,"")}catch(be){yt(i,i.return,be)}}if(m&4&&(y=i.stateNode,y!=null)){var _=i.memoizedProps,k=d!==null?d.memoizedProps:_,L=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{L==="input"&&_.type==="radio"&&_.name!=null&&$t(y,_),Kl(L,k);var X=Kl(L,_);for(k=0;k<U.length;k+=2){var oe=U[k],ue=U[k+1];oe==="style"?Wl(y,ue):oe==="dangerouslySetInnerHTML"?Bl(y,ue):oe==="children"?Fs(y,ue):$(y,oe,ue,X)}switch(L){case"input":is(y,_);break;case"textarea":Go(y,_);break;case"select":var se=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var ye=_.value;ye!=null?as(y,!!_.multiple,ye,!1):se!==!!_.multiple&&(_.defaultValue!=null?as(y,!!_.multiple,_.defaultValue,!0):as(y,!!_.multiple,_.multiple?[]:"",!1))}y[gu]=_}catch(be){yt(i,i.return,be)}}break;case 6:if(Tr(a,i),Wr(i),m&4){if(i.stateNode===null)throw Error(t(162));y=i.stateNode,_=i.memoizedProps;try{y.nodeValue=_}catch(be){yt(i,i.return,be)}}break;case 3:if(Tr(a,i),Wr(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{vr(a.containerInfo)}catch(be){yt(i,i.return,be)}break;case 4:Tr(a,i),Wr(i);break;case 13:Tr(a,i),Wr(i),y=i.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(_m=nt())),m&4&&Sx(i);break;case 22:if(oe=d!==null&&d.memoizedState!==null,i.mode&1?(ln=(X=ln)||oe,Tr(a,i),ln=X):Tr(a,i),Wr(i),m&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!oe&&i.mode&1)for(xe=i,oe=i.child;oe!==null;){for(ue=xe=oe;xe!==null;){switch(se=xe,ye=se.child,se.tag){case 0:case 11:case 14:case 15:Cu(4,se,se.return);break;case 1:Na(se,se.return);var _e=se.stateNode;if(typeof _e.componentWillUnmount=="function"){m=se,d=se.return;try{a=m,_e.props=a.memoizedProps,_e.state=a.memoizedState,_e.componentWillUnmount()}catch(be){yt(m,d,be)}}break;case 5:Na(se,se.return);break;case 22:if(se.memoizedState!==null){Ax(ue);continue}}ye!==null?(ye.return=se,xe=ye):Ax(ue)}oe=oe.sibling}e:for(oe=null,ue=i;;){if(ue.tag===5){if(oe===null){oe=ue;try{y=ue.stateNode,X?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(L=ue.stateNode,U=ue.memoizedProps.style,k=U!=null&&U.hasOwnProperty("display")?U.display:null,L.style.display=zl("display",k))}catch(be){yt(i,i.return,be)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(be){yt(i,i.return,be)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===i)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===i)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===i)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Tr(a,i),Wr(i),m&4&&Sx(i);break;case 21:break;default:Tr(a,i),Wr(i)}}function Wr(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(bx(d)){var m=d;break e}d=d.return}throw Error(t(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Fs(y,""),m.flags&=-33);var _=Ex(i);vm(i,_,y);break;case 3:case 4:var k=m.stateNode.containerInfo,L=Ex(i);ym(i,L,k);break;default:throw Error(t(161))}}catch(U){yt(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Y1(i,a,d){xe=i,Cx(i)}function Cx(i,a,d){for(var m=(i.mode&1)!==0;xe!==null;){var y=xe,_=y.child;if(y.tag===22&&m){var k=y.memoizedState!==null||Wd;if(!k){var L=y.alternate,U=L!==null&&L.memoizedState!==null||ln;L=Wd;var X=ln;if(Wd=k,(ln=U)&&!X)for(xe=y;xe!==null;)k=xe,U=k.child,k.tag===22&&k.memoizedState!==null?Ix(y):U!==null?(U.return=k,xe=U):Ix(y);for(;_!==null;)xe=_,Cx(_),_=_.sibling;xe=y,Wd=L,ln=X}Px(i)}else y.subtreeFlags&8772&&_!==null?(_.return=y,xe=_):Px(i)}}function Px(i){for(;xe!==null;){var a=xe;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:ln||Hd(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!ln)if(d===null)m.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:br(a.type,d.memoizedProps);m.componentDidUpdate(y,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Aw(a,_,m);break;case 3:var k=a.updateQueue;if(k!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Aw(a,k,d)}break;case 5:var L=a.stateNode;if(d===null&&a.flags&4){d=L;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var oe=X.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&vr(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}ln||a.flags&512&&gm(a)}catch(se){yt(a,a.return,se)}}if(a===i){xe=null;break}if(d=a.sibling,d!==null){d.return=a.return,xe=d;break}xe=a.return}}function Ax(i){for(;xe!==null;){var a=xe;if(a===i){xe=null;break}var d=a.sibling;if(d!==null){d.return=a.return,xe=d;break}xe=a.return}}function Ix(i){for(;xe!==null;){var a=xe;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Hd(4,a)}catch(U){yt(a,d,U)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(U){yt(a,y,U)}}var _=a.return;try{gm(a)}catch(U){yt(a,_,U)}break;case 5:var k=a.return;try{gm(a)}catch(U){yt(a,k,U)}}}catch(U){yt(a,a.return,U)}if(a===i){xe=null;break}var L=a.sibling;if(L!==null){L.return=a.return,xe=L;break}xe=a.return}}var X1=Math.ceil,qd=W.ReactCurrentDispatcher,wm=W.ReactCurrentOwner,tr=W.ReactCurrentBatchConfig,Ge=0,Bt=null,Pt=null,Jt=0,Un=0,ja=Xs(0),Ot=0,Pu=null,ho=0,Kd=0,xm=0,Au=null,kn=null,_m=0,Da=1/0,bs=null,Gd=!1,bm=null,si=null,Qd=!1,ii=null,Jd=0,Iu=0,Em=null,Yd=-1,Xd=0;function vn(){return Ge&6?nt():Yd!==-1?Yd:Yd=nt()}function oi(i){return i.mode&1?Ge&2&&Jt!==0?Jt&-Jt:O1.transition!==null?(Xd===0&&(Xd=Zi()),Xd):(i=ze,i!==0||(i=window.event,i=i===void 0?16:su(i.type)),i):1}function Sr(i,a,d,m){if(50<Iu)throw Iu=0,Em=null,Error(t(185));Ws(i,d,m),(!(Ge&2)||i!==Bt)&&(i===Bt&&(!(Ge&2)&&(Kd|=d),Ot===4&&ai(i,Jt)),Cn(i,m),d===1&&Ge===0&&!(a.mode&1)&&(Da=nt()+500,kd&&ei()))}function Cn(i,a){var d=i.callbackNode;cs(i,a);var m=Xi(i,i===Bt?Jt:0);if(m===0)d!==null&&Zl(d),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(d!=null&&Zl(d),a===1)i.tag===0?D1(Nx.bind(null,i)):yw(Nx.bind(null,i)),I1(function(){!(Ge&6)&&ei()}),d=null;else{switch(qs(m)){case 1:d=Ji;break;case 4:d=Us;break;case 16:d=Gn;break;case 536870912:d=Xc;break;default:d=Gn}d=Fx(d,Rx.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function Rx(i,a){if(Yd=-1,Xd=0,Ge&6)throw Error(t(327));var d=i.callbackNode;if(Oa()&&i.callbackNode!==d)return null;var m=Xi(i,i===Bt?Jt:0);if(m===0)return null;if(m&30||m&i.expiredLanes||a)a=Zd(i,m);else{a=m;var y=Ge;Ge|=2;var _=Dx();(Bt!==i||Jt!==a)&&(bs=null,Da=nt()+500,po(i,a));do try{tI();break}catch(L){jx(i,L)}while(!0);Up(),qd.current=_,Ge=y,Pt!==null?a=0:(Bt=null,Jt=0,a=Ot)}if(a!==0){if(a===2&&(y=Ln(i),y!==0&&(m=y,a=Tm(i,y))),a===1)throw d=Pu,po(i,0),ai(i,m),Cn(i,nt()),d;if(a===6)ai(i,m);else{if(y=i.current.alternate,!(m&30)&&!Z1(y)&&(a=Zd(i,m),a===2&&(_=Ln(i),_!==0&&(m=_,a=Tm(i,_))),a===1))throw d=Pu,po(i,0),ai(i,m),Cn(i,nt()),d;switch(i.finishedWork=y,i.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:mo(i,kn,bs);break;case 3:if(ai(i,m),(m&130023424)===m&&(a=_m+500-nt(),10<a)){if(Xi(i,0)!==0)break;if(y=i.suspendedLanes,(y&m)!==m){vn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Ip(mo.bind(null,i,kn,bs),a);break}mo(i,kn,bs);break;case 4:if(ai(i,m),(m&4194240)===m)break;for(a=i.eventTimes,y=-1;0<m;){var k=31-mn(m);_=1<<k,k=a[k],k>y&&(y=k),m&=~_}if(m=y,m=nt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*X1(m/1960))-m,10<m){i.timeoutHandle=Ip(mo.bind(null,i,kn,bs),m);break}mo(i,kn,bs);break;case 5:mo(i,kn,bs);break;default:throw Error(t(329))}}}return Cn(i,nt()),i.callbackNode===d?Rx.bind(null,i):null}function Tm(i,a){var d=Au;return i.current.memoizedState.isDehydrated&&(po(i,a).flags|=256),i=Zd(i,a),i!==2&&(a=kn,kn=d,a!==null&&Sm(a)),i}function Sm(i){kn===null?kn=i:kn.push.apply(kn,i)}function Z1(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var y=d[m],_=y.getSnapshot;y=y.value;try{if(!xr(_(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ai(i,a){for(a&=~xm,a&=~Kd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-mn(a),m=1<<d;i[d]=-1,a&=~m}}function Nx(i){if(Ge&6)throw Error(t(327));Oa();var a=Xi(i,0);if(!(a&1))return Cn(i,nt()),null;var d=Zd(i,a);if(i.tag!==0&&d===2){var m=Ln(i);m!==0&&(a=m,d=Tm(i,m))}if(d===1)throw d=Pu,po(i,0),ai(i,a),Cn(i,nt()),d;if(d===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,mo(i,kn,bs),Cn(i,nt()),null}function km(i,a){var d=Ge;Ge|=1;try{return i(a)}finally{Ge=d,Ge===0&&(Da=nt()+500,kd&&ei())}}function fo(i){ii!==null&&ii.tag===0&&!(Ge&6)&&Oa();var a=Ge;Ge|=1;var d=tr.transition,m=ze;try{if(tr.transition=null,ze=1,i)return i()}finally{ze=m,tr.transition=d,Ge=a,!(Ge&6)&&ei()}}function Cm(){Un=ja.current,lt(ja)}function po(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,A1(d)),Pt!==null)for(d=Pt.return;d!==null;){var m=d;switch(Lp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Td();break;case 3:Ia(),lt(En),lt(sn),Qp();break;case 5:Kp(m);break;case 4:Ia();break;case 13:lt(ft);break;case 19:lt(ft);break;case 10:Bp(m.type._context);break;case 22:case 23:Cm()}d=d.return}if(Bt=i,Pt=i=li(i.current,null),Jt=Un=a,Ot=0,Pu=null,xm=Kd=ho=0,kn=Au=null,lo!==null){for(a=0;a<lo.length;a++)if(d=lo[a],m=d.interleaved,m!==null){d.interleaved=null;var y=m.next,_=d.pending;if(_!==null){var k=_.next;_.next=y,m.next=k}d.pending=m}lo=null}return i}function jx(i,a){do{var d=Pt;try{if(Up(),Ld.current=Fd,Md){for(var m=pt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}Md=!1}if(co=0,Ut=Dt=pt=null,bu=!1,Eu=0,wm.current=null,d===null||d.return===null){Ot=1,Pu=a,Pt=null;break}e:{var _=i,k=d.return,L=d,U=a;if(a=Jt,L.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,oe=L,ue=oe.tag;if(!(oe.mode&1)&&(ue===0||ue===11||ue===15)){var se=oe.alternate;se?(oe.updateQueue=se.updateQueue,oe.memoizedState=se.memoizedState,oe.lanes=se.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var ye=sx(k);if(ye!==null){ye.flags&=-257,ix(ye,k,L,_,a),ye.mode&1&&rx(_,X,a),a=ye,U=X;var _e=a.updateQueue;if(_e===null){var be=new Set;be.add(U),a.updateQueue=be}else _e.add(U);break e}else{if(!(a&1)){rx(_,X,a),Pm();break e}U=Error(t(426))}}else if(ct&&L.mode&1){var Et=sx(k);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),ix(Et,k,L,_,a),$p(Ra(U,L));break e}}_=U=Ra(U,L),Ot!==4&&(Ot=2),Au===null?Au=[_]:Au.push(_),_=k;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var J=tx(_,U,a);Pw(_,J);break e;case 1:L=U;var z=_.type,Y=_.stateNode;if(!(_.flags&128)&&(typeof z.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(si===null||!si.has(Y)))){_.flags|=65536,a&=-a,_.lanes|=a;var ce=nx(_,L,a);Pw(_,ce);break e}}_=_.return}while(_!==null)}Lx(d)}catch(Te){a=Te,Pt===d&&d!==null&&(Pt=d=d.return);continue}break}while(!0)}function Dx(){var i=qd.current;return qd.current=Fd,i===null?Fd:i}function Pm(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Bt===null||!(ho&268435455)&&!(Kd&268435455)||ai(Bt,Jt)}function Zd(i,a){var d=Ge;Ge|=2;var m=Dx();(Bt!==i||Jt!==a)&&(bs=null,po(i,a));do try{eI();break}catch(y){jx(i,y)}while(!0);if(Up(),Ge=d,qd.current=m,Pt!==null)throw Error(t(261));return Bt=null,Jt=0,Ot}function eI(){for(;Pt!==null;)Ox(Pt)}function tI(){for(;Pt!==null&&!Jc();)Ox(Pt)}function Ox(i){var a=$x(i.alternate,i,Un);i.memoizedProps=i.pendingProps,a===null?Lx(i):Pt=a,wm.current=null}function Lx(i){var a=i;do{var d=a.alternate;if(i=a.return,a.flags&32768){if(d=G1(d,a),d!==null){d.flags&=32767,Pt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ot=6,Pt=null;return}}else if(d=K1(d,a,Un),d!==null){Pt=d;return}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=i}while(a!==null);Ot===0&&(Ot=5)}function mo(i,a,d){var m=ze,y=tr.transition;try{tr.transition=null,ze=1,nI(i,a,d,m)}finally{tr.transition=y,ze=m}return null}function nI(i,a,d,m){do Oa();while(ii!==null);if(Ge&6)throw Error(t(327));d=i.finishedWork;var y=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=d.lanes|d.childLanes;if(et(i,_),i===Bt&&(Pt=Bt=null,Jt=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Qd||(Qd=!0,Fx(Gn,function(){return Oa(),null})),_=(d.flags&15990)!==0,d.subtreeFlags&15990||_){_=tr.transition,tr.transition=null;var k=ze;ze=1;var L=Ge;Ge|=4,wm.current=null,J1(i,d),kx(d,i),b1(Pp),Gs=!!Cp,Pp=Cp=null,i.current=d,Y1(d),dp(),Ge=L,ze=k,tr.transition=_}else i.current=d;if(Qd&&(Qd=!1,ii=i,Jd=y),_=i.pendingLanes,_===0&&(si=null),Zc(d.stateNode),Cn(i,nt()),a!==null)for(m=i.onRecoverableError,d=0;d<a.length;d++)y=a[d],m(y.value,{componentStack:y.stack,digest:y.digest});if(Gd)throw Gd=!1,i=bm,bm=null,i;return Jd&1&&i.tag!==0&&Oa(),_=i.pendingLanes,_&1?i===Em?Iu++:(Iu=0,Em=i):Iu=0,ei(),null}function Oa(){if(ii!==null){var i=qs(Jd),a=tr.transition,d=ze;try{if(tr.transition=null,ze=16>i?16:i,ii===null)var m=!1;else{if(i=ii,ii=null,Jd=0,Ge&6)throw Error(t(331));var y=Ge;for(Ge|=4,xe=i.current;xe!==null;){var _=xe,k=_.child;if(xe.flags&16){var L=_.deletions;if(L!==null){for(var U=0;U<L.length;U++){var X=L[U];for(xe=X;xe!==null;){var oe=xe;switch(oe.tag){case 0:case 11:case 15:Cu(8,oe,_)}var ue=oe.child;if(ue!==null)ue.return=oe,xe=ue;else for(;xe!==null;){oe=xe;var se=oe.sibling,ye=oe.return;if(_x(oe),oe===X){xe=null;break}if(se!==null){se.return=ye,xe=se;break}xe=ye}}}var _e=_.alternate;if(_e!==null){var be=_e.child;if(be!==null){_e.child=null;do{var Et=be.sibling;be.sibling=null,be=Et}while(be!==null)}}xe=_}}if(_.subtreeFlags&2064&&k!==null)k.return=_,xe=k;else e:for(;xe!==null;){if(_=xe,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Cu(9,_,_.return)}var J=_.sibling;if(J!==null){J.return=_.return,xe=J;break e}xe=_.return}}var z=i.current;for(xe=z;xe!==null;){k=xe;var Y=k.child;if(k.subtreeFlags&2064&&Y!==null)Y.return=k,xe=Y;else e:for(k=z;xe!==null;){if(L=xe,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:Hd(9,L)}}catch(Te){yt(L,L.return,Te)}if(L===k){xe=null;break e}var ce=L.sibling;if(ce!==null){ce.return=L.return,xe=ce;break e}xe=L.return}}if(Ge=y,ei(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(Yi,i)}catch{}m=!0}return m}finally{ze=d,tr.transition=a}}return!1}function Mx(i,a,d){a=Ra(d,a),a=tx(i,a,1),i=ni(i,a,1),a=vn(),i!==null&&(Ws(i,1,a),Cn(i,a))}function yt(i,a,d){if(i.tag===3)Mx(i,i,d);else for(;a!==null;){if(a.tag===3){Mx(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(si===null||!si.has(m))){i=Ra(d,i),i=nx(a,i,1),a=ni(a,i,1),i=vn(),a!==null&&(Ws(a,1,i),Cn(a,i));break}}a=a.return}}function rI(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),a=vn(),i.pingedLanes|=i.suspendedLanes&d,Bt===i&&(Jt&d)===d&&(Ot===4||Ot===3&&(Jt&130023424)===Jt&&500>nt()-_m?po(i,0):xm|=d),Cn(i,a)}function Vx(i,a){a===0&&(i.mode&1?(a=sa,sa<<=1,!(sa&130023424)&&(sa=4194304)):a=1);var d=vn();i=ws(i,a),i!==null&&(Ws(i,a,d),Cn(i,d))}function sI(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),Vx(i,d)}function iI(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),Vx(i,d)}var $x;$x=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||En.current)Sn=!0;else{if(!(i.lanes&d)&&!(a.flags&128))return Sn=!1,q1(i,a,d);Sn=!!(i.flags&131072)}else Sn=!1,ct&&a.flags&1048576&&vw(a,Pd,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;zd(i,a),i=a.pendingProps;var y=Ea(a,sn.current);Aa(a,d),y=Xp(null,a,m,i,y,d);var _=Zp();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Tn(m)?(_=!0,Sd(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Hp(a),y.updater=Ud,a.stateNode=y,y._reactInternals=a,im(a,m,i,d),a=um(null,a,m,!0,_,d)):(a.tag=0,ct&&_&&Op(a),yn(null,a,y,d),a=a.child),a;case 16:m=a.elementType;e:{switch(zd(i,a),i=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=aI(m),i=br(m,i),y){case 0:a=lm(null,a,m,i,d);break e;case 1:a=dx(null,a,m,i,d);break e;case 11:a=ox(null,a,m,i,d);break e;case 14:a=ax(null,a,m,br(m.type,i),d);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:br(m,y),lm(i,a,m,y,d);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:br(m,y),dx(i,a,m,y,d);case 3:e:{if(hx(a),i===null)throw Error(t(387));m=a.pendingProps,_=a.memoizedState,y=_.element,Cw(i,a),Dd(a,m,null,d);var k=a.memoizedState;if(m=k.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=Ra(Error(t(423)),a),a=fx(i,a,m,d,y);break e}else if(m!==y){y=Ra(Error(t(424)),a),a=fx(i,a,m,d,y);break e}else for(Fn=Ys(a.stateNode.containerInfo.firstChild),$n=a,ct=!0,_r=null,d=Sw(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(ka(),m===y){a=_s(i,a,d);break e}yn(i,a,m,d)}a=a.child}return a;case 5:return Iw(a),i===null&&Vp(a),m=a.type,y=a.pendingProps,_=i!==null?i.memoizedProps:null,k=y.children,Ap(m,y)?k=null:_!==null&&Ap(m,_)&&(a.flags|=32),cx(i,a),yn(i,a,k,d),a.child;case 6:return i===null&&Vp(a),null;case 13:return px(i,a,d);case 4:return qp(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=Ca(a,null,m,d):yn(i,a,m,d),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:br(m,y),ox(i,a,m,y,d);case 7:return yn(i,a,a.pendingProps,d),a.child;case 8:return yn(i,a,a.pendingProps.children,d),a.child;case 12:return yn(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,_=a.memoizedProps,k=y.value,rt(Rd,m._currentValue),m._currentValue=k,_!==null)if(xr(_.value,k)){if(_.children===y.children&&!En.current){a=_s(i,a,d);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var L=_.dependencies;if(L!==null){k=_.child;for(var U=L.firstContext;U!==null;){if(U.context===m){if(_.tag===1){U=xs(-1,d&-d),U.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var oe=X.pending;oe===null?U.next=U:(U.next=oe.next,oe.next=U),X.pending=U}}_.lanes|=d,U=_.alternate,U!==null&&(U.lanes|=d),zp(_.return,d,a),L.lanes|=d;break}U=U.next}}else if(_.tag===10)k=_.type===a.type?null:_.child;else if(_.tag===18){if(k=_.return,k===null)throw Error(t(341));k.lanes|=d,L=k.alternate,L!==null&&(L.lanes|=d),zp(k,d,a),k=_.sibling}else k=_.child;if(k!==null)k.return=_;else for(k=_;k!==null;){if(k===a){k=null;break}if(_=k.sibling,_!==null){_.return=k.return,k=_;break}k=k.return}_=k}yn(i,a,y.children,d),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Aa(a,d),y=Zn(y),m=m(y),a.flags|=1,yn(i,a,m,d),a.child;case 14:return m=a.type,y=br(m,a.pendingProps),y=br(m.type,y),ax(i,a,m,y,d);case 15:return lx(i,a,a.type,a.pendingProps,d);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:br(m,y),zd(i,a),a.tag=1,Tn(m)?(i=!0,Sd(a)):i=!1,Aa(a,d),Zw(a,m,y),im(a,m,y,d),um(null,a,m,!0,i,d);case 19:return gx(i,a,d);case 22:return ux(i,a,d)}throw Error(t(156,a.tag))};function Fx(i,a){return na(i,a)}function oI(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(i,a,d,m){return new oI(i,a,d,m)}function Am(i){return i=i.prototype,!(!i||!i.isReactComponent)}function aI(i){if(typeof i=="function")return Am(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===he)return 14}return 2}function li(i,a){var d=i.alternate;return d===null?(d=nr(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function eh(i,a,d,m,y,_){var k=2;if(m=i,typeof i=="function")Am(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case I:return go(d.children,y,_,a);case b:k=8,y|=8;break;case S:return i=nr(12,d,a,y|2),i.elementType=S,i.lanes=_,i;case O:return i=nr(13,d,a,y),i.elementType=O,i.lanes=_,i;case re:return i=nr(19,d,a,y),i.elementType=re,i.lanes=_,i;case we:return th(d,y,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:k=10;break e;case M:k=9;break e;case B:k=11;break e;case he:k=14;break e;case Se:k=16,m=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=nr(k,d,a,y),a.elementType=i,a.type=m,a.lanes=_,a}function go(i,a,d,m){return i=nr(7,i,m,a),i.lanes=d,i}function th(i,a,d,m){return i=nr(22,i,m,a),i.elementType=we,i.lanes=d,i.stateNode={isHidden:!1},i}function Im(i,a,d){return i=nr(6,i,null,a),i.lanes=d,i}function Rm(i,a,d){return a=nr(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function lI(i,a,d,m,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zs(0),this.expirationTimes=zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Nm(i,a,d,m,y,_,k,L,U){return i=new lI(i,a,d,L,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=nr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hp(_),i}function uI(i,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:m==null?null:""+m,children:i,containerInfo:a,implementation:d}}function Ux(i){if(!i)return Zs;i=i._reactInternals;e:{if(fr(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Tn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var d=i.type;if(Tn(d))return mw(i,d,a)}return a}function Bx(i,a,d,m,y,_,k,L,U){return i=Nm(d,m,!0,i,y,_,k,L,U),i.context=Ux(null),d=i.current,m=vn(),y=oi(d),_=xs(m,y),_.callback=a??null,ni(d,_,y),i.current.lanes=y,Ws(i,y,m),Cn(i,m),i}function nh(i,a,d,m){var y=a.current,_=vn(),k=oi(y);return d=Ux(d),a.context===null?a.context=d:a.pendingContext=d,a=xs(_,k),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=ni(y,a,k),i!==null&&(Sr(i,y,k,_),jd(i,y,k)),k}function rh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function zx(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function jm(i,a){zx(i,a),(i=i.alternate)&&zx(i,a)}function cI(){return null}var Wx=typeof reportError=="function"?reportError:function(i){console.error(i)};function Dm(i){this._internalRoot=i}sh.prototype.render=Dm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));nh(i,a,null,null)},sh.prototype.unmount=Dm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;fo(function(){nh(null,i,null,null)}),a[ms]=null}};function sh(i){this._internalRoot=i}sh.prototype.unstable_scheduleHydration=function(i){if(i){var a=sd();i={blockedOn:null,target:i,priority:a};for(var d=0;d<Mr.length&&a!==0&&a<Mr[d].priority;d++);Mr.splice(d,0,i),d===0&&ad(i)}};function Om(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ih(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Hx(){}function dI(i,a,d,m,y){if(y){if(typeof m=="function"){var _=m;m=function(){var X=rh(k);_.call(X)}}var k=Bx(a,m,i,0,null,!1,!1,"",Hx);return i._reactRootContainer=k,i[ms]=k.current,pu(i.nodeType===8?i.parentNode:i),fo(),k}for(;y=i.lastChild;)i.removeChild(y);if(typeof m=="function"){var L=m;m=function(){var X=rh(U);L.call(X)}}var U=Nm(i,0,!1,null,null,!1,!1,"",Hx);return i._reactRootContainer=U,i[ms]=U.current,pu(i.nodeType===8?i.parentNode:i),fo(function(){nh(a,U,d,m)}),U}function oh(i,a,d,m,y){var _=d._reactRootContainer;if(_){var k=_;if(typeof y=="function"){var L=y;y=function(){var U=rh(k);L.call(U)}}nh(a,k,i,y)}else k=dI(d,a,i,y,m);return rh(k)}nd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=Bs(a.pendingLanes);d!==0&&(Hs(a,d|1),Cn(a,nt()),!(Ge&6)&&(Da=nt()+500,ei()))}break;case 13:fo(function(){var m=ws(i,1);if(m!==null){var y=vn();Sr(m,i,1,y)}}),jm(i,1)}},ia=function(i){if(i.tag===13){var a=ws(i,134217728);if(a!==null){var d=vn();Sr(a,i,134217728,d)}jm(i,134217728)}},rd=function(i){if(i.tag===13){var a=oi(i),d=ws(i,a);if(d!==null){var m=vn();Sr(d,i,a,m)}jm(i,a)}},sd=function(){return ze},id=function(i,a){var d=ze;try{return ze=i,a()}finally{ze=d}},Jo=function(i,a,d){switch(a){case"input":if(is(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var y=Ed(m);if(!y)throw Error(t(90));He(m),is(m,y)}}}break;case"textarea":Go(i,d);break;case"select":a=d.value,a!=null&&as(i,!!d.multiple,a,!1)}},qi=km,Ql=fo;var hI={usingClientEntryPoint:!1,Events:[yu,_a,Ed,Or,Gl,km]},Ru={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fI={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Xl(i),i===null?null:i.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||cI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{Yi=ah.inject(fI),On=ah}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hI,Pn.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Om(a))throw Error(t(200));return uI(i,a,null,d)},Pn.createRoot=function(i,a){if(!Om(i))throw Error(t(299));var d=!1,m="",y=Wx;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Nm(i,1,!1,null,null,d,!1,m,y),i[ms]=a.current,pu(i.nodeType===8?i.parentNode:i),new Dm(a)},Pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Xl(a),i=i===null?null:i.stateNode,i},Pn.flushSync=function(i){return fo(i)},Pn.hydrate=function(i,a,d){if(!ih(a))throw Error(t(200));return oh(null,i,a,!0,d)},Pn.hydrateRoot=function(i,a,d){if(!Om(i))throw Error(t(405));var m=d!=null&&d.hydratedSources||null,y=!1,_="",k=Wx;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(k=d.onRecoverableError)),a=Bx(a,null,i,1,d??null,y,!1,_,k),i[ms]=a.current,pu(i),m)for(i=0;i<m.length;i++)d=m[i],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new sh(a)},Pn.render=function(i,a,d){if(!ih(a))throw Error(t(200));return oh(null,i,a,!1,d)},Pn.unmountComponentAtNode=function(i){if(!ih(i))throw Error(t(40));return i._reactRootContainer?(fo(function(){oh(null,null,i,!1,function(){i._reactRootContainer=null,i[ms]=null})}),!0):!1},Pn.unstable_batchedUpdates=km,Pn.unstable_renderSubtreeIntoContainer=function(i,a,d,m){if(!ih(d))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return oh(i,a,d,!1,m)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var Zx;function HT(){if(Zx)return Vm.exports;Zx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vm.exports=EI(),Vm.exports}var e_;function TI(){if(e_)return lh;e_=1;var n=HT();return lh.createRoot=n.createRoot,lh.hydrateRoot=n.hydrateRoot,lh}var SI=TI();const kI=Vo(SI);var ju={},t_;function CI(){if(t_)return ju;t_=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.parse=l,ju.serialize=h;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function l(w,E){const C=new o,j=w.length;if(j<2)return C;const A=(E==null?void 0:E.decode)||g;let D=0;do{const V=w.indexOf("=",D);if(V===-1)break;const $=w.indexOf(";",D),W=$===-1?j:$;if(V>W){D=w.lastIndexOf(";",V-1)+1;continue}const H=u(w,D,V),F=c(w,V,H),I=w.slice(H,F);if(C[I]===void 0){let b=u(w,V+1,W),S=c(w,W,b);const R=A(w.slice(b,S));C[I]=R}D=W+1}while(D<j);return C}function u(w,E,C){do{const j=w.charCodeAt(E);if(j!==32&&j!==9)return E}while(++E<C);return C}function c(w,E,C){for(;E>C;){const j=w.charCodeAt(--E);if(j!==32&&j!==9)return E+1}return C}function h(w,E,C){const j=(C==null?void 0:C.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const A=j(E);if(!e.test(A))throw new TypeError(`argument val is invalid: ${E}`);let D=w+"="+A;if(!C)return D;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);D+="; Max-Age="+C.maxAge}if(C.domain){if(!t.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);D+="; Domain="+C.domain}if(C.path){if(!r.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);D+="; Path="+C.path}if(C.expires){if(!v(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);D+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(D+="; HttpOnly"),C.secure&&(D+="; Secure"),C.partitioned&&(D+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":D+="; Priority=Low";break;case"medium":D+="; Priority=Medium";break;case"high":D+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":D+="; SameSite=Strict";break;case"lax":D+="; SameSite=Lax";break;case"none":D+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return D}function g(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function v(w){return s.call(w)==="[object Date]"}return ju}CI();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n_="popstate";function PI(n={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Ig("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:cc(s)}return II(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ar(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AI(){return Math.random().toString(36).substring(2,10)}function r_(n,e){return{usr:n.state,key:n.key,idx:e}}function Ig(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?kl(e):e,state:t,key:e&&e.key||r||AI()}}function cc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function kl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function II(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",c=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let A=g(),D=A==null?null:A-h;h=A,c&&c({action:u,location:j.location,delta:D})}function w(A,D){u="PUSH";let V=Ig(j.location,A,D);h=g()+1;let $=r_(V,h),W=j.createHref(V);try{l.pushState($,"",W)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(W)}o&&c&&c({action:u,location:j.location,delta:1})}function E(A,D){u="REPLACE";let V=Ig(j.location,A,D);h=g();let $=r_(V,h),W=j.createHref(V);l.replaceState($,"",W),o&&c&&c({action:u,location:j.location,delta:0})}function C(A){let D=s.location.origin!=="null"?s.location.origin:s.location.href,V=typeof A=="string"?A:cc(A);return V=V.replace(/ $/,"%20"),ht(D,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,D)}let j={get action(){return u},get location(){return n(s,l)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(n_,v),c=A,()=>{s.removeEventListener(n_,v),c=null}},createHref(A){return e(s,A)},createURL:C,encodeLocation(A){let D=C(A);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:w,replace:E,go(A){return l.go(A)}};return j}function qT(n,e,t="/"){return RI(n,e,t,!1)}function RI(n,e,t,r){let s=typeof e=="string"?kl(e):e,o=Ci(s.pathname||"/",t);if(o==null)return null;let l=KT(n);NI(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=zI(o);u=UI(l[c],h,r)}return u}function KT(n,e=[],t=[],r=""){let s=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=Ps([r,c.relativePath]),g=t.concat(c);o.children&&o.children.length>0&&(ht(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),KT(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:$I(h,o.index),routesMeta:g})};return n.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let c of GT(o.path))s(o,l,c)}),e}function GT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=GT(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&u.push(...l),u.map(c=>n.startsWith("/")&&c===""?"/":c)}function NI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:FI(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var jI=/^:[\w-]+$/,DI=3,OI=2,LI=1,MI=10,VI=-2,s_=n=>n==="*";function $I(n,e){let t=n.split("/"),r=t.length;return t.some(s_)&&(r+=VI),e&&(r+=OI),t.filter(s=>!s_(s)).reduce((s,o)=>s+(jI.test(o)?DI:o===""?LI:MI),r)}function FI(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function UI(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=qh({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},g),w=c.route;if(!v&&h&&t&&!r[r.length-1].route.index&&(v=qh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Ps([o,v.pathname]),pathnameBase:KI(Ps([o,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(o=Ps([o,v.pathnameBase]))}return l}function qh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=BI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:v},w)=>{if(g==="*"){let C=u[w]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const E=u[w];return v&&!E?h[g]=void 0:h[g]=(E||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:n}}function BI(n,e=!1,t=!0){Ar(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ar(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ci(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function WI(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?kl(n):n;return{pathname:t?t.startsWith("/")?t:HI(t,e):e,search:GI(r),hash:QI(s)}}function HI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Um(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function F0(n){let e=qI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function U0(n,e,t,r=!1){let s;typeof n=="string"?s=kl(n):(s={...n},ht(!s.pathname||!s.pathname.includes("?"),Um("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),Um("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),Um("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),v-=1;s.pathname=w.join("/")}u=v>=0?e[v]:"/"}let c=WI(s,u),h=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||g)&&(c.pathname+="/"),c}var Ps=n=>n.join("/").replace(/\/\/+/g,"/"),KI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function JI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var QT=["POST","PUT","PATCH","DELETE"];new Set(QT);var YI=["GET",...QT];new Set(YI);var Cl=P.createContext(null);Cl.displayName="DataRouter";var Sf=P.createContext(null);Sf.displayName="DataRouterState";var JT=P.createContext({isTransitioning:!1});JT.displayName="ViewTransition";var XI=P.createContext(new Map);XI.displayName="Fetchers";var ZI=P.createContext(null);ZI.displayName="Await";var Nr=P.createContext(null);Nr.displayName="Navigation";var Ic=P.createContext(null);Ic.displayName="Location";var cr=P.createContext({outlet:null,matches:[],isDataRoute:!1});cr.displayName="Route";var B0=P.createContext(null);B0.displayName="RouteError";function eR(n,{relative:e}={}){ht(Pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=P.useContext(Nr),{hash:s,pathname:o,search:l}=Rc(n,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Ps([t,o])),r.createHref({pathname:u,search:l,hash:s})}function Pl(){return P.useContext(Ic)!=null}function jr(){return ht(Pl(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ic).location}var YT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function XT(n){P.useContext(Nr).static||P.useLayoutEffect(n)}function rn(){let{isDataRoute:n}=P.useContext(cr);return n?mR():tR()}function tR(){ht(Pl(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(Cl),{basename:e,navigator:t}=P.useContext(Nr),{matches:r}=P.useContext(cr),{pathname:s}=jr(),o=JSON.stringify(F0(r)),l=P.useRef(!1);return XT(()=>{l.current=!0}),P.useCallback((c,h={})=>{if(Ar(l.current,YT),!l.current)return;if(typeof c=="number"){t.go(c);return}let g=U0(c,JSON.parse(o),s,h.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ps([e,g.pathname])),(h.replace?t.replace:t.push)(g,h.state,h)},[e,t,o,s,n])}var nR=P.createContext(null);function rR(n){let e=P.useContext(cr).outlet;return e&&P.createElement(nR.Provider,{value:n},e)}function kf(){let{matches:n}=P.useContext(cr),e=n[n.length-1];return e?e.params:{}}function Rc(n,{relative:e}={}){let{matches:t}=P.useContext(cr),{pathname:r}=jr(),s=JSON.stringify(F0(t));return P.useMemo(()=>U0(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function sR(n,e){return ZT(n,e)}function ZT(n,e,t,r){var V;ht(Pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=P.useContext(Nr),{matches:l}=P.useContext(cr),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let $=v&&v.path||"";eS(h,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let w=jr(),E;if(e){let $=typeof e=="string"?kl(e):e;ht(g==="/"||((V=$.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),E=$}else E=w;let C=E.pathname||"/",j=C;if(g!=="/"){let $=g.replace(/^\//,"").split("/");j="/"+C.replace(/^\//,"").split("/").slice($.length).join("/")}let A=!o&&t&&t.matches&&t.matches.length>0?t.matches:qT(n,{pathname:j});Ar(v||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Ar(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=uR(A&&A.map($=>Object.assign({},$,{params:Object.assign({},c,$.params),pathname:Ps([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Ps([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,t,r);return e&&D?P.createElement(Ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},D):D}function iR(){let n=pR(),e=JI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:o},"ErrorBoundary")," or"," ",P.createElement("code",{style:o},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,l)}var oR=P.createElement(iR,null),aR=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?P.createElement(cr.Provider,{value:this.props.routeContext},P.createElement(B0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lR({routeContext:n,match:e,children:t}){let r=P.useContext(Cl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(cr.Provider,{value:n},t)}function uR(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,o=t==null?void 0:t.errors;if(o!=null){let c=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);ht(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(t)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:g,errors:v}=t,w=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||w){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,h,g)=>{let v,w=!1,E=null,C=null;t&&(v=o&&h.route.id?o[h.route.id]:void 0,E=h.route.errorElement||oR,l&&(u<0&&g===0?(eS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,C=null):u===g&&(w=!0,C=h.route.hydrateFallbackElement||null)));let j=e.concat(s.slice(0,g+1)),A=()=>{let D;return v?D=E:w?D=C:h.route.Component?D=P.createElement(h.route.Component,null):h.route.element?D=h.route.element:D=c,P.createElement(lR,{match:h,routeContext:{outlet:c,matches:j,isDataRoute:t!=null},children:D})};return t&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?P.createElement(aR,{location:t.location,revalidation:t.revalidation,component:E,error:v,children:A(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):A()},null)}function z0(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cR(n){let e=P.useContext(Cl);return ht(e,z0(n)),e}function dR(n){let e=P.useContext(Sf);return ht(e,z0(n)),e}function hR(n){let e=P.useContext(cr);return ht(e,z0(n)),e}function W0(n){let e=hR(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function fR(){return W0("useRouteId")}function pR(){var r;let n=P.useContext(B0),e=dR("useRouteError"),t=W0("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function mR(){let{router:n}=cR("useNavigate"),e=W0("useNavigate"),t=P.useRef(!1);return XT(()=>{t.current=!0}),P.useCallback(async(s,o={})=>{Ar(t.current,YT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var i_={};function eS(n,e,t){!e&&!i_[n]&&(i_[n]=!0,Ar(!1,t))}P.memo(gR);function gR({routes:n,future:e,state:t}){return ZT(n,void 0,t,e)}function yR({to:n,replace:e,state:t,relative:r}){ht(Pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Nr);Ar(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=P.useContext(cr),{pathname:l}=jr(),u=rn(),c=U0(n,F0(o),l,r==="path"),h=JSON.stringify(c);return P.useEffect(()=>{u(JSON.parse(h),{replace:e,state:t,relative:r})},[u,h,r,e,t]),null}function tS(n){return rR(n.context)}function Xe(n){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vR({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){ht(!Pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),u=P.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof t=="string"&&(t=kl(t));let{pathname:c="/",search:h="",hash:g="",state:v=null,key:w="default"}=t,E=P.useMemo(()=>{let C=Ci(c,l);return C==null?null:{location:{pathname:C,search:h,hash:g,state:v,key:w},navigationType:r}},[l,c,h,g,v,w,r]);return Ar(E!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:P.createElement(Nr.Provider,{value:u},P.createElement(Ic.Provider,{children:e,value:E}))}function wR({children:n,location:e}){return sR(Rg(n),e)}function Rg(n,e=[]){let t=[];return P.Children.forEach(n,(r,s)=>{if(!P.isValidElement(r))return;let o=[...e,s];if(r.type===P.Fragment){t.push.apply(t,Rg(r.props.children,o));return}ht(r.type===Xe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Rg(r.props.children,o)),t.push(l)}),t}var Ah="get",Ih="application/x-www-form-urlencoded";function Cf(n){return n!=null&&typeof n.tagName=="string"}function xR(n){return Cf(n)&&n.tagName.toLowerCase()==="button"}function _R(n){return Cf(n)&&n.tagName.toLowerCase()==="form"}function bR(n){return Cf(n)&&n.tagName.toLowerCase()==="input"}function ER(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function TR(n,e){return n.button===0&&(!e||e==="_self")&&!ER(n)}var uh=null;function SR(){if(uh===null)try{new FormData(document.createElement("form"),0),uh=!1}catch{uh=!0}return uh}var kR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bm(n){return n!=null&&!kR.has(n)?(Ar(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ih}"`),null):n}function CR(n,e){let t,r,s,o,l;if(_R(n)){let u=n.getAttribute("action");r=u?Ci(u,e):null,t=n.getAttribute("method")||Ah,s=Bm(n.getAttribute("enctype"))||Ih,o=new FormData(n)}else if(xR(n)||bR(n)&&(n.type==="submit"||n.type==="image")){let u=n.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||u.getAttribute("action");if(r=c?Ci(c,e):null,t=n.getAttribute("formmethod")||u.getAttribute("method")||Ah,s=Bm(n.getAttribute("formenctype"))||Bm(u.getAttribute("enctype"))||Ih,o=new FormData(u,n),!SR()){let{name:h,type:g,value:v}=n;if(g==="image"){let w=h?`${h}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else h&&o.append(h,v)}}else{if(Cf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ah,r=null,s=Ih,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}function H0(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function PR(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function IR(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await PR(o,t);return l.links?l.links():[]}return[]}));return DR(r.flat(1).filter(AR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function o_(n,e,t,r,s,o){let l=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,u=(c,h)=>{var g;return t[h].pathname!==c.pathname||((g=t[h].route.path)==null?void 0:g.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,h)=>l(c,h)||u(c,h)):o==="data"?e.filter((c,h)=>{var v;let g=r.routes[c.route.id];if(!g||!g.hasLoader)return!1;if(l(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let w=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function RR(n,e){return NR(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function NR(n){return[...new Set(n)]}function jR(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function DR(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(jR(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function OR(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function LR(){let n=P.useContext(Cl);return H0(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function MR(){let n=P.useContext(Sf);return H0(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var q0=P.createContext(void 0);q0.displayName="FrameworkContext";function nS(){let n=P.useContext(q0);return H0(n,"You must render this element inside a <HydratedRouter> element"),n}function VR(n,e){let t=P.useContext(q0),[r,s]=P.useState(!1),[o,l]=P.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:g,onTouchStart:v}=e,w=P.useRef(null);P.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let j=D=>{D.forEach(V=>{l(V.isIntersecting)})},A=new IntersectionObserver(j,{threshold:.5});return w.current&&A.observe(w.current),()=>{A.disconnect()}}},[n]),P.useEffect(()=>{if(r){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[r]);let E=()=>{s(!0)},C=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:Du(u,E),onBlur:Du(c,C),onMouseEnter:Du(h,E),onMouseLeave:Du(g,C),onTouchStart:Du(v,E)}]:[!1,w,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function $R({page:n,...e}){let{router:t}=LR(),r=P.useMemo(()=>qT(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?P.createElement(UR,{page:n,matches:r,...e}):null}function FR(n){let{manifest:e,routeModules:t}=nS(),[r,s]=P.useState([]);return P.useEffect(()=>{let o=!1;return IR(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function UR({page:n,matches:e,...t}){let r=jr(),{manifest:s,routeModules:o}=nS(),{loaderData:l,matches:u}=MR(),c=P.useMemo(()=>o_(n,e,u,s,r,"data"),[n,e,u,s,r]),h=P.useMemo(()=>o_(n,e,u,s,r,"assets"),[n,e,u,s,r]),g=P.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let E=new Set,C=!1;if(e.forEach(A=>{var V;let D=s.routes[A.route.id];!D||!D.hasLoader||(!c.some($=>$.route.id===A.route.id)&&A.route.id in l&&((V=o[A.route.id])!=null&&V.shouldRevalidate)||D.hasClientLoader?C=!0:E.add(A.route.id))}),E.size===0)return[];let j=OR(n);return C&&E.size>0&&j.searchParams.set("_routes",e.filter(A=>E.has(A.route.id)).map(A=>A.route.id).join(",")),[j.pathname+j.search]},[l,r,s,c,e,n,o]),v=P.useMemo(()=>RR(h,s),[h,s]),w=FR(h);return P.createElement(P.Fragment,null,g.map(E=>P.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...t})),v.map(E=>P.createElement("link",{key:E,rel:"modulepreload",href:E,...t})),w.map(({key:E,link:C})=>P.createElement("link",{key:E,...C})))}function BR(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var rS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rS&&(window.__reactRouterVersion="7.1.5")}catch{}function zR({basename:n,children:e,window:t}){let r=P.useRef();r.current==null&&(r.current=PI({window:t,v5Compat:!0}));let s=r.current,[o,l]=P.useState({action:s.action,location:s.location}),u=P.useCallback(c=>{P.startTransition(()=>l(c))},[l]);return P.useLayoutEffect(()=>s.listen(u),[s,u]),P.createElement(vR,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var sS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=P.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:g,viewTransition:v,...w},E){let{basename:C}=P.useContext(Nr),j=typeof h=="string"&&sS.test(h),A,D=!1;if(typeof h=="string"&&j&&(A=h,rS))try{let S=new URL(window.location.href),R=h.startsWith("//")?new URL(S.protocol+h):new URL(h),M=Ci(R.pathname,C);R.origin===S.origin&&M!=null?h=M+R.search+R.hash:D=!0}catch{Ar(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=eR(h,{relative:s}),[$,W,H]=VR(r,w),F=KR(h,{replace:l,state:u,target:c,preventScrollReset:g,relative:s,viewTransition:v});function I(S){e&&e(S),S.defaultPrevented||F(S)}let b=P.createElement("a",{...w,...H,href:A||V,onClick:D||o?e:I,ref:BR(E,W),target:c,"data-discover":!j&&t==="render"?"true":void 0});return $&&!j?P.createElement(P.Fragment,null,b,P.createElement($R,{page:V})):b});it.displayName="Link";var WR=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:c,...h},g){let v=Rc(l,{relative:h.relative}),w=jr(),E=P.useContext(Sf),{navigator:C,basename:j}=P.useContext(Nr),A=E!=null&&XR(v)&&u===!0,D=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,V=w.pathname,$=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(V=V.toLowerCase(),$=$?$.toLowerCase():null,D=D.toLowerCase()),$&&j&&($=Ci($,j)||$);const W=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let H=V===D||!s&&V.startsWith(D)&&V.charAt(W)==="/",F=$!=null&&($===D||!s&&$.startsWith(D)&&$.charAt(D.length)==="/"),I={isActive:H,isPending:F,isTransitioning:A},b=H?e:void 0,S;typeof r=="function"?S=r(I):S=[r,H?"active":null,F?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(I):o;return P.createElement(it,{...h,"aria-current":b,className:S,ref:g,style:R,to:l,viewTransition:u},typeof c=="function"?c(I):c)});WR.displayName="NavLink";var HR=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=Ah,action:u,onSubmit:c,relative:h,preventScrollReset:g,viewTransition:v,...w},E)=>{let C=JR(),j=YR(u,{relative:h}),A=l.toLowerCase()==="get"?"get":"post",D=typeof u=="string"&&sS.test(u),V=$=>{if(c&&c($),$.defaultPrevented)return;$.preventDefault();let W=$.nativeEvent.submitter,H=(W==null?void 0:W.getAttribute("formmethod"))||l;C(W||$.currentTarget,{fetcherKey:e,method:H,navigate:t,replace:s,state:o,relative:h,preventScrollReset:g,viewTransition:v})};return P.createElement("form",{ref:E,method:A,action:j,onSubmit:r?c:V,...w,"data-discover":!D&&n==="render"?"true":void 0})});HR.displayName="Form";function qR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iS(n){let e=P.useContext(Cl);return ht(e,qR(n)),e}function KR(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=rn(),c=jr(),h=Rc(n,{relative:o});return P.useCallback(g=>{if(TR(g,e)){g.preventDefault();let v=t!==void 0?t:cc(c)===cc(h);u(n,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,t,r,e,n,s,o,l])}var GR=0,QR=()=>`__${String(++GR)}__`;function JR(){let{router:n}=iS("useSubmit"),{basename:e}=P.useContext(Nr),t=fR();return P.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=CR(r,e);if(s.navigate===!1){let g=s.fetcherKey||QR();await n.fetch(g,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function YR(n,{relative:e}={}){let{basename:t}=P.useContext(Nr),r=P.useContext(cr);ht(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Rc(n||".",{relative:e})},l=jr();if(n==null){o.search=l.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(g=>g==="")){u.delete("index"),c.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Ps([t,o.pathname])),cc(o)}function XR(n,e={}){let t=P.useContext(JT);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=iS("useViewTransitionState"),s=Rc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Ci(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Ci(t.nextLocation.pathname,r)||t.nextLocation.pathname;return qh(s.pathname,l)!=null||qh(s.pathname,o)!=null}new TextEncoder;var ZR=HT();const ch=Vo(ZR);var zm,a_;function eN(){if(a_)return zm;a_=1;var n=typeof Element<"u",e=typeof Map=="function",t=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,c,h;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(!s(o[c],l[c]))return!1;return!0}var g;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;for(g=o.entries();!(c=g.next()).done;)if(!s(c.value[1],l.get(c.value[0])))return!1;return!0}if(t&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(o[c]!==l[c])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),u=h.length,u!==Object.keys(l).length)return!1;for(c=u;c--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[c]))return!1;if(n&&o instanceof Element)return!1;for(c=u;c--!==0;)if(!((h[c]==="_owner"||h[c]==="__v"||h[c]==="__o")&&o.$$typeof)&&!s(o[h[c]],l[h[c]]))return!1;return!0}return o!==o&&l!==l}return zm=function(l,u){try{return s(l,u)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},zm}var tN=eN();const nN=Vo(tN);var Wm,l_;function rN(){if(l_)return Wm;l_=1;var n=function(e,t,r,s,o,l,u,c){if(!e){var h;if(t===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[r,s,o,l,u,c],v=0;h=new Error(t.replace(/%s/g,function(){return g[v++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Wm=n,Wm}var sN=rN();const u_=Vo(sN);var Hm,c_;function iN(){return c_||(c_=1,Hm=function(e,t,r,s){var o=r?r.call(s,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var l=Object.keys(e),u=Object.keys(t);if(l.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),h=0;h<l.length;h++){var g=l[h];if(!c(g))return!1;var v=e[g],w=t[g];if(o=r?r.call(s,v,w,g):void 0,o===!1||o===void 0&&v!==w)return!1}return!0}),Hm}var oN=iN();const aN=Vo(oN);var oS=(n=>(n.BASE="base",n.BODY="body",n.HEAD="head",n.HTML="html",n.LINK="link",n.META="meta",n.NOSCRIPT="noscript",n.SCRIPT="script",n.STYLE="style",n.TITLE="title",n.FRAGMENT="Symbol(react.fragment)",n))(oS||{}),qm={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},d_=Object.values(oS),K0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},lN=Object.entries(K0).reduce((n,[e,t])=>(n[t]=e,n),{}),Pr="data-rh",sl={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},il=(n,e)=>{for(let t=n.length-1;t>=0;t-=1){const r=n[t];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},uN=n=>{let e=il(n,"title");const t=il(n,sl.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),t&&e)return t.replace(/%s/g,()=>e);const r=il(n,sl.DEFAULT_TITLE);return e||r||void 0},cN=n=>il(n,sl.ON_CHANGE_CLIENT_STATE)||(()=>{}),Km=(n,e)=>e.filter(t=>typeof t[n]<"u").map(t=>t[n]).reduce((t,r)=>({...t,...r}),{}),dN=(n,e)=>e.filter(t=>typeof t.base<"u").map(t=>t.base).reverse().reduce((t,r)=>{if(!t.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const u=s[o].toLowerCase();if(n.indexOf(u)!==-1&&r[u])return t.concat(r)}}return t},[]),hN=n=>console&&typeof console.warn=="function"&&console.warn(n),Ou=(n,e,t)=>{const r={};return t.filter(s=>Array.isArray(s[n])?!0:(typeof s[n]<"u"&&hN(`Helmet: ${n} should be of type "Array". Instead found type "${typeof s[n]}"`),!1)).map(s=>s[n]).reverse().reduce((s,o)=>{const l={};o.filter(c=>{let h;const g=Object.keys(c);for(let w=0;w<g.length;w+=1){const E=g[w],C=E.toLowerCase();e.indexOf(C)!==-1&&!(h==="rel"&&c[h].toLowerCase()==="canonical")&&!(C==="rel"&&c[C].toLowerCase()==="stylesheet")&&(h=C),e.indexOf(E)!==-1&&(E==="innerHTML"||E==="cssText"||E==="itemprop")&&(h=E)}if(!h||!c[h])return!1;const v=c[h].toLowerCase();return r[h]||(r[h]={}),l[h]||(l[h]={}),r[h][v]?!1:(l[h][v]=!0,!0)}).reverse().forEach(c=>s.push(c));const u=Object.keys(l);for(let c=0;c<u.length;c+=1){const h=u[c],g={...r[h],...l[h]};r[h]=g}return s},[]).reverse()},fN=(n,e)=>{if(Array.isArray(n)&&n.length){for(let t=0;t<n.length;t+=1)if(n[t][e])return!0}return!1},pN=n=>({baseTag:dN(["href"],n),bodyAttributes:Km("bodyAttributes",n),defer:il(n,sl.DEFER),encode:il(n,sl.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Km("htmlAttributes",n),linkTags:Ou("link",["rel","href"],n),metaTags:Ou("meta",["name","charset","http-equiv","property","itemprop"],n),noscriptTags:Ou("noscript",["innerHTML"],n),onChangeClientState:cN(n),scriptTags:Ou("script",["src","innerHTML"],n),styleTags:Ou("style",["cssText"],n),title:uN(n),titleAttributes:Km("titleAttributes",n),prioritizeSeoTags:fN(n,sl.PRIORITIZE_SEO_TAGS)}),aS=n=>Array.isArray(n)?n.join(""):n,mN=(n,e)=>{const t=Object.keys(n);for(let r=0;r<t.length;r+=1)if(e[t[r]]&&e[t[r]].includes(n[t[r]]))return!0;return!1},Gm=(n,e)=>Array.isArray(n)?n.reduce((t,r)=>(mN(r,e)?t.priority.push(r):t.default.push(r),t),{priority:[],default:[]}):{default:n,priority:[]},h_=(n,e)=>({...n,[e]:void 0}),gN=["noscript","script","style"],Ng=(n,e=!0)=>e===!1?String(n):String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),lS=n=>Object.keys(n).reduce((e,t)=>{const r=typeof n[t]<"u"?`${t}="${n[t]}"`:`${t}`;return e?`${e} ${r}`:r},""),yN=(n,e,t,r)=>{const s=lS(t),o=aS(e);return s?`<${n} ${Pr}="true" ${s}>${Ng(o,r)}</${n}>`:`<${n} ${Pr}="true">${Ng(o,r)}</${n}>`},vN=(n,e,t=!0)=>e.reduce((r,s)=>{const o=s,l=Object.keys(o).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,g)=>{const v=typeof o[g]>"u"?g:`${g}="${Ng(o[g],t)}"`;return h?`${h} ${v}`:v},""),u=o.innerHTML||o.cssText||"",c=gN.indexOf(n)===-1;return`${r}<${n} ${Pr}="true" ${l}${c?"/>":`>${u}</${n}>`}`},""),uS=(n,e={})=>Object.keys(n).reduce((t,r)=>{const s=K0[r];return t[s||r]=n[r],t},e),wN=(n,e,t)=>{const r={key:e,[Pr]:!0},s=uS(t,r);return[tt.createElement("title",s,e)]},Rh=(n,e)=>e.map((t,r)=>{const s={key:r,[Pr]:!0};return Object.keys(t).forEach(o=>{const u=K0[o]||o;if(u==="innerHTML"||u==="cssText"){const c=t.innerHTML||t.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[u]=t[o]}),tt.createElement(n,s)}),ir=(n,e,t=!0)=>{switch(n){case"title":return{toComponent:()=>wN(n,e.title,e.titleAttributes),toString:()=>yN(n,e.title,e.titleAttributes,t)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>uS(e),toString:()=>lS(e)};default:return{toComponent:()=>Rh(n,e),toString:()=>vN(n,e,t)}}},xN=({metaTags:n,linkTags:e,scriptTags:t,encode:r})=>{const s=Gm(n,qm.meta),o=Gm(e,qm.link),l=Gm(t,qm.script);return{priorityMethods:{toComponent:()=>[...Rh("meta",s.priority),...Rh("link",o.priority),...Rh("script",l.priority)],toString:()=>`${ir("meta",s.priority,r)} ${ir("link",o.priority,r)} ${ir("script",l.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:l.default}},_N=n=>{const{baseTag:e,bodyAttributes:t,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:l,title:u="",titleAttributes:c,prioritizeSeoTags:h}=n;let{linkTags:g,metaTags:v,scriptTags:w}=n,E={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:E,linkTags:g,metaTags:v,scriptTags:w}=xN(n)),{priority:E,base:ir("base",e,r),bodyAttributes:ir("bodyAttributes",t,r),htmlAttributes:ir("htmlAttributes",s,r),link:ir("link",g,r),meta:ir("meta",v,r),noscript:ir("noscript",o,r),script:ir("script",w,r),style:ir("style",l,r),title:ir("title",{title:u,titleAttributes:c},r)}},jg=_N,dh=[],cS=!!(typeof window<"u"&&window.document&&window.document.createElement),Dg=class{constructor(n,e){Es(this,"instances",[]);Es(this,"canUseDOM",cS);Es(this,"context");Es(this,"value",{setHelmet:n=>{this.context.helmet=n},helmetInstances:{get:()=>this.canUseDOM?dh:this.instances,add:n=>{(this.canUseDOM?dh:this.instances).push(n)},remove:n=>{const e=(this.canUseDOM?dh:this.instances).indexOf(n);(this.canUseDOM?dh:this.instances).splice(e,1)}}});this.context=n,this.canUseDOM=e||!1,e||(n.helmet=jg({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},bN={},dS=tt.createContext(bN),Ao,hS=(Ao=class extends P.Component{constructor(t){super(t);Es(this,"helmetData");this.helmetData=new Dg(this.props.context||{},Ao.canUseDOM)}render(){return tt.createElement(dS.Provider,{value:this.helmetData.value},this.props.children)}},Es(Ao,"canUseDOM",cS),Ao),La=(n,e)=>{const t=document.head||document.querySelector("head"),r=t.querySelectorAll(`${n}[${Pr}]`),s=[].slice.call(r),o=[];let l;return e&&e.length&&e.forEach(u=>{const c=document.createElement(n);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h))if(h==="innerHTML")c.innerHTML=u.innerHTML;else if(h==="cssText")c.styleSheet?c.styleSheet.cssText=u.cssText:c.appendChild(document.createTextNode(u.cssText));else{const g=h,v=typeof u[g]>"u"?"":u[g];c.setAttribute(h,v)}c.setAttribute(Pr,"true"),s.some((h,g)=>(l=g,c.isEqualNode(h)))?s.splice(l,1):o.push(c)}),s.forEach(u=>{var c;return(c=u.parentNode)==null?void 0:c.removeChild(u)}),o.forEach(u=>t.appendChild(u)),{oldTags:s,newTags:o}},Og=(n,e)=>{const t=document.getElementsByTagName(n)[0];if(!t)return;const r=t.getAttribute(Pr),s=r?r.split(","):[],o=[...s],l=Object.keys(e);for(const u of l){const c=e[u]||"";t.getAttribute(u)!==c&&t.setAttribute(u,c),s.indexOf(u)===-1&&s.push(u);const h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(let u=o.length-1;u>=0;u-=1)t.removeAttribute(o[u]);s.length===o.length?t.removeAttribute(Pr):t.getAttribute(Pr)!==l.join(",")&&t.setAttribute(Pr,l.join(","))},EN=(n,e)=>{typeof n<"u"&&document.title!==n&&(document.title=aS(n)),Og("title",e)},f_=(n,e)=>{const{baseTag:t,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:l,noscriptTags:u,onChangeClientState:c,scriptTags:h,styleTags:g,title:v,titleAttributes:w}=n;Og("body",r),Og("html",s),EN(v,w);const E={baseTag:La("base",t),linkTags:La("link",o),metaTags:La("meta",l),noscriptTags:La("noscript",u),scriptTags:La("script",h),styleTags:La("style",g)},C={},j={};Object.keys(E).forEach(A=>{const{newTags:D,oldTags:V}=E[A];D.length&&(C[A]=D),V.length&&(j[A]=E[A].oldTags)}),e&&e(),c(n,C,j)},Lu=null,TN=n=>{Lu&&cancelAnimationFrame(Lu),n.defer?Lu=requestAnimationFrame(()=>{f_(n,()=>{Lu=null})}):(f_(n),Lu=null)},SN=TN,p_=class extends P.Component{constructor(){super(...arguments);Es(this,"rendered",!1)}shouldComponentUpdate(e){return!aN(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:t}=this.props.context;let r=null;const s=pN(e.get().map(o=>{const l={...o.props};return delete l.context,l}));hS.canUseDOM?SN(s):jg&&(r=jg(s)),t(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Ag,kN=(Ag=class extends P.Component{shouldComponentUpdate(n){return!nN(h_(this.props,"helmetData"),h_(n,"helmetData"))}mapNestedChildrenToProps(n,e){if(!e)return null;switch(n.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${n.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(n,e,t,r){return{...e,[n.type]:[...e[n.type]||[],{...t,...this.mapNestedChildrenToProps(n,r)}]}}mapObjectTypeChildren(n,e,t,r){switch(n.type){case"title":return{...e,[n.type]:r,titleAttributes:{...t}};case"body":return{...e,bodyAttributes:{...t}};case"html":return{...e,htmlAttributes:{...t}};default:return{...e,[n.type]:{...t}}}}mapArrayTypeChildrenToProps(n,e){let t={...e};return Object.keys(n).forEach(r=>{t={...t,[r]:n[r]}}),t}warnOnInvalidChildren(n,e){return u_(d_.some(t=>n.type===t),typeof n.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${d_.join(", ")} are allowed. Helmet does not support rendering <${n.type}> elements. Refer to our API for more information.`),u_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(t=>typeof t!="string"),`Helmet expects a string as a child of <${n.type}>. Did you forget to wrap your children in braces? ( <${n.type}>{\`\`}</${n.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(n,e){let t={};return tt.Children.forEach(n,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,l=Object.keys(o).reduce((c,h)=>(c[lN[h]||h]=o[h],c),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,s),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":t=this.flattenArrayTypeChildren(r,t,l,s);break;default:e=this.mapObjectTypeChildren(r,e,l,s);break}}),this.mapArrayTypeChildrenToProps(t,e)}render(){const{children:n,...e}=this.props;let t={...e},{helmetData:r}=e;if(n&&(t=this.mapChildrenToProps(n,t)),r&&!(r instanceof Dg)){const s=r;r=new Dg(s.context,!0),delete t.helmetData}return r?tt.createElement(p_,{...t,context:r.value}):tt.createElement(dS.Consumer,null,s=>tt.createElement(p_,{...t,context:s}))}},Es(Ag,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Ag);function Kh(){return Kh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kh.apply(null,arguments)}function G0(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Lg(n,e){return Lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Lg(n,e)}function Q0(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Lg(n,e)}function CN(n,e){return n.classList?!!e&&n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function PN(n,e){n.classList?n.classList.add(e):CN(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function m_(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function AN(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=m_(n.className,e):n.setAttribute("class",m_(n.className&&n.className.baseVal||"",e))}const g_={disabled:!1},Gh=tt.createContext(null);var fS=function(e){return e.scrollTop},Uu="unmounted",wo="exited",xo="entering",qa="entered",Mg="exiting",Vs=function(n){Q0(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,c;return o.appearStatus=null,r.in?u?(c=wo,o.appearStatus=xo):c=qa:r.unmountOnExit||r.mountOnEnter?c=Uu:c=wo,o.state={status:c},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Uu?{status:wo}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==xo&&l!==qa&&(o=xo):(l===xo||l===qa)&&(o=Mg)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},t.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===xo){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:ch.findDOMNode(this);l&&fS(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===wo&&this.setState({status:Uu})},t.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,c=this.props.nodeRef?[u]:[ch.findDOMNode(this),u],h=c[0],g=c[1],v=this.getTimeouts(),w=u?v.appear:v.enter;if(!s&&!l||g_.disabled){this.safeSetState({status:qa},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:xo},function(){o.props.onEntering(h,g),o.onTransitionEnd(w,function(){o.safeSetState({status:qa},function(){o.props.onEntered(h,g)})})})},t.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:ch.findDOMNode(this);if(!o||g_.disabled){this.safeSetState({status:wo},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Mg},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:wo},function(){s.props.onExited(u)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},t.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:ch.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=c[0],g=c[1];this.props.addEndListener(h,g)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Uu)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=G0(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return tt.createElement(Gh.Provider,{value:null},typeof l=="function"?l(s,u):tt.cloneElement(tt.Children.only(l),u))},e}(tt.Component);Vs.contextType=Gh;Vs.propTypes={};function Ma(){}Vs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ma,onEntering:Ma,onEntered:Ma,onExit:Ma,onExiting:Ma,onExited:Ma};Vs.UNMOUNTED=Uu;Vs.EXITED=wo;Vs.ENTERING=xo;Vs.ENTERED=qa;Vs.EXITING=Mg;var IN=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return PN(e,r)})},Qm=function(e,t){return e&&t&&t.split(" ").forEach(function(r){return AN(e,r)})},Pf=function(n){Q0(e,n);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=n.call.apply(n,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1];r.removeClasses(g,"exit"),r.addClass(g,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(u,c)},r.onEntering=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],w=v?"appear":"enter";r.addClass(g,w,"active"),r.props.onEntering&&r.props.onEntering(u,c)},r.onEntered=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],w=v?"appear":"enter";r.removeClasses(g,w),r.addClass(g,w,"done"),r.props.onEntered&&r.props.onEntered(u,c)},r.onExit=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(u)},r.onExiting=function(u){var c=r.resolveArguments(u),h=c[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(u)},r.onExited=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(u)},r.resolveArguments=function(u,c){return r.props.nodeRef?[r.props.nodeRef.current,u]:[u,c]},r.getClassNames=function(u){var c=r.props.classNames,h=typeof c=="string",g=h&&c?c+"-":"",v=h?""+g+u:c[u],w=h?v+"-active":c[u+"Active"],E=h?v+"-done":c[u+"Done"];return{baseClassName:v,activeClassName:w,doneClassName:E}},r}var t=e.prototype;return t.addClass=function(s,o,l){var u=this.getClassNames(o)[l+"ClassName"],c=this.getClassNames("enter"),h=c.doneClassName;o==="appear"&&l==="done"&&h&&(u+=" "+h),l==="active"&&s&&fS(s),u&&(this.appliedClasses[o][l]=u,IN(s,u))},t.removeClasses=function(s,o){var l=this.appliedClasses[o],u=l.base,c=l.active,h=l.done;this.appliedClasses[o]={},u&&Qm(s,u),c&&Qm(s,c),h&&Qm(s,h)},t.render=function(){var s=this.props;s.classNames;var o=G0(s,["classNames"]);return tt.createElement(Vs,Kh({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(tt.Component);Pf.defaultProps={classNames:""};Pf.propTypes={};function RN(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function J0(n,e){var t=function(o){return e&&P.isValidElement(o)?e(o):o},r=Object.create(null);return n&&P.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function NN(n,e){n=n||{},e=e||{};function t(g){return g in e?e[g]:n[g]}var r=Object.create(null),s=[];for(var o in n)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var c in e){if(r[c])for(l=0;l<r[c].length;l++){var h=r[c][l];u[r[c][l]]=t(h)}u[c]=t(c)}for(l=0;l<s.length;l++)u[s[l]]=t(s[l]);return u}function So(n,e,t){return t[e]!=null?t[e]:n.props[e]}function jN(n,e){return J0(n.children,function(t){return P.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:So(t,"appear",n),enter:So(t,"enter",n),exit:So(t,"exit",n)})})}function DN(n,e,t){var r=J0(n.children),s=NN(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(P.isValidElement(l)){var u=o in e,c=o in r,h=e[o],g=P.isValidElement(h)&&!h.props.in;c&&(!u||g)?s[o]=P.cloneElement(l,{onExited:t.bind(null,l),in:!0,exit:So(l,"exit",n),enter:So(l,"enter",n)}):!c&&u&&!g?s[o]=P.cloneElement(l,{in:!1}):c&&u&&P.isValidElement(h)&&(s[o]=P.cloneElement(l,{onExited:t.bind(null,l),in:h.props.in,exit:So(l,"exit",n),enter:So(l,"enter",n)}))}}),s}var ON=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},LN={component:"div",childFactory:function(e){return e}},Af=function(n){Q0(e,n);function e(r,s){var o;o=n.call(this,r,s)||this;var l=o.handleExited.bind(RN(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,c=o.firstRender;return{children:c?jN(s,u):DN(s,l,u),firstRender:!1}},t.handleExited=function(s,o){var l=J0(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var c=Kh({},u.children);return delete c[s.key],{children:c}}))},t.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=G0(s,["component","childFactory"]),c=this.state.contextValue,h=ON(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?tt.createElement(Gh.Provider,{value:c},h):tt.createElement(Gh.Provider,{value:c},tt.createElement(o,u,h))},e}(tt.Component);Af.propTypes={};Af.defaultProps=LN;const MN="modulepreload",VN=function(n){return"/aussie-gut-pack/"+n},y_={},fl=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=VN(c),c in y_)return;y_[c]=!0;const h=c.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":MN,h||(v.as="script"),v.crossOrigin="",v.href=c,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((w,E)=>{v.addEventListener("load",w),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},$N=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Al);return{default:r}},[]).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Y0 extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class FN extends Y0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class UN extends Y0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class BN extends Y0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Vg||(Vg={}));var zN=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};class WN{constructor(e,{headers:t={},customFetch:r,region:s=Vg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=$N(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return zN(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let u={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(u["x-region"]=c);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h}).catch(C=>{throw new FN(C)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new UN(g);if(!g.ok)throw new BN(g);let w=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),E;return w==="application/json"?E=yield g.json():w==="application/octet-stream"?E=yield g.blob():w==="text/event-stream"?E=g:w==="multipart/form-data"?E=yield g.formData():E=yield g.text(),{data:E,error:null}}catch(s){return{data:null,error:s}}})}}var Wt={},Va={},$a={},Fa={},Ua={},Ba={},HN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pl=HN();const qN=pl.fetch,pS=pl.fetch.bind(pl),mS=pl.Headers,KN=pl.Request,GN=pl.Response,Al=Object.freeze(Object.defineProperty({__proto__:null,Headers:mS,Request:KN,Response:GN,default:pS,fetch:qN},Symbol.toStringTag,{value:"Module"})),QN=yI(Al);var hh={},v_;function gS(){if(v_)return hh;v_=1,Object.defineProperty(hh,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return hh.default=n,hh}var w_;function yS(){if(w_)return Ba;w_=1;var n=Ba&&Ba.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ba,"__esModule",{value:!0});const e=n(QN),t=n(gS());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,v,w;let E=null,C=null,j=null,A=h.status,D=h.statusText;if(h.ok){if(this.method!=="HEAD"){const H=await h.text();H===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?C=H:C=JSON.parse(H))}const $=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),W=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");$&&W&&W.length>1&&(j=parseInt(W[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(E={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,j=null,A=406,D="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const $=await h.text();try{E=JSON.parse($),Array.isArray(E)&&h.status===404&&(C=[],E=null,A=200,D="OK")}catch{h.status===404&&$===""?(A=204,D="No Content"):E={message:$}}if(E&&this.isMaybeSingle&&(!((w=E==null?void 0:E.details)===null||w===void 0)&&w.includes("0 rows"))&&(E=null,A=200,D="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:C,count:j,status:A,statusText:D}});return this.shouldThrowOnError||(c=c.catch(h=>{var g,v,w;return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(v=h==null?void 0:h.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(w=h==null?void 0:h.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return Ba.default=r,Ba}var x_;function vS(){if(x_)return Ua;x_=1;var n=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0});const e=n(yS());class t extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const h=c?`${c}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:h="text"}={}){var g;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),w=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${w}"; options=${v};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ua.default=t,Ua}var __;function X0(){if(__)return Fa;__=1;var n=Fa&&Fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fa,"__esModule",{value:!0});const e=n(vS());class t extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Fa.default=t,Fa}var b_;function wS(){if(b_)return $a;b_=1;var n=$a&&$a.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($a,"__esModule",{value:!0});const e=n(X0());class t{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let c=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),c||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const v=s.reduce((w,E)=>w.concat(Object.keys(E)),[]);if(v.length>0){const w=[...new Set(v)].map(E=>`"${E}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return $a.default=t,$a}var Mu={},Vu={},E_;function JN(){return E_||(E_=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.version=void 0,Vu.version="0.0.0-automated"),Vu}var T_;function YN(){if(T_)return Mu;T_=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.DEFAULT_HEADERS=void 0;const n=JN();return Mu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`},Mu}var S_;function XN(){if(S_)return Va;S_=1;var n=Va&&Va.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Va,"__esModule",{value:!0});const e=n(wS()),t=n(X0()),r=YN();class s{constructor(l,{headers:u={},schema:c,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=c,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:c=!1,get:h=!1,count:g}={}){let v;const w=new URL(`${this.url}/rpc/${l}`);let E;c||h?(v=c?"HEAD":"GET",Object.entries(u).filter(([j,A])=>A!==void 0).map(([j,A])=>[j,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([j,A])=>{w.searchParams.append(j,A)})):(v="POST",E=u);const C=Object.assign({},this.headers);return g&&(C.Prefer=`count=${g}`),new t.default({method:v,url:w,headers:C,schema:this.schemaName,body:E,fetch:this.fetch,allowEmpty:!1})}}return Va.default=s,Va}var k_;function ZN(){if(k_)return Wt;k_=1;var n=Wt&&Wt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PostgrestError=Wt.PostgrestBuilder=Wt.PostgrestTransformBuilder=Wt.PostgrestFilterBuilder=Wt.PostgrestQueryBuilder=Wt.PostgrestClient=void 0;const e=n(XN());Wt.PostgrestClient=e.default;const t=n(wS());Wt.PostgrestQueryBuilder=t.default;const r=n(X0());Wt.PostgrestFilterBuilder=r.default;const s=n(vS());Wt.PostgrestTransformBuilder=s.default;const o=n(yS());Wt.PostgrestBuilder=o.default;const l=n(gS());return Wt.PostgrestError=l.default,Wt.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},Wt}var e2=ZN();const t2=Vo(e2),{PostgrestClient:n2,PostgrestQueryBuilder:rB,PostgrestFilterBuilder:sB,PostgrestTransformBuilder:iB,PostgrestBuilder:oB,PostgrestError:aB}=t2,r2="2.11.2",s2={"X-Client-Info":`realtime-js/${r2}`},i2="1.0.0",xS=1e4,o2=1e3;var ol;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ol||(ol={}));var Bn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Bn||(Bn={}));var Cr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Cr||(Cr={}));var $g;(function(n){n.websocket="websocket"})($g||($g={}));var To;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(To||(To={}));class a2{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:c,payload:h}}}class _S{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(st||(st={}));const C_=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=l2(l,n,e,s),o),{})},l2=(n,e,t,r)=>{const s=e.find(u=>u.name===n),o=s==null?void 0:s.type,l=t[n];return o&&!r.includes(o)?bS(o,l):Fg(l)},bS=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return h2(e,t)}switch(n){case st.bool:return u2(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return c2(e);case st.json:case st.jsonb:return d2(e);case st.timestamp:return f2(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Fg(e);default:return Fg(e)}},Fg=n=>n,u2=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},c2=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},d2=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},h2=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>bS(e,u))}return n},f2=n=>typeof n=="string"?n.replace(" ","T"):n,ES=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Jm{constructor(e,t,r={},s=xS){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var P_;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(P_||(P_={}));class Yu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(c=>{this.state=Yu.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Yu.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),u={},c={};return this.map(o,(h,g)=>{l[h]||(c[h]=g)}),this.map(l,(h,g)=>{const v=o[h];if(v){const w=g.map(A=>A.presence_ref),E=v.map(A=>A.presence_ref),C=g.filter(A=>E.indexOf(A.presence_ref)<0),j=v.filter(A=>w.indexOf(A.presence_ref)<0);C.length>0&&(u[h]=C),j.length>0&&(c[h]=j)}else u[h]=g}),this.syncDiff(o,{joins:u,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,c)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(c),g.length>0){const v=e[u].map(E=>E.presence_ref),w=g.filter(E=>v.indexOf(E.presence_ref)<0);e[u].unshift(...w)}r(u,g,c)}),this.map(l,(u,c)=>{let h=e[u];if(!h)return;const g=c.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,s(u,h,c),h.length===0&&delete e[u]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var A_;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(A_||(A_={}));var I_;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(I_||(I_={}));var Ts;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ts||(Ts={}));class Z0{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Jm(this,Cr.join,this.params,this.timeout),this.rejoinTimer=new _S(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Cr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Yu(this),this.broadcastEndpointURL=ES(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(g=>e==null?void 0:e(Ts.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Ts.CLOSED));const c={},h={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(Ts.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,E=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,C=[];for(let j=0;j<E;j++){const A=w[j],{filter:{event:D,schema:V,table:$,filter:W}}=A,H=g&&g[j];if(H&&H.event===D&&H.schema===V&&H.table===$&&H.filter===W)C.push(Object.assign(Object.assign({},A),{id:H.id}));else{this.unsubscribe(),e==null||e(Ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Ts.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(Ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Cr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Jm(this,Cr.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Jm(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:h,join:g}=Cr;if(r&&[u,c,h,g].indexOf(l)>=0&&r!==this._joinRef())return;let w=this._onMessage(l,t,r);if(t&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(E=>{var C,j,A;return((C=E.filter)===null||C===void 0?void 0:C.event)==="*"||((A=(j=E.filter)===null||j===void 0?void 0:j.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===l}).map(E=>E.callback(w,r)):(o=this.bindings[l])===null||o===void 0||o.filter(E=>{var C,j,A,D,V,$;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in E){const W=E.id,H=(C=E.filter)===null||C===void 0?void 0:C.event;return W&&((j=t.ids)===null||j===void 0?void 0:j.includes(W))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((A=t.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const W=(V=(D=E==null?void 0:E.filter)===null||D===void 0?void 0:D.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return W==="*"||W===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===l}).map(E=>{if(typeof w=="object"&&"ids"in w){const C=w.data,{schema:j,table:A,commit_timestamp:D,type:V,errors:$}=C;w=Object.assign(Object.assign({},{schema:j,table:A,commit_timestamp:D,eventType:V,new:{},old:{},errors:$}),this._getPayloadRecords(C))}E.callback(w,r)})}_isClosed(){return this.state===Bn.closed}_isJoined(){return this.state===Bn.joined}_isJoining(){return this.state===Bn.joining}_isLeaving(){return this.state===Bn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Z0.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Cr.close,{},e)}_onError(e){this._on(Cr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=C_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=C_(e.columns,e.old_record)),t}}const p2=()=>{},m2=typeof WebSocket<"u",g2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class y2{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=s2,this.params={},this.timeout=xS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=p2,this.conn=null,this.sendBuffer=[],this.serializer=new a2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>fl(async()=>{const{default:c}=await Promise.resolve().then(()=>Al);return{default:c}},void 0).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${$g.websocket}`,this.httpEndpoint=ES(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(o,l)=>l(JSON.stringify(o)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _S(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(m2){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new v2(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),fl(async()=>{const{default:e}=await import("./browser-BY8l0ICG.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:i2}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ol.connecting:return To.Connecting;case ol.open:return To.Open;case ol.closing:return To.Closing;default:return To.Closed}}isConnected(){return this.connectionState()===To.Open}channel(e,t={config:{}}){const r=new Z0(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(Cr.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(o2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:o,ref:l}=t;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Cr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([g2],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class v2{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ol.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let ey=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ht(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class w2 extends ey{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ug extends ey{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var x2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};const TS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Al);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},_2=()=>x2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fl(()=>Promise.resolve().then(()=>Al),void 0)).Response:Response}),Bg=n=>{if(Array.isArray(n))return n.map(t=>Bg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Bg(r)}),e};var $o=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};const Ym=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),b2=(n,e,t)=>$o(void 0,void 0,void 0,function*(){const r=yield _2();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new w2(Ym(s),n.status||500))}).catch(s=>{e(new Ug(Ym(s),s))}):e(new Ug(Ym(n),n))}),E2=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function Nc(n,e,t,r,s,o){return $o(this,void 0,void 0,function*(){return new Promise((l,u)=>{n(t,E2(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>b2(c,u,r))})})}function Qh(n,e,t,r){return $o(this,void 0,void 0,function*(){return Nc(n,"GET",e,t,r)})}function pi(n,e,t,r,s){return $o(this,void 0,void 0,function*(){return Nc(n,"POST",e,r,s,t)})}function T2(n,e,t,r,s){return $o(this,void 0,void 0,function*(){return Nc(n,"PUT",e,r,s,t)})}function S2(n,e,t,r){return $o(this,void 0,void 0,function*(){return Nc(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function SS(n,e,t,r,s){return $o(this,void 0,void 0,function*(){return Nc(n,"DELETE",e,r,s,t)})}var An=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};const k2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C2{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=TS(s)}uploadOrUpdate(e,t,r,s){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},R_),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(t),g=this._getFinalPath(h),v=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),w=yield v.json();return v.ok?{data:{path:h,id:w.Id,fullPath:w.Key},error:null}:{data:null,error:w}}catch(o){if(Ht(o))return{data:null,error:o};throw o}})}upload(e,t,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let c;const h=Object.assign({upsert:R_.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:c,headers:g}),w=yield v.json();return v.ok?{data:{path:o,fullPath:w.Key},error:null}:{data:null,error:w}}catch(c){if(Ht(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const o=yield pi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new ey("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}update(e,t,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return An(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}copy(e,t,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return An(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield pi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return An(this,void 0,void 0,function*(){try{const s=yield pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}download(e,t){return An(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Qh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Ht(u))return{data:null,error:u};throw u}})}info(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Qh(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Bg(r),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}exists(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield S2(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ht(r)&&r instanceof Ug){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&s.push(o);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return An(this,void 0,void 0,function*(){try{return{data:yield SS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}list(e,t,r){return An(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k2),t),{prefix:e||""});return{data:yield pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const P2="2.7.1",A2={"X-Client-Info":`storage-js/${P2}`};var za=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};class I2{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},A2),t),this.fetch=TS(r)}listBuckets(){return za(this,void 0,void 0,function*(){try{return{data:yield Qh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ht(e))return{data:null,error:e};throw e}})}getBucket(e){return za(this,void 0,void 0,function*(){try{return{data:yield Qh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return za(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return za(this,void 0,void 0,function*(){try{return{data:yield T2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}emptyBucket(e){return za(this,void 0,void 0,function*(){try{return{data:yield pi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}deleteBucket(e){return za(this,void 0,void 0,function*(){try{return{data:yield SS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Ht(t))return{data:null,error:t};throw t}})}}class R2 extends I2{constructor(e,t={},r){super(e,t,r)}from(e){return new C2(this.url,this.headers,e,this.fetch)}}const N2="2.49.4";let Bu="";typeof Deno<"u"?Bu="deno":typeof document<"u"?Bu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bu="react-native":Bu="node";const j2={"X-Client-Info":`supabase-js-${Bu}/${N2}`},D2={headers:j2},O2={schema:"public"},L2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M2={};var V2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};const $2=n=>{let e;return n?e=n:typeof fetch>"u"?e=pS:e=fetch,(...t)=>e(...t)},F2=()=>typeof Headers>"u"?mS:Headers,U2=(n,e,t)=>{const r=$2(t),s=F2();return(o,l)=>V2(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:n;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",n),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var B2=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};function z2(n){return n.replace(/\/$/,"")}function W2(n,e){const{db:t,auth:r,realtime:s,global:o}=n,{db:l,auth:u,realtime:c,global:h}=e,g={db:Object.assign(Object.assign({},l),t),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},h),o),accessToken:()=>B2(this,void 0,void 0,function*(){return""})};return n.accessToken?g.accessToken=n.accessToken:delete g.accessToken,g}const kS="2.69.1",Ka=30*1e3,zg=3,Xm=zg*Ka,H2="http://localhost:9999",q2="supabase.auth.token",K2={"X-Client-Info":`gotrue-js/${kS}`},Wg="X-Supabase-Api-Version",CS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q2=6e5;class ty extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function Me(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class J2 extends ty{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Y2(n){return Me(n)&&n.name==="AuthApiError"}class PS extends ty{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Vi extends ty{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class di extends Vi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X2(n){return Me(n)&&n.name==="AuthSessionMissingError"}class Zm extends Vi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fh extends Vi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ph extends Vi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Z2(n){return Me(n)&&n.name==="AuthImplicitGrantRedirectError"}class N_ extends Vi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hg extends Vi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function eg(n){return Me(n)&&n.name==="AuthRetryableFetchError"}class j_ extends Vi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Xu extends Vi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const D_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),O_=` 	
\r=`.split(""),ej=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<O_.length;e+=1)n[O_[e].charCodeAt(0)]=-2;for(let e=0;e<D_.length;e+=1)n[D_[e].charCodeAt(0)]=e;return n})();function AS(n,e,t){const r=ej[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function L_(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{rj(l,r,t)};for(let l=0;l<n.length;l+=1)AS(n.charCodeAt(l),s,o);return e.join("")}function tj(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function nj(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}tj(r,e)}}function rj(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function sj(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)AS(n.charCodeAt(s),t,r);return new Uint8Array(e)}function ij(n){const e=[];return nj(n,t=>e.push(t)),new Uint8Array(e)}function oj(n){return Math.round(Date.now()/1e3)+n}function aj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const Hr=()=>typeof window<"u"&&typeof document<"u",yo={tested:!1,writable:!1},Zu=()=>{if(!Hr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yo.tested)return yo.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),yo.tested=!0,yo.writable=!0}catch{yo.tested=!0,yo.writable=!1}return yo.writable};function lj(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const IS=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>fl(async()=>{const{default:r}=await Promise.resolve().then(()=>Al);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},uj=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",RS=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},mh=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},gh=async(n,e)=>{await n.removeItem(e)};let NS=class jS{constructor(){this.promise=new jS.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};NS.promiseConstructor=Promise;function tg(n){const e=n.split(".");if(e.length!==3)throw new Xu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!G2.test(e[r]))throw new Xu("JWT not in base64url format");return{header:JSON.parse(L_(e[0])),payload:JSON.parse(L_(e[1])),signature:sj(e[2]),raw:{header:e[0],payload:e[1]}}}async function cj(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function dj(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function hj(n){return("0"+n.toString(16)).substr(-2)}function fj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,hj).join("")}async function pj(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function mj(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await pj(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Wa(n,e,t=!1){const r=fj();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await RS(n,`${e}-code-verifier`,s);const o=await mj(r);return[o,r===o?"plain":"s256"]}const gj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yj(n){const e=n.headers.get(Wg);if(!e||!e.match(gj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vj(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function wj(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var xj=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const _o=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),_j=[502,503,504];async function M_(n){var e;if(!uj(n))throw new Hg(_o(n),0);if(_j.includes(n.status))throw new Hg(_o(n),n.status);let t;try{t=await n.json()}catch(o){throw new PS(_o(o),o)}let r;const s=yj(n);if(s&&s.getTime()>=CS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new j_(_o(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new di}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new j_(_o(t),n.status,t.weak_password.reasons);throw new J2(_o(t),n.status||500,r)}const bj=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Fe(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Wg]||(o[Wg]=CS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Ej(n,e,t+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Ej(n,e,t,r,s,o){const l=bj(e,r,s,o);let u;try{u=await n(t,Object.assign({},l))}catch(c){throw console.error(c),new Hg(_o(c),0)}if(u.ok||await M_(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await M_(c)}}function hi(n){var e;let t=null;Cj(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=oj(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function V_(n){const e=hi(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function mi(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Tj(n){return{data:n,error:null}}function Sj(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=xj(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function kj(n){return n}function Cj(n){return n.access_token&&n.refresh_token&&n.expires_in}var Pj=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class Aj{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=IS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:mi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Pj(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Sj,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Me(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:mi})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:kj});if(g.error)throw g.error;const v=await g.json(),w=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,E=(c=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return E.length>0&&(E.forEach(C=>{const j=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);h[`${A}Page`]=j}),h.total=parseInt(w)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if(Me(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:mi})}catch(t){if(Me(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:mi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:mi})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}}const Ij={getItem:n=>Zu()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Zu()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Zu()&&globalThis.localStorage.removeItem(n)}};function $_(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Rj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ha={debug:!!(globalThis&&Zu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class DS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nj extends DS{}async function jj(n,e,t){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Ha.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Nj(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ha.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Rj();const Dj={url:H2,storageKey:q2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function F_(n,e,t){return await t()}class dc{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dc.nextInstanceID,dc.nextInstanceID+=1,this.instanceID>0&&Hr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Dj),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Aj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=IS(s.fetch),this.lock=s.lock||F_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Hr()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=jj:this.lock=F_,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Zu()?this.storage=Ij:(this.memoryStorage={},this.storage=$_(this.memoryStorage)):(this.memoryStorage={},this.storage=$_(this.memoryStorage)),Hr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${kS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=lj(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),Hr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Z2(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Me(t)?{error:t}:{error:new PS("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:hi}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:g,password:v,options:w}=e;let E=null,C=null;this.flowType==="pkce"&&([E,C]=await Wa(this.storage,this.storageKey)),o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:g,password:v,data:(t=w==null?void 0:w.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:E,code_challenge_method:C},xform:hi})}else if("phone"in e){const{phone:g,password:v,options:w}=e;o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(s=w==null?void 0:w.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:hi})}else throw new fh("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if(Me(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:u}=e;t=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:V_})}else if("phone"in e){const{phone:o,password:l,options:u}=e;t=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:V_})}else throw new fh("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zm}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await mh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:o,error:l}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:hi});if(await gh(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Zm}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(Me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,u=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:hi}),{data:c,error:h}=u;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Zm}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:u,options:c}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Wa(this.storage,this.storageKey));const{error:v}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:c}=e,{data:h,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new fh("You must provide either an email or phone number.")}catch(u){if(Me(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:hi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,h=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if(Me(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Wa(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Tj})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new di;const{error:s}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Me(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Fe(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await Fe(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new fh("You must provide either an email or phone number and a type")}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await mh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Xm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:mi}):await this._useSession(async t=>{var r,s,o;const{data:l,error:u}=t;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new di}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:mi})})}catch(t){if(Me(t))return X2(t)&&(await this._removeSession(),await gh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new di;const l=s.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await Wa(this.storage,this.storageKey));const{data:h,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:mi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Me(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new di;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:l}=tg(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(Me(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:u}=t;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new di;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Me(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Hr())throw new ph("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ph(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new N_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ph("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new N_("No code detected.");const{data:V,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:V.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:h}=e;if(!o||!u||!l||!h)throw new ph("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let w=g+v;c&&(w=parseInt(c));const E=w-g;E*1e3<=Ka&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const C=w-v;g-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,w,g):g-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,w,g);const{data:j,error:A}=await this._getUser(o);if(A)throw A;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:w,refresh_token:l,token_type:h,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:D,redirectType:e.type},error:null}}catch(r){if(Me(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(Y2(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await gh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=aj(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Wa(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Me(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Me(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,c,h,g;const{data:v,error:w}=o;if(w)throw w;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",E,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return Hr()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Me(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await dj(async s=>(s>0&&await cj(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:hi})),(s,o)=>{const l=200*Math.pow(2,s);return o&&eg(o)&&Date.now()+l-r<Ka})}catch(r){if(this._debug(t,"error",r),Me(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Hr()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await mh(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Xm;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${Xm}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),eg(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new di;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new NS;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new di;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),Me(o)){const l={session:null,error:o};return eg(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,t)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await RS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await gh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Hr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ka);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ka);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ka}ms, refresh threshold is ${zg} ticks`),s<=zg&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof DS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Wa(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(Me(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(t){if(Me(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?{data:null,error:o}:await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Me(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=tg(s.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Q2>Date.now()))return r;const{data:s,error:o}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new Xu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new Xu("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:E,error:C}=await this.getSession();if(C||!E.session)return{data:null,error:C};r=E.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:c}}=tg(r);if(vj(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:o,header:s,signature:l},error:null}}const h=wj(s.alg),g=await this.fetchJwk(s.kid,t),v=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,v,l,ij(`${u}.${c}`)))throw new Xu("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(Me(r))return{data:null,error:r};throw r}}}dc.nextInstanceID=0;const Oj=dc;class Lj extends Oj{constructor(e){super(e)}}var Mj=function(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(n,e||[])).next())})};class Vj{constructor(e,t,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=z2(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:O2,realtime:M2,auth:Object.assign(Object.assign({},L2),{storageKey:c}),global:D2},g=W2(r??{},h);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=U2(t,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new n2(`${u}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new WN(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new R2(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Mj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:c},h,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lj({url:this.authUrl,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:c,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new y2(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $j=(n,e,t)=>new Vj(n,e,t),OS="https://lcmsizhwcacufywlrfpr.supabase.co",LS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg";console.log("Supabase URL:",OS);console.log("Supabase Anon Key:",LS);const Rn=$j(OS,LS),$s=P.createContext(),Fj=({children:n})=>{const[e,t]=P.useState(null),[r,s]=P.useState(!0);P.useEffect(()=>{(async()=>{const{data:{session:w}}=await Rn.auth.getSession();t((w==null?void 0:w.user)??null),s(!1)})();const{data:{subscription:v}}=Rn.auth.onAuthStateChange((w,E)=>{t((E==null?void 0:E.user)??null),s(!1)});return()=>{v==null||v.unsubscribe()}},[]);const h={user:e,loading:r,signup:async(g,v)=>{console.log("Signup attempt with:",{email:g,password:v});const{data:w,error:E}=await Rn.auth.signUp({email:g,password:v,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(w,null,2)),E)throw console.error("Signup error:",E.message),E;if(w.user&&w.user.identities&&w.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const C=await Rn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(C,null,2)),C.error?(console.error("Error resending confirmation email:",C.error.message),C.error):new Error("User already exists. A confirmation email has been resent.")}return w},login:async(g,v)=>{console.log("Login attempt with:",{email:g,password:v});const{data:w,error:E}=await Rn.auth.signInWithPassword({email:g,password:v});if(E)throw console.error("Login error:",E.message),E.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):E;return t(w.user),w},logout:async()=>{const{error:g}=await Rn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;t(null)},refreshUser:async()=>{const{data:{user:g}}=await Rn.auth.getUser();t(g)}};return p.jsx($s.Provider,{value:h,children:n})},Uj=({location:n})=>{var j;const[e,t]=P.useState(!1),{isDarkMode:r,toggleTheme:s}=P.useContext(Ze),{user:o,logout:l,loading:u}=P.useContext($s),c=rn(),h=P.useRef(null),g=P.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",e);const v=async()=>{try{await l(),c("/login")}catch(A){console.error("Logout error:",A.message)}},w=()=>{var A;e?(t(!1),(A=h.current)==null||A.focus()):(t(!0),setTimeout(()=>{var D;return(D=g.current)==null?void 0:D.focus()},100))};P.useEffect(()=>{const A=D=>{var V;D.key==="Escape"&&e&&(t(!1),(V=h.current)==null||V.focus())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[e]);const E=A=>n.pathname===A,C=((j=o==null?void 0:o.user_metadata)==null?void 0:j.displayName)||"User";return p.jsxs(p.Fragment,{children:[p.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),p.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[p.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[p.jsx(it,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),p.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[p.jsx(it,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/")?"text-red-600 font-semibold":""}`,children:"Home"}),p.jsx(it,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),p.jsx(it,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),p.jsx(it,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),u?p.jsx("span",{children:"Loading..."}):o?p.jsxs(p.Fragment,{children:[p.jsxs(it,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${E("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",C]}),p.jsx("button",{onClick:v,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):p.jsx(it,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),p.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"":""})]}),p.jsx("button",{ref:h,onClick:w,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:e?"":""})]}),e&&p.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:w,tabIndex:0,onKeyDown:A=>{(A.key==="Enter"||A.key===" ")&&w()},"aria-label":"Close mobile menu"}),p.jsxs("div",{className:`lg:hidden px-4 py-4 ${e?"mobile-menu-open":"mobile-menu-closed"} ${r?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[p.jsx(it,{ref:g,to:"/",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Home"}),p.jsx(it,{to:"/products",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/products")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Products"}),p.jsx(it,{to:"/blog",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/blog")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Blog"}),p.jsx(it,{to:"/faq",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/faq")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"FAQ"}),p.jsx(it,{to:"/contact",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/contact")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Contact"}),p.jsx(it,{to:"/nutrition",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/nutrition")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Nutrition"}),o&&p.jsx(it,{to:"/profile",onClick:w,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${E("/profile")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Profile"}),p.jsx("button",{onClick:()=>{s(),w()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${r?"text-red-400":"text-red-800"}`,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?" Light Mode":" Dark Mode"}),u?p.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):o?p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:`block py-2 px-3 text-sm ${r?"text-red-400":"text-red-800"}`,children:["Welcome, ",C]}),p.jsx("button",{onClick:()=>{v(),w()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):p.jsx(it,{to:"/login",onClick:w,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})};var MS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},U_=tt.createContext&&tt.createContext(MS),Bj=["attr","size","title"];function zj(n,e){if(n==null)return{};var t=Wj(n,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Wj(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function Jh(){return Jh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jh.apply(this,arguments)}function B_(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Yh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B_(Object(t),!0).forEach(function(r){Hj(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):B_(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Hj(n,e,t){return e=qj(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qj(n){var e=Kj(n,"string");return typeof e=="symbol"?e:e+""}function Kj(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VS(n){return n&&n.map((e,t)=>tt.createElement(e.tag,Yh({key:t},e.attr),VS(e.child)))}function Il(n){return e=>tt.createElement(Gj,Jh({attr:Yh({},n.attr)},e),VS(n.child))}function Gj(n){var e=t=>{var{attr:r,size:s,title:o}=n,l=zj(n,Bj),u=s||t.size||"1em",c;return t.className&&(c=t.className),n.className&&(c=(c?c+" ":"")+n.className),tt.createElement("svg",Jh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:c,style:Yh(Yh({color:n.color||t.color},t.style),n.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&tt.createElement("title",null,o),n.children)};return U_!==void 0?tt.createElement(U_.Consumer,null,t=>e(t)):e(MS)}function Qj(n){return Il({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function Jj(n){return Il({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(n)}function Yj(n){return Il({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function Xj(n){return Il({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(n)}function Zj(n){return Il({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(n)}function eD(n){return Il({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(n)}const tD=()=>{const{isDarkMode:n}=P.useContext(Ze),{user:e,logout:t}=P.useContext($s),r=jr();return p.jsx("div",{className:`${n?"dark":""}`,children:p.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[p.jsx(Uj,{location:r}),p.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:p.jsx(tS,{})}),p.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:p.jsx(Qj,{size:24})}),p.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:p.jsx(Xj,{size:24})}),p.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:p.jsx(Jj,{size:24})}),p.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:p.jsx(Yj,{size:24})}),p.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:p.jsx(Zj,{size:24})})]})}),p.jsxs("p",{children:[" ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function zn({to:n,children:e,variant:t,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=t==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return n?p.jsx(it,{to:n,className:`${o} ${l} ${r}`,...s,children:e}):p.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const nD="/aussie-gut-pack/assets/aussie-BleX4DhZ.png",rD="/aussie-gut-pack/assets/goggins-BJp9afAd.png",z_=[{src:nD,alt:"Australian Shepherd dog"},{src:rD,alt:"David Goggins running"}],sD=({className:n})=>{const[e,t]=P.useState(0);return P.useEffect(()=>{const r=setInterval(()=>{t(s=>(s+1)%z_.length)},5e3);return()=>clearInterval(r)},[]),p.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:z_.map((r,s)=>p.jsx("img",{src:r.src,alt:r.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${s===e?"opacity-100":"opacity-0"} ${n||""}`},s))})},ny=P.createContext({});function ry(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const sy=typeof window<"u",$S=sy?P.useLayoutEffect:P.useEffect,If=P.createContext(null),iy=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class iD extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oD({children:n,isPresent:e,anchorX:t}){const r=P.useId(),s=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(iy);return P.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:g,right:v}=o.current;if(e||!s.current||!u||!c)return;const w=t==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const E=document.createElement("style");return l&&(E.nonce=l),document.head.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${w}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(E)}},[e]),p.jsx(iD,{isPresent:e,childRef:s,sizeRef:o,children:P.cloneElement(n,{ref:s})})}const aD=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const c=ry(lD),h=P.useId(),g=P.useCallback(w=>{c.set(w,!0);for(const E of c.values())if(!E)return;r&&r()},[c,r]),v=P.useMemo(()=>({id:h,initial:e,isPresent:t,custom:s,onExitComplete:g,register:w=>(c.set(w,!1),()=>c.delete(w))}),o?[Math.random(),g]:[t,g]);return P.useMemo(()=>{c.forEach((w,E)=>c.set(E,!1))},[t]),P.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),l==="popLayout"&&(n=p.jsx(oD,{isPresent:t,anchorX:u,children:n})),p.jsx(If.Provider,{value:v,children:n})};function lD(){return new Map}function FS(n=!0){const e=P.useContext(If);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=P.useId();P.useEffect(()=>{if(n)return s(o)},[n]);const l=P.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const yh=n=>n.key||"";function W_(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const H_=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[c,h]=FS(l),g=P.useMemo(()=>W_(n),[n]),v=l&&!c?[]:g.map(yh),w=P.useRef(!0),E=P.useRef(g),C=ry(()=>new Map),[j,A]=P.useState(g),[D,V]=P.useState(g);$S(()=>{w.current=!1,E.current=g;for(let H=0;H<D.length;H++){const F=yh(D[H]);v.includes(F)?C.delete(F):C.get(F)!==!0&&C.set(F,!1)}},[D,v.length,v.join("-")]);const $=[];if(g!==j){let H=[...g];for(let F=0;F<D.length;F++){const I=D[F],b=yh(I);v.includes(b)||(H.splice(F,0,I),$.push(I))}return o==="wait"&&$.length&&(H=$),V(W_(H)),A(g),null}const{forceRender:W}=P.useContext(ny);return p.jsx(p.Fragment,{children:D.map(H=>{const F=yh(H),I=l&&!c?!1:g===D||v.includes(F),b=()=>{if(C.has(F))C.set(F,!0);else return;let S=!0;C.forEach(R=>{R||(S=!1)}),S&&(W==null||W(),V(E.current),l&&(h==null||h()),r&&r())};return p.jsx(aD,{isPresent:I,initial:!w.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:I?void 0:b,anchorX:u,children:H},F)})})};function oy(n,e){n.indexOf(e)===-1&&n.push(e)}function ay(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const qn=n=>n;let US=qn;const uD={useManualTiming:!1};function ly(n){let e;return()=>(e===void 0&&(e=n()),e)}const ml=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class uy{constructor(){this.subscriptions=[]}add(e){return oy(this.subscriptions,e),()=>ay(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const As=n=>n*1e3,Is=n=>n/1e3;function BS(n,e){return e?n*(1e3/e):0}const cD=ly(()=>window.ScrollTimeline!==void 0);class dD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){const r=this.animations.map(s=>{if(cD()&&s.attachTimeline)return s.attachTimeline(e);if(typeof t=="function")return t(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class hD extends dD{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function cy(n,e){return n?n[e]||n.default||n:void 0}const qg=2e4;function zS(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<qg;)e+=t,r=n.next(e);return e>=qg?1/0:e}function dy(n){return typeof n=="function"}function q_(n,e){n.timeline=e,n.onfinish=null}const hy=n=>Array.isArray(n)&&typeof n[0]=="number",fD={linearEasing:void 0};function pD(n,e){const t=ly(n);return()=>{var r;return(r=fD[e])!==null&&r!==void 0?r:t()}}const Xh=pD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),WS=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=n(ml(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function HS(n){return!!(typeof n=="function"&&Xh()||!n||typeof n=="string"&&(n in Kg||Xh())||hy(n)||Array.isArray(n)&&n.every(HS))}const zu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,Kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zu([0,.65,.55,1]),circOut:zu([.55,0,1,.45]),backIn:zu([.31,.01,.66,-.59]),backOut:zu([.33,1.53,.69,.99])};function qS(n,e){if(n)return typeof n=="function"&&Xh()?WS(n,e):hy(n)?zu(n):Array.isArray(n)?n.map(t=>qS(t,e)||Kg.easeOut):Kg[n]}const vh=["read","resolveKeyframes","update","preRender","render","postRender"],K_={value:null};function mD(n,e){let t=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},c=0;function h(v){l.has(v)&&(g.schedule(v),n()),c++,v(u)}const g={schedule:(v,w=!1,E=!1)=>{const j=E&&s?t:r;return w&&l.add(v),j.has(v)||j.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(u=v,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(h),e&&K_.value&&K_.value.frameloop[e].push(c),c=0,t.clear(),s=!1,o&&(o=!1,g.process(v))}};return g}const gD=40;function KS(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=vh.reduce((D,V)=>(D[V]=mD(o,e?V:void 0),D),{}),{read:u,resolveKeyframes:c,update:h,preRender:g,render:v,postRender:w}=l,E=()=>{const D=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(D-s.timestamp,gD),1),s.timestamp=D,s.isProcessing=!0,u.process(s),c.process(s),h.process(s),g.process(s),v.process(s),w.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(E))},C=()=>{t=!0,r=!0,s.isProcessing||n(E)};return{schedule:vh.reduce((D,V)=>{const $=l[V];return D[V]=(W,H=!1,F=!1)=>(t||C(),$.schedule(W,H,F)),D},{}),cancel:D=>{for(let V=0;V<vh.length;V++)l[vh[V]].cancel(D)},state:s,steps:l}}const{schedule:ot,cancel:Pi,state:Yt,steps:ng}=KS(typeof requestAnimationFrame<"u"?requestAnimationFrame:qn,!0),{schedule:fy}=KS(queueMicrotask,!1);let Nh;function yD(){Nh=void 0}const Gr={now:()=>(Nh===void 0&&Gr.set(Yt.isProcessing||uD.useManualTiming?Yt.timestamp:performance.now()),Nh),set:n=>{Nh=n,queueMicrotask(yD)}},kr={x:!1,y:!1};function GS(){return kr.x||kr.y}function vD(n){return n==="x"||n==="y"?kr[n]?null:(kr[n]=!0,()=>{kr[n]=!1}):kr.x||kr.y?null:(kr.x=kr.y=!0,()=>{kr.x=kr.y=!1})}function wD(n,e,t){var r;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(n);return o?Array.from(o):[]}return Array.from(n)}function QS(n,e){const t=wD(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function G_(n){return!(n.pointerType==="touch"||GS())}function xD(n,e,t={}){const[r,s,o]=QS(n,t),l=u=>{if(!G_(u))return;const{target:c}=u,h=e(c,u);if(typeof h!="function"||!c)return;const g=v=>{G_(v)&&(h(v),c.removeEventListener("pointerleave",g))};c.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}function Q_(n,e){const t=`${e}PointerCapture`;if(n.target instanceof Element&&t in n.target&&n.pointerId!==void 0)try{n.target[t](n.pointerId)}catch{}}const JS=(n,e)=>e?n===e?!0:JS(n,e.parentElement):!1,py=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,_D=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bD(n){return _D.has(n.tagName)||n.tabIndex!==-1}const Wu=new WeakSet;function J_(n){return e=>{e.key==="Enter"&&n(e)}}function rg(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ED=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=J_(()=>{if(Wu.has(t))return;rg(t,"down");const s=J_(()=>{rg(t,"up")}),o=()=>rg(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Y_(n){return py(n)&&!GS()}function TD(n,e,t={}){const[r,s,o]=QS(n,t),l=u=>{const c=u.currentTarget;if(!c||!Y_(u)||Wu.has(c))return;Wu.add(c),Q_(u,"set");const h=e(c,u),g=(E,C)=>{c.removeEventListener("pointerup",v),c.removeEventListener("pointercancel",w),Q_(E,"release"),!(!Y_(E)||!Wu.has(c))&&(Wu.delete(c),typeof h=="function"&&h(E,{success:C}))},v=E=>{(E.isTrusted?SD(E,c instanceof Element?c.getBoundingClientRect():{left:0,top:0,right:window.innerWidth,bottom:window.innerHeight}):!1)?g(E,!1):g(E,!(c instanceof Element)||JS(c,E.target))},w=E=>{g(E,!1)};c.addEventListener("pointerup",v,s),c.addEventListener("pointercancel",w,s),c.addEventListener("lostpointercapture",w,s)};return r.forEach(u=>{u=t.useGlobalTarget?window:u;let c=!1;u instanceof HTMLElement&&(c=!0,!bD(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0)),u.addEventListener("pointerdown",l,s),c&&u.addEventListener("focus",h=>ED(h,s),s)}),o}function SD(n,e){return n.clientX<e.left||n.clientX>e.right||n.clientY<e.top||n.clientY>e.bottom}const X_=30,kD=n=>!isNaN(parseFloat(n));class CD{constructor(e,t={}){this.version="12.5.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Gr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Gr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new uy);const r=this.events[e].add(t);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>X_)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,X_);return BS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hc(n,e){return new CD(n,e)}const YS=P.createContext({strict:!1}),Z_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gl={};for(const n in Z_)gl[n]={isEnabled:e=>Z_[n].some(t=>!!e[t])};function PD(n){for(const e in n)gl[e]={...gl[e],...n[e]}}const AD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||AD.has(n)}let XS=n=>!Zh(n);function ID(n){n&&(XS=e=>e.startsWith("on")?!Zh(e):n(e))}try{ID(require("@emotion/is-prop-valid").default)}catch{}function RD(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(XS(s)||t===!0&&Zh(s)||!e&&!Zh(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function ND(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...r)=>n(...r);return new Proxy(t,{get:(r,s)=>s==="create"?n:(e.has(s)||e.set(s,n(s)),e.get(s))})}const Rf=P.createContext({});function Nf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function fc(n){return typeof n=="string"||Array.isArray(n)}const my=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gy=["initial",...my];function jf(n){return Nf(n.animate)||gy.some(e=>fc(n[e]))}function ZS(n){return!!(jf(n)||n.variants)}function jD(n,e){if(jf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||fc(t)?t:void 0,animate:fc(r)?r:void 0}}return n.inherit!==!1?e:{}}function DD(n){const{initial:e,animate:t}=jD(n,P.useContext(Rf));return P.useMemo(()=>({initial:e,animate:t}),[eb(e),eb(t)])}function eb(n){return Array.isArray(n)?n.join(" "):n}const OD=Symbol.for("motionComponentSymbol");function Xa(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function LD(n,e,t){return P.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Xa(t)&&(t.current=r))},[e])}const yy=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MD="framerAppearId",ek="data-"+yy(MD),tk=P.createContext({});function VD(n,e,t,r,s){var o,l;const{visualElement:u}=P.useContext(Rf),c=P.useContext(YS),h=P.useContext(If),g=P.useContext(iy).reducedMotion,v=P.useRef(null);r=r||c.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:u,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:g}));const w=v.current,E=P.useContext(tk);w&&!w.projection&&s&&(w.type==="html"||w.type==="svg")&&$D(v.current,t,s,E);const C=P.useRef(!1);P.useInsertionEffect(()=>{w&&C.current&&w.update(t,h)});const j=t[ek],A=P.useRef(!!j&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,j))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,j)));return $S(()=>{w&&(C.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),fy.render(w.render),A.current&&w.animationState&&w.animationState.animateChanges())}),P.useEffect(()=>{w&&(!A.current&&w.animationState&&w.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{var D;(D=window.MotionHandoffMarkAsComplete)===null||D===void 0||D.call(window,j)}),A.current=!1))}),w}function $D(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:c,layoutRoot:h}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:nk(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&Xa(u),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:h})}function nk(n){if(n)return n.options.allowProjection!==!1?n.projection:nk(n.parent)}function FD({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){var o,l;n&&PD(n);function u(h,g){let v;const w={...P.useContext(iy),...h,layoutId:UD(h)},{isStatic:E}=w,C=DD(h),j=r(h,E);if(!E&&sy){BD();const A=zD(w);v=A.MeasureLayout,C.visualElement=VD(s,j,w,e,A.ProjectionNode)}return p.jsxs(Rf.Provider,{value:C,children:[v&&C.visualElement?p.jsx(v,{visualElement:C.visualElement,...w}):null,t(s,h,LD(j,C.visualElement,g),j,E,C.visualElement)]})}u.displayName=`motion.${typeof s=="string"?s:`create(${(l=(o=s.displayName)!==null&&o!==void 0?o:s.name)!==null&&l!==void 0?l:""})`}`;const c=P.forwardRef(u);return c[OD]=s,c}function UD({layoutId:n}){const e=P.useContext(ny).id;return e&&n!==void 0?e+"-"+n:n}function BD(n,e){P.useContext(YS).strict}function zD(n){const{drag:e,layout:t}=gl;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const rk=n=>e=>typeof e=="string"&&e.startsWith(n),vy=rk("--"),WD=rk("var(--"),wy=n=>WD(n)?HD.test(n.split("/*")[0].trim()):!1,HD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,pc={};function qD(n){for(const e in n)pc[e]=n[e],vy(e)&&(pc[e].isCSSVariable=!0)}const Rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Fo=new Set(Rl);function sk(n,{layout:e,layoutId:t}){return Fo.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!pc[n]||n==="opacity")}const fn=n=>!!(n&&n.getVelocity),ik=(n,e)=>e&&typeof n=="number"?e.transform(n):n,js=(n,e,t)=>t>e?e:t<n?n:t,Nl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},mc={...Nl,transform:n=>js(0,1,n)},wh={...Nl,default:1},jc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),fi=jc("deg"),Qr=jc("%"),Ie=jc("px"),KD=jc("vh"),GD=jc("vw"),tb={...Qr,parse:n=>Qr.parse(n)/100,transform:n=>Qr.transform(n*100)},QD={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie},JD={rotate:fi,rotateX:fi,rotateY:fi,rotateZ:fi,scale:wh,scaleX:wh,scaleY:wh,scaleZ:wh,skew:fi,skewX:fi,skewY:fi,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:mc,originX:tb,originY:tb,originZ:Ie},nb={...Nl,transform:Math.round},xy={...QD,...JD,zIndex:nb,size:Ie,fillOpacity:mc,strokeOpacity:mc,numOctaves:nb},YD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XD=Rl.length;function ZD(n,e,t){let r="",s=!0;for(let o=0;o<XD;o++){const l=Rl[o],u=n[l];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(l.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||t){const h=ik(u,xy[l]);if(!c){s=!1;const g=YD[l]||l;r+=`${g}(${h}) `}t&&(e[l]=h)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function _y(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,u=!1;for(const c in e){const h=e[c];if(Fo.has(c)){l=!0;continue}else if(vy(c)){s[c]=h;continue}else{const g=ik(h,xy[c]);c.startsWith("origin")?(u=!0,o[c]=g):r[c]=g}}if(e.transform||(l||t?r.transform=ZD(e,n.transform,t):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${c} ${h} ${g}`}}const by=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ok(n,e,t){for(const r in e)!fn(e[r])&&!sk(r,t)&&(n[r]=e[r])}function eO({transformTemplate:n},e){return P.useMemo(()=>{const t=by();return _y(t,e,n),Object.assign({},t.vars,t.style)},[e])}function tO(n,e){const t=n.style||{},r={};return ok(r,t,n),Object.assign(r,eO(n,e)),r}function nO(n,e){const t={},r=tO(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const rO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ey(n){return typeof n!="string"||n.includes("-")?!1:!!(rO.indexOf(n)>-1||/[A-Z]/u.test(n))}const sO={offset:"stroke-dashoffset",array:"stroke-dasharray"},iO={offset:"strokeDashoffset",array:"strokeDasharray"};function oO(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?sO:iO;n[o.offset]=Ie.transform(-r);const l=Ie.transform(e),u=Ie.transform(t);n[o.array]=`${l} ${u}`}function rb(n,e,t){return typeof n=="string"?n:Ie.transform(e+t*n)}function aO(n,e,t){const r=rb(e,n.x,n.width),s=rb(t,n.y,n.height);return`${r} ${s}`}function Ty(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:c=0,...h},g,v){if(_y(n,h,v),g){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:w,style:E,dimensions:C}=n;w.transform&&(C&&(E.transform=w.transform),delete w.transform),C&&(s!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=aO(C,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(w.x=e),t!==void 0&&(w.y=t),r!==void 0&&(w.scale=r),l!==void 0&&oO(w,l,u,c,!1)}const ak=()=>({...by(),attrs:{}}),Sy=n=>typeof n=="string"&&n.toLowerCase()==="svg";function lO(n,e,t,r){const s=P.useMemo(()=>{const o=ak();return Ty(o,e,Sy(r),n.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};ok(o,n.style,n),s.style={...o,...s.style}}return s}function uO(n=!1){return(t,r,s,{latestValues:o},l)=>{const c=(Ey(t)?lO:nO)(r,o,l,t),h=RD(r,typeof t=="string",n),g=t!==P.Fragment?{...h,...c,ref:s}:{},{children:v}=r,w=P.useMemo(()=>fn(v)?v.get():v,[v]);return P.createElement(t,{...g,children:w})}}function sb(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ky(n,e,t,r){if(typeof e=="function"){const[s,o]=sb(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=sb(r);e=e(t!==void 0?t:n.custom,s,o)}return e}const Gg=n=>Array.isArray(n),cO=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),dO=n=>Gg(n)?n[n.length-1]||0:n;function jh(n){const e=fn(n)?n.get():n;return cO(e)?e.toValue():e}function hO({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},r,s,o){const l={latestValues:fO(r,s,o,n),renderState:e()};return t&&(l.onMount=u=>t({props:r,current:u,...l}),l.onUpdate=u=>t(u)),l}const lk=n=>(e,t)=>{const r=P.useContext(Rf),s=P.useContext(If),o=()=>hO(n,e,r,s);return t?o():ry(o)};function fO(n,e,t,r){const s={},o=r(n,{});for(const w in o)s[w]=jh(o[w]);let{initial:l,animate:u}=n;const c=jf(n),h=ZS(n);e&&h&&!c&&n.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!Nf(v)){const w=Array.isArray(v)?v:[v];for(let E=0;E<w.length;E++){const C=ky(n,w[E]);if(C){const{transitionEnd:j,transition:A,...D}=C;for(const V in D){let $=D[V];if(Array.isArray($)){const W=g?$.length-1:0;$=$[W]}$!==null&&(s[V]=$)}for(const V in j)s[V]=j[V]}}}return s}function Cy(n,e,t){var r;const{style:s}=n,o={};for(const l in s)(fn(s[l])||e.style&&fn(e.style[l])||sk(l,n)||((r=t==null?void 0:t.getValue(l))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[l]=s[l]);return o}const pO={useVisualState:lk({scrapeMotionValuesFromProps:Cy,createRenderState:by})};function uk(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function ck(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const o in t)n.style.setProperty(o,t[o])}const dk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hk(n,e,t,r){ck(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(dk.has(s)?s:yy(s),e.attrs[s])}function fk(n,e,t){const r=Cy(n,e,t);for(const s in n)if(fn(n[s])||fn(e[s])){const o=Rl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}const ib=["x","y","width","height","cx","cy","r"],mO={useVisualState:lk({scrapeMotionValuesFromProps:fk,createRenderState:ak,onUpdate:({props:n,prevProps:e,current:t,renderState:r,latestValues:s})=>{if(!t)return;let o=!!n.drag;if(!o){for(const u in s)if(Fo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<ib.length;u++){const c=ib[u];n[c]!==e[c]&&(l=!0)}l&&ot.read(()=>{uk(t,r),ot.render(()=>{Ty(r,s,Sy(t.tagName),n.transformTemplate),hk(t,r)})})}})};function gO(n,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Ey(r)?mO:pO,preloadedFeatures:n,useRender:uO(s),createVisualElement:e,Component:r};return FD(l)}}function gc(n,e,t){const r=n.getProps();return ky(r,e,t!==void 0?t:r.custom,n)}const pk=new Set(["width","height","top","left","right","bottom",...Rl]);function yO(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,hc(t))}function vO(n,e){const t=gc(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const u=dO(o[l]);yO(n,l,u)}}function wO(n){return!!(fn(n)&&n.add)}function Qg(n,e){const t=n.getValue("willChange");if(wO(t))return t.add(e)}function mk(n){return n.props[ek]}const gk=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,xO=1e-7,_O=12;function bO(n,e,t,r,s){let o,l,u=0;do l=e+(t-e)/2,o=gk(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>xO&&++u<_O);return l}function Dc(n,e,t,r){if(n===e&&t===r)return qn;const s=o=>bO(o,0,1,n,t);return o=>o===0||o===1?o:gk(s(o),e,r)}const yk=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,vk=n=>e=>1-n(1-e),wk=Dc(.33,1.53,.69,.99),Py=vk(wk),xk=yk(Py),_k=n=>(n*=2)<1?.5*Py(n):.5*(2-Math.pow(2,-10*(n-1))),Ay=n=>1-Math.sin(Math.acos(n)),bk=vk(Ay),Ek=yk(Ay),Tk=n=>/^0[^.\s]+$/u.test(n);function EO(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Tk(n):!0}const ec=n=>Math.round(n*1e5)/1e5,Iy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TO(n){return n==null}const SO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ry=(n,e)=>t=>!!(typeof t=="string"&&SO.test(t)&&t.startsWith(n)||e&&!TO(t)&&Object.prototype.hasOwnProperty.call(t,e)),Sk=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(Iy);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},kO=n=>js(0,255,n),sg={...Nl,transform:n=>Math.round(kO(n))},ko={test:Ry("rgb","red"),parse:Sk("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+sg.transform(n)+", "+sg.transform(e)+", "+sg.transform(t)+", "+ec(mc.transform(r))+")"};function CO(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Jg={test:Ry("#"),parse:CO,transform:ko.transform},Za={test:Ry("hsl","hue"),parse:Sk("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Qr.transform(ec(e))+", "+Qr.transform(ec(t))+", "+ec(mc.transform(r))+")"},cn={test:n=>ko.test(n)||Jg.test(n)||Za.test(n),parse:n=>ko.test(n)?ko.parse(n):Za.test(n)?Za.parse(n):Jg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ko.transform(n):Za.transform(n)},PO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AO(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Iy))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(PO))===null||t===void 0?void 0:t.length)||0)>0}const kk="number",Ck="color",IO="var",RO="var(",ob="${}",NO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yc(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(NO,c=>(cn.test(c)?(r.color.push(o),s.push(Ck),t.push(cn.parse(c))):c.startsWith(RO)?(r.var.push(o),s.push(IO),t.push(c)):(r.number.push(o),s.push(kk),t.push(parseFloat(c))),++o,ob)).split(ob);return{values:t,split:u,indexes:r,types:s}}function Pk(n){return yc(n).values}function Ak(n){const{split:e,types:t}=yc(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=t[l];u===kk?o+=ec(s[l]):u===Ck?o+=cn.transform(s[l]):o+=s[l]}return o}}const jO=n=>typeof n=="number"?0:n;function DO(n){const e=Pk(n);return Ak(n)(e.map(jO))}const Ai={test:AO,parse:Pk,createTransformer:Ak,getAnimatableNone:DO},OO=new Set(["brightness","contrast","saturate","opacity"]);function LO(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Iy)||[];if(!r)return n;const s=t.replace(r,"");let o=OO.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const MO=/\b([a-z-]*)\(.*?\)/gu,Yg={...Ai,getAnimatableNone:n=>{const e=n.match(MO);return e?e.map(LO).join(" "):n}},VO={...xy,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:Yg,WebkitFilter:Yg},Ik=n=>VO[n];function Rk(n,e){let t=Ik(n);return t!==Yg&&(t=Ai),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const $O=new Set(["auto","none","0"]);function FO(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!$O.has(o)&&yc(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=Rk(t,s)}const Co=n=>n*180/Math.PI,Xg=n=>{const e=Co(Math.atan2(n[1],n[0]));return Zg(e)},UO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Xg,rotateZ:Xg,skewX:n=>Co(Math.atan(n[1])),skewY:n=>Co(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Zg=n=>(n=n%360,n<0&&(n+=360),n),ab=Xg,lb=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),ub=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),BO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lb,scaleY:ub,scale:n=>(lb(n)+ub(n))/2,rotateX:n=>Zg(Co(Math.atan2(n[6],n[5]))),rotateY:n=>Zg(Co(Math.atan2(-n[2],n[0]))),rotateZ:ab,rotate:ab,skewX:n=>Co(Math.atan(n[4])),skewY:n=>Co(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function cb(n){return n.includes("scale")?1:0}function e0(n,e){if(!n||n==="none")return cb(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=BO,s=t;else{const u=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=UO,s=u}if(!s)return cb(e);const o=r[e],l=s[1].split(",").map(WO);return typeof o=="function"?o(l):l[o]}const zO=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return e0(t,e)};function WO(n){return parseFloat(n.trim())}const db=n=>n===Nl||n===Ie,HO=new Set(["x","y","z"]),qO=Rl.filter(n=>!HO.has(n));function KO(n){const e=[];return qO.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const yl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>e0(e,"x"),y:(n,{transform:e})=>e0(e,"y")};yl.translateX=yl.x;yl.translateY=yl.y;const Io=new Set;let t0=!1,n0=!1;function Nk(){if(n0){const n=Array.from(Io).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=KO(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))===null||u===void 0||u.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}n0=!1,t0=!1,Io.forEach(n=>n.complete()),Io.clear()}function jk(){Io.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(n0=!0)})}function GO(){jk(),Nk()}class Ny{constructor(e,t,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Io.add(this),t0||(t0=!0,ot.read(jk),ot.resolveKeyframes(Nk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&t){const c=r.readValue(t,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Io.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Io.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Dk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),QO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JO(n){const e=QO.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function Ok(n,e,t=1){const[r,s]=JO(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Dk(l)?parseFloat(l):l}return wy(s)?Ok(s,e,t+1):s}const Lk=n=>e=>e.test(n),YO={test:n=>n==="auto",parse:n=>n},Mk=[Nl,Ie,Qr,fi,GD,KD,YO],hb=n=>Mk.find(Lk(n));class Vk extends Ny{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),wy(h))){const g=Ok(h,t.current);g!==void 0&&(e[c]=g),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!pk.has(r)||e.length!==2)return;const[s,o]=e,l=hb(s),u=hb(o);if(l!==u)if(db(l)&&db(u))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)EO(e[s])&&r.push(s);r.length&&FO(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:t,name:r,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const o=t.getValue(r);o&&o.jump(this.measuredOrigin,!1);const l=s.length-1,u=s[l];s[l]=yl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,h])=>{t.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const fb=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ai.test(n)||n==="0")&&!n.startsWith("url("));function XO(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function ZO(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=fb(s,e),u=fb(o,e);return!l||!u?!1:XO(n)||(t==="spring"||dy(t))&&r}const e4=n=>n!==null;function Df(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(e4),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const t4=40;class $k{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Gr.now(),this.options={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>t4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&GO(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Gr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:u,onUpdate:c,isGenerator:h}=this.options;if(!h&&!ZO(e,r,s,o))if(l)this.options.duration=0;else{c&&c(Df(e,this.options,t)),u&&u(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,t);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...g},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mt=(n,e,t)=>n+(e-n)*t;function ig(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function n4({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const u=t<.5?t*(1+e):t+e-t*e,c=2*t-u;s=ig(c,u,n+1/3),o=ig(c,u,n),l=ig(c,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function ef(n,e){return t=>t>0?e:n}const og=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},r4=[Jg,ko,Za],s4=n=>r4.find(e=>e.test(n));function pb(n){const e=s4(n);if(!e)return!1;let t=e.parse(n);return e===Za&&(t=n4(t)),t}const mb=(n,e)=>{const t=pb(n),r=pb(e);if(!t||!r)return ef(n,e);const s={...t};return o=>(s.red=og(t.red,r.red,o),s.green=og(t.green,r.green,o),s.blue=og(t.blue,r.blue,o),s.alpha=mt(t.alpha,r.alpha,o),ko.transform(s))},i4=(n,e)=>t=>e(n(t)),Oc=(...n)=>n.reduce(i4),r0=new Set(["none","hidden"]);function o4(n,e){return r0.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function a4(n,e){return t=>mt(n,e,t)}function jy(n){return typeof n=="number"?a4:typeof n=="string"?wy(n)?ef:cn.test(n)?mb:c4:Array.isArray(n)?Fk:typeof n=="object"?cn.test(n)?mb:l4:ef}function Fk(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>jy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function l4(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=jy(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function u4(n,e){var t;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=n.indexes[l][s[l]],c=(t=n.values[u])!==null&&t!==void 0?t:0;r[o]=c,s[l]++}return r}const c4=(n,e)=>{const t=Ai.createTransformer(e),r=yc(n),s=yc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?r0.has(n)&&!s.values.length||r0.has(e)&&!r.values.length?o4(n,e):Oc(Fk(u4(r,s),s.values),t):ef(n,e)};function Uk(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?mt(n,e,t):jy(n)(n,e)}const d4=5;function Bk(n,e,t){const r=Math.max(e-d4,0);return BS(t-n(r),e-r)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gb=.001;function h4({duration:n=vt.duration,bounce:e=vt.bounce,velocity:t=vt.velocity,mass:r=vt.mass}){let s,o,l=1-e;l=js(vt.minDamping,vt.maxDamping,l),n=js(vt.minDuration,vt.maxDuration,Is(n)),l<1?(s=h=>{const g=h*l,v=g*n,w=g-t,E=s0(h,l),C=Math.exp(-v);return gb-w/E*C},o=h=>{const v=h*l*n,w=v*t+t,E=Math.pow(l,2)*Math.pow(h,2)*n,C=Math.exp(-v),j=s0(Math.pow(h,2),l);return(-s(h)+gb>0?-1:1)*((w-E)*C)/j}):(s=h=>{const g=Math.exp(-h*n),v=(h-t)*n+1;return-.001+g*v},o=h=>{const g=Math.exp(-h*n),v=(t-h)*(n*n);return g*v});const u=5/n,c=p4(s,o,u);if(n=As(n),isNaN(c))return{stiffness:vt.stiffness,damping:vt.damping,duration:n};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:n}}}const f4=12;function p4(n,e,t){let r=t;for(let s=1;s<f4;s++)r=r-n(r)/e(r);return r}function s0(n,e){return n*Math.sqrt(1-e*e)}const m4=["duration","bounce"],g4=["stiffness","damping","mass"];function yb(n,e){return e.some(t=>n[t]!==void 0)}function y4(n){let e={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...n};if(!yb(n,g4)&&yb(n,m4))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*js(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:vt.mass,stiffness:s,damping:o}}else{const t=h4(n);e={...e,...t,mass:vt.mass},e.isResolvedFromDuration=!0}return e}function zk(n=vt.visualDuration,e=vt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:h,mass:g,duration:v,velocity:w,isResolvedFromDuration:E}=y4({...t,velocity:-Is(t.velocity||0)}),C=w||0,j=h/(2*Math.sqrt(c*g)),A=l-o,D=Is(Math.sqrt(c/g)),V=Math.abs(A)<5;r||(r=V?vt.restSpeed.granular:vt.restSpeed.default),s||(s=V?vt.restDelta.granular:vt.restDelta.default);let $;if(j<1){const H=s0(D,j);$=F=>{const I=Math.exp(-j*D*F);return l-I*((C+j*D*A)/H*Math.sin(H*F)+A*Math.cos(H*F))}}else if(j===1)$=H=>l-Math.exp(-D*H)*(A+(C+D*A)*H);else{const H=D*Math.sqrt(j*j-1);$=F=>{const I=Math.exp(-j*D*F),b=Math.min(H*F,300);return l-I*((C+j*D*A)*Math.sinh(b)+H*A*Math.cosh(b))/H}}const W={calculatedDuration:E&&v||null,next:H=>{const F=$(H);if(E)u.done=H>=v;else{let I=0;j<1&&(I=H===0?As(C):Bk($,H,F));const b=Math.abs(I)<=r,S=Math.abs(l-F)<=s;u.done=b&&S}return u.value=u.done?l:F,u},toString:()=>{const H=Math.min(zS(W),qg),F=WS(I=>W.next(H*I).value,H,30);return H+"ms "+F}};return W}function vb({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:c,restDelta:h=.5,restSpeed:g}){const v=n[0],w={done:!1,value:v},E=b=>u!==void 0&&b<u||c!==void 0&&b>c,C=b=>u===void 0?c:c===void 0||Math.abs(u-b)<Math.abs(c-b)?u:c;let j=t*e;const A=v+j,D=l===void 0?A:l(A);D!==A&&(j=D-v);const V=b=>-j*Math.exp(-b/r),$=b=>D+V(b),W=b=>{const S=V(b),R=$(b);w.done=Math.abs(S)<=h,w.value=w.done?D:R};let H,F;const I=b=>{E(w.value)&&(H=b,F=zk({keyframes:[w.value,C(w.value)],velocity:Bk($,b,w.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return I(0),{calculatedDuration:null,next:b=>{let S=!1;return!F&&H===void 0&&(S=!0,W(b),I(b)),H!==void 0&&b>=H?F.next(b-H):(!S&&W(b),w)}}}const v4=Dc(.42,0,1,1),w4=Dc(0,0,.58,1),Wk=Dc(.42,0,.58,1),x4=n=>Array.isArray(n)&&typeof n[0]!="number",_4={linear:qn,easeIn:v4,easeInOut:Wk,easeOut:w4,circIn:Ay,circInOut:Ek,circOut:bk,backIn:Py,backInOut:xk,backOut:wk,anticipate:_k},wb=n=>{if(hy(n)){US(n.length===4);const[e,t,r,s]=n;return Dc(e,t,r,s)}else if(typeof n=="string")return _4[n];return n};function b4(n,e,t){const r=[],s=t||Uk,o=n.length-1;for(let l=0;l<o;l++){let u=s(n[l],n[l+1]);if(e){const c=Array.isArray(e)?e[l]||qn:e;u=Oc(c,u)}r.push(u)}return r}function E4(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(US(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const u=b4(e,r,s),c=u.length,h=g=>{if(l&&g<n[0])return e[0];let v=0;if(c>1)for(;v<n.length-2&&!(g<n[v+1]);v++);const w=ml(n[v],n[v+1],g);return u[v](w)};return t?g=>h(js(n[0],n[o-1],g)):h}function T4(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=ml(0,e,r);n.push(mt(t,1,s))}}function S4(n){const e=[0];return T4(e,n.length-1),e}function k4(n,e){return n.map(t=>t*e)}function C4(n,e){return n.map(()=>e||Wk).splice(0,n.length-1)}function tf({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=x4(r)?r.map(wb):wb(r),o={done:!1,value:e[0]},l=k4(t&&t.length===e.length?t:S4(e),n),u=E4(l,e,{ease:Array.isArray(s)?s:C4(e,s)});return{calculatedDuration:n,next:c=>(o.value=u(c),o.done=c>=n,o)}}const P4=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ot.update(e,!0),stop:()=>Pi(e),now:()=>Yt.isProcessing?Yt.timestamp:Gr.now()}},A4={decay:vb,inertia:vb,tween:tf,keyframes:tf,spring:zk},I4=n=>n/100;class Dy extends $k{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:t,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||Ny,u=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new l(o,u,t,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,u=dy(t)?t:A4[t]||tf;let c,h;u!==tf&&typeof e[0]!="number"&&(c=Oc(I4,Uk(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=zS(g));const{calculatedDuration:v}=g,w=v+s,E=w*(r+1)-s;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:v,resolvedDuration:w,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:r}=this;if(!r){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:w,repeat:E,repeatType:C,repeatDelay:j,onUpdate:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const D=this.currentTime-w*(this.speed>=0?1:-1),V=this.speed>=0?D<0:D>g;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,W=o;if(E){const b=Math.min(this.currentTime,g)/v;let S=Math.floor(b),R=b%1;!R&&b>=1&&(R=1),R===1&&S--,S=Math.min(S,E+1),!!(S%2)&&(C==="reverse"?(R=1-R,j&&(R-=j/v)):C==="mirror"&&(W=l)),$=js(0,1,R)*v}const H=V?{done:!1,value:c[0]}:W.next($);u&&(H.value=u(H.value));let{done:F}=H;!V&&h!==null&&(F=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return I&&s!==void 0&&(H.value=Df(c,this.options,s)),A&&A(H.value),I&&this.finish(),H}get duration(){const{resolved:e}=this;return e?Is(e.calculatedDuration):0}get time(){return Is(this.currentTime)}set time(e){e=As(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Is(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=P4,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),t&&t();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const R4=new Set(["opacity","clipPath","filter","transform"]);function N4(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:c}={}){const h={[e]:t};c&&(h.offset=c);const g=qS(u,s);return Array.isArray(g)&&(h.easing=g),n.animate(h,{delay:r,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"})}const j4=ly(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nf=10,D4=2e4;function O4(n){return dy(n.type)||n.type==="spring"||!HS(n.ease)}function L4(n,e){const t=new Dy({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:n[0]};const s=[];let o=0;for(;!r.done&&o<D4;)r=t.sample(o),s.push(r.value),o+=nf;return{times:void 0,keyframes:s,duration:o-nf,ease:"linear"}}const Hk={anticipate:_k,backInOut:xk,circInOut:Ek};function M4(n){return n in Hk}class xb extends $k{constructor(e){super(e);const{name:t,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new Vk(o,(l,u)=>this.onKeyframesResolved(l,u),t,r,s),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:s,ease:o,type:l,motionValue:u,name:c,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&Xh()&&M4(o)&&(o=Hk[o]),O4(this.options)){const{onComplete:v,onUpdate:w,motionValue:E,element:C,...j}=this.options,A=L4(e,j);e=A.keyframes,e.length===1&&(e[1]=e[0]),r=A.duration,s=A.times,o=A.ease,l="keyframes"}const g=N4(u.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(q_(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;u.set(Df(e,this.options,t)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Is(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Is(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.currentTime=As(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return qn;const{animation:r}=t;q_(r,e)}return qn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:r,duration:s,type:o,ease:l,times:u}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:w,...E}=this.options,C=new Dy({...E,keyframes:r,duration:s,type:o,ease:l,times:u,isGenerator:!0}),j=As(this.time);h.setWithVelocity(C.sample(j-nf).value,C.sample(j).value,nf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:o,damping:l,type:u}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=t.owner.getProps();return j4()&&r&&R4.has(r)&&!c&&!h&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}}const V4={type:"spring",stiffness:500,damping:25,restSpeed:10},$4=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),F4={type:"keyframes",duration:.8},U4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},B4=(n,{keyframes:e})=>e.length>2?F4:Fo.has(n)?n.startsWith("scale")?$4(e[1]):V4:U4;function z4({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:c,elapsed:h,...g}){return!!Object.keys(g).length}const Oy=(n,e,t,r={},s,o)=>l=>{const u=cy(r,n)||{},c=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-As(c);let g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:w=>{e.set(w),u.onUpdate&&u.onUpdate(w)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:n,motionValue:e,element:o?void 0:s};z4(u)||(g={...g,...B4(n,g)}),g.duration&&(g.duration=As(g.duration)),g.repeatDelay&&(g.repeatDelay=As(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const w=Df(g.keyframes,u);if(w!==void 0)return ot.update(()=>{g.onUpdate(w),g.onComplete()}),new hD([])}return!o&&xb.supports(g)?new xb(g):new Dy(g)};function W4({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function qk(n,e,{delay:t=0,transitionOverride:r,type:s}={}){var o;let{transition:l=n.getDefaultTransition(),transitionEnd:u,...c}=e;r&&(l=r);const h=[],g=s&&n.animationState&&n.animationState.getState()[s];for(const v in c){const w=n.getValue(v,(o=n.latestValues[v])!==null&&o!==void 0?o:null),E=c[v];if(E===void 0||g&&W4(g,v))continue;const C={delay:t,...cy(l||{},v)};let j=!1;if(window.MotionHandoffAnimation){const D=mk(n);if(D){const V=window.MotionHandoffAnimation(D,v,ot);V!==null&&(C.startTime=V,j=!0)}}Qg(n,v),w.start(Oy(v,w,E,n.shouldReduceMotion&&pk.has(v)?{type:!1}:C,n,j));const A=w.animation;A&&h.push(A)}return u&&Promise.all(h).then(()=>{ot.update(()=>{u&&vO(n,u)})}),h}function i0(n,e,t={}){var r;const s=gc(n,e,t.type==="exit"?(r=n.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(o=t.transitionOverride);const l=s?()=>Promise.all(qk(n,s,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:w}=o;return H4(n,e,g+h,v,w,t)}:()=>Promise.resolve(),{when:c}=o;if(c){const[h,g]=c==="beforeChildren"?[l,u]:[u,l];return h().then(()=>g())}else return Promise.all([l(),u(t.delay)])}function H4(n,e,t=0,r=0,s=1,o){const l=[],u=(n.variantChildren.size-1)*r,c=s===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(n.variantChildren).sort(q4).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(i0(h,e,{...o,delay:t+c(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function q4(n,e){return n.sortNodePosition(e)}function K4(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>i0(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=i0(n,e,t);else{const s=typeof e=="function"?gc(n,e,t.custom):e;r=Promise.all(qk(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function Kk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const G4=gy.length;function Gk(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Gk(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<G4;t++){const r=gy[t],s=n.props[r];(fc(s)||s===!1)&&(e[r]=s)}return e}const Q4=[...my].reverse(),J4=my.length;function Y4(n){return e=>Promise.all(e.map(({animation:t,options:r})=>K4(n,t,r)))}function X4(n){let e=Y4(n),t=_b(),r=!0;const s=c=>(h,g)=>{var v;const w=gc(n,g,c==="exit"?(v=n.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(w){const{transition:E,transitionEnd:C,...j}=w;h={...h,...j,...C}}return h};function o(c){e=c(n)}function l(c){const{props:h}=n,g=Gk(n.parent)||{},v=[],w=new Set;let E={},C=1/0;for(let A=0;A<J4;A++){const D=Q4[A],V=t[D],$=h[D]!==void 0?h[D]:g[D],W=fc($),H=D===c?V.isActive:null;H===!1&&(C=A);let F=$===g[D]&&$!==h[D]&&W;if(F&&r&&n.manuallyAnimateOnMount&&(F=!1),V.protectedKeys={...E},!V.isActive&&H===null||!$&&!V.prevProp||Nf($)||typeof $=="boolean")continue;const I=Z4(V.prevProp,$);let b=I||D===c&&V.isActive&&!F&&W||A>C&&W,S=!1;const R=Array.isArray($)?$:[$];let M=R.reduce(s(D),{});H===!1&&(M={});const{prevResolvedValues:B={}}=V,O={...B,...M},re=we=>{b=!0,w.has(we)&&(S=!0,w.delete(we)),V.needsAnimating[we]=!0;const le=n.getValue(we);le&&(le.liveStyle=!1)};for(const we in O){const le=M[we],me=B[we];if(E.hasOwnProperty(we))continue;let fe=!1;Gg(le)&&Gg(me)?fe=!Kk(le,me):fe=le!==me,fe?le!=null?re(we):w.add(we):le!==void 0&&w.has(we)?re(we):V.protectedKeys[we]=!0}V.prevProp=$,V.prevResolvedValues=M,V.isActive&&(E={...E,...M}),r&&n.blockInitialAnimation&&(b=!1),b&&(!(F&&I)||S)&&v.push(...R.map(we=>({animation:we,options:{type:D}})))}if(w.size){const A={};if(typeof h.initial!="boolean"){const D=gc(n,Array.isArray(h.initial)?h.initial[0]:h.initial);D&&D.transition&&(A.transition=D.transition)}w.forEach(D=>{const V=n.getBaseTarget(D),$=n.getValue(D);$&&($.liveStyle=!0),A[D]=V??null}),v.push({animation:A})}let j=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(v):Promise.resolve()}function u(c,h){var g;if(t[c].isActive===h)return Promise.resolve();(g=n.variantChildren)===null||g===void 0||g.forEach(w=>{var E;return(E=w.animationState)===null||E===void 0?void 0:E.setActive(c,h)}),t[c].isActive=h;const v=l(c);for(const w in t)t[w].protectedKeys={};return v}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>t,reset:()=>{t=_b(),r=!0}}}function Z4(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Kk(e,n):!1}function vo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _b(){return{animate:vo(!0),whileInView:vo(),whileHover:vo(),whileTap:vo(),whileDrag:vo(),whileFocus:vo(),exit:vo()}}class $i{constructor(e){this.isMounted=!1,this.node=e}update(){}}class eL extends $i{constructor(e){super(e),e.animationState||(e.animationState=X4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let tL=0;class nL extends $i{constructor(){super(...arguments),this.id=tL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const rL={animation:{Feature:eL},exit:{Feature:nL}};function vc(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function Lc(n){return{point:{x:n.pageX,y:n.pageY}}}const sL=n=>e=>py(e)&&n(e,Lc(e));function tc(n,e,t,r){return vc(n,e,sL(t),r)}function Qk({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function iL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function oL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}const Jk=1e-4,aL=1-Jk,lL=1+Jk,Yk=.01,uL=0-Yk,cL=0+Yk;function xn(n){return n.max-n.min}function dL(n,e,t){return Math.abs(n-e)<=t}function bb(n,e,t,r=.5){n.origin=r,n.originPoint=mt(e.min,e.max,n.origin),n.scale=xn(t)/xn(e),n.translate=mt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=aL&&n.scale<=lL||isNaN(n.scale))&&(n.scale=1),(n.translate>=uL&&n.translate<=cL||isNaN(n.translate))&&(n.translate=0)}function nc(n,e,t,r){bb(n.x,e.x,t.x,r?r.originX:void 0),bb(n.y,e.y,t.y,r?r.originY:void 0)}function Eb(n,e,t){n.min=t.min+e.min,n.max=n.min+xn(e)}function hL(n,e,t){Eb(n.x,e.x,t.x),Eb(n.y,e.y,t.y)}function Tb(n,e,t){n.min=e.min-t.min,n.max=n.min+xn(e)}function rc(n,e,t){Tb(n.x,e.x,t.x),Tb(n.y,e.y,t.y)}const Sb=()=>({translate:0,scale:1,origin:0,originPoint:0}),el=()=>({x:Sb(),y:Sb()}),kb=()=>({min:0,max:0}),Tt=()=>({x:kb(),y:kb()});function sr(n){return[n("x"),n("y")]}function ag(n){return n===void 0||n===1}function o0({scale:n,scaleX:e,scaleY:t}){return!ag(n)||!ag(e)||!ag(t)}function bo(n){return o0(n)||Xk(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Xk(n){return Cb(n.x)||Cb(n.y)}function Cb(n){return n&&n!=="0%"}function rf(n,e,t){const r=n-t,s=e*r;return t+s}function Pb(n,e,t,r,s){return s!==void 0&&(n=rf(n,s,r)),rf(n,t,r)+e}function a0(n,e=0,t=1,r,s){n.min=Pb(n.min,e,t,r,s),n.max=Pb(n.max,e,t,r,s)}function Zk(n,{x:e,y:t}){a0(n.x,e.translate,e.scale,e.originPoint),a0(n.y,t.translate,t.scale,t.originPoint)}const Ab=.999999999999,Ib=1.0000000000001;function fL(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=t[u],l=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&nl(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Zk(n,l)),r&&bo(o.latestValues)&&nl(n,o.latestValues))}e.x<Ib&&e.x>Ab&&(e.x=1),e.y<Ib&&e.y>Ab&&(e.y=1)}function tl(n,e){n.min=n.min+e,n.max=n.max+e}function Rb(n,e,t,r,s=.5){const o=mt(n.min,n.max,s);a0(n,e,t,o,r)}function nl(n,e){Rb(n.x,e.x,e.scaleX,e.scale,e.originX),Rb(n.y,e.y,e.scaleY,e.scale,e.originY)}function eC(n,e){return Qk(oL(n.getBoundingClientRect(),e))}function pL(n,e,t){const r=eC(n,t),{scroll:s}=e;return s&&(tl(r.x,s.offset.x),tl(r.y,s.offset.y)),r}const tC=({current:n})=>n?n.ownerDocument.defaultView:null,Nb=(n,e)=>Math.abs(n-e);function mL(n,e){const t=Nb(n.x,e.x),r=Nb(n.y,e.y);return Math.sqrt(t**2+r**2)}class nC{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=ug(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,E=mL(v.offset,{x:0,y:0})>=3;if(!w&&!E)return;const{point:C}=v,{timestamp:j}=Yt;this.history.push({...C,timestamp:j});const{onStart:A,onMove:D}=this.handlers;w||(A&&A(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,v)},this.handlePointerMove=(v,w)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=lg(w,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(v,w)=>{this.end();const{onEnd:E,onSessionEnd:C,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=ug(v.type==="pointercancel"?this.lastMoveEventInfo:lg(w,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,A),C&&C(v,A)},!py(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const l=Lc(e),u=lg(l,this.transformPagePoint),{point:c}=u,{timestamp:h}=Yt;this.history=[{...c,timestamp:h}];const{onSessionStart:g}=t;g&&g(e,ug(u,this.history)),this.removeListeners=Oc(tc(this.contextWindow,"pointermove",this.handlePointerMove),tc(this.contextWindow,"pointerup",this.handlePointerUp),tc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Pi(this.updatePoint)}}function lg(n,e){return e?{point:e(n.point)}:n}function jb(n,e){return{x:n.x-e.x,y:n.y-e.y}}function ug({point:n},e){return{point:n,delta:jb(n,rC(e)),offset:jb(n,gL(e)),velocity:yL(e,.1)}}function gL(n){return n[0]}function rC(n){return n[n.length-1]}function yL(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=rC(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>As(e)));)t--;if(!r)return{x:0,y:0};const o=Is(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function vL(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?mt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?mt(t,n,r.max):Math.min(n,t)),n}function Db(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function wL(n,{top:e,left:t,bottom:r,right:s}){return{x:Db(n.x,t,s),y:Db(n.y,e,r)}}function Ob(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function xL(n,e){return{x:Ob(n.x,e.x),y:Ob(n.y,e.y)}}function _L(n,e){let t=.5;const r=xn(n),s=xn(e);return s>r?t=ml(e.min,e.max-r,n.min):r>s&&(t=ml(n.min,n.max-s,e.min)),js(0,1,t)}function bL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const l0=.35;function EL(n=l0){return n===!1?n=0:n===!0&&(n=l0),{x:Lb(n,"left","right"),y:Lb(n,"top","bottom")}}function Lb(n,e,t){return{min:Mb(n,e),max:Mb(n,t)}}function Mb(n,e){return typeof n=="number"?n:n[e]||0}const TL=new WeakMap;class SL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Lc(g).point)},o=(g,v)=>{const{drag:w,dragPropagation:E,onDragStart:C}=this.getProps();if(w&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vD(w),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sr(A=>{let D=this.getAxisMotionValue(A).get()||0;if(Qr.test(D)){const{projection:V}=this.visualElement;if(V&&V.layout){const $=V.layout.layoutBox[A];$&&(D=xn($)*(parseFloat(D)/100))}}this.originPoint[A]=D}),C&&ot.postRender(()=>C(g,v)),Qg(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:w,dragDirectionLock:E,onDirectionLock:C,onDrag:j}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:A}=v;if(E&&this.currentDirection===null){this.currentDirection=kL(A),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",v.point,A),this.updateAxis("y",v.point,A),this.visualElement.render(),j&&j(g,v)},u=(g,v)=>this.stop(g,v),c=()=>sr(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new nC(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:tC(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ot.postRender(()=>o(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!xh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=vL(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;t&&Xa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=wL(s.layoutBox,t):this.constraints=!1,this.elastic=EL(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&sr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=bL(s.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=pL(r,s.root,this.visualElement.getTransformPagePoint());let l=xL(s.layout.layoutBox,o);if(t){const u=t(iL(l));this.hasMutatedConstraints=!!u,u&&(l=Qk(u))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},h=sr(g=>{if(!xh(g,t,this.currentDirection))return;let v=c&&c[g]||{};l&&(v={min:0,max:0});const w=s?200:1e6,E=s?40:1e7,C={type:"inertia",velocity:r?e[g]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,C)});return Promise.all(h).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return Qg(this.visualElement,e),r.start(Oy(e,r,0,t,this.visualElement,!1))}stopAnimation(){sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sr(t=>{const{drag:r}=this.getProps();if(!xh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[t];o.set(e[t]-mt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Xa(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};sr(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const c=u.get();s[l]=_L({min:c,max:c},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sr(l=>{if(!xh(l,e,null))return;const u=this.getAxisMotionValue(l),{min:c,max:h}=this.constraints[l];u.set(mt(c,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;TL.set(this.visualElement,this);const e=this.visualElement.current,t=tc(e,"pointerdown",c=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Xa(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ot.read(r);const l=vc(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(sr(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=c[g].translate,v.set(v.get()+c[g].translate))}),this.visualElement.render())});return()=>{l(),t(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=l0,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function xh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function kL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class CL extends $i{constructor(e){super(e),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new SL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vb=n=>(e,t)=>{n&&ot.postRender(()=>n(e,t))};class PL extends $i{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(e){this.session=new nC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Vb(e),onStart:Vb(t),onMove:r,onEnd:(o,l)=>{delete this.session,s&&ot.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=tc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Dh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $b(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const $u={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ie.test(n))n=parseFloat(n);else return n;const t=$b(n,e.target.x),r=$b(n,e.target.y);return`${t}% ${r}%`}},AL={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Ai.parse(n);if(s.length>5)return r;const o=Ai.createTransformer(n),l=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,c=t.y.scale*e.y;s[0+l]/=u,s[1+l]/=c;const h=mt(u,c,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class IL extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;qD(RL),o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Dh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||ot.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sC(n){const[e,t]=FS(),r=P.useContext(ny);return p.jsx(IL,{...n,layoutGroup:r,switchLayoutGroup:P.useContext(tk),isPresent:e,safeToRemove:t})}const RL={borderRadius:{...$u,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$u,borderTopRightRadius:$u,borderBottomLeftRadius:$u,borderBottomRightRadius:$u,boxShadow:AL};function NL(n,e,t){const r=fn(n)?n:hc(n);return r.start(Oy("",r,e,t)),r.animation}function jL(n){return n instanceof SVGElement&&n.tagName!=="svg"}const DL=(n,e)=>n.depth-e.depth;class OL{constructor(){this.children=[],this.isDirty=!1}add(e){oy(this.children,e),this.isDirty=!0}remove(e){ay(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DL),this.isDirty=!1,this.children.forEach(e)}}function LL(n,e){const t=Gr.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(Pi(r),n(o-e))};return ot.read(r,!0),()=>Pi(r)}const iC=["TopLeft","TopRight","BottomLeft","BottomRight"],ML=iC.length,Fb=n=>typeof n=="string"?parseFloat(n):n,Ub=n=>typeof n=="number"||Ie.test(n);function VL(n,e,t,r,s,o){s?(n.opacity=mt(0,t.opacity!==void 0?t.opacity:1,$L(r)),n.opacityExit=mt(e.opacity!==void 0?e.opacity:1,0,FL(r))):o&&(n.opacity=mt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let l=0;l<ML;l++){const u=`border${iC[l]}Radius`;let c=Bb(e,u),h=Bb(t,u);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||Ub(c)===Ub(h)?(n[u]=Math.max(mt(Fb(c),Fb(h),r),0),(Qr.test(h)||Qr.test(c))&&(n[u]+="%")):n[u]=h}(e.rotate||t.rotate)&&(n.rotate=mt(e.rotate||0,t.rotate||0,r))}function Bb(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const $L=oC(0,.5,bk),FL=oC(.5,.95,qn);function oC(n,e,t){return r=>r<n?0:r>e?1:t(ml(n,e,r))}function zb(n,e){n.min=e.min,n.max=e.max}function rr(n,e){zb(n.x,e.x),zb(n.y,e.y)}function Wb(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Hb(n,e,t,r,s){return n-=e,n=rf(n,1/t,r),s!==void 0&&(n=rf(n,1/s,r)),n}function UL(n,e=0,t=1,r=.5,s,o=n,l=n){if(Qr.test(e)&&(e=parseFloat(e),e=mt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=mt(o.min,o.max,r);n===o&&(u-=e),n.min=Hb(n.min,e,t,u,s),n.max=Hb(n.max,e,t,u,s)}function qb(n,e,[t,r,s],o,l){UL(n,e[t],e[r],e[s],e.scale,o,l)}const BL=["x","scaleX","originX"],zL=["y","scaleY","originY"];function Kb(n,e,t,r){qb(n.x,e,BL,t?t.x:void 0,r?r.x:void 0),qb(n.y,e,zL,t?t.y:void 0,r?r.y:void 0)}function Gb(n){return n.translate===0&&n.scale===1}function aC(n){return Gb(n.x)&&Gb(n.y)}function Qb(n,e){return n.min===e.min&&n.max===e.max}function WL(n,e){return Qb(n.x,e.x)&&Qb(n.y,e.y)}function Jb(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function lC(n,e){return Jb(n.x,e.x)&&Jb(n.y,e.y)}function Yb(n){return xn(n.x)/xn(n.y)}function Xb(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class HL{constructor(){this.members=[]}add(e){oy(this.members,e),e.scheduleRender()}remove(e){if(ay(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qL(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:w,skewX:E,skewY:C}=t;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),w&&(r+=`rotateY(${w}deg) `),E&&(r+=`skewX(${E}deg) `),C&&(r+=`skewY(${C}deg) `)}const u=n.x.scale*e.x,c=n.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const cg=["","X","Y","Z"],KL={visibility:"hidden"},Zb=1e3;let GL=0;function dg(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function uC(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=mk(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ot,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&uC(r)}function cC({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e==null?void 0:e()){this.id=GL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YL),this.nodes.forEach(nM),this.nodes.forEach(rM),this.nodes.forEach(XL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new OL)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new uy),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const c=this.eventHandlers.get(l);c&&c.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jL(l),this.instance=l;const{layoutId:c,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||c)&&(this.isLayoutDirty=!0),n){let v;const w=()=>this.root.updateBlockedByResize=!1;n(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=LL(w,250),Dh.hasAnimatedSinceResize&&(Dh.hasAnimatedSinceResize=!1,this.nodes.forEach(tE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&g&&(c||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:w,hasRelativeLayoutChanged:E,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||g.getDefaultTransition()||lM,{onLayoutAnimationStart:A,onLayoutAnimationComplete:D}=g.getProps(),V=!this.targetLayout||!lC(this.targetLayout,C),$=!w&&E;if(this.options.layoutRoot||this.resumeFrom||$||w&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const W={...cy(j,"layout"),onPlay:A,onComplete:D};(g.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W)}else w||tE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Pi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(sM),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eE);return}this.isUpdating||this.nodes.forEach(eM),this.isUpdating=!1,this.nodes.forEach(tM),this.nodes.forEach(QL),this.nodes.forEach(JL),this.clearAllSnapshots();const u=Gr.now();Yt.delta=js(0,1e3/60,u-Yt.timestamp),Yt.timestamp=u,Yt.isProcessing=!0,ng.update.process(Yt),ng.preRender.process(Yt),ng.render.process(Yt),Yt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZL),this.sharedNodes.forEach(iM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!xn(this.snapshot.measuredBox.x)&&!xn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!aC(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&(u||bo(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return l&&(c=this.removeTransform(c)),uM(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:u}=this.options;if(!u)return Tt();const c=u.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(cM))){const{scroll:g}=this.root;g&&(tl(c.x,g.offset.x),tl(c.y,g.offset.y))}return c}removeElementScroll(l){var u;const c=Tt();if(rr(c,l),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return c;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:w}=g;g!==this.root&&v&&w.layoutScroll&&(v.wasRoot&&rr(c,l),tl(c.x,v.offset.x),tl(c.y,v.offset.y))}return c}applyTransform(l,u=!1){const c=Tt();rr(c,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&nl(c,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),bo(g.latestValues)&&nl(c,g.latestValues)}return bo(this.latestValues)&&nl(c,this.latestValues),c}removeTransform(l){const u=Tt();rr(u,l);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!bo(h.latestValues))continue;o0(h.latestValues)&&h.updateSnapshot();const g=Tt(),v=h.measurePageBox();rr(g,v),Kb(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return bo(this.latestValues)&&Kb(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Yt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var u;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:w}=this.options;if(!(!this.layout||!(v||w))){if(this.resolvedRelativeTargetAt=Yt.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),rc(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rr(this.target,this.layout.layoutBox),Zk(this.target,this.targetDelta)):rr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),rc(this.relativeTargetOrigin,this.target,E.target),rr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||o0(this.parent.latestValues)||Xk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const u=this.getLead(),c=!!this.resumingFrom||this!==u;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Yt.timestamp&&(h=!1),h)return;const{layout:g,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||v))return;rr(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,E=this.treeScale.y;fL(this.layoutCorrected,this.treeScale,this.path,c),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Tt());const{target:C}=u;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Wb(this.prevProjectionDelta.x,this.projectionDelta.x),Wb(this.prevProjectionDelta.y,this.projectionDelta.y)),nc(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==E||!Xb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Xb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=el(),this.projectionDelta=el(),this.projectionDeltaWithTransform=el()}setAnimationOrigin(l,u=!1){const c=this.snapshot,h=c?c.latestValues:{},g={...this.latestValues},v=el();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const w=Tt(),E=c?c.source:void 0,C=this.layout?this.layout.source:void 0,j=E!==C,A=this.getStack(),D=!A||A.members.length<=1,V=!!(j&&!D&&this.options.crossfade===!0&&!this.path.some(aM));this.animationProgress=0;let $;this.mixTargetDelta=W=>{const H=W/1e3;nE(v.x,l.x,H),nE(v.y,l.y,H),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rc(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),oM(this.relativeTarget,this.relativeTargetOrigin,w,H),$&&WL(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=Tt()),rr($,this.relativeTarget)),j&&(this.animationValues=g,VL(g,h,this.latestValues,H,V,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Pi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Dh.hasAnimatedSinceResize=!0,this.currentAnimation=NL(0,Zb,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:c,layout:h,latestValues:g}=l;if(!(!u||!c||!h)){if(this!==l&&this.layout&&h&&dC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||Tt();const v=xn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+v;const w=xn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+w}rr(u,c),nl(u,g),nc(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new HL),this.sharedNodes.get(l).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:u}=this.options;return u?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:u}=this.options;return u?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const h={};c.z&&dg("z",l,h,this.animationValues);for(let g=0;g<cg.length;g++)dg(`rotate${cg[g]}`,l,h,this.animationValues),dg(`skew${cg[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){var u,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return KL;const h={visibility:""},g=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=jh(l==null?void 0:l.pointerEvents)||"",h.transform=g?g(this.latestValues,""):"none",h;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=jh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!bo(this.latestValues)&&(j.transform=g?g({},""):"none",this.hasProjected=!1),j}const w=v.animationValues||v.latestValues;this.applyTransformsToTarget(),h.transform=qL(this.projectionDeltaWithTransform,this.treeScale,w),g&&(h.transform=g(w,h.transform));const{x:E,y:C}=this.projectionDelta;h.transformOrigin=`${E.origin*100}% ${C.origin*100}% 0`,v.animationValues?h.opacity=v===this?(c=(u=w.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:h.opacity=v===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const j in pc){if(w[j]===void 0)continue;const{correct:A,applyTo:D,isCSSVariable:V}=pc[j],$=h.transform==="none"?w[j]:A(w[j],v);if(D){const W=D.length;for(let H=0;H<W;H++)h[D[H]]=$}else V?this.options.visualElement.renderState.vars[j]=$:h[j]=$}return this.options.layoutId&&(h.pointerEvents=v===this?jh(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(eE),this.root.sharedNodes.clear()}}}function QL(n){n.updateLayout()}function JL(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=t.source!==n.layout.source;o==="size"?sr(v=>{const w=l?t.measuredBox[v]:t.layoutBox[v],E=xn(w);w.min=r[v].min,w.max=w.min+E}):dC(o,t.layoutBox,r)&&sr(v=>{const w=l?t.measuredBox[v]:t.layoutBox[v],E=xn(r[v]);w.max=w.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+E)});const u=el();nc(u,r,t.layoutBox);const c=el();l?nc(c,n.applyTransform(s,!0),t.measuredBox):nc(c,r,t.layoutBox);const h=!aC(u);let g=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:w,layout:E}=v;if(w&&E){const C=Tt();rc(C,t.layoutBox,w.layoutBox);const j=Tt();rc(j,r,E.layoutBox),lC(C,j)||(g=!0),v.options.layoutRoot&&(n.relativeTarget=j,n.relativeTargetOrigin=C,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function YL(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function XL(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function ZL(n){n.clearSnapshot()}function eE(n){n.clearMeasurements()}function eM(n){n.isLayoutDirty=!1}function tM(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function tE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function nM(n){n.resolveTargetDelta()}function rM(n){n.calcProjection()}function sM(n){n.resetSkewAndRotation()}function iM(n){n.removeLeadSnapshot()}function nE(n,e,t){n.translate=mt(e.translate,0,t),n.scale=mt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function rE(n,e,t,r){n.min=mt(e.min,t.min,r),n.max=mt(e.max,t.max,r)}function oM(n,e,t,r){rE(n.x,e.x,t.x,r),rE(n.y,e.y,t.y,r)}function aM(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const lM={duration:.45,ease:[.4,0,.1,1]},sE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),iE=sE("applewebkit/")&&!sE("chrome/")?Math.round:qn;function oE(n){n.min=iE(n.min),n.max=iE(n.max)}function uM(n){oE(n.x),oE(n.y)}function dC(n,e,t){return n==="position"||n==="preserve-aspect"&&!dL(Yb(e),Yb(t),.2)}function cM(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const dM=cC({attachResizeListener:(n,e)=>vc(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hg={current:void 0},hC=cC({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!hg.current){const n=new dM({});n.mount(window),n.setOptions({layoutScroll:!0}),hg.current=n}return hg.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),hM={pan:{Feature:PL},drag:{Feature:CL,ProjectionNode:hC,MeasureLayout:sC}};function aE(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&ot.postRender(()=>o(e,Lc(e)))}class fM extends $i{mount(){const{current:e}=this.node;e&&(this.unmount=xD(e,(t,r)=>(aE(this.node,r,"Start"),s=>aE(this.node,s,"End"))))}unmount(){}}class pM extends $i{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oc(vc(this.node.current,"focus",()=>this.onFocus()),vc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lE(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&ot.postRender(()=>o(e,Lc(e)))}class mM extends $i{mount(){const{current:e}=this.node;e&&(this.unmount=TD(e,(t,r)=>(lE(this.node,r,"Start"),(s,{success:o})=>lE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const u0=new WeakMap,fg=new WeakMap,gM=n=>{const e=u0.get(n.target);e&&e(n)},yM=n=>{n.forEach(gM)};function vM({root:n,...e}){const t=n||document;fg.has(t)||fg.set(t,{});const r=fg.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(yM,{root:n,...e})),r[s]}function wM(n,e,t){const r=vM(e);return u0.set(n,t),r.observe(n),()=>{u0.delete(n),r.unobserve(n)}}const xM={some:0,all:1};class _M extends $i{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:xM[s]},u=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),w=h?g:v;w&&w(c)};return wM(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(bM(e,t))&&this.startObserver()}unmount(){}}function bM({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const EM={inView:{Feature:_M},tap:{Feature:mM},focus:{Feature:pM},hover:{Feature:fM}},TM={layout:{ProjectionNode:hC,MeasureLayout:sC}},c0={current:null},fC={current:!1};function SM(){if(fC.current=!0,!!sy)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>c0.current=n.matches;n.addListener(e),e()}else c0.current=!1}const kM=[...Mk,cn,Ai],CM=n=>kM.find(Lk(n)),PM=new WeakMap;function AM(n,e,t){for(const r in e){const s=e[r],o=t[r];if(fn(s))n.addValue(r,s);else if(fn(o))n.addValue(r,hc(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,hc(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const uE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class IM{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ny,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=Gr.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,ot.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:g}=l;this.onUpdate=g,this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=jf(t),this.isVariantNode=ZS(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...w}=this.scrapeMotionValuesFromProps(t,{},this);for(const E in w){const C=w[E];c[E]!==void 0&&fn(C)&&C.set(c[E],!1)}}mount(e){this.current=e,PM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),fC.current||SM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:c0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Pi(this.notifyUpdate),Pi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Fo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=t.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gl){const t=gl[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<uE.length;r++){const s=uE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=AM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=hc(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(Dk(s)||Tk(s))?s=parseFloat(s):!CM(s)&&Ai.test(t)&&(s=Rk(e,t)),this.setBaseTarget(e,fn(s)?s.get():s)),fn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const l=ky(this.props,r,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);l&&(s=l[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!fn(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new uy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class pC extends IM{constructor(){super(...arguments),this.KeyframeResolver=Vk}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function RM(n){return window.getComputedStyle(n)}class NM extends pC{constructor(){super(...arguments),this.type="html",this.renderInstance=ck}readValueFromInstance(e,t){if(Fo.has(t))return zO(e,t);{const r=RM(e),s=(vy(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return eC(e,t)}build(e,t,r){_y(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Cy(e,t,r)}}class jM extends pC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Tt,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&uk(this.current,this.renderState)}}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Fo.has(t)){const r=Ik(t);return r&&r.default||0}return t=dk.has(t)?t:yy(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return fk(e,t,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&ot.postRender(this.updateDimensions)}build(e,t,r){Ty(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,s){hk(e,t,r,s)}mount(e){this.isSVGTag=Sy(e.tagName),super.mount(e)}}const DM=(n,e)=>Ey(n)?new jM(e):new NM(e,{allowProjection:n!==P.Fragment}),OM=gO({...rL,...EM,...hM,...TM},DM),cE=ND(OM),LM=()=>{};var dE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},MM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],u=n[t++],c=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},gC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,u=l?n[s+1]:0,c=s+2<n.length,h=c?n[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let w=(u&15)<<2|h>>6,E=h&63;c||(E=64,l||(w=64)),r.push(t[g],t[v],t[w],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(mC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):MM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const h=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||u==null||h==null||v==null)throw new VM;const w=o<<2|u>>4;if(r.push(w),h!==64){const E=u<<4&240|h>>2;if(r.push(E),v!==64){const C=h<<6&192|v;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $M=function(n){const e=mC(n);return gC.encodeByteArray(e,!0)},sf=function(n){return $M(n).replace(/\./g,"")},yC=function(n){try{return gC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=()=>FM().__FIREBASE_DEFAULTS__,BM=()=>{if(typeof process>"u"||typeof dE>"u")return;const n=dE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&yC(n[1]);return e&&JSON.parse(e)},Of=()=>{try{return LM()||UM()||BM()||zM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},vC=n=>{var e,t;return(t=(e=Of())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},wC=n=>{const e=vC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xC=()=>{var n;return(n=Of())===null||n===void 0?void 0:n.config},_C=n=>{var e;return(e=Of())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[sf(JSON.stringify(t)),sf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function qM(){var n;const e=(n=Of())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function QM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JM(){const n=pn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YM(){return!qM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XM(){try{return typeof indexedDB=="object"}catch{return!1}}function ZM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eV="FirebaseError";class rs extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=eV,Object.setPrototypeOf(this,rs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mc.prototype.create)}}class Mc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?tV(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new rs(s,u,r)}}function tV(n,e){return n.replace(nV,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nV=/\{\$([^}]+)}/g;function rV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function No(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(hE(o)&&hE(l)){if(!No(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function hE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function qu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function sV(n,e){const t=new iV(n,e);return t.subscribe.bind(t)}class iV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");oV(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=pg),s.error===void 0&&(s.error=pg),s.complete===void 0&&(s.complete=pg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(n){return n&&n._delegate?n._delegate:n}class Ii{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new WM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uV(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lV(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lV(n){return n===Eo?void 0:n}function uV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const dV={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},hV=Ue.INFO,fV={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},pV=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=fV[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ly{constructor(e){this.name=e,this._logLevel=hV,this._logHandler=pV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const mV=(n,e)=>e.some(t=>n instanceof t);let fE,pE;function gV(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yV(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EC=new WeakMap,d0=new WeakMap,TC=new WeakMap,mg=new WeakMap,My=new WeakMap;function vV(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(bi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&EC.set(t,n)}).catch(()=>{}),My.set(e,n),e}function wV(n){if(d0.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});d0.set(n,e)}let h0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return d0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xV(n){h0=n(h0)}function _V(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(gg(this),e,...t);return TC.set(r,e.sort?e.sort():[e]),bi(r)}:yV().includes(n)?function(...e){return n.apply(gg(this),e),bi(EC.get(this))}:function(...e){return bi(n.apply(gg(this),e))}}function bV(n){return typeof n=="function"?_V(n):(n instanceof IDBTransaction&&wV(n),mV(n,gV())?new Proxy(n,h0):n)}function bi(n){if(n instanceof IDBRequest)return vV(n);if(mg.has(n))return mg.get(n);const e=bV(n);return e!==n&&(mg.set(n,e),My.set(e,n)),e}const gg=n=>My.get(n);function EV(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),u=bi(l);return r&&l.addEventListener("upgradeneeded",c=>{r(bi(l.result),c.oldVersion,c.newVersion,bi(l.transaction),c)}),t&&l.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const TV=["get","getKey","getAll","getAllKeys","count"],SV=["put","add","delete","clear"],yg=new Map;function mE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yg.get(e))return yg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=SV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TV.includes(t)))return;const o=async function(l,...u){const c=this.transaction(l,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[t](...u),s&&c.done]))[0]};return yg.set(e,o),o}xV(n=>({...n,get:(e,t,r)=>mE(e,t)||n.get(e,t,r),has:(e,t)=>!!mE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CV(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function CV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const f0="@firebase/app",gE="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Ly("@firebase/app"),PV="@firebase/app-compat",AV="@firebase/analytics-compat",IV="@firebase/analytics",RV="@firebase/app-check-compat",NV="@firebase/app-check",jV="@firebase/auth",DV="@firebase/auth-compat",OV="@firebase/database",LV="@firebase/data-connect",MV="@firebase/database-compat",VV="@firebase/functions",$V="@firebase/functions-compat",FV="@firebase/installations",UV="@firebase/installations-compat",BV="@firebase/messaging",zV="@firebase/messaging-compat",WV="@firebase/performance",HV="@firebase/performance-compat",qV="@firebase/remote-config",KV="@firebase/remote-config-compat",GV="@firebase/storage",QV="@firebase/storage-compat",JV="@firebase/firestore",YV="@firebase/vertexai",XV="@firebase/firestore-compat",ZV="firebase",e$="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="[DEFAULT]",t$={[f0]:"fire-core",[PV]:"fire-core-compat",[IV]:"fire-analytics",[AV]:"fire-analytics-compat",[NV]:"fire-app-check",[RV]:"fire-app-check-compat",[jV]:"fire-auth",[DV]:"fire-auth-compat",[OV]:"fire-rtdb",[LV]:"fire-data-connect",[MV]:"fire-rtdb-compat",[VV]:"fire-fn",[$V]:"fire-fn-compat",[FV]:"fire-iid",[UV]:"fire-iid-compat",[BV]:"fire-fcm",[zV]:"fire-fcm-compat",[WV]:"fire-perf",[HV]:"fire-perf-compat",[qV]:"fire-rc",[KV]:"fire-rc-compat",[GV]:"fire-gcs",[QV]:"fire-gcs-compat",[JV]:"fire-fst",[XV]:"fire-fst-compat",[YV]:"fire-vertex","fire-js":"fire-js",[ZV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new Map,n$=new Map,m0=new Map;function yE(n,e){try{n.container.addComponent(e)}catch(t){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jo(n){const e=n.name;if(m0.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;m0.set(e,n);for(const t of of.values())yE(t,n);for(const t of n$.values())yE(t,n);return!0}function Lf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Mc("app","Firebase",r$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=e$;function Vy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:p0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ei.create("bad-app-name",{appName:String(s)});if(t||(t=xC()),!t)throw Ei.create("no-options");const o=of.get(s);if(o){if(No(t,o.options)&&No(r,o.config))return o;throw Ei.create("duplicate-app",{appName:s})}const l=new cV(s);for(const c of m0.values())l.addComponent(c);const u=new s$(t,r,l);return of.set(s,u),u}function $y(n=p0){const e=of.get(n);if(!e&&n===p0&&xC())return Vy();if(!e)throw Ei.create("no-app",{appName:n});return e}function Jr(n,e,t){var r;let s=(r=t$[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(u.join(" "));return}jo(new Ii(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$="firebase-heartbeat-database",o$=1,wc="firebase-heartbeat-store";let vg=null;function SC(){return vg||(vg=EV(i$,o$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ei.create("idb-open",{originalErrorMessage:n.message})})),vg}async function a$(n){try{const t=(await SC()).transaction(wc),r=await t.objectStore(wc).get(kC(n));return await t.done,r}catch(e){if(e instanceof rs)Ds.warn(e.message);else{const t=Ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(t.message)}}}async function vE(n,e){try{const r=(await SC()).transaction(wc,"readwrite");await r.objectStore(wc).put(e,kC(n)),await r.done}catch(t){if(t instanceof rs)Ds.warn(t.message);else{const r=Ei.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ds.warn(r.message)}}}function kC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=1024,u$=30;class c${constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new h$(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=wE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>u$){const l=f$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wE(),{heartbeatsToSend:r,unsentEntries:s}=d$(this._heartbeatsCache.heartbeats),o=sf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ds.warn(t),""}}}function wE(){return new Date().toISOString().substring(0,10)}function d$(n,e=l$){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),xE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),xE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class h${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XM()?ZM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await a$(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return vE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return vE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xE(n){return sf(JSON.stringify({version:2,heartbeats:n})).length}function f$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p$(n){jo(new Ii("platform-logger",e=>new kV(e),"PRIVATE")),jo(new Ii("heartbeat",e=>new c$(e),"PRIVATE")),Jr(f0,gE,n),Jr(f0,gE,"esm2017"),Jr("fire-js","")}p$("");var m$="firebase",g$="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(m$,g$,"app");var _E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,CC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,b){function S(){}S.prototype=b.prototype,I.D=b.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(R,M,B){for(var O=Array(arguments.length-2),re=2;re<arguments.length;re++)O[re-2]=arguments[re];return b.prototype[M].apply(R,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,b,S){S||(S=0);var R=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)R[M]=b.charCodeAt(S++)|b.charCodeAt(S++)<<8|b.charCodeAt(S++)<<16|b.charCodeAt(S++)<<24;else for(M=0;16>M;++M)R[M]=b[S++]|b[S++]<<8|b[S++]<<16|b[S++]<<24;b=I.g[0],S=I.g[1],M=I.g[2];var B=I.g[3],O=b+(B^S&(M^B))+R[0]+3614090360&4294967295;b=S+(O<<7&4294967295|O>>>25),O=B+(M^b&(S^M))+R[1]+3905402710&4294967295,B=b+(O<<12&4294967295|O>>>20),O=M+(S^B&(b^S))+R[2]+606105819&4294967295,M=B+(O<<17&4294967295|O>>>15),O=S+(b^M&(B^b))+R[3]+3250441966&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(B^S&(M^B))+R[4]+4118548399&4294967295,b=S+(O<<7&4294967295|O>>>25),O=B+(M^b&(S^M))+R[5]+1200080426&4294967295,B=b+(O<<12&4294967295|O>>>20),O=M+(S^B&(b^S))+R[6]+2821735955&4294967295,M=B+(O<<17&4294967295|O>>>15),O=S+(b^M&(B^b))+R[7]+4249261313&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(B^S&(M^B))+R[8]+1770035416&4294967295,b=S+(O<<7&4294967295|O>>>25),O=B+(M^b&(S^M))+R[9]+2336552879&4294967295,B=b+(O<<12&4294967295|O>>>20),O=M+(S^B&(b^S))+R[10]+4294925233&4294967295,M=B+(O<<17&4294967295|O>>>15),O=S+(b^M&(B^b))+R[11]+2304563134&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(B^S&(M^B))+R[12]+1804603682&4294967295,b=S+(O<<7&4294967295|O>>>25),O=B+(M^b&(S^M))+R[13]+4254626195&4294967295,B=b+(O<<12&4294967295|O>>>20),O=M+(S^B&(b^S))+R[14]+2792965006&4294967295,M=B+(O<<17&4294967295|O>>>15),O=S+(b^M&(B^b))+R[15]+1236535329&4294967295,S=M+(O<<22&4294967295|O>>>10),O=b+(M^B&(S^M))+R[1]+4129170786&4294967295,b=S+(O<<5&4294967295|O>>>27),O=B+(S^M&(b^S))+R[6]+3225465664&4294967295,B=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(B^b))+R[11]+643717713&4294967295,M=B+(O<<14&4294967295|O>>>18),O=S+(B^b&(M^B))+R[0]+3921069994&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(M^B&(S^M))+R[5]+3593408605&4294967295,b=S+(O<<5&4294967295|O>>>27),O=B+(S^M&(b^S))+R[10]+38016083&4294967295,B=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(B^b))+R[15]+3634488961&4294967295,M=B+(O<<14&4294967295|O>>>18),O=S+(B^b&(M^B))+R[4]+3889429448&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(M^B&(S^M))+R[9]+568446438&4294967295,b=S+(O<<5&4294967295|O>>>27),O=B+(S^M&(b^S))+R[14]+3275163606&4294967295,B=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(B^b))+R[3]+4107603335&4294967295,M=B+(O<<14&4294967295|O>>>18),O=S+(B^b&(M^B))+R[8]+1163531501&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(M^B&(S^M))+R[13]+2850285829&4294967295,b=S+(O<<5&4294967295|O>>>27),O=B+(S^M&(b^S))+R[2]+4243563512&4294967295,B=b+(O<<9&4294967295|O>>>23),O=M+(b^S&(B^b))+R[7]+1735328473&4294967295,M=B+(O<<14&4294967295|O>>>18),O=S+(B^b&(M^B))+R[12]+2368359562&4294967295,S=M+(O<<20&4294967295|O>>>12),O=b+(S^M^B)+R[5]+4294588738&4294967295,b=S+(O<<4&4294967295|O>>>28),O=B+(b^S^M)+R[8]+2272392833&4294967295,B=b+(O<<11&4294967295|O>>>21),O=M+(B^b^S)+R[11]+1839030562&4294967295,M=B+(O<<16&4294967295|O>>>16),O=S+(M^B^b)+R[14]+4259657740&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(S^M^B)+R[1]+2763975236&4294967295,b=S+(O<<4&4294967295|O>>>28),O=B+(b^S^M)+R[4]+1272893353&4294967295,B=b+(O<<11&4294967295|O>>>21),O=M+(B^b^S)+R[7]+4139469664&4294967295,M=B+(O<<16&4294967295|O>>>16),O=S+(M^B^b)+R[10]+3200236656&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(S^M^B)+R[13]+681279174&4294967295,b=S+(O<<4&4294967295|O>>>28),O=B+(b^S^M)+R[0]+3936430074&4294967295,B=b+(O<<11&4294967295|O>>>21),O=M+(B^b^S)+R[3]+3572445317&4294967295,M=B+(O<<16&4294967295|O>>>16),O=S+(M^B^b)+R[6]+76029189&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(S^M^B)+R[9]+3654602809&4294967295,b=S+(O<<4&4294967295|O>>>28),O=B+(b^S^M)+R[12]+3873151461&4294967295,B=b+(O<<11&4294967295|O>>>21),O=M+(B^b^S)+R[15]+530742520&4294967295,M=B+(O<<16&4294967295|O>>>16),O=S+(M^B^b)+R[2]+3299628645&4294967295,S=M+(O<<23&4294967295|O>>>9),O=b+(M^(S|~B))+R[0]+4096336452&4294967295,b=S+(O<<6&4294967295|O>>>26),O=B+(S^(b|~M))+R[7]+1126891415&4294967295,B=b+(O<<10&4294967295|O>>>22),O=M+(b^(B|~S))+R[14]+2878612391&4294967295,M=B+(O<<15&4294967295|O>>>17),O=S+(B^(M|~b))+R[5]+4237533241&4294967295,S=M+(O<<21&4294967295|O>>>11),O=b+(M^(S|~B))+R[12]+1700485571&4294967295,b=S+(O<<6&4294967295|O>>>26),O=B+(S^(b|~M))+R[3]+2399980690&4294967295,B=b+(O<<10&4294967295|O>>>22),O=M+(b^(B|~S))+R[10]+4293915773&4294967295,M=B+(O<<15&4294967295|O>>>17),O=S+(B^(M|~b))+R[1]+2240044497&4294967295,S=M+(O<<21&4294967295|O>>>11),O=b+(M^(S|~B))+R[8]+1873313359&4294967295,b=S+(O<<6&4294967295|O>>>26),O=B+(S^(b|~M))+R[15]+4264355552&4294967295,B=b+(O<<10&4294967295|O>>>22),O=M+(b^(B|~S))+R[6]+2734768916&4294967295,M=B+(O<<15&4294967295|O>>>17),O=S+(B^(M|~b))+R[13]+1309151649&4294967295,S=M+(O<<21&4294967295|O>>>11),O=b+(M^(S|~B))+R[4]+4149444226&4294967295,b=S+(O<<6&4294967295|O>>>26),O=B+(S^(b|~M))+R[11]+3174756917&4294967295,B=b+(O<<10&4294967295|O>>>22),O=M+(b^(B|~S))+R[2]+718787259&4294967295,M=B+(O<<15&4294967295|O>>>17),O=S+(B^(M|~b))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+b&4294967295,I.g[1]=I.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.u=function(I,b){b===void 0&&(b=I.length);for(var S=b-this.blockSize,R=this.B,M=this.h,B=0;B<b;){if(M==0)for(;B<=S;)s(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<b;)if(R[M++]=I.charCodeAt(B++),M==this.blockSize){s(this,R),M=0;break}}else for(;B<b;)if(R[M++]=I[B++],M==this.blockSize){s(this,R),M=0;break}}this.h=M,this.o+=b},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var b=1;b<I.length-8;++b)I[b]=0;var S=8*this.o;for(b=I.length-8;b<I.length;++b)I[b]=S&255,S/=256;for(this.u(I),I=Array(16),b=S=0;4>b;++b)for(var R=0;32>R;R+=8)I[S++]=this.g[b]>>>R&255;return I};function o(I,b){var S=u;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=b(I)}function l(I,b){this.h=b;for(var S=[],R=!0,M=I.length-1;0<=M;M--){var B=I[M]|0;R&&B==b||(S[M]=B,R=!1)}this.g=S}var u={};function c(I){return-128<=I&&128>I?o(I,function(b){return new l([b|0],0>b?-1:0)}):new l([I|0],0>I?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return A(h(-I));for(var b=[],S=1,R=0;I>=S;R++)b[R]=I/S|0,S*=4294967296;return new l(b,0)}function g(I,b){if(I.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I.charAt(0)=="-")return A(g(I.substring(1),b));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(b,8)),R=v,M=0;M<I.length;M+=8){var B=Math.min(8,I.length-M),O=parseInt(I.substring(M,M+B),b);8>B?(B=h(Math.pow(b,B)),R=R.j(B).add(h(O))):(R=R.j(S),R=R.add(h(O)))}return R}var v=c(0),w=c(1),E=c(16777216);n=l.prototype,n.m=function(){if(j(this))return-A(this).m();for(var I=0,b=1,S=0;S<this.g.length;S++){var R=this.i(S);I+=(0<=R?R:4294967296+R)*b,b*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(j(this))return"-"+A(this).toString(I);for(var b=h(Math.pow(I,6)),S=this,R="";;){var M=W(S,b).g;S=D(S,M.j(b));var B=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=M,C(S))return B+R;for(;6>B.length;)B="0"+B;R=B+R}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var b=0;b<I.g.length;b++)if(I.g[b]!=0)return!1;return!0}function j(I){return I.h==-1}n.l=function(I){return I=D(this,I),j(I)?-1:C(I)?0:1};function A(I){for(var b=I.g.length,S=[],R=0;R<b;R++)S[R]=~I.g[R];return new l(S,~I.h).add(w)}n.abs=function(){return j(this)?A(this):this},n.add=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0,M=0;M<=b;M++){var B=R+(this.i(M)&65535)+(I.i(M)&65535),O=(B>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);R=O>>>16,B&=65535,O&=65535,S[M]=O<<16|B}return new l(S,S[S.length-1]&-2147483648?-1:0)};function D(I,b){return I.add(A(b))}n.j=function(I){if(C(this)||C(I))return v;if(j(this))return j(I)?A(this).j(A(I)):A(A(this).j(I));if(j(I))return A(this.j(A(I)));if(0>this.l(E)&&0>I.l(E))return h(this.m()*I.m());for(var b=this.g.length+I.g.length,S=[],R=0;R<2*b;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var M=0;M<I.g.length;M++){var B=this.i(R)>>>16,O=this.i(R)&65535,re=I.i(M)>>>16,he=I.i(M)&65535;S[2*R+2*M]+=O*he,V(S,2*R+2*M),S[2*R+2*M+1]+=B*he,V(S,2*R+2*M+1),S[2*R+2*M+1]+=O*re,V(S,2*R+2*M+1),S[2*R+2*M+2]+=B*re,V(S,2*R+2*M+2)}for(R=0;R<b;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=b;R<2*b;R++)S[R]=0;return new l(S,0)};function V(I,b){for(;(I[b]&65535)!=I[b];)I[b+1]+=I[b]>>>16,I[b]&=65535,b++}function $(I,b){this.g=I,this.h=b}function W(I,b){if(C(b))throw Error("division by zero");if(C(I))return new $(v,v);if(j(I))return b=W(A(I),b),new $(A(b.g),A(b.h));if(j(b))return b=W(I,A(b)),new $(A(b.g),b.h);if(30<I.g.length){if(j(I)||j(b))throw Error("slowDivide_ only works with positive integers.");for(var S=w,R=b;0>=R.l(I);)S=H(S),R=H(R);var M=F(S,1),B=F(R,1);for(R=F(R,2),S=F(S,2);!C(R);){var O=B.add(R);0>=O.l(I)&&(M=M.add(S),B=O),R=F(R,1),S=F(S,1)}return b=D(I,M.j(b)),new $(M,b)}for(M=v;0<=I.l(b);){for(S=Math.max(1,Math.floor(I.m()/b.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),B=h(S),O=B.j(b);j(O)||0<O.l(I);)S-=R,B=h(S),O=B.j(b);C(B)&&(B=w),M=M.add(B),I=D(I,O)}return new $(M,I)}n.A=function(I){return W(this,I).h},n.and=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0;R<b;R++)S[R]=this.i(R)&I.i(R);return new l(S,this.h&I.h)},n.or=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0;R<b;R++)S[R]=this.i(R)|I.i(R);return new l(S,this.h|I.h)},n.xor=function(I){for(var b=Math.max(this.g.length,I.g.length),S=[],R=0;R<b;R++)S[R]=this.i(R)^I.i(R);return new l(S,this.h^I.h)};function H(I){for(var b=I.g.length+1,S=[],R=0;R<b;R++)S[R]=I.i(R)<<1|I.i(R-1)>>>31;return new l(S,I.h)}function F(I,b){var S=b>>5;b%=32;for(var R=I.g.length-S,M=[],B=0;B<R;B++)M[B]=0<b?I.i(B+S)>>>b|I.i(B+S+1)<<32-b:I.i(B+S);return new l(M,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,Ti=l}).apply(typeof _E<"u"?_E:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PC,Ku,AC,Oh,g0,IC,RC,NC;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,T){return f==Array.prototype||f==Object.prototype||(f[x]=T.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var x=0;x<f.length;++x){var T=f[x];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(f,x){if(x)e:{var T=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var G=f[N];if(!(G in T))break e;T=T[G]}f=f[f.length-1],N=T[f],x=x(N),x!=N&&x!=null&&e(T,f,{configurable:!0,writable:!0,value:x})}}function o(f,x){f instanceof String&&(f+="");var T=0,N=!1,G={next:function(){if(!N&&T<f.length){var Z=T++;return{value:x(Z,f[Z]),done:!1}}return N=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(f){return f||function(){return o(this,function(x,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function h(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function g(f,x,T){return f.call.apply(f.bind,arguments)}function v(f,x,T){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,N),f.apply(x,G)}}return function(){return f.apply(x,arguments)}}function w(f,x,T){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,w.apply(null,arguments)}function E(f,x){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function C(f,x){function T(){}T.prototype=x.prototype,f.aa=x.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(N,G,Z){for(var de=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)de[Ye-2]=arguments[Ye];return x.prototype[G].apply(N,de)}}function j(f){const x=f.length;if(0<x){const T=Array(x);for(let N=0;N<x;N++)T[N]=f[N];return T}return[]}function A(f,x){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(c(N)){const G=f.length||0,Z=N.length||0;f.length=G+Z;for(let de=0;de<Z;de++)f[G+de]=N[de]}else f.push(N)}}class D{constructor(x,T){this.i=x,this.j=T,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function V(f){return/^[\s\xa0]*$/.test(f)}function $(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function W(f){return W[" "](f),f}W[" "]=function(){};var H=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function F(f,x,T){for(const N in f)x.call(T,f[N],N,f)}function I(f,x){for(const T in f)x.call(void 0,f[T],T,f)}function b(f){const x={};for(const T in f)x[T]=f[T];return x}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(f,x){let T,N;for(let G=1;G<arguments.length;G++){N=arguments[G];for(T in N)f[T]=N[T];for(let Z=0;Z<S.length;Z++)T=S[Z],Object.prototype.hasOwnProperty.call(N,T)&&(f[T]=N[T])}}function M(f){var x=1;f=f.split(":");const T=[];for(;0<x&&f.length;)T.push(f.shift()),x--;return f.length&&T.push(f.join(":")),T}function B(f){u.setTimeout(()=>{throw f},0)}function O(){var f=me;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class re{constructor(){this.h=this.g=null}add(x,T){const N=he.get();N.set(x,T),this.h?this.h.next=N:this.g=N,this.h=N}}var he=new D(()=>new Se,f=>f.reset());class Se{constructor(){this.next=this.g=this.h=null}set(x,T){this.h=x,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let we,le=!1,me=new re,fe=()=>{const f=u.Promise.resolve(void 0);we=()=>{f.then(K)}};var K=()=>{for(var f;f=O();){try{f.h.call(f.g)}catch(T){B(T)}var x=he;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}le=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,x),u.removeEventListener("test",T,x)}catch{}return f}();function ie(f,x){if(Ee.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(H){e:{try{W(x.nodeName);var G=!0;break e}catch{}G=!1}G||(x=null)}}else T=="mouseover"?x=f.fromElement:T=="mouseout"&&(x=f.toElement);this.relatedTarget=x,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:q[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ie.aa.h.call(this)}}C(ie,Ee);var q={2:"touch",3:"pen",4:"mouse"};ie.prototype.h=function(){ie.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),te=0;function pe(f,x,T,N,G){this.listener=f,this.proxy=null,this.src=x,this.type=T,this.capture=!!N,this.ha=G,this.key=++te,this.da=this.fa=!1}function ge(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function We(f){this.src=f,this.g={},this.h=0}We.prototype.add=function(f,x,T,N,G){var Z=f.toString();f=this.g[Z],f||(f=this.g[Z]=[],this.h++);var de=It(f,x,N,G);return-1<de?(x=f[de],T||(x.fa=!1)):(x=new pe(x,this.src,Z,!!N,G),x.fa=T,f.push(x)),x};function He(f,x){var T=x.type;if(T in f.g){var N=f.g[T],G=Array.prototype.indexOf.call(N,x,void 0),Z;(Z=0<=G)&&Array.prototype.splice.call(N,G,1),Z&&(ge(x),f.g[T].length==0&&(delete f.g[T],f.h--))}}function It(f,x,T,N){for(var G=0;G<f.length;++G){var Z=f[G];if(!Z.da&&Z.listener==x&&Z.capture==!!T&&Z.ha==N)return G}return-1}var Dn="closure_lm_"+(1e6*Math.random()|0),ss={};function $t(f,x,T,N,G){if(Array.isArray(x)){for(var Z=0;Z<x.length;Z++)$t(f,x[Z],T,N,G);return null}return T=Ul(T),f&&f[Q]?f.K(x,T,h(N)?!!N.capture:!1,G):is(f,x,T,!1,N,G)}function is(f,x,T,N,G,Z){if(!x)throw Error("Invalid event type");var de=h(G)?!!G.capture:!!G,Ye=Ko(f);if(Ye||(f[Dn]=Ye=new We(f)),T=Ye.add(x,T,N,de,Z),T.proxy)return T;if(N=Kc(),T.proxy=N,N.src=f,N.listener=T,f.addEventListener)Le||(G=de),G===void 0&&(G=!1),f.addEventListener(x.toString(),N,G);else if(f.attachEvent)f.attachEvent(as(x.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Kc(){function f(T){return x.call(f.src,f.listener,T)}const x=Fl;return f}function qo(f,x,T,N,G){if(Array.isArray(x))for(var Z=0;Z<x.length;Z++)qo(f,x[Z],T,N,G);else N=h(N)?!!N.capture:!!N,T=Ul(T),f&&f[Q]?(f=f.i,x=String(x).toString(),x in f.g&&(Z=f.g[x],T=It(Z,T,N,G),-1<T&&(ge(Z[T]),Array.prototype.splice.call(Z,T,1),Z.length==0&&(delete f.g[x],f.h--)))):f&&(f=Ko(f))&&(x=f.g[x.toString()],f=-1,x&&(f=It(x,T,N,G)),(T=-1<f?x[f]:null)&&os(T))}function os(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[Q])He(x.i,f);else{var T=f.type,N=f.proxy;x.removeEventListener?x.removeEventListener(T,N,f.capture):x.detachEvent?x.detachEvent(as(T),N):x.addListener&&x.removeListener&&x.removeListener(N),(T=Ko(x))?(He(T,f),T.h==0&&(T.src=null,x[Dn]=null)):ge(f)}}}function as(f){return f in ss?ss[f]:ss[f]="on"+f}function Fl(f,x){if(f.da)f=!0;else{x=new ie(x,this);var T=f.listener,N=f.ha||f.src;f.fa&&os(f),f=T.call(N,x)}return f}function Ko(f){return f=f[Dn],f instanceof We?f:null}var Go="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ul(f){return typeof f=="function"?f:(f[Go]||(f[Go]=function(x){return f.handleEvent(x)}),f[Go])}function Rt(){ee.call(this),this.i=new We(this),this.M=this,this.F=null}C(Rt,ee),Rt.prototype[Q]=!0,Rt.prototype.removeEventListener=function(f,x,T,N){qo(this,f,x,T,N)};function Nt(f,x){var T,N=f.F;if(N)for(T=[];N;N=N.F)T.push(N);if(f=f.M,N=x.type||x,typeof x=="string")x=new Ee(x,f);else if(x instanceof Ee)x.target=x.target||f;else{var G=x;x=new Ee(N,f),R(x,G)}if(G=!0,T)for(var Z=T.length-1;0<=Z;Z--){var de=x.g=T[Z];G=ls(de,N,!0,x)&&G}if(de=x.g=f,G=ls(de,N,!0,x)&&G,G=ls(de,N,!1,x)&&G,T)for(Z=0;Z<T.length;Z++)de=x.g=T[Z],G=ls(de,N,!1,x)&&G}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var T=f.g[x],N=0;N<T.length;N++)ge(T[N]);delete f.g[x],f.h--}}this.F=null},Rt.prototype.K=function(f,x,T,N){return this.i.add(String(f),x,!1,T,N)},Rt.prototype.L=function(f,x,T,N){return this.i.add(String(f),x,!0,T,N)};function ls(f,x,T,N){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var G=!0,Z=0;Z<x.length;++Z){var de=x[Z];if(de&&!de.da&&de.capture==T){var Ye=de.listener,jt=de.ha||de.src;de.fa&&He(f.i,de),G=Ye.call(jt,N)!==!1&&G}}return G&&!N.defaultPrevented}function Bl(f,x,T){if(typeof f=="function")T&&(f=w(f,T));else if(f&&typeof f.handleEvent=="function")f=w(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:u.setTimeout(f,x||0)}function Fs(f){f.g=Bl(()=>{f.g=null,f.i&&(f.i=!1,Fs(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class zi extends ee{constructor(x,T){super(),this.m=x,this.l=T,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Fs(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(f){ee.call(this),this.h=f,this.g={}}C(Wi,ee);var zl=[];function Wl(f){F(f.g,function(x,T){this.g.hasOwnProperty(T)&&os(x)},f),f.g={}}Wi.prototype.N=function(){Wi.aa.N.call(this),Wl(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hl=u.JSON.stringify,ql=u.JSON.parse,Kl=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Hi(){}Hi.prototype.h=null;function Qo(f){return f.h||(f.h=f.i())}function Jo(){}var Kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dr(){Ee.call(this,"d")}C(Dr,Ee);function Yo(){Ee.call(this,"c")}C(Yo,Ee);var Or={},Gl=null;function qi(){return Gl=Gl||new Rt}Or.La="serverreachability";function Ql(f){Ee.call(this,Or.La,f)}C(Ql,Ee);function us(f){const x=qi();Nt(x,new Ql(x))}Or.STAT_EVENT="statevent";function Jl(f,x){Ee.call(this,Or.STAT_EVENT,f),this.stat=x}C(Jl,Ee);function bt(f){const x=qi();Nt(x,new Jl(x,f))}Or.Ma="timingevent";function Xo(f,x){Ee.call(this,Or.Ma,f),this.size=x}C(Xo,Ee);function dr(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},x)}function Ki(){this.g=!0}Ki.prototype.xa=function(){this.g=!1};function Gi(f,x,T,N,G,Z){f.info(function(){if(f.g)if(Z)for(var de="",Ye=Z.split("&"),jt=0;jt<Ye.length;jt++){var qe=Ye[jt].split("=");if(1<qe.length){var Ft=qe[0];qe=qe[1];var Ct=Ft.split("_");de=2<=Ct.length&&Ct[1]=="type"?de+(Ft+"="+qe+"&"):de+(Ft+"=redacted&")}}else de=null;else de=Z;return"XMLHTTP REQ ("+N+") [attempt "+G+"]: "+x+`
`+T+`
`+de})}function Zo(f,x,T,N,G,Z,de){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+G+"]: "+x+`
`+T+`
`+Z+" "+de})}function hr(f,x,T,N){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+cp(f,T)+(N?" "+N:"")})}function Yl(f,x){f.info(function(){return"TIMEOUT: "+x})}Ki.prototype.info=function(){};function cp(f,x){if(!f.g)return x;if(!x)return null;try{var T=JSON.parse(x);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var N=T[f];if(!(2>N.length)){var G=N[1];if(Array.isArray(G)&&!(1>G.length)){var Z=G[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var de=1;de<G.length;de++)G[de]=""}}}}return Hl(T)}catch{return x}}var ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function Qi(){}C(Qi,Hi),Qi.prototype.g=function(){return new XMLHttpRequest},Qi.prototype.i=function(){return{}},fr=new Qi;function pr(f,x,T,N){this.j=f,this.i=x,this.l=T,this.R=N||1,this.U=new Wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qc}function Qc(){this.i=null,this.g="",this.h=!1}var Xl={},ta={};function na(f,x,T){f.L=1,f.v=Hs(Ln(x)),f.m=T,f.P=!0,Zl(f,null)}function Zl(f,x){f.F=Date.now(),nt(f),f.A=Ln(f.v);var T=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Ks(T.i,"t",N),f.C=0,T=f.j.J,f.h=new Qc,f.g=fd(f.j,T?x:null,!f.m),0<f.O&&(f.M=new zi(w(f.Y,f,f.g),f.O)),x=f.U,T=f.g,N=f.ca;var G="readystatechange";Array.isArray(G)||(G&&(zl[0]=G.toString()),G=zl);for(var Z=0;Z<G.length;Z++){var de=$t(T,G[Z],N||x.handleEvent,!1,x.h||x);if(!de)break;x.g[de.key]=de}x=f.H?b(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),us(),Gi(f.i,f.u,f.A,f.l,f.R,f.m)}pr.prototype.ca=function(f){f=f.target;const x=this.M;x&&bn(f)==3?x.j():this.Y(f)},pr.prototype.Y=function(f){try{if(f==this.g)e:{const Ct=bn(this.g);var x=this.g.Ba();const Jn=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||iu(this.g)))){this.J||Ct!=4||x==7||(x==8||0>=Jn?us(3):us(2)),Ji(this);var T=this.g.Z();this.X=T;t:if(Jc(this)){var N=iu(this.g);f="";var G=N.length,Z=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),Us(this);var de="";break t}this.h.i=new u.TextDecoder}for(x=0;x<G;x++)this.h.h=!0,f+=this.h.i.decode(N[x],{stream:!(Z&&x==G-1)});N.length=0,this.h.g+=f,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=T==200,Zo(this.i,this.u,this.A,this.l,this.R,Ct,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,jt=this.g;if((Ye=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Ye)){var qe=Ye;break t}}qe=null}if(T=qe)hr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eu(this,T);else{this.o=!1,this.s=3,bt(12),Gn(this),Us(this);break e}}if(this.P){T=!0;let Vn;for(;!this.J&&this.C<de.length;)if(Vn=dp(this,de),Vn==ta){Ct==4&&(this.s=4,bt(14),T=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Xl){this.s=4,bt(15),hr(this.i,this.l,de,"[Invalid Chunk]"),T=!1;break}else hr(this.i,this.l,Vn,null),eu(this,Vn);if(Jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||de.length!=0||this.h.h||(this.s=1,bt(16),T=!1),this.o=this.o&&T,!T)hr(this.i,this.l,de,"[Invalid Chunked Response]"),Gn(this),Us(this);else if(0<de.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),au(Ft),Ft.M=!0,bt(11))}}else hr(this.i,this.l,de,null),eu(this,de);Ct==4&&Gn(this),this.o&&!this.J&&(Ct==4?fa(this.j,this):(this.o=!1,nt(this)))}else la(this.g),T==400&&0<de.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Gn(this),Us(this)}}}catch{}finally{}};function Jc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function dp(f,x){var T=f.C,N=x.indexOf(`
`,T);return N==-1?ta:(T=Number(x.substring(T,N)),isNaN(T)?Xl:(N+=1,N+T>x.length?ta:(x=x.slice(N,N+T),f.C=N+T,x)))}pr.prototype.cancel=function(){this.J=!0,Gn(this)};function nt(f){f.S=Date.now()+f.I,Yc(f,f.I)}function Yc(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=dr(w(f.ba,f),x)}function Ji(f){f.B&&(u.clearTimeout(f.B),f.B=null)}pr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Yl(this.i,this.A),this.L!=2&&(us(),bt(17)),Gn(this),this.s=2,Us(this)):Yc(this,this.S-f)};function Us(f){f.j.G==0||f.J||fa(f.j,f)}function Gn(f){Ji(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,Wl(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function eu(f,x){try{var T=f.j;if(T.G!=0&&(T.g==f||mn(T.h,f))){if(!f.K&&mn(T.h,f)&&T.G==3){try{var N=T.Da.g.parse(x)}catch{N=null}if(Array.isArray(N)&&N.length==3){var G=N;if(G[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)ha(T),wr(T);else break e;da(T),bt(18)}}else T.za=G[1],0<T.za-T.T&&37500>G[2]&&T.F&&T.v==0&&!T.C&&(T.C=dr(w(T.Za,T),6e3));if(1>=Zc(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ps(T,11)}else if((f.K||T.g==f)&&ha(T),!V(x))for(G=T.Da.g.parse(x),x=0;x<G.length;x++){let qe=G[x];if(T.T=qe[0],qe=qe[1],T.G==2)if(qe[0]=="c"){T.K=qe[1],T.ia=qe[2];const Ft=qe[3];Ft!=null&&(T.la=Ft,T.j.info("VER="+T.la));const Ct=qe[4];Ct!=null&&(T.Aa=Ct,T.j.info("SVER="+T.Aa));const Jn=qe[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(N=1.5*Jn,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const Vn=f.g;if(Vn){const ro=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ro){var Z=N.h;Z.g||ro.indexOf("spdy")==-1&&ro.indexOf("quic")==-1&&ro.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(tu(Z,Z.h),Z.h=null))}if(N.D){const ma=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;ma&&(N.ya=ma,et(N.I,N.D,ma))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var de=f;if(N.qa=hd(N,N.J?N.ia:null,N.W),de.K){ed(N.h,de);var Ye=de,jt=N.L;jt&&(Ye.I=jt),Ye.B&&(Ji(Ye),nt(Ye)),N.g=de}else no(N);0<T.i.length&&$r(T)}else qe[0]!="stop"&&qe[0]!="close"||ps(T,7);else T.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?ps(T,7):Gt(T):qe[0]!="noop"&&T.l&&T.l.ta(qe),T.v=0)}}us(4)}catch{}}var Xc=class{constructor(f,x){this.g=f,this.map=x}};function Yi(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function On(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Zc(f){return f.h?1:f.g?f.g.size:0}function mn(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function tu(f,x){f.g?f.g.add(x):f.h=x}function ed(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Yi.prototype.cancel=function(){if(this.i=td(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function td(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const T of f.g.values())x=x.concat(T.D);return x}return j(f.i)}function ra(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var x=[],T=f.length,N=0;N<T;N++)x.push(f[N]);return x}x=[],T=0;for(N in f)x[T++]=f[N];return x}function sa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var x=[];f=f.length;for(var T=0;T<f;T++)x.push(T);return x}x=[],T=0;for(const N in f)x[T++]=N;return x}}}function Bs(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var T=sa(f),N=ra(f),G=N.length,Z=0;Z<G;Z++)x.call(void 0,N[Z],T&&T[Z],f)}var Xi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hp(f,x){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var N=f[T].indexOf("="),G=null;if(0<=N){var Z=f[T].substring(0,N);G=f[T].substring(N+1)}else Z=f[T];x(Z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function cs(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof cs){this.h=f.h,Zi(this,f.j),this.o=f.o,this.g=f.g,zs(this,f.s),this.l=f.l;var x=f.i,T=new Lr;T.i=x.i,x.g&&(T.g=new Map(x.g),T.h=x.h),Ws(this,T),this.m=f.m}else f&&(x=String(f).match(Xi))?(this.h=!1,Zi(this,x[1]||"",!0),this.o=ze(x[2]||""),this.g=ze(x[3]||"",!0),zs(this,x[4]),this.l=ze(x[5]||"",!0),Ws(this,x[6]||"",!0),this.m=ze(x[7]||"")):(this.h=!1,this.i=new Lr(null,this.h))}cs.prototype.toString=function(){var f=[],x=this.j;x&&f.push(qs(x,ia,!0),":");var T=this.g;return(T||x=="file")&&(f.push("//"),(x=this.o)&&f.push(qs(x,ia,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(qs(T,T.charAt(0)=="/"?sd:rd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",qs(T,nu)),f.join("")};function Ln(f){return new cs(f)}function Zi(f,x,T){f.j=T?ze(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function zs(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function Ws(f,x,T){x instanceof Lr?(f.i=x,Mr(f.i,f.h)):(T||(x=qs(x,id)),f.i=new Lr(x,f.h))}function et(f,x,T){f.i.set(x,T)}function Hs(f){return et(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ze(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function qs(f,x,T){return typeof f=="string"?(f=encodeURI(f).replace(x,nd),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function nd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ia=/[#\/\?@]/g,rd=/[#\?:]/g,sd=/[#\?]/g,id=/[#\?@]/g,nu=/#/g;function Lr(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Kt(f){f.g||(f.g=new Map,f.h=0,f.i&&hp(f.i,function(x,T){f.add(decodeURIComponent(x.replace(/\+/g," ")),T)}))}n=Lr.prototype,n.add=function(f,x){Kt(this),this.i=null,f=Qn(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(x),this.h+=1,this};function mr(f,x){Kt(f),x=Qn(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function gr(f,x){return Kt(f),x=Qn(f,x),f.g.has(x)}n.forEach=function(f,x){Kt(this),this.g.forEach(function(T,N){T.forEach(function(G){f.call(x,G,N,this)},this)},this)},n.na=function(){Kt(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),T=[];for(let N=0;N<x.length;N++){const G=f[N];for(let Z=0;Z<G.length;Z++)T.push(x[N])}return T},n.V=function(f){Kt(this);let x=[];if(typeof f=="string")gr(this,f)&&(x=x.concat(this.g.get(Qn(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)x=x.concat(f[T])}return x},n.set=function(f,x){return Kt(this),this.i=null,f=Qn(this,f),gr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},n.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function Ks(f,x,T){mr(f,x),0<T.length&&(f.i=null,f.g.set(Qn(f,x),j(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var T=0;T<x.length;T++){var N=x[T];const Z=encodeURIComponent(String(N)),de=this.V(N);for(N=0;N<de.length;N++){var G=Z;de[N]!==""&&(G+="="+encodeURIComponent(String(de[N]))),f.push(G)}}return this.i=f.join("&")};function Qn(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function Mr(f,x){x&&!f.j&&(Kt(f),f.i=null,f.g.forEach(function(T,N){var G=N.toLowerCase();N!=G&&(mr(this,N),Ks(this,G,T))},f)),f.j=x}function fp(f,x){const T=new Ki;if(u.Image){const N=new Image;N.onload=E(_n,T,"TestLoadImage: loaded",!0,x,N),N.onerror=E(_n,T,"TestLoadImage: error",!1,x,N),N.onabort=E(_n,T,"TestLoadImage: abort",!1,x,N),N.ontimeout=E(_n,T,"TestLoadImage: timeout",!1,x,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else x(!1)}function od(f,x){const T=new Ki,N=new AbortController,G=setTimeout(()=>{N.abort(),_n(T,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:N.signal}).then(Z=>{clearTimeout(G),Z.ok?_n(T,"TestPingServer: ok",!0,x):_n(T,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(G),_n(T,"TestPingServer: error",!1,x)})}function _n(f,x,T,N,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),N(T)}catch{}}function pp(){this.g=new Kl}function ad(f,x,T){const N=T||"";try{Bs(f,function(G,Z){let de=G;h(G)&&(de=Hl(G)),x.push(N+Z+"="+encodeURIComponent(de))})}catch(G){throw x.push(N+"type="+encodeURIComponent("_badmap")),G}}function ds(f){this.l=f.Ub||null,this.j=f.eb||!1}C(ds,Hi),ds.prototype.g=function(){return new eo(this.l,this.j)},ds.prototype.i=function(f){return function(){return f}}({});function eo(f,x){Rt.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(eo,Rt),n=eo.prototype,n.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,vr(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||u).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,vr(this)),this.g&&(this.readyState=3,vr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ld(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ld(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?yr(this):vr(this),this.readyState==3&&ld(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,yr(this))},n.Qa=function(f){this.g&&(this.response=f,yr(this))},n.ga=function(){this.g&&yr(this)};function yr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,vr(f)}n.setRequestHeader=function(f,x){this.u.append(f,x)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var T=x.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=x.next();return f.join(`\r
`)};function vr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function hs(f){let x="";return F(f,function(T,N){x+=N,x+=":",x+=T,x+=`\r
`}),x}function Gs(f,x,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=hs(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):et(f,x,T))}function ut(f){Rt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(ut,Rt);var mp=/^https?$/i,ru=["POST","PUT"];n=ut.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,x,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Qo(this.o):Qo(fr),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(Z){to(this,Z);return}if(f=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var G in N)T.set(G,N[G]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())T.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),G=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ru,x,void 0))||N||G||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,de]of T)this.g.setRequestHeader(Z,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aa(this),this.u=!0,this.g.send(f),this.u=!1}catch(Z){to(this,Z)}};function to(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,oa(f),Mn(f)}function oa(f){f.A||(f.A=!0,Nt(f,"complete"),Nt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Nt(this,"complete"),Nt(this,"abort"),Mn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?su(this):this.bb())},n.bb=function(){su(this)};function su(f){if(f.h&&typeof l<"u"&&(!f.v[1]||bn(f)!=4||f.Z()!=2)){if(f.u&&bn(f)==4)Bl(f.Ea,0,f);else if(Nt(f,"readystatechange"),bn(f)==4){f.h=!1;try{const de=f.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var T;if(!(T=x)){var N;if(N=de===0){var G=String(f.D).match(Xi)[1]||null;!G&&u.self&&u.self.location&&(G=u.self.location.protocol.slice(0,-1)),N=!mp.test(G?G.toLowerCase():"")}T=N}if(T)Nt(f,"complete"),Nt(f,"success");else{f.m=6;try{var Z=2<bn(f)?f.g.statusText:""}catch{Z=""}f.l=Z+" ["+f.Z()+"]",oa(f)}}finally{Mn(f)}}}}function Mn(f,x){if(f.g){aa(f);const T=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||Nt(f,"ready");try{T.onreadystatechange=N}catch{}}}function aa(f){f.I&&(u.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function bn(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),ql(x)}};function iu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function la(f){const x={};f=(f.g&&2<=bn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(V(f[N]))continue;var T=M(f[N]);const G=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=x[G]||[];x[G]=Z,Z.push(T)}I(x,function(N){return N.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(f,x,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||x}function ou(f){this.Aa=0,this.i=[],this.j=new Ki,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,f),this.cb=Vr("retryDelaySeedMs",1e4,f),this.Wa=Vr("forwardChannelMaxRetries",2,f),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(f&&f.concurrentRequestLimit),this.Da=new pp,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ou.prototype,n.la=8,n.G=1,n.connect=function(f,x,T,N){bt(0),this.W=f,this.H=x||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=hd(this,null,this.W),$r(this)};function Gt(f){if(ua(f),f.G==3){var x=f.U++,T=Ln(f.I);if(et(T,"SID",f.K),et(T,"RID",x),et(T,"TYPE","terminate"),fs(f,T),x=new pr(f,f.j,x),x.L=2,x.v=Hs(Ln(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(x.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=x.v,T=!0),T||(x.g=fd(x.j,null),x.g.ea(x.v)),x.F=Date.now(),nt(x)}dd(f)}function wr(f){f.g&&(au(f),f.g.cancel(),f.g=null)}function ua(f){wr(f),f.u&&(u.clearTimeout(f.u),f.u=null),ha(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function $r(f){if(!On(f.h)&&!f.s){f.s=!0;var x=f.Ga;we||fe(),le||(we(),le=!0),me.add(x,f),f.B=0}}function gp(f,x){return Zc(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=dr(w(f.Ga,f,x),cd(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const G=new pr(this,this.j,f);let Z=this.o;if(this.S&&(Z?(Z=b(Z),R(Z,this.S)):Z=this.S),this.m!==null||this.O||(G.H=Z,Z=null),this.P)e:{for(var x=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(x+=N,4096<x){x=T;break e}if(x===4096||T===this.i.length-1){x=T+1;break e}}x=1e3}else x=1e3;x=Qs(this,G,x),T=Ln(this.I),et(T,"RID",f),et(T,"CVER",22),this.D&&et(T,"X-HTTP-Session-Id",this.D),fs(this,T),Z&&(this.O?x="headers="+encodeURIComponent(String(hs(Z)))+"&"+x:this.m&&Gs(T,this.m,Z)),tu(this.h,G),this.Ua&&et(T,"TYPE","init"),this.P?(et(T,"$req",x),et(T,"SID","null"),G.T=!0,na(G,T,null)):na(G,T,x),this.G=2}}else this.G==3&&(f?ca(this,f):this.i.length==0||On(this.h)||ca(this))};function ca(f,x){var T;x?T=x.l:T=f.U++;const N=Ln(f.I);et(N,"SID",f.K),et(N,"RID",T),et(N,"AID",f.T),fs(f,N),f.m&&f.o&&Gs(N,f.m,f.o),T=new pr(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),x&&(f.i=x.D.concat(f.i)),x=Qs(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),tu(f.h,T),na(T,N,x)}function fs(f,x){f.H&&F(f.H,function(T,N){et(x,N,T)}),f.l&&Bs({},function(T,N){et(x,N,T)})}function Qs(f,x,T){T=Math.min(f.i.length,T);var N=f.l?w(f.l.Na,f.l,f):null;e:{var G=f.i;let Z=-1;for(;;){const de=["count="+T];Z==-1?0<T?(Z=G[0].g,de.push("ofs="+Z)):Z=0:de.push("ofs="+Z);let Ye=!0;for(let jt=0;jt<T;jt++){let qe=G[jt].g;const Ft=G[jt].map;if(qe-=Z,0>qe)Z=Math.max(0,G[jt].g-100),Ye=!1;else try{ad(Ft,de,"req"+qe+"_")}catch{N&&N(Ft)}}if(Ye){N=de.join("&");break e}}}return f=f.i.splice(0,T),x.D=f,N}function no(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;we||fe(),le||(we(),le=!0),me.add(x,f),f.v=0}}function da(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=dr(w(f.Fa,f),cd(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,ud(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=dr(w(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),wr(this),ud(this))};function au(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function ud(f){f.g=new pr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=Ln(f.qa);et(x,"RID","rpc"),et(x,"SID",f.K),et(x,"AID",f.T),et(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&et(x,"TO",f.ja),et(x,"TYPE","xmlhttp"),fs(f,x),f.m&&f.o&&Gs(x,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=Hs(Ln(x)),T.m=null,T.P=!0,Zl(T,f)}n.Za=function(){this.C!=null&&(this.C=null,wr(this),da(this),bt(19))};function ha(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function fa(f,x){var T=null;if(f.g==x){ha(f),au(f),f.g=null;var N=2}else if(mn(f.h,x))T=x.D,ed(f.h,x),N=1;else return;if(f.G!=0){if(x.o)if(N==1){T=x.m?x.m.length:0,x=Date.now()-x.F;var G=f.B;N=qi(),Nt(N,new Xo(N,T)),$r(f)}else no(f);else if(G=x.s,G==3||G==0&&0<x.X||!(N==1&&gp(f,x)||N==2&&da(f)))switch(T&&0<T.length&&(x=f.h,x.i=x.i.concat(T)),G){case 1:ps(f,5);break;case 4:ps(f,10);break;case 3:ps(f,6);break;default:ps(f,2)}}}function cd(f,x){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*x}function ps(f,x){if(f.j.info("Error code "+x),x==2){var T=w(f.fb,f),N=f.Xa;const G=!N;N=new cs(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Zi(N,"https"),Hs(N),G?fp(N.toString(),T):od(N.toString(),T)}else bt(2);f.G=0,f.l&&f.l.sa(x),dd(f),ua(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function dd(f){if(f.G=0,f.ka=[],f.l){const x=td(f.h);(x.length!=0||f.i.length!=0)&&(A(f.ka,x),A(f.ka,f.i),f.h.i.length=0,j(f.i),f.i.length=0),f.l.ra()}}function hd(f,x,T){var N=T instanceof cs?Ln(T):new cs(T);if(N.g!="")x&&(N.g=x+"."+N.g),zs(N,N.s);else{var G=u.location;N=G.protocol,x=x?x+"."+G.hostname:G.hostname,G=+G.port;var Z=new cs(null);N&&Zi(Z,N),x&&(Z.g=x),G&&zs(Z,G),T&&(Z.l=T),N=Z}return T=f.D,x=f.ya,T&&x&&et(N,T,x),et(N,"VER",f.la),fs(f,N),N}function fd(f,x,T){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new ut(new ds({eb:T})):new ut(f.pa),x.Ha(f.J),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lu(){}n=lu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function pa(){}pa.prototype.g=function(f,x){return new gn(f,x)};function gn(f,x){Rt.call(this),this.g=new ou(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!V(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!V(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new Fr(this)}C(gn,Rt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Gt(this.g)},gn.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Hl(f),f=T);x.i.push(new Xc(x.Ya++,f)),x.G==3&&$r(x)},gn.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,gn.aa.N.call(this)};function pd(f){Dr.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const T in x){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}C(pd,Dr);function md(){Yo.call(this),this.status=1}C(md,Yo);function Fr(f){this.g=f}C(Fr,lu),Fr.prototype.ua=function(){Nt(this.g,"a")},Fr.prototype.ta=function(f){Nt(this.g,new pd(f))},Fr.prototype.sa=function(f){Nt(this.g,new md)},Fr.prototype.ra=function(){Nt(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,NC=function(){return new pa},RC=function(){return qi()},IC=Or,g0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ea.NO_ERROR=0,ea.TIMEOUT=8,ea.HTTP_ERROR=6,Oh=ea,Gc.COMPLETE="complete",AC=Gc,Jo.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Ku=Jo,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,PC=ut}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});const bE="@firebase/firestore",EE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new Ly("@firebase/firestore");function Ga(){return Do.logLevel}function ve(n,...e){if(Do.logLevel<=Ue.DEBUG){const t=e.map(Fy);Do.debug(`Firestore (${jl}): ${n}`,...t)}}function Os(n,...e){if(Do.logLevel<=Ue.ERROR){const t=e.map(Fy);Do.error(`Firestore (${jl}): ${n}`,...t)}}function vl(n,...e){if(Do.logLevel<=Ue.WARN){const t=e.map(Fy);Do.warn(`Firestore (${jl}): ${n}`,...t)}}function Fy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n="Unexpected state"){const e=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: `+n;throw Os(e),new Error(e)}function Je(n,e){n||Ne()}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends rs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}}class v${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class w${constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rs,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rs)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new jC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new dn(e)}}class x${constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class _${constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new x$(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class TE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b${constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,or(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0);const r=o=>{o.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new TE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string"),this.R=t.token,new TE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=E$(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Ve(n,e){return n<e?-1:n>e?1:0}function y0(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ve(r,s);{const o=DC(),l=T$(o.encode(SE(n,t)),o.encode(SE(e,t)));return l!==0?l:Ve(r,s)}}t+=r>65535?2:1}return Ve(n.length,e.length)}function SE(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function T$(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ve(n[t],e[t]);return Ve(n.length,e.length)}function wl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=-62135596800,CE=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CE);return new Mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<kE)throw new ke(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CE}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new Mt(0,0))}static max(){return new De(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="__name__";class qr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(),r===void 0?r=e.length-t:r>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=qr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Ve(e.length,t.length)}static compareSegments(e,t){const r=qr.isNumericId(e),s=qr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?qr.extractNumericId(e).compare(qr.extractNumericId(t)):y0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}}class dt extends qr{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new dt(t)}static emptyPath(){return new dt([])}}const S$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends qr{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return S$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PE}static keyField(){return new en([PE])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ke(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new ke(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ke(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new ke(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(dt.fromString(e))}static fromName(e){return new Ae(dt.fromString(e).popFirst(5))}static empty(){return new Ae(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=-1;function k$(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=De.fromTimestamp(r===1e9?new Mt(t+1,0):new Mt(t,r));return new Ri(s,Ae.empty(),e)}function C$(n){return new Ri(n.readTime,n.key,xc)}class Ri{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ri(De.min(),Ae.empty(),xc)}static max(){return new Ri(De.max(),Ae.empty(),xc)}}function P$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Ve(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class I${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==A$)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&t()},c=>r(c))}),l=!0,o===s&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(s=>s?ne.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,o)=>{r.push(t.call(this,s,o))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;t(e[h]).next(g=>{l[h]=g,++u,u===o&&r(l)},g=>s(g))}})}static doWhile(e,t){return new ne((r,s)=>{const o=()=>{e()===!0?t().next(()=>{o()},s):r()};o()})}}function R$(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ol(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Mf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function Vf(n){return n==null}function af(n){return n===0&&1/n==-1/0}function N$(n){return typeof n=="number"&&Number.isInteger(n)&&!af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="";function j$(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AE(e)),e=D$(n.get(t),e);return AE(e)}function D$(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case LC:t+="";break;default:t+=o}}return t}function AE(n){return n+LC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=o??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Xt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,r,s,o){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new RE(this.data.getIterator())}getIteratorFrom(e){return new RE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class RE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new Vt(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new VC("Invalid base64 string: "+o):o}}(e);return new nn(t)}static fromUint8Array(e){const t=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const O$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ni(n){if(Je(!!n),typeof n=="string"){let e=0;const t=O$.exec(n);if(Je(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(n.seconds),nanos:kt(n.nanos)}}function kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ji(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="server_timestamp",FC="__type__",UC="__previous_value__",BC="__local_write_time__";function By(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||t===void 0?void 0:t.stringValue)===$C}function $f(n){const e=n.mapValue.fields[UC];return By(e)?$f(e):e}function _c(n){const e=Ni(n.mapValue.fields[BC].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,t,r,s,o,l,u,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const lf="(default)";class bc{constructor(e,t){this.projectId=e,this.database=t||lf}static empty(){return new bc("","")}get isDefaultDatabase(){return this.database===lf}isEqual(e){return e instanceof bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__type__",M$="__max__",Eh={mapValue:{}},WC="__vector__",uf="value";function Di(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?By(n)?4:$$(n)?9007199254740991:V$(n)?10:11:Ne()}function ts(n,e){if(n===e)return!0;const t=Di(n);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _c(n).isEqual(_c(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ni(s.timestampValue),u=Ni(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,o){return ji(s.bytesValue).isEqual(ji(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,o){return kt(s.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(n,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return kt(s.integerValue)===kt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=kt(s.doubleValue),u=kt(o.doubleValue);return l===u?af(l)===af(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return wl(n.arrayValue.values||[],e.arrayValue.values||[],ts);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(IE(l)!==IE(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!ts(l[c],u[c])))return!1;return!0}(n,e);default:return Ne()}}function Ec(n,e){return(n.values||[]).find(t=>ts(t,e))!==void 0}function xl(n,e){if(n===e)return 0;const t=Di(n),r=Di(e);if(t!==r)return Ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(n.booleanValue,e.booleanValue);case 2:return function(o,l){const u=kt(o.integerValue||o.doubleValue),c=kt(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(n,e);case 3:return NE(n.timestampValue,e.timestampValue);case 4:return NE(_c(n),_c(e));case 5:return y0(n.stringValue,e.stringValue);case 6:return function(o,l){const u=ji(o),c=ji(l);return u.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let h=0;h<u.length&&h<c.length;h++){const g=Ve(u[h],c[h]);if(g!==0)return g}return Ve(u.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Ve(kt(o.latitude),kt(l.latitude));return u!==0?u:Ve(kt(o.longitude),kt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return jE(n.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,h,g;const v=o.fields||{},w=l.fields||{},E=(u=v[uf])===null||u===void 0?void 0:u.arrayValue,C=(c=w[uf])===null||c===void 0?void 0:c.arrayValue,j=Ve(((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0,((g=C==null?void 0:C.values)===null||g===void 0?void 0:g.length)||0);return j!==0?j:jE(E,C)}(n.mapValue,e.mapValue);case 11:return function(o,l){if(o===Eh.mapValue&&l===Eh.mapValue)return 0;if(o===Eh.mapValue)return 1;if(l===Eh.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=l.fields||{},g=Object.keys(h);c.sort(),g.sort();for(let v=0;v<c.length&&v<g.length;++v){const w=y0(c[v],g[v]);if(w!==0)return w;const E=xl(u[c[v]],h[g[v]]);if(E!==0)return E}return Ve(c.length,g.length)}(n.mapValue,e.mapValue);default:throw Ne()}}function NE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ve(n,e);const t=Ni(n),r=Ni(e),s=Ve(t.seconds,r.seconds);return s!==0?s:Ve(t.nanos,r.nanos)}function jE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=xl(t[s],r[s]);if(o)return o}return Ve(t.length,r.length)}function _l(n){return v0(n)}function v0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ni(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ji(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=v0(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${v0(t.fields[l])}`;return s+"}"}(n.mapValue):Ne()}function Lh(n){switch(Di(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$f(n);return e?16+Lh(e):16;case 5:return 2*n.stringValue.length;case 6:return ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Lh(o),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Fi(r.fields,(o,l)=>{s+=o.length+Lh(l)}),s}(n.mapValue);default:throw Ne()}}function w0(n){return!!n&&"integerValue"in n}function zy(n){return!!n&&"arrayValue"in n}function DE(n){return!!n&&"nullValue"in n}function OE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mh(n){return!!n&&"mapValue"in n}function V$(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||t===void 0?void 0:t.stringValue)===WC}function sc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $$(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===M$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(t)}setAll(e){let t=en.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!t.isImmediateParentOf(u)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=u.popLast()}l?r[u.lastSegment()]=sc(l):s.push(u.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());Mh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ts(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Mh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Fi(t,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Nn(sc(this.value))}}function HC(n){const e=[];return Fi(n.fields,(t,r)=>{const s=new en([t]);if(Mh(r)){const o=HC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,r,s,o,l,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new hn(e,0,De.min(),De.min(),De.min(),Nn.empty(),0)}static newFoundDocument(e,t,r,s){return new hn(e,1,t,De.min(),r,s,0)}static newNoDocument(e,t){return new hn(e,2,t,De.min(),De.min(),Nn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,De.min(),De.min(),Nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.position=e,this.inclusive=t}}function LE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=Ae.comparator(Ae.fromName(l.referenceValue),t.key):r=xl(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ME(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ts(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t="asc"){this.field=e,this.dir=t}}function F$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class Lt extends qC{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new B$(e,t,r):t==="array-contains"?new H$(e,r):t==="in"?new q$(e,r):t==="not-in"?new K$(e,r):t==="array-contains-any"?new G$(e,r):new Lt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new z$(e,r):new W$(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xl(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ns extends qC{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new ns(e,t)}matches(e){return KC(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function KC(n){return n.op==="and"}function GC(n){return U$(n)&&KC(n)}function U$(n){for(const e of n.filters)if(e instanceof ns)return!1;return!0}function x0(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+_l(n.value);if(GC(n))return n.filters.map(e=>x0(e)).join(",");{const e=n.filters.map(t=>x0(t)).join(",");return`${n.op}(${e})`}}function QC(n,e){return n instanceof Lt?function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&ts(r.value,s.value)}(n,e):n instanceof ns?function(r,s){return s instanceof ns&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,u)=>o&&QC(l,s.filters[u]),!0):!1}(n,e):void Ne()}function JC(n){return n instanceof Lt?function(t){return`${t.field.canonicalString()} ${t.op} ${_l(t.value)}`}(n):n instanceof ns?function(t){return t.op.toString()+" {"+t.getFilters().map(JC).join(" ,")+"}"}(n):"Filter"}class B$ extends Lt{constructor(e,t,r){super(e,t,r),this.key=Ae.fromName(r.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class z$ extends Lt{constructor(e,t){super(e,"in",t),this.keys=YC("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class W$ extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=YC("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function YC(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ae.fromName(r.referenceValue))}class H$ extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zy(t)&&Ec(t.arrayValue,this.value)}}class q$ extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ec(this.value.arrayValue,t)}}class K$ extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ec(this.value.arrayValue,t)}}class G$ extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ec(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e,t=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function VE(n,e=null,t=[],r=[],s=null,o=null,l=null){return new Q$(n,e,t,r,s,o,l)}function Wy(n){const e=Oe(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>x0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Vf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_l(r)).join(",")),e.le=t}return e.le}function Hy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!F$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!QC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ME(n.startAt,e.startAt)&&ME(n.endAt,e.endAt)}function _0(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t=null,r=[],s=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function J$(n,e,t,r,s,o,l,u){return new Ff(n,e,t,r,s,o,l,u)}function qy(n){return new Ff(n)}function $E(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Y$(n){return n.collectionGroup!==null}function ic(n){const e=Oe(n);if(e.he===null){e.he=[];const t=new Set;for(const o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new Vt(en.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new df(o,r))}),t.has(en.keyField().canonicalString())||e.he.push(new df(en.keyField(),r))}return e.he}function Yr(n){const e=Oe(n);return e.Pe||(e.Pe=X$(e,ic(n))),e.Pe}function X$(n,e){if(n.limitType==="F")return VE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new df(s.field,o)});const t=n.endAt?new cf(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new cf(n.startAt.position,n.startAt.inclusive):null;return VE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function b0(n,e,t){return new Ff(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uf(n,e){return Hy(Yr(n),Yr(e))&&n.limitType===e.limitType}function XC(n){return`${Wy(Yr(n))}|lt:${n.limitType}`}function Qa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>JC(s)).join(", ")}]`),Vf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>_l(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>_l(s)).join(",")),`Target(${r})`}(Yr(n))}; limitType=${n.limitType})`}function Bf(n,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,s){for(const o of ic(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,u,c){const h=LE(l,u,c);return l.inclusive?h<=0:h<0}(r.startAt,ic(r),s)||r.endAt&&!function(l,u,c){const h=LE(l,u,c);return l.inclusive?h>=0:h>0}(r.endAt,ic(r),s))}(n,e)}function Z$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ZC(n){return(e,t)=>{let r=!1;for(const s of ic(n)){const o=e3(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function e3(n,e,t){const r=n.field.isKeyField()?Ae.comparator(e.key,t.key):function(o,l,u){const c=l.data.field(o),h=u.data.field(o);return c!==null&&h!==null?xl(c,h):Ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(t,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return MC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=new gt(Ae.comparator);function Ls(){return t3}const eP=new gt(Ae.comparator);function Gu(...n){let e=eP;for(const t of n)e=e.insert(t.key,t);return e}function tP(n){let e=eP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Po(){return oc()}function nP(){return oc()}function oc(){return new Bo(n=>n.toString(),(n,e)=>n.isEqual(e))}const n3=new gt(Ae.comparator),r3=new Vt(Ae.comparator);function Be(...n){let e=r3;for(const t of n)e=e.add(t);return e}const s3=new Vt(Ve);function i3(){return s3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function rP(n){return{integerValue:""+n}}function o3(n,e){return N$(e)?rP(e):Ky(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this._=void 0}}function a3(n,e,t){return n instanceof hf?function(s,o){const l={fields:{[FC]:{stringValue:$C},[BC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&By(o)&&(o=$f(o)),o&&(l.fields[UC]=o),{mapValue:l}}(t,e):n instanceof Tc?iP(n,e):n instanceof Sc?oP(n,e):function(s,o){const l=sP(s,o),u=FE(l)+FE(s.Ie);return w0(l)&&w0(s.Ie)?rP(u):Ky(s.serializer,u)}(n,e)}function l3(n,e,t){return n instanceof Tc?iP(n,e):n instanceof Sc?oP(n,e):t}function sP(n,e){return n instanceof ff?function(r){return w0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class hf extends zf{}class Tc extends zf{constructor(e){super(),this.elements=e}}function iP(n,e){const t=aP(e);for(const r of n.elements)t.some(s=>ts(s,r))||t.push(r);return{arrayValue:{values:t}}}class Sc extends zf{constructor(e){super(),this.elements=e}}function oP(n,e){let t=aP(e);for(const r of n.elements)t=t.filter(s=>!ts(s,r));return{arrayValue:{values:t}}}class ff extends zf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function FE(n){return kt(n.integerValue||n.doubleValue)}function aP(n){return zy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function u3(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Tc&&s instanceof Tc||r instanceof Sc&&s instanceof Sc?wl(r.elements,s.elements,ts):r instanceof ff&&s instanceof ff?ts(r.Ie,s.Ie):r instanceof hf&&s instanceof hf}(n.transform,e.transform)}class c3{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Wf{}function lP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gy(n.key,lr.none()):new $c(n.key,n.data,lr.none());{const t=n.data,r=Nn.empty();let s=new Vt(en.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Ui(n.key,r,new Wn(s.toArray()),lr.none())}}function d3(n,e,t){n instanceof $c?function(s,o,l){const u=s.value.clone(),c=BE(s.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Ui?function(s,o,l){if(!Vh(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=BE(s.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(uP(s)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof $c?function(o,l,u,c){if(!Vh(o.precondition,l))return u;const h=o.value.clone(),g=zE(o.fieldTransforms,c,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ui?function(o,l,u,c){if(!Vh(o.precondition,l))return u;const h=zE(o.fieldTransforms,c,l),g=l.data;return g.setAll(uP(o)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,l,u){return Vh(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(n,e,t)}function h3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=sP(r.transform,s||null);o!=null&&(t===null&&(t=Nn.empty()),t.set(r.field,o))}return t||null}function UE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&wl(r,s,(o,l)=>u3(o,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $c extends Wf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ui extends Wf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BE(n,e,t){const r=new Map;Je(n.length===t.length);for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,l3(l,u,t[s]))}return r}function zE(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,a3(o,l,e))}return r}class Gy extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f3 extends Wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&d3(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nP();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=t.has(s.key)?null:u;const c=lP(l,u);c!==null&&r.set(s.key,c),l.isValidDocument()||l.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,(t,r)=>UE(t,r))&&wl(this.baseMutations,e.baseMutations,(t,r)=>UE(t,r))}}class Qy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Je(e.mutations.length===r.length);let s=function(){return n3}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new Qy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Ke;function y3(n){switch(n){case ae.OK:return Ne();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ne()}}function cP(n){if(n===void 0)return Os("GRPC error has no .code"),ae.UNKNOWN;switch(n){case At.OK:return ae.OK;case At.CANCELLED:return ae.CANCELLED;case At.UNKNOWN:return ae.UNKNOWN;case At.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case At.INTERNAL:return ae.INTERNAL;case At.UNAVAILABLE:return ae.UNAVAILABLE;case At.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case At.NOT_FOUND:return ae.NOT_FOUND;case At.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case At.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case At.ABORTED:return ae.ABORTED;case At.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case At.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case At.DATA_LOSS:return ae.DATA_LOSS;default:return Ne()}}(Ke=At||(At={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=new Ti([4294967295,4294967295],0);function WE(n){const e=DC().encode(n),t=new CC;return t.update(e),new Uint8Array(t.digest())}function HE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ti([t,r],0),new Ti([s,o],0)]}class Jy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qu(`Invalid padding: ${t}`);if(r<0)throw new Qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ti.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Ti.fromNumber(r)));return s.compare(v3)===1&&(s=new Ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=WE(e),[r,s]=HE(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Jy(o,s,t);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const t=WE(e),[r,s]=HE(t);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hf(De.min(),s,new gt(Ve),Ls(),Be())}}class Fc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Fc(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class dP{constructor(e,t){this.targetId=e,this.ge=t}}class hP{constructor(e,t,r=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class qE{constructor(){this.pe=0,this.ye=KE(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Be(),t=Be(),r=Be();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ne()}}),new Fc(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=KE()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Je(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class w3{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ls(),this.$e=Th(),this.Ue=Th(),this.Ke=new gt(Ve)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const o=s.target;if(_0(o))if(r===0){const l=new Ae(o.path);this.ze(t,l,hn.newNoDocument(l,De.min()))}else Je(r===1);else{const l=this.et(t);if(l!==r){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,u;try{l=ji(r).toUint8Array()}catch(c){if(c instanceof VC)return vl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Jy(l,s,o)}catch(c){return vl(c instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(t,o,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&_0(u.target)){const c=new Ae(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,hn.newNoDocument(c,e))}o.ve&&(t.set(l,o.Fe()),o.Me())}});let r=Be();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Hf(e,t,this.Ke,this.Qe,r);return this.Qe=Ls(),this.$e=Th(),this.Ue=Th(),this.Ke=new gt(Ve),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new qE,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Vt(Ve),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Vt(Ve),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new qE),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Th(){return new gt(Ae.comparator)}function KE(){return new gt(Ae.comparator)}const x3={asc:"ASCENDING",desc:"DESCENDING"},_3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b3={and:"AND",or:"OR"};class E3{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function E0(n,e){return n.useProto3Json||Vf(e)?e:{value:e}}function pf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function T3(n,e){return pf(n,e.toTimestamp())}function Xr(n){return Je(!!n),De.fromTimestamp(function(t){const r=Ni(t);return new Mt(r.seconds,r.nanos)}(n))}function Yy(n,e){return T0(n,e).canonicalString()}function T0(n,e){const t=function(s){return new dt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function pP(n){const e=dt.fromString(n);return Je(wP(e)),e}function S0(n,e){return Yy(n.databaseId,e.path)}function wg(n,e){const t=pP(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(gP(t))}function mP(n,e){return Yy(n.databaseId,e)}function S3(n){const e=pP(n);return e.length===4?dt.emptyPath():gP(e)}function k0(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gP(n){return Je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function GE(n,e,t){return{name:S0(n,e),fields:t.value.mapValue.fields}}function k3(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Je(g===void 0||typeof g=="string"),nn.fromBase64String(g||"")):(Je(g===void 0||g instanceof Buffer||g instanceof Uint8Array),nn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const g=h.code===void 0?ae.UNKNOWN:cP(h.code);return new ke(g,h.message||"")}(l);t=new hP(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wg(n,r.document.name),o=Xr(r.document.updateTime),l=r.document.createTime?Xr(r.document.createTime):De.min(),u=new Nn({mapValue:{fields:r.document.fields}}),c=hn.newFoundDocument(s,o,l,u),h=r.targetIds||[],g=r.removedTargetIds||[];t=new $h(h,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wg(n,r.document),o=r.readTime?Xr(r.readTime):De.min(),l=hn.newNoDocument(s,o),u=r.removedTargetIds||[];t=new $h([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wg(n,r.document),o=r.removedTargetIds||[];t=new $h([],o,s,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new g3(s,o),u=r.targetId;t=new dP(u,l)}}return t}function C3(n,e){let t;if(e instanceof $c)t={update:GE(n,e.key,e.value)};else if(e instanceof Gy)t={delete:S0(n,e.key)};else if(e instanceof Ui)t={update:GE(n,e.key,e.data),updateMask:L3(e.fieldMask)};else{if(!(e instanceof f3))return Ne();t={verify:S0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof hf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Tc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Sc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ff)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:T3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne()}(n,e.precondition)),t}function P3(n,e){return n&&n.length>0?(Je(e!==void 0),n.map(t=>function(s,o){let l=s.updateTime?Xr(s.updateTime):Xr(o);return l.isEqual(De.min())&&(l=Xr(o)),new c3(l,s.transformResults||[])}(t,e))):[]}function A3(n,e){return{documents:[mP(n,e.path)]}}function I3(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=mP(n,s);const o=function(h){if(h.length!==0)return vP(ns.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(g=>function(w){return{field:Ja(w.field),direction:j3(w.dir)}}(g))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=E0(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:t,parent:s}}function R3(n){let e=S3(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Je(r===1);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(v){const w=yP(v);return w instanceof ns&&GC(w)?w.getFilters():[w]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(w=>function(C){return new df(Ya(C.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(w))}(t.orderBy));let u=null;t.limit&&(u=function(v){let w;return w=typeof v=="object"?v.value:v,Vf(w)?null:w}(t.limit));let c=null;t.startAt&&(c=function(v){const w=!!v.before,E=v.values||[];return new cf(E,w)}(t.startAt));let h=null;return t.endAt&&(h=function(v){const w=!v.before,E=v.values||[];return new cf(E,w)}(t.endAt)),J$(e,s,l,o,u,"F",c,h)}function N3(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ya(t.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ya(t.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ya(t.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Ya(t.unaryFilter.field);return Lt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(n):n.fieldFilter!==void 0?function(t){return Lt.create(Ya(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ns.create(t.compositeFilter.filters.map(r=>yP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(n):Ne()}function j3(n){return x3[n]}function D3(n){return _3[n]}function O3(n){return b3[n]}function Ja(n){return{fieldPath:n.canonicalString()}}function Ya(n){return en.fromServerFormat(n.fieldPath)}function vP(n){return n instanceof Lt?function(t){if(t.op==="=="){if(OE(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NAN"}};if(DE(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OE(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NAN"}};if(DE(t.value))return{unaryFilter:{field:Ja(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ja(t.field),op:D3(t.op),value:t.value}}}(n):n instanceof ns?function(t){const r=t.getFilters().map(s=>vP(s));return r.length===1?r[0]:{compositeFilter:{op:O3(t.op),filters:r}}}(n):Ne()}function L3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,r,s,o=De.min(),l=De.min(),u=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new _i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.Tt=e}}function V3(n){const e=R3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?b0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(){this.Tn=new F3}addToCollectionParentIndex(e,t){return this.Tn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Ri.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class F3{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Vt(dt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xP=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(xP,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new bl(0)}static Kn(){return new bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="LruGarbageCollector",U3=1048576;function YE([n,e],[t,r]){const s=Ve(n,t);return s===0?Ve(e,r):s}class B3{constructor(e){this.Hn=e,this.buffer=new Vt(YE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();YE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ve(JE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ol(t)?ve(JE,"Ignoring IndexedDB error during garbage collection: ",t):await Dl(t)}await this.er(3e5)})}}class W3{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Mf.ae);const r=new B3(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(QE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QE):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,o,l,u,c,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Ga()<=Ue.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${v} documents in `+(h-c)+`ms
Total Duration: ${h-g}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function H3(n,e){return new W3(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.changes=new Bo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&ac(r.mutation,s,Wn.empty(),Mt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const s=Po();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(o=>{let l=Gu();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const s=[];return r.forEach(o=>{t.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{t.set(l,u)})})}computeViews(e,t,r,s){let o=Ls();const l=oc(),u=function(){return oc()}();return t.forEach((c,h)=>{const g=r.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Ui)?o=o.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),ac(g.mutation,h,g.mutation.getFieldMask(),Mt.now())):l.set(h.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,g)=>l.set(h,g)),t.forEach((h,g)=>{var v;return u.set(h,new K3(g,(v=l.get(h))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,t){const r=oc();let s=new gt((l,u)=>l-u),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const u of l)u.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let g=r.get(c)||Wn.empty();g=u.applyToLocalView(h,g),r.set(c,g);const v=(s.get(u.batchId)||Be()).add(c);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,g=c.value,v=nP();g.forEach(w=>{if(!o.has(w)){const E=lP(t.get(w),r.get(w));E!==null&&v.set(w,E),o=o.add(w)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return Ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Y$(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):ne.resolve(Po());let u=xc,c=o;return l.next(h=>ne.forEach(h,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?ne.resolve():this.remoteDocumentCache.getEntry(e,g).next(w=>{c=c.insert(g,w)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,Be())).next(g=>({batchId:u,changes:tP(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next(r=>{let s=Gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=Gu();return this.indexManager.getCollectionParents(e,o).next(u=>ne.forEach(u,c=>{const h=function(v,w){return new Ff(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(g=>{g.forEach((v,w)=>{l=l.insert(v,w)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s))).next(l=>{o.forEach((c,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,hn.newInvalidDocument(g)))});let u=Gu();return l.forEach((c,h)=>{const g=o.get(c);g!==void 0&&ac(g.mutation,h,Wn.empty(),Mt.now()),Bf(t,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ne.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Xr(s.createTime)}}(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:V3(s.bundledQuery),readTime:Xr(s.readTime)}}(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.overlays=new gt(Ae.comparator),this.Rr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Po();return ne.forEach(t,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,o)=>{this.Et(e,t,o)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const s=Po(),o=t.length+1,l=new Ae(t.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return ne.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new gt((h,g)=>h-g);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=Po(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=Po(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=s)););return ne.resolve(u)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new m3(t,r));let o=this.Rr.get(t);o===void 0&&(o=Be(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.Vr=new Vt(qt.mr),this.gr=new Vt(qt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new qt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new qt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Ae(new dt([])),r=new qt(t,e),s=new qt(t,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ae(new dt([])),r=new qt(t,e),s=new qt(t,e+1);let o=Be();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const t=new qt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ae.comparator(e.key,t.key)||Ve(e.Cr,t.Cr)}static pr(e,t){return Ve(e.Cr,t.Cr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Vt(qt.mr)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new p3(o,t,r,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new qt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),o=s<0?0:s;return ne.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Uy:this.Fr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qt(t,0),s=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const u=this.Or(l.Cr);o.push(u)}),ne.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(Ve);return t.forEach(s=>{const o=new qt(s,0),l=new qt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),ne.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Ae.isDocumentKey(o)||(o=o.child(""));const l=new qt(new Ae(o),0);let u=new Vt(Ve);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Cr)),!0)},l),ne.resolve(this.Br(u))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Je(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ne.forEach(t.mutations,s=>{const o=new qt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new qt(t,0),s=this.Mr.firstAfterOrEqual(r);return ne.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.kr=e,this.docs=function(){return new gt(Ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=Ls();return t.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():hn.newInvalidDocument(s))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=Ls();const l=t.path,u=new Ae(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||P$(C$(g),r)<=0||(s.has(g.key)||Bf(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return ne.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ne()}qr(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new e6(this)}getSize(e){return ne.resolve(this.size)}}class e6 extends q3{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.persistence=e,this.Qr=new Bo(t=>Wy(t),Hy),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Xy,this.targetCount=0,this.Kr=bl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ne.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new bl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.zn(t),ne.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),ne.waitFor(o).next(()=>s)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),ne.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Mf(0),this.zr=!1,this.zr=!0,this.jr=new Y3,this.referenceDelegate=e(this),this.Hr=new t6(this),this.indexManager=new $3,this.remoteDocumentCache=function(s){return new Z3(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new M3(t),this.Yr=new Q3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new J3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new X3(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ve("MemoryPersistence","Starting transaction:",e);const s=new n6(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,t){return ne.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class n6 extends I${constructor(e){super(),this.currentSequenceNumber=e}}class Zy{constructor(e){this.persistence=e,this.ti=new Xy,this.ni=null}static ri(e){return new Zy(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ne.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.ii,r=>{const s=Ae.fromPath(r);return this.si(e,s).next(o=>{o||t.removeEntry(s,De.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ne.or([()=>ne.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class mf{constructor(e,t){this.persistence=e,this.oi=new Bo(r=>j$(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=H3(this,t)}static ri(e,t){return new mf(e,t)}Zr(){}Xr(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ne.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?ne.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,t).next(u=>{u||(r++,o.removeEntry(l,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ne.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lh(e.data.value)),t}ar(e,t,r){return ne.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ne.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Be(),s=Be();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new ev(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return YM()?8:R$(pn())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.rs(e,t).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,t,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new r6;return this._s(e,t,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,t,l,u.size)})}).next(()=>o.result)}us(e,t,r,s){return r.documentReadCount<this.es?(Ga()<=Ue.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Qa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ne.resolve()):(Ga()<=Ue.DEBUG&&ve("QueryEngine","Query:",Qa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Ga()<=Ue.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Qa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(t))):ne.resolve())}rs(e,t){if($E(t))return ne.resolve(null);let r=Yr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=b0(t,null,"F"),r=Yr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=Be(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.cs(t,u);return this.ls(t,h,l,c.readTime)?this.rs(e,b0(t,null,"F")):this.hs(e,h,t,c)}))})))}ss(e,t,r,s){return $E(t)||s.isEqual(De.min())?ne.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(t,o);return this.ls(t,l,r,s)?ne.resolve(null):(Ga()<=Ue.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qa(t)),this.hs(e,l,t,k$(s,xc)).next(u=>u))})}cs(e,t){let r=new Vt(ZC(e));return t.forEach((s,o)=>{Bf(e,o)&&(r=r.add(o))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,t,r){return Ga()<=Ue.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Qa(t)),this.ns.getDocumentsMatchingQuery(e,t,Ri.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(t.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="LocalStore",i6=3e8;class o6{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new gt(Ve),this.Is=new Bo(o=>Wy(o),Hy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new G3(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function a6(n,e,t,r){return new o6(n,e,t,r)}async function bP(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let c=Be();for(const h of s){l.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}return t.localDocuments.getDocuments(r,c).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function l6(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,h,g){const v=h.batch,w=v.keys();let E=ne.resolve();return w.forEach(C=>{E=E.next(()=>g.getEntry(c,C)).next(j=>{const A=h.docVersions.get(C);Je(A!==null),j.version.compareTo(A)<0&&(v.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),g.addEntry(j)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=Be();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function EP(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function u6(n,e){const t=Oe(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const u=[];e.targetChanges.forEach((g,v)=>{const w=s.get(v);if(!w)return;u.push(t.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Hr.addMatchingKeys(o,g.addedDocuments,v)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(nn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):g.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(g.resumeToken,r)),s=s.insert(v,E),function(j,A,D){return j.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=i6?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(w,E,g)&&u.push(t.Hr.updateTargetData(o,E))});let c=Ls(),h=Be();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(c6(o,l,e.documentUpdates).next(g=>{c=g.Vs,h=g.fs})),!r.isEqual(De.min())){const g=t.Hr.getLastRemoteSnapshotVersion(o).next(v=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return ne.waitFor(u).next(()=>l.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(t.Ts=s,o))}function c6(n,e,t){let r=Be(),s=Be();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let l=Ls();return t.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):ve(tv,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Vs:l,fs:s}})}function d6(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Uy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function h6(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(o=>o?(s=o,ne.resolve(s)):t.Hr.allocateTargetId(r).next(l=>(s=new _i(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function C0(n,e,t){const r=Oe(n),s=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ol(l))throw l;ve(tv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function XE(n,e,t){const r=Oe(n);let s=De.min(),o=Be();return r.persistence.runTransaction("Execute query","readwrite",l=>function(c,h,g){const v=Oe(c),w=v.Is.get(g);return w!==void 0?ne.resolve(v.Ts.get(w)):v.Hr.getTargetData(h,g)}(r,l,Yr(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,t?s:De.min(),t?o:Be())).next(u=>(f6(r,Z$(e),u),{documents:u,gs:o})))}function f6(n,e,t){let r=n.Es.get(e)||De.min();t.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}class ZE{constructor(){this.activeTargetIds=i3()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p6{constructor(){this.ho=new ZE,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ZE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="ConnectivityMonitor";class tT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ve(eT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ve(eT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function P0(){return Sh===null?Sh=function(){return 268435456+Math.round(2147483648*Math.random())}():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="RestConnection",g6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class y6{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===lf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,o){const l=P0(),u=this.bo(e,t.toUriEncodedString());ve(xg,`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,u,c,r).then(h=>(ve(xg,`Received RPC '${e}' ${l}: `,h),h),h=>{throw vl(xg,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}Co(e,t,r,s,o,l){return this.So(e,t,r,s,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,t){const r=g6[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class w6 extends y6{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const o=P0();return new Promise((l,u)=>{const c=new PC;c.setWithCredentials(!0),c.listenOnce(AC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Oh.NO_ERROR:const g=c.getResponseJson();ve(un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Oh.TIMEOUT:ve(un,`RPC '${e}' ${o} timed out`),u(new ke(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const v=c.getStatus();if(ve(un,`RPC '${e}' ${o} failed with status:`,v,"response text:",c.getResponseText()),v>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);const E=w==null?void 0:w.error;if(E&&E.status&&E.message){const C=function(A){const D=A.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(D)>=0?D:ae.UNKNOWN}(E.status);u(new ke(C,E.message))}else u(new ke(ae.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new ke(ae.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ve(un,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ve(un,`RPC '${e}' ${o} sending request:`,s),c.send(t,"POST",h,r,15)})}Wo(e,t,r){const s=P0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=NC(),u=RC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const g=o.join("");ve(un,`Creating RPC '${e}' stream ${s}: ${g}`,c);const v=l.createWebChannel(g,c);let w=!1,E=!1;const C=new v6({Fo:A=>{E?ve(un,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(w||(ve(un,`Opening RPC '${e}' stream ${s} transport.`),v.open(),w=!0),ve(un,`RPC '${e}' stream ${s} sending:`,A),v.send(A))},Mo:()=>v.close()}),j=(A,D,V)=>{A.listen(D,$=>{try{V($)}catch(W){setTimeout(()=>{throw W},0)}})};return j(v,Ku.EventType.OPEN,()=>{E||(ve(un,`RPC '${e}' stream ${s} transport opened.`),C.Qo())}),j(v,Ku.EventType.CLOSE,()=>{E||(E=!0,ve(un,`RPC '${e}' stream ${s} transport closed`),C.Uo())}),j(v,Ku.EventType.ERROR,A=>{E||(E=!0,vl(un,`RPC '${e}' stream ${s} transport errored:`,A),C.Uo(new ke(ae.UNAVAILABLE,"The operation could not be completed")))}),j(v,Ku.EventType.MESSAGE,A=>{var D;if(!E){const V=A.data[0];Je(!!V);const $=V,W=($==null?void 0:$.error)||((D=$[0])===null||D===void 0?void 0:D.error);if(W){ve(un,`RPC '${e}' stream ${s} received error:`,W);const H=W.status;let F=function(S){const R=At[S];if(R!==void 0)return cP(R)}(H),I=W.message;F===void 0&&(F=ae.INTERNAL,I="Unknown error status: "+H+" with message "+W.message),E=!0,C.Uo(new ke(F,I)),v.close()}else ve(un,`RPC '${e}' stream ${s} received:`,V),C.Ko(V)}}),j(u,IC.STAT_EVENT,A=>{A.stat===g0.PROXY?ve(un,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===g0.NOPROXY&&ve(un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}function _g(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){return new E3(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ve("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="PersistentStream";class SP{constructor(e,t,r,s,o,l,u,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new TP(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Os(t.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new ke(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ve(nT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ve(nT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x6 extends SP{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=k3(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?De.min():l.readTime?Xr(l.readTime):De.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=k0(this.serializer),t.addTarget=function(o,l){let u;const c=l.target;if(u=_0(c)?{documents:A3(o,c)}:{query:I3(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=fP(o,l.resumeToken);const h=E0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(De.min())>0){u.readTime=pf(o,l.snapshotVersion.toTimestamp());const h=E0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=N3(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=k0(this.serializer),t.removeTarget=e,this.I_(t)}}class _6 extends SP{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=P3(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=k0(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>C3(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{}class E6 extends b6{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ke(ae.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,T0(t,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(ae.UNKNOWN,o.toString())})}Co(e,t,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,T0(t,r),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(ae.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class T6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Os(t),this.N_=!1):ve("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="RemoteStore";class S6{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{zo(this)&&(ve(Oo,"Restarting streams for network reachability change."),await async function(c){const h=Oe(c);h.W_.add(4),await Uc(h),h.j_.set("Unknown"),h.W_.delete(4),await Kf(h)}(this))})}),this.j_=new T6(r,s)}}async function Kf(n){if(zo(n))for(const e of n.G_)await e(!0)}async function Uc(n){for(const e of n.G_)await e(!1)}function kP(n,e){const t=Oe(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),iv(t)?sv(t):Ll(t).c_()&&rv(t,e))}function nv(n,e){const t=Oe(n),r=Ll(t);t.K_.delete(e),r.c_()&&CP(t,e),t.K_.size===0&&(r.c_()?r.P_():zo(t)&&t.j_.set("Unknown"))}function rv(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ll(n).y_(e)}function CP(n,e){n.H_.Ne(e),Ll(n).w_(e)}function sv(n){n.H_=new w3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Ll(n).start(),n.j_.B_()}function iv(n){return zo(n)&&!Ll(n).u_()&&n.K_.size>0}function zo(n){return Oe(n).W_.size===0}function PP(n){n.H_=void 0}async function k6(n){n.j_.set("Online")}async function C6(n){n.K_.forEach((e,t)=>{rv(n,e)})}async function P6(n,e){PP(n),iv(n)?(n.j_.q_(e),sv(n)):n.j_.set("Unknown")}async function A6(n,e,t){if(n.j_.set("Online"),e instanceof hP&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(n,e)}catch(r){ve(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gf(n,r)}else if(e instanceof $h?n.H_.We(e):e instanceof dP?n.H_.Ze(e):n.H_.je(e),!t.isEqual(De.min()))try{const r=await EP(n.localStore);t.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const g=o.K_.get(h);g&&o.K_.set(h,g.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,h)=>{const g=o.K_.get(c);if(!g)return;o.K_.set(c,g.withResumeToken(nn.EMPTY_BYTE_STRING,g.snapshotVersion)),CP(o,c);const v=new _i(g.target,c,h,g.sequenceNumber);rv(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(n,t)}catch(r){ve(Oo,"Failed to raise snapshot:",r),await gf(n,r)}}async function gf(n,e,t){if(!Ol(e))throw e;n.W_.add(1),await Uc(n),n.j_.set("Offline"),t||(t=()=>EP(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ve(Oo,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Kf(n)})}function AP(n,e){return e().catch(t=>gf(n,t,e))}async function Gf(n){const e=Oe(n),t=Oi(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Uy;for(;I6(e);)try{const s=await d6(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,R6(e,s)}catch(s){await gf(e,s)}IP(e)&&RP(e)}function I6(n){return zo(n)&&n.U_.length<10}function R6(n,e){n.U_.push(e);const t=Oi(n);t.c_()&&t.S_&&t.b_(e.mutations)}function IP(n){return zo(n)&&!Oi(n).u_()&&n.U_.length>0}function RP(n){Oi(n).start()}async function N6(n){Oi(n).C_()}async function j6(n){const e=Oi(n);for(const t of n.U_)e.b_(t.mutations)}async function D6(n,e,t){const r=n.U_.shift(),s=Qy.from(r,e,t);await AP(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Gf(n)}async function O6(n,e){e&&Oi(n).S_&&await async function(r,s){if(function(l){return y3(l)&&l!==ae.ABORTED}(s.code)){const o=r.U_.shift();Oi(r).h_(),await AP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Gf(r)}}(n,e),IP(n)&&RP(n)}async function rT(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ve(Oo,"RemoteStore received new credentials");const r=zo(t);t.W_.add(3),await Uc(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Kf(t)}async function L6(n,e){const t=Oe(n);e?(t.W_.delete(2),await Kf(t)):e||(t.W_.add(2),await Uc(t),t.j_.set("Unknown"))}function Ll(n){return n.J_||(n.J_=function(t,r,s){const o=Oe(t);return o.M_(),new x6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:k6.bind(null,n),No:C6.bind(null,n),Lo:P6.bind(null,n),p_:A6.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),iv(n)?sv(n):n.j_.set("Unknown")):(await n.J_.stop(),PP(n))})),n.J_}function Oi(n){return n.Y_||(n.Y_=function(t,r,s){const o=Oe(t);return o.M_(),new _6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:N6.bind(null,n),Lo:O6.bind(null,n),D_:j6.bind(null,n),v_:D6.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Gf(n)):(await n.Y_.stop(),n.U_.length>0&&(ve(Oo,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,u=new ov(e,t,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function av(n,e){if(Os("AsyncQueue",`${e}: ${n}`),Ol(n))return new ke(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{static emptySet(e){return new al(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ae.comparator(t.key,r.key):(t,r)=>Ae.comparator(t.key,r.key),this.keyedMap=Gu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.Z_=new gt(Ae.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class El{constructor(e,t,r,s,o,l,u,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach(u=>{l.push({type:0,doc:u})}),new El(e,t,al.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class V6{constructor(){this.queries=iT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=Oe(t),o=s.queries;s.queries=iT(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(r)})})(this,new ke(ae.ABORTED,"Firestore shutting down"))}}function iT(){return new Bo(n=>XC(n),Uf)}async function NP(n,e){const t=Oe(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new M6,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await t.onListen(s,!0);break;case 1:o.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const u=av(l,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&lv(t)}async function jP(n,e){const t=Oe(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $6(n,e){const t=Oe(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(r=!0);l.ea=s}}r&&lv(t)}function F6(n,e,t){const r=Oe(n),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(t);r.queries.delete(e)}function lv(n){n.ia.forEach(e=>{e.next()})}var A0,oT;(oT=A0||(A0={}))._a="default",oT.Cache="cache";class DP{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new El(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==A0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.key=e}}class LP{constructor(e){this.key=e}}class U6{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Be(),this.mutatedKeys=Be(),this.ya=ZC(e),this.wa=new al(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new sT,s=t?t.wa:this.wa;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const w=s.get(g),E=Bf(this.query,v)?v:null,C=!!w&&this.mutatedKeys.has(w.key),j=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;w&&E?w.data.isEqual(E.data)?C!==j&&(r.track({type:3,doc:E}),A=!0):this.va(w,E)||(r.track({type:2,doc:E}),A=!0,(c&&this.ya(E,c)>0||h&&this.ya(E,h)<0)&&(u=!0)):!w&&E?(r.track({type:0,doc:E}),A=!0):w&&!E&&(r.track({type:1,doc:w}),A=!0,(c||h)&&(u=!0)),A&&(E?(l=l.add(E),o=j?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,v)=>function(E,C){const j=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return j(E)-j(C)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(r),s=s!=null&&s;const u=t&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,h=c!==this.ga;return this.ga=c,l.length!==0||h?{snapshot:new El(this.query,e.wa,o,l,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new sT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Be(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new LP(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new OP(r))}),t}Oa(e){this.fa=e.gs,this.pa=Be();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return El.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const uv="SyncEngine";class B6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class z6{constructor(e){this.key=e,this.Ba=!1}}class W6{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Bo(u=>XC(u),Uf),this.qa=new Map,this.Qa=new Set,this.$a=new gt(Ae.comparator),this.Ua=new Map,this.Ka=new Xy,this.Wa={},this.Ga=new Map,this.za=bl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function H6(n,e,t=!0){const r=BP(n);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await MP(r,e,t,!0),s}async function q6(n,e){const t=BP(n);await MP(t,e,!0,!1)}async function MP(n,e,t,r){const s=await h6(n.localStore,Yr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let u;return r&&(u=await K6(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&kP(n.remoteStore,s),u}async function K6(n,e,t,r,s){n.Ha=(v,w,E)=>async function(j,A,D,V){let $=A.view.ba(D);$.ls&&($=await XE(j.localStore,A.query,!1).then(({documents:I})=>A.view.ba(I,$)));const W=V&&V.targetChanges.get(A.targetId),H=V&&V.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges($,j.isPrimaryClient,W,H);return lT(j,A.targetId,F.Ma),F.snapshot}(n,v,w,E);const o=await XE(n.localStore,e,!0),l=new U6(e,o.gs),u=l.ba(o.documents),c=Fc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),h=l.applyChanges(u,n.isPrimaryClient,c);lT(n,t,h.Ma);const g=new B6(e,t,l);return n.ka.set(e,g),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),h.snapshot}async function G6(n,e,t){const r=Oe(n),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Uf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await C0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&nv(r.remoteStore,s.targetId),I0(r,s.targetId)}).catch(Dl)):(I0(r,s.targetId),await C0(r.localStore,s.targetId,!0))}async function Q6(n,e){const t=Oe(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nv(t.remoteStore,r.targetId))}async function J6(n,e,t){const r=rF(n);try{const s=await function(l,u){const c=Oe(l),h=Mt.now(),g=u.reduce((E,C)=>E.add(C.key),Be());let v,w;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let C=Ls(),j=Be();return c.ds.getEntries(E,g).next(A=>{C=A,C.forEach((D,V)=>{V.isValidDocument()||(j=j.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,C)).next(A=>{v=A;const D=[];for(const V of u){const $=h3(V,v.get(V.key).overlayedDocument);$!=null&&D.push(new Ui(V.key,$,HC($.value.mapValue),lr.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,D,u)}).next(A=>{w=A;const D=A.applyToLocalDocumentSet(v,j);return c.documentOverlayCache.saveOverlays(E,A.batchId,D)})}).then(()=>({batchId:w.batchId,changes:tP(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,c){let h=l.Wa[l.currentUser.toKey()];h||(h=new gt(Ve)),h=h.insert(u,c),l.Wa[l.currentUser.toKey()]=h}(r,s.batchId,t),await Bc(r,s.changes),await Gf(r.remoteStore)}catch(s){const o=av(s,"Failed to persist write");t.reject(o)}}async function VP(n,e){const t=Oe(n);try{const r=await u6(t.localStore,e);e.targetChanges.forEach((s,o)=>{const l=t.Ua.get(o);l&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Je(l.Ba):s.removedDocuments.size>0&&(Je(l.Ba),l.Ba=!1))}),await Bc(t,r,e)}catch(r){await Dl(r)}}function aT(n,e,t){const r=Oe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const c=Oe(l);c.onlineState=u;let h=!1;c.queries.forEach((g,v)=>{for(const w of v.ta)w.sa(u)&&(h=!0)}),h&&lv(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Y6(n,e,t){const r=Oe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),o=s&&s.key;if(o){let l=new gt(Ae.comparator);l=l.insert(o,hn.newNoDocument(o,De.min()));const u=Be().add(o),c=new Hf(De.min(),new Map,new gt(Ve),l,u);await VP(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),cv(r)}else await C0(r.localStore,e,!1).then(()=>I0(r,e,t)).catch(Dl)}async function X6(n,e){const t=Oe(n),r=e.batch.batchId;try{const s=await l6(t.localStore,e);FP(t,r,null),$P(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Bc(t,s)}catch(s){await Dl(s)}}async function Z6(n,e,t){const r=Oe(n);try{const s=await function(l,u){const c=Oe(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return c.mutationQueue.lookupMutationBatch(h,u).next(v=>(Je(v!==null),g=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>c.localDocuments.getDocuments(h,g))})}(r.localStore,e);FP(r,e,t),$P(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Bc(r,s)}catch(s){await Dl(s)}}function $P(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function FP(n,e,t){const r=Oe(n);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function I0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||UP(n,r)})}function UP(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(nv(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),cv(n))}function lT(n,e,t){for(const r of t)r instanceof OP?(n.Ka.addReference(r.key,e),eF(n,r)):r instanceof LP?(ve(uv,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||UP(n,r.key)):Ne()}function eF(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ve(uv,"New document in limbo: "+t),n.Qa.add(r),cv(n))}function cv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Ae(dt.fromString(e)),r=n.za.next();n.Ua.set(r,new z6(t)),n.$a=n.$a.insert(t,r),kP(n.remoteStore,new _i(Yr(qy(t.path)),r,"TargetPurposeLimboResolution",Mf.ae))}}async function Bc(n,e,t){const r=Oe(n),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,c)=>{l.push(r.Ha(c,e,t).then(h=>{var g;if((h||t)&&r.isPrimaryClient){const v=h?!h.fromCache:(g=t==null?void 0:t.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(h){s.push(h);const v=ev.Yi(c.targetId,h);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(c,h){const g=Oe(c);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>ne.forEach(h,w=>ne.forEach(w.Hi,E=>g.persistence.referenceDelegate.addReference(v,w.targetId,E)).next(()=>ne.forEach(w.Ji,E=>g.persistence.referenceDelegate.removeReference(v,w.targetId,E)))))}catch(v){if(!Ol(v))throw v;ve(tv,"Failed to update sequence numbers: "+v)}for(const v of h){const w=v.targetId;if(!v.fromCache){const E=g.Ts.get(w),C=E.snapshotVersion,j=E.withLastLimboFreeSnapshotVersion(C);g.Ts=g.Ts.insert(w,j)}}}(r.localStore,o))}async function tF(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ve(uv,"User change. New user:",e.toKey());const r=await bP(t.localStore,e);t.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new ke(ae.CANCELLED,l))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Bc(t,r.Rs)}}function nF(n,e){const t=Oe(n),r=t.Ua.get(e);if(r&&r.Ba)return Be().add(r.key);{let s=Be();const o=t.qa.get(e);if(!o)return s;for(const l of o){const u=t.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function BP(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y6.bind(null,e),e.La.p_=$6.bind(null,e.eventManager),e.La.Ja=F6.bind(null,e.eventManager),e}function rF(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z6.bind(null,e),e}class yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return a6(this.persistence,new s6,e.initialUser,this.serializer)}Xa(e){return new _P(Zy.ri,this.serializer)}Za(e){return new p6}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yf.provider={build:()=>new yf};class sF extends yf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Je(this.persistence.referenceDelegate instanceof mf);const r=this.persistence.referenceDelegate.garbageCollector;return new z3(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new _P(r=>mf.ri(r,t),this.serializer)}}class R0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>aT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tF.bind(null,this.syncEngine),await L6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new V6}()}createDatastore(e){const t=qf(e.databaseInfo.databaseId),r=function(o){return new w6(o)}(e.databaseInfo);return function(o,l,u,c){return new E6(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,o,l,u){return new S6(r,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,t=>aT(this.syncEngine,t,0),function(){return tT.D()?new tT:new m6}())}createSyncEngine(e,t){return function(s,o,l,u,c,h,g){const v=new W6(s,o,l,u,c,h);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const o=Oe(s);ve(Oo,"RemoteStore shutting down."),o.W_.add(5),await Uc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}R0.provider={build:()=>new R0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="FirestoreClient";class iF{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=OC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ve(Li,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ve(Li,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=av(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bg(n,e){n.asyncQueue.verifyOperationInProgress(),ve(Li,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function uT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oF(n);ve(Li,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>rT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>rT(e.remoteStore,s)),n._onlineComponents=e}async function oF(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(Li,"Using user provided OfflineComponentProvider");try{await bg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===ae.FAILED_PRECONDITION||s.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;vl("Error using user provided cache. Falling back to memory cache: "+t),await bg(n,new yf)}}else ve(Li,"Using default OfflineComponentProvider"),await bg(n,new sF(void 0));return n._offlineComponents}async function WP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(Li,"Using user provided OnlineComponentProvider"),await uT(n,n._uninitializedComponentsProvider._online)):(ve(Li,"Using default OnlineComponentProvider"),await uT(n,new R0))),n._onlineComponents}function aF(n){return WP(n).then(e=>e.syncEngine)}async function HP(n){const e=await WP(n),t=e.eventManager;return t.onListen=H6.bind(null,e.syncEngine),t.onUnlisten=G6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=q6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Q6.bind(null,e.syncEngine),t}function lF(n,e,t={}){const r=new Rs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new zP({next:w=>{g.su(),l.enqueueAndForget(()=>jP(o,v));const E=w.docs.has(u);!E&&w.fromCache?h.reject(new ke(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&c&&c.source==="server"?h.reject(new ke(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),v=new DP(qy(u.path),g,{includeMetadataChanges:!0,Ta:!0});return NP(o,v)}(await HP(n),n.asyncQueue,e,t,r)),r.promise}function uF(n,e,t={}){const r=new Rs;return n.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new zP({next:w=>{g.su(),l.enqueueAndForget(()=>jP(o,v)),w.fromCache&&c.source==="server"?h.reject(new ke(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),v=new DP(u,g,{includeMetadataChanges:!0,Ta:!0});return NP(o,v)}(await HP(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(n,e,t){if(!t)throw new ke(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cF(n,e,t,r){if(e===!0&&r===!0)throw new ke(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function dT(n){if(!Ae.isDocumentKey(n))throw new ke(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hT(n){if(Ae.isDocumentKey(n))throw new ke(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne()}function Ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dv(n);throw new ke(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="firestore.googleapis.com",fT=!0;class pT{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GP,this.ssl=fT}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:fT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<U3)throw new ke(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ke(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ke(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ke(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new y$;switch(r.type){case"firstParty":return new _$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=cT.get(t);r&&(ve("ComponentProvider","Removing Datastore"),cT.delete(t),r.terminate())}(this),Promise.resolve()}}function dF(n,e,t,r={}){var s;const o=(n=Ir(n,Qf))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o.host!==GP&&o.host!==u&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!No(c,l)&&(n._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=dn.MOCK_USER;else{h=bC(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ke(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new dn(v)}n._authCredentials=new v$(new jC(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jf(this.firestore,e,this._query)}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class Si extends Jf{constructor(e,t,r){super(e,t,qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Ae(e))}withConverter(e){return new Si(this.firestore,e,this._path)}}function tn(n,e,...t){if(n=wt(n),KP("collection","path",e),n instanceof Qf){const r=dt.fromString(e,...t);return hT(r),new Si(n,null,r)}{if(!(n instanceof jn||n instanceof Si))throw new ke(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return hT(r),new Si(n.firestore,null,r)}}function ar(n,e,...t){if(n=wt(n),arguments.length===1&&(e=OC.newId()),KP("doc","path",e),n instanceof Qf){const r=dt.fromString(e,...t);return dT(r),new jn(n,null,new Ae(r))}{if(!(n instanceof jn||n instanceof Si))throw new ke(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return dT(r),new jn(n.firestore,n instanceof Si?n.converter:null,new Ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="AsyncQueue";class gT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new TP(this,"async_queue_retry"),this.Su=()=>{const r=_g();r&&ve(mT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=_g();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=_g();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Rs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ol(e))throw e;ve(mT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Os("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=ov.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Wo extends Qf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new gT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gT(e),this._firestoreClient=void 0,await e}}}function Mi(n,e){const t=typeof n=="object"?n:$y(),r=typeof n=="string"?n:e||lf,s=Lf(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=wC("firestore");o&&dF(s,...o)}return s}function hv(n){if(n._terminated)throw new ke(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hF(n),n._firestoreClient}function hF(n){var e,t,r;const s=n._freezeSettings(),o=function(u,c,h,g){return new L$(u,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,qP(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new iF(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tl(nn.fromBase64String(e))}catch(t){throw new ke(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tl(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=/^__.*__$/;class pF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms):new $c(e,this.data,t,this.fieldTransforms)}}class QP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ui(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class gv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new gv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return vf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(JP(this.Lu)&&fF.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class mF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||qf(e)}ju(e,t,r,s=!1){return new gv({Lu:e,methodName:t,zu:r,path:en.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yv(n){const e=n._freezeSettings(),t=qf(n._databaseId);return new mF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YP(n,e,t,r,s,o={}){const l=n.ju(o.merge||o.mergeFields?2:0,e,t,s);vv("Data must be an object, but it was:",l,r);const u=XP(r,l);let c,h;if(o.merge)c=new Wn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const w=N0(e,v,t);if(!l.contains(w))throw new ke(ae.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);eA(g,w)||g.push(w)}c=new Wn(g),h=l.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,h=l.fieldTransforms;return new pF(new Nn(u),c,h)}class Xf extends fv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}function gF(n,e,t,r){const s=n.ju(1,e,t);vv("Data must be an object, but it was:",s,r);const o=[],l=Nn.empty();Fi(r,(c,h)=>{const g=wv(e,c,t);h=wt(h);const v=s.Uu(g);if(h instanceof Xf)o.push(g);else{const w=Zf(h,v);w!=null&&(o.push(g),l.set(g,w))}});const u=new Wn(o);return new QP(l,u,s.fieldTransforms)}function yF(n,e,t,r,s,o){const l=n.ju(1,e,t),u=[N0(e,r,t)],c=[s];if(o.length%2!=0)throw new ke(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)u.push(N0(e,o[w])),c.push(o[w+1]);const h=[],g=Nn.empty();for(let w=u.length-1;w>=0;--w)if(!eA(h,u[w])){const E=u[w];let C=c[w];C=wt(C);const j=l.Uu(E);if(C instanceof Xf)h.push(E);else{const A=Zf(C,j);A!=null&&(h.push(E),g.set(E,A))}}const v=new Wn(h);return new QP(g,v,l.fieldTransforms)}function Zf(n,e){if(ZP(n=wt(n)))return vv("Unsupported field value:",e,n),XP(n,e);if(n instanceof fv)return function(r,s){if(!JP(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const u of r){let c=Zf(u,s.Ku(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(n,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Mt.fromDate(r);return{timestampValue:pf(s.serializer,o)}}if(r instanceof Mt){const o=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pf(s.serializer,o)}}if(r instanceof pv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tl)return{bytesValue:fP(s.serializer,r._byteString)};if(r instanceof jn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Yy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mv)return function(l,u){return{mapValue:{fields:{[zC]:{stringValue:WC},[uf]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return Ky(u.serializer,h)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${dv(r)}`)}(n,e)}function XP(n,e){const t={};return MC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(n,(r,s)=>{const o=Zf(s,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ZP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof pv||n instanceof Tl||n instanceof jn||n instanceof fv||n instanceof mv)}function vv(n,e,t){if(!ZP(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=dv(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function N0(n,e,t){if((e=wt(e))instanceof Yf)return e._internalPath;if(typeof e=="string")return wv(n,e);throw vf("Field path arguments must be of type string or ",n,!1,void 0,t)}const vF=new RegExp("[~\\*/\\[\\]]");function wv(n,e,t){if(e.search(vF)>=0)throw vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yf(...e.split("."))._internalPath}catch{throw vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vf(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${r}`),l&&(c+=` in document ${s}`),c+=")"),new ke(ae.INVALID_ARGUMENT,u+n+c)}function eA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nA("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wF extends tA{data(){return super.data()}}function nA(n,e){return typeof e=="string"?wv(n,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _F{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Fi(e,(s,o)=>{r[s]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,s;const o=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[uf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>kt(l.doubleValue));return new mv(o)}convertGeoPoint(e){return new pv(kt(e.latitude),kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=$f(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const t=Ni(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);Je(wP(r));const s=new bc(r.get(1),r.get(3)),o=new Ae(r.popFirst(5));return s.isEqual(t)||Os(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sA extends tA{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Fh extends sA{data(e={}){return super.data(e)}}class bF{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ju(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Fh(this._firestore,this._userDataWriter,r.key,r,new Ju(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const c=new Fh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ju(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Fh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ju(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:EF(u.type),doc:c,oldIndex:h,newIndex:g}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n){n=Ir(n,jn);const e=Ir(n.firestore,Wo);return lF(hv(e),n._key).then(t=>TF(e,n,t))}class iA extends _F{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function ur(n){n=Ir(n,Jf);const e=Ir(n.firestore,Wo),t=hv(e),r=new iA(e);return xF(n._query),uF(t,n._query).then(s=>new bF(e,r,n,s))}function xv(n,e,t){n=Ir(n,jn);const r=Ir(n.firestore,Wo),s=rA(n.converter,e,t);return tp(r,[YP(yv(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,lr.none())])}function yT(n,e,t,...r){n=Ir(n,jn);const s=Ir(n.firestore,Wo),o=yv(s);let l;return l=typeof(e=wt(e))=="string"||e instanceof Yf?yF(o,"updateDoc",n._key,e,t,r):gF(o,"updateDoc",n._key,e),tp(s,[l.toMutation(n._key,lr.exists(!0))])}function Uh(n){return tp(Ir(n.firestore,Wo),[new Gy(n._key,lr.none())])}function kc(n,e){const t=Ir(n.firestore,Wo),r=ar(n),s=rA(n.converter,e);return tp(t,[YP(yv(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}function tp(n,e){return function(r,s){const o=new Rs;return r.asyncQueue.enqueueAndForget(async()=>J6(await aF(r),s,o)),o.promise}(hv(n),e)}function TF(n,e,t){const r=t.docs.get(e._key),s=new iA(n);return new sA(n,s,e._key,r,new Ju(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){jl=s})(Uo),jo(new Ii("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new Wo(new w$(r.getProvider("auth-internal")),new b$(l,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bc(h.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Jr(bE,EE,e),Jr(bE,EE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firebasestorage.googleapis.com",aA="storageBucket",SF=2*60*1e3,kF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends rs{constructor(e,t,r=0){super(Eg(e),`Firebase Storage: ${t} (${Eg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function Eg(n){return"storage/"+n}function _v(){const n="An unknown error occurred, please check the error payload for server response.";return new _t(xt.UNKNOWN,n)}function CF(n){return new _t(xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function PF(n){return new _t(xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(xt.UNAUTHENTICATED,n)}function IF(){return new _t(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RF(n){return new _t(xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function NF(){return new _t(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jF(){return new _t(xt.CANCELED,"User canceled the upload/download.")}function DF(n){return new _t(xt.INVALID_URL,"Invalid URL '"+n+"'.")}function OF(n){return new _t(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function LF(){return new _t(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aA+"' property when initializing the app?")}function MF(){return new _t(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function VF(){return new _t(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $F(n){return new _t(xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function j0(n){return new _t(xt.INVALID_ARGUMENT,n)}function lA(){return new _t(xt.APP_DELETED,"The Firebase app was deleted.")}function FF(n){return new _t(xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lc(n,e){return new _t(xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Fu(n){throw new _t(xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Hn.makeFromUrl(e,t)}catch{return new Hn(e,"")}if(r.path==="")return r;throw OF(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),c={bucket:1,path:3};function h(W){W.path_=decodeURIComponent(W.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",E=new RegExp(`^https?://${v}/${g}/b/${s}/o${w}`,"i"),C={bucket:1,path:3},j=t===oA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",D=new RegExp(`^https?://${j}/${s}/${A}`,"i"),$=[{regex:u,indices:c,postModify:o},{regex:E,indices:C,postModify:h},{regex:D,indices:{bucket:1,path:2},postModify:h}];for(let W=0;W<$.length;W++){const H=$[W],F=H.regex.exec(e);if(F){const I=F[H.indices.bucket];let b=F[H.indices.path];b||(b=""),r=new Hn(I,b),H.postModify(r);break}}if(r==null)throw DF(e);return r}}class UF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(n,e,t){let r=1,s=null,o=null,l=!1,u=0;function c(){return u===2}let h=!1;function g(...A){h||(h=!0,e.apply(null,A))}function v(A){s=setTimeout(()=>{s=null,n(E,c())},A)}function w(){o&&clearTimeout(o)}function E(A,...D){if(h){w();return}if(A){w(),g.call(null,A,...D);return}if(c()||l){w(),g.call(null,A,...D);return}r<64&&(r*=2);let $;u===1?(u=2,$=0):$=(r+Math.random())*1e3,v($)}let C=!1;function j(A){C||(C=!0,w(),!h&&(s!==null?(A||(u=2),clearTimeout(s),v(0)):A||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,j(!0)},t),j}function zF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(n){return n!==void 0}function HF(n){return typeof n=="object"&&!Array.isArray(n)}function bv(n){return typeof n=="string"||n instanceof String}function vT(n){return Ev()&&n instanceof Blob}function Ev(){return typeof Blob<"u"}function wT(n,e,t,r){if(r<e)throw j0(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw j0(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function uA(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ro;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ro||(Ro={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t,r,s,o,l,u,c,h,g,v,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,C)=>{this.resolve_=E,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new kh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===Ro.NO_ERROR,c=o.getStatus();if(!u||qF(c,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===Ro.ABORT;r(!1,new kh(!1,null,g));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new kh(h,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());WF(c)?o(c):o()}catch(c){l(c)}else if(u!==null){const c=_v();c.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,c)):l(c)}else if(s.canceled){const c=this.appDelete_?lA():jF();l(c)}else{const c=NF();l(c)}};this.canceled_?t(!1,new kh(!1,null,!0)):this.backoffId_=BF(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&zF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function GF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function QF(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function JF(n,e){e&&(n["X-Firebase-GMPID"]=e)}function YF(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function XF(n,e,t,r,s,o,l=!0){const u=uA(n.urlParams),c=n.url+u,h=Object.assign({},n.headers);return JF(h,e),GF(h,t),QF(h,o),YF(h,r),new KF(c,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function eU(...n){const e=ZF();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ev())return new Blob(n);throw new _t(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(n){if(typeof atob>"u")throw $F("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tg{constructor(e,t){this.data=e,this.contentType=t||null}}function rU(n,e){switch(n){case Kr.RAW:return new Tg(cA(e));case Kr.BASE64:case Kr.BASE64URL:return new Tg(dA(n,e));case Kr.DATA_URL:return new Tg(iU(e),oU(e))}throw _v()}function cA(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sU(n){let e;try{e=decodeURIComponent(n)}catch{throw lc(Kr.DATA_URL,"Malformed data URL.")}return cA(e)}function dA(n,e){switch(n){case Kr.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw lc(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Kr.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw lc(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=nU(e)}catch(s){throw s.message.includes("polyfill")?s:lc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class hA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw lc(Kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=aU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function iU(n){const e=new hA(n);return e.base64?dA(Kr.BASE64,e.rest):sU(e.rest)}function oU(n){return new hA(n).contentType}function aU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t){let r=0,s="";vT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(vT(this.data_)){const r=this.data_,s=tU(r,e,t);return s===null?null:new gi(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new gi(r,!0)}}static getBlob(...e){if(Ev()){const t=e.map(r=>r instanceof gi?r.data_:r);return new gi(eU.apply(null,t))}else{const t=e.map(l=>bv(l)?rU(Kr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new gi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n){let e;try{e=JSON.parse(n)}catch{return null}return HF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function uU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function pA(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(n,e){return e}class wn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||cU}}let Ch=null;function dU(n){return!bv(n)||n.length<2?n:pA(n)}function mA(){if(Ch)return Ch;const n=[];n.push(new wn("bucket")),n.push(new wn("generation")),n.push(new wn("metageneration")),n.push(new wn("name","fullPath",!0));function e(o,l){return dU(l)}const t=new wn("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const s=new wn("size");return s.xform=r,n.push(s),n.push(new wn("timeCreated")),n.push(new wn("updated")),n.push(new wn("md5Hash",null,!0)),n.push(new wn("cacheControl",null,!0)),n.push(new wn("contentDisposition",null,!0)),n.push(new wn("contentEncoding",null,!0)),n.push(new wn("contentLanguage",null,!0)),n.push(new wn("contentType",null,!0)),n.push(new wn("metadata","customMetadata",!0)),Ch=n,Ch}function hU(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Hn(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function fU(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return hU(r,n),r}function gA(n,e,t){const r=fA(e);return r===null?null:fU(n,r,t)}function pU(n,e,t,r){const s=fA(e);if(s===null||!bv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(h=>{const g=n.bucket,v=n.fullPath,w="/b/"+l(g)+"/o/"+l(v),E=np(w,t,r),C=uA({alt:"media",token:h});return E+C})[0]}function mU(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Tv{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n){if(!n)throw _v()}function gU(n,e){function t(r,s){const o=gA(n,s,e);return yA(o!==null),o}return t}function yU(n,e){function t(r,s){const o=gA(n,s,e);return yA(o!==null),pU(o,s,n.host,n._protocol)}return t}function vA(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=IF():s=AF():t.getStatus()===402?s=PF(n.bucket):t.getStatus()===403?s=RF(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function wA(n){const e=vA(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=CF(n.path)),o.serverResponse=s.serverResponse,o}return t}function vU(n,e,t){const r=e.fullServerUrl(),s=np(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,u=new Tv(s,o,yU(n,t),l);return u.errorHandler=wA(e),u}function wU(n,e){const t=e.fullServerUrl(),r=np(t,n.host,n._protocol),s="DELETE",o=n.maxOperationRetryTime;function l(c,h){}const u=new Tv(r,s,l,o);return u.successCodes=[200,204],u.errorHandler=wA(e),u}function xU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function _U(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=xU(null,e)),r}function bU(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let $="";for(let W=0;W<2;W++)$=$+Math.random().toString().slice(2);return $}const c=u();l["Content-Type"]="multipart/related; boundary="+c;const h=_U(e,r,s),g=mU(h,t),v="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,w=`\r
--`+c+"--",E=gi.getBlob(v,r,w);if(E===null)throw MF();const C={name:h.fullPath},j=np(o,n.host,n._protocol),A="POST",D=n.maxUploadRetryTime,V=new Tv(j,A,gU(n,t),D);return V.urlParams=C,V.headers=l,V.body=E.uploadData(),V.errorHandler=vA(e),V}class EU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw Fu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class TU extends EU{initXhr(){this.xhr_.responseType="text"}}function Sv(){return new TU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,t){this._service=e,t instanceof Hn?this._location=t:this._location=Hn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lo(e,t)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pA(this._location.path)}get storage(){return this._service}get parent(){const e=lU(this._location.path);if(e===null)return null;const t=new Hn(this._location.bucket,e);return new Lo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw FF(e)}}function SU(n,e,t){n._throwIfRoot("uploadBytes");const r=bU(n.storage,n._location,mA(),new gi(e,!0),t);return n.storage.makeRequestWithTokens(r,Sv).then(s=>({metadata:s,ref:n}))}function kU(n){n._throwIfRoot("getDownloadURL");const e=vU(n.storage,n._location,mA());return n.storage.makeRequestWithTokens(e,Sv).then(t=>{if(t===null)throw VF();return t})}function CU(n){n._throwIfRoot("deleteObject");const e=wU(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Sv)}function PU(n,e){const t=uU(n._location.path,e),r=new Hn(n._location.bucket,t);return new Lo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(n){return/^[A-Za-z]+:\/\//.test(n)}function IU(n,e){return new Lo(n,e)}function xA(n,e){if(n instanceof kv){const t=n;if(t._bucket==null)throw LF();const r=new Lo(t,t._bucket);return e!=null?xA(r,e):r}else return e!==void 0?PU(n,e):n}function RU(n,e){if(e&&AU(e)){if(n instanceof kv)return IU(n,e);throw j0("To use ref(service, url), the first argument must be a Storage instance.")}else return xA(n,e)}function xT(n,e){const t=e==null?void 0:e[aA];return t==null?null:Hn.makeFromBucketSpec(t,n)}function NU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:bC(s,n.app.options.projectId))}class kv{constructor(e,t,r,s,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=oA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SF,this._maxUploadRetryTime=kF,this._requests=new Set,s!=null?this._bucket=Hn.makeFromBucketSpec(s,this._host):this._bucket=xT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=xT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lo(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new UF(lA());{const l=XF(e,this._appId,r,s,t,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const _T="@firebase/storage",bT="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="storage";function jU(n,e,t){return n=wt(n),SU(n,e,t)}function DU(n){return n=wt(n),kU(n)}function ET(n){return n=wt(n),CU(n)}function Sg(n,e){return n=wt(n),RU(n,e)}function OU(n=$y(),e){n=wt(n);const r=Lf(n,_A).getImmediate({identifier:e}),s=wC("storage");return s&&LU(r,...s),r}function LU(n,e,t,r={}){NU(n,e,t,r)}function MU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new kv(t,r,s,e,Uo)}function VU(){jo(new Ii(_A,MU,"PUBLIC").setMultipleInstances(!0)),Jr(_T,bT,""),Jr(_T,bT,"esm2017")}VU();function Cv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $U=bA,EA=new Mc("auth","Firebase",bA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Ly("@firebase/auth");function FU(n,...e){wf.logLevel<=Ue.WARN&&wf.warn(`Auth (${Uo}): ${n}`,...e)}function Bh(n,...e){wf.logLevel<=Ue.ERROR&&wf.error(`Auth (${Uo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(n,...e){throw Pv(n,...e)}function Zr(n,...e){return Pv(n,...e)}function TA(n,e,t){const r=Object.assign(Object.assign({},$U()),{[e]:t});return new Mc("auth","Firebase",r).create(e,{appName:n.name})}function ki(n){return TA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return EA.create(n,...e)}function Re(n,e,...t){if(!n)throw Pv(e,...t)}function Ss(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bh(e),new Error(e)}function Ms(n,e){n||Ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UU(){return TT()==="http:"||TT()==="https:"}function TT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UU()||GM()||"connection"in navigator)?navigator.onLine:!0}function zU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ms(t>e,"Short delay should be less than long delay!"),this.isMobile=HM()||QM()}get(){return BU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n,e){Ms(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=new zc(3e4,6e4);function Ho(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Bi(n,e,t,r,s={}){return kA(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Vc(Object.assign({key:n.config.apiKey},l)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:c},o);return KM()||(h.referrerPolicy="no-referrer"),SA.fetch()(CA(n,n.config.apiHost,t,u),h)})}async function kA(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},WU),e);try{const s=new KU(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ph(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(n,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw Ph(n,"email-already-in-use",l);if(c==="USER_DISABLED")throw Ph(n,"user-disabled",l);const g=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TA(n,g,h);Rr(n,g)}}catch(s){if(s instanceof rs)throw s;Rr(n,"network-request-failed",{message:String(s)})}}async function rp(n,e,t,r,s={}){const o=await Bi(n,e,t,r,s);return"mfaPendingCredential"in o&&Rr(n,"multi-factor-auth-required",{_serverResponse:o}),o}function CA(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Av(n.config,s):`${n.config.apiScheme}://${s}`}function qU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),HU.get())})}}function Ph(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Zr(n,e,r);return s.customData._tokenResponse=t,s}function ST(n){return n!==void 0&&n.enterprise!==void 0}class GU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function QU(n,e){return Bi(n,"GET","/v2/recaptchaConfig",Ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JU(n,e){return Bi(n,"POST","/v1/accounts:delete",e)}async function PA(n,e){return Bi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YU(n,e=!1){const t=wt(n),r=await t.getIdToken(e),s=Iv(r);Re(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:uc(kg(s.auth_time)),issuedAtTime:uc(kg(s.iat)),expirationTime:uc(kg(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function kg(n){return Number(n)*1e3}function Iv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const s=yC(t);return s?JSON.parse(s):(Bh("Failed to decode base64 JWT payload"),null)}catch(s){return Bh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kT(n){const e=Iv(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rs&&XU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function XU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Cc(n,PA(t,{idToken:r}));Re(s==null?void 0:s.users.length,t,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AA(o.providerUserInfo):[],u=t8(n.providerData,l),c=n.isAnonymous,h=!(n.email&&o.passwordHash)&&!(u!=null&&u.length),g=c?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new O0(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function e8(n){const e=wt(n);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function t8(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function AA(n){return n.map(e=>{var{providerId:t}=e,r=Cv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n8(n,e){const t=await kA(n,{},async()=>{const r=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=CA(n,s,"/v1/token",`key=${o}`),u=await n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",SA.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function r8(n,e){return Bi(n,"POST","/v2/accounts:revokeToken",Ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=kT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await n8(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new ll;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ll,this.toJSON())}_performRefresh(){return Ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ks{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,o=Cv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new O0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Cc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YU(this,e)}reload(){return e8(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ks(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(ki(this.auth));const e=await this.getIdToken();return await Cc(this,JU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,o,l,u,c,h,g;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,E=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,C=(l=t.photoURL)!==null&&l!==void 0?l:void 0,j=(u=t.tenantId)!==null&&u!==void 0?u:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,D=(h=t.createdAt)!==null&&h!==void 0?h:void 0,V=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:W,isAnonymous:H,providerData:F,stsTokenManager:I}=t;Re($&&I,e,"internal-error");const b=ll.fromJSON(this.name,I);Re(typeof $=="string",e,"internal-error"),ci(v,e.name),ci(w,e.name),Re(typeof W=="boolean",e,"internal-error"),Re(typeof H=="boolean",e,"internal-error"),ci(E,e.name),ci(C,e.name),ci(j,e.name),ci(A,e.name),ci(D,e.name),ci(V,e.name);const S=new ks({uid:$,auth:e,email:w,emailVerified:W,displayName:v,isAnonymous:H,photoURL:C,phoneNumber:E,tenantId:j,stsTokenManager:b,createdAt:D,lastLoginAt:V});return F&&Array.isArray(F)&&(S.providerData=F.map(R=>Object.assign({},R))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,t,r=!1){const s=new ll;s.updateFromServerResponse(t);const o=new ks({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Re(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?AA(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new ll;u.updateFromIdToken(r);const c=new ks({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new O0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=new Map;function Cs(n){Ms(n instanceof Function,"Expected a class definition");let e=CT.get(n);return e?(Ms(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,CT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}IA.type="NONE";const PT=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(n,e,t){return`firebase:${n}:${e}:${t}`}class ul{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=zh(this.userKey,s.apiKey,o),this.fullPersistenceKey=zh("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ks._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new ul(Cs(PT),e,r);const s=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||Cs(PT);const l=zh(r,e.config.apiKey,e.name);let u=null;for(const h of t)try{const g=await h._get(l);if(g){const v=ks._fromJSON(e,g);h!==o&&(u=v),o=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new ul(o,e,r):(o=c[0],u&&await o._set(l,u.toJSON()),await Promise.all(t.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new ul(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LA(e))return"Blackberry";if(MA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||jA(e))&&!e.includes("edge/"))return"Chrome";if(OA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RA(n=pn()){return/firefox\//i.test(n)}function NA(n=pn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jA(n=pn()){return/crios\//i.test(n)}function DA(n=pn()){return/iemobile/i.test(n)}function OA(n=pn()){return/android/i.test(n)}function LA(n=pn()){return/blackberry/i.test(n)}function MA(n=pn()){return/webos/i.test(n)}function Rv(n=pn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function s8(n=pn()){var e;return Rv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i8(){return JM()&&document.documentMode===10}function VA(n=pn()){return Rv(n)||OA(n)||MA(n)||LA(n)||/windows phone/i.test(n)||DA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(n,e=[]){let t;switch(n){case"Browser":t=AT(pn());break;case"Worker":t=`${AT(pn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,u)=>{try{const c=e(o);l(c)}catch(c){u(c)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(n,e={}){return Bi(n,"GET","/v2/passwordPolicy",Ho(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=6;class u8{constructor(e){var t,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:l8,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,o,l,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNumericCharacter)!==null&&l!==void 0?l:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new IT(this),this.idTokenSubscription=new IT(this),this.beforeStateQueue=new o8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cs(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ul.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await PA(this,{idToken:e}),r=await ks._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===u)&&(c!=null&&c.user)&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=zU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(ki(this));const t=e?wt(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a8(this),t=new u8(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await r8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cs(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await ul.create(this,[Cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,s);return()=>{l=!0,c()}}else{const c=e.addObserver(t);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&FU(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ml(n){return wt(n)}class IT{constructor(e){this.auth=e,this.observer=null,this.addObserver=sV(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d8(n){sp=n}function FA(n){return sp.loadJS(n)}function h8(){return sp.recaptchaEnterpriseScript}function f8(){return sp.gapiScript}function p8(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class m8{constructor(){this.enterprise=new g8}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class g8{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const y8="recaptcha-enterprise",UA="NO_RECAPTCHA";class v8{constructor(e){this.type=y8,this.auth=Ml(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{QU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new GU(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(c=>{u(c)})})}function s(o,l,u){const c=window.grecaptcha;ST(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(UA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new m8().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!t&&ST(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let c=h8();c.length!==0&&(c+=u),FA(c).then(()=>{s(u,o,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function RT(n,e,t,r=!1,s=!1){const o=new v8(n);let l;if(s)l=UA;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function NT(n,e,t,r,s){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await RT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await RT(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(n,e){const t=Lf(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(No(o,e??{}))return s;Rr(s,"already-initialized")}return t.initialize({options:e})}function x8(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Cs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _8(n,e,t){const r=Ml(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=BA(e),{host:l,port:u}=b8(e),c=u===null?"":`:${u}`,h={url:`${o}//${l}${c}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(No(h,r.config.emulator)&&No(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,E8()}function BA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function b8(n){const e=BA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:jT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:jT(l)}}}function jT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function E8(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ss("not implemented")}_getIdTokenResponse(e){return Ss("not implemented")}_linkToIdToken(e,t){return Ss("not implemented")}_getReauthenticationResolver(e){return Ss("not implemented")}}async function T8(n,e){return Bi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(n,e){return rp(n,"POST","/v1/accounts:signInWithPassword",Ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8(n,e){return rp(n,"POST","/v1/accounts:signInWithEmailLink",Ho(n,e))}async function C8(n,e){return rp(n,"POST","/v1/accounts:signInWithEmailLink",Ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Nv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NT(e,t,"signInWithPassword",S8);case"emailLink":return k8(e,{email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NT(e,r,"signUpPassword",T8);case"emailLink":return C8(e,{idToken:t,email:this._email,oobCode:this._password});default:Rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(n,e){return rp(n,"POST","/v1/accounts:signInWithIdp",Ho(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8="http://localhost";class Mo extends Nv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,o=Cv(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new Mo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return cl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,cl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,cl(e,t)}buildRequest(){const e={requestUri:P8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function I8(n){const e=Hu(qu(n)).link,t=e?Hu(qu(e)).deep_link_id:null,r=Hu(qu(n)).deep_link_id;return(r?Hu(qu(r)).link:null)||r||t||e||n}class jv{constructor(e){var t,r,s,o,l,u;const c=Hu(qu(e)),h=(t=c.apiKey)!==null&&t!==void 0?t:null,g=(r=c.oobCode)!==null&&r!==void 0?r:null,v=A8((s=c.mode)!==null&&s!==void 0?s:null);Re(h&&g&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=g,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=c.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const t=I8(e);try{return new jv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.providerId=Vl.PROVIDER_ID}static credential(e,t){return Pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=jv.parseLink(t);return Re(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}Vl.PROVIDER_ID="password";Vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends Wc{constructor(){super("facebook.com")}static credential(e){return Mo._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends Wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mo._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return vi.credential(t,r)}catch{return null}}}vi.GOOGLE_SIGN_IN_METHOD="google.com";vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Wc{constructor(){super("github.com")}static credential(e){return Mo._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Wc{constructor(){super("twitter.com")}static credential(e,t){return Mo._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return xi.credential(t,r)}catch{return null}}}xi.TWITTER_SIGN_IN_METHOD="twitter.com";xi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ks._fromIdTokenResponse(e,r,s),l=DT(r);return new Sl({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=DT(r);return new Sl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function DT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends rs{constructor(e,t,r,s){var o;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,_f.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new _f(e,t,r,s)}}function WA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_f._fromErrorAndOperation(n,o,e,r):o})}async function R8(n,e,t=!1){const r=await Cc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(n,e,t=!1){const{auth:r}=n;if(or(r.app))return Promise.reject(ki(r));const s="reauthenticate";try{const o=await Cc(n,WA(r,s,e,n),t);Re(o.idToken,r,"internal-error");const l=Iv(o.idToken);Re(l,r,"internal-error");const{sub:u}=l;return Re(n.uid===u,r,"user-mismatch"),Sl._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Rr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(n,e,t=!1){if(or(n.app))return Promise.reject(ki(n));const r="signIn",s=await WA(n,r,e),o=await Sl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function j8(n,e){return HA(Ml(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D8(n){const e=Ml(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function O8(n,e,t){return or(n.app)?Promise.reject(ki(n)):j8(wt(n),Vl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D8(n),r})}function L8(n,e,t,r){return wt(n).onIdTokenChanged(e,t,r)}function M8(n,e,t){return wt(n).beforeAuthStateChanged(e,t)}function ip(n,e,t,r){return wt(n).onAuthStateChanged(e,t,r)}function op(n){return wt(n).signOut()}const bf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(bf,"1"),this.storage.removeItem(bf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=1e3,$8=10;class KA extends qA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,u,c)=>{this.notifyListeners(l,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);i8()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$8):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},V8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}KA.type="LOCAL";const F8=KA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends qA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}GA.type="SESSION";const QA=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ap(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async h=>h(t.origin,o)),c=await U8(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ap.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,c)=>{const h=Dv("",20);s.port1.start();const g=setTimeout(()=>{c(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const w=v;if(w.data.eventId===h)switch(w.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(w.data.response);break;default:clearTimeout(g),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function z8(n){es().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function W8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function H8(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function q8(){return JA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebaseLocalStorageDb",K8=1,Ef="firebaseLocalStorage",XA="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lp(n,e){return n.transaction([Ef],e?"readwrite":"readonly").objectStore(Ef)}function G8(){const n=indexedDB.deleteDatabase(YA);return new Hc(n).toPromise()}function L0(){const n=indexedDB.open(YA,K8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Ef,{keyPath:XA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Ef)?e(r):(r.close(),await G8(),e(await L0()))})})}async function OT(n,e,t){const r=lp(n,!0).put({[XA]:e,value:t});return new Hc(r).toPromise()}async function Q8(n,e){const t=lp(n,!1).get(e),r=await new Hc(t).toPromise();return r===void 0?null:r.value}function LT(n,e){const t=lp(n,!0).delete(e);return new Hc(t).toPromise()}const J8=800,Y8=3;class ZA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await L0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Y8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ap._getInstance(q8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await W8(),!this.activeServiceWorker)return;this.sender=new B8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||H8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await L0();return await OT(e,bf,"1"),await LT(e,bf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>OT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Q8(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>LT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=lp(s,!1).getAll();return new Hc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),J8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZA.type="LOCAL";const X8=ZA;new zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(n,e){return e?Cs(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Nv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e9(n){return HA(n.auth,new Ov(n),n.bypassAuthState)}function t9(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),N8(t,new Ov(n),n.bypassAuthState)}async function n9(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),R8(t,new Ov(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e9;case"linkViaPopup":case"linkViaRedirect":return n9;case"reauthViaPopup":case"reauthViaRedirect":return t9;default:Rr(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=new zc(2e3,1e4);class rl extends e1{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,rl.currentPopupAction&&rl.currentPopupAction.cancel(),rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=Dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r9.get())};e()}}rl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="pendingRedirect",Wh=new Map;class i9 extends e1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Wh.get(this.auth._key());if(!e){try{const r=await o9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wh.set(this.auth._key(),e)}return this.bypassAuthState||Wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o9(n,e){const t=u9(e),r=l9(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function a9(n,e){Wh.set(n._key(),e)}function l9(n){return Cs(n._redirectPersistence)}function u9(n){return zh(s9,n.config.apiKey,n.name)}async function c9(n,e,t=!1){if(or(n.app))return Promise.reject(ki(n));const r=Ml(n),s=Z8(r,e),l=await new i9(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=10*60*1e3;class h9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f9(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!t1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d9&&this.cachedEventUids.clear(),this.cachedEventUids.has(MT(e))}saveEventToCache(e){this.cachedEventUids.add(MT(e)),this.lastProcessedEventTime=Date.now()}}function MT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function t1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f9(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p9(n,e={}){return Bi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g9=/^https?/;async function y9(n){if(n.config.emulator)return;const{authorizedDomains:e}=await p9(n);for(const t of e)try{if(v9(t))return}catch{}Rr(n,"unauthorized-domain")}function v9(n){const e=D0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!g9.test(t))return!1;if(m9.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9=new zc(3e4,6e4);function VT(){const n=es().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function x9(n){return new Promise((e,t)=>{var r,s,o;function l(){VT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VT(),t(Zr(n,"network-request-failed"))},timeout:w9.get()})}if(!((s=(r=es().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=es().gapi)===null||o===void 0)&&o.load)l();else{const u=p8("iframefcb");return es()[u]=()=>{gapi.load?l():t(Zr(n,"network-request-failed"))},FA(`${f8()}?onload=${u}`).catch(c=>t(c))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function _9(n){return Hh=Hh||x9(n),Hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=new zc(5e3,15e3),E9="__/auth/iframe",T9="emulator/auth/iframe",S9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C9(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Av(e,T9):`https://${n.config.authDomain}/${E9}`,r={apiKey:e.apiKey,appName:n.name,v:Uo},s=k9.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Vc(r).slice(1)}`}async function P9(n){const e=await _9(n),t=es().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:C9(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S9,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Zr(n,"network-request-failed"),u=es().setTimeout(()=>{o(l)},b9.get());function c(){es().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},I9=500,R9=600,N9="_blank",j9="http://localhost";class $T{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D9(n,e,t,r=I9,s=R9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},A9),{width:r.toString(),height:s.toString(),top:o,left:l}),h=pn().toLowerCase();t&&(u=jA(h)?N9:t),RA(h)&&(e=e||j9,c.scrollbars="yes");const g=Object.entries(c).reduce((w,[E,C])=>`${w}${E}=${C},`,"");if(s8(h)&&u!=="_self")return O9(e||"",u),new $T(null);const v=window.open(e||"",u,g);Re(v,n,"popup-blocked");try{v.focus()}catch{}return new $T(v)}function O9(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9="__/auth/handler",M9="emulator/auth/handler",V9=encodeURIComponent("fac");async function FT(n,e,t,r,s,o){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Uo,eventId:s};if(e instanceof zA){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",rV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof Wc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const c=await n._getAppCheckToken(),h=c?`#${V9}=${encodeURIComponent(c)}`:"";return`${$9(n)}?${Vc(u).slice(1)}${h}`}function $9({config:n}){return n.emulator?Av(n,M9):`https://${n.authDomain}/${L9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="webStorageSupport";class F9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QA,this._completeRedirectFn=c9,this._overrideRedirectResult=a9}async _openPopup(e,t,r,s){var o;Ms((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await FT(e,t,r,D0(),s);return D9(e,l,Dv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await FT(e,t,r,D0(),s);return z8(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Ms(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await P9(e),r=new h9(e);return t.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cg,{type:Cg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Cg];l!==void 0&&t(!!l),Rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=y9(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return VA()||NA()||Rv()}}const U9=F9;var UT="@firebase/auth",BT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z9(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W9(n){jo(new Ii("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:l,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$A(n)},h=new c8(r,s,o,c);return x8(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jo(new Ii("auth-internal",e=>{const t=Ml(e.getProvider("auth").getImmediate());return(r=>new B9(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(UT,BT,z9(n)),Jr(UT,BT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=5*60,q9=_C("authIdTokenMaxAge")||H9;let zT=null;const K9=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>q9)return;const s=t==null?void 0:t.token;zT!==s&&(zT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function G9(n=$y()){const e=Lf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=w8(n,{popupRedirectResolver:U9,persistence:[X8,F8,QA]}),r=_C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=K9(o.toString());M8(t,l,()=>l(t.currentUser)),L8(t,u=>l(u))}}const s=vC("auth");return s&&_8(t,`http://${s}`),t}function Q9(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}d8({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Zr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",Q9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W9("Browser");console.log("initializeApp:",typeof Vy);console.log("getFirestore:",typeof Mi);const J9={apiKey:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",authDomain:"aussie-gut-pack.firebaseapp.com",projectId:"aussie-gut-pack",storageBucket:"aussie-gut-pack.firebasestorage.app",messagingSenderId:"834797498886",appId:"1:834797498886:web:cb2f88ab4523480400c987"},up=Vy(J9);console.log("Firebase app:",up);const St=Mi(up);console.log("Firestore db:",St);const Pg=OU(up),Ns=G9(up);function Y9(){const{isDarkMode:n}=P.useContext(Ze),e=P.useRef(null),t=P.useRef(null),r=jr(),[s,o]=P.useState(!1),[l,u]=P.useState(!1),[c,h]=P.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[g,v]=P.useState(0),[w,E]=P.useState(null),[C,j]=P.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);P.useEffect(()=>{(async()=>{var re,he;const b=ar(St,"content","home"),S=await ep(b);let R={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"because your dog is demanding breakfast, but because you actually feel good. Were obsessed with gut health, movement, and all the little things that keep your body running like a well-oiled machine (or at least a decently maintained bicycle). Because lets be realwhen your digestion is on point and your energy isnt tanking by noon, life is just better. So whether youre here for the health tips, Aussie Shepherd appreciation, or just to figure out why youre tired again, welcome to the party. Lets make wellness feel less like a chore and more like an adventure.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin."],lastUpdated:null};if(S.exists()){const Se=S.data();R={...R,...Se,currentWorkout:{...R.currentWorkout,...Se.currentWorkout,warmup:((re=Se.currentWorkout)==null?void 0:re.warmup)||R.currentWorkout.warmup,main:((he=Se.currentWorkout)==null?void 0:he.main)||R.currentWorkout.main},scheduledWorkouts:Se.scheduledWorkouts||[],dailyChallenges:Se.dailyChallenges||R.dailyChallenges}}const M=new Date,B=[...R.scheduledWorkouts];let O=!1;if(B.sort((Se,we)=>new Date(Se.updateDateTime)-new Date(we.updateDateTime)),B.length>0){const Se=B[0],we=new Date(Se.updateDateTime);M>=we&&(!R.lastUpdated||new Date(R.lastUpdated)<we)&&(R.currentWorkout={description:Se.description||"",warmup:Se.warmup||[],main:Se.main||[]},B.shift(),R.scheduledWorkouts=B,R.lastUpdated=M.toISOString(),O=!0)}O&&await xv(b,R,{merge:!0}),h(R);try{const Se=tn(St,"content","blog","posts"),le=(await ur(Se)).docs.map(me=>({id:me.id,...me.data()}));if(le.length>0){le.sort((K,ee)=>new Date(ee.date)-new Date(K.date));const me=le[0],fe=A(me);E({...me,excerpt:fe})}else E({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}catch(Se){console.error("Error fetching blog posts:",Se),E({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}})()},[]),console.log("Supabase client initialized:",Rn);const A=I=>{if(!I||!I.blocks||I.blocks.length===0)return"Read more...";const b=I.blocks.find(S=>S.type==="paragraph"||S.type==="list"||S.type==="bullet");return b?b.type==="paragraph"&&b.content?b.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(b.content)&&b.content.length>0?b.content[0]+(b.content.length>1?"...":""):"Read more...":"Read more..."};P.useEffect(()=>{const I=new IntersectionObserver(b=>{b.forEach(S=>{const R=S.isIntersecting;S.target===e.current&&o(R),S.target===t.current&&u(R)})},{threshold:.2});return e.current&&I.observe(e.current),t.current&&I.observe(t.current),()=>{e.current&&I.unobserve(e.current),t.current&&I.unobserve(t.current)}},[]),P.useEffect(()=>{const I=setInterval(()=>{v(b=>(b+1)%c.quotes.length)},4e3);return()=>clearInterval(I)},[c.quotes.length]),P.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(C))},[C]);const D={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},V={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},$=I=>{j(b=>b.includes(I)?b.filter(S=>S!==I):[...b,I])},W=c.dailyChallenges.length>0&&C.length===c.dailyChallenges.length&&c.dailyChallenges.every((I,b)=>C.includes(b)),H="https://aussiegutpack.com",F=`${H}${r.pathname==="/"?"":r.pathname}`;return p.jsxs(p.Fragment,{children:[p.jsxs(kN,{children:[p.jsx("title",{children:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),p.jsx("meta",{name:"description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),p.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Aussie Gut Pack"}),p.jsx("meta",{name:"robots",content:"index, follow"}),p.jsx("meta",{property:"og:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),p.jsx("meta",{property:"og:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),p.jsx("meta",{property:"og:type",content:"website"}),p.jsx("meta",{property:"og:url",content:F}),p.jsx("meta",{property:"og:image",content:`${H}/images/og-image.jpg`}),p.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),p.jsx("meta",{name:"twitter:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),p.jsx("meta",{name:"twitter:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),p.jsx("meta",{name:"twitter:image",content:`${H}/images/og-image.jpg`}),w&&p.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:w.title,datePublished:w.date,description:w.excerpt,author:{"@type":"Organization",name:"Aussie Gut Pack"},publisher:{"@type":"Organization",name:"Aussie Gut Pack",logo:{"@type":"ImageObject",url:`${H}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${H}/blog/${w.id}`}})})]}),p.jsxs("main",{id:"main-content",className:`min-h-screen flex flex-col ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("section",{ref:e,className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"container mx-auto text-center",children:[p.jsxs("header",{children:[p.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),p.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."})]}),p.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[p.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[p.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"About Us"}),p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:c.aboutUs}),p.jsx("div",{className:"flex justify-center gap-4 mt-6",children:p.jsx(zn,{to:"/login",variant:"primary",className:"join-the-pack-button","aria-label":"Join the Aussie Gut Pack community",children:"Join the Pack"})})]}),p.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:p.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:p.jsx(sD,{className:"w-full h-full object-cover"})})})]})]})}),p.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),p.jsx("section",{ref:t,className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[p.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),p.jsx("div",{className:"max-w-2xl mx-auto mb-8",children:p.jsx(H_,{mode:"wait",children:p.jsxs(cE.p,{variants:D,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:['"',c.quotes[g],'"']},g)})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[p.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[p.jsx("h3",{id:"workout-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),p.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:c.currentWorkout.description}),p.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Warm Up"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${n?"text-white-300":"text-white-600"}`,children:(c.currentWorkout.warmup||[]).map((I,b)=>p.jsx("li",{className:"mb-2 text-lg",children:I},`warmup-${b}`))}),p.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Main Workout"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:(c.currentWorkout.main||[]).map((I,b)=>p.jsx("li",{className:"mb-2 text-lg",children:I},`main-${b}`))}),p.jsx(zn,{to:"/fitness-tips",variant:"primary",className:"mx-auto btn-primary bg-red-800 text-white hover:bg-red-900","aria-label":"View more fitness tips",children:"More Fitness Tips"})]}),p.jsxs("section",{className:"challenges-section","aria-labelledby":"challenges-heading",children:[p.jsx("h3",{id:"challenges-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,role:"list",children:(c.dailyChallenges||[]).map((I,b)=>p.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[p.jsx("input",{type:"checkbox",id:`challenge-${b}`,checked:C.includes(b),onChange:()=>$(b),className:"mr-2","aria-label":`Mark challenge as completed: ${I}`,"aria-checked":C.includes(b)}),p.jsx("label",{htmlFor:`challenge-${b}`,children:I})]},`challenge-${b}`))}),p.jsx(H_,{children:W&&p.jsx(cE.p,{variants:V,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${n?"text-green-400":"text-green-600"}`,"aria-live":"polite",children:"Great job, Pack Leader!"})})]})]})]})}),p.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),w&&p.jsx("section",{className:`py-20 px-6 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"container mx-auto text-center",children:[p.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),p.jsxs("article",{children:[p.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:w.title}),p.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-gray-400":"text-gray-600"}`,children:w.date}),p.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:w.excerpt}),p.jsx(zn,{to:`/blog/${w.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900","aria-label":`Read more about ${w.title}`,children:"Read More"})]})]})}),p.jsx("hr",{className:`my-12 ${n?"border-stone-700":"border-stone-300"}`}),p.jsxs("section",{className:`py-8 ${n?"bg-stone-800":"bg-stone-100"} text-center`,children:[p.jsx("p",{className:`text-lg mb-4 ${n?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),p.jsx(zn,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900","aria-label":"Sign up for Aussie Gut Pack",children:"Sign Up"})]})]})]})}const n1=P.createContext(),X9=({children:n})=>{const[e,t]=P.useState([]),r=c=>{t(h=>h.find(v=>v.id===c.id)?h.map(v=>v.id===c.id?{...v,quantity:v.quantity+1}:v):[...h,{...c,quantity:1}])},s=(c,h)=>{h<=0?o(c):t(g=>g.map(v=>v.id===c?{...v,quantity:h}:v))},o=c=>{t(h=>h.filter(g=>g.id!==c))},l=()=>{t([])},u=()=>e.reduce((c,h)=>c+h.price*h.quantity,0);return p.jsx(n1.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:u},children:n})},Lv=()=>P.useContext(n1);function Z9(){var O;const{isDarkMode:n}=P.useContext(Ze),{cart:e,addToCart:t,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=Lv(),[l,u]=P.useState([]),[c,h]=P.useState([]),[g,v]=P.useState(!1),[w,E]=P.useState(""),[C,j]=P.useState(""),[A,D]=P.useState(!1),[V,$]=P.useState(!0),[W,H]=P.useState(!1),F=P.useRef(null),I=P.useRef(null),b=rn();P.useEffect(()=>{console.log("isMiniCartOpen updated to:",A)},[A]),P.useEffect(()=>{console.log("showAll updated to:",g)},[g]),P.useEffect(()=>{const re=he=>{const Se=document.querySelector(".cart-button"),we=he.target.closest(".add-to-cart-button"),le=Date.now(),me=I.current?le-I.current:1/0;console.log("Outside click handler triggered, target:",he.target),console.log("Is target an Add to Cart button?",!!we),console.log("Time since last Add to Cart click:",me),console.log("IsMiniCartOpen?",A),console.log("OpenedByAdd?",W),A&&!he.target.closest(".mini-cart-sidebar")&&!(Se!=null&&Se.contains(he.target))&&!we&&me>100&&!W&&(console.log("Outside click detected, closing sidebar"),D(!1))};return document.addEventListener("click",re),()=>document.removeEventListener("click",re)},[A,W]),P.useEffect(()=>{(async()=>{try{$(!0);const Se=(await ur(tn(St,"categories"))).docs.map(me=>({id:me.id,...me.data()}));u(Se);const le=(await ur(tn(St,"products"))).docs.map(me=>({id:me.id,...me.data()}));h(le)}catch(he){console.error("Error fetching data from Firestore:",he)}finally{$(!1)}})()},[]),P.useEffect(()=>(e.length>0&&(F.current&&clearTimeout(F.current),console.log("Cart updated, opening sidebar, cart length:",e.length),H(!0),D(!0),e.length!==1&&(F.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),D(!1),H(!1)},3e3))),()=>{F.current&&clearTimeout(F.current)}),[e]),P.useEffect(()=>{e.length===0&&A&&(console.log("Cart is empty, closing sidebar"),D(!1),H(!1))},[e,A]);const S=re=>{I.current=Date.now(),t(re)},R=re=>{const he=[...re];switch(w){case"price-asc":return he.sort((Se,we)=>Se.price-we.price);case"price-desc":return he.sort((Se,we)=>we.price-Se.price);case"name-asc":return he.sort((Se,we)=>Se.name.localeCompare(we.name));case"name-desc":return he.sort((Se,we)=>we.name.localeCompare(Se.name));default:return he}},M=C?c.filter(re=>re.categoryId===C):c,B=R(M);return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 flex ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:`text-4xl font-bold transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Products"}),p.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950",onClick:re=>{re.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",A),D(!A)},children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),p.jsx("span",{children:"Cart"}),Array.isArray(e)&&e.length>0&&p.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-6 w-6 flex items-center justify-center text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((re,he)=>re+he.quantity,0)})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Filter by Section:"}),p.jsxs("select",{value:C,onChange:re=>j(re.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[p.jsx("option",{value:"",children:"All Sections"}),l.map(re=>p.jsx("option",{value:re.id,children:re.name},re.id))]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Sort By:"}),p.jsxs("select",{value:w,onChange:re=>E(re.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[p.jsx("option",{value:"",children:"None"}),p.jsx("option",{value:"price-asc",children:"Price: Low to High"}),p.jsx("option",{value:"price-desc",children:"Price: High to Low"}),p.jsx("option",{value:"name-asc",children:"Name: A-Z"}),p.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),p.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),v(re=>{const he=!re;return console.log("Setting showAll to:",he),he&&(console.log("Resetting filterCategory to show all products"),j("")),he})},className:`px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${n?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]}),V?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):C?p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:((O=l.find(re=>re.id===C))==null?void 0:O.name)||"Section"}),B.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:B.map(re=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:he=>{he.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${re.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:re.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",re.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",re.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",re.size]}),p.jsx("button",{onClick:he=>{he.stopPropagation(),I.current=Date.now(),S(re)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},re.id))})]}):g?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:B.map(re=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:he=>{he.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${re.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:re.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",re.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",re.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",re.size]}),p.jsx("button",{onClick:he=>{he.stopPropagation(),I.current=Date.now(),S(re)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},re.id))}):l.map(re=>p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:R(c.filter(he=>he.categoryId===re.id)).map(he=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:he.image,alt:he.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:Se=>{Se.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${he.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:he.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:he.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",he.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Color: ",he.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["Size: ",he.size]}),p.jsx("button",{onClick:Se=>{Se.stopPropagation(),I.current=Date.now(),S(he)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},he.id))})]},re.id))]}),A&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:re=>{re.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),D(!1)}}),p.jsx("div",{className:`mini-cart-sidebar w-80 p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${A?"translate-x-0":"translate-x-full"} ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:p.jsxs("div",{className:`mini-cart-content ${A?"active":""}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Your Cart"}),p.jsx("button",{onClick:re=>{re.stopPropagation(),console.log("Close button clicked, closing sidebar"),D(!1)},className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:""})]}),!Array.isArray(e)||e.length===0?p.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):p.jsxs("div",{className:"space-y-4",children:[p.jsx(Af,{component:null,children:e.map(re=>p.jsx(Pf,{timeout:300,classNames:"cart-item",children:p.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${n?"border-stone-600":"border-red-300"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-16 h-16 object-cover rounded-md",onError:he=>{he.target.src="https://via.placeholder.com/80"}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:`text-sm font-medium transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.name}),p.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:["$",re.price.toFixed(2)," x ",re.quantity]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[re.quantity===1?p.jsx("button",{onClick:he=>{he.stopPropagation(),s(re.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):p.jsx("button",{onClick:he=>{he.stopPropagation(),r(re.id,re.quantity-1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),p.jsx("span",{className:`text-sm mx-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:re.quantity}),p.jsx("button",{onClick:he=>{he.stopPropagation(),r(re.id,re.quantity+1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),p.jsx("button",{onClick:he=>{he.stopPropagation(),s(re.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-colors duration-300 ease-in-out",children:""})]})},re.id))}),p.jsxs("div",{className:"border-t pt-4 mt-4",children:[p.jsxs("p",{className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),p.jsx("button",{onClick:re=>{re.stopPropagation(),D(!1),b("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4",children:"Go to Cart"}),p.jsx("button",{onClick:re=>{re.stopPropagation(),D(!1),b("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2",children:"Proceed to Checkout"})]})]})]})})]})]})}function e5(){const{isDarkMode:n}=P.useContext(Ze),{cart:e,updateQuantity:t,removeFromCart:r,clearCart:s,getTotalPrice:o}=Lv(),[l,u]=P.useState(!1),[c,h]=P.useState({name:"",email:"",address:""}),g=rn(),v=async w=>{if(w.preventDefault(),!c.name||!c.email||!c.address){alert("Please fill in all fields to proceed with checkout.");return}u(!0);try{const E={items:e,total:o(),customer:c,createdAt:new Date().toISOString(),status:"pending"};await kc(tn(St,"orders"),E),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(E){console.error("Error placing order:",E),alert("Failed to place order. Please try again.")}finally{u(!1),h({name:"",email:"",address:""})}};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:`text-lg mb-4 ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),p.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):p.jsxs("div",{className:"space-y-8",children:[p.jsx("div",{className:"space-y-4",children:e.map(w=>p.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:w.image,alt:w.name,className:"w-20 h-20 object-cover rounded-md",onError:E=>{E.target.src="https://via.placeholder.com/80"}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:w.name}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",w.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(w.price*w.quantity).toFixed(2)]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>t(w.id,w.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),p.jsx("span",{className:`text-lg ${n?"text-white":"text-red-600"}`,children:w.quantity}),p.jsx("button",{onClick:()=>t(w.id,w.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),p.jsx("button",{onClick:()=>r(w.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},w.id))}),p.jsxs("div",{className:`p-6 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-white":"text-red-600"}`,children:"Order Summary"}),p.jsxs("p",{className:`text-lg mb-4 ${n?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),p.jsxs("form",{onSubmit:v,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Full Name"}),p.jsx("input",{type:"text",value:c.name,onChange:w=>h({...c,name:w.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Email"}),p.jsx("input",{type:"email",value:c.email,onChange:w=>h({...c,email:w.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${n?"text-white":"text-red-600"}`,children:"Shipping Address"}),p.jsx("textarea",{value:c.address,onChange:w=>h({...c,address:w.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),p.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function t5(){const{isDarkMode:n}=P.useContext(Ze),{cart:e,updateQuantity:t,removeFromCart:r}=Lv(),s=Object.values(e).reduce((l,u)=>l+u.price*u.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsxs("header",{className:"text-center mb-12",children:[p.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Checkout"}),p.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),p.jsx(zn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,u])=>p.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[p.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:p.jsx("img",{src:u.image||"https://via.placeholder.com/80",alt:u.name,className:"w-full h-full object-cover rounded"})}),p.jsxs("div",{className:"flex-1 ml-4",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:u.name}),p.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Color: ",u.color]}),p.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Size: ",u.size]})]}),p.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:""})]}),p.jsxs("div",{className:"flex items-center mt-2",children:[p.jsx("button",{onClick:()=>t(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${n?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),p.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${n?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:u.quantity}),p.jsx("button",{onClick:()=>t(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${n?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),p.jsx("div",{className:"text-right ml-4",children:u.originalPrice?p.jsxs("div",{children:[p.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["$",(u.originalPrice*u.quantity).toFixed(2)]}),p.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})]}):p.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})})]},l))}),p.jsxs("div",{className:"mt-12 text-right",children:[p.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),p.jsx(zn,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const M0=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):"," Stress: Elevates cortisol, disrupting gut flora and increasing permeability"," Glyphosate: Kills beneficial bacteria, feeds pathogenic ones"," Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections"," Seed Oils: Feed pathogenic bacteria, have a long half-life"," Refined Sugars: Feed harmful bacteria, promote dysbiosis"," Long-term Restrictive Diets: Reduce microbiome diversity"," Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
 Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
 Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
 Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesnt survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
 Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
 A nutrient-dense, diverse, unprocessed diet with prebiotics
 Healthy exercise, sleep, and an uplifting social life worth enjoying
 Sun exposure and skin contact with nature
 Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connectedgood gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function V0({title:n,content:e,footer:t,className:r}){const{isDarkMode:s}=P.useContext(Ze);return p.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[p.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:n}),e&&p.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),t&&p.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:t})]})}function n5(){const{isDarkMode:n}=P.useContext(Ze);P.useEffect(()=>{});const e=M0.filter(r=>r.category==="Benefits"),t=M0.filter(r=>r.category!=="Benefits");return p.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("div",{className:"pt-16"}),p.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),p.jsxs("section",{className:"mb-8 flex-grow",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),p.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),p.jsxs("section",{className:"py-12 px-6 flex-grow",children:[p.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>p.jsx(it,{to:`/gut-health/${r.id}`,children:p.jsx(V0,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),p.jsxs("section",{className:"flex-grow",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:t.map(r=>p.jsx(it,{to:`/gut-health/${r.id}`,children:p.jsx(V0,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${n?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function r5(){const{id:n}=kf(),{isDarkMode:e}=P.useContext(Ze);rn();const t=M0.find(r=>r.id.toString()===n);return t?p.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[p.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:t.title}),p.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",t.category]}),Array.isArray(t.content)?p.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:t.content.map((r,s)=>p.jsx("li",{className:"mb-2",children:r},s))}):p.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:t.content}),p.jsx(zn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):p.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[p.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),p.jsx(zn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const s5=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function i5(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),r=l=>t([...e,l]),s=l=>t(e.filter(u=>u.id!==l)),o=e.reduce((l,u)=>l+u.price,0);return p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsx("h1",{className:`text-3xl font-bold mb-6 ${n?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-green-200":"text-green-700"}`,children:"Available Products"}),s5.map(l=>p.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${n?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[p.jsxs("div",{children:[p.jsx("h3",{className:`font-bold ${n?"text-gray-300":"text-gray-800"}`,children:l.name}),p.jsxs("p",{className:`${n?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),p.jsx(zn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${n?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?p.jsx("p",{className:`${n?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):p.jsxs(p.Fragment,{children:[e.map(l=>p.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${n?"border-gray-700":"border-gray-300"}`,children:[p.jsx("span",{className:`${n?"text-gray-300":"text-gray-800"}`,children:l.name}),p.jsxs("div",{children:[p.jsxs("span",{className:`mr-4 ${n?"text-green-400":"text-green-700"}`,children:["$",l.price]}),p.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),p.jsxs("div",{className:`mt-4 font-bold ${n?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),p.jsx(zn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}var o5={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function a5(n){if(typeof n=="number")return{value:n,unit:"px"};var e,t=(n.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var r=(n.match(/[^0-9]*$/)||"").toString();return o5[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function WT(n){var e=a5(n);return"".concat(e.value).concat(e.unit)}var l5=function(n,e,t){var r="react-spinners-".concat(n,"-").concat(t);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(l,0),r},Tf=function(){return Tf=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=e[s])}return n},Tf.apply(this,arguments)},u5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t},c5=l5("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Ac(n){var e=n.loading,t=e===void 0?!0:e,r=n.color,s=r===void 0?"#000000":r,o=n.speedMultiplier,l=o===void 0?1:o,u=n.cssOverride,c=u===void 0?{}:u,h=n.size,g=h===void 0?35:h,v=u5(n,["loading","color","speedMultiplier","cssOverride","size"]),w=Tf({background:"transparent !important",width:WT(g),height:WT(g),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(c5," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},c);return t?P.createElement("span",Tf({style:w},v)):null}const d5=()=>{const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),[r,s]=P.useState(!0),[o,l]=P.useState(null);P.useEffect(()=>{(async()=>{try{const g=tn(St,"content","blog","posts"),w=(await ur(g)).docs.map(E=>({id:E.id,title:E.data().title,blocks:E.data().blocks||[{type:"paragraph",content:""}],lastEdited:E.data().lastEdited||""}));if(console.log("Fetched blog posts:",w),w.length>0){const E=w.sort((C,j)=>{const A=C.lastEdited?new Date(C.lastEdited):new Date(0);return(j.lastEdited?new Date(j.lastEdited):new Date(0))-A});t(E)}else t([])}catch(g){console.error("Error fetching blog posts:",g),l("Failed to load blog posts. Please try again later."),t([])}finally{s(!1)}})()},[]);const u=h=>h?new Date(h).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",c=h=>{if(!h.blocks||h.blocks.length===0)return"Read more...";const g=h.blocks.find(v=>v.type==="paragraph"||v.type==="list"||v.type==="bullet");return g?g.type==="paragraph"?g.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(g.content)?g.content[0]+(g.content.length>1?"...":""):"Read more...":"Read more..."};return r?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),p.jsx("div",{className:"text-center",children:p.jsx(Ac,{color:n?"#f87171":"#b91c1c"})})]}):o?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:o})]}):p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(h=>p.jsx(it,{to:`/blog/${h.id}`,className:"block group",children:p.jsx(V0,{title:h.title,footer:p.jsxs("span",{className:`text-sm transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",u(h.lastEdited)]}),content:p.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:c(h)}),className:`p-6 rounded-lg shadow-md transition-all duration-300 ease-in-out ${n?"bg-stone-800 hover:bg-stone-700":"bg-white hover:bg-stone-100"} group-hover:shadow-lg`})},h.id))})]})},h5=()=>{const{id:n}=kf(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(null),[s,o]=P.useState(!0),[l,u]=P.useState(null);P.useEffect(()=>{(async()=>{try{o(!0),u(null);const g=ar(St,"content","blog","posts",n),v=await ep(g);v.exists()?r({id:v.id,...v.data()}):r(null)}catch(g){console.error("Error fetching blog post:",g),u("Failed to load blog post. Please try again later.")}finally{o(!1)}})()},[n]);const c=h=>h?new Date(h).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return s?p.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:p.jsx("div",{className:"text-center",children:p.jsx(Ac,{color:e?"#f87171":"#b91c1c"})})}):l?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Error"}),p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-600"}`,children:l}),p.jsx(zn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):t?p.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:t.title}),p.jsxs("p",{className:`text-lg mb-8 transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",c(t.lastEdited)]}),p.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:t.blocks&&t.blocks.length>0?t.blocks.map((h,g)=>p.jsx("div",{className:"mb-6",children:h.type==="paragraph"?p.jsx("p",{children:h.content}):h.type==="list"&&Array.isArray(h.content)?p.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:h.content.map((v,w)=>p.jsx("li",{children:v},w))}):h.type==="bullet"&&Array.isArray(h.content)?p.jsx("ul",{className:"list-disc pl-6 space-y-2",children:h.content.map((v,w)=>p.jsx("li",{children:v},w))}):h.type==="image"&&h.content?p.jsx("img",{src:h.content,alt:"Blog content",className:"w-full max-w-md mx-auto rounded-lg shadow-md"}):h.type==="link"&&h.content.url?p.jsx(it,{to:h.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:h.content.text||h.content.url}):p.jsx("p",{className:"text-red-500",children:"Invalid block format"})},g)):p.jsx("p",{children:"No content available."})}),p.jsx(zn,{to:"/blog",variant:"primary",className:"mt-8 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})}):p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),p.jsx(zn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},f5=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function p5(){const{isDarkMode:n}=P.useContext(Ze);return p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${n?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),p.jsx("div",{className:"space-y-4",children:f5.map((e,t)=>p.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${n?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[p.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${n?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,p.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:""})]}),p.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},t))})]})}class qc{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const m5=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},Zt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:m5()},Mv=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},g5=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Mv(n);Zt.publicKey=t.publicKey,Zt.blockHeadless=t.blockHeadless,Zt.storageProvider=t.storageProvider,Zt.blockList=t.blockList,Zt.limitRate=t.limitRate,Zt.origin=t.origin||e},r1=async(n,e,t={})=>{const r=await fetch(Zt.origin+n,{method:"POST",headers:t,body:e}),s=await r.text(),o=new qc(r.status,s);if(r.ok)return o;throw o},s1=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},y5=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},i1=n=>n.webdriver||!n.languages||n.languages.length===0,o1=()=>new qc(451,"Unavailable For Headless Browser"),v5=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},w5=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},x5=(n,e)=>n instanceof FormData?n.get(e):n[e],a1=(n,e)=>{if(w5(n))return!1;v5(n.list,n.watchVariable);const t=x5(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},l1=()=>new qc(403,"Forbidden"),_5=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},b5=async(n,e,t)=>{const r=Number(await t.get(n)||0);return e-Date.now()+r},u1=async(n,e,t)=>{if(!e.throttle||!t)return!1;_5(e.throttle,e.id);const r=e.id||n;return await b5(r,e.throttle,t)>0?!0:(await t.set(r,Date.now().toString()),!1)},c1=()=>new qc(429,"Too Many Requests"),E5=async(n,e,t,r)=>{const s=Mv(r),o=s.publicKey||Zt.publicKey,l=s.blockHeadless||Zt.blockHeadless,u=s.storageProvider||Zt.storageProvider,c={...Zt.blockList,...s.blockList},h={...Zt.limitRate,...s.limitRate};return l&&i1(navigator)?Promise.reject(o1()):(s1(o,n,e),y5(t),t&&a1(c,t)?Promise.reject(l1()):await u1(location.pathname,h,u)?Promise.reject(c1()):r1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},T5=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},S5=n=>typeof n=="string"?document.querySelector(n):n,k5=async(n,e,t,r)=>{const s=Mv(r),o=s.publicKey||Zt.publicKey,l=s.blockHeadless||Zt.blockHeadless,u=Zt.storageProvider||s.storageProvider,c={...Zt.blockList,...s.blockList},h={...Zt.limitRate,...s.limitRate};if(l&&i1(navigator))return Promise.reject(o1());const g=S5(t);s1(o,n,e),T5(g);const v=new FormData(g);return a1(c,v)?Promise.reject(l1()):await u1(location.pathname,h,u)?Promise.reject(c1()):(v.append("lib_version","4.4.1"),v.append("service_id",n),v.append("template_id",e),v.append("user_id",o),r1("/api/v1.0/email/send-form",v))},C5={init:g5,send:E5,sendForm:k5,EmailJSResponseStatus:qc};function P5(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState({name:"",email:"",message:""}),[r,s]=P.useState(""),o=u=>{const{name:c,value:h}=u.target;t(g=>({...g,[c]:h}))},l=u=>{u.preventDefault(),s("Sending..."),C5.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(c=>{s("Thank you! Your inquiry has been sent."),t({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},c=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",c.text),setTimeout(()=>s(""),3e3)})};return p.jsx("div",{className:`min-h-screen py-12 px-4 ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Contact Us"}),p.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),p.jsxs("form",{onSubmit:l,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Message"}),p.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&p.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:r})]})]})})}function A5(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState(""),[r,s]=P.useState(""),[o,l]=P.useState(!1),[u,c]=P.useState(null),h=rn();P.useEffect(()=>{const w=ip(Ns,E=>{l(!!E)});return()=>w()},[]);const g=async w=>{w.preventDefault(),c(null);try{await O8(Ns,e,r),l(!0)}catch(E){c("Failed to log in: "+E.message)}},v=async()=>{try{await op(Ns),l(!1),h("/admin")}catch(w){c("Failed to log out: "+w.message)}};return o?p.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),p.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),p.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),p.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),p.jsx("button",{onClick:v,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):p.jsx("div",{className:`min-h-screen flex items-center justify-center ${n?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:`p-6 ${n?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[p.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),u&&p.jsx("p",{className:`text-red-500 mb-4 ${n?"text-red-400":"text-red-600"}`,children:u}),p.jsxs("form",{onSubmit:g,children:[p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"email",value:e,onChange:w=>t(w.target.value),className:`border p-2 w-full mb-4 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"password",value:r,onChange:w=>s(w.target.value),className:`border p-2 w-full mb-4 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function I5(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([""]),[r,s]=P.useState(""),[o,l]=P.useState([""]),[u,c]=P.useState([""]),[h,g]=P.useState([]),[v,w]=P.useState(""),[E,C]=P.useState([""]),[j,A]=P.useState(null),D=rn();P.useEffect(()=>{const ie=ip(Ns,q=>{q||D("/admin")});return()=>ie()},[D]),P.useEffect(()=>{(async()=>{var q,Q,te,pe,ge,We,He,It;try{const Dn=ar(St,"content","home"),ss=await ep(Dn);if(ss.exists()){const $t=ss.data();t((q=$t.quotes)!=null&&q.length?$t.quotes:[""]),s(((Q=$t.currentWorkout)==null?void 0:Q.description)||""),l((pe=(te=$t.currentWorkout)==null?void 0:te.warmup)!=null&&pe.length?$t.currentWorkout.warmup:[""]),c((We=(ge=$t.currentWorkout)==null?void 0:ge.main)!=null&&We.length?$t.currentWorkout.main:[""]),g((He=$t.scheduledWorkouts)!=null&&He.length?$t.scheduledWorkouts.map(is=>({...is,warmup:is.warmup||[""],main:is.main||[""]})):[{description:"",warmup:[""],main:[""],updateDateTime:""}]),w($t.aboutUs||""),C((It=$t.dailyChallenges)!=null&&It.length?$t.dailyChallenges:[""])}}catch(Dn){A("Failed to load content: "+Dn.message)}})()},[]);const V=async()=>{A(null);const ie={quotes:e.filter(q=>q.trim()!==""),currentWorkout:{description:r,warmup:o.filter(q=>q.trim()!==""),main:u.filter(q=>q.trim()!=="")},scheduledWorkouts:h.filter(q=>q.description.trim()&&(q.warmup.length>0||q.main.length>0)&&q.updateDateTime.trim()).map(q=>({description:q.description,warmup:q.warmup.filter(Q=>Q.trim()!==""),main:q.main.filter(Q=>Q.trim()!==""),updateDateTime:q.updateDateTime})),aboutUs:v.trim(),dailyChallenges:E.filter(q=>q.trim()!==""),lastUpdated:new Date().toISOString()};try{await xv(ar(St,"content","home"),ie),alert("Home page content saved successfully!"),D("/admin")}catch(q){A("Error saving changes: "+q.message)}},$=async()=>{try{await op(Ns),D("/admin")}catch(ie){A("Failed to log out: "+ie.message)}},W=()=>t([...e,""]),H=ie=>t(e.filter((q,Q)=>Q!==ie)),F=(ie,q)=>{const Q=[...e];Q[ie]=q,t(Q)},I=()=>l([...o,""]),b=ie=>l(o.filter((q,Q)=>Q!==ie)),S=(ie,q)=>{const Q=[...o];Q[ie]=q,l(Q)},R=()=>c([...u,""]),M=ie=>c(u.filter((q,Q)=>Q!==ie)),B=(ie,q)=>{const Q=[...u];Q[ie]=q,c(Q)},O=()=>g([...h,{description:"",warmup:[""],main:[""],updateDateTime:""}]),re=ie=>g(h.filter((q,Q)=>Q!==ie)),he=(ie,q,Q)=>{const te=[...h];te[ie][q]=Q,g(te)},Se=ie=>{const q=[...h];q[ie].warmup.push(""),g(q)},we=(ie,q)=>{const Q=[...h];Q[ie].warmup=Q[ie].warmup.filter((te,pe)=>pe!==q),g(Q)},le=(ie,q,Q)=>{const te=[...h];te[ie].warmup[q]=Q,g(te)},me=ie=>{const q=[...h];q[ie].main.push(""),g(q)},fe=(ie,q)=>{const Q=[...h];Q[ie].main=Q[ie].main.filter((te,pe)=>pe!==q),g(Q)},K=(ie,q,Q)=>{const te=[...h];te[ie].main[q]=Q,g(te)},ee=()=>C([...E,""]),Ee=ie=>C(E.filter((q,Q)=>Q!==ie)),Le=(ie,q)=>{const Q=[...E];Q[ie]=q,C(Q)};return p.jsxs("div",{className:`min-h-screen p-6 ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),j&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:j}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>F(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${q+1}`}),p.jsx("button",{onClick:()=>H(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},q)),p.jsx("button",{onClick:W,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),p.jsx("textarea",{value:v,onChange:ie=>w(ie.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),p.jsx("textarea",{value:r,onChange:ie=>s(ie.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>S(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${q+1}`}),p.jsx("button",{onClick:()=>b(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${q}`)),p.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mt-4 mb-2`,children:"Main Workout Exercises"}),u.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>B(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${q+1}`}),p.jsx("button",{onClick:()=>M(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove"})]},`main-${q}`)),p.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Main Exercise"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((ie,q)=>p.jsxs("div",{className:`mb-4 border p-4 rounded ${n?"border-stone-600":"border-red-300"}`,children:[p.jsx("input",{type:"datetime-local",value:ie.updateDateTime?ie.updateDateTime.slice(0,16):"",onChange:Q=>he(q,"updateDateTime",new Date(Q.target.value).toISOString()),className:`border p-2 w-full mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),p.jsx("textarea",{value:ie.description,onChange:Q=>he(q,"description",Q.target.value),className:`border p-2 w-full h-24 mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-blue-300":"text-blue-600"} mt-2 mb-2`,children:"Warm Up Exercises"}),ie.warmup.map((Q,te)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:pe=>le(q,te,pe.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${te+1}`}),p.jsx("button",{onClick:()=>we(q,te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ie.warmup.length===1,children:"Remove"})]},`warmup-${q}-${te}`)),p.jsx("button",{onClick:()=>Se(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mt-2 mb-2`,children:"Main Workout Exercises"}),ie.main.map((Q,te)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:pe=>K(q,te,pe.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${te+1}`}),p.jsx("button",{onClick:()=>fe(q,te),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:ie.main.length===1,children:"Remove"})]},`main-${q}-${te}`)),p.jsx("button",{onClick:()=>me(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-2",children:"Add Main Exercise"}),p.jsx("button",{onClick:()=>re(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},q)),p.jsx("button",{onClick:O,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),E.map((ie,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:ie,onChange:Q=>Le(q,Q.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${q+1}`}),p.jsx("button",{onClick:()=>Ee(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:E.length===1,children:"Remove"})]},q)),p.jsx("button",{onClick:ee,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),p.jsx("button",{onClick:V,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),p.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function R5(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),[r,s]=P.useState(null),[o,l]=P.useState(null),u=rn();P.useEffect(()=>{const F=ip(Ns,I=>{I||u("/admin")});return()=>F()},[u]),P.useEffect(()=>{(async()=>{try{const I=tn(St,"content","blog","posts"),R=(await ur(I)).docs.map(M=>({id:M.id,title:M.data().title||"",blocks:M.data().blocks||[{type:"paragraph",content:""}],lastEdited:M.data().lastEdited||""})).sort((M,B)=>{const O=M.lastEdited?new Date(M.lastEdited):new Date(0);return(B.lastEdited?new Date(B.lastEdited):new Date(0))-O});t(R.length?R:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:""}])}catch(I){l("Failed to load blog posts: "+I.message)}})()},[]);const c=async()=>{l(null);try{const F=tn(St,"content","blog","posts"),I=await ur(F);for(const b of I.docs)await Uh(b.ref);for(const b of e)if(b.title.trim()&&b.blocks.some(S=>S.type==="paragraph"||S.type==="image"||S.type==="link"?S.content.trim():S.content.some(R=>R.trim()))){const S=b.id||Date.now().toString();await xv(ar(F,S),{id:S,title:b.title,blocks:b.blocks.map(R=>({type:R.type,content:R.type==="paragraph"||R.type==="image"?R.content:R.type==="link"?{url:R.content.url,text:R.content.text}:R.content.filter(M=>M.trim()!=="")})),lastEdited:b.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),u("/admin")}catch(F){l("Error saving blog posts: "+F.message)}},h=async()=>{try{await op(Ns),u("/admin")}catch(F){l("Failed to log out: "+F.message)}},g=()=>{const F=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],lastEdited:new Date().toISOString()}];t(F),s(F.length-1)},v=F=>{const I=e.filter((b,S)=>S!==F);t(I),s(null)},w=(F,I,b)=>{const S=[...e];S[F]={...S[F],[I]:b,lastEdited:new Date().toISOString()},t(S)},E=(F,I)=>{const b=[...e];b[F].blocks.push({type:I,content:I==="paragraph"||I==="image"?"":I==="link"?{url:"",text:""}:[""]}),b[F].lastEdited=new Date().toISOString(),t(b)},C=(F,I)=>{const b=[...e];b[F].blocks=b[F].blocks.filter((S,R)=>R!==I),b[F].lastEdited=new Date().toISOString(),t(b)},j=(F,I,b)=>{const S=[...e];S[F].blocks[I]={type:b,content:b==="paragraph"||b==="image"?"":b==="link"?{url:"",text:""}:[""]},S[F].lastEdited=new Date().toISOString(),t(S)},A=(F,I,b)=>{const S=[...e];S[F].blocks[I].content=b,S[F].lastEdited=new Date().toISOString(),t(S)},D=(F,I,b,S)=>{const R=[...e];R[F].blocks[I].content[b]=S,R[F].lastEdited=new Date().toISOString(),t(R)},V=(F,I)=>{const b=[...e];b[F].blocks[I].content.push(""),b[F].lastEdited=new Date().toISOString(),t(b)},$=(F,I,b)=>{const S=[...e];S[F].blocks[I].content=S[F].blocks[I].content.filter((R,M)=>M!==b),S[F].lastEdited=new Date().toISOString(),t(S)},W=(F,I,b,S)=>{const R=[...e];R[F].blocks[I].content[b]=S,R[F].lastEdited=new Date().toISOString(),t(R)},H=F=>F?new Date(F).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited";return p.jsxs("div",{className:`min-h-screen p-6 ${n?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:o}),r===null?p.jsxs("div",{className:"mb-6",children:[e.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):p.jsx("div",{className:"grid gap-4",children:e.map((F,I)=>p.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(I),children:[p.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:F.title||"Untitled Post"}),p.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",H(F.lastEdited)]})]},I))}),p.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),p.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:`mb-4 border p-4 rounded ${n?"border-stone-600":"border-red-300"}`,children:[p.jsx("input",{type:"text",value:e[r].title,onChange:F=>w(r,"title",F.target.value),className:`border p-2 w-full mb-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),p.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${n?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",H(e[r].lastEdited)]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((F,I)=>p.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Block Type:"}),p.jsxs("select",{value:F.type,onChange:b=>j(r,I,b.target.value),className:`border p-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[p.jsx("option",{value:"paragraph",children:"Paragraph"}),p.jsx("option",{value:"list",children:"Numbered List"}),p.jsx("option",{value:"bullet",children:"Bullet Points"}),p.jsx("option",{value:"image",children:"Image"}),p.jsx("option",{value:"link",children:"Link"})]}),p.jsx("button",{onClick:()=>C(r,I),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),F.type==="paragraph"?p.jsx("textarea",{value:F.content,onChange:b=>A(r,I,b.target.value),className:`border p-2 w-full h-24 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):F.type==="image"?p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",value:F.content,onChange:b=>A(r,I,b.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),F.content&&p.jsx("img",{src:F.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):F.type==="link"?p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",value:F.content.url,onChange:b=>D(r,I,"url",b.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),p.jsx("input",{type:"text",value:F.content.text,onChange:b=>D(r,I,"text",b.target.value),className:`border p-2 w-full ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):p.jsxs("div",{children:[F.content.map((b,S)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:b,onChange:R=>W(r,I,S,R.target.value),className:`border p-2 w-full mr-2 ${n?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${S+1}`}),p.jsx("button",{onClick:()=>$(r,I,S),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[I].content.length===1,children:"Remove"})]},S)),p.jsx("button",{onClick:()=>V(r,I),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},I)),p.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[p.jsx("button",{onClick:()=>E(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),p.jsx("button",{onClick:()=>E(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),p.jsx("button",{onClick:()=>E(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),p.jsx("button",{onClick:()=>E(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Image"}),p.jsx("button",{onClick:()=>E(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),p.jsx("button",{onClick:()=>v(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),p.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),p.jsx("button",{onClick:c,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),p.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function N5(){const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]),[r,s]=P.useState([]),[o,l]=P.useState(""),[u,c]=P.useState({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""}),[h,g]=P.useState(null),[v,w]=P.useState(null),[E,C]=P.useState(null),j=rn();P.useEffect(()=>{const b=ip(Ns,S=>{S||j("/admin")});return()=>b()},[j]),P.useEffect(()=>{(async()=>{try{const R=(await ur(tn(St,"categories"))).docs.map(O=>({id:O.id,...O.data()}));t(R);const B=(await ur(tn(St,"products"))).docs.map(O=>({id:O.id,...O.data()}));s(B)}catch(S){C("Error fetching data from Firestore: "+S.message)}})()},[]);const A=async b=>{if(b.preventDefault(),!!o)try{const S=await kc(tn(St,"categories"),{name:o});t([...e,{id:S.id,name:o}]),l("")}catch(S){C("Error adding category: "+S.message)}},D=async b=>{try{const S=ar(St,"categories",b.id);await yT(S,{name:b.name}),t(e.map(R=>R.id===b.id?{...R,name:b.name}:R)),g(null)}catch(S){C("Error updating category: "+S.message)}},V=async b=>{try{await Uh(ar(St,"categories",b)),t(e.filter(R=>R.id!==b));const S=r.filter(R=>R.categoryId===b);for(const R of S){if(R.image&&R.image!=="https://via.placeholder.com/80"){const M=R.image.split("/products%2F")[1].split("?")[0],B=Sg(Pg,`products/${decodeURIComponent(M)}`);await ET(B).catch(O=>{C(`Error deleting image for product ${R.id}: `+O.message)})}await Uh(ar(St,"products",R.id))}s(r.filter(R=>R.categoryId!==b))}catch(S){C("Error deleting category: "+S.message)}},$=async b=>{if(!b)return null;const S=Sg(Pg,`products/${b.name}`);return await jU(S,b),await DU(S)},W=async b=>{if(b.preventDefault(),!(!u.categoryId||!u.name||!u.price))try{const S=await $(u.image),R=await kc(tn(St,"products"),{categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:S||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"});s([...r,{id:R.id,categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:S||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"}]),c({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""})}catch(S){C("Error adding product: "+S.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},H=async b=>{try{const S=b.image instanceof File?await $(b.image):b.image,R=ar(St,"products",b.id);await yT(R,{categoryId:b.categoryId,name:b.name,price:parseFloat(b.price),description:b.description,image:S||"https://via.placeholder.com/80",color:b.color,size:b.size}),s(r.map(M=>M.id===b.id?{...M,categoryId:b.categoryId,name:b.name,price:parseFloat(b.price),description:b.description,image:S||"https://via.placeholder.com/80",color:b.color,size:b.size}:M)),w(null)}catch(S){C("Error updating product: "+S.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},F=async b=>{try{const S=r.find(R=>R.id===b);if(S.image&&S.image!=="https://via.placeholder.com/80"){const R=S.image.split("/products%2F")[1].split("?")[0],M=Sg(Pg,`products/${decodeURIComponent(R)}`);await ET(M).catch(B=>{C(`Error deleting image for product ${b}: `+B.message)})}await Uh(ar(St,"products",b)),s(r.filter(R=>R.id!==b))}catch(S){C("Error deleting product: "+S.message)}},I=async()=>{try{await op(Ns),j("/admin")}catch(b){C("Failed to log out: "+b.message)}};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${n?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),E&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${n?"text-red-400":"text-red-600"}`,children:E}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Add New Category"}),p.jsxs("form",{onSubmit:A,className:"flex gap-4",children:[p.jsx("input",{type:"text",value:o,onChange:b=>l(b.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Manage Categories"}),p.jsx("div",{className:"space-y-4",children:e.map(b=>p.jsx("div",{className:`p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===b.id?p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{type:"text",value:h.name,onChange:S=>g({...h,name:S.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),p.jsx("button",{onClick:()=>D(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),p.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:b.name}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>g(b),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),p.jsx("button",{onClick:()=>V(b.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},b.id))})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Add New Product"}),p.jsxs("form",{onSubmit:W,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Category"}),p.jsxs("select",{value:u.categoryId,onChange:b=>c({...u,categoryId:b.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[p.jsx("option",{value:"",children:"Select a category"}),e.map(b=>p.jsx("option",{value:b.id,children:b.name},b.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",value:u.name,onChange:b=>c({...u,name:b.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:b=>c({...u,price:b.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Description"}),p.jsx("textarea",{value:u.description,onChange:b=>c({...u,description:b.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:b=>c({...u,image:b.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Color"}),p.jsx("input",{type:"text",value:u.color,onChange:b=>c({...u,color:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Color (optional)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Size"}),p.jsx("input",{type:"text",value:u.size,onChange:b=>c({...u,size:b.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Size (optional)"})]}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Manage Products"}),p.jsx("div",{className:"space-y-4",children:r.map(b=>{var S;return p.jsx("div",{className:`p-4 border rounded-md ${n?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(v==null?void 0:v.id)===b.id?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Category"}),p.jsxs("select",{value:v.categoryId,onChange:R=>w({...v,categoryId:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[p.jsx("option",{value:"",children:"Select a category"}),e.map(R=>p.jsx("option",{value:R.id,children:R.name},R.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",value:v.name,onChange:R=>w({...v,name:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:R=>w({...v,price:R.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Description"}),p.jsx("textarea",{value:v.description,onChange:R=>w({...v,description:R.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:R=>w({...v,image:R.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),v.image&&typeof v.image=="string"&&p.jsx("img",{src:v.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Color"}),p.jsx("input",{type:"text",value:v.color,onChange:R=>w({...v,color:R.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${n?"text-white":"text-red-600"}`,children:"Size"}),p.jsx("input",{type:"text",value:v.size,onChange:R=>w({...v,size:R.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${n?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>H(v),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),p.jsx("button",{onClick:()=>w(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[b.image&&b.image!=="https://via.placeholder.com/80"&&p.jsx("img",{src:b.image,alt:b.name,className:"w-16 h-16 object-cover rounded-md"}),p.jsxs("div",{children:[p.jsx("span",{className:`text-lg font-medium ${n?"text-white":"text-red-600"}`,children:b.name}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((S=e.find(R=>R.id===b.categoryId))==null?void 0:S.name)||"Unknown"]}),p.jsxs("p",{className:`text-sm ${n?"text-stone-300":"text-stone-600"}`,children:["Price: $",b.price.toFixed(2)]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>w(b),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),p.jsx("button",{onClick:()=>F(b.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},b.id)})})]}),p.jsxs("div",{className:"mt-6 flex gap-4",children:[p.jsx("button",{onClick:()=>j("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const j5=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),t=()=>{n("/fitness-tracker/create-custom-plan")};return p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),p.jsx("div",{className:"text-center",children:p.jsx("button",{onClick:t,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx(it,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),p.jsx(it,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},D5=()=>{const{id:n}=kf(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(null),[s,o]=P.useState(!0);P.useEffect(()=>{(async()=>{const h=Mi(),g=await ep(ar(h,"customPlans",n));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[n]);const l=c=>{if(!(t!=null&&t.startDate))return"";const h=new Date(t.startDate);return h.setDate(h.getDate()+c*7),h.toLocaleDateString()},u=(c,h)=>{if(!(t!=null&&t.startDate))return"";const g=new Date(t.startDate);return g.setDate(g.getDate()+c*7+h),g.toLocaleDateString()};return s?p.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsx("p",{className:"text-xl",children:"Loading..."})}):t?p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:t.name}),p.jsx("div",{className:"max-w-4xl mx-auto",children:t.weeks.map((c,h)=>p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",c.week," (",l(h),")"]}),c.days.map((g,v)=>p.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",u(h,v),")"]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),p.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((w,E)=>p.jsxs("li",{children:[w.name,": ",w.sets," sets x ",w.reps," ","reps"]},E))})]})]},v))]},h))})]})}):p.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d1=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},c)=>P.createElement("svg",{ref:c,...L5,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:d1("lucide",s),...u},[...l.map(([h,g])=>P.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=(n,e)=>{const t=P.forwardRef(({className:r,...s},o)=>P.createElement(M5,{ref:o,iconNode:e,className:d1(`lucide-${O5(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Vv=$l("ChevronDown",V5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$v=$l("ChevronUp",$5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dl=$l("CircleCheckBig",F5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],hl=$l("CircleX",U5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],z5=$l("SquarePen",B5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],H5=$l("Trash2",W5),q5=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(""),[s,o]=P.useState(new Date().toISOString().split("T")[0]),[l,u]=P.useState([]),[c,h]=P.useState({}),[g,v]=P.useState(Array.from({length:6},(W,H)=>({week:H+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[w,E]=P.useState(Array(6).fill(!1));P.useEffect(()=>{(async()=>{const H=Mi(),I=(await ur(tn(H,"workouts"))).docs.map(S=>({id:S.id,...S.data()})),b=I.reduce((S,R)=>{const M=R.muscleGroup||"Other";return S[M]||(S[M]=[]),S[M].push(R),S},{});u(I),h(b)})()},[]);const C=W=>{const H=[...w];H[W]=!H[W],E(H)},j=(W,H)=>{var I;const F=[...g];F[W].days[H].workouts.push({name:((I=l[0])==null?void 0:I.name)||"",sets:3,reps:10}),v(F)},A=(W,H,F,I,b)=>{const S=[...g];S[W].days[H].workouts[F][I]=b,v(S)},D=async W=>{W.preventDefault();const H=Mi(),F={userId:"anonymous",name:t,startDate:new Date(s).toISOString(),weeks:g},I=await kc(tn(H,"customPlans"),F);n(`/fitness-tracker/plan/${I.id}`)},V=W=>{const H=new Date(s);return H.setDate(H.getDate()+W*7),H.toLocaleDateString()},$=(W,H)=>{const F=new Date(s);return F.setDate(F.getDate()+W*7+H),F.toLocaleDateString()};return p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),p.jsxs("form",{onSubmit:D,children:[p.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),p.jsx("input",{type:"text",value:t,onChange:W=>r(W.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),p.jsx("input",{type:"date",value:s,onChange:W=>o(W.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((W,H)=>p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>C(H),children:[p.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",W.week," (",V(H),")"]}),w[H]?p.jsx($v,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):p.jsx(Vv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),w[H]&&p.jsx("div",{className:"mt-4",children:W.days.map((F,I)=>p.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[F.day," (",$(H,I),")"]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),F.workouts.length>0?F.workouts.map((b,S)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:b.name,onChange:R=>A(H,I,S,"name",R.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(c).map(R=>p.jsx("optgroup",{label:R,children:c[R].map(M=>p.jsx("option",{value:M.name,children:M.name},M.id))},R))}),p.jsx("input",{type:"number",value:b.sets,onChange:R=>A(H,I,S,"sets",Number(R.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),p.jsx("input",{type:"text",value:b.reps,onChange:R=>A(H,I,S,"reps",R.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},S)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),p.jsx("button",{type:"button",onClick:()=>j(H,I),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},I))})]},H))}),p.jsx("div",{className:"mt-8 max-w-md mx-auto",children:p.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},K5=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),{user:t,loading:r}=P.useContext($s),[s,o]=P.useState([]),[l,u]=P.useState([]),[c,h]=P.useState([]),[g,v]=P.useState([]),[w,E]=P.useState(new Date().toISOString().split("T")[0]);P.useEffect(()=>{(async()=>{try{const I=Mi(),b=await ur(tn(I,"workouts")),S=await ur(tn(I,"foods")),R=b.docs.map(B=>({id:B.id,...B.data()})),M=S.docs.map(B=>({id:B.id,...B.data()}));console.log("Fetched workouts from 'workouts' collection:",R),console.log("Fetched meals from 'foods' collection:",M),o(R),u(M),R.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),M.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(I){console.error("Error fetching data:",I)}})()},[]);const C=l.reduce((F,I)=>{const b=I.category||"Misc";return F[b]||(F[b]=[]),F[b].push(I),F},{}),j=["Meat","Fruit","Vegetable","Starch","Misc"],A=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...c,{name:s[0].name,sets:0,reps:0}])},D=(F,I,b)=>{const S=[...c];S[F][I]=I==="sets"||I==="reps"?Number(b):b,h(S)},V=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}v([...g,{name:l[0].name,quantity:1}])},$=(F,I,b)=>{const S=[...g];S[F][I]=I==="quantity"?Number(b):b,v(S)},W=F=>{const I=l.find(b=>b.name===F.name);return I?{protein:I.macros.protein*F.quantity,carbs:I.macros.carbs*F.quantity,fats:I.macros.fats*F.quantity}:{protein:0,carbs:0,fats:0}},H=async F=>{if(F.preventDefault(),!t){alert("Please log in to save a fitness log."),n("/login");return}const I=Mi(),b={userId:t.uid,date:new Date(w).toISOString(),workouts:c,meals:g.map(S=>({...S,macros:W(S)}))};await kc(tn(I,"userLogs"),b),n("/fitness-tracker/history")};return r?p.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),p.jsxs("form",{onSubmit:H,className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),p.jsx("input",{type:"date",value:w,onChange:F=>E(F.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):c.length>0?c.map((F,I)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:F.name,onChange:b=>D(I,"name",b.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(b=>p.jsx("option",{value:b.name,children:b.name},b.id))}),p.jsx("input",{type:"number",value:F.sets,onChange:b=>D(I,"sets",b.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),p.jsx("input",{type:"number",value:F.reps,onChange:b=>D(I,"reps",b.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},I)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),p.jsx("button",{type:"button",onClick:A,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((F,I)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:F.name,onChange:b=>$(I,"name",b.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:j.map(b=>C[b]&&p.jsx("optgroup",{label:b,children:C[b].map(S=>p.jsx("option",{value:S.name,children:S.name},S.id))},b))}),p.jsx("input",{type:"number",value:F.quantity,onChange:b=>$(I,"quantity",b.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},I)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),p.jsx("button",{type:"button",onClick:V,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),p.jsx("div",{className:"text-center",children:p.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},G5=()=>{const{isDarkMode:n}=P.useContext(Ze),[e,t]=P.useState([]);return P.useEffect(()=>{(async()=>{const s=Mi(),l=(await ur(tn(s,"userLogs"))).docs.map(u=>({id:u.id,...u.data()}));t(l.sort((u,c)=>new Date(c.date)-new Date(u.date)))})()},[]),p.jsx("div",{className:`min-h-screen pt-20 ${n?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${n?"text-red-400":"text-red-800"}`,children:"Fitness History"}),p.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>p.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${n?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[p.jsx("h2",{className:`text-xl font-semibold mb-2 ${n?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:`font-semibold mb-1 ${n?"text-red-400":"text-red-800"}`,children:"Workouts:"}),p.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>p.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:`font-semibold mb-1 ${n?"text-red-400":"text-red-800"}`,children:"Meals:"}),p.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>p.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):p.jsx("p",{className:`text-center text-lg ${n?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},Q5=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),{user:t,loading:r}=P.useContext($s),[s,o]=P.useState(""),[l,u]=P.useState(new Date().toISOString().split("T")[0]),[c,h]=P.useState([]),[g,v]=P.useState([]),[w,E]=P.useState(!0),[C,j]=P.useState(!0),[A,D]=P.useState(null),[V,$]=P.useState(null),[W,H]=P.useState(Array.from({length:6},(q,Q)=>({week:Q+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[F,I]=P.useState(Array(6).fill(!1)),[b,S]=P.useState(null);P.useEffect(()=>{(async()=>{try{E(!0),D(null);const{data:Q,error:te}=await Rn.from("foods").select("*");if(te)throw te;console.log("Fetched meals from Supabase 'foods' table:",Q),h(Q),Q.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(Q){console.error("Error fetching meals:",Q),D("Failed to load meals. Please try again later.")}finally{E(!1)}})()},[]),P.useEffect(()=>{(async()=>{if(t)try{j(!0),$(null);const{data:Q,error:te}=await Rn.from("nutrition_plans").select("*").eq("user_id",t.id);if(te)throw te;console.log("Fetched nutrition plans from Supabase:",Q),v(Q)}catch(Q){console.error("Error fetching nutrition plans:",Q),$("Failed to load your nutrition plans. Please try again later.")}finally{j(!1)}})()},[t]);const R=c.reduce((q,Q)=>{const te=Q.category||"Misc";return q[te]||(q[te]=[]),q[te].push(Q),q},{}),M=["Meat","Fruit","Vegetable","Starch","Misc"],B=["Breakfast","Lunch","Dinner","Snacks"],O=q=>{const Q=[...F];Q[q]=!Q[q],I(Q)},re=(q,Q)=>{if(c.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const te=[...W];te[q].days[Q].meals.push({name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"}),H(te)},he=(q,Q,te,pe,ge)=>{const We=[...W],He=We[q].days[Q].meals[te];if(pe==="name"){const It=c.find(Dn=>Dn.name===ge);He.name=ge,He.grams=It.portion||100,He.referencePortion=It.portion||100,He.macros=It.macros}else He[pe]=pe==="grams"?Number(ge):ge;H(We)},Se=(q,Q,te,pe)=>{const ge=[...W];ge[q].days[Q].macros[te]=Number(pe),H(ge)},we=(q,Q)=>{const te=[...W],pe=te[q].days[Q],ge={...pe.meals[pe.meals.length-1]};ge.name&&(pe.loggedMeals[ge.mealTime].push(ge),pe.meals[pe.meals.length-1]={name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"},H(te))},le=(q,Q,te,pe,ge)=>{S({weekIndex:q,dayIndex:Q,mealTime:te,mealIndex:pe,meal:ge})},me=()=>{if(!b)return;const{weekIndex:q,dayIndex:Q,mealTime:te,mealIndex:pe,meal:ge}=b,We=[...W];We[q].days[Q].loggedMeals[te][pe]=ge,H(We),S(null)},fe=(q,Q,te,pe)=>{const ge=[...W];ge[q].days[Q].loggedMeals[te].splice(pe,1),H(ge)},K=q=>Object.values(q).flat().reduce((te,pe)=>{const ge=pe.grams/pe.referencePortion;return{protein:te.protein+pe.macros.protein*ge,carbs:te.carbs+pe.macros.carbs*ge,fats:te.fats+pe.macros.fats*ge}},{protein:0,carbs:0,fats:0}),ee=(q,Q)=>({protein:q.protein>=Q.protein,carbs:q.carbs>=Q.carbs,fats:q.fats>=Q.fats}),Ee=q=>{const Q=new Date(l);return Q.setDate(Q.getDate()+q*7),Q.toLocaleDateString()},Le=(q,Q)=>{const te=new Date(l);return te.setDate(te.getDate()+q*7+Q),te.toLocaleDateString()},ie=async q=>{if(q.preventDefault(),!t){alert("Please log in to save a nutrition plan."),n("/login");return}try{const Q={user_id:t.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(W)},{data:te,error:pe}=await Rn.from("nutrition_plans").insert(Q).select();if(pe)throw pe;n(`/nutrition-plan/${te[0].id}`)}catch(Q){console.error("Error saving nutrition plan:",Q),alert("Failed to save nutrition plan. Please try again.")}};return r?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(Ac,{color:e?"#f87171":"#b91c1c"})}):w||C?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(Ac,{color:e?"#f87171":"#b91c1c"})}):A?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:A}):p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),V?p.jsx("div",{className:"text-center text-red-500 mb-12",children:V}):g.length>0?p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(q=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>n(`/nutrition-plan/${q.id}`),children:[p.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:q.name}),p.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",q.start_date]})]},q.id))})]}):p.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),p.jsxs("form",{onSubmit:ie,children:[p.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),p.jsx("input",{type:"text",value:s,onChange:q=>o(q.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),p.jsx("input",{type:"date",value:l,onChange:q=>u(q.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:W.map((q,Q)=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>O(Q),children:[p.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",q.week," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",Ee(Q),")"]})]}),F[Q]?p.jsx($v,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):p.jsx(Vv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),F[Q]&&p.jsx("div",{className:"mt-6 space-y-6",children:q.days.map((te,pe)=>p.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[te.day," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",Le(Q,pe),")"]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),p.jsx("input",{type:"number",value:te.macros.protein,onChange:ge=>Se(Q,pe,"protein",ge.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),p.jsx("input",{type:"number",value:te.macros.carbs,onChange:ge=>Se(Q,pe,"carbs",ge.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),p.jsx("input",{type:"number",value:te.macros.fats,onChange:ge=>Se(Q,pe,"fats",ge.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),c.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):te.meals.length>0?te.meals.map((ge,We)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[p.jsx("select",{value:ge.name,onChange:He=>he(Q,pe,We,"name",He.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:M.map(He=>R[He]&&p.jsx("optgroup",{label:He,children:R[He].map(It=>p.jsx("option",{value:It.name,children:It.name},It.id))},He))}),p.jsx("input",{type:"number",value:ge.grams,onChange:He=>he(Q,pe,We,"grams",He.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),p.jsx("select",{value:ge.mealTime,onChange:He=>he(Q,pe,We,"mealTime",He.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:B.map(He=>p.jsx("option",{value:He,children:He},He))}),p.jsx("button",{type:"button",onClick:()=>we(Q,pe),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},We)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),p.jsx("button",{type:"button",onClick:()=>re(Q,pe),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(te.loggedMeals).every(ge=>te.loggedMeals[ge].length===0)?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):B.map(ge=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:ge}),te.loggedMeals[ge].length>0?p.jsx("ul",{className:"space-y-2",children:te.loggedMeals[ge].map((We,He)=>p.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[p.jsxs("span",{className:"text-sm",children:[We.name,": ",We.grams,"g"]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{type:"button",onClick:()=>le(Q,pe,ge,He,{...We}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:p.jsx(z5,{className:"w-5 h-5"})}),p.jsx("button",{type:"button",onClick:()=>fe(Q,pe,ge,He),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:p.jsx(H5,{className:"w-5 h-5"})})]})]},He))}):p.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",ge.toLowerCase()," logged."]})]},ge)),p.jsxs("div",{className:"mt-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const ge=K(te.loggedMeals),We=ee(ge,te.macros);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${We.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ge.protein/te.macros.protein*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[ge.protein.toFixed(1),"g /"," ",te.macros.protein,"g"]}),We.protein?p.jsx(dl,{className:"w-5 h-5 text-green-500"}):p.jsx(hl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${We.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ge.carbs/te.macros.carbs*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[ge.carbs.toFixed(1),"g /"," ",te.macros.carbs,"g"]}),We.carbs?p.jsx(dl,{className:"w-5 h-5 text-green-500"}):p.jsx(hl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${We.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(ge.fats/te.macros.fats*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[ge.fats.toFixed(1),"g /"," ",te.macros.fats,"g"]}),We.fats?p.jsx(dl,{className:"w-5 h-5 text-green-500"}):p.jsx(hl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},pe))})]},Q))}),p.jsx("div",{className:"mt-12 max-w-md mx-auto",children:p.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),b&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:p.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[p.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),p.jsx("select",{value:b.meal.name,onChange:q=>{const Q=c.find(te=>te.name===q.target.value);S({...b,meal:{...b.meal,name:q.target.value,grams:Q.portion||100,referencePortion:Q.portion||100,macros:Q.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:M.map(q=>R[q]&&p.jsx("optgroup",{label:q,children:R[q].map(Q=>p.jsx("option",{value:Q.name,children:Q.name},Q.id))},q))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),p.jsx("input",{type:"number",value:b.meal.grams,onChange:q=>S({...b,meal:{...b.meal,grams:Number(q.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),p.jsx("select",{value:b.meal.mealTime,onChange:q=>S({...b,meal:{...b.meal,mealTime:q.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:B.map(q=>p.jsx("option",{value:q,children:q},q))})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("button",{type:"button",onClick:me,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),p.jsx("button",{type:"button",onClick:()=>S(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},J5=()=>{const{id:n}=kf(),{isDarkMode:e}=P.useContext(Ze),[t,r]=P.useState(null),[s,o]=P.useState(!0),[l,u]=P.useState(null),[c,h]=P.useState([]);P.useEffect(()=>{(async()=>{try{o(!0),u(null);const{data:D,error:V}=await Rn.from("nutrition_plans").select("*").eq("id",n).single();if(V)throw V;const $=JSON.parse(D.weeks);r({...D,weeks:$}),h(Array($.length).fill(!1))}catch(D){console.error("Error fetching nutrition plan:",D),u("Failed to load nutrition plan. Please try again later.")}finally{o(!1)}})()},[n]);const g=A=>{const D=[...c];D[A]=!D[A],h(D)},v=A=>Object.values(A).flat().reduce((V,$)=>{const W=$.grams/$.referencePortion;return{protein:V.protein+$.macros.protein*W,carbs:V.carbs+$.macros.carbs*W,fats:V.fats+$.macros.fats*W}},{protein:0,carbs:0,fats:0}),w=(A,D)=>({protein:A.protein>=D.protein,carbs:A.carbs>=D.carbs,fats:A.fats>=D.fats}),E=A=>{const D=new Date(t.start_date);return D.setDate(D.getDate()+A*7),D.toLocaleDateString()},C=(A,D)=>{const V=new Date(t.start_date);return V.setDate(V.getDate()+A*7+D),V.toLocaleDateString()};if(s)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(Ac,{color:e?"#f87171":"#b91c1c"})});if(l)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:l});if(!t)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const j=["Breakfast","Lunch","Dinner","Snacks"];return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:t.name}),p.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(t.start_date).toLocaleDateString()]}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:t.weeks.map((A,D)=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>g(D),children:[p.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",A.week," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",E(D),")"]})]}),c[D]?p.jsx($v,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):p.jsx(Vv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),c[D]&&p.jsx("div",{className:"mt-6 space-y-6",children:A.days.map((V,$)=>p.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[V.day," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",C(D,$),")"]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.protein,"g"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.carbs,"g"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.fats,"g"]})]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(V.loggedMeals).every(W=>V.loggedMeals[W].length===0)?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):j.map(W=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:W}),V.loggedMeals[W].length>0?p.jsx("ul",{className:"space-y-2",children:V.loggedMeals[W].map((H,F)=>p.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:p.jsxs("span",{className:"text-sm",children:[H.name,": ",H.grams,"g"]})},F))}):p.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",W.toLowerCase()," logged."]})]},W)),p.jsxs("div",{className:"mt-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const W=v(V.loggedMeals),H=w(W,V.macros);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${H.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.protein/V.macros.protein*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[W.protein.toFixed(1),"g /"," ",V.macros.protein,"g"]}),H.protein?p.jsx(dl,{className:"w-5 h-5 text-green-500"}):p.jsx(hl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${H.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.carbs/V.macros.carbs*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[W.carbs.toFixed(1),"g /"," ",V.macros.carbs,"g"]}),H.carbs?p.jsx(dl,{className:"w-5 h-5 text-green-500"}):p.jsx(hl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${H.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(W.fats/V.macros.fats*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[W.fats.toFixed(1),"g /"," ",V.macros.fats,"g"]}),H.fats?p.jsx(dl,{className:"w-5 h-5 text-green-500"}):p.jsx(hl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},$))})]},D))})]})},Y5=()=>{const[n,e]=P.useState(""),[t,r]=P.useState(""),[s,o]=P.useState(null),[l,u]=P.useState(!1),{login:c}=P.useContext($s),{isDarkMode:h}=P.useContext(Ze),g=rn(),v=async w=>{var E,C;w.preventDefault(),o(null),u(!0);try{await c(n,t);const j=((C=(E=location.state)==null?void 0:E.from)==null?void 0:C.pathname)||"/profile";g(j,{replace:!0})}catch(j){o(j.message),console.error("Login error:",j.message)}finally{u(!1)}};return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),p.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsxs("form",{onSubmit:v,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),p.jsx("input",{type:"email",value:n,onChange:w=>e(w.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),p.jsx("input",{type:"password",value:t,onChange:w=>r(w.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&p.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:s}),p.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?p.jsxs(p.Fragment,{children:[p.jsx(eD,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx(it,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),p.jsx("div",{className:"mt-2 text-center",children:p.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",p.jsx(it,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},X5=()=>{const n=rn(),{isDarkMode:e}=P.useContext(Ze),{signup:t,user:r,loading:s}=P.useContext($s),[o,l]=P.useState(""),[u,c]=P.useState(""),[h,g]=P.useState(null),v=async w=>{w.preventDefault(),g(null);try{await t(o,u),n("/login")}catch(E){E.message.includes("User already exists")?g("Email already in use. A confirmation email has been resent."):E.message.includes("rate limit")?g("Too many signup attempts. Please wait and try again later."):g("An error occurred during signup. Please try again.")}};return s?p.jsx("div",{children:"Loading..."}):r?(n("/nutrition"),null):p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Sign Up"}),p.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:w=>l(w.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),p.jsx("input",{type:"password",value:u,onChange:w=>c(w.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&p.jsx("p",{className:`text-center text-sm mb-6 ${e?"text-red-400":"text-red-800"}`,children:h}),p.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),p.jsxs("p",{className:`text-center mt-6 text-sm ${e?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",p.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},Z5=()=>{var j,A,D;const{user:n,loading:e,refreshUser:t}=P.useContext($s),{isDarkMode:r}=P.useContext(Ze),s=rn(),[o,l]=P.useState(((j=n==null?void 0:n.user_metadata)==null?void 0:j.displayName)||""),[u,c]=P.useState([]),[h,g]=P.useState(null),[v,w]=P.useState(null);if(P.useEffect(()=>{(async()=>{if(n)try{const{data:$,error:W}=await Rn.from("nutrition_plans").select("*").eq("user_id",n.id);if(W)throw W;c($||[])}catch($){console.error("Error fetching nutrition plans:",$.message)}})()},[n]),e)return p.jsx("div",{children:"Loading..."});if(!n)return s("/login"),null;const E=async V=>{V.preventDefault(),g(null),w(null);try{const{error:$}=await Rn.auth.updateUser({data:{displayName:o}});if($)throw $;w("Profile updated successfully!"),await t()}catch($){g("Failed to update profile. Please try again."),console.error("Update profile error:",$.message)}},C=(A=n==null?void 0:n.user_metadata)!=null&&A.displayName?n.user_metadata.displayName.charAt(0).toUpperCase()+n.user_metadata.displayName.slice(1):"User";return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[C," - Dashboard "]}),p.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",C,"!"]}),p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",n.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Username:"})," ",((D=n.user_metadata)==null?void 0:D.displayName)||"Not set"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(n.created_at).toLocaleDateString()]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(n.updated_at).toLocaleDateString()]}),n.user_metadata&&Object.keys(n.user_metadata).length>0?p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Additional Info:"}),p.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(n.user_metadata).map(([V,$])=>p.jsxs("li",{children:[V,": ",$]},V))})]}):p.jsx("p",{children:"No additional user metadata available."})]})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),u.length>0?p.jsx("ul",{className:"space-y-2",children:u.map(V=>p.jsx("li",{children:p.jsx(Link,{to:`/nutrition-plan/${V.id}`,className:"hover:text-red-600 transition-colors duration-200",children:V.name||`Plan ${V.id}`})},V.id))}):p.jsx("p",{children:"No nutrition plans found."})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),p.jsxs("form",{onSubmit:E,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),p.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&p.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:h}),v&&p.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:v}),p.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),p.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),p.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),p.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},eB=()=>{const{user:n,loading:e}=P.useContext($s),t=jr();return e?p.jsx("div",{children:"Loading..."}):n?p.jsx(tS,{}):p.jsx(yR,{to:"/login",state:{from:t},replace:!0})},Ze=P.createContext();function tB(){const[n,e]=P.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});P.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(n))},[n]);const t=()=>e(s=>!s),r="/aussie-gut-pack/";return console.log("Basename:",r),p.jsx(hS,{children:p.jsx(X9,{children:p.jsx(Fj,{children:p.jsx(Ze.Provider,{value:{isDarkMode:n,toggleTheme:t},children:p.jsx(zR,{basename:r,children:p.jsx(Af,{children:p.jsx(Pf,{classNames:"fade",timeout:300,children:p.jsx(wR,{children:p.jsxs(Xe,{path:"/",element:p.jsx(tD,{}),children:[p.jsx(Xe,{index:!0,element:p.jsx(Y9,{})}),p.jsx(Xe,{path:"products",element:p.jsx(Z9,{})}),p.jsx(Xe,{path:"cart",element:p.jsx(e5,{})}),p.jsx(Xe,{path:"checkout",element:p.jsx(t5,{})}),p.jsx(Xe,{path:"gut-health",element:p.jsx(n5,{})}),p.jsx(Xe,{path:"gut-health/:id",element:p.jsx(r5,{})}),p.jsx(Xe,{path:"purchase",element:p.jsx(i5,{})}),p.jsx(Xe,{path:"blog",element:p.jsx(d5,{})}),p.jsx(Xe,{path:"blog/:id",element:p.jsx(h5,{})}),p.jsx(Xe,{path:"faq",element:p.jsx(p5,{})}),p.jsx(Xe,{path:"contact",element:p.jsx(P5,{})}),p.jsx(Xe,{path:"admin",element:p.jsx(A5,{})}),p.jsx(Xe,{path:"admin/home",element:p.jsx(I5,{})}),p.jsx(Xe,{path:"admin/blog",element:p.jsx(R5,{})}),p.jsx(Xe,{path:"admin/products",element:p.jsx(N5,{})}),p.jsx(Xe,{path:"fitness-tracker",element:p.jsx(j5,{})}),p.jsx(Xe,{path:"fitness-tracker/plan/:id",element:p.jsx(D5,{})}),p.jsx(Xe,{path:"fitness-tracker/create-custom-plan",element:p.jsx(q5,{})}),p.jsx(Xe,{path:"fitness-tracker/log",element:p.jsx(K5,{})}),p.jsx(Xe,{path:"fitness-tracker/history",element:p.jsx(G5,{})}),p.jsx(Xe,{path:"nutrition",element:p.jsx(Q5,{})}),p.jsx(Xe,{path:"nutrition-plan/:id",element:p.jsx(J5,{})}),p.jsx(Xe,{path:"login",element:p.jsx(Y5,{})}),p.jsx(Xe,{path:"signup",element:p.jsx(X5,{})}),p.jsx(Xe,{element:p.jsx(eB,{}),children:p.jsx(Xe,{path:"profile",element:p.jsx(Z5,{})})}),p.jsx(Xe,{path:"*",element:p.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");kI.createRoot(document.getElementById("root")).render(p.jsx(tt.StrictMode,{children:p.jsx(tB,{})}));export{Vo as g};
