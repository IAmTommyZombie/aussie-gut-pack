var mI=Object.defineProperty;var gI=(t,e,n)=>e in t?mI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ss=(t,e,n)=>gI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Fo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Fm={exports:{}},Nu={},Um={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yw;function vI(){if(Yw)return Ue;Yw=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function x(W){return W===null||typeof W!="object"?null:(W=v&&W[v]||W["@@iterator"],typeof W=="function"?W:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,D={};function P(W,te,be){this.props=W,this.context=te,this.refs=D,this.updater=be||b}P.prototype.isReactComponent={},P.prototype.setState=function(W,te){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,te,"setState")},P.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function j(){}j.prototype=P.prototype;function V(W,te,be){this.props=W,this.context=te,this.refs=D,this.updater=be||b}var $=V.prototype=new j;$.constructor=V,k($,P.prototype),$.isPureReactComponent=!0;var z=Array.isArray,H=Object.prototype.hasOwnProperty,Y={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function E(W,te,be){var De,Ae={},ie=null,oe=null;if(te!=null)for(De in te.ref!==void 0&&(oe=te.ref),te.key!==void 0&&(ie=""+te.key),te)H.call(te,De)&&!R.hasOwnProperty(De)&&(Ae[De]=te[De]);var Q=arguments.length-2;if(Q===1)Ae.children=be;else if(1<Q){for(var q=Array(Q),Z=0;Z<Q;Z++)q[Z]=arguments[Z+2];Ae.children=q}if(W&&W.defaultProps)for(De in Q=W.defaultProps,Q)Ae[De]===void 0&&(Ae[De]=Q[De]);return{$$typeof:t,type:W,key:ie,ref:oe,props:Ae,_owner:Y.current}}function S(W,te){return{$$typeof:t,type:W.type,key:te,ref:W.ref,props:W.props,_owner:W._owner}}function I(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function O(W){var te={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(be){return te[be]})}var F=/\/+/g;function L(W,te){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):te.toString(36)}function re(W,te,be,De,Ae){var ie=typeof W;(ie==="undefined"||ie==="boolean")&&(W=null);var oe=!1;if(W===null)oe=!0;else switch(ie){case"string":case"number":oe=!0;break;case"object":switch(W.$$typeof){case t:case e:oe=!0}}if(oe)return oe=W,Ae=Ae(oe),W=De===""?"."+L(oe,0):De,z(Ae)?(be="",W!=null&&(be=W.replace(F,"$&/")+"/"),re(Ae,te,be,"",function(Z){return Z})):Ae!=null&&(I(Ae)&&(Ae=S(Ae,be+(!Ae.key||oe&&oe.key===Ae.key?"":(""+Ae.key).replace(F,"$&/")+"/")+W)),te.push(Ae)),1;if(oe=0,De=De===""?".":De+":",z(W))for(var Q=0;Q<W.length;Q++){ie=W[Q];var q=De+L(ie,Q);oe+=re(ie,te,be,q,Ae)}else if(q=x(W),typeof q=="function")for(W=q.call(W),Q=0;!(ie=W.next()).done;)ie=ie.value,q=De+L(ie,Q++),oe+=re(ie,te,be,q,Ae);else if(ie==="object")throw te=String(W),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return oe}function pe(W,te,be){if(W==null)return W;var De=[],Ae=0;return re(W,De,"","",function(ie){return te.call(be,ie,Ae++)}),De}function Me(W){if(W._status===-1){var te=W._result;te=te(),te.then(function(be){(W._status===0||W._status===-1)&&(W._status=1,W._result=be)},function(be){(W._status===0||W._status===-1)&&(W._status=2,W._result=be)}),W._status===-1&&(W._status=0,W._result=te)}if(W._status===1)return W._result.default;throw W._result}var _e={current:null},ne={transition:null},me={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:ne,ReactCurrentOwner:Y};function fe(){throw Error("act(...) is not supported in production builds of React.")}return Ue.Children={map:pe,forEach:function(W,te,be){pe(W,function(){te.apply(this,arguments)},be)},count:function(W){var te=0;return pe(W,function(){te++}),te},toArray:function(W){return pe(W,function(te){return te})||[]},only:function(W){if(!I(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Ue.Component=P,Ue.Fragment=n,Ue.Profiler=s,Ue.PureComponent=V,Ue.StrictMode=r,Ue.Suspense=c,Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ue.act=fe,Ue.cloneElement=function(W,te,be){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var De=k({},W.props),Ae=W.key,ie=W.ref,oe=W._owner;if(te!=null){if(te.ref!==void 0&&(ie=te.ref,oe=Y.current),te.key!==void 0&&(Ae=""+te.key),W.type&&W.type.defaultProps)var Q=W.type.defaultProps;for(q in te)H.call(te,q)&&!R.hasOwnProperty(q)&&(De[q]=te[q]===void 0&&Q!==void 0?Q[q]:te[q])}var q=arguments.length-2;if(q===1)De.children=be;else if(1<q){Q=Array(q);for(var Z=0;Z<q;Z++)Q[Z]=arguments[Z+2];De.children=Q}return{$$typeof:t,type:W.type,key:Ae,ref:ie,props:De,_owner:oe}},Ue.createContext=function(W){return W={$$typeof:l,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:o,_context:W},W.Consumer=W},Ue.createElement=E,Ue.createFactory=function(W){var te=E.bind(null,W);return te.type=W,te},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(W){return{$$typeof:u,render:W}},Ue.isValidElement=I,Ue.lazy=function(W){return{$$typeof:g,_payload:{_status:-1,_result:W},_init:Me}},Ue.memo=function(W,te){return{$$typeof:h,type:W,compare:te===void 0?null:te}},Ue.startTransition=function(W){var te=ne.transition;ne.transition={};try{W()}finally{ne.transition=te}},Ue.unstable_act=fe,Ue.useCallback=function(W,te){return _e.current.useCallback(W,te)},Ue.useContext=function(W){return _e.current.useContext(W)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(W){return _e.current.useDeferredValue(W)},Ue.useEffect=function(W,te){return _e.current.useEffect(W,te)},Ue.useId=function(){return _e.current.useId()},Ue.useImperativeHandle=function(W,te,be){return _e.current.useImperativeHandle(W,te,be)},Ue.useInsertionEffect=function(W,te){return _e.current.useInsertionEffect(W,te)},Ue.useLayoutEffect=function(W,te){return _e.current.useLayoutEffect(W,te)},Ue.useMemo=function(W,te){return _e.current.useMemo(W,te)},Ue.useReducer=function(W,te,be){return _e.current.useReducer(W,te,be)},Ue.useRef=function(W){return _e.current.useRef(W)},Ue.useState=function(W){return _e.current.useState(W)},Ue.useSyncExternalStore=function(W,te,be){return _e.current.useSyncExternalStore(W,te,be)},Ue.useTransition=function(){return _e.current.useTransition()},Ue.version="18.3.1",Ue}var Xw;function z0(){return Xw||(Xw=1,Um.exports=vI()),Um.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zw;function xI(){if(Zw)return Nu;Zw=1;var t=z0(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(u,c,h){var g,v={},x=null,b=null;h!==void 0&&(x=""+h),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(b=c.ref);for(g in c)r.call(c,g)&&!o.hasOwnProperty(g)&&(v[g]=c[g]);if(u&&u.defaultProps)for(g in c=u.defaultProps,c)v[g]===void 0&&(v[g]=c[g]);return{$$typeof:e,type:u,key:x,ref:b,props:v,_owner:s.current}}return Nu.Fragment=n,Nu.jsx=l,Nu.jsxs=l,Nu}var e_;function wI(){return e_||(e_=1,Fm.exports=xI()),Fm.exports}var p=wI(),A=z0();const tt=Fo(A);var uh={},Bm={exports:{}},Pn={},zm={exports:{}},Wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t_;function _I(){return t_||(t_=1,function(t){function e(ne,me){var fe=ne.length;ne.push(me);e:for(;0<fe;){var W=fe-1>>>1,te=ne[W];if(0<s(te,me))ne[W]=me,ne[fe]=te,fe=W;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var me=ne[0],fe=ne.pop();if(fe!==me){ne[0]=fe;e:for(var W=0,te=ne.length,be=te>>>1;W<be;){var De=2*(W+1)-1,Ae=ne[De],ie=De+1,oe=ne[ie];if(0>s(Ae,fe))ie<te&&0>s(oe,Ae)?(ne[W]=oe,ne[ie]=fe,W=ie):(ne[W]=Ae,ne[De]=fe,W=De);else if(ie<te&&0>s(oe,fe))ne[W]=oe,ne[ie]=fe,W=ie;else break e}}return me}function s(ne,me){var fe=ne.sortIndex-me.sortIndex;return fe!==0?fe:ne.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var c=[],h=[],g=1,v=null,x=3,b=!1,k=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(ne){for(var me=n(h);me!==null;){if(me.callback===null)r(h);else if(me.startTime<=ne)r(h),me.sortIndex=me.expirationTime,e(c,me);else break;me=n(h)}}function z(ne){if(D=!1,$(ne),!k)if(n(c)!==null)k=!0,Me(H);else{var me=n(h);me!==null&&_e(z,me.startTime-ne)}}function H(ne,me){k=!1,D&&(D=!1,j(E),E=-1),b=!0;var fe=x;try{for($(me),v=n(c);v!==null&&(!(v.expirationTime>me)||ne&&!O());){var W=v.callback;if(typeof W=="function"){v.callback=null,x=v.priorityLevel;var te=W(v.expirationTime<=me);me=t.unstable_now(),typeof te=="function"?v.callback=te:v===n(c)&&r(c),$(me)}else r(c);v=n(c)}if(v!==null)var be=!0;else{var De=n(h);De!==null&&_e(z,De.startTime-me),be=!1}return be}finally{v=null,x=fe,b=!1}}var Y=!1,R=null,E=-1,S=5,I=-1;function O(){return!(t.unstable_now()-I<S)}function F(){if(R!==null){var ne=t.unstable_now();I=ne;var me=!0;try{me=R(!0,ne)}finally{me?L():(Y=!1,R=null)}}else Y=!1}var L;if(typeof V=="function")L=function(){V(F)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,pe=re.port2;re.port1.onmessage=F,L=function(){pe.postMessage(null)}}else L=function(){P(F,0)};function Me(ne){R=ne,Y||(Y=!0,L())}function _e(ne,me){E=P(function(){ne(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ne){ne.callback=null},t.unstable_continueExecution=function(){k||b||(k=!0,Me(H))},t.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<ne?Math.floor(1e3/ne):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(ne){switch(x){case 1:case 2:case 3:var me=3;break;default:me=x}var fe=x;x=me;try{return ne()}finally{x=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var fe=x;x=ne;try{return me()}finally{x=fe}},t.unstable_scheduleCallback=function(ne,me,fe){var W=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?W+fe:W):fe=W,ne){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=fe+te,ne={id:g++,callback:me,priorityLevel:ne,startTime:fe,expirationTime:te,sortIndex:-1},fe>W?(ne.sortIndex=fe,e(h,ne),n(c)===null&&ne===n(h)&&(D?(j(E),E=-1):D=!0,_e(z,fe-W))):(ne.sortIndex=te,e(c,ne),k||b||(k=!0,Me(H))),ne},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(ne){var me=x;return function(){var fe=x;x=me;try{return ne.apply(this,arguments)}finally{x=fe}}}}(Wm)),Wm}var n_;function bI(){return n_||(n_=1,zm.exports=_I()),zm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r_;function EI(){if(r_)return Pn;r_=1;var t=z0(),e=bI();function n(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function x(i){return c.call(v,i)?!0:c.call(g,i)?!1:h.test(i)?v[i]=!0:(g[i]=!0,!1)}function b(i,a,d,m){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:d!==null?!d.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,a,d,m){if(a===null||typeof a>"u"||b(i,a,d,m))return!0;if(m)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function D(i,a,d,m,y,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=y,this.mustUseProperty=d,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){P[i]=new D(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];P[a]=new D(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){P[i]=new D(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){P[i]=new D(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){P[i]=new D(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){P[i]=new D(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){P[i]=new D(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){P[i]=new D(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){P[i]=new D(i,5,!1,i.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function V(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(j,V);P[a]=new D(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(j,V);P[a]=new D(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(j,V);P[a]=new D(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!1,!1)}),P.xlinkHref=new D("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){P[i]=new D(i,1,!1,i.toLowerCase(),null,!0,!0)});function $(i,a,d,m){var y=P.hasOwnProperty(a)?P[a]:null;(y!==null?y.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,d,y,m)&&(d=null),m||y===null?x(a)&&(d===null?i.removeAttribute(a):i.setAttribute(a,""+d)):y.mustUseProperty?i[y.propertyName]=d===null?y.type===3?!1:"":d:(a=y.attributeName,m=y.attributeNamespace,d===null?i.removeAttribute(a):(y=y.type,d=y===3||y===4&&d===!0?"":""+d,m?i.setAttributeNS(m,a,d):i.setAttribute(a,d))))}var z=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Y=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),O=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),ne=Symbol.iterator;function me(i){return i===null||typeof i!="object"?null:(i=ne&&i[ne]||i["@@iterator"],typeof i=="function"?i:null)}var fe=Object.assign,W;function te(i){if(W===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);W=a&&a[1]||""}return`
`+W+i}var be=!1;function De(i,a){if(!i||be)return"";be=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(X){var m=X}Reflect.construct(i,[],a)}else{try{a.call()}catch(X){m=X}i.call(a.prototype)}else{try{throw Error()}catch(X){m=X}i()}}catch(X){if(X&&m&&typeof X.stack=="string"){for(var y=X.stack.split(`
`),_=m.stack.split(`
`),C=y.length-1,M=_.length-1;1<=C&&0<=M&&y[C]!==_[M];)M--;for(;1<=C&&0<=M;C--,M--)if(y[C]!==_[M]){if(C!==1||M!==1)do if(C--,M--,0>M||y[C]!==_[M]){var U=`
`+y[C].replace(" at new "," at ");return i.displayName&&U.includes("<anonymous>")&&(U=U.replace("<anonymous>",i.displayName)),U}while(1<=C&&0<=M);break}}}finally{be=!1,Error.prepareStackTrace=d}return(i=i?i.displayName||i.name:"")?te(i):""}function Ae(i){switch(i.tag){case 5:return te(i.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return i=De(i.type,!1),i;case 11:return i=De(i.type.render,!1),i;case 1:return i=De(i.type,!0),i;default:return""}}function ie(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case Y:return"Portal";case S:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case re:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case I:return(i._context.displayName||"Context")+".Provider";case F:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case pe:return a=i.displayName||null,a!==null?a:ie(i.type)||"Memo";case Me:a=i._payload,i=i._init;try{return ie(i(a))}catch{}}return null}function oe(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ie(a);case 8:return a===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Q(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function q(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Z(i){var a=q(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),m=""+i[a];if(!i.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,_=d.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){m=""+C,_.call(this,C)}}),Object.defineProperty(i,a,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function xe(i){i._valueTracker||(i._valueTracker=Z(i))}function Oe(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return i&&(m=q(i)?i.checked?"true":"false":i.value),i=m,i!==d?(a.setValue(i),!0):!1}function It(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Kn(i,a){var d=a.checked;return fe({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??i._wrapperState.initialChecked})}function as(i,a){var d=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;d=Q(a.value!=null?a.value:d),i._wrapperState={initialChecked:m,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Fs(i,a){a=a.checked,a!=null&&$(i,"checked",a,!1)}function ls(i,a){Fs(i,a);var d=Q(a.value),m=a.type;if(d!=null)m==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+d):i.value!==""+d&&(i.value=""+d);else if(m==="submit"||m==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?Rt(i,a.type,d):a.hasOwnProperty("defaultValue")&&Rt(i,a.type,Q(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function Wi(i,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,d||a===i.value||(i.value=a),i.defaultValue=a}d=i.name,d!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,d!==""&&(i.name=d)}function Rt(i,a,d){(a!=="number"||It(i.ownerDocument)!==i)&&(d==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+d&&(i.defaultValue=""+d))}var On=Array.isArray;function us(i,a,d,m){if(i=i.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<i.length;d++)y=a.hasOwnProperty("$"+i[d].value),i[d].selected!==y&&(i[d].selected=y),y&&m&&(i[d].defaultSelected=!0)}else{for(d=""+Q(d),a=null,y=0;y<i.length;y++){if(i[y].value===d){i[y].selected=!0,m&&(i[y].defaultSelected=!0);return}a!==null||i[y].disabled||(a=i[y])}a!==null&&(a.selected=!0)}}function Fl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return fe({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Go(i,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(On(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}i._wrapperState={initialValue:Q(d)}}function Qo(i,a){var d=Q(a.value),m=Q(a.defaultValue);d!=null&&(d=""+d,d!==i.value&&(i.value=d),a.defaultValue==null&&i.defaultValue!==d&&(i.defaultValue=d)),m!=null&&(i.defaultValue=""+m)}function Ul(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function Nt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?Nt(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var cs,Bl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,m,y){MSApp.execUnsafeLocalFunction(function(){return i(a,d,m,y)})}:i}(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(cs=cs||document.createElement("div"),cs.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=cs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Us(i,a){if(a){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=a;return}}i.textContent=a}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qi=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(i){qi.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),Hi[a]=Hi[i]})});function zl(i,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Hi.hasOwnProperty(i)&&Hi[i]?(""+a).trim():a+"px"}function Wl(i,a){i=i.style;for(var d in a)if(a.hasOwnProperty(d)){var m=d.indexOf("--")===0,y=zl(d,a[d],m);d==="float"&&(d="cssFloat"),m?i.setProperty(d,y):i[d]=y}}var Hl=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ql(i,a){if(a){if(Hl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function Kl(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Jo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Yo=null,Gn=null,Or=null;function Xo(i){if(i=yu(i)){if(typeof Yo!="function")throw Error(n(280));var a=i.stateNode;a&&(a=Td(a),Yo(i.stateNode,i.type,a))}}function Lr(i){Gn?Or?Or.push(i):Or=[i]:Gn=i}function Gl(){if(Gn){var i=Gn,a=Or;if(Or=Gn=null,Xo(i),a)for(i=0;i<a.length;i++)Xo(a[i])}}function Gi(i,a){return i(a)}function Ql(){}var ds=!1;function Jl(i,a,d){if(ds)return i(a,d);ds=!0;try{return Gi(i,a,d)}finally{ds=!1,(Gn!==null||Or!==null)&&(Ql(),Gl())}}function Et(i,a){var d=i.stateNode;if(d===null)return null;var m=Td(d);if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Zo=!1;if(u)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{Zo=!1}function Qi(i,a,d,m,y,_,C,M,U){var X=Array.prototype.slice.call(arguments,3);try{a.apply(d,X)}catch(le){this.onError(le)}}var Ji=!1,ea=null,fr=!1,Yl=null,pp={onError:function(i){Ji=!0,ea=i}};function ta(i,a,d,m,y,_,C,M,U){Ji=!1,ea=null,Qi.apply(pp,arguments)}function Qc(i,a,d,m,y,_,C,M,U){if(ta.apply(this,arguments),Ji){if(Ji){var X=ea;Ji=!1,ea=null}else throw Error(n(198));fr||(fr=!0,Yl=X)}}function pr(i){var a=i,d=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,a.flags&4098&&(d=a.return),i=a.return;while(i)}return a.tag===3?d:null}function Yi(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function mr(i){if(pr(i)!==i)throw Error(n(188))}function Jc(i){var a=i.alternate;if(!a){if(a=pr(i),a===null)throw Error(n(188));return a!==i?null:i}for(var d=i,m=a;;){var y=d.return;if(y===null)break;var _=y.alternate;if(_===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===d)return mr(y),i;if(_===m)return mr(y),a;_=_.sibling}throw Error(n(188))}if(d.return!==m.return)d=y,m=_;else{for(var C=!1,M=y.child;M;){if(M===d){C=!0,d=y,m=_;break}if(M===m){C=!0,m=y,d=_;break}M=M.sibling}if(!C){for(M=_.child;M;){if(M===d){C=!0,d=_,m=y;break}if(M===m){C=!0,m=_,d=y;break}M=M.sibling}if(!C)throw Error(n(189))}}if(d.alternate!==m)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?i:a}function Xl(i){return i=Jc(i),i!==null?na(i):null}function na(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=na(i);if(a!==null)return a;i=i.sibling}return null}var ra=e.unstable_scheduleCallback,Zl=e.unstable_cancelCallback,Yc=e.unstable_shouldYield,mp=e.unstable_requestPaint,nt=e.unstable_now,Xc=e.unstable_getCurrentPriorityLevel,Xi=e.unstable_ImmediatePriority,Bs=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,eu=e.unstable_LowPriority,Zc=e.unstable_IdlePriority,Zi=null,Ln=null;function ed(i){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Zi,i,void 0,(i.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:nd,tu=Math.log,td=Math.LN2;function nd(i){return i>>>=0,i===0?32:31-(tu(i)/td|0)|0}var sa=64,ia=4194304;function zs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function eo(i,a){var d=i.pendingLanes;if(d===0)return 0;var m=0,y=i.suspendedLanes,_=i.pingedLanes,C=d&268435455;if(C!==0){var M=C&~y;M!==0?m=zs(M):(_&=C,_!==0&&(m=zs(_)))}else C=d&~y,C!==0?m=zs(C):_!==0&&(m=zs(_));if(m===0)return 0;if(a!==0&&a!==m&&!(a&y)&&(y=m&-m,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if(m&4&&(m|=d&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=m;0<a;)d=31-mn(a),y=1<<d,m|=i[d],a&=~y;return m}function gp(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(i,a){for(var d=i.suspendedLanes,m=i.pingedLanes,y=i.expirationTimes,_=i.pendingLanes;0<_;){var C=31-mn(_),M=1<<C,U=y[C];U===-1?(!(M&d)||M&m)&&(y[C]=gp(M,a)):U<=a&&(i.expiredLanes|=M),_&=~M}}function Mn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function to(){var i=sa;return sa<<=1,!(sa&4194240)&&(sa=64),i}function Ws(i){for(var a=[],d=0;31>d;d++)a.push(i);return a}function Hs(i,a,d){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-mn(a),i[a]=d}function et(i,a){var d=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var m=i.eventTimes;for(i=i.expirationTimes;0<d;){var y=31-mn(d),_=1<<y;a[y]=0,m[y]=-1,i[y]=-1,d&=~_}}function qs(i,a){var d=i.entangledLanes|=a;for(i=i.entanglements;d;){var m=31-mn(d),y=1<<m;y&a|i[m]&a&&(i[m]|=a),d&=~y}}var He=0;function Ks(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var rd,oa,sd,id,od,nu=!1,Mr=[],Gt=null,gr=null,yr=null,Gs=new Map,Jn=new Map,Vr=[],yp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ad(i,a){switch(i){case"focusin":case"focusout":Gt=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":yr=null;break;case"pointerover":case"pointerout":Gs.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(a.pointerId)}}function _n(i,a,d,m,y,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:_,targetContainers:[y]},a!==null&&(a=yu(a),a!==null&&oa(a)),i):(i.eventSystemFlags|=m,a=i.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),i)}function vp(i,a,d,m,y){switch(a){case"focusin":return Gt=_n(Gt,i,a,d,m,y),!0;case"dragenter":return gr=_n(gr,i,a,d,m,y),!0;case"mouseover":return yr=_n(yr,i,a,d,m,y),!0;case"pointerover":var _=y.pointerId;return Gs.set(_,_n(Gs.get(_)||null,i,a,d,m,y)),!0;case"gotpointercapture":return _=y.pointerId,Jn.set(_,_n(Jn.get(_)||null,i,a,d,m,y)),!0}return!1}function ld(i){var a=oo(i.target);if(a!==null){var d=pr(a);if(d!==null){if(a=d.tag,a===13){if(a=Yi(d),a!==null){i.blockedOn=a,od(i.priority,function(){sd(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function fs(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var d=aa(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(d===null){d=i.nativeEvent;var m=new d.constructor(d.type,d);Ki=m,d.target.dispatchEvent(m),Ki=null}else return a=yu(d),a!==null&&oa(a),i.blockedOn=d,!1;a.shift()}return!0}function no(i,a,d){fs(i)&&d.delete(a)}function ud(){nu=!1,Gt!==null&&fs(Gt)&&(Gt=null),gr!==null&&fs(gr)&&(gr=null),yr!==null&&fs(yr)&&(yr=null),Gs.forEach(no),Jn.forEach(no)}function vr(i,a){i.blockedOn===a&&(i.blockedOn=null,nu||(nu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ud)))}function xr(i){function a(y){return vr(y,i)}if(0<Mr.length){vr(Mr[0],i);for(var d=1;d<Mr.length;d++){var m=Mr[d];m.blockedOn===i&&(m.blockedOn=null)}}for(Gt!==null&&vr(Gt,i),gr!==null&&vr(gr,i),yr!==null&&vr(yr,i),Gs.forEach(a),Jn.forEach(a),d=0;d<Vr.length;d++)m=Vr[d],m.blockedOn===i&&(m.blockedOn=null);for(;0<Vr.length&&(d=Vr[0],d.blockedOn===null);)ld(d),d.blockedOn===null&&Vr.shift()}var ps=z.ReactCurrentBatchConfig,Qs=!0;function ut(i,a,d,m){var y=He,_=ps.transition;ps.transition=null;try{He=1,ru(i,a,d,m)}finally{He=y,ps.transition=_}}function xp(i,a,d,m){var y=He,_=ps.transition;ps.transition=null;try{He=4,ru(i,a,d,m)}finally{He=y,ps.transition=_}}function ru(i,a,d,m){if(Qs){var y=aa(i,a,d,m);if(y===null)Ip(i,a,m,ro,d),ad(i,m);else if(vp(y,i,a,d,m))m.stopPropagation();else if(ad(i,m),a&4&&-1<yp.indexOf(i)){for(;y!==null;){var _=yu(y);if(_!==null&&rd(_),_=aa(i,a,d,m),_===null&&Ip(i,a,m,ro,d),_===y)break;y=_}y!==null&&m.stopPropagation()}else Ip(i,a,m,null,d)}}var ro=null;function aa(i,a,d,m){if(ro=null,i=Jo(m),i=oo(i),i!==null)if(a=pr(i),a===null)i=null;else if(d=a.tag,d===13){if(i=Yi(a),i!==null)return i;i=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return ro=i,null}function su(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xc()){case Xi:return 1;case Bs:return 4;case Qn:case eu:return 16;case Zc:return 536870912;default:return 16}default:return 16}}var Vn=null,la=null,bn=null;function iu(){if(bn)return bn;var i,a=la,d=a.length,m,y="value"in Vn?Vn.value:Vn.textContent,_=y.length;for(i=0;i<d&&a[i]===y[i];i++);var C=d-i;for(m=1;m<=C&&a[d-m]===y[_-m];m++);return bn=y.slice(i,1<m?1-m:void 0)}function ua(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function $r(){return!0}function ou(){return!1}function Qt(i){function a(d,m,y,_,C){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(d=i[M],this[M]=d?d(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?$r:ou,this.isPropagationStopped=ou,this}return fe(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=$r)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=$r)},persist:function(){},isPersistent:$r}),a}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Qt(wr),Fr=fe({},wr,{view:0,detail:0}),wp=Qt(Fr),da,ms,Js,so=fe({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Js&&(Js&&i.type==="mousemove"?(da=i.screenX-Js.screenX,ms=i.screenY-Js.screenY):ms=da=0,Js=i),da)},movementY:function(i){return"movementY"in i?i.movementY:ms}}),ha=Qt(so),au=fe({},so,{dataTransfer:0}),cd=Qt(au),fa=fe({},Fr,{relatedTarget:0}),pa=Qt(fa),dd=fe({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),gs=Qt(dd),hd=fe({},wr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),fd=Qt(hd),pd=fe({},wr,{data:0}),lu=Qt(pd),ma={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gd(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=md[i])?!!a[i]:!1}function Ur(){return gd}var f=fe({},Fr,{key:function(i){if(i.key){var a=ma[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ua(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gn[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(i){return i.type==="keypress"?ua(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ua(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),w=Qt(f),T=fe({},so,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),N=Qt(T),K=fe({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),ee=Qt(K),he=fe({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xe=Qt(he),Dt=fe({},so,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),qe=Qt(Dt),Ft=[9,13,27,32],Ct=u&&"CompositionEvent"in window,Yn=null;u&&"documentMode"in document&&(Yn=document.documentMode);var $n=u&&"TextEvent"in window&&!Yn,io=u&&(!Ct||Yn&&8<Yn&&11>=Yn),ga=" ",Hv=!1;function qv(i,a){switch(i){case"keyup":return Ft.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ya=!1;function h1(i,a){switch(i){case"compositionend":return Kv(a);case"keypress":return a.which!==32?null:(Hv=!0,ga);case"textInput":return i=a.data,i===ga&&Hv?null:i;default:return null}}function f1(i,a){if(ya)return i==="compositionend"||!Ct&&qv(i,a)?(i=iu(),bn=la=Vn=null,ya=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return io&&a.locale!=="ko"?null:a.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!p1[i.type]:a==="textarea"}function Qv(i,a,d,m){Lr(m),a=_d(a,"onChange"),0<a.length&&(d=new ca("onChange","change",null,d,m),i.push({event:d,listeners:a}))}var uu=null,cu=null;function m1(i){fx(i,0)}function yd(i){var a=ba(i);if(Oe(a))return i}function g1(i,a){if(i==="change")return a}var Jv=!1;if(u){var _p;if(u){var bp="oninput"in document;if(!bp){var Yv=document.createElement("div");Yv.setAttribute("oninput","return;"),bp=typeof Yv.oninput=="function"}_p=bp}else _p=!1;Jv=_p&&(!document.documentMode||9<document.documentMode)}function Xv(){uu&&(uu.detachEvent("onpropertychange",Zv),cu=uu=null)}function Zv(i){if(i.propertyName==="value"&&yd(cu)){var a=[];Qv(a,cu,i,Jo(i)),Jl(m1,a)}}function y1(i,a,d){i==="focusin"?(Xv(),uu=a,cu=d,uu.attachEvent("onpropertychange",Zv)):i==="focusout"&&Xv()}function v1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return yd(cu)}function x1(i,a){if(i==="click")return yd(a)}function w1(i,a){if(i==="input"||i==="change")return yd(a)}function _1(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var _r=typeof Object.is=="function"?Object.is:_1;function du(i,a){if(_r(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var d=Object.keys(i),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!c.call(a,y)||!_r(i[y],a[y]))return!1}return!0}function ex(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tx(i,a){var d=ex(i);i=0;for(var m;d;){if(d.nodeType===3){if(m=i+d.textContent.length,i<=a&&m>=a)return{node:d,offset:a-i};i=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=ex(d)}}function nx(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?nx(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function rx(){for(var i=window,a=It();a instanceof i.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)i=a.contentWindow;else break;a=It(i.document)}return a}function Ep(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function b1(i){var a=rx(),d=i.focusedElem,m=i.selectionRange;if(a!==d&&d&&d.ownerDocument&&nx(d.ownerDocument.documentElement,d)){if(m!==null&&Ep(d)){if(a=m.start,i=m.end,i===void 0&&(i=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(i,d.value.length);else if(i=(a=d.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var y=d.textContent.length,_=Math.min(m.start,y);m=m.end===void 0?_:Math.min(m.end,y),!i.extend&&_>m&&(y=m,m=_,_=y),y=tx(d,_);var C=tx(d,m);y&&C&&(i.rangeCount!==1||i.anchorNode!==y.node||i.anchorOffset!==y.offset||i.focusNode!==C.node||i.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),i.removeAllRanges(),_>m?(i.addRange(a),i.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),i.addRange(a)))}}for(a=[],i=d;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)i=a[d],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var E1=u&&"documentMode"in document&&11>=document.documentMode,va=null,Tp=null,hu=null,Sp=!1;function sx(i,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Sp||va==null||va!==It(m)||(m=va,"selectionStart"in m&&Ep(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hu&&du(hu,m)||(hu=m,m=_d(Tp,"onSelect"),0<m.length&&(a=new ca("onSelect","select",null,a,d),i.push({event:a,listeners:m}),a.target=va)))}function vd(i,a){var d={};return d[i.toLowerCase()]=a.toLowerCase(),d["Webkit"+i]="webkit"+a,d["Moz"+i]="moz"+a,d}var xa={animationend:vd("Animation","AnimationEnd"),animationiteration:vd("Animation","AnimationIteration"),animationstart:vd("Animation","AnimationStart"),transitionend:vd("Transition","TransitionEnd")},kp={},ix={};u&&(ix=document.createElement("div").style,"AnimationEvent"in window||(delete xa.animationend.animation,delete xa.animationiteration.animation,delete xa.animationstart.animation),"TransitionEvent"in window||delete xa.transitionend.transition);function xd(i){if(kp[i])return kp[i];if(!xa[i])return i;var a=xa[i],d;for(d in a)if(a.hasOwnProperty(d)&&d in ix)return kp[i]=a[d];return i}var ox=xd("animationend"),ax=xd("animationiteration"),lx=xd("animationstart"),ux=xd("transitionend"),cx=new Map,dx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ys(i,a){cx.set(i,a),o(a,[i])}for(var Cp=0;Cp<dx.length;Cp++){var Pp=dx[Cp],T1=Pp.toLowerCase(),S1=Pp[0].toUpperCase()+Pp.slice(1);Ys(T1,"on"+S1)}Ys(ox,"onAnimationEnd"),Ys(ax,"onAnimationIteration"),Ys(lx,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(ux,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k1=new Set("cancel close invalid load scroll toggle".split(" ").concat(fu));function hx(i,a,d){var m=i.type||"unknown-event";i.currentTarget=d,Qc(m,a,void 0,i),i.currentTarget=null}function fx(i,a){a=(a&4)!==0;for(var d=0;d<i.length;d++){var m=i[d],y=m.event;m=m.listeners;e:{var _=void 0;if(a)for(var C=m.length-1;0<=C;C--){var M=m[C],U=M.instance,X=M.currentTarget;if(M=M.listener,U!==_&&y.isPropagationStopped())break e;hx(y,M,X),_=U}else for(C=0;C<m.length;C++){if(M=m[C],U=M.instance,X=M.currentTarget,M=M.listener,U!==_&&y.isPropagationStopped())break e;hx(y,M,X),_=U}}}if(fr)throw i=Yl,fr=!1,Yl=null,i}function at(i,a){var d=a[Lp];d===void 0&&(d=a[Lp]=new Set);var m=i+"__bubble";d.has(m)||(px(a,i,2,!1),d.add(m))}function Ap(i,a,d){var m=0;a&&(m|=4),px(d,i,m,a)}var wd="_reactListening"+Math.random().toString(36).slice(2);function pu(i){if(!i[wd]){i[wd]=!0,r.forEach(function(d){d!=="selectionchange"&&(k1.has(d)||Ap(d,!1,i),Ap(d,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[wd]||(a[wd]=!0,Ap("selectionchange",!1,a))}}function px(i,a,d,m){switch(su(a)){case 1:var y=ut;break;case 4:y=xp;break;default:y=ru}d=y.bind(null,a,d,i),y=void 0,!Zo||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?i.addEventListener(a,d,{capture:!0,passive:y}):i.addEventListener(a,d,!0):y!==void 0?i.addEventListener(a,d,{passive:y}):i.addEventListener(a,d,!1)}function Ip(i,a,d,m,y){var _=m;if(!(a&1)&&!(a&2)&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var M=m.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(C===4)for(C=m.return;C!==null;){var U=C.tag;if((U===3||U===4)&&(U=C.stateNode.containerInfo,U===y||U.nodeType===8&&U.parentNode===y))return;C=C.return}for(;M!==null;){if(C=oo(M),C===null)return;if(U=C.tag,U===5||U===6){m=_=C;continue e}M=M.parentNode}}m=m.return}Jl(function(){var X=_,le=Jo(d),ce=[];e:{var ae=cx.get(i);if(ae!==void 0){var ge=ca,we=i;switch(i){case"keypress":if(ua(d)===0)break e;case"keydown":case"keyup":ge=w;break;case"focusin":we="focus",ge=pa;break;case"focusout":we="blur",ge=pa;break;case"beforeblur":case"afterblur":ge=pa;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=ee;break;case ox:case ax:case lx:ge=gs;break;case ux:ge=Xe;break;case"scroll":ge=wp;break;case"wheel":ge=qe;break;case"copy":case"cut":case"paste":ge=fd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=N}var Ee=(a&4)!==0,Tt=!Ee&&i==="scroll",G=Ee?ae!==null?ae+"Capture":null:ae;Ee=[];for(var B=X,J;B!==null;){J=B;var de=J.stateNode;if(J.tag===5&&de!==null&&(J=de,G!==null&&(de=Et(B,G),de!=null&&Ee.push(mu(B,de,J)))),Tt)break;B=B.return}0<Ee.length&&(ae=new ge(ae,we,null,d,le),ce.push({event:ae,listeners:Ee}))}}if(!(a&7)){e:{if(ae=i==="mouseover"||i==="pointerover",ge=i==="mouseout"||i==="pointerout",ae&&d!==Ki&&(we=d.relatedTarget||d.fromElement)&&(oo(we)||we[ys]))break e;if((ge||ae)&&(ae=le.window===le?le:(ae=le.ownerDocument)?ae.defaultView||ae.parentWindow:window,ge?(we=d.relatedTarget||d.toElement,ge=X,we=we?oo(we):null,we!==null&&(Tt=pr(we),we!==Tt||we.tag!==5&&we.tag!==6)&&(we=null)):(ge=null,we=X),ge!==we)){if(Ee=ha,de="onMouseLeave",G="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Ee=N,de="onPointerLeave",G="onPointerEnter",B="pointer"),Tt=ge==null?ae:ba(ge),J=we==null?ae:ba(we),ae=new Ee(de,B+"leave",ge,d,le),ae.target=Tt,ae.relatedTarget=J,de=null,oo(le)===X&&(Ee=new Ee(G,B+"enter",we,d,le),Ee.target=J,Ee.relatedTarget=Tt,de=Ee),Tt=de,ge&&we)t:{for(Ee=ge,G=we,B=0,J=Ee;J;J=wa(J))B++;for(J=0,de=G;de;de=wa(de))J++;for(;0<B-J;)Ee=wa(Ee),B--;for(;0<J-B;)G=wa(G),J--;for(;B--;){if(Ee===G||G!==null&&Ee===G.alternate)break t;Ee=wa(Ee),G=wa(G)}Ee=null}else Ee=null;ge!==null&&mx(ce,ae,ge,Ee,!1),we!==null&&Tt!==null&&mx(ce,Tt,we,Ee,!0)}}e:{if(ae=X?ba(X):window,ge=ae.nodeName&&ae.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ae.type==="file")var Te=g1;else if(Gv(ae))if(Jv)Te=w1;else{Te=v1;var ke=y1}else(ge=ae.nodeName)&&ge.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(Te=x1);if(Te&&(Te=Te(i,X))){Qv(ce,Te,d,le);break e}ke&&ke(i,ae,X),i==="focusout"&&(ke=ae._wrapperState)&&ke.controlled&&ae.type==="number"&&Rt(ae,"number",ae.value)}switch(ke=X?ba(X):window,i){case"focusin":(Gv(ke)||ke.contentEditable==="true")&&(va=ke,Tp=X,hu=null);break;case"focusout":hu=Tp=va=null;break;case"mousedown":Sp=!0;break;case"contextmenu":case"mouseup":case"dragend":Sp=!1,sx(ce,d,le);break;case"selectionchange":if(E1)break;case"keydown":case"keyup":sx(ce,d,le)}var Ce;if(Ct)e:{switch(i){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ya?qv(i,d)&&(je="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(je="onCompositionStart");je&&(io&&d.locale!=="ko"&&(ya||je!=="onCompositionStart"?je==="onCompositionEnd"&&ya&&(Ce=iu()):(Vn=le,la="value"in Vn?Vn.value:Vn.textContent,ya=!0)),ke=_d(X,je),0<ke.length&&(je=new lu(je,i,null,d,le),ce.push({event:je,listeners:ke}),Ce?je.data=Ce:(Ce=Kv(d),Ce!==null&&(je.data=Ce)))),(Ce=$n?h1(i,d):f1(i,d))&&(X=_d(X,"onBeforeInput"),0<X.length&&(le=new lu("onBeforeInput","beforeinput",null,d,le),ce.push({event:le,listeners:X}),le.data=Ce))}fx(ce,a)})}function mu(i,a,d){return{instance:i,listener:a,currentTarget:d}}function _d(i,a){for(var d=a+"Capture",m=[];i!==null;){var y=i,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=Et(i,d),_!=null&&m.unshift(mu(i,_,y)),_=Et(i,a),_!=null&&m.push(mu(i,_,y))),i=i.return}return m}function wa(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function mx(i,a,d,m,y){for(var _=a._reactName,C=[];d!==null&&d!==m;){var M=d,U=M.alternate,X=M.stateNode;if(U!==null&&U===m)break;M.tag===5&&X!==null&&(M=X,y?(U=Et(d,_),U!=null&&C.unshift(mu(d,U,M))):y||(U=Et(d,_),U!=null&&C.push(mu(d,U,M)))),d=d.return}C.length!==0&&i.push({event:a,listeners:C})}var C1=/\r\n?/g,P1=/\u0000|\uFFFD/g;function gx(i){return(typeof i=="string"?i:""+i).replace(C1,`
`).replace(P1,"")}function bd(i,a,d){if(a=gx(a),gx(i)!==a&&d)throw Error(n(425))}function Ed(){}var Rp=null,Np=null;function jp(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,A1=typeof clearTimeout=="function"?clearTimeout:void 0,yx=typeof Promise=="function"?Promise:void 0,I1=typeof queueMicrotask=="function"?queueMicrotask:typeof yx<"u"?function(i){return yx.resolve(null).then(i).catch(R1)}:Dp;function R1(i){setTimeout(function(){throw i})}function Op(i,a){var d=a,m=0;do{var y=d.nextSibling;if(i.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(m===0){i.removeChild(y),xr(a);return}m--}else d!=="$"&&d!=="$?"&&d!=="$!"||m++;d=y}while(d);xr(a)}function Xs(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function vx(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return i;a--}else d==="/$"&&a++}i=i.previousSibling}return null}var _a=Math.random().toString(36).slice(2),Br="__reactFiber$"+_a,gu="__reactProps$"+_a,ys="__reactContainer$"+_a,Lp="__reactEvents$"+_a,N1="__reactListeners$"+_a,j1="__reactHandles$"+_a;function oo(i){var a=i[Br];if(a)return a;for(var d=i.parentNode;d;){if(a=d[ys]||d[Br]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(i=vx(i);i!==null;){if(d=i[Br])return d;i=vx(i)}return a}i=d,d=i.parentNode}return null}function yu(i){return i=i[Br]||i[ys],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ba(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(n(33))}function Td(i){return i[gu]||null}var Mp=[],Ea=-1;function Zs(i){return{current:i}}function lt(i){0>Ea||(i.current=Mp[Ea],Mp[Ea]=null,Ea--)}function rt(i,a){Ea++,Mp[Ea]=i.current,i.current=a}var ei={},sn=Zs(ei),En=Zs(!1),ao=ei;function Ta(i,a){var d=i.type.contextTypes;if(!d)return ei;var m=i.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in d)y[_]=a[_];return m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=y),y}function Tn(i){return i=i.childContextTypes,i!=null}function Sd(){lt(En),lt(sn)}function xx(i,a,d){if(sn.current!==ei)throw Error(n(168));rt(sn,a),rt(En,d)}function wx(i,a,d){var m=i.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return d;m=m.getChildContext();for(var y in m)if(!(y in a))throw Error(n(108,oe(i)||"Unknown",y));return fe({},d,m)}function kd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||ei,ao=sn.current,rt(sn,i),rt(En,En.current),!0}function _x(i,a,d){var m=i.stateNode;if(!m)throw Error(n(169));d?(i=wx(i,a,ao),m.__reactInternalMemoizedMergedChildContext=i,lt(En),lt(sn),rt(sn,i)):lt(En),rt(En,d)}var vs=null,Cd=!1,Vp=!1;function bx(i){vs===null?vs=[i]:vs.push(i)}function D1(i){Cd=!0,bx(i)}function ti(){if(!Vp&&vs!==null){Vp=!0;var i=0,a=He;try{var d=vs;for(He=1;i<d.length;i++){var m=d[i];do m=m(!0);while(m!==null)}vs=null,Cd=!1}catch(y){throw vs!==null&&(vs=vs.slice(i+1)),ra(Xi,ti),y}finally{He=a,Vp=!1}}return null}var Sa=[],ka=0,Pd=null,Ad=0,Xn=[],Zn=0,lo=null,xs=1,ws="";function uo(i,a){Sa[ka++]=Ad,Sa[ka++]=Pd,Pd=i,Ad=a}function Ex(i,a,d){Xn[Zn++]=xs,Xn[Zn++]=ws,Xn[Zn++]=lo,lo=i;var m=xs;i=ws;var y=32-mn(m)-1;m&=~(1<<y),d+=1;var _=32-mn(a)+y;if(30<_){var C=y-y%5;_=(m&(1<<C)-1).toString(32),m>>=C,y-=C,xs=1<<32-mn(a)+y|d<<y|m,ws=_+i}else xs=1<<_|d<<y|m,ws=i}function $p(i){i.return!==null&&(uo(i,1),Ex(i,1,0))}function Fp(i){for(;i===Pd;)Pd=Sa[--ka],Sa[ka]=null,Ad=Sa[--ka],Sa[ka]=null;for(;i===lo;)lo=Xn[--Zn],Xn[Zn]=null,ws=Xn[--Zn],Xn[Zn]=null,xs=Xn[--Zn],Xn[Zn]=null}var Fn=null,Un=null,ct=!1,br=null;function Tx(i,a){var d=rr(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=i,a=i.deletions,a===null?(i.deletions=[d],i.flags|=16):a.push(d)}function Sx(i,a){switch(i.tag){case 5:var d=i.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,Fn=i,Un=Xs(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,Fn=i,Un=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=lo!==null?{id:xs,overflow:ws}:null,i.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=rr(18,null,null,0),d.stateNode=a,d.return=i,i.child=d,Fn=i,Un=null,!0):!1;default:return!1}}function Up(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Bp(i){if(ct){var a=Un;if(a){var d=a;if(!Sx(i,a)){if(Up(i))throw Error(n(418));a=Xs(d.nextSibling);var m=Fn;a&&Sx(i,a)?Tx(m,d):(i.flags=i.flags&-4097|2,ct=!1,Fn=i)}}else{if(Up(i))throw Error(n(418));i.flags=i.flags&-4097|2,ct=!1,Fn=i}}}function kx(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Fn=i}function Id(i){if(i!==Fn)return!1;if(!ct)return kx(i),ct=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!jp(i.type,i.memoizedProps)),a&&(a=Un)){if(Up(i))throw Cx(),Error(n(418));for(;a;)Tx(i,a),a=Xs(a.nextSibling)}if(kx(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var d=i.data;if(d==="/$"){if(a===0){Un=Xs(i.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}i=i.nextSibling}Un=null}}else Un=Fn?Xs(i.stateNode.nextSibling):null;return!0}function Cx(){for(var i=Un;i;)i=Xs(i.nextSibling)}function Ca(){Un=Fn=null,ct=!1}function zp(i){br===null?br=[i]:br.push(i)}var O1=z.ReactCurrentBatchConfig;function vu(i,a,d){if(i=d.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var m=d.stateNode}if(!m)throw Error(n(147,i));var y=m,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var M=y.refs;C===null?delete M[_]:M[_]=C},a._stringRef=_,a)}if(typeof i!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,i))}return i}function Rd(i,a){throw i=Object.prototype.toString.call(a),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function Px(i){var a=i._init;return a(i._payload)}function Ax(i){function a(G,B){if(i){var J=G.deletions;J===null?(G.deletions=[B],G.flags|=16):J.push(B)}}function d(G,B){if(!i)return null;for(;B!==null;)a(G,B),B=B.sibling;return null}function m(G,B){for(G=new Map;B!==null;)B.key!==null?G.set(B.key,B):G.set(B.index,B),B=B.sibling;return G}function y(G,B){return G=ui(G,B),G.index=0,G.sibling=null,G}function _(G,B,J){return G.index=J,i?(J=G.alternate,J!==null?(J=J.index,J<B?(G.flags|=2,B):J):(G.flags|=2,B)):(G.flags|=1048576,B)}function C(G){return i&&G.alternate===null&&(G.flags|=2),G}function M(G,B,J,de){return B===null||B.tag!==6?(B=Dm(J,G.mode,de),B.return=G,B):(B=y(B,J),B.return=G,B)}function U(G,B,J,de){var Te=J.type;return Te===R?le(G,B,J.props.children,de,J.key):B!==null&&(B.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Me&&Px(Te)===B.type)?(de=y(B,J.props),de.ref=vu(G,B,J),de.return=G,de):(de=th(J.type,J.key,J.props,null,G.mode,de),de.ref=vu(G,B,J),de.return=G,de)}function X(G,B,J,de){return B===null||B.tag!==4||B.stateNode.containerInfo!==J.containerInfo||B.stateNode.implementation!==J.implementation?(B=Om(J,G.mode,de),B.return=G,B):(B=y(B,J.children||[]),B.return=G,B)}function le(G,B,J,de,Te){return B===null||B.tag!==7?(B=vo(J,G.mode,de,Te),B.return=G,B):(B=y(B,J),B.return=G,B)}function ce(G,B,J){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Dm(""+B,G.mode,J),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case H:return J=th(B.type,B.key,B.props,null,G.mode,J),J.ref=vu(G,null,B),J.return=G,J;case Y:return B=Om(B,G.mode,J),B.return=G,B;case Me:var de=B._init;return ce(G,de(B._payload),J)}if(On(B)||me(B))return B=vo(B,G.mode,J,null),B.return=G,B;Rd(G,B)}return null}function ae(G,B,J,de){var Te=B!==null?B.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Te!==null?null:M(G,B,""+J,de);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case H:return J.key===Te?U(G,B,J,de):null;case Y:return J.key===Te?X(G,B,J,de):null;case Me:return Te=J._init,ae(G,B,Te(J._payload),de)}if(On(J)||me(J))return Te!==null?null:le(G,B,J,de,null);Rd(G,J)}return null}function ge(G,B,J,de,Te){if(typeof de=="string"&&de!==""||typeof de=="number")return G=G.get(J)||null,M(B,G,""+de,Te);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case H:return G=G.get(de.key===null?J:de.key)||null,U(B,G,de,Te);case Y:return G=G.get(de.key===null?J:de.key)||null,X(B,G,de,Te);case Me:var ke=de._init;return ge(G,B,J,ke(de._payload),Te)}if(On(de)||me(de))return G=G.get(J)||null,le(B,G,de,Te,null);Rd(B,de)}return null}function we(G,B,J,de){for(var Te=null,ke=null,Ce=B,je=B=0,zt=null;Ce!==null&&je<J.length;je++){Ce.index>je?(zt=Ce,Ce=null):zt=Ce.sibling;var Qe=ae(G,Ce,J[je],de);if(Qe===null){Ce===null&&(Ce=zt);break}i&&Ce&&Qe.alternate===null&&a(G,Ce),B=_(Qe,B,je),ke===null?Te=Qe:ke.sibling=Qe,ke=Qe,Ce=zt}if(je===J.length)return d(G,Ce),ct&&uo(G,je),Te;if(Ce===null){for(;je<J.length;je++)Ce=ce(G,J[je],de),Ce!==null&&(B=_(Ce,B,je),ke===null?Te=Ce:ke.sibling=Ce,ke=Ce);return ct&&uo(G,je),Te}for(Ce=m(G,Ce);je<J.length;je++)zt=ge(Ce,G,je,J[je],de),zt!==null&&(i&&zt.alternate!==null&&Ce.delete(zt.key===null?je:zt.key),B=_(zt,B,je),ke===null?Te=zt:ke.sibling=zt,ke=zt);return i&&Ce.forEach(function(ci){return a(G,ci)}),ct&&uo(G,je),Te}function Ee(G,B,J,de){var Te=me(J);if(typeof Te!="function")throw Error(n(150));if(J=Te.call(J),J==null)throw Error(n(151));for(var ke=Te=null,Ce=B,je=B=0,zt=null,Qe=J.next();Ce!==null&&!Qe.done;je++,Qe=J.next()){Ce.index>je?(zt=Ce,Ce=null):zt=Ce.sibling;var ci=ae(G,Ce,Qe.value,de);if(ci===null){Ce===null&&(Ce=zt);break}i&&Ce&&ci.alternate===null&&a(G,Ce),B=_(ci,B,je),ke===null?Te=ci:ke.sibling=ci,ke=ci,Ce=zt}if(Qe.done)return d(G,Ce),ct&&uo(G,je),Te;if(Ce===null){for(;!Qe.done;je++,Qe=J.next())Qe=ce(G,Qe.value,de),Qe!==null&&(B=_(Qe,B,je),ke===null?Te=Qe:ke.sibling=Qe,ke=Qe);return ct&&uo(G,je),Te}for(Ce=m(G,Ce);!Qe.done;je++,Qe=J.next())Qe=ge(Ce,G,je,Qe.value,de),Qe!==null&&(i&&Qe.alternate!==null&&Ce.delete(Qe.key===null?je:Qe.key),B=_(Qe,B,je),ke===null?Te=Qe:ke.sibling=Qe,ke=Qe);return i&&Ce.forEach(function(pI){return a(G,pI)}),ct&&uo(G,je),Te}function Tt(G,B,J,de){if(typeof J=="object"&&J!==null&&J.type===R&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case H:e:{for(var Te=J.key,ke=B;ke!==null;){if(ke.key===Te){if(Te=J.type,Te===R){if(ke.tag===7){d(G,ke.sibling),B=y(ke,J.props.children),B.return=G,G=B;break e}}else if(ke.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Me&&Px(Te)===ke.type){d(G,ke.sibling),B=y(ke,J.props),B.ref=vu(G,ke,J),B.return=G,G=B;break e}d(G,ke);break}else a(G,ke);ke=ke.sibling}J.type===R?(B=vo(J.props.children,G.mode,de,J.key),B.return=G,G=B):(de=th(J.type,J.key,J.props,null,G.mode,de),de.ref=vu(G,B,J),de.return=G,G=de)}return C(G);case Y:e:{for(ke=J.key;B!==null;){if(B.key===ke)if(B.tag===4&&B.stateNode.containerInfo===J.containerInfo&&B.stateNode.implementation===J.implementation){d(G,B.sibling),B=y(B,J.children||[]),B.return=G,G=B;break e}else{d(G,B);break}else a(G,B);B=B.sibling}B=Om(J,G.mode,de),B.return=G,G=B}return C(G);case Me:return ke=J._init,Tt(G,B,ke(J._payload),de)}if(On(J))return we(G,B,J,de);if(me(J))return Ee(G,B,J,de);Rd(G,J)}return typeof J=="string"&&J!==""||typeof J=="number"?(J=""+J,B!==null&&B.tag===6?(d(G,B.sibling),B=y(B,J),B.return=G,G=B):(d(G,B),B=Dm(J,G.mode,de),B.return=G,G=B),C(G)):d(G,B)}return Tt}var Pa=Ax(!0),Ix=Ax(!1),Nd=Zs(null),jd=null,Aa=null,Wp=null;function Hp(){Wp=Aa=jd=null}function qp(i){var a=Nd.current;lt(Nd),i._currentValue=a}function Kp(i,a,d){for(;i!==null;){var m=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),i===d)break;i=i.return}}function Ia(i,a){jd=i,Wp=Aa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&a&&(Sn=!0),i.firstContext=null)}function er(i){var a=i._currentValue;if(Wp!==i)if(i={context:i,memoizedValue:a,next:null},Aa===null){if(jd===null)throw Error(n(308));Aa=i,jd.dependencies={lanes:0,firstContext:i}}else Aa=Aa.next=i;return a}var co=null;function Gp(i){co===null?co=[i]:co.push(i)}function Rx(i,a,d,m){var y=a.interleaved;return y===null?(d.next=d,Gp(a)):(d.next=y.next,y.next=d),a.interleaved=d,_s(i,m)}function _s(i,a){i.lanes|=a;var d=i.alternate;for(d!==null&&(d.lanes|=a),d=i,i=i.return;i!==null;)i.childLanes|=a,d=i.alternate,d!==null&&(d.childLanes|=a),d=i,i=i.return;return d.tag===3?d.stateNode:null}var ni=!1;function Qp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function bs(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function ri(i,a,d){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,Ge&2){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,_s(i,d)}return y=m.interleaved,y===null?(a.next=a,Gp(m)):(a.next=y.next,y.next=a),m.interleaved=a,_s(i,d)}function Dd(i,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,qs(i,d)}}function jx(i,a){var d=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,_=null;if(d=d.firstBaseUpdate,d!==null){do{var C={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};_===null?y=_=C:_=_.next=C,d=d.next}while(d!==null);_===null?y=_=a:_=_.next=a}else y=_=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:m.shared,effects:m.effects},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=a:i.next=a,d.lastBaseUpdate=a}function Od(i,a,d,m){var y=i.updateQueue;ni=!1;var _=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var U=M,X=U.next;U.next=null,C===null?_=X:C.next=X,C=U;var le=i.alternate;le!==null&&(le=le.updateQueue,M=le.lastBaseUpdate,M!==C&&(M===null?le.firstBaseUpdate=X:M.next=X,le.lastBaseUpdate=U))}if(_!==null){var ce=y.baseState;C=0,le=X=U=null,M=_;do{var ae=M.lane,ge=M.eventTime;if((m&ae)===ae){le!==null&&(le=le.next={eventTime:ge,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var we=i,Ee=M;switch(ae=a,ge=d,Ee.tag){case 1:if(we=Ee.payload,typeof we=="function"){ce=we.call(ge,ce,ae);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ee.payload,ae=typeof we=="function"?we.call(ge,ce,ae):we,ae==null)break e;ce=fe({},ce,ae);break e;case 2:ni=!0}}M.callback!==null&&M.lane!==0&&(i.flags|=64,ae=y.effects,ae===null?y.effects=[M]:ae.push(M))}else ge={eventTime:ge,lane:ae,tag:M.tag,payload:M.payload,callback:M.callback,next:null},le===null?(X=le=ge,U=ce):le=le.next=ge,C|=ae;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;ae=M,M=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);if(le===null&&(U=ce),y.baseState=U,y.firstBaseUpdate=X,y.lastBaseUpdate=le,a=y.shared.interleaved,a!==null){y=a;do C|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);po|=C,i.lanes=C,i.memoizedState=ce}}function Dx(i,a,d){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var m=i[a],y=m.callback;if(y!==null){if(m.callback=null,m=d,typeof y!="function")throw Error(n(191,y));y.call(m)}}}var xu={},zr=Zs(xu),wu=Zs(xu),_u=Zs(xu);function ho(i){if(i===xu)throw Error(n(174));return i}function Jp(i,a){switch(rt(_u,a),rt(wu,i),rt(zr,xu),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:jt(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=jt(a,i)}lt(zr),rt(zr,a)}function Ra(){lt(zr),lt(wu),lt(_u)}function Ox(i){ho(_u.current);var a=ho(zr.current),d=jt(a,i.type);a!==d&&(rt(wu,i),rt(zr,d))}function Yp(i){wu.current===i&&(lt(zr),lt(wu))}var ft=Zs(0);function Ld(i){for(var a=i;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Xp=[];function Zp(){for(var i=0;i<Xp.length;i++)Xp[i]._workInProgressVersionPrimary=null;Xp.length=0}var Md=z.ReactCurrentDispatcher,em=z.ReactCurrentBatchConfig,fo=0,pt=null,Ot=null,Ut=null,Vd=!1,bu=!1,Eu=0,L1=0;function on(){throw Error(n(321))}function tm(i,a){if(a===null)return!1;for(var d=0;d<a.length&&d<i.length;d++)if(!_r(i[d],a[d]))return!1;return!0}function nm(i,a,d,m,y,_){if(fo=_,pt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Md.current=i===null||i.memoizedState===null?F1:U1,i=d(m,y),bu){_=0;do{if(bu=!1,Eu=0,25<=_)throw Error(n(301));_+=1,Ut=Ot=null,a.updateQueue=null,Md.current=B1,i=d(m,y)}while(bu)}if(Md.current=Ud,a=Ot!==null&&Ot.next!==null,fo=0,Ut=Ot=pt=null,Vd=!1,a)throw Error(n(300));return i}function rm(){var i=Eu!==0;return Eu=0,i}function Wr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?pt.memoizedState=Ut=i:Ut=Ut.next=i,Ut}function tr(){if(Ot===null){var i=pt.alternate;i=i!==null?i.memoizedState:null}else i=Ot.next;var a=Ut===null?pt.memoizedState:Ut.next;if(a!==null)Ut=a,Ot=i;else{if(i===null)throw Error(n(310));Ot=i,i={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ut===null?pt.memoizedState=Ut=i:Ut=Ut.next=i}return Ut}function Tu(i,a){return typeof a=="function"?a(i):a}function sm(i){var a=tr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=Ot,y=m.baseQueue,_=d.pending;if(_!==null){if(y!==null){var C=y.next;y.next=_.next,_.next=C}m.baseQueue=y=_,d.pending=null}if(y!==null){_=y.next,m=m.baseState;var M=C=null,U=null,X=_;do{var le=X.lane;if((fo&le)===le)U!==null&&(U=U.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),m=X.hasEagerState?X.eagerState:i(m,X.action);else{var ce={lane:le,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};U===null?(M=U=ce,C=m):U=U.next=ce,pt.lanes|=le,po|=le}X=X.next}while(X!==null&&X!==_);U===null?C=m:U.next=M,_r(m,a.memoizedState)||(Sn=!0),a.memoizedState=m,a.baseState=C,a.baseQueue=U,d.lastRenderedState=m}if(i=d.interleaved,i!==null){y=i;do _=y.lane,pt.lanes|=_,po|=_,y=y.next;while(y!==i)}else y===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function im(i){var a=tr(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=i;var m=d.dispatch,y=d.pending,_=a.memoizedState;if(y!==null){d.pending=null;var C=y=y.next;do _=i(_,C.action),C=C.next;while(C!==y);_r(_,a.memoizedState)||(Sn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),d.lastRenderedState=_}return[_,m]}function Lx(){}function Mx(i,a){var d=pt,m=tr(),y=a(),_=!_r(m.memoizedState,y);if(_&&(m.memoizedState=y,Sn=!0),m=m.queue,om(Fx.bind(null,d,m,i),[i]),m.getSnapshot!==a||_||Ut!==null&&Ut.memoizedState.tag&1){if(d.flags|=2048,Su(9,$x.bind(null,d,m,y,a),void 0,null),Bt===null)throw Error(n(349));fo&30||Vx(d,a,y)}return y}function Vx(i,a,d){i.flags|=16384,i={getSnapshot:a,value:d},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.stores=[i]):(d=a.stores,d===null?a.stores=[i]:d.push(i))}function $x(i,a,d,m){a.value=d,a.getSnapshot=m,Ux(a)&&Bx(i)}function Fx(i,a,d){return d(function(){Ux(a)&&Bx(i)})}function Ux(i){var a=i.getSnapshot;i=i.value;try{var d=a();return!_r(i,d)}catch{return!0}}function Bx(i){var a=_s(i,1);a!==null&&kr(a,i,1,-1)}function zx(i){var a=Wr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:i},a.queue=i,i=i.dispatch=$1.bind(null,pt,i),[a.memoizedState,i]}function Su(i,a,d,m){return i={tag:i,create:a,destroy:d,deps:m,next:null},a=pt.updateQueue,a===null?(a={lastEffect:null,stores:null},pt.updateQueue=a,a.lastEffect=i.next=i):(d=a.lastEffect,d===null?a.lastEffect=i.next=i:(m=d.next,d.next=i,i.next=m,a.lastEffect=i)),i}function Wx(){return tr().memoizedState}function $d(i,a,d,m){var y=Wr();pt.flags|=i,y.memoizedState=Su(1|a,d,void 0,m===void 0?null:m)}function Fd(i,a,d,m){var y=tr();m=m===void 0?null:m;var _=void 0;if(Ot!==null){var C=Ot.memoizedState;if(_=C.destroy,m!==null&&tm(m,C.deps)){y.memoizedState=Su(a,d,_,m);return}}pt.flags|=i,y.memoizedState=Su(1|a,d,_,m)}function Hx(i,a){return $d(8390656,8,i,a)}function om(i,a){return Fd(2048,8,i,a)}function qx(i,a){return Fd(4,2,i,a)}function Kx(i,a){return Fd(4,4,i,a)}function Gx(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Qx(i,a,d){return d=d!=null?d.concat([i]):null,Fd(4,4,Gx.bind(null,a,i),d)}function am(){}function Jx(i,a){var d=tr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&tm(a,m[1])?m[0]:(d.memoizedState=[i,a],i)}function Yx(i,a){var d=tr();a=a===void 0?null:a;var m=d.memoizedState;return m!==null&&a!==null&&tm(a,m[1])?m[0]:(i=i(),d.memoizedState=[i,a],i)}function Xx(i,a,d){return fo&21?(_r(d,a)||(d=to(),pt.lanes|=d,po|=d,i.baseState=!0),a):(i.baseState&&(i.baseState=!1,Sn=!0),i.memoizedState=d)}function M1(i,a){var d=He;He=d!==0&&4>d?d:4,i(!0);var m=em.transition;em.transition={};try{i(!1),a()}finally{He=d,em.transition=m}}function Zx(){return tr().memoizedState}function V1(i,a,d){var m=ai(i);if(d={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null},ew(i))tw(a,d);else if(d=Rx(i,a,d,m),d!==null){var y=vn();kr(d,i,m,y),nw(d,a,m)}}function $1(i,a,d){var m=ai(i),y={lane:m,action:d,hasEagerState:!1,eagerState:null,next:null};if(ew(i))tw(a,y);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,M=_(C,d);if(y.hasEagerState=!0,y.eagerState=M,_r(M,C)){var U=a.interleaved;U===null?(y.next=y,Gp(a)):(y.next=U.next,U.next=y),a.interleaved=y;return}}catch{}finally{}d=Rx(i,a,y,m),d!==null&&(y=vn(),kr(d,i,m,y),nw(d,a,m))}}function ew(i){var a=i.alternate;return i===pt||a!==null&&a===pt}function tw(i,a){bu=Vd=!0;var d=i.pending;d===null?a.next=a:(a.next=d.next,d.next=a),i.pending=a}function nw(i,a,d){if(d&4194240){var m=a.lanes;m&=i.pendingLanes,d|=m,a.lanes=d,qs(i,d)}}var Ud={readContext:er,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},F1={readContext:er,useCallback:function(i,a){return Wr().memoizedState=[i,a===void 0?null:a],i},useContext:er,useEffect:Hx,useImperativeHandle:function(i,a,d){return d=d!=null?d.concat([i]):null,$d(4194308,4,Gx.bind(null,a,i),d)},useLayoutEffect:function(i,a){return $d(4194308,4,i,a)},useInsertionEffect:function(i,a){return $d(4,2,i,a)},useMemo:function(i,a){var d=Wr();return a=a===void 0?null:a,i=i(),d.memoizedState=[i,a],i},useReducer:function(i,a,d){var m=Wr();return a=d!==void 0?d(a):a,m.memoizedState=m.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},m.queue=i,i=i.dispatch=V1.bind(null,pt,i),[m.memoizedState,i]},useRef:function(i){var a=Wr();return i={current:i},a.memoizedState=i},useState:zx,useDebugValue:am,useDeferredValue:function(i){return Wr().memoizedState=i},useTransition:function(){var i=zx(!1),a=i[0];return i=M1.bind(null,i[1]),Wr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,d){var m=pt,y=Wr();if(ct){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),Bt===null)throw Error(n(349));fo&30||Vx(m,a,d)}y.memoizedState=d;var _={value:d,getSnapshot:a};return y.queue=_,Hx(Fx.bind(null,m,_,i),[i]),m.flags|=2048,Su(9,$x.bind(null,m,_,d,a),void 0,null),d},useId:function(){var i=Wr(),a=Bt.identifierPrefix;if(ct){var d=ws,m=xs;d=(m&~(1<<32-mn(m)-1)).toString(32)+d,a=":"+a+"R"+d,d=Eu++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=L1++,a=":"+a+"r"+d.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},U1={readContext:er,useCallback:Jx,useContext:er,useEffect:om,useImperativeHandle:Qx,useInsertionEffect:qx,useLayoutEffect:Kx,useMemo:Yx,useReducer:sm,useRef:Wx,useState:function(){return sm(Tu)},useDebugValue:am,useDeferredValue:function(i){var a=tr();return Xx(a,Ot.memoizedState,i)},useTransition:function(){var i=sm(Tu)[0],a=tr().memoizedState;return[i,a]},useMutableSource:Lx,useSyncExternalStore:Mx,useId:Zx,unstable_isNewReconciler:!1},B1={readContext:er,useCallback:Jx,useContext:er,useEffect:om,useImperativeHandle:Qx,useInsertionEffect:qx,useLayoutEffect:Kx,useMemo:Yx,useReducer:im,useRef:Wx,useState:function(){return im(Tu)},useDebugValue:am,useDeferredValue:function(i){var a=tr();return Ot===null?a.memoizedState=i:Xx(a,Ot.memoizedState,i)},useTransition:function(){var i=im(Tu)[0],a=tr().memoizedState;return[i,a]},useMutableSource:Lx,useSyncExternalStore:Mx,useId:Zx,unstable_isNewReconciler:!1};function Er(i,a){if(i&&i.defaultProps){a=fe({},a),i=i.defaultProps;for(var d in i)a[d]===void 0&&(a[d]=i[d]);return a}return a}function lm(i,a,d,m){a=i.memoizedState,d=d(m,a),d=d==null?a:fe({},a,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var Bd={isMounted:function(i){return(i=i._reactInternals)?pr(i)===i:!1},enqueueSetState:function(i,a,d){i=i._reactInternals;var m=vn(),y=ai(i),_=bs(m,y);_.payload=a,d!=null&&(_.callback=d),a=ri(i,_,y),a!==null&&(kr(a,i,y,m),Dd(a,i,y))},enqueueReplaceState:function(i,a,d){i=i._reactInternals;var m=vn(),y=ai(i),_=bs(m,y);_.tag=1,_.payload=a,d!=null&&(_.callback=d),a=ri(i,_,y),a!==null&&(kr(a,i,y,m),Dd(a,i,y))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var d=vn(),m=ai(i),y=bs(d,m);y.tag=2,a!=null&&(y.callback=a),a=ri(i,y,m),a!==null&&(kr(a,i,m,d),Dd(a,i,m))}};function rw(i,a,d,m,y,_,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,_,C):a.prototype&&a.prototype.isPureReactComponent?!du(d,m)||!du(y,_):!0}function sw(i,a,d){var m=!1,y=ei,_=a.contextType;return typeof _=="object"&&_!==null?_=er(_):(y=Tn(a)?ao:sn.current,m=a.contextTypes,_=(m=m!=null)?Ta(i,y):ei),a=new a(d,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Bd,i.stateNode=a,a._reactInternals=i,m&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=y,i.__reactInternalMemoizedMaskedChildContext=_),a}function iw(i,a,d,m){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==i&&Bd.enqueueReplaceState(a,a.state,null)}function um(i,a,d,m){var y=i.stateNode;y.props=d,y.state=i.memoizedState,y.refs={},Qp(i);var _=a.contextType;typeof _=="object"&&_!==null?y.context=er(_):(_=Tn(a)?ao:sn.current,y.context=Ta(i,_)),y.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(lm(i,a,_,d),y.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Bd.enqueueReplaceState(y,y.state,null),Od(i,d,y,m),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308)}function Na(i,a){try{var d="",m=a;do d+=Ae(m),m=m.return;while(m);var y=d}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:y,digest:null}}function cm(i,a,d){return{value:i,source:null,stack:d??null,digest:a??null}}function dm(i,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var z1=typeof WeakMap=="function"?WeakMap:Map;function ow(i,a,d){d=bs(-1,d),d.tag=3,d.payload={element:null};var m=a.value;return d.callback=function(){Qd||(Qd=!0,km=m),dm(i,a)},d}function aw(i,a,d){d=bs(-1,d),d.tag=3;var m=i.type.getDerivedStateFromError;if(typeof m=="function"){var y=a.value;d.payload=function(){return m(y)},d.callback=function(){dm(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(d.callback=function(){dm(i,a),typeof m!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),d}function lw(i,a,d){var m=i.pingCache;if(m===null){m=i.pingCache=new z1;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(y.add(d),i=rI.bind(null,i,a,d),a.then(i,i))}function uw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function cw(i,a,d,m,y){return i.mode&1?(i.flags|=65536,i.lanes=y,i):(i===a?i.flags|=65536:(i.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=bs(-1,1),a.tag=2,ri(d,a,1))),d.lanes|=1),i)}var W1=z.ReactCurrentOwner,Sn=!1;function yn(i,a,d,m){a.child=i===null?Ix(a,null,d,m):Pa(a,i.child,d,m)}function dw(i,a,d,m,y){d=d.render;var _=a.ref;return Ia(a,y),m=nm(i,a,d,m,_,y),d=rm(),i!==null&&!Sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Es(i,a,y)):(ct&&d&&$p(a),a.flags|=1,yn(i,a,m,y),a.child)}function hw(i,a,d,m,y){if(i===null){var _=d.type;return typeof _=="function"&&!jm(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=_,fw(i,a,_,m,y)):(i=th(d.type,null,m,a,a.mode,y),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,!(i.lanes&y)){var C=_.memoizedProps;if(d=d.compare,d=d!==null?d:du,d(C,m)&&i.ref===a.ref)return Es(i,a,y)}return a.flags|=1,i=ui(_,m),i.ref=a.ref,i.return=a,a.child=i}function fw(i,a,d,m,y){if(i!==null){var _=i.memoizedProps;if(du(_,m)&&i.ref===a.ref)if(Sn=!1,a.pendingProps=m=_,(i.lanes&y)!==0)i.flags&131072&&(Sn=!0);else return a.lanes=i.lanes,Es(i,a,y)}return hm(i,a,d,m,y)}function pw(i,a,d){var m=a.pendingProps,y=m.children,_=i!==null?i.memoizedState:null;if(m.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Da,Bn),Bn|=d;else{if(!(d&1073741824))return i=_!==null?_.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,rt(Da,Bn),Bn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:d,rt(Da,Bn),Bn|=m}else _!==null?(m=_.baseLanes|d,a.memoizedState=null):m=d,rt(Da,Bn),Bn|=m;return yn(i,a,y,d),a.child}function mw(i,a){var d=a.ref;(i===null&&d!==null||i!==null&&i.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function hm(i,a,d,m,y){var _=Tn(d)?ao:sn.current;return _=Ta(a,_),Ia(a,y),d=nm(i,a,d,m,_,y),m=rm(),i!==null&&!Sn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~y,Es(i,a,y)):(ct&&m&&$p(a),a.flags|=1,yn(i,a,d,y),a.child)}function gw(i,a,d,m,y){if(Tn(d)){var _=!0;kd(a)}else _=!1;if(Ia(a,y),a.stateNode===null)Wd(i,a),sw(a,d,m),um(a,d,m,y),m=!0;else if(i===null){var C=a.stateNode,M=a.memoizedProps;C.props=M;var U=C.context,X=d.contextType;typeof X=="object"&&X!==null?X=er(X):(X=Tn(d)?ao:sn.current,X=Ta(a,X));var le=d.getDerivedStateFromProps,ce=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function";ce||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==m||U!==X)&&iw(a,C,m,X),ni=!1;var ae=a.memoizedState;C.state=ae,Od(a,m,C,y),U=a.memoizedState,M!==m||ae!==U||En.current||ni?(typeof le=="function"&&(lm(a,d,le,m),U=a.memoizedState),(M=ni||rw(a,d,M,m,ae,U,X))?(ce||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=U),C.props=m,C.state=U,C.context=X,m=M):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{C=a.stateNode,Nx(i,a),M=a.memoizedProps,X=a.type===a.elementType?M:Er(a.type,M),C.props=X,ce=a.pendingProps,ae=C.context,U=d.contextType,typeof U=="object"&&U!==null?U=er(U):(U=Tn(d)?ao:sn.current,U=Ta(a,U));var ge=d.getDerivedStateFromProps;(le=typeof ge=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==ce||ae!==U)&&iw(a,C,m,U),ni=!1,ae=a.memoizedState,C.state=ae,Od(a,m,C,y);var we=a.memoizedState;M!==ce||ae!==we||En.current||ni?(typeof ge=="function"&&(lm(a,d,ge,m),we=a.memoizedState),(X=ni||rw(a,d,X,m,ae,we,U)||!1)?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,we,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,we,U)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=we),C.props=m,C.state=we,C.context=U,m=X):(typeof C.componentDidUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&ae===i.memoizedState||(a.flags|=1024),m=!1)}return fm(i,a,d,m,_,y)}function fm(i,a,d,m,y,_){mw(i,a);var C=(a.flags&128)!==0;if(!m&&!C)return y&&_x(a,d,!1),Es(i,a,_);m=a.stateNode,W1.current=a;var M=C&&typeof d.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,i!==null&&C?(a.child=Pa(a,i.child,null,_),a.child=Pa(a,null,M,_)):yn(i,a,M,_),a.memoizedState=m.state,y&&_x(a,d,!0),a.child}function yw(i){var a=i.stateNode;a.pendingContext?xx(i,a.pendingContext,a.pendingContext!==a.context):a.context&&xx(i,a.context,!1),Jp(i,a.containerInfo)}function vw(i,a,d,m,y){return Ca(),zp(y),a.flags|=256,yn(i,a,d,m),a.child}var pm={dehydrated:null,treeContext:null,retryLane:0};function mm(i){return{baseLanes:i,cachePool:null,transitions:null}}function xw(i,a,d){var m=a.pendingProps,y=ft.current,_=!1,C=(a.flags&128)!==0,M;if((M=C)||(M=i!==null&&i.memoizedState===null?!1:(y&2)!==0),M?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(y|=1),rt(ft,y&1),i===null)return Bp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(a.mode&1?i.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(C=m.children,i=m.fallback,_?(m=a.mode,_=a.child,C={mode:"hidden",children:C},!(m&1)&&_!==null?(_.childLanes=0,_.pendingProps=C):_=nh(C,m,0,null),i=vo(i,m,d,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=mm(d),a.memoizedState=pm,i):gm(a,C));if(y=i.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return H1(i,a,C,m,M,y,d);if(_){_=m.fallback,C=a.mode,y=i.child,M=y.sibling;var U={mode:"hidden",children:m.children};return!(C&1)&&a.child!==y?(m=a.child,m.childLanes=0,m.pendingProps=U,a.deletions=null):(m=ui(y,U),m.subtreeFlags=y.subtreeFlags&14680064),M!==null?_=ui(M,_):(_=vo(_,C,d,null),_.flags|=2),_.return=a,m.return=a,m.sibling=_,a.child=m,m=_,_=a.child,C=i.child.memoizedState,C=C===null?mm(d):{baseLanes:C.baseLanes|d,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=i.childLanes&~d,a.memoizedState=pm,m}return _=i.child,i=_.sibling,m=ui(_,{mode:"visible",children:m.children}),!(a.mode&1)&&(m.lanes=d),m.return=a,m.sibling=null,i!==null&&(d=a.deletions,d===null?(a.deletions=[i],a.flags|=16):d.push(i)),a.child=m,a.memoizedState=null,m}function gm(i,a){return a=nh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function zd(i,a,d,m){return m!==null&&zp(m),Pa(a,i.child,null,d),i=gm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function H1(i,a,d,m,y,_,C){if(d)return a.flags&256?(a.flags&=-257,m=cm(Error(n(422))),zd(i,a,C,m)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=m.fallback,y=a.mode,m=nh({mode:"visible",children:m.children},y,0,null),_=vo(_,y,C,null),_.flags|=2,m.return=a,_.return=a,m.sibling=_,a.child=m,a.mode&1&&Pa(a,i.child,null,C),a.child.memoizedState=mm(C),a.memoizedState=pm,_);if(!(a.mode&1))return zd(i,a,C,null);if(y.data==="$!"){if(m=y.nextSibling&&y.nextSibling.dataset,m)var M=m.dgst;return m=M,_=Error(n(419)),m=cm(_,m,void 0),zd(i,a,C,m)}if(M=(C&i.childLanes)!==0,Sn||M){if(m=Bt,m!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(m.suspendedLanes|C)?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,_s(i,y),kr(m,i,y,-1))}return Nm(),m=cm(Error(n(421))),zd(i,a,C,m)}return y.data==="$?"?(a.flags|=128,a.child=i.child,a=sI.bind(null,i),y._reactRetry=a,null):(i=_.treeContext,Un=Xs(y.nextSibling),Fn=a,ct=!0,br=null,i!==null&&(Xn[Zn++]=xs,Xn[Zn++]=ws,Xn[Zn++]=lo,xs=i.id,ws=i.overflow,lo=a),a=gm(a,m.children),a.flags|=4096,a)}function ww(i,a,d){i.lanes|=a;var m=i.alternate;m!==null&&(m.lanes|=a),Kp(i.return,a,d)}function ym(i,a,d,m,y){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=d,_.tailMode=y)}function _w(i,a,d){var m=a.pendingProps,y=m.revealOrder,_=m.tail;if(yn(i,a,m.children,d),m=ft.current,m&2)m=m&1|2,a.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ww(i,d,a);else if(i.tag===19)ww(i,d,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}m&=1}if(rt(ft,m),!(a.mode&1))a.memoizedState=null;else switch(y){case"forwards":for(d=a.child,y=null;d!==null;)i=d.alternate,i!==null&&Ld(i)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),ym(a,!1,y,d,_);break;case"backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(i=y.alternate,i!==null&&Ld(i)===null){a.child=y;break}i=y.sibling,y.sibling=d,d=y,y=i}ym(a,!0,d,null,_);break;case"together":ym(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Wd(i,a){!(a.mode&1)&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function Es(i,a,d){if(i!==null&&(a.dependencies=i.dependencies),po|=a.lanes,!(d&a.childLanes))return null;if(i!==null&&a.child!==i.child)throw Error(n(153));if(a.child!==null){for(i=a.child,d=ui(i,i.pendingProps),a.child=d,d.return=a;i.sibling!==null;)i=i.sibling,d=d.sibling=ui(i,i.pendingProps),d.return=a;d.sibling=null}return a.child}function q1(i,a,d){switch(a.tag){case 3:yw(a),Ca();break;case 5:Ox(a);break;case 1:Tn(a.type)&&kd(a);break;case 4:Jp(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,y=a.memoizedProps.value;rt(Nd,m._currentValue),m._currentValue=y;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(rt(ft,ft.current&1),a.flags|=128,null):d&a.child.childLanes?xw(i,a,d):(rt(ft,ft.current&1),i=Es(i,a,d),i!==null?i.sibling:null);rt(ft,ft.current&1);break;case 19:if(m=(d&a.childLanes)!==0,i.flags&128){if(m)return _w(i,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),rt(ft,ft.current),m)break;return null;case 22:case 23:return a.lanes=0,pw(i,a,d)}return Es(i,a,d)}var bw,vm,Ew,Tw;bw=function(i,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)i.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},vm=function(){},Ew=function(i,a,d,m){var y=i.memoizedProps;if(y!==m){i=a.stateNode,ho(zr.current);var _=null;switch(d){case"input":y=Kn(i,y),m=Kn(i,m),_=[];break;case"select":y=fe({},y,{value:void 0}),m=fe({},m,{value:void 0}),_=[];break;case"textarea":y=Fl(i,y),m=Fl(i,m),_=[];break;default:typeof y.onClick!="function"&&typeof m.onClick=="function"&&(i.onclick=Ed)}ql(d,m);var C;d=null;for(X in y)if(!m.hasOwnProperty(X)&&y.hasOwnProperty(X)&&y[X]!=null)if(X==="style"){var M=y[X];for(C in M)M.hasOwnProperty(C)&&(d||(d={}),d[C]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?_||(_=[]):(_=_||[]).push(X,null));for(X in m){var U=m[X];if(M=y!=null?y[X]:void 0,m.hasOwnProperty(X)&&U!==M&&(U!=null||M!=null))if(X==="style")if(M){for(C in M)!M.hasOwnProperty(C)||U&&U.hasOwnProperty(C)||(d||(d={}),d[C]="");for(C in U)U.hasOwnProperty(C)&&M[C]!==U[C]&&(d||(d={}),d[C]=U[C])}else d||(_||(_=[]),_.push(X,d)),d=U;else X==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,M=M?M.__html:void 0,U!=null&&M!==U&&(_=_||[]).push(X,U)):X==="children"?typeof U!="string"&&typeof U!="number"||(_=_||[]).push(X,""+U):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?(U!=null&&X==="onScroll"&&at("scroll",i),_||M===U||(_=[])):(_=_||[]).push(X,U))}d&&(_=_||[]).push("style",d);var X=_;(a.updateQueue=X)&&(a.flags|=4)}},Tw=function(i,a,d,m){d!==m&&(a.flags|=4)};function ku(i,a){if(!ct)switch(i.tailMode){case"hidden":a=i.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function an(i){var a=i.alternate!==null&&i.alternate.child===i.child,d=0,m=0;if(a)for(var y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&14680064,m|=y.flags&14680064,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=m,i.childLanes=d,a}function K1(i,a,d){var m=a.pendingProps;switch(Fp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(a),null;case 1:return Tn(a.type)&&Sd(),an(a),null;case 3:return m=a.stateNode,Ra(),lt(En),lt(sn),Zp(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(Id(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,br!==null&&(Am(br),br=null))),vm(i,a),an(a),null;case 5:Yp(a);var y=ho(_u.current);if(d=a.type,i!==null&&a.stateNode!=null)Ew(i,a,d,m,y),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(n(166));return an(a),null}if(i=ho(zr.current),Id(a)){m=a.stateNode,d=a.type;var _=a.memoizedProps;switch(m[Br]=a,m[gu]=_,i=(a.mode&1)!==0,d){case"dialog":at("cancel",m),at("close",m);break;case"iframe":case"object":case"embed":at("load",m);break;case"video":case"audio":for(y=0;y<fu.length;y++)at(fu[y],m);break;case"source":at("error",m);break;case"img":case"image":case"link":at("error",m),at("load",m);break;case"details":at("toggle",m);break;case"input":as(m,_),at("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},at("invalid",m);break;case"textarea":Go(m,_),at("invalid",m)}ql(d,_),y=null;for(var C in _)if(_.hasOwnProperty(C)){var M=_[C];C==="children"?typeof M=="string"?m.textContent!==M&&(_.suppressHydrationWarning!==!0&&bd(m.textContent,M,i),y=["children",M]):typeof M=="number"&&m.textContent!==""+M&&(_.suppressHydrationWarning!==!0&&bd(m.textContent,M,i),y=["children",""+M]):s.hasOwnProperty(C)&&M!=null&&C==="onScroll"&&at("scroll",m)}switch(d){case"input":xe(m),Wi(m,_,!0);break;case"textarea":xe(m),Ul(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=Ed)}m=y,a.updateQueue=m,m!==null&&(a.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Nt(d)),i==="http://www.w3.org/1999/xhtml"?d==="script"?(i=C.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof m.is=="string"?i=C.createElement(d,{is:m.is}):(i=C.createElement(d),d==="select"&&(C=i,m.multiple?C.multiple=!0:m.size&&(C.size=m.size))):i=C.createElementNS(i,d),i[Br]=a,i[gu]=m,bw(i,a,!1,!1),a.stateNode=i;e:{switch(C=Kl(d,m),d){case"dialog":at("cancel",i),at("close",i),y=m;break;case"iframe":case"object":case"embed":at("load",i),y=m;break;case"video":case"audio":for(y=0;y<fu.length;y++)at(fu[y],i);y=m;break;case"source":at("error",i),y=m;break;case"img":case"image":case"link":at("error",i),at("load",i),y=m;break;case"details":at("toggle",i),y=m;break;case"input":as(i,m),y=Kn(i,m),at("invalid",i);break;case"option":y=m;break;case"select":i._wrapperState={wasMultiple:!!m.multiple},y=fe({},m,{value:void 0}),at("invalid",i);break;case"textarea":Go(i,m),y=Fl(i,m),at("invalid",i);break;default:y=m}ql(d,y),M=y;for(_ in M)if(M.hasOwnProperty(_)){var U=M[_];_==="style"?Wl(i,U):_==="dangerouslySetInnerHTML"?(U=U?U.__html:void 0,U!=null&&Bl(i,U)):_==="children"?typeof U=="string"?(d!=="textarea"||U!=="")&&Us(i,U):typeof U=="number"&&Us(i,""+U):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?U!=null&&_==="onScroll"&&at("scroll",i):U!=null&&$(i,_,U,C))}switch(d){case"input":xe(i),Wi(i,m,!1);break;case"textarea":xe(i),Ul(i);break;case"option":m.value!=null&&i.setAttribute("value",""+Q(m.value));break;case"select":i.multiple=!!m.multiple,_=m.value,_!=null?us(i,!!m.multiple,_,!1):m.defaultValue!=null&&us(i,!!m.multiple,m.defaultValue,!0);break;default:typeof y.onClick=="function"&&(i.onclick=Ed)}switch(d){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return an(a),null;case 6:if(i&&a.stateNode!=null)Tw(i,a,i.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(n(166));if(d=ho(_u.current),ho(zr.current),Id(a)){if(m=a.stateNode,d=a.memoizedProps,m[Br]=a,(_=m.nodeValue!==d)&&(i=Fn,i!==null))switch(i.tag){case 3:bd(m.nodeValue,d,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&bd(m.nodeValue,d,(i.mode&1)!==0)}_&&(a.flags|=4)}else m=(d.nodeType===9?d:d.ownerDocument).createTextNode(m),m[Br]=a,a.stateNode=m}return an(a),null;case 13:if(lt(ft),m=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ct&&Un!==null&&a.mode&1&&!(a.flags&128))Cx(),Ca(),a.flags|=98560,_=!1;else if(_=Id(a),m!==null&&m.dehydrated!==null){if(i===null){if(!_)throw Error(n(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Br]=a}else Ca(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;an(a),_=!1}else br!==null&&(Am(br),br=null),_=!0;if(!_)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(m=m!==null,m!==(i!==null&&i.memoizedState!==null)&&m&&(a.child.flags|=8192,a.mode&1&&(i===null||ft.current&1?Lt===0&&(Lt=3):Nm())),a.updateQueue!==null&&(a.flags|=4),an(a),null);case 4:return Ra(),vm(i,a),i===null&&pu(a.stateNode.containerInfo),an(a),null;case 10:return qp(a.type._context),an(a),null;case 17:return Tn(a.type)&&Sd(),an(a),null;case 19:if(lt(ft),_=a.memoizedState,_===null)return an(a),null;if(m=(a.flags&128)!==0,C=_.rendering,C===null)if(m)ku(_,!1);else{if(Lt!==0||i!==null&&i.flags&128)for(i=a.child;i!==null;){if(C=Ld(i),C!==null){for(a.flags|=128,ku(_,!1),m=C.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=d,d=a.child;d!==null;)_=d,i=m,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,i=C.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),d=d.sibling;return rt(ft,ft.current&1|2),a.child}i=i.sibling}_.tail!==null&&nt()>Oa&&(a.flags|=128,m=!0,ku(_,!1),a.lanes=4194304)}else{if(!m)if(i=Ld(C),i!==null){if(a.flags|=128,m=!0,d=i.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),ku(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!ct)return an(a),null}else 2*nt()-_.renderingStartTime>Oa&&d!==1073741824&&(a.flags|=128,m=!0,ku(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(d=_.last,d!==null?d.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=nt(),a.sibling=null,d=ft.current,rt(ft,m?d&1|2:d&1),a):(an(a),null);case 22:case 23:return Rm(),m=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==m&&(a.flags|=8192),m&&a.mode&1?Bn&1073741824&&(an(a),a.subtreeFlags&6&&(a.flags|=8192)):an(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function G1(i,a){switch(Fp(a),a.tag){case 1:return Tn(a.type)&&Sd(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Ra(),lt(En),lt(sn),Zp(),i=a.flags,i&65536&&!(i&128)?(a.flags=i&-65537|128,a):null;case 5:return Yp(a),null;case 13:if(lt(ft),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(n(340));Ca()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return lt(ft),null;case 4:return Ra(),null;case 10:return qp(a.type._context),null;case 22:case 23:return Rm(),null;case 24:return null;default:return null}}var Hd=!1,ln=!1,Q1=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ja(i,a){var d=i.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(m){yt(i,a,m)}else d.current=null}function xm(i,a,d){try{d()}catch(m){yt(i,a,m)}}var Sw=!1;function J1(i,a){if(Rp=Qs,i=rx(),Ep(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{d.nodeType,_.nodeType}catch{d=null;break e}var C=0,M=-1,U=-1,X=0,le=0,ce=i,ae=null;t:for(;;){for(var ge;ce!==d||y!==0&&ce.nodeType!==3||(M=C+y),ce!==_||m!==0&&ce.nodeType!==3||(U=C+m),ce.nodeType===3&&(C+=ce.nodeValue.length),(ge=ce.firstChild)!==null;)ae=ce,ce=ge;for(;;){if(ce===i)break t;if(ae===d&&++X===y&&(M=C),ae===_&&++le===m&&(U=C),(ge=ce.nextSibling)!==null)break;ce=ae,ae=ce.parentNode}ce=ge}d=M===-1||U===-1?null:{start:M,end:U}}else d=null}d=d||{start:0,end:0}}else d=null;for(Np={focusedElem:i,selectionRange:d},Qs=!1,ve=a;ve!==null;)if(a=ve,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ve=i;else for(;ve!==null;){a=ve;try{var we=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(we!==null){var Ee=we.memoizedProps,Tt=we.memoizedState,G=a.stateNode,B=G.getSnapshotBeforeUpdate(a.elementType===a.type?Ee:Er(a.type,Ee),Tt);G.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var J=a.stateNode.containerInfo;J.nodeType===1?J.textContent="":J.nodeType===9&&J.documentElement&&J.removeChild(J.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(de){yt(a,a.return,de)}if(i=a.sibling,i!==null){i.return=a.return,ve=i;break}ve=a.return}return we=Sw,Sw=!1,we}function Cu(i,a,d){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var y=m=m.next;do{if((y.tag&i)===i){var _=y.destroy;y.destroy=void 0,_!==void 0&&xm(a,d,_)}y=y.next}while(y!==m)}}function qd(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&i)===i){var m=d.create;d.destroy=m()}d=d.next}while(d!==a)}}function wm(i){var a=i.ref;if(a!==null){var d=i.stateNode;switch(i.tag){case 5:i=d;break;default:i=d}typeof a=="function"?a(i):a.current=i}}function kw(i){var a=i.alternate;a!==null&&(i.alternate=null,kw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[Br],delete a[gu],delete a[Lp],delete a[N1],delete a[j1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Cw(i){return i.tag===5||i.tag===3||i.tag===4}function Pw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Cw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function _m(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(i,a):d.insertBefore(i,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(i,d)):(a=d,a.appendChild(i)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Ed));else if(m!==4&&(i=i.child,i!==null))for(_m(i,a,d),i=i.sibling;i!==null;)_m(i,a,d),i=i.sibling}function bm(i,a,d){var m=i.tag;if(m===5||m===6)i=i.stateNode,a?d.insertBefore(i,a):d.appendChild(i);else if(m!==4&&(i=i.child,i!==null))for(bm(i,a,d),i=i.sibling;i!==null;)bm(i,a,d),i=i.sibling}var Jt=null,Tr=!1;function si(i,a,d){for(d=d.child;d!==null;)Aw(i,a,d),d=d.sibling}function Aw(i,a,d){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Zi,d)}catch{}switch(d.tag){case 5:ln||ja(d,a);case 6:var m=Jt,y=Tr;Jt=null,si(i,a,d),Jt=m,Tr=y,Jt!==null&&(Tr?(i=Jt,d=d.stateNode,i.nodeType===8?i.parentNode.removeChild(d):i.removeChild(d)):Jt.removeChild(d.stateNode));break;case 18:Jt!==null&&(Tr?(i=Jt,d=d.stateNode,i.nodeType===8?Op(i.parentNode,d):i.nodeType===1&&Op(i,d),xr(i)):Op(Jt,d.stateNode));break;case 4:m=Jt,y=Tr,Jt=d.stateNode.containerInfo,Tr=!0,si(i,a,d),Jt=m,Tr=y;break;case 0:case 11:case 14:case 15:if(!ln&&(m=d.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){y=m=m.next;do{var _=y,C=_.destroy;_=_.tag,C!==void 0&&(_&2||_&4)&&xm(d,a,C),y=y.next}while(y!==m)}si(i,a,d);break;case 1:if(!ln&&(ja(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=d.memoizedProps,m.state=d.memoizedState,m.componentWillUnmount()}catch(M){yt(d,a,M)}si(i,a,d);break;case 21:si(i,a,d);break;case 22:d.mode&1?(ln=(m=ln)||d.memoizedState!==null,si(i,a,d),ln=m):si(i,a,d);break;default:si(i,a,d)}}function Iw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var d=i.stateNode;d===null&&(d=i.stateNode=new Q1),a.forEach(function(m){var y=iI.bind(null,i,m);d.has(m)||(d.add(m),m.then(y,y))})}}function Sr(i,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m];try{var _=i,C=a,M=C;e:for(;M!==null;){switch(M.tag){case 5:Jt=M.stateNode,Tr=!1;break e;case 3:Jt=M.stateNode.containerInfo,Tr=!0;break e;case 4:Jt=M.stateNode.containerInfo,Tr=!0;break e}M=M.return}if(Jt===null)throw Error(n(160));Aw(_,C,y),Jt=null,Tr=!1;var U=y.alternate;U!==null&&(U.return=null),y.return=null}catch(X){yt(y,a,X)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Rw(a,i),a=a.sibling}function Rw(i,a){var d=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Sr(a,i),Hr(i),m&4){try{Cu(3,i,i.return),qd(3,i)}catch(Ee){yt(i,i.return,Ee)}try{Cu(5,i,i.return)}catch(Ee){yt(i,i.return,Ee)}}break;case 1:Sr(a,i),Hr(i),m&512&&d!==null&&ja(d,d.return);break;case 5:if(Sr(a,i),Hr(i),m&512&&d!==null&&ja(d,d.return),i.flags&32){var y=i.stateNode;try{Us(y,"")}catch(Ee){yt(i,i.return,Ee)}}if(m&4&&(y=i.stateNode,y!=null)){var _=i.memoizedProps,C=d!==null?d.memoizedProps:_,M=i.type,U=i.updateQueue;if(i.updateQueue=null,U!==null)try{M==="input"&&_.type==="radio"&&_.name!=null&&Fs(y,_),Kl(M,C);var X=Kl(M,_);for(C=0;C<U.length;C+=2){var le=U[C],ce=U[C+1];le==="style"?Wl(y,ce):le==="dangerouslySetInnerHTML"?Bl(y,ce):le==="children"?Us(y,ce):$(y,le,ce,X)}switch(M){case"input":ls(y,_);break;case"textarea":Qo(y,_);break;case"select":var ae=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var ge=_.value;ge!=null?us(y,!!_.multiple,ge,!1):ae!==!!_.multiple&&(_.defaultValue!=null?us(y,!!_.multiple,_.defaultValue,!0):us(y,!!_.multiple,_.multiple?[]:"",!1))}y[gu]=_}catch(Ee){yt(i,i.return,Ee)}}break;case 6:if(Sr(a,i),Hr(i),m&4){if(i.stateNode===null)throw Error(n(162));y=i.stateNode,_=i.memoizedProps;try{y.nodeValue=_}catch(Ee){yt(i,i.return,Ee)}}break;case 3:if(Sr(a,i),Hr(i),m&4&&d!==null&&d.memoizedState.isDehydrated)try{xr(a.containerInfo)}catch(Ee){yt(i,i.return,Ee)}break;case 4:Sr(a,i),Hr(i);break;case 13:Sr(a,i),Hr(i),y=i.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||(Sm=nt())),m&4&&Iw(i);break;case 22:if(le=d!==null&&d.memoizedState!==null,i.mode&1?(ln=(X=ln)||le,Sr(a,i),ln=X):Sr(a,i),Hr(i),m&8192){if(X=i.memoizedState!==null,(i.stateNode.isHidden=X)&&!le&&i.mode&1)for(ve=i,le=i.child;le!==null;){for(ce=ve=le;ve!==null;){switch(ae=ve,ge=ae.child,ae.tag){case 0:case 11:case 14:case 15:Cu(4,ae,ae.return);break;case 1:ja(ae,ae.return);var we=ae.stateNode;if(typeof we.componentWillUnmount=="function"){m=ae,d=ae.return;try{a=m,we.props=a.memoizedProps,we.state=a.memoizedState,we.componentWillUnmount()}catch(Ee){yt(m,d,Ee)}}break;case 5:ja(ae,ae.return);break;case 22:if(ae.memoizedState!==null){Dw(ce);continue}}ge!==null?(ge.return=ae,ve=ge):Dw(ce)}le=le.sibling}e:for(le=null,ce=i;;){if(ce.tag===5){if(le===null){le=ce;try{y=ce.stateNode,X?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(M=ce.stateNode,U=ce.memoizedProps.style,C=U!=null&&U.hasOwnProperty("display")?U.display:null,M.style.display=zl("display",C))}catch(Ee){yt(i,i.return,Ee)}}}else if(ce.tag===6){if(le===null)try{ce.stateNode.nodeValue=X?"":ce.memoizedProps}catch(Ee){yt(i,i.return,Ee)}}else if((ce.tag!==22&&ce.tag!==23||ce.memoizedState===null||ce===i)&&ce.child!==null){ce.child.return=ce,ce=ce.child;continue}if(ce===i)break e;for(;ce.sibling===null;){if(ce.return===null||ce.return===i)break e;le===ce&&(le=null),ce=ce.return}le===ce&&(le=null),ce.sibling.return=ce.return,ce=ce.sibling}}break;case 19:Sr(a,i),Hr(i),m&4&&Iw(i);break;case 21:break;default:Sr(a,i),Hr(i)}}function Hr(i){var a=i.flags;if(a&2){try{e:{for(var d=i.return;d!==null;){if(Cw(d)){var m=d;break e}d=d.return}throw Error(n(160))}switch(m.tag){case 5:var y=m.stateNode;m.flags&32&&(Us(y,""),m.flags&=-33);var _=Pw(i);bm(i,_,y);break;case 3:case 4:var C=m.stateNode.containerInfo,M=Pw(i);_m(i,M,C);break;default:throw Error(n(161))}}catch(U){yt(i,i.return,U)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function Y1(i,a,d){ve=i,Nw(i)}function Nw(i,a,d){for(var m=(i.mode&1)!==0;ve!==null;){var y=ve,_=y.child;if(y.tag===22&&m){var C=y.memoizedState!==null||Hd;if(!C){var M=y.alternate,U=M!==null&&M.memoizedState!==null||ln;M=Hd;var X=ln;if(Hd=C,(ln=U)&&!X)for(ve=y;ve!==null;)C=ve,U=C.child,C.tag===22&&C.memoizedState!==null?Ow(y):U!==null?(U.return=C,ve=U):Ow(y);for(;_!==null;)ve=_,Nw(_),_=_.sibling;ve=y,Hd=M,ln=X}jw(i)}else y.subtreeFlags&8772&&_!==null?(_.return=y,ve=_):jw(i)}}function jw(i){for(;ve!==null;){var a=ve;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:ln||qd(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!ln)if(d===null)m.componentDidMount();else{var y=a.elementType===a.type?d.memoizedProps:Er(a.type,d.memoizedProps);m.componentDidUpdate(y,d.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Dx(a,_,m);break;case 3:var C=a.updateQueue;if(C!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Dx(a,C,d)}break;case 5:var M=a.stateNode;if(d===null&&a.flags&4){d=M;var U=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":U.autoFocus&&d.focus();break;case"img":U.src&&(d.src=U.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var X=a.alternate;if(X!==null){var le=X.memoizedState;if(le!==null){var ce=le.dehydrated;ce!==null&&xr(ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ln||a.flags&512&&wm(a)}catch(ae){yt(a,a.return,ae)}}if(a===i){ve=null;break}if(d=a.sibling,d!==null){d.return=a.return,ve=d;break}ve=a.return}}function Dw(i){for(;ve!==null;){var a=ve;if(a===i){ve=null;break}var d=a.sibling;if(d!==null){d.return=a.return,ve=d;break}ve=a.return}}function Ow(i){for(;ve!==null;){var a=ve;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{qd(4,a)}catch(U){yt(a,d,U)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var y=a.return;try{m.componentDidMount()}catch(U){yt(a,y,U)}}var _=a.return;try{wm(a)}catch(U){yt(a,_,U)}break;case 5:var C=a.return;try{wm(a)}catch(U){yt(a,C,U)}}}catch(U){yt(a,a.return,U)}if(a===i){ve=null;break}var M=a.sibling;if(M!==null){M.return=a.return,ve=M;break}ve=a.return}}var X1=Math.ceil,Kd=z.ReactCurrentDispatcher,Em=z.ReactCurrentOwner,nr=z.ReactCurrentBatchConfig,Ge=0,Bt=null,Pt=null,Yt=0,Bn=0,Da=Zs(0),Lt=0,Pu=null,po=0,Gd=0,Tm=0,Au=null,kn=null,Sm=0,Oa=1/0,Ts=null,Qd=!1,km=null,ii=null,Jd=!1,oi=null,Yd=0,Iu=0,Cm=null,Xd=-1,Zd=0;function vn(){return Ge&6?nt():Xd!==-1?Xd:Xd=nt()}function ai(i){return i.mode&1?Ge&2&&Yt!==0?Yt&-Yt:O1.transition!==null?(Zd===0&&(Zd=to()),Zd):(i=He,i!==0||(i=window.event,i=i===void 0?16:su(i.type)),i):1}function kr(i,a,d,m){if(50<Iu)throw Iu=0,Cm=null,Error(n(185));Hs(i,d,m),(!(Ge&2)||i!==Bt)&&(i===Bt&&(!(Ge&2)&&(Gd|=d),Lt===4&&li(i,Yt)),Cn(i,m),d===1&&Ge===0&&!(a.mode&1)&&(Oa=nt()+500,Cd&&ti()))}function Cn(i,a){var d=i.callbackNode;hs(i,a);var m=eo(i,i===Bt?Yt:0);if(m===0)d!==null&&Zl(d),i.callbackNode=null,i.callbackPriority=0;else if(a=m&-m,i.callbackPriority!==a){if(d!=null&&Zl(d),a===1)i.tag===0?D1(Mw.bind(null,i)):bx(Mw.bind(null,i)),I1(function(){!(Ge&6)&&ti()}),d=null;else{switch(Ks(m)){case 1:d=Xi;break;case 4:d=Bs;break;case 16:d=Qn;break;case 536870912:d=Zc;break;default:d=Qn}d=Hw(d,Lw.bind(null,i))}i.callbackPriority=a,i.callbackNode=d}}function Lw(i,a){if(Xd=-1,Zd=0,Ge&6)throw Error(n(327));var d=i.callbackNode;if(La()&&i.callbackNode!==d)return null;var m=eo(i,i===Bt?Yt:0);if(m===0)return null;if(m&30||m&i.expiredLanes||a)a=eh(i,m);else{a=m;var y=Ge;Ge|=2;var _=$w();(Bt!==i||Yt!==a)&&(Ts=null,Oa=nt()+500,go(i,a));do try{tI();break}catch(M){Vw(i,M)}while(!0);Hp(),Kd.current=_,Ge=y,Pt!==null?a=0:(Bt=null,Yt=0,a=Lt)}if(a!==0){if(a===2&&(y=Mn(i),y!==0&&(m=y,a=Pm(i,y))),a===1)throw d=Pu,go(i,0),li(i,m),Cn(i,nt()),d;if(a===6)li(i,m);else{if(y=i.current.alternate,!(m&30)&&!Z1(y)&&(a=eh(i,m),a===2&&(_=Mn(i),_!==0&&(m=_,a=Pm(i,_))),a===1))throw d=Pu,go(i,0),li(i,m),Cn(i,nt()),d;switch(i.finishedWork=y,i.finishedLanes=m,a){case 0:case 1:throw Error(n(345));case 2:yo(i,kn,Ts);break;case 3:if(li(i,m),(m&130023424)===m&&(a=Sm+500-nt(),10<a)){if(eo(i,0)!==0)break;if(y=i.suspendedLanes,(y&m)!==m){vn(),i.pingedLanes|=i.suspendedLanes&y;break}i.timeoutHandle=Dp(yo.bind(null,i,kn,Ts),a);break}yo(i,kn,Ts);break;case 4:if(li(i,m),(m&4194240)===m)break;for(a=i.eventTimes,y=-1;0<m;){var C=31-mn(m);_=1<<C,C=a[C],C>y&&(y=C),m&=~_}if(m=y,m=nt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*X1(m/1960))-m,10<m){i.timeoutHandle=Dp(yo.bind(null,i,kn,Ts),m);break}yo(i,kn,Ts);break;case 5:yo(i,kn,Ts);break;default:throw Error(n(329))}}}return Cn(i,nt()),i.callbackNode===d?Lw.bind(null,i):null}function Pm(i,a){var d=Au;return i.current.memoizedState.isDehydrated&&(go(i,a).flags|=256),i=eh(i,a),i!==2&&(a=kn,kn=d,a!==null&&Am(a)),i}function Am(i){kn===null?kn=i:kn.push.apply(kn,i)}function Z1(i){for(var a=i;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var m=0;m<d.length;m++){var y=d[m],_=y.getSnapshot;y=y.value;try{if(!_r(_(),y))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function li(i,a){for(a&=~Tm,a&=~Gd,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var d=31-mn(a),m=1<<d;i[d]=-1,a&=~m}}function Mw(i){if(Ge&6)throw Error(n(327));La();var a=eo(i,0);if(!(a&1))return Cn(i,nt()),null;var d=eh(i,a);if(i.tag!==0&&d===2){var m=Mn(i);m!==0&&(a=m,d=Pm(i,m))}if(d===1)throw d=Pu,go(i,0),li(i,a),Cn(i,nt()),d;if(d===6)throw Error(n(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,yo(i,kn,Ts),Cn(i,nt()),null}function Im(i,a){var d=Ge;Ge|=1;try{return i(a)}finally{Ge=d,Ge===0&&(Oa=nt()+500,Cd&&ti())}}function mo(i){oi!==null&&oi.tag===0&&!(Ge&6)&&La();var a=Ge;Ge|=1;var d=nr.transition,m=He;try{if(nr.transition=null,He=1,i)return i()}finally{He=m,nr.transition=d,Ge=a,!(Ge&6)&&ti()}}function Rm(){Bn=Da.current,lt(Da)}function go(i,a){i.finishedWork=null,i.finishedLanes=0;var d=i.timeoutHandle;if(d!==-1&&(i.timeoutHandle=-1,A1(d)),Pt!==null)for(d=Pt.return;d!==null;){var m=d;switch(Fp(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Sd();break;case 3:Ra(),lt(En),lt(sn),Zp();break;case 5:Yp(m);break;case 4:Ra();break;case 13:lt(ft);break;case 19:lt(ft);break;case 10:qp(m.type._context);break;case 22:case 23:Rm()}d=d.return}if(Bt=i,Pt=i=ui(i.current,null),Yt=Bn=a,Lt=0,Pu=null,Tm=Gd=po=0,kn=Au=null,co!==null){for(a=0;a<co.length;a++)if(d=co[a],m=d.interleaved,m!==null){d.interleaved=null;var y=m.next,_=d.pending;if(_!==null){var C=_.next;_.next=y,m.next=C}d.pending=m}co=null}return i}function Vw(i,a){do{var d=Pt;try{if(Hp(),Md.current=Ud,Vd){for(var m=pt.memoizedState;m!==null;){var y=m.queue;y!==null&&(y.pending=null),m=m.next}Vd=!1}if(fo=0,Ut=Ot=pt=null,bu=!1,Eu=0,Em.current=null,d===null||d.return===null){Lt=1,Pu=a,Pt=null;break}e:{var _=i,C=d.return,M=d,U=a;if(a=Yt,M.flags|=32768,U!==null&&typeof U=="object"&&typeof U.then=="function"){var X=U,le=M,ce=le.tag;if(!(le.mode&1)&&(ce===0||ce===11||ce===15)){var ae=le.alternate;ae?(le.updateQueue=ae.updateQueue,le.memoizedState=ae.memoizedState,le.lanes=ae.lanes):(le.updateQueue=null,le.memoizedState=null)}var ge=uw(C);if(ge!==null){ge.flags&=-257,cw(ge,C,M,_,a),ge.mode&1&&lw(_,X,a),a=ge,U=X;var we=a.updateQueue;if(we===null){var Ee=new Set;Ee.add(U),a.updateQueue=Ee}else we.add(U);break e}else{if(!(a&1)){lw(_,X,a),Nm();break e}U=Error(n(426))}}else if(ct&&M.mode&1){var Tt=uw(C);if(Tt!==null){!(Tt.flags&65536)&&(Tt.flags|=256),cw(Tt,C,M,_,a),zp(Na(U,M));break e}}_=U=Na(U,M),Lt!==4&&(Lt=2),Au===null?Au=[_]:Au.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var G=ow(_,U,a);jx(_,G);break e;case 1:M=U;var B=_.type,J=_.stateNode;if(!(_.flags&128)&&(typeof B.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(ii===null||!ii.has(J)))){_.flags|=65536,a&=-a,_.lanes|=a;var de=aw(_,M,a);jx(_,de);break e}}_=_.return}while(_!==null)}Uw(d)}catch(Te){a=Te,Pt===d&&d!==null&&(Pt=d=d.return);continue}break}while(!0)}function $w(){var i=Kd.current;return Kd.current=Ud,i===null?Ud:i}function Nm(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),Bt===null||!(po&268435455)&&!(Gd&268435455)||li(Bt,Yt)}function eh(i,a){var d=Ge;Ge|=2;var m=$w();(Bt!==i||Yt!==a)&&(Ts=null,go(i,a));do try{eI();break}catch(y){Vw(i,y)}while(!0);if(Hp(),Ge=d,Kd.current=m,Pt!==null)throw Error(n(261));return Bt=null,Yt=0,Lt}function eI(){for(;Pt!==null;)Fw(Pt)}function tI(){for(;Pt!==null&&!Yc();)Fw(Pt)}function Fw(i){var a=Ww(i.alternate,i,Bn);i.memoizedProps=i.pendingProps,a===null?Uw(i):Pt=a,Em.current=null}function Uw(i){var a=i;do{var d=a.alternate;if(i=a.return,a.flags&32768){if(d=G1(d,a),d!==null){d.flags&=32767,Pt=d;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Lt=6,Pt=null;return}}else if(d=K1(d,a,Bn),d!==null){Pt=d;return}if(a=a.sibling,a!==null){Pt=a;return}Pt=a=i}while(a!==null);Lt===0&&(Lt=5)}function yo(i,a,d){var m=He,y=nr.transition;try{nr.transition=null,He=1,nI(i,a,d,m)}finally{nr.transition=y,He=m}return null}function nI(i,a,d,m){do La();while(oi!==null);if(Ge&6)throw Error(n(327));d=i.finishedWork;var y=i.finishedLanes;if(d===null)return null;if(i.finishedWork=null,i.finishedLanes=0,d===i.current)throw Error(n(177));i.callbackNode=null,i.callbackPriority=0;var _=d.lanes|d.childLanes;if(et(i,_),i===Bt&&(Pt=Bt=null,Yt=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||Jd||(Jd=!0,Hw(Qn,function(){return La(),null})),_=(d.flags&15990)!==0,d.subtreeFlags&15990||_){_=nr.transition,nr.transition=null;var C=He;He=1;var M=Ge;Ge|=4,Em.current=null,J1(i,d),Rw(d,i),b1(Np),Qs=!!Rp,Np=Rp=null,i.current=d,Y1(d),mp(),Ge=M,He=C,nr.transition=_}else i.current=d;if(Jd&&(Jd=!1,oi=i,Yd=y),_=i.pendingLanes,_===0&&(ii=null),ed(d.stateNode),Cn(i,nt()),a!==null)for(m=i.onRecoverableError,d=0;d<a.length;d++)y=a[d],m(y.value,{componentStack:y.stack,digest:y.digest});if(Qd)throw Qd=!1,i=km,km=null,i;return Yd&1&&i.tag!==0&&La(),_=i.pendingLanes,_&1?i===Cm?Iu++:(Iu=0,Cm=i):Iu=0,ti(),null}function La(){if(oi!==null){var i=Ks(Yd),a=nr.transition,d=He;try{if(nr.transition=null,He=16>i?16:i,oi===null)var m=!1;else{if(i=oi,oi=null,Yd=0,Ge&6)throw Error(n(331));var y=Ge;for(Ge|=4,ve=i.current;ve!==null;){var _=ve,C=_.child;if(ve.flags&16){var M=_.deletions;if(M!==null){for(var U=0;U<M.length;U++){var X=M[U];for(ve=X;ve!==null;){var le=ve;switch(le.tag){case 0:case 11:case 15:Cu(8,le,_)}var ce=le.child;if(ce!==null)ce.return=le,ve=ce;else for(;ve!==null;){le=ve;var ae=le.sibling,ge=le.return;if(kw(le),le===X){ve=null;break}if(ae!==null){ae.return=ge,ve=ae;break}ve=ge}}}var we=_.alternate;if(we!==null){var Ee=we.child;if(Ee!==null){we.child=null;do{var Tt=Ee.sibling;Ee.sibling=null,Ee=Tt}while(Ee!==null)}}ve=_}}if(_.subtreeFlags&2064&&C!==null)C.return=_,ve=C;else e:for(;ve!==null;){if(_=ve,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Cu(9,_,_.return)}var G=_.sibling;if(G!==null){G.return=_.return,ve=G;break e}ve=_.return}}var B=i.current;for(ve=B;ve!==null;){C=ve;var J=C.child;if(C.subtreeFlags&2064&&J!==null)J.return=C,ve=J;else e:for(C=B;ve!==null;){if(M=ve,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:qd(9,M)}}catch(Te){yt(M,M.return,Te)}if(M===C){ve=null;break e}var de=M.sibling;if(de!==null){de.return=M.return,ve=de;break e}ve=M.return}}if(Ge=y,ti(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Zi,i)}catch{}m=!0}return m}finally{He=d,nr.transition=a}}return!1}function Bw(i,a,d){a=Na(d,a),a=ow(i,a,1),i=ri(i,a,1),a=vn(),i!==null&&(Hs(i,1,a),Cn(i,a))}function yt(i,a,d){if(i.tag===3)Bw(i,i,d);else for(;a!==null;){if(a.tag===3){Bw(a,i,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ii===null||!ii.has(m))){i=Na(d,i),i=aw(a,i,1),a=ri(a,i,1),i=vn(),a!==null&&(Hs(a,1,i),Cn(a,i));break}}a=a.return}}function rI(i,a,d){var m=i.pingCache;m!==null&&m.delete(a),a=vn(),i.pingedLanes|=i.suspendedLanes&d,Bt===i&&(Yt&d)===d&&(Lt===4||Lt===3&&(Yt&130023424)===Yt&&500>nt()-Sm?go(i,0):Tm|=d),Cn(i,a)}function zw(i,a){a===0&&(i.mode&1?(a=ia,ia<<=1,!(ia&130023424)&&(ia=4194304)):a=1);var d=vn();i=_s(i,a),i!==null&&(Hs(i,a,d),Cn(i,d))}function sI(i){var a=i.memoizedState,d=0;a!==null&&(d=a.retryLane),zw(i,d)}function iI(i,a){var d=0;switch(i.tag){case 13:var m=i.stateNode,y=i.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=i.stateNode;break;default:throw Error(n(314))}m!==null&&m.delete(a),zw(i,d)}var Ww;Ww=function(i,a,d){if(i!==null)if(i.memoizedProps!==a.pendingProps||En.current)Sn=!0;else{if(!(i.lanes&d)&&!(a.flags&128))return Sn=!1,q1(i,a,d);Sn=!!(i.flags&131072)}else Sn=!1,ct&&a.flags&1048576&&Ex(a,Ad,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Wd(i,a),i=a.pendingProps;var y=Ta(a,sn.current);Ia(a,d),y=nm(null,a,m,i,y,d);var _=rm();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Tn(m)?(_=!0,kd(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Qp(a),y.updater=Bd,a.stateNode=y,y._reactInternals=a,um(a,m,i,d),a=fm(null,a,m,!0,_,d)):(a.tag=0,ct&&_&&$p(a),yn(null,a,y,d),a=a.child),a;case 16:m=a.elementType;e:{switch(Wd(i,a),i=a.pendingProps,y=m._init,m=y(m._payload),a.type=m,y=a.tag=aI(m),i=Er(m,i),y){case 0:a=hm(null,a,m,i,d);break e;case 1:a=gw(null,a,m,i,d);break e;case 11:a=dw(null,a,m,i,d);break e;case 14:a=hw(null,a,m,Er(m.type,i),d);break e}throw Error(n(306,m,""))}return a;case 0:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),hm(i,a,m,y,d);case 1:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),gw(i,a,m,y,d);case 3:e:{if(yw(a),i===null)throw Error(n(387));m=a.pendingProps,_=a.memoizedState,y=_.element,Nx(i,a),Od(a,m,null,d);var C=a.memoizedState;if(m=C.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=Na(Error(n(423)),a),a=vw(i,a,m,d,y);break e}else if(m!==y){y=Na(Error(n(424)),a),a=vw(i,a,m,d,y);break e}else for(Un=Xs(a.stateNode.containerInfo.firstChild),Fn=a,ct=!0,br=null,d=Ix(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Ca(),m===y){a=Es(i,a,d);break e}yn(i,a,m,d)}a=a.child}return a;case 5:return Ox(a),i===null&&Bp(a),m=a.type,y=a.pendingProps,_=i!==null?i.memoizedProps:null,C=y.children,jp(m,y)?C=null:_!==null&&jp(m,_)&&(a.flags|=32),mw(i,a),yn(i,a,C,d),a.child;case 6:return i===null&&Bp(a),null;case 13:return xw(i,a,d);case 4:return Jp(a,a.stateNode.containerInfo),m=a.pendingProps,i===null?a.child=Pa(a,null,m,d):yn(i,a,m,d),a.child;case 11:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),dw(i,a,m,y,d);case 7:return yn(i,a,a.pendingProps,d),a.child;case 8:return yn(i,a,a.pendingProps.children,d),a.child;case 12:return yn(i,a,a.pendingProps.children,d),a.child;case 10:e:{if(m=a.type._context,y=a.pendingProps,_=a.memoizedProps,C=y.value,rt(Nd,m._currentValue),m._currentValue=C,_!==null)if(_r(_.value,C)){if(_.children===y.children&&!En.current){a=Es(i,a,d);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var M=_.dependencies;if(M!==null){C=_.child;for(var U=M.firstContext;U!==null;){if(U.context===m){if(_.tag===1){U=bs(-1,d&-d),U.tag=2;var X=_.updateQueue;if(X!==null){X=X.shared;var le=X.pending;le===null?U.next=U:(U.next=le.next,le.next=U),X.pending=U}}_.lanes|=d,U=_.alternate,U!==null&&(U.lanes|=d),Kp(_.return,d,a),M.lanes|=d;break}U=U.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(n(341));C.lanes|=d,M=C.alternate,M!==null&&(M.lanes|=d),Kp(C,d,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}yn(i,a,y.children,d),a=a.child}return a;case 9:return y=a.type,m=a.pendingProps.children,Ia(a,d),y=er(y),m=m(y),a.flags|=1,yn(i,a,m,d),a.child;case 14:return m=a.type,y=Er(m,a.pendingProps),y=Er(m.type,y),hw(i,a,m,y,d);case 15:return fw(i,a,a.type,a.pendingProps,d);case 17:return m=a.type,y=a.pendingProps,y=a.elementType===m?y:Er(m,y),Wd(i,a),a.tag=1,Tn(m)?(i=!0,kd(a)):i=!1,Ia(a,d),sw(a,m,y),um(a,m,y,d),fm(null,a,m,!0,i,d);case 19:return _w(i,a,d);case 22:return pw(i,a,d)}throw Error(n(156,a.tag))};function Hw(i,a){return ra(i,a)}function oI(i,a,d,m){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(i,a,d,m){return new oI(i,a,d,m)}function jm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function aI(i){if(typeof i=="function")return jm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===F)return 11;if(i===pe)return 14}return 2}function ui(i,a){var d=i.alternate;return d===null?(d=rr(i.tag,a,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=a,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&14680064,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,a=i.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d}function th(i,a,d,m,y,_){var C=2;if(m=i,typeof i=="function")jm(i)&&(C=1);else if(typeof i=="string")C=5;else e:switch(i){case R:return vo(d.children,y,_,a);case E:C=8,y|=8;break;case S:return i=rr(12,d,a,y|2),i.elementType=S,i.lanes=_,i;case L:return i=rr(13,d,a,y),i.elementType=L,i.lanes=_,i;case re:return i=rr(19,d,a,y),i.elementType=re,i.lanes=_,i;case _e:return nh(d,y,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case I:C=10;break e;case O:C=9;break e;case F:C=11;break e;case pe:C=14;break e;case Me:C=16,m=null;break e}throw Error(n(130,i==null?i:typeof i,""))}return a=rr(C,d,a,y),a.elementType=i,a.type=m,a.lanes=_,a}function vo(i,a,d,m){return i=rr(7,i,m,a),i.lanes=d,i}function nh(i,a,d,m){return i=rr(22,i,m,a),i.elementType=_e,i.lanes=d,i.stateNode={isHidden:!1},i}function Dm(i,a,d){return i=rr(6,i,null,a),i.lanes=d,i}function Om(i,a,d){return a=rr(4,i.children!==null?i.children:[],i.key,a),a.lanes=d,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function lI(i,a,d,m,y){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ws(0),this.expirationTimes=Ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ws(0),this.identifierPrefix=m,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Lm(i,a,d,m,y,_,C,M,U){return i=new lI(i,a,d,M,U),a===1?(a=1,_===!0&&(a|=8)):a=0,_=rr(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:m,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qp(_),i}function uI(i,a,d){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:m==null?null:""+m,children:i,containerInfo:a,implementation:d}}function qw(i){if(!i)return ei;i=i._reactInternals;e:{if(pr(i)!==i||i.tag!==1)throw Error(n(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Tn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(i.tag===1){var d=i.type;if(Tn(d))return wx(i,d,a)}return a}function Kw(i,a,d,m,y,_,C,M,U){return i=Lm(d,m,!0,i,y,_,C,M,U),i.context=qw(null),d=i.current,m=vn(),y=ai(d),_=bs(m,y),_.callback=a??null,ri(d,_,y),i.current.lanes=y,Hs(i,y,m),Cn(i,m),i}function rh(i,a,d,m){var y=a.current,_=vn(),C=ai(y);return d=qw(d),a.context===null?a.context=d:a.pendingContext=d,a=bs(_,C),a.payload={element:i},m=m===void 0?null:m,m!==null&&(a.callback=m),i=ri(y,a,C),i!==null&&(kr(i,y,C,_),Dd(i,y,C)),C}function sh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Gw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<a?d:a}}function Mm(i,a){Gw(i,a),(i=i.alternate)&&Gw(i,a)}function cI(){return null}var Qw=typeof reportError=="function"?reportError:function(i){console.error(i)};function Vm(i){this._internalRoot=i}ih.prototype.render=Vm.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(n(409));rh(i,a,null,null)},ih.prototype.unmount=Vm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;mo(function(){rh(null,i,null,null)}),a[ys]=null}};function ih(i){this._internalRoot=i}ih.prototype.unstable_scheduleHydration=function(i){if(i){var a=id();i={blockedOn:null,target:i,priority:a};for(var d=0;d<Vr.length&&a!==0&&a<Vr[d].priority;d++);Vr.splice(d,0,i),d===0&&ld(i)}};function $m(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function oh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Jw(){}function dI(i,a,d,m,y){if(y){if(typeof m=="function"){var _=m;m=function(){var X=sh(C);_.call(X)}}var C=Kw(a,m,i,0,null,!1,!1,"",Jw);return i._reactRootContainer=C,i[ys]=C.current,pu(i.nodeType===8?i.parentNode:i),mo(),C}for(;y=i.lastChild;)i.removeChild(y);if(typeof m=="function"){var M=m;m=function(){var X=sh(U);M.call(X)}}var U=Lm(i,0,!1,null,null,!1,!1,"",Jw);return i._reactRootContainer=U,i[ys]=U.current,pu(i.nodeType===8?i.parentNode:i),mo(function(){rh(a,U,d,m)}),U}function ah(i,a,d,m,y){var _=d._reactRootContainer;if(_){var C=_;if(typeof y=="function"){var M=y;y=function(){var U=sh(C);M.call(U)}}rh(a,C,i,y)}else C=dI(d,a,i,y,m);return sh(C)}rd=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var d=zs(a.pendingLanes);d!==0&&(qs(a,d|1),Cn(a,nt()),!(Ge&6)&&(Oa=nt()+500,ti()))}break;case 13:mo(function(){var m=_s(i,1);if(m!==null){var y=vn();kr(m,i,1,y)}}),Mm(i,1)}},oa=function(i){if(i.tag===13){var a=_s(i,134217728);if(a!==null){var d=vn();kr(a,i,134217728,d)}Mm(i,134217728)}},sd=function(i){if(i.tag===13){var a=ai(i),d=_s(i,a);if(d!==null){var m=vn();kr(d,i,a,m)}Mm(i,a)}},id=function(){return He},od=function(i,a){var d=He;try{return He=i,a()}finally{He=d}},Yo=function(i,a,d){switch(a){case"input":if(ls(i,d),a=d.name,d.type==="radio"&&a!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==i&&m.form===i.form){var y=Td(m);if(!y)throw Error(n(90));Oe(m),ls(m,y)}}}break;case"textarea":Qo(i,d);break;case"select":a=d.value,a!=null&&us(i,!!d.multiple,a,!1)}},Gi=Im,Ql=mo;var hI={usingClientEntryPoint:!1,Events:[yu,ba,Td,Lr,Gl,Im]},Ru={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fI={bundleType:Ru.bundleType,version:Ru.version,rendererPackageName:Ru.rendererPackageName,rendererConfig:Ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Xl(i),i===null?null:i.stateNode},findFiberByHostInstance:Ru.findFiberByHostInstance||cI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{Zi=lh.inject(fI),Ln=lh}catch{}}return Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hI,Pn.createPortal=function(i,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(a))throw Error(n(200));return uI(i,a,null,d)},Pn.createRoot=function(i,a){if(!$m(i))throw Error(n(299));var d=!1,m="",y=Qw;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Lm(i,1,!1,null,null,d,!1,m,y),i[ys]=a.current,pu(i.nodeType===8?i.parentNode:i),new Vm(a)},Pn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=Xl(a),i=i===null?null:i.stateNode,i},Pn.flushSync=function(i){return mo(i)},Pn.hydrate=function(i,a,d){if(!oh(a))throw Error(n(200));return ah(null,i,a,!0,d)},Pn.hydrateRoot=function(i,a,d){if(!$m(i))throw Error(n(405));var m=d!=null&&d.hydratedSources||null,y=!1,_="",C=Qw;if(d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(_=d.identifierPrefix),d.onRecoverableError!==void 0&&(C=d.onRecoverableError)),a=Kw(a,null,i,1,d??null,y,!1,_,C),i[ys]=a.current,pu(i),m)for(i=0;i<m.length;i++)d=m[i],y=d._getVersion,y=y(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,y]:a.mutableSourceEagerHydrationData.push(d,y);return new ih(a)},Pn.render=function(i,a,d){if(!oh(a))throw Error(n(200));return ah(null,i,a,!1,d)},Pn.unmountComponentAtNode=function(i){if(!oh(i))throw Error(n(40));return i._reactRootContainer?(mo(function(){ah(null,null,i,!1,function(){i._reactRootContainer=null,i[ys]=null})}),!0):!1},Pn.unstable_batchedUpdates=Im,Pn.unstable_renderSubtreeIntoContainer=function(i,a,d,m){if(!oh(d))throw Error(n(200));if(i==null||i._reactInternals===void 0)throw Error(n(38));return ah(i,a,d,!1,m)},Pn.version="18.3.1-next-f1338f8080-20240426",Pn}var s_;function KT(){if(s_)return Bm.exports;s_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bm.exports=EI(),Bm.exports}var i_;function TI(){if(i_)return uh;i_=1;var t=KT();return uh.createRoot=t.createRoot,uh.hydrateRoot=t.hydrateRoot,uh}var SI=TI();const kI=Fo(SI);var ju={},o_;function CI(){if(o_)return ju;o_=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.parse=l,ju.serialize=h;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,o=(()=>{const x=function(){};return x.prototype=Object.create(null),x})();function l(x,b){const k=new o,D=x.length;if(D<2)return k;const P=(b==null?void 0:b.decode)||g;let j=0;do{const V=x.indexOf("=",j);if(V===-1)break;const $=x.indexOf(";",j),z=$===-1?D:$;if(V>z){j=x.lastIndexOf(";",V-1)+1;continue}const H=u(x,j,V),Y=c(x,V,H),R=x.slice(H,Y);if(k[R]===void 0){let E=u(x,V+1,z),S=c(x,z,E);const I=P(x.slice(E,S));k[R]=I}j=z+1}while(j<D);return k}function u(x,b,k){do{const D=x.charCodeAt(b);if(D!==32&&D!==9)return b}while(++b<k);return k}function c(x,b,k){for(;b>k;){const D=x.charCodeAt(--b);if(D!==32&&D!==9)return b+1}return k}function h(x,b,k){const D=(k==null?void 0:k.encode)||encodeURIComponent;if(!t.test(x))throw new TypeError(`argument name is invalid: ${x}`);const P=D(b);if(!e.test(P))throw new TypeError(`argument val is invalid: ${b}`);let j=x+"="+P;if(!k)return j;if(k.maxAge!==void 0){if(!Number.isInteger(k.maxAge))throw new TypeError(`option maxAge is invalid: ${k.maxAge}`);j+="; Max-Age="+k.maxAge}if(k.domain){if(!n.test(k.domain))throw new TypeError(`option domain is invalid: ${k.domain}`);j+="; Domain="+k.domain}if(k.path){if(!r.test(k.path))throw new TypeError(`option path is invalid: ${k.path}`);j+="; Path="+k.path}if(k.expires){if(!v(k.expires)||!Number.isFinite(k.expires.valueOf()))throw new TypeError(`option expires is invalid: ${k.expires}`);j+="; Expires="+k.expires.toUTCString()}if(k.httpOnly&&(j+="; HttpOnly"),k.secure&&(j+="; Secure"),k.partitioned&&(j+="; Partitioned"),k.priority)switch(typeof k.priority=="string"?k.priority.toLowerCase():void 0){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${k.priority}`)}if(k.sameSite)switch(typeof k.sameSite=="string"?k.sameSite.toLowerCase():k.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${k.sameSite}`)}return j}function g(x){if(x.indexOf("%")===-1)return x;try{return decodeURIComponent(x)}catch{return x}}function v(x){return s.call(x)==="[object Date]"}return ju}CI();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var a_="popstate";function PI(t={}){function e(r,s){let{pathname:o,search:l,hash:u}=r.location;return Dg("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:cc(s)}return II(e,n,null,t)}function ht(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ir(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AI(){return Math.random().toString(36).substring(2,10)}function l_(t,e){return{usr:t.state,key:t.key,idx:e}}function Dg(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?kl(e):e,state:n,key:e&&e.key||r||AI()}}function cc({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function kl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function II(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,u="POP",c=null,h=g();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function g(){return(l.state||{idx:null}).idx}function v(){u="POP";let P=g(),j=P==null?null:P-h;h=P,c&&c({action:u,location:D.location,delta:j})}function x(P,j){u="PUSH";let V=Dg(D.location,P,j);h=g()+1;let $=l_(V,h),z=D.createHref(V);try{l.pushState($,"",z)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(z)}o&&c&&c({action:u,location:D.location,delta:1})}function b(P,j){u="REPLACE";let V=Dg(D.location,P,j);h=g();let $=l_(V,h),z=D.createHref(V);l.replaceState($,"",z),o&&c&&c({action:u,location:D.location,delta:0})}function k(P){let j=s.location.origin!=="null"?s.location.origin:s.location.href,V=typeof P=="string"?P:cc(P);return V=V.replace(/ $/,"%20"),ht(j,`No window.location.(origin|href) available to create URL for href: ${V}`),new URL(V,j)}let D={get action(){return u},get location(){return t(s,l)},listen(P){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(a_,v),c=P,()=>{s.removeEventListener(a_,v),c=null}},createHref(P){return e(s,P)},createURL:k,encodeLocation(P){let j=k(P);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:b,go(P){return l.go(P)}};return D}function GT(t,e,n="/"){return RI(t,e,n,!1)}function RI(t,e,n,r){let s=typeof e=="string"?kl(e):e,o=Pi(s.pathname||"/",n);if(o==null)return null;let l=QT(t);NI(l);let u=null;for(let c=0;u==null&&c<l.length;++c){let h=zI(o);u=UI(l[c],h,r)}return u}function QT(t,e=[],n=[],r=""){let s=(o,l,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let h=Is([r,c.relativePath]),g=n.concat(c);o.children&&o.children.length>0&&(ht(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),QT(o.children,e,g,h)),!(o.path==null&&!o.index)&&e.push({path:h,score:$I(h,o.index),routesMeta:g})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let c of JT(o.path))s(o,l,c)}),e}function JT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=JT(r.join("/")),u=[];return u.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&u.push(...l),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function NI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var jI=/^:[\w-]+$/,DI=3,OI=2,LI=1,MI=10,VI=-2,u_=t=>t==="*";function $I(t,e){let n=t.split("/"),r=n.length;return n.some(u_)&&(r+=VI),e&&(r+=OI),n.filter(s=>!u_(s)).reduce((s,o)=>s+(jI.test(o)?DI:o===""?LI:MI),r)}function FI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function UI(t,e,n=!1){let{routesMeta:r}=t,s={},o="/",l=[];for(let u=0;u<r.length;++u){let c=r[u],h=u===r.length-1,g=o==="/"?e:e.slice(o.length)||"/",v=Kh({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},g),x=c.route;if(!v&&h&&n&&!r[r.length-1].route.index&&(v=Kh({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},g)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:Is([o,v.pathname]),pathnameBase:KI(Is([o,v.pathnameBase])),route:x}),v.pathnameBase!=="/"&&(o=Is([o,v.pathnameBase]))}return l}function Kh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((h,{paramName:g,isOptional:v},x)=>{if(g==="*"){let k=u[x]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=u[x];return v&&!b?h[g]=void 0:h[g]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:t}}function BI(t,e=!1,n=!0){Ir(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function zI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ir(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function WI(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?kl(t):t;return{pathname:n?n.startsWith("/")?n:HI(n,e):e,search:GI(r),hash:QI(s)}}function HI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hm(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function W0(t){let e=qI(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function H0(t,e,n,r=!1){let s;typeof t=="string"?s=kl(t):(s={...t},ht(!s.pathname||!s.pathname.includes("?"),Hm("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),Hm("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),Hm("#","search","hash",s)));let o=t===""||s.pathname==="",l=o?"/":s.pathname,u;if(l==null)u=n;else{let v=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),v-=1;s.pathname=x.join("/")}u=v>=0?e[v]:"/"}let c=WI(s,u),h=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||g)&&(c.pathname+="/"),c}var Is=t=>t.join("/").replace(/\/\/+/g,"/"),KI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var YT=["POST","PUT","PATCH","DELETE"];new Set(YT);var YI=["GET",...YT];new Set(YI);var Cl=A.createContext(null);Cl.displayName="DataRouter";var Af=A.createContext(null);Af.displayName="DataRouterState";var XT=A.createContext({isTransitioning:!1});XT.displayName="ViewTransition";var XI=A.createContext(new Map);XI.displayName="Fetchers";var ZI=A.createContext(null);ZI.displayName="Await";var jr=A.createContext(null);jr.displayName="Navigation";var Nc=A.createContext(null);Nc.displayName="Location";var dr=A.createContext({outlet:null,matches:[],isDataRoute:!1});dr.displayName="Route";var q0=A.createContext(null);q0.displayName="RouteError";function eR(t,{relative:e}={}){ht(Pl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(jr),{hash:s,pathname:o,search:l}=jc(t,{relative:e}),u=o;return n!=="/"&&(u=o==="/"?n:Is([n,o])),r.createHref({pathname:u,search:l,hash:s})}function Pl(){return A.useContext(Nc)!=null}function Dr(){return ht(Pl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Nc).location}var ZT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eS(t){A.useContext(jr).static||A.useLayoutEffect(t)}function rn(){let{isDataRoute:t}=A.useContext(dr);return t?mR():tR()}function tR(){ht(Pl(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Cl),{basename:e,navigator:n}=A.useContext(jr),{matches:r}=A.useContext(dr),{pathname:s}=Dr(),o=JSON.stringify(W0(r)),l=A.useRef(!1);return eS(()=>{l.current=!0}),A.useCallback((c,h={})=>{if(Ir(l.current,ZT),!l.current)return;if(typeof c=="number"){n.go(c);return}let g=H0(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Is([e,g.pathname])),(h.replace?n.replace:n.push)(g,h.state,h)},[e,n,o,s,t])}var nR=A.createContext(null);function rR(t){let e=A.useContext(dr).outlet;return e&&A.createElement(nR.Provider,{value:t},e)}function If(){let{matches:t}=A.useContext(dr),e=t[t.length-1];return e?e.params:{}}function jc(t,{relative:e}={}){let{matches:n}=A.useContext(dr),{pathname:r}=Dr(),s=JSON.stringify(W0(n));return A.useMemo(()=>H0(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function sR(t,e){return tS(t,e)}function tS(t,e,n,r){var V;ht(Pl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=A.useContext(jr),{matches:l}=A.useContext(dr),u=l[l.length-1],c=u?u.params:{},h=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let $=v&&v.path||"";nS(h,!v||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let x=Dr(),b;if(e){let $=typeof e=="string"?kl(e):e;ht(g==="/"||((V=$.pathname)==null?void 0:V.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),b=$}else b=x;let k=b.pathname||"/",D=k;if(g!=="/"){let $=g.replace(/^\//,"").split("/");D="/"+k.replace(/^\//,"").split("/").slice($.length).join("/")}let P=!o&&n&&n.matches&&n.matches.length>0?n.matches:GT(t,{pathname:D});Ir(v||P!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Ir(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=uR(P&&P.map($=>Object.assign({},$,{params:Object.assign({},c,$.params),pathname:Is([g,s.encodeLocation?s.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Is([g,s.encodeLocation?s.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,n,r);return e&&j?A.createElement(Nc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},j):j}function iR(){let t=pR(),e=JI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,l)}var oR=A.createElement(iR,null),aR=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?A.createElement(dr.Provider,{value:this.props.routeContext},A.createElement(q0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lR({routeContext:t,match:e,children:n}){let r=A.useContext(Cl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(dr.Provider,{value:t},n)}function uR(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let c=s.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);ht(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n)for(let c=0;c<s.length;c++){let h=s[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:g,errors:v}=n,x=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!v||v[h.route.id]===void 0);if(h.route.lazy||x){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,h,g)=>{let v,x=!1,b=null,k=null;n&&(v=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||oR,l&&(u<0&&g===0?(nS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,k=null):u===g&&(x=!0,k=h.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,g+1)),P=()=>{let j;return v?j=b:x?j=k:h.route.Component?j=A.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=c,A.createElement(lR,{match:h,routeContext:{outlet:c,matches:D,isDataRoute:n!=null},children:j})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?A.createElement(aR,{location:n.location,revalidation:n.revalidation,component:b,error:v,children:P(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):P()},null)}function K0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cR(t){let e=A.useContext(Cl);return ht(e,K0(t)),e}function dR(t){let e=A.useContext(Af);return ht(e,K0(t)),e}function hR(t){let e=A.useContext(dr);return ht(e,K0(t)),e}function G0(t){let e=hR(t),n=e.matches[e.matches.length-1];return ht(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fR(){return G0("useRouteId")}function pR(){var r;let t=A.useContext(q0),e=dR("useRouteError"),n=G0("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function mR(){let{router:t}=cR("useNavigate"),e=G0("useNavigate"),n=A.useRef(!1);return eS(()=>{n.current=!0}),A.useCallback(async(s,o={})=>{Ir(n.current,ZT),n.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var c_={};function nS(t,e,n){!e&&!c_[t]&&(c_[t]=!0,Ir(!1,n))}A.memo(gR);function gR({routes:t,future:e,state:n}){return tS(t,void 0,n,e)}function yR({to:t,replace:e,state:n,relative:r}){ht(Pl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(jr);Ir(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext(dr),{pathname:l}=Dr(),u=rn(),c=H0(t,W0(o),l,r==="path"),h=JSON.stringify(c);return A.useEffect(()=>{u(JSON.parse(h),{replace:e,state:n,relative:r})},[u,h,r,e,n]),null}function rS(t){return rR(t.context)}function Je(t){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vR({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:o=!1}){ht(!Pl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:o,future:{}}),[l,s,o]);typeof n=="string"&&(n=kl(n));let{pathname:c="/",search:h="",hash:g="",state:v=null,key:x="default"}=n,b=A.useMemo(()=>{let k=Pi(c,l);return k==null?null:{location:{pathname:k,search:h,hash:g,state:v,key:x},navigationType:r}},[l,c,h,g,v,x,r]);return Ir(b!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:A.createElement(jr.Provider,{value:u},A.createElement(Nc.Provider,{children:e,value:b}))}function xR({children:t,location:e}){return sR(Og(t),e)}function Og(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let o=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Og(r.props.children,o));return}ht(r.type===Je,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Og(r.props.children,o)),n.push(l)}),n}var Ih="get",Rh="application/x-www-form-urlencoded";function Rf(t){return t!=null&&typeof t.tagName=="string"}function wR(t){return Rf(t)&&t.tagName.toLowerCase()==="button"}function _R(t){return Rf(t)&&t.tagName.toLowerCase()==="form"}function bR(t){return Rf(t)&&t.tagName.toLowerCase()==="input"}function ER(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function TR(t,e){return t.button===0&&(!e||e==="_self")&&!ER(t)}var ch=null;function SR(){if(ch===null)try{new FormData(document.createElement("form"),0),ch=!1}catch{ch=!0}return ch}var kR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qm(t){return t!=null&&!kR.has(t)?(Ir(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rh}"`),null):t}function CR(t,e){let n,r,s,o,l;if(_R(t)){let u=t.getAttribute("action");r=u?Pi(u,e):null,n=t.getAttribute("method")||Ih,s=qm(t.getAttribute("enctype"))||Rh,o=new FormData(t)}else if(wR(t)||bR(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||u.getAttribute("action");if(r=c?Pi(c,e):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||Ih,s=qm(t.getAttribute("formenctype"))||qm(u.getAttribute("enctype"))||Rh,o=new FormData(u,t),!SR()){let{name:h,type:g,value:v}=t;if(g==="image"){let x=h?`${h}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else h&&o.append(h,v)}}else{if(Rf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ih,r=null,s=Rh,l=t}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:o,body:l}}function Q0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function PR(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function AR(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function IR(t,e,n){let r=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await PR(o,n);return l.links?l.links():[]}return[]}));return DR(r.flat(1).filter(AR).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function d_(t,e,n,r,s,o){let l=(c,h)=>n[h]?c.route.id!==n[h].route.id:!0,u=(c,h)=>{var g;return n[h].pathname!==c.pathname||((g=n[h].route.path)==null?void 0:g.endsWith("*"))&&n[h].params["*"]!==c.params["*"]};return o==="assets"?e.filter((c,h)=>l(c,h)||u(c,h)):o==="data"?e.filter((c,h)=>{var v;let g=r.routes[c.route.id];if(!g||!g.hasLoader)return!1;if(l(c,h)||u(c,h))return!0;if(c.route.shouldRevalidate){let x=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((v=n[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function RR(t,e){return NR(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let s=[r.module];return r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function NR(t){return[...new Set(t)]}function jR(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function DR(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let o=JSON.stringify(jR(s));return n.has(o)||(n.add(o),r.push({key:o,link:s})),r},[])}function OR(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function LR(){let t=A.useContext(Cl);return Q0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function MR(){let t=A.useContext(Af);return Q0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var J0=A.createContext(void 0);J0.displayName="FrameworkContext";function sS(){let t=A.useContext(J0);return Q0(t,"You must render this element inside a <HydratedRouter> element"),t}function VR(t,e){let n=A.useContext(J0),[r,s]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:u,onBlur:c,onMouseEnter:h,onMouseLeave:g,onTouchStart:v}=e,x=A.useRef(null);A.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let D=j=>{j.forEach(V=>{l(V.isIntersecting)})},P=new IntersectionObserver(D,{threshold:.5});return x.current&&P.observe(x.current),()=>{P.disconnect()}}},[t]),A.useEffect(()=>{if(r){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[r]);let b=()=>{s(!0)},k=()=>{s(!1),l(!1)};return n?t!=="intent"?[o,x,{}]:[o,x,{onFocus:Du(u,b),onBlur:Du(c,k),onMouseEnter:Du(h,b),onMouseLeave:Du(g,k),onTouchStart:Du(v,b)}]:[!1,x,{}]}function Du(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $R({page:t,...e}){let{router:n}=LR(),r=A.useMemo(()=>GT(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(UR,{page:t,matches:r,...e}):null}function FR(t){let{manifest:e,routeModules:n}=sS(),[r,s]=A.useState([]);return A.useEffect(()=>{let o=!1;return IR(t,e,n).then(l=>{o||s(l)}),()=>{o=!0}},[t,e,n]),r}function UR({page:t,matches:e,...n}){let r=Dr(),{manifest:s,routeModules:o}=sS(),{loaderData:l,matches:u}=MR(),c=A.useMemo(()=>d_(t,e,u,s,r,"data"),[t,e,u,s,r]),h=A.useMemo(()=>d_(t,e,u,s,r,"assets"),[t,e,u,s,r]),g=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,k=!1;if(e.forEach(P=>{var V;let j=s.routes[P.route.id];!j||!j.hasLoader||(!c.some($=>$.route.id===P.route.id)&&P.route.id in l&&((V=o[P.route.id])!=null&&V.shouldRevalidate)||j.hasClientLoader?k=!0:b.add(P.route.id))}),b.size===0)return[];let D=OR(t);return k&&b.size>0&&D.searchParams.set("_routes",e.filter(P=>b.has(P.route.id)).map(P=>P.route.id).join(",")),[D.pathname+D.search]},[l,r,s,c,e,t,o]),v=A.useMemo(()=>RR(h,s),[h,s]),x=FR(h);return A.createElement(A.Fragment,null,g.map(b=>A.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),v.map(b=>A.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),x.map(({key:b,link:k})=>A.createElement("link",{key:b,...k})))}function BR(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var iS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iS&&(window.__reactRouterVersion="7.1.5")}catch{}function zR({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=PI({window:n,v5Compat:!0}));let s=r.current,[o,l]=A.useState({action:s.action,location:s.location}),u=A.useCallback(c=>{A.startTransition(()=>l(c))},[l]);return A.useLayoutEffect(()=>s.listen(u),[s,u]),A.createElement(vR,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var oS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:u,target:c,to:h,preventScrollReset:g,viewTransition:v,...x},b){let{basename:k}=A.useContext(jr),D=typeof h=="string"&&oS.test(h),P,j=!1;if(typeof h=="string"&&D&&(P=h,iS))try{let S=new URL(window.location.href),I=h.startsWith("//")?new URL(S.protocol+h):new URL(h),O=Pi(I.pathname,k);I.origin===S.origin&&O!=null?h=O+I.search+I.hash:j=!0}catch{Ir(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=eR(h,{relative:s}),[$,z,H]=VR(r,x),Y=KR(h,{replace:l,state:u,target:c,preventScrollReset:g,relative:s,viewTransition:v});function R(S){e&&e(S),S.defaultPrevented||Y(S)}let E=A.createElement("a",{...x,...H,href:P||V,onClick:j||o?e:R,ref:BR(b,z),target:c,"data-discover":!D&&n==="render"?"true":void 0});return $&&!D?A.createElement(A.Fragment,null,E,A.createElement($R,{page:V})):E});it.displayName="Link";var WR=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:u,children:c,...h},g){let v=jc(l,{relative:h.relative}),x=Dr(),b=A.useContext(Af),{navigator:k,basename:D}=A.useContext(jr),P=b!=null&&XR(v)&&u===!0,j=k.encodeLocation?k.encodeLocation(v).pathname:v.pathname,V=x.pathname,$=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(V=V.toLowerCase(),$=$?$.toLowerCase():null,j=j.toLowerCase()),$&&D&&($=Pi($,D)||$);const z=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let H=V===j||!s&&V.startsWith(j)&&V.charAt(z)==="/",Y=$!=null&&($===j||!s&&$.startsWith(j)&&$.charAt(j.length)==="/"),R={isActive:H,isPending:Y,isTransitioning:P},E=H?e:void 0,S;typeof r=="function"?S=r(R):S=[r,H?"active":null,Y?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let I=typeof o=="function"?o(R):o;return A.createElement(it,{...h,"aria-current":E,className:S,ref:g,style:I,to:l,viewTransition:u},typeof c=="function"?c(R):c)});WR.displayName="NavLink";var HR=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:o,method:l=Ih,action:u,onSubmit:c,relative:h,preventScrollReset:g,viewTransition:v,...x},b)=>{let k=JR(),D=YR(u,{relative:h}),P=l.toLowerCase()==="get"?"get":"post",j=typeof u=="string"&&oS.test(u),V=$=>{if(c&&c($),$.defaultPrevented)return;$.preventDefault();let z=$.nativeEvent.submitter,H=(z==null?void 0:z.getAttribute("formmethod"))||l;k(z||$.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:s,state:o,relative:h,preventScrollReset:g,viewTransition:v})};return A.createElement("form",{ref:b,method:P,action:D,onSubmit:r?c:V,...x,"data-discover":!j&&t==="render"?"true":void 0})});HR.displayName="Form";function qR(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aS(t){let e=A.useContext(Cl);return ht(e,qR(t)),e}function KR(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:o,viewTransition:l}={}){let u=rn(),c=Dr(),h=jc(t,{relative:o});return A.useCallback(g=>{if(TR(g,e)){g.preventDefault();let v=n!==void 0?n:cc(c)===cc(h);u(t,{replace:v,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,n,r,e,t,s,o,l])}var GR=0,QR=()=>`__${String(++GR)}__`;function JR(){let{router:t}=aS("useSubmit"),{basename:e}=A.useContext(jr),n=fR();return A.useCallback(async(r,s={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=CR(r,e);if(s.navigate===!1){let g=s.fetcherKey||QR();await t.fetch(g,n,s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,n])}function YR(t,{relative:e}={}){let{basename:n}=A.useContext(jr),r=A.useContext(dr);ht(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...jc(t||".",{relative:e})},l=Dr();if(t==null){o.search=l.search;let u=new URLSearchParams(o.search),c=u.getAll("index");if(c.some(g=>g==="")){u.delete("index"),c.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Is([n,o.pathname])),cc(o)}function XR(t,e={}){let n=A.useContext(XT);ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=aS("useViewTransitionState"),s=jc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=Pi(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Pi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kh(s.pathname,l)!=null||Kh(s.pathname,o)!=null}new TextEncoder;var ZR=KT();const dh=Fo(ZR);var Km,h_;function eN(){if(h_)return Km;h_=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(o,l){if(o===l)return!0;if(o&&l&&typeof o=="object"&&typeof l=="object"){if(o.constructor!==l.constructor)return!1;var u,c,h;if(Array.isArray(o)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(!s(o[c],l[c]))return!1;return!0}var g;if(e&&o instanceof Map&&l instanceof Map){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;for(g=o.entries();!(c=g.next()).done;)if(!s(c.value[1],l.get(c.value[0])))return!1;return!0}if(n&&o instanceof Set&&l instanceof Set){if(o.size!==l.size)return!1;for(g=o.entries();!(c=g.next()).done;)if(!l.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(o)&&ArrayBuffer.isView(l)){if(u=o.length,u!=l.length)return!1;for(c=u;c--!==0;)if(o[c]!==l[c])return!1;return!0}if(o.constructor===RegExp)return o.source===l.source&&o.flags===l.flags;if(o.valueOf!==Object.prototype.valueOf&&typeof o.valueOf=="function"&&typeof l.valueOf=="function")return o.valueOf()===l.valueOf();if(o.toString!==Object.prototype.toString&&typeof o.toString=="function"&&typeof l.toString=="function")return o.toString()===l.toString();if(h=Object.keys(o),u=h.length,u!==Object.keys(l).length)return!1;for(c=u;c--!==0;)if(!Object.prototype.hasOwnProperty.call(l,h[c]))return!1;if(t&&o instanceof Element)return!1;for(c=u;c--!==0;)if(!((h[c]==="_owner"||h[c]==="__v"||h[c]==="__o")&&o.$$typeof)&&!s(o[h[c]],l[h[c]]))return!1;return!0}return o!==o&&l!==l}return Km=function(l,u){try{return s(l,u)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},Km}var tN=eN();const nN=Fo(tN);var Gm,f_;function rN(){if(f_)return Gm;f_=1;var t=function(e,n,r,s,o,l,u,c){if(!e){var h;if(n===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[r,s,o,l,u,c],v=0;h=new Error(n.replace(/%s/g,function(){return g[v++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return Gm=t,Gm}var sN=rN();const p_=Fo(sN);var Qm,m_;function iN(){return m_||(m_=1,Qm=function(e,n,r,s){var o=r?r.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var l=Object.keys(e),u=Object.keys(n);if(l.length!==u.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),h=0;h<l.length;h++){var g=l[h];if(!c(g))return!1;var v=e[g],x=n[g];if(o=r?r.call(s,v,x,g):void 0,o===!1||o===void 0&&v!==x)return!1}return!0}),Qm}var oN=iN();const aN=Fo(oN);var lS=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(lS||{}),Jm={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},g_=Object.values(lS),Y0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},lN=Object.entries(Y0).reduce((t,[e,n])=>(t[n]=e,t),{}),Ar="data-rh",il={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},ol=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},uN=t=>{let e=ol(t,"title");const n=ol(t,il.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=ol(t,il.DEFAULT_TITLE);return e||r||void 0},cN=t=>ol(t,il.ON_CHANGE_CLIENT_STATE)||(()=>{}),Ym=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),dN=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const u=s[o].toLowerCase();if(t.indexOf(u)!==-1&&r[u])return n.concat(r)}}return n},[]),hN=t=>console&&typeof console.warn=="function"&&console.warn(t),Ou=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&hN(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,o)=>{const l={};o.filter(c=>{let h;const g=Object.keys(c);for(let x=0;x<g.length;x+=1){const b=g[x],k=b.toLowerCase();e.indexOf(k)!==-1&&!(h==="rel"&&c[h].toLowerCase()==="canonical")&&!(k==="rel"&&c[k].toLowerCase()==="stylesheet")&&(h=k),e.indexOf(b)!==-1&&(b==="innerHTML"||b==="cssText"||b==="itemprop")&&(h=b)}if(!h||!c[h])return!1;const v=c[h].toLowerCase();return r[h]||(r[h]={}),l[h]||(l[h]={}),r[h][v]?!1:(l[h][v]=!0,!0)}).reverse().forEach(c=>s.push(c));const u=Object.keys(l);for(let c=0;c<u.length;c+=1){const h=u[c],g={...r[h],...l[h]};r[h]=g}return s},[]).reverse()},fN=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},pN=t=>({baseTag:dN(["href"],t),bodyAttributes:Ym("bodyAttributes",t),defer:ol(t,il.DEFER),encode:ol(t,il.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ym("htmlAttributes",t),linkTags:Ou("link",["rel","href"],t),metaTags:Ou("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Ou("noscript",["innerHTML"],t),onChangeClientState:cN(t),scriptTags:Ou("script",["src","innerHTML"],t),styleTags:Ou("style",["cssText"],t),title:uN(t),titleAttributes:Ym("titleAttributes",t),prioritizeSeoTags:fN(t,il.PRIORITIZE_SEO_TAGS)}),uS=t=>Array.isArray(t)?t.join(""):t,mN=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},Xm=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(mN(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},y_=(t,e)=>({...t,[e]:void 0}),gN=["noscript","script","style"],Lg=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),cS=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),yN=(t,e,n,r)=>{const s=cS(n),o=uS(e);return s?`<${t} ${Ar}="true" ${s}>${Lg(o,r)}</${t}>`:`<${t} ${Ar}="true">${Lg(o,r)}</${t}>`},vN=(t,e,n=!0)=>e.reduce((r,s)=>{const o=s,l=Object.keys(o).filter(h=>!(h==="innerHTML"||h==="cssText")).reduce((h,g)=>{const v=typeof o[g]>"u"?g:`${g}="${Lg(o[g],n)}"`;return h?`${h} ${v}`:v},""),u=o.innerHTML||o.cssText||"",c=gN.indexOf(t)===-1;return`${r}<${t} ${Ar}="true" ${l}${c?"/>":`>${u}</${t}>`}`},""),dS=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Y0[r];return n[s||r]=t[r],n},e),xN=(t,e,n)=>{const r={key:e,[Ar]:!0},s=dS(n,r);return[tt.createElement("title",s,e)]},Nh=(t,e)=>e.map((n,r)=>{const s={key:r,[Ar]:!0};return Object.keys(n).forEach(o=>{const u=Y0[o]||o;if(u==="innerHTML"||u==="cssText"){const c=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[u]=n[o]}),tt.createElement(t,s)}),or=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>xN(t,e.title,e.titleAttributes),toString:()=>yN(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>dS(e),toString:()=>cS(e)};default:return{toComponent:()=>Nh(t,e),toString:()=>vN(t,e,n)}}},wN=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=Xm(t,Jm.meta),o=Xm(e,Jm.link),l=Xm(n,Jm.script);return{priorityMethods:{toComponent:()=>[...Nh("meta",s.priority),...Nh("link",o.priority),...Nh("script",l.priority)],toString:()=>`${or("meta",s.priority,r)} ${or("link",o.priority,r)} ${or("script",l.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:l.default}},_N=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:l,title:u="",titleAttributes:c,prioritizeSeoTags:h}=t;let{linkTags:g,metaTags:v,scriptTags:x}=t,b={toComponent:()=>{},toString:()=>""};return h&&({priorityMethods:b,linkTags:g,metaTags:v,scriptTags:x}=wN(t)),{priority:b,base:or("base",e,r),bodyAttributes:or("bodyAttributes",n,r),htmlAttributes:or("htmlAttributes",s,r),link:or("link",g,r),meta:or("meta",v,r),noscript:or("noscript",o,r),script:or("script",x,r),style:or("style",l,r),title:or("title",{title:u,titleAttributes:c},r)}},Mg=_N,hh=[],hS=!!(typeof window<"u"&&window.document&&window.document.createElement),Vg=class{constructor(t,e){Ss(this,"instances",[]);Ss(this,"canUseDOM",hS);Ss(this,"context");Ss(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?hh:this.instances,add:t=>{(this.canUseDOM?hh:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?hh:this.instances).indexOf(t);(this.canUseDOM?hh:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=Mg({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},bN={},fS=tt.createContext(bN),Ro,pS=(Ro=class extends A.Component{constructor(n){super(n);Ss(this,"helmetData");this.helmetData=new Vg(this.props.context||{},Ro.canUseDOM)}render(){return tt.createElement(fS.Provider,{value:this.helmetData.value},this.props.children)}},Ss(Ro,"canUseDOM",hS),Ro),Ma=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Ar}]`),s=[].slice.call(r),o=[];let l;return e&&e.length&&e.forEach(u=>{const c=document.createElement(t);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h))if(h==="innerHTML")c.innerHTML=u.innerHTML;else if(h==="cssText")c.styleSheet?c.styleSheet.cssText=u.cssText:c.appendChild(document.createTextNode(u.cssText));else{const g=h,v=typeof u[g]>"u"?"":u[g];c.setAttribute(h,v)}c.setAttribute(Ar,"true"),s.some((h,g)=>(l=g,c.isEqualNode(h)))?s.splice(l,1):o.push(c)}),s.forEach(u=>{var c;return(c=u.parentNode)==null?void 0:c.removeChild(u)}),o.forEach(u=>n.appendChild(u)),{oldTags:s,newTags:o}},$g=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Ar),s=r?r.split(","):[],o=[...s],l=Object.keys(e);for(const u of l){const c=e[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),s.indexOf(u)===-1&&s.push(u);const h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(let u=o.length-1;u>=0;u-=1)n.removeAttribute(o[u]);s.length===o.length?n.removeAttribute(Ar):n.getAttribute(Ar)!==l.join(",")&&n.setAttribute(Ar,l.join(","))},EN=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=uS(t)),$g("title",e)},v_=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:l,noscriptTags:u,onChangeClientState:c,scriptTags:h,styleTags:g,title:v,titleAttributes:x}=t;$g("body",r),$g("html",s),EN(v,x);const b={baseTag:Ma("base",n),linkTags:Ma("link",o),metaTags:Ma("meta",l),noscriptTags:Ma("noscript",u),scriptTags:Ma("script",h),styleTags:Ma("style",g)},k={},D={};Object.keys(b).forEach(P=>{const{newTags:j,oldTags:V}=b[P];j.length&&(k[P]=j),V.length&&(D[P]=b[P].oldTags)}),e&&e(),c(t,k,D)},Lu=null,TN=t=>{Lu&&cancelAnimationFrame(Lu),t.defer?Lu=requestAnimationFrame(()=>{v_(t,()=>{Lu=null})}):(v_(t),Lu=null)},SN=TN,x_=class extends A.Component{constructor(){super(...arguments);Ss(this,"rendered",!1)}shouldComponentUpdate(e){return!aN(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=pN(e.get().map(o=>{const l={...o.props};return delete l.context,l}));pS.canUseDOM?SN(s):Mg&&(r=Mg(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},jg,kN=(jg=class extends A.Component{shouldComponentUpdate(t){return!nN(y_(this.props,"helmetData"),y_(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return p_(g_.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${g_.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),p_(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return tt.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,l=Object.keys(o).reduce((c,h)=>(c[lN[h]||h]=o[h],c),{});let{type:u}=r;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(r,s),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,l,s);break;default:e=this.mapObjectTypeChildren(r,e,l,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof Vg)){const s=r;r=new Vg(s.context,!0),delete n.helmetData}return r?tt.createElement(x_,{...n,context:r.value}):tt.createElement(fS.Consumer,null,s=>tt.createElement(x_,{...n,context:s}))}},Ss(jg,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),jg);function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gh.apply(null,arguments)}function X0(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Fg(t,e){return Fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Fg(t,e)}function Z0(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Fg(t,e)}function CN(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function PN(t,e){t.classList?t.classList.add(e):CN(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function w_(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function AN(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=w_(t.className,e):t.setAttribute("class",w_(t.className&&t.className.baseVal||"",e))}const __={disabled:!1},Qh=tt.createContext(null);var mS=function(e){return e.scrollTop},Uu="unmounted",_o="exited",bo="entering",Ka="entered",Ug="exiting",Vs=function(t){Z0(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=s,u=l&&!l.isMounting?r.enter:r.appear,c;return o.appearStatus=null,r.in?u?(c=_o,o.appearStatus=bo):c=Ka:r.unmountOnExit||r.mountOnEnter?c=Uu:c=_o,o.state={status:c},o.nextCallback=null,o}e.getDerivedStateFromProps=function(s,o){var l=s.in;return l&&o.status===Uu?{status:_o}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var o=null;if(s!==this.props){var l=this.state.status;this.props.in?l!==bo&&l!==Ka&&(o=bo):(l===bo||l===Ka)&&(o=Ug)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,o,l,u;return o=l=u=s,s!=null&&typeof s!="number"&&(o=s.exit,l=s.enter,u=s.appear!==void 0?s.appear:l),{exit:o,enter:l,appear:u}},n.updateStatus=function(s,o){if(s===void 0&&(s=!1),o!==null)if(this.cancelNextCallback(),o===bo){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:dh.findDOMNode(this);l&&mS(l)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===_o&&this.setState({status:Uu})},n.performEnter=function(s){var o=this,l=this.props.enter,u=this.context?this.context.isMounting:s,c=this.props.nodeRef?[u]:[dh.findDOMNode(this),u],h=c[0],g=c[1],v=this.getTimeouts(),x=u?v.appear:v.enter;if(!s&&!l||__.disabled){this.safeSetState({status:Ka},function(){o.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:bo},function(){o.props.onEntering(h,g),o.onTransitionEnd(x,function(){o.safeSetState({status:Ka},function(){o.props.onEntered(h,g)})})})},n.performExit=function(){var s=this,o=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:dh.findDOMNode(this);if(!o||__.disabled){this.safeSetState({status:_o},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Ug},function(){s.props.onExiting(u),s.onTransitionEnd(l.exit,function(){s.safeSetState({status:_o},function(){s.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,o){o=this.setNextCallback(o),this.setState(s,o)},n.setNextCallback=function(s){var o=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,o.nextCallback=null,s(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(s,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:dh.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=c[0],g=c[1];this.props.addEndListener(h,g)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Uu)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var u=X0(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return tt.createElement(Qh.Provider,{value:null},typeof l=="function"?l(s,u):tt.cloneElement(tt.Children.only(l),u))},e}(tt.Component);Vs.contextType=Qh;Vs.propTypes={};function Va(){}Vs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Va,onEntering:Va,onEntered:Va,onExit:Va,onExiting:Va,onExited:Va};Vs.UNMOUNTED=Uu;Vs.EXITED=_o;Vs.ENTERING=bo;Vs.ENTERED=Ka;Vs.EXITING=Ug;var IN=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return PN(e,r)})},Zm=function(e,n){return e&&n&&n.split(" ").forEach(function(r){return AN(e,r)})},Nf=function(t){Z0(e,t);function e(){for(var r,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return r=t.call.apply(t,[this].concat(o))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1];r.removeClasses(g,"exit"),r.addClass(g,v?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(u,c)},r.onEntering=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],x=v?"appear":"enter";r.addClass(g,x,"active"),r.props.onEntering&&r.props.onEntering(u,c)},r.onEntered=function(u,c){var h=r.resolveArguments(u,c),g=h[0],v=h[1],x=v?"appear":"enter";r.removeClasses(g,x),r.addClass(g,x,"done"),r.props.onEntered&&r.props.onEntered(u,c)},r.onExit=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"appear"),r.removeClasses(h,"enter"),r.addClass(h,"exit","base"),r.props.onExit&&r.props.onExit(u)},r.onExiting=function(u){var c=r.resolveArguments(u),h=c[0];r.addClass(h,"exit","active"),r.props.onExiting&&r.props.onExiting(u)},r.onExited=function(u){var c=r.resolveArguments(u),h=c[0];r.removeClasses(h,"exit"),r.addClass(h,"exit","done"),r.props.onExited&&r.props.onExited(u)},r.resolveArguments=function(u,c){return r.props.nodeRef?[r.props.nodeRef.current,u]:[u,c]},r.getClassNames=function(u){var c=r.props.classNames,h=typeof c=="string",g=h&&c?c+"-":"",v=h?""+g+u:c[u],x=h?v+"-active":c[u+"Active"],b=h?v+"-done":c[u+"Done"];return{baseClassName:v,activeClassName:x,doneClassName:b}},r}var n=e.prototype;return n.addClass=function(s,o,l){var u=this.getClassNames(o)[l+"ClassName"],c=this.getClassNames("enter"),h=c.doneClassName;o==="appear"&&l==="done"&&h&&(u+=" "+h),l==="active"&&s&&mS(s),u&&(this.appliedClasses[o][l]=u,IN(s,u))},n.removeClasses=function(s,o){var l=this.appliedClasses[o],u=l.base,c=l.active,h=l.done;this.appliedClasses[o]={},u&&Zm(s,u),c&&Zm(s,c),h&&Zm(s,h)},n.render=function(){var s=this.props;s.classNames;var o=X0(s,["classNames"]);return tt.createElement(Vs,Gh({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(tt.Component);Nf.defaultProps={classNames:""};Nf.propTypes={};function RN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ey(t,e){var n=function(o){return e&&A.isValidElement(o)?e(o):o},r=Object.create(null);return t&&A.Children.map(t,function(s){return s}).forEach(function(s){r[s.key]=n(s)}),r}function NN(t,e){t=t||{},e=e||{};function n(g){return g in e?e[g]:t[g]}var r=Object.create(null),s=[];for(var o in t)o in e?s.length&&(r[o]=s,s=[]):s.push(o);var l,u={};for(var c in e){if(r[c])for(l=0;l<r[c].length;l++){var h=r[c][l];u[r[c][l]]=n(h)}u[c]=n(c)}for(l=0;l<s.length;l++)u[s[l]]=n(s[l]);return u}function Co(t,e,n){return n[e]!=null?n[e]:t.props[e]}function jN(t,e){return ey(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Co(n,"appear",t),enter:Co(n,"enter",t),exit:Co(n,"exit",t)})})}function DN(t,e,n){var r=ey(t.children),s=NN(e,r);return Object.keys(s).forEach(function(o){var l=s[o];if(A.isValidElement(l)){var u=o in e,c=o in r,h=e[o],g=A.isValidElement(h)&&!h.props.in;c&&(!u||g)?s[o]=A.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Co(l,"exit",t),enter:Co(l,"enter",t)}):!c&&u&&!g?s[o]=A.cloneElement(l,{in:!1}):c&&u&&A.isValidElement(h)&&(s[o]=A.cloneElement(l,{onExited:n.bind(null,l),in:h.props.in,exit:Co(l,"exit",t),enter:Co(l,"enter",t)}))}}),s}var ON=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},LN={component:"div",childFactory:function(e){return e}},jf=function(t){Z0(e,t);function e(r,s){var o;o=t.call(this,r,s)||this;var l=o.handleExited.bind(RN(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,o){var l=o.children,u=o.handleExited,c=o.firstRender;return{children:c?jN(s,u):DN(s,l,u),firstRender:!1}},n.handleExited=function(s,o){var l=ey(this.props.children);s.key in l||(s.props.onExited&&s.props.onExited(o),this.mounted&&this.setState(function(u){var c=Gh({},u.children);return delete c[s.key],{children:c}}))},n.render=function(){var s=this.props,o=s.component,l=s.childFactory,u=X0(s,["component","childFactory"]),c=this.state.contextValue,h=ON(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?tt.createElement(Qh.Provider,{value:c},h):tt.createElement(Qh.Provider,{value:c},tt.createElement(o,u,h))},e}(tt.Component);jf.propTypes={};jf.defaultProps=LN;const MN="modulepreload",VN=function(t){return"/aussie-gut-pack/"+t},b_={},pl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=VN(c),c in b_)return;b_[c]=!0;const h=c.endsWith(".css"),g=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":MN,h||(v.as="script"),v.crossOrigin="",v.href=c,u&&v.setAttribute("nonce",u),document.head.appendChild(v),h)return new Promise((x,b)=>{v.addEventListener("load",x),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},$N=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Al);return{default:r}},[]).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ty extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class FN extends ty{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class UN extends ty{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class BN extends ty{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bg||(Bg={}));var zN=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class WN{constructor(e,{headers:n={},customFetch:r,region:s=Bg.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=$N(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return zN(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=n;let u={},{region:c}=n;c||(c=this.region),c&&c!=="any"&&(u["x-region"]=c);let h;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)));const g=yield this.fetch(`${this.url}/${e}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),s),body:h}).catch(k=>{throw new FN(k)}),v=g.headers.get("x-relay-error");if(v&&v==="true")throw new UN(g);if(!g.ok)throw new BN(g);let x=((r=g.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),b;return x==="application/json"?b=yield g.json():x==="application/octet-stream"?b=yield g.blob():x==="text/event-stream"?b=g:x==="multipart/form-data"?b=yield g.formData():b=yield g.text(),{data:b,error:null}}catch(s){return{data:null,error:s}}})}}var Wt={},$a={},Fa={},Ua={},Ba={},za={},HN=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ml=HN();const qN=ml.fetch,gS=ml.fetch.bind(ml),yS=ml.Headers,KN=ml.Request,GN=ml.Response,Al=Object.freeze(Object.defineProperty({__proto__:null,Headers:yS,Request:KN,Response:GN,default:gS,fetch:qN},Symbol.toStringTag,{value:"Module"})),QN=yI(Al);var fh={},E_;function vS(){if(E_)return fh;E_=1,Object.defineProperty(fh,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return fh.default=t,fh}var T_;function xS(){if(T_)return za;T_=1;var t=za&&za.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(za,"__esModule",{value:!0});const e=t(QN),n=t(vS());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=Object.assign({},this.headers),this.headers[o]=l,this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const u=this.fetch;let c=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var g,v,x;let b=null,k=null,D=null,P=h.status,j=h.statusText;if(h.ok){if(this.method!=="HEAD"){const H=await h.text();H===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=H:k=JSON.parse(H))}const $=(g=this.headers.Prefer)===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),z=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");$&&z&&z.length>1&&(D=parseInt(z[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,D=null,P=406,j="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const $=await h.text();try{b=JSON.parse($),Array.isArray(b)&&h.status===404&&(k=[],b=null,P=200,j="OK")}catch{h.status===404&&$===""?(P=204,j="No Content"):b={message:$}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,P=200,j="OK"),b&&this.shouldThrowOnError)throw new n.default(b)}return{error:b,data:k,count:D,status:P,statusText:j}});return this.shouldThrowOnError||(c=c.catch(h=>{var g,v,x;return{error:{message:`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,details:`${(v=h==null?void 0:h.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(x=h==null?void 0:h.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),c.then(o,l)}returns(){return this}overrideTypes(){return this}}return za.default=r,za}var S_;function wS(){if(S_)return Ba;S_=1;var t=Ba&&Ba.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ba,"__esModule",{value:!0});const e=t(xS());class n extends e.default{select(s){let o=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join("");return this.url.searchParams.set("select",l),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:o=!0,nullsFirst:l,foreignTable:u,referencedTable:c=u}={}){const h=c?`${c}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${s}.${o?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,o,{foreignTable:l,referencedTable:u=l}={}){const c=typeof u>"u"?"offset":`${u}.offset`,h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(h,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:o=!1,settings:l=!1,buffers:u=!1,wal:c=!1,format:h="text"}={}){var g;const v=[s?"analyze":null,o?"verbose":null,l?"settings":null,u?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${v};`,h==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ba.default=n,Ba}var k_;function ny(){if(k_)return Ua;k_=1;var t=Ua&&Ua.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ua,"__esModule",{value:!0});const e=t(wS());class n extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}in(s,o){const l=Array.from(new Set(o)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:l,type:u}={}){let c="";u==="plain"?c="pl":u==="phrase"?c="ph":u==="websearch"&&(c="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(s,o,l){return this.url.searchParams.append(s,`not.${o}.${l}`),this}or(s,{foreignTable:o,referencedTable:l=o}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,o,l){return this.url.searchParams.append(s,`${o}.${l}`),this}}return Ua.default=n,Ua}var C_;function _S(){if(C_)return Fa;C_=1;var t=Fa&&Fa.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fa,"__esModule",{value:!0});const e=t(ny());class n{constructor(s,{headers:o={},schema:l,fetch:u}){this.url=s,this.headers=o,this.schema=l,this.fetch=u}select(s,{head:o=!1,count:l}={}){const u=o?"HEAD":"GET";let c=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join("");return this.url.searchParams.set("select",h),l&&(this.headers.Prefer=`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:o,defaultToNull:l=!0}={}){const u="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:o,ignoreDuplicates:l=!1,count:u,defaultToNull:c=!0}={}){const h="POST",g=[`resolution=${l?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),c||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(s)){const v=s.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(v.length>0){const x=[...new Set(v)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:o}={}){const l="PATCH",u=[];return this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),this.headers.Prefer=u.join(","),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const o="DELETE",l=[];return s&&l.push(`count=${s}`),this.headers.Prefer&&l.unshift(this.headers.Prefer),this.headers.Prefer=l.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Fa.default=n,Fa}var Mu={},Vu={},P_;function JN(){return P_||(P_=1,Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.version=void 0,Vu.version="0.0.0-automated"),Vu}var A_;function YN(){if(A_)return Mu;A_=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.DEFAULT_HEADERS=void 0;const t=JN();return Mu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},Mu}var I_;function XN(){if(I_)return $a;I_=1;var t=$a&&$a.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty($a,"__esModule",{value:!0});const e=t(_S()),n=t(ny()),r=YN();class s{constructor(l,{headers:u={},schema:c,fetch:h}={}){this.url=l,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),u),this.schemaName=c,this.fetch=h}from(l){const u=new URL(`${this.url}/${l}`);return new e.default(u,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,u={},{head:c=!1,get:h=!1,count:g}={}){let v;const x=new URL(`${this.url}/rpc/${l}`);let b;c||h?(v=c?"HEAD":"GET",Object.entries(u).filter(([D,P])=>P!==void 0).map(([D,P])=>[D,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([D,P])=>{x.searchParams.append(D,P)})):(v="POST",b=u);const k=Object.assign({},this.headers);return g&&(k.Prefer=`count=${g}`),new n.default({method:v,url:x,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return $a.default=s,$a}var R_;function ZN(){if(R_)return Wt;R_=1;var t=Wt&&Wt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.PostgrestError=Wt.PostgrestBuilder=Wt.PostgrestTransformBuilder=Wt.PostgrestFilterBuilder=Wt.PostgrestQueryBuilder=Wt.PostgrestClient=void 0;const e=t(XN());Wt.PostgrestClient=e.default;const n=t(_S());Wt.PostgrestQueryBuilder=n.default;const r=t(ny());Wt.PostgrestFilterBuilder=r.default;const s=t(wS());Wt.PostgrestTransformBuilder=s.default;const o=t(xS());Wt.PostgrestBuilder=o.default;const l=t(vS());return Wt.PostgrestError=l.default,Wt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:l.default},Wt}var e2=ZN();const t2=Fo(e2),{PostgrestClient:n2,PostgrestQueryBuilder:rB,PostgrestFilterBuilder:sB,PostgrestTransformBuilder:iB,PostgrestBuilder:oB,PostgrestError:aB}=t2,r2="2.11.2",s2={"X-Client-Info":`realtime-js/${r2}`},i2="1.0.0",bS=1e4,o2=1e3;var al;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(al||(al={}));var zn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(zn||(zn={}));var Pr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Pr||(Pr={}));var zg;(function(t){t.websocket="websocket"})(zg||(zg={}));var ko;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ko||(ko={}));class a2{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+s));l=l+s;const c=r.decode(e.slice(l,l+o));l=l+o;const h=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:c,payload:h}}}class ES{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(st||(st={}));const N_=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((o,l)=>(o[l]=l2(l,t,e,s),o),{})},l2=(t,e,n,r)=>{const s=e.find(u=>u.name===t),o=s==null?void 0:s.type,l=n[t];return o&&!r.includes(o)?TS(o,l):Wg(l)},TS=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return h2(e,n)}switch(t){case st.bool:return u2(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return c2(e);case st.json:case st.jsonb:return d2(e);case st.timestamp:return f2(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Wg(e);default:return Wg(e)}},Wg=t=>t,u2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},c2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},d2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},h2=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const l=t.slice(1,n);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(u=>TS(e,u))}return t},f2=t=>typeof t=="string"?t.replace(" ","T"):t,SS=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class eg{constructor(e,n,r={},s=bS){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var j_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(j_||(j_={}));class Yu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(c=>{this.state=Yu.syncDiff(this.state,c,o,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Yu.syncDiff(this.state,s,o,l),u())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),l=this.transformState(n),u={},c={};return this.map(o,(h,g)=>{l[h]||(c[h]=g)}),this.map(l,(h,g)=>{const v=o[h];if(v){const x=g.map(P=>P.presence_ref),b=v.map(P=>P.presence_ref),k=g.filter(P=>b.indexOf(P.presence_ref)<0),D=v.filter(P=>x.indexOf(P.presence_ref)<0);k.length>0&&(u[h]=k),D.length>0&&(c[h]=D)}else u[h]=g}),this.syncDiff(o,{joins:u,leaves:c},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(u,c)=>{var h;const g=(h=e[u])!==null&&h!==void 0?h:[];if(e[u]=this.cloneDeep(c),g.length>0){const v=e[u].map(b=>b.presence_ref),x=g.filter(b=>v.indexOf(b.presence_ref)<0);e[u].unshift(...x)}r(u,g,c)}),this.map(l,(u,c)=>{let h=e[u];if(!h)return;const g=c.map(v=>v.presence_ref);h=h.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=h,s(u,h,c),h.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var D_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(D_||(D_={}));var O_;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(O_||(O_={}));var ks;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ks||(ks={}));class ry{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new eg(this,Pr.join,this.params,this.timeout),this.rejoinTimer=new ES(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new Yu(this),this.broadcastEndpointURL=SS(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:l,private:u}}=this.params;this._onError(g=>e==null?void 0:e(ks.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(ks.CLOSED));const c={},h={broadcast:o,presence:l,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&s!==void 0?s:[],private:u};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(ks.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,b=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,k=[];for(let D=0;D<b;D++){const P=x[D],{filter:{event:j,schema:V,table:$,filter:z}}=P,H=g&&g[D];if(H&&H.event===j&&H.schema===V&&H.table===$&&H.filter===z)k.push(Object.assign(Object.assign({},P),{id:H.id}));else{this.unsubscribe(),e==null||e(ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(ks.SUBSCRIBED);return}}).receive("error",g=>{e==null||e(ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=h.body)===null||s===void 0?void 0:s.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,u,c;const h=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),h.receive("ok",()=>o("ok")),h.receive("error",()=>o("error")),h.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new eg(this,Pr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new eg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const l=e.toLocaleLowerCase(),{close:u,error:c,leave:h,join:g}=Pr;if(r&&[u,c,h,g].indexOf(l)>=0&&r!==this._joinRef())return;let x=this._onMessage(l,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(b=>{var k,D,P;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(D=b.filter)===null||D===void 0?void 0:D.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===l}).map(b=>b.callback(x,r)):(o=this.bindings[l])===null||o===void 0||o.filter(b=>{var k,D,P,j,V,$;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const z=b.id,H=(k=b.filter)===null||k===void 0?void 0:k.event;return z&&((D=n.ids)===null||D===void 0?void 0:D.includes(z))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const z=(V=(j=b==null?void 0:b.filter)===null||j===void 0?void 0:j.event)===null||V===void 0?void 0:V.toLocaleLowerCase();return z==="*"||z===(($=n==null?void 0:n.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:D,table:P,commit_timestamp:j,type:V,errors:$}=k;x=Object.assign(Object.assign({},{schema:D,table:P,commit_timestamp:j,eventType:V,new:{},old:{},errors:$}),this._getPayloadRecords(k))}b.callback(x,r)})}_isClosed(){return this.state===zn.closed}_isJoined(){return this.state===zn.joined}_isJoining(){return this.state===zn.joining}_isLeaving(){return this.state===zn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ry.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Pr.close,{},e)}_onError(e){this._on(Pr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=N_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=N_(e.columns,e.old_record)),n}}const p2=()=>{},m2=typeof WebSocket<"u",g2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class y2{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=s2,this.params={},this.timeout=bS,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=p2,this.conn=null,this.sendBuffer=[],this.serializer=new a2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let l;return o?l=o:typeof fetch>"u"?l=(...u)=>pl(async()=>{const{default:c}=await Promise.resolve().then(()=>Al);return{default:c}},void 0).then(({default:c})=>c(...u)):l=fetch,(...u)=>l(...u)},this.endPoint=`${e}/${zg.websocket}`,this.httpEndpoint=SS(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,l)=>l(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ES(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(m2){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new v2(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),pl(async()=>{const{default:e}=await import("./browser-C0PgUlBp.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:i2}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case al.connecting:return ko.Connecting;case al.open:return ko.Open;case al.closing:return ko.Closing;default:return ko.Closed}}isConnected(){return this.connectionState()===ko.Open}channel(e,n={config:{}}){const r=new ry(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,u=>{var c;(c=this.conn)===null||c===void 0||c.send(u)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(Pr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(o2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:o,ref:l}=n;l&&l===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${s} ${l&&"("+l+")"||""}`,o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,o,l)),this.stateChangeCallbacks.message.forEach(u=>u(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Pr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([g2],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class v2{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=al.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let sy=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ht(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class x2 extends sy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hg extends sy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var w2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const kS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Al);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},_2=()=>w2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pl(()=>Promise.resolve().then(()=>Al),void 0)).Response:Response}),qg=t=>{if(Array.isArray(t))return t.map(n=>qg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=qg(r)}),e};var Uo=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const tg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b2=(t,e,n)=>Uo(void 0,void 0,void 0,function*(){const r=yield _2();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new x2(tg(s),t.status||500))}).catch(s=>{e(new Hg(tg(s),s))}):e(new Hg(tg(t),t))}),E2=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Dc(t,e,n,r,s,o){return Uo(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,E2(e,r,s,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>b2(c,u,r))})})}function Jh(t,e,n,r){return Uo(this,void 0,void 0,function*(){return Dc(t,"GET",e,n,r)})}function mi(t,e,n,r,s){return Uo(this,void 0,void 0,function*(){return Dc(t,"POST",e,r,s,n)})}function T2(t,e,n,r,s){return Uo(this,void 0,void 0,function*(){return Dc(t,"PUT",e,r,s,n)})}function S2(t,e,n,r){return Uo(this,void 0,void 0,function*(){return Dc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function CS(t,e,n,r,s){return Uo(this,void 0,void 0,function*(){return Dc(t,"DELETE",e,r,s,n)})}var An=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const k2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},L_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C2{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=kS(s)}uploadOrUpdate(e,n,r,s){return An(this,void 0,void 0,function*(){try{let o;const l=Object.assign(Object.assign({},L_),s);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",l.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,c&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const h=this._removeEmptyFolders(n),g=this._getFinalPath(h),v=yield this.fetch(`${this.url}/object/${g}`,Object.assign({method:e,body:o,headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{})),x=yield v.json();return v.ok?{data:{path:h,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(o){if(Ht(o))return{data:null,error:o};throw o}})}upload(e,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return An(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),l=this._getFinalPath(o),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let c;const h=Object.assign({upsert:L_.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",h.cacheControl)):(c=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType);const v=yield this.fetch(u.toString(),{method:"PUT",body:c,headers:g}),x=yield v.json();return v.ok?{data:{path:o,fullPath:x.Key},error:null}:{data:null,error:x}}catch(c){if(Ht(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield mi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(this.url+o.url),u=l.searchParams.get("token");if(!u)throw new sy("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}update(e,n,r){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return An(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}copy(e,n,r){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield mi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return An(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield mi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${l}`)},{data:o,error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return An(this,void 0,void 0,function*(){try{const s=yield mi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${o}`):null})),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}download(e,n){return An(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),l=o?`?${o}`:"";try{const u=this._getFinalPath(e);return{data:yield(yield Jh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(u){if(Ht(u))return{data:null,error:u};throw u}})}info(e){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Jh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:qg(r),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}exists(e){return An(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield S2(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ht(r)&&r instanceof Hg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&s.push(c);let h=s.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${h}`)}}}remove(e){return An(this,void 0,void 0,function*(){try{return{data:yield CS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ht(n))return{data:null,error:n};throw n}})}list(e,n,r){return An(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},k2),n),{prefix:e||""});return{data:yield mi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ht(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const P2="2.7.1",A2={"X-Client-Info":`storage-js/${P2}`};var Wa=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class I2{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},A2),n),this.fetch=kS(r)}listBuckets(){return Wa(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ht(e))return{data:null,error:e};throw e}})}getBucket(e){return Wa(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ht(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Wa(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Wa(this,void 0,void 0,function*(){try{return{data:yield T2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ht(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Wa(this,void 0,void 0,function*(){try{return{data:yield mi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ht(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Wa(this,void 0,void 0,function*(){try{return{data:yield CS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ht(n))return{data:null,error:n};throw n}})}}class R2 extends I2{constructor(e,n={},r){super(e,n,r)}from(e){return new C2(this.url,this.headers,e,this.fetch)}}const N2="2.49.4";let Bu="";typeof Deno<"u"?Bu="deno":typeof document<"u"?Bu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bu="react-native":Bu="node";const j2={"X-Client-Info":`supabase-js-${Bu}/${N2}`},D2={headers:j2},O2={schema:"public"},L2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M2={};var V2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};const $2=t=>{let e;return t?e=t:typeof fetch>"u"?e=gS:e=fetch,(...n)=>e(...n)},F2=()=>typeof Headers>"u"?yS:Headers,U2=(t,e,n)=>{const r=$2(n),s=F2();return(o,l)=>V2(void 0,void 0,void 0,function*(){var u;const c=(u=yield e())!==null&&u!==void 0?u:t;let h=new s(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",t),h.has("Authorization")||h.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},l),{headers:h}))})};var B2=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};function z2(t){return t.replace(/\/$/,"")}function W2(t,e){const{db:n,auth:r,realtime:s,global:o}=t,{db:l,auth:u,realtime:c,global:h}=e,g={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},h),o),accessToken:()=>B2(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const PS="2.69.1",Ga=30*1e3,Kg=3,ng=Kg*Ga,H2="http://localhost:9999",q2="supabase.auth.token",K2={"X-Client-Info":`gotrue-js/${PS}`},Gg="X-Supabase-Api-Version",AS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q2=6e5;class iy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function $e(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class J2 extends iy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Y2(t){return $e(t)&&t.name==="AuthApiError"}class IS extends iy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class $i extends iy{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class hi extends $i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function X2(t){return $e(t)&&t.name==="AuthSessionMissingError"}class rg extends $i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ph extends $i{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class mh extends $i{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Z2(t){return $e(t)&&t.name==="AuthImplicitGrantRedirectError"}class M_ extends $i{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qg extends $i{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function sg(t){return $e(t)&&t.name==="AuthRetryableFetchError"}class V_ extends $i{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Xu extends $i{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),F_=` 	
\r=`.split(""),ej=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<F_.length;e+=1)t[F_[e].charCodeAt(0)]=-2;for(let e=0;e<$_.length;e+=1)t[$_[e].charCodeAt(0)]=e;return t})();function RS(t,e,n){const r=ej[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function U_(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{rj(l,r,n)};for(let l=0;l<t.length;l+=1)RS(t.charCodeAt(l),s,o);return e.join("")}function tj(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nj(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}tj(r,e)}}function rj(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function sj(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)RS(t.charCodeAt(s),n,r);return new Uint8Array(e)}function ij(t){const e=[];return nj(t,n=>e.push(n)),new Uint8Array(e)}function oj(t){return Math.round(Date.now()/1e3)+t}function aj(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const qr=()=>typeof window<"u"&&typeof document<"u",xo={tested:!1,writable:!1},Zu=()=>{if(!qr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xo.tested)return xo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xo.tested=!0,xo.writable=!0}catch{xo.tested=!0,xo.writable=!1}return xo.writable};function lj(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const NS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>pl(async()=>{const{default:r}=await Promise.resolve().then(()=>Al);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uj=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jS=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},gh=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},yh=async(t,e)=>{await t.removeItem(e)};let DS=class OS{constructor(){this.promise=new OS.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};DS.promiseConstructor=Promise;function ig(t){const e=t.split(".");if(e.length!==3)throw new Xu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!G2.test(e[r]))throw new Xu("JWT not in base64url format");return{header:JSON.parse(U_(e[0])),payload:JSON.parse(U_(e[1])),signature:sj(e[2]),raw:{header:e[0],payload:e[1]}}}async function cj(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dj(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await t(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function hj(t){return("0"+t.toString(16)).substr(-2)}function fj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,hj).join("")}async function pj(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function mj(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await pj(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ha(t,e,n=!1){const r=fj();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await jS(t,`${e}-code-verifier`,s);const o=await mj(r);return[o,r===o?"plain":"s256"]}const gj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yj(t){const e=t.headers.get(Gg);if(!e||!e.match(gj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vj(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function xj(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var wj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Eo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_j=[502,503,504];async function B_(t){var e;if(!uj(t))throw new Qg(Eo(t),0);if(_j.includes(t.status))throw new Qg(Eo(t),t.status);let n;try{n=await t.json()}catch(o){throw new IS(Eo(o),o)}let r;const s=yj(t);if(s&&s.getTime()>=AS["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new V_(Eo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new hi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new V_(Eo(n),t.status,n.weak_password.reasons);throw new J2(Eo(n),t.status||500,r)}const bj=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Be(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Gg]||(o[Gg]=AS["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Ej(t,e,n+u,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function Ej(t,e,n,r,s,o){const l=bj(e,r,s,o);let u;try{u=await t(n,Object.assign({},l))}catch(c){throw console.error(c),new Qg(Eo(c),0)}if(u.ok||await B_(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(c){await B_(c)}}function fi(t){var e;let n=null;Cj(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=oj(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function z_(t){const e=fi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tj(t){return{data:t,error:null}}function Sj(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,l=wj(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},c=Object.assign({},l);return{data:{properties:u,user:c},error:null}}function kj(t){return t}function Cj(t){return t.access_token&&t.refresh_token&&t.expires_in}var Pj=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class Aj{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=NS(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:gi})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Pj(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Sj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,l,u,c;try{const h={nextPage:null,lastPage:0,total:0},g=await Be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:kj});if(g.error)throw g.error;const v=await g.json(),x=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(c=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&c!==void 0?c:[];return b.length>0&&(b.forEach(k=>{const D=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);h[`${P}Page`]=D}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},v),h),error:null}}catch(h){if($e(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await Be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gi})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:gi})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:gi})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}}const Ij={getItem:t=>Zu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Zu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Zu()&&globalThis.localStorage.removeItem(t)}};function W_(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function Rj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qa={debug:!!(globalThis&&Zu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nj extends LS{}async function jj(t,e,n){qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),qa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw qa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Nj(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qa.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Rj();const Dj={url:H2,storageKey:q2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function H_(t,e,n){return await n()}class dc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=dc.nextInstanceID,dc.nextInstanceID+=1,this.instanceID>0&&qr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Dj),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Aj({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=NS(s.fetch),this.lock=s.lock||H_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=jj:this.lock=H_,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Zu()?this.storage=Ij:(this.memoryStorage={},this.storage=W_(this.memoryStorage)):(this.memoryStorage={},this.storage=W_(this.memoryStorage)),qr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${PS}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=lj(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),qr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Z2(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?{error:n}:{error:new IS("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:fi}),{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:g,password:v,options:x}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await Ha(this.storage,this.storageKey)),o=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:g,password:v,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:k},xform:fi})}else if("phone"in e){const{phone:g,password:v,options:x}=e;o=await Be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:fi})}else throw new ph("You must provide either an email or phone number and a password");const{data:l,error:u}=o;if(u||!l)return{data:{user:null,session:null},error:u};const c=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:l,options:u}=e;n=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:z_})}else if("phone"in e){const{phone:o,password:l,options:u}=e;n=await Be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:z_})}else throw new ph("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new rg}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await gh(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:l}=await Be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fi});if(await yh(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new rg}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if($e(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:l}=e,u=await Be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:fi}),{data:c,error:h}=u;return h?{data:{user:null,session:null},error:h}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new rg}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:h})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,o,l;try{if("email"in e){const{email:u,options:c}=e;let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Ha(this.storage,this.storageKey));const{error:v}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:h,code_challenge_method:g},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:c}=e,{data:h,error:g}=await Be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new ph("You must provide either an email or phone number.")}catch(u){if($e(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:fi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,h=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:h,session:c},error:null}}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,l=null;return this.flowType==="pkce"&&([o,l]=await Ha(this.storage,this.storageKey)),await Be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:Tj})}catch(o){if($e(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new hi;const{error:s}=await Be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if($e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Be(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:u}=await Be(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ph("You must provide either an email or phone number and a type")}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await gh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ng:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,h,g)=>(!l&&h==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,h,g))})}return{data:{session:e},error:null}}const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gi}):await this._useSession(async n=>{var r,s,o;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new hi}:await Be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:gi})})}catch(n){if($e(n))return X2(n)&&(await this._removeSession(),await yh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new hi;const l=s.session;let u=null,c=null;this.flowType==="pkce"&&e.email!=null&&([u,c]=await Ha(this.storage,this.storageKey));const{data:h,error:g}=await Be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:c}),jwt:l.access_token,xform:gi});if(g)throw g;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if($e(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new hi;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:l}=ig(e.access_token);if(l.exp&&(r=l.exp,s=r<=n),s){const{session:u,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if($e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new hi;const{session:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if($e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!qr())throw new mh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new mh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new M_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new mh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new M_("No code detected.");const{data:V,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const z=new URL(window.location.href);return z.searchParams.delete("code"),window.history.replaceState(window.history.state,"",z.toString()),{data:{session:V.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:u,expires_at:c,token_type:h}=e;if(!o||!u||!l||!h)throw new mh("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let x=g+v;c&&(x=parseInt(c));const b=x-g;b*1e3<=Ga&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${v}s`);const k=x-v;g-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,g):g-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,g);const{data:D,error:P}=await this._getUser(o);if(P)throw P;const j={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:v,expires_at:x,refresh_token:l,token_type:h,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:e.type},error:null}}catch(r){if($e(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await gh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{error:o};const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(Y2(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await yh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=aj(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ha(this.storage,this.storageKey,!0));try{return await Be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if($e(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var l,u,c,h,g;const{data:v,error:x}=o;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Be(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(h=v.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return qr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if($e(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)throw l;return await Be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await dj(async s=>(s>0&&await cj(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fi})),(s,o)=>{const l=200*Math.pow(2,s);return o&&sg(o)&&Date.now()+l-r<Ga})}catch(r){if(this._debug(n,"error",r),$e(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),qr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await gh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<ng;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${ng}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),sg(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new DS;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new hi;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={session:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(s,"error",o),$e(o)){const l={session:null,error:o};return sg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(l),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await jS(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await yh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ga);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ga);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ga}ms, refresh threshold is ${Kg} ticks`),s<=Kg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await Ha(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:h}=await Be(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return{data:null,error:o};const{data:l,error:u}=await Be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?{data:null,error:o}:await Be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if($e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(l=>l.factor_type==="totp"&&l.status==="verified"),o=r.filter(l=>l.factor_type==="phone"&&l.status==="verified");return{data:{all:r,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=ig(s.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r||(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+Q2>Date.now()))return r;const{data:s,error:o}=await Be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new Xu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(l=>l.kid===e),!r)throw new Xu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};r=b.session.access_token}const{header:s,payload:o,signature:l,raw:{header:u,payload:c}}=ig(r);if(vj(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:s,signature:l},error:null}}const h=xj(s.alg),g=await this.fetchJwk(s.kid,n),v=await crypto.subtle.importKey("jwk",g,h,!0,["verify"]);if(!await crypto.subtle.verify(h,v,l,ij(`${u}.${c}`)))throw new Xu("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if($e(r))return{data:null,error:r};throw r}}}dc.nextInstanceID=0;const Oj=dc;class Lj extends Oj{constructor(e){super(e)}}var Mj=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function u(g){try{h(r.next(g))}catch(v){l(v)}}function c(g){try{h(r.throw(g))}catch(v){l(v)}}function h(g){g.done?o(g.value):s(g.value).then(u,c)}h((r=r.apply(t,e||[])).next())})};class Vj{constructor(e,n,r){var s,o,l;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const u=z2(e);this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`,this.functionsUrl=`${u}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,h={db:O2,realtime:M2,auth:Object.assign(Object.assign({},L2),{storageKey:c}),global:D2},g=W2(r??{},h);this.storageKey=(s=g.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=U2(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new n2(`${u}/rest/v1`,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),g.accessToken||this._listenForAuthEvents()}get functions(){return new WN(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new R2(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Mj(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:o,flowType:l,lock:u,debug:c},h,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Lj({url:this.authUrl,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:l,lock:u,debug:c,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new y2(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $j=(t,e,n)=>new Vj(t,e,n),MS="https://lcmsizhwcacufywlrfpr.supabase.co",VS="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxjbXNpemh3Y2FjdWZ5d2xyZnByIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQxOTg3ODAsImV4cCI6MjA1OTc3NDc4MH0.aOJLWA1vCEBHPlMUDbcB_2EsxJgdpoiT51RMFeiO5gg";console.log("Supabase URL:",MS);console.log("Supabase Anon Key:",VS);const Rn=$j(MS,VS),$s=A.createContext(),Fj=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0);A.useEffect(()=>{(async()=>{const{data:{session:x}}=await Rn.auth.getSession();n((x==null?void 0:x.user)??null),s(!1)})();const{data:{subscription:v}}=Rn.auth.onAuthStateChange((x,b)=>{n((b==null?void 0:b.user)??null),s(!1)});return()=>{v==null||v.unsubscribe()}},[]);const h={user:e,loading:r,signup:async(g,v)=>{console.log("Signup attempt with:",{email:g,password:v});const{data:x,error:b}=await Rn.auth.signUp({email:g,password:v,options:{emailRedirectTo:"http://localhost:5173/login"}});if(console.log("Signup response:",JSON.stringify(x,null,2)),b)throw console.error("Signup error:",b.message),b;if(x.user&&x.user.identities&&x.user.identities.length===0){console.log("User already exists. Attempting to resend confirmation email...");const k=await Rn.auth.resend({type:"signup",email:g});throw console.log("Resend response:",JSON.stringify(k,null,2)),k.error?(console.error("Error resending confirmation email:",k.error.message),k.error):new Error("User already exists. A confirmation email has been resent.")}return x},login:async(g,v)=>{console.log("Login attempt with:",{email:g,password:v});const{data:x,error:b}=await Rn.auth.signInWithPassword({email:g,password:v});if(b)throw console.error("Login error:",b.message),b.message.includes("Email not confirmed")?new Error("Please confirm your email before logging in."):b;return n(x.user),x},logout:async()=>{const{error:g}=await Rn.auth.signOut();if(g)throw console.error("Logout error:",g.message),g;n(null)},refreshUser:async()=>{const{data:{user:g}}=await Rn.auth.getUser();n(g)}};return p.jsx($s.Provider,{value:h,children:t})},Uj=({location:t})=>{var D;const[e,n]=A.useState(!1),{isDarkMode:r,toggleTheme:s}=A.useContext(Ze),{user:o,logout:l,loading:u}=A.useContext($s),c=rn(),h=A.useRef(null),g=A.useRef(null);console.log("Rendering Navigation component. isMenuOpen:",e);const v=async()=>{try{await l(),c("/login")}catch(P){console.error("Logout error:",P.message)}},x=()=>{var P;e?(n(!1),(P=h.current)==null||P.focus()):(n(!0),setTimeout(()=>{var j;return(j=g.current)==null?void 0:j.focus()},100))};A.useEffect(()=>{const P=j=>{var V;j.key==="Escape"&&e&&(n(!1),(V=h.current)==null||V.focus())};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[e]);const b=P=>t.pathname===P,k=((D=o==null?void 0:o.user_metadata)==null?void 0:D.displayName)||"User";return p.jsxs(p.Fragment,{children:[p.jsx("a",{href:"#main-content",className:"fixed top-0 left-0 p-2 bg-red-600 text-white focus:top-4 focus:left-4 z-50 transition-all duration-200",children:"Skip to Content"}),p.jsxs("nav",{className:`sticky top-0 z-50 shadow-md ${r?"bg-stone-900 text-red-400":"bg-white text-red-800"} transition-colors duration-300`,"aria-label":"Main navigation",children:[p.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center relative z-50",children:[p.jsx(it,{to:"/",className:"text-2xl font-bold tracking-tight",children:"Aussie Gut Pack"}),p.jsxs("div",{className:"hidden lg:flex space-x-6 items-center",children:[p.jsx(it,{to:"/",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""}`,children:"Home"}),p.jsx(it,{to:"/products",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""}`,children:"Products"}),p.jsx(it,{to:"/blog",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""}`,children:"Blog"}),p.jsx(it,{to:"/contact",className:`nav-link hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""}`,children:"Contact"}),u?p.jsx("span",{children:"Loading..."}):o?p.jsxs(p.Fragment,{children:[p.jsxs(it,{to:"/profile",className:`nav-link text-sm hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 rounded transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""}`,children:["Welcome, ",k]}),p.jsx("button",{onClick:v,className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Logout"})]}):p.jsx(it,{to:"/login",className:"p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200",children:"Login"}),p.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200","aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?"":""})]}),p.jsx("button",{ref:h,onClick:x,"aria-expanded":e,"aria-label":e?"Close menu":"Open menu",className:"lg:hidden p-2 rounded-lg hover:bg-stone-200 dark:hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 text-xl z-60",children:p.jsx("i",{className:e?"fas fa-times":"fas fa-bars"})})]}),e&&p.jsx("div",{className:"mobile-menu-backdrop active lg:hidden",onClick:x,tabIndex:0,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&x()},"aria-label":"Close mobile menu"}),p.jsxs("div",{className:`lg:hidden px-4 py-4 ${e?"mobile-menu-open":"mobile-menu-closed"} ${r?"bg-stone-800 border-t border-stone-700":"bg-red-50 border-t border-red-200"} shadow-md`,children:[p.jsx(it,{ref:g,to:"/",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Home"}),p.jsx(it,{to:"/products",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/products")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Products"}),p.jsx(it,{to:"/blog",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/blog")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Blog"}),p.jsx(it,{to:"/faq",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/faq")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"FAQ"}),p.jsx(it,{to:"/contact",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/contact")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Contact"}),p.jsx(it,{to:"/nutrition",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/nutrition")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Nutrition"}),o&&p.jsx(it,{to:"/profile",onClick:x,className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${b("/profile")?"text-red-600 font-semibold":""} ${r?"text-red-400":"text-red-800"}`,children:"Profile"}),p.jsx("button",{onClick:()=>{s(),x()},className:`nav-link block py-2 px-3 rounded-lg hover:text-red-600 focus:text-red-600 focus:outline-none focus:ring-2 focus:ring-red-600 transition-colors duration-200 ${r?"text-red-400":"text-red-800"}`,"aria-label":r?"Switch to light mode":"Switch to dark mode",children:r?" Light Mode":" Dark Mode"}),u?p.jsx("span",{className:"block py-2 px-3",children:"Loading..."}):o?p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:`block py-2 px-3 text-sm ${r?"text-red-400":"text-red-800"}`,children:["Welcome, ",k]}),p.jsx("button",{onClick:()=>{v(),x()},className:"block py-2 px-3 text-left w-full text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Logout"})]}):p.jsx(it,{to:"/login",onClick:x,className:"block py-2 px-3 text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-600 rounded-lg transition-colors duration-200",children:"Login"})]})]})]})};var $S={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},q_=tt.createContext&&tt.createContext($S),Bj=["attr","size","title"];function zj(t,e){if(t==null)return{};var n=Wj(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wj(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yh(){return Yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yh.apply(this,arguments)}function K_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Xh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(n),!0).forEach(function(r){Hj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hj(t,e,n){return e=qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qj(t){var e=Kj(t,"string");return typeof e=="symbol"?e:e+""}function Kj(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FS(t){return t&&t.map((e,n)=>tt.createElement(e.tag,Xh({key:n},e.attr),FS(e.child)))}function Il(t){return e=>tt.createElement(Gj,Yh({attr:Xh({},t.attr)},e),FS(t.child))}function Gj(t){var e=n=>{var{attr:r,size:s,title:o}=t,l=zj(t,Bj),u=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),tt.createElement("svg",Yh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:c,style:Xh(Xh({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&tt.createElement("title",null,o),t.children)};return q_!==void 0?tt.createElement(q_.Consumer,null,n=>e(n)):e($S)}function Qj(t){return Il({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(t)}function Jj(t){return Il({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function Yj(t){return Il({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(t)}function Xj(t){return Il({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function Zj(t){return Il({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function eD(t){return Il({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}const tD=()=>{const{isDarkMode:t}=A.useContext(Ze),{user:e,logout:n}=A.useContext($s),r=Dr();return p.jsx("div",{className:`${t?"dark":""}`,children:p.jsxs("div",{className:"min-h-screen flex flex-col bg-stone-100 dark:bg-stone-900 text-stone-900 dark:text-stone-100",children:[p.jsx(Uj,{location:r}),p.jsx("main",{className:"flex-1 pt-20 sm:pt-24 md:pt-28",children:p.jsx(rS,{})}),p.jsxs("footer",{className:"bg-red-800 text-white p-6 text-center",children:[p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Facebook",children:p.jsx(Qj,{size:24})}),p.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Twitter",children:p.jsx(Xj,{size:24})}),p.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"Instagram",children:p.jsx(Jj,{size:24})}),p.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"LinkedIn",children:p.jsx(Yj,{size:24})}),p.jsx("a",{href:"https://youtube.com",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-red-400 transition-colors duration-200","aria-label":"YouTube",children:p.jsx(Zj,{size:24})})]})}),p.jsxs("p",{children:[" ",new Date().getFullYear()," Aussie Gut Pack. All rights reserved."]})]})]})})};function jn({to:t,children:e,variant:n,className:r,...s}){const o="px-4 py-2 rounded transition-colors duration-300 ease-in-out",l=n==="primary"?"bg-red-800 text-white hover:bg-red-900":"bg-stone-200 text-red-600 hover:bg-stone-300";return t?p.jsx(it,{to:t,className:`${o} ${l} ${r}`,...s,children:e}):p.jsx("button",{className:`${o} ${l} ${r}`,...s,children:e})}const nD="/aussie-gut-pack/assets/aussie-BleX4DhZ.png",rD="/aussie-gut-pack/assets/goggins-BJp9afAd.png",G_=[{src:nD,alt:"Australian Shepherd dog"},{src:rD,alt:"David Goggins running"}],sD=({className:t})=>{const[e,n]=A.useState(0);return A.useEffect(()=>{const r=setInterval(()=>{n(s=>(s+1)%G_.length)},5e3);return()=>clearInterval(r)},[]),p.jsx("div",{className:"absolute inset-0 w-full h-full overflow-hidden bg-gray-900",children:G_.map((r,s)=>p.jsx("img",{src:r.src,alt:r.alt,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out ${s===e?"opacity-100":"opacity-0"} ${t||""}`},s))})},oy=A.createContext({});function ay(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const ly=typeof window<"u",US=ly?A.useLayoutEffect:A.useEffect,Df=A.createContext(null),uy=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class iD extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=s-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oD({children:t,isPresent:e,anchorX:n}){const r=A.useId(),s=A.useRef(null),o=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=A.useContext(uy);return A.useInsertionEffect(()=>{const{width:u,height:c,top:h,left:g,right:v}=o.current;if(e||!s.current||!u||!c)return;const x=n==="left"?`left: ${g}`:`right: ${v}`;s.current.dataset.motionPopId=r;const b=document.createElement("style");return l&&(b.nonce=l),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${c}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{document.head.removeChild(b)}},[e]),p.jsx(iD,{isPresent:e,childRef:s,sizeRef:o,children:A.cloneElement(t,{ref:s})})}const aD=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u})=>{const c=ay(lD),h=A.useId(),g=A.useCallback(x=>{c.set(x,!0);for(const b of c.values())if(!b)return;r&&r()},[c,r]),v=A.useMemo(()=>({id:h,initial:e,isPresent:n,custom:s,onExitComplete:g,register:x=>(c.set(x,!1),()=>c.delete(x))}),o?[Math.random(),g]:[n,g]);return A.useMemo(()=>{c.forEach((x,b)=>c.set(b,!1))},[n]),A.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),l==="popLayout"&&(t=p.jsx(oD,{isPresent:n,anchorX:u,children:t})),p.jsx(Df.Provider,{value:v,children:t})};function lD(){return new Map}function BS(t=!0){const e=A.useContext(Df);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,o=A.useId();A.useEffect(()=>{if(t)return s(o)},[t]);const l=A.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,l]:[!0]}const vh=t=>t.key||"";function Q_(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const Jg=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left"})=>{const[c,h]=BS(l),g=A.useMemo(()=>Q_(t),[t]),v=l&&!c?[]:g.map(vh),x=A.useRef(!0),b=A.useRef(g),k=ay(()=>new Map),[D,P]=A.useState(g),[j,V]=A.useState(g);US(()=>{x.current=!1,b.current=g;for(let H=0;H<j.length;H++){const Y=vh(j[H]);v.includes(Y)?k.delete(Y):k.get(Y)!==!0&&k.set(Y,!1)}},[j,v.length,v.join("-")]);const $=[];if(g!==D){let H=[...g];for(let Y=0;Y<j.length;Y++){const R=j[Y],E=vh(R);v.includes(E)||(H.splice(Y,0,R),$.push(R))}return o==="wait"&&$.length&&(H=$),V(Q_(H)),P(g),null}const{forceRender:z}=A.useContext(oy);return p.jsx(p.Fragment,{children:j.map(H=>{const Y=vh(H),R=l&&!c?!1:g===j||v.includes(Y),E=()=>{if(k.has(Y))k.set(Y,!0);else return;let S=!0;k.forEach(I=>{I||(S=!1)}),S&&(z==null||z(),V(b.current),l&&(h==null||h()),r&&r())};return p.jsx(aD,{isPresent:R,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,onExitComplete:R?void 0:E,anchorX:u,children:H},Y)})})};function cy(t,e){t.indexOf(e)===-1&&t.push(e)}function dy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let zS=()=>{};const Yg={useManualTiming:!1};function hy(t){let e;return()=>(e===void 0&&(e=t()),e)}const ur=t=>t,hc=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class fy{constructor(){this.subscriptions=[]}add(e){return cy(this.subscriptions,e),()=>dy(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qr=t=>t*1e3,Jr=t=>t/1e3;function WS(t,e){return e?t*(1e3/e):0}const uD=hy(()=>window.ScrollTimeline!==void 0);class cD{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>e.finished))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>{if(uD()&&s.attachTimeline)return s.attachTimeline(e);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class dD extends cD{then(e,n){return this.finished.finally(e).then(()=>{})}}const J_={value:null},py=t=>Array.isArray(t)&&typeof t[0]=="number",hD={};function fD(t,e){const n=hy(t);return()=>hD[e]??n()}const fc=fD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),HS=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(o/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},zu=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Xg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zu([0,.65,.55,1]),circOut:zu([.55,0,1,.45]),backIn:zu([.31,.01,.66,-.59]),backOut:zu([.33,1.53,.69,.99])};function qS(t,e){if(t)return typeof t=="function"&&fc()?HS(t,e):py(t)?zu(t):Array.isArray(t)?t.map(n=>qS(n,e)||Xg.easeOut):Xg[t]}function pD(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeInOut",times:c}={},h=void 0){const g={[e]:n};c&&(g.offset=c);const v=qS(u,s);return Array.isArray(v)&&(g.easing=v),t.animate(g,{delay:r,duration:s,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal",pseudoElement:h})}function my(t){return typeof t=="function"&&"applyToOptions"in t}function gy(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Zh=2e4;function yy(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zh;)e+=n,r=t.next(e);return e>=Zh?1/0:e}function mD(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(yy(r),Zh);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Jr(s)}}function KS(t){return!!(typeof t=="function"&&fc()||!t||typeof t=="string"&&(t in Xg||fc())||py(t)||Array.isArray(t)&&t.every(KS))}function Y_(t,e){t.timeline=e,t.onfinish=null}const xh=["read","resolveKeyframes","update","preRender","render","postRender"];function gD(t,e){let n=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1},c=0;function h(v){l.has(v)&&(g.schedule(v),t()),c++,v(u)}const g={schedule:(v,x=!1,b=!1)=>{const D=b&&s?n:r;return x&&l.add(v),D.has(v)||D.add(v),v},cancel:v=>{r.delete(v),l.delete(v)},process:v=>{if(u=v,s){o=!0;return}s=!0,[n,r]=[r,n],n.forEach(h),e&&J_.value&&J_.value.frameloop[e].push(c),c=0,n.clear(),s=!1,o&&(o=!1,g.process(v))}};return g}const yD=40;function GS(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=xh.reduce((j,V)=>(j[V]=gD(o,e?V:void 0),j),{}),{read:u,resolveKeyframes:c,update:h,preRender:g,render:v,postRender:x}=l,b=()=>{const j=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(j-s.timestamp,yD),1),s.timestamp=j,s.isProcessing=!0,u.process(s),c.process(s),h.process(s),g.process(s),v.process(s),x.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(b))},k=()=>{n=!0,r=!0,s.isProcessing||t(b)};return{schedule:xh.reduce((j,V)=>{const $=l[V];return j[V]=(z,H=!1,Y=!1)=>(n||k(),$.schedule(z,H,Y)),j},{}),cancel:j=>{for(let V=0;V<xh.length;V++)l[xh[V]].cancel(j)},state:s,steps:l}}const{schedule:vy}=GS(queueMicrotask,!1),{schedule:ot,cancel:Ai,state:Xt,steps:og}=GS(typeof requestAnimationFrame<"u"?requestAnimationFrame:ur,!0);let jh;function vD(){jh=void 0}const Yr={now:()=>(jh===void 0&&Yr.set(Xt.isProcessing||Yg.useManualTiming?Xt.timestamp:performance.now()),jh),set:t=>{jh=t,queueMicrotask(vD)}},Cr={x:!1,y:!1};function QS(){return Cr.x||Cr.y}function xD(t){return t==="x"||t==="y"?Cr[t]?null:(Cr[t]=!0,()=>{Cr[t]=!1}):Cr.x||Cr.y?null:(Cr.x=Cr.y=!0,()=>{Cr.x=Cr.y=!1})}function wD(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function JS(t,e){const n=wD(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function X_(t){return!(t.pointerType==="touch"||QS())}function _D(t,e,n={}){const[r,s,o]=JS(t,n),l=u=>{if(!X_(u))return;const{target:c}=u,h=e(c,u);if(typeof h!="function"||!c)return;const g=v=>{X_(v)&&(h(v),c.removeEventListener("pointerleave",g))};c.addEventListener("pointerleave",g,s)};return r.forEach(u=>{u.addEventListener("pointerenter",l,s)}),o}const YS=(t,e)=>e?t===e?!0:YS(t,e.parentElement):!1,xy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,bD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ED(t){return bD.has(t.tagName)||t.tabIndex!==-1}const Wu=new WeakSet;function Z_(t){return e=>{e.key==="Enter"&&t(e)}}function ag(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const TD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Z_(()=>{if(Wu.has(n))return;ag(n,"down");const s=Z_(()=>{ag(n,"up")}),o=()=>ag(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function eb(t){return xy(t)&&!QS()}function SD(t,e,n={}){const[r,s,o]=JS(t,n),l=u=>{const c=u.currentTarget;if(!eb(u)||Wu.has(c))return;Wu.add(c);const h=e(c,u),g=(b,k)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",x),!(!eb(b)||!Wu.has(c))&&(Wu.delete(c),typeof h=="function"&&h(b,{success:k}))},v=b=>{g(b,c===window||c===document||n.useGlobalTarget||YS(c,b.target))},x=b=>{g(b,!1)};window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",x,s)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),u instanceof HTMLElement&&(u.addEventListener("focus",h=>TD(h,s)),!ED(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}const tb=30,kD=t=>!isNaN(parseFloat(t));class CD{constructor(e,n={}){this.version="12.7.3",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=Yr.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=kD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new fy);const r=this.events[e].add(n);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tb);return WS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pc(t,e){return new CD(t,e)}const XS=A.createContext({strict:!1}),nb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gl={};for(const t in nb)gl[t]={isEnabled:e=>nb[t].some(n=>!!e[n])};function PD(t){for(const e in t)gl[e]={...gl[e],...t[e]}}const AD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ef(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AD.has(t)}let ZS=t=>!ef(t);function ID(t){t&&(ZS=e=>e.startsWith("on")?!ef(e):t(e))}try{ID(require("@emotion/is-prop-valid").default)}catch{}function RD(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(ZS(s)||n===!0&&ef(s)||!e&&!ef(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function ND(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Of=A.createContext({});function Lf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function mc(t){return typeof t=="string"||Array.isArray(t)}const wy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_y=["initial",...wy];function Mf(t){return Lf(t.animate)||_y.some(e=>mc(t[e]))}function ek(t){return!!(Mf(t)||t.variants)}function jD(t,e){if(Mf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||mc(n)?n:void 0,animate:mc(r)?r:void 0}}return t.inherit!==!1?e:{}}function DD(t){const{initial:e,animate:n}=jD(t,A.useContext(Of));return A.useMemo(()=>({initial:e,animate:n}),[rb(e),rb(n)])}function rb(t){return Array.isArray(t)?t.join(" "):t}const OD=Symbol.for("motionComponentSymbol");function Za(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function LD(t,e,n){return A.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Za(n)&&(n.current=r))},[e])}const by=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),MD="framerAppearId",tk="data-"+by(MD),nk=A.createContext({});function VD(t,e,n,r,s){var D,P;const{visualElement:o}=A.useContext(Of),l=A.useContext(XS),u=A.useContext(Df),c=A.useContext(uy).reducedMotion,h=A.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const g=h.current,v=A.useContext(nk);g&&!g.projection&&s&&(g.type==="html"||g.type==="svg")&&$D(h.current,n,s,v);const x=A.useRef(!1);A.useInsertionEffect(()=>{g&&x.current&&g.update(n,u)});const b=n[tk],k=A.useRef(!!b&&!((D=window.MotionHandoffIsComplete)!=null&&D.call(window,b))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,b)));return US(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),vy.render(g.render),k.current&&g.animationState&&g.animationState.animateChanges())}),A.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var j;(j=window.MotionHandoffMarkAsComplete)==null||j.call(window,b)}),k.current=!1))}),g}function $D(t,e,n,r){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:c,layoutRoot:h,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:rk(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&Za(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:c,layoutRoot:h})}function rk(t){if(t)return t.options.allowProjection!==!1?t.projection:rk(t.parent)}function FD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&PD(t);function o(u,c){let h;const g={...A.useContext(uy),...u,layoutId:UD(u)},{isStatic:v}=g,x=DD(u),b=r(u,v);if(!v&&ly){BD();const k=zD(g);h=k.MeasureLayout,x.visualElement=VD(s,b,g,e,k.ProjectionNode)}return p.jsxs(Of.Provider,{value:x,children:[h&&x.visualElement?p.jsx(h,{visualElement:x.visualElement,...g}):null,n(s,u,LD(b,x.visualElement,c),b,v,x.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const l=A.forwardRef(o);return l[OD]=s,l}function UD({layoutId:t}){const e=A.useContext(oy).id;return e&&t!==void 0?e+"-"+t:t}function BD(t,e){A.useContext(XS).strict}function zD(t){const{drag:e,layout:n}=gl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const sk=t=>e=>typeof e=="string"&&e.startsWith(t),Ey=sk("--"),WD=sk("var(--"),Ty=t=>WD(t)?HD.test(t.split("/*")[0].trim()):!1,HD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gc={};function qD(t){for(const e in t)gc[e]=t[e],Ey(e)&&(gc[e].isCSSVariable=!0)}const Rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bo=new Set(Rl);function ik(t,{layout:e,layoutId:n}){return Bo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gc[t]||t==="opacity")}const fn=t=>!!(t&&t.getVelocity),ok=(t,e)=>e&&typeof t=="number"?e.transform(t):t,js=(t,e,n)=>n>e?e:n<t?t:n,Nl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yc={...Nl,transform:t=>js(0,1,t)},wh={...Nl,default:1},Oc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),pi=Oc("deg"),Xr=Oc("%"),Ie=Oc("px"),KD=Oc("vh"),GD=Oc("vw"),sb={...Xr,parse:t=>Xr.parse(t)/100,transform:t=>Xr.transform(t*100)},QD={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie},JD={rotate:pi,rotateX:pi,rotateY:pi,rotateZ:pi,scale:wh,scaleX:wh,scaleY:wh,scaleZ:wh,skew:pi,skewX:pi,skewY:pi,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:yc,originX:sb,originY:sb,originZ:Ie},ib={...Nl,transform:Math.round},Sy={...QD,...JD,zIndex:ib,size:Ie,fillOpacity:yc,strokeOpacity:yc,numOctaves:ib},YD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XD=Rl.length;function ZD(t,e,n){let r="",s=!0;for(let o=0;o<XD;o++){const l=Rl[o],u=t[l];if(u===void 0)continue;let c=!0;if(typeof u=="number"?c=u===(l.startsWith("scale")?1:0):c=parseFloat(u)===0,!c||n){const h=ok(u,Sy[l]);if(!c){s=!1;const g=YD[l]||l;r+=`${g}(${h}) `}n&&(e[l]=h)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function ky(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let l=!1,u=!1;for(const c in e){const h=e[c];if(Bo.has(c)){l=!0;continue}else if(Ey(c)){s[c]=h;continue}else{const g=ok(h,Sy[c]);c.startsWith("origin")?(u=!0,o[c]=g):r[c]=g}}if(e.transform||(l||n?r.transform=ZD(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:c="50%",originY:h="50%",originZ:g=0}=o;r.transformOrigin=`${c} ${h} ${g}`}}const Cy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ak(t,e,n){for(const r in e)!fn(e[r])&&!ik(r,n)&&(t[r]=e[r])}function eO({transformTemplate:t},e){return A.useMemo(()=>{const n=Cy();return ky(n,e,t),Object.assign({},n.vars,n.style)},[e])}function tO(t,e){const n=t.style||{},r={};return ak(r,n,t),Object.assign(r,eO(t,e)),r}function nO(t,e){const n={},r=tO(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const rO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Py(t){return typeof t!="string"||t.includes("-")?!1:!!(rO.indexOf(t)>-1||/[A-Z]/u.test(t))}const sO={offset:"stroke-dashoffset",array:"stroke-dasharray"},iO={offset:"strokeDashoffset",array:"strokeDasharray"};function oO(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?sO:iO;t[o.offset]=Ie.transform(-r);const l=Ie.transform(e),u=Ie.transform(n);t[o.array]=`${l} ${u}`}function ob(t,e,n){return typeof t=="string"?t:Ie.transform(e+n*t)}function aO(t,e,n){const r=ob(e,t.x,t.width),s=ob(n,t.y,t.height);return`${r} ${s}`}function Ay(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:l,pathSpacing:u=1,pathOffset:c=0,...h},g,v){if(ky(t,h,v),g){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:b,dimensions:k}=t;x.transform&&(k&&(b.transform=x.transform),delete x.transform),k&&(s!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=aO(k,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),l!==void 0&&oO(x,l,u,c,!1)}const lk=()=>({...Cy(),attrs:{}}),Iy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function lO(t,e,n,r){const s=A.useMemo(()=>{const o=lk();return Ay(o,e,Iy(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};ak(o,t.style,t),s.style={...o,...s.style}}return s}function uO(t=!1){return(n,r,s,{latestValues:o},l)=>{const c=(Py(n)?lO:nO)(r,o,l,n),h=RD(r,typeof n=="string",t),g=n!==A.Fragment?{...h,...c,ref:s}:{},{children:v}=r,x=A.useMemo(()=>fn(v)?v.get():v,[v]);return A.createElement(n,{...g,children:x})}}function ab(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Ry(t,e,n,r){if(typeof e=="function"){const[s,o]=ab(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=ab(r);e=e(n!==void 0?n:t.custom,s,o)}return e}const Zg=t=>Array.isArray(t),cO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),dO=t=>Zg(t)?t[t.length-1]||0:t;function Dh(t){const e=fn(t)?t.get():t;return cO(e)?e.toValue():e}function hO({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,s,o){const l={latestValues:fO(r,s,o,t),renderState:e()};return n&&(l.onMount=u=>n({props:r,current:u,...l}),l.onUpdate=u=>n(u)),l}const uk=t=>(e,n)=>{const r=A.useContext(Of),s=A.useContext(Df),o=()=>hO(t,e,r,s);return n?o():ay(o)};function fO(t,e,n,r){const s={},o=r(t,{});for(const x in o)s[x]=Dh(o[x]);let{initial:l,animate:u}=t;const c=Mf(t),h=ek(t);e&&h&&!c&&t.inherit!==!1&&(l===void 0&&(l=e.initial),u===void 0&&(u=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const v=g?u:l;if(v&&typeof v!="boolean"&&!Lf(v)){const x=Array.isArray(v)?v:[v];for(let b=0;b<x.length;b++){const k=Ry(t,x[b]);if(k){const{transitionEnd:D,transition:P,...j}=k;for(const V in j){let $=j[V];if(Array.isArray($)){const z=g?$.length-1:0;$=$[z]}$!==null&&(s[V]=$)}for(const V in D)s[V]=D[V]}}}return s}function Ny(t,e,n){var o;const{style:r}=t,s={};for(const l in r)(fn(r[l])||e.style&&fn(e.style[l])||ik(l,t)||((o=n==null?void 0:n.getValue(l))==null?void 0:o.liveStyle)!==void 0)&&(s[l]=r[l]);return s}const pO={useVisualState:uk({scrapeMotionValuesFromProps:Ny,createRenderState:Cy})};function ck(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}function dk(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fk(t,e,n,r){dk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(hk.has(s)?s:by(s),e.attrs[s])}function pk(t,e,n){const r=Ny(t,e,n);for(const s in t)if(fn(t[s])||fn(e[s])){const o=Rl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}const lb=["x","y","width","height","cx","cy","r"],mO={useVisualState:uk({scrapeMotionValuesFromProps:pk,createRenderState:lk,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:s})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in s)if(Bo.has(u)){o=!0;break}}if(!o)return;let l=!e;if(e)for(let u=0;u<lb.length;u++){const c=lb[u];t[c]!==e[c]&&(l=!0)}l&&ot.read(()=>{ck(n,r),ot.render(()=>{Ay(r,s,Iy(n.tagName),t.transformTemplate),fk(n,r)})})}})};function gO(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const l={...Py(r)?mO:pO,preloadedFeatures:t,useRender:uO(s),createVisualElement:e,Component:r};return FD(l)}}function vc(t,e,n){const r=t.getProps();return Ry(r,e,n!==void 0?n:r.custom,t)}const mk=new Set(["width","height","top","left","right","bottom",...Rl]);function yO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,pc(n))}function vO(t,e){const n=vc(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const l in o){const u=dO(o[l]);yO(t,l,u)}}function xO(t){return!!(fn(t)&&t.add)}function e0(t,e){const n=t.getValue("willChange");if(xO(n))return n.add(e);if(!n&&Yg.WillChange){const r=new Yg.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function gk(t){return t.props[tk]}const yk=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,wO=1e-7,_O=12;function bO(t,e,n,r,s){let o,l,u=0;do l=e+(n-e)/2,o=yk(l,r,s)-t,o>0?n=l:e=l;while(Math.abs(o)>wO&&++u<_O);return l}function Lc(t,e,n,r){if(t===e&&n===r)return ur;const s=o=>bO(o,0,1,t,n);return o=>o===0||o===1?o:yk(s(o),e,r)}const vk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,xk=t=>e=>1-t(1-e),wk=Lc(.33,1.53,.69,.99),jy=xk(wk),_k=vk(jy),bk=t=>(t*=2)<1?.5*jy(t):.5*(2-Math.pow(2,-10*(t-1))),Dy=t=>1-Math.sin(Math.acos(t)),Ek=xk(Dy),Tk=vk(Dy),Sk=t=>/^0[^.\s]+$/u.test(t);function EO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Sk(t):!0}const ec=t=>Math.round(t*1e5)/1e5,Oy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TO(t){return t==null}const SO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ly=(t,e)=>n=>!!(typeof n=="string"&&SO.test(n)&&n.startsWith(t)||e&&!TO(n)&&Object.prototype.hasOwnProperty.call(n,e)),kk=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,l,u]=r.match(Oy);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},kO=t=>js(0,255,t),lg={...Nl,transform:t=>Math.round(kO(t))},Po={test:Ly("rgb","red"),parse:kk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lg.transform(t)+", "+lg.transform(e)+", "+lg.transform(n)+", "+ec(yc.transform(r))+")"};function CO(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const t0={test:Ly("#"),parse:CO,transform:Po.transform},el={test:Ly("hsl","hue"),parse:kk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Xr.transform(ec(e))+", "+Xr.transform(ec(n))+", "+ec(yc.transform(r))+")"},cn={test:t=>Po.test(t)||t0.test(t)||el.test(t),parse:t=>Po.test(t)?Po.parse(t):el.test(t)?el.parse(t):t0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Po.transform(t):el.transform(t)},PO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Oy))==null?void 0:e.length)||0)+(((n=t.match(PO))==null?void 0:n.length)||0)>0}const Ck="number",Pk="color",IO="var",RO="var(",ub="${}",NO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const u=e.replace(NO,c=>(cn.test(c)?(r.color.push(o),s.push(Pk),n.push(cn.parse(c))):c.startsWith(RO)?(r.var.push(o),s.push(IO),n.push(c)):(r.number.push(o),s.push(Ck),n.push(parseFloat(c))),++o,ub)).split(ub);return{values:n,split:u,indexes:r,types:s}}function Ak(t){return xc(t).values}function Ik(t){const{split:e,types:n}=xc(t),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const u=n[l];u===Ck?o+=ec(s[l]):u===Pk?o+=cn.transform(s[l]):o+=s[l]}return o}}const jO=t=>typeof t=="number"?0:t;function DO(t){const e=Ak(t);return Ik(t)(e.map(jO))}const Ii={test:AO,parse:Ak,createTransformer:Ik,getAnimatableNone:DO},OO=new Set(["brightness","contrast","saturate","opacity"]);function LO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Oy)||[];if(!r)return t;const s=n.replace(r,"");let o=OO.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const MO=/\b([a-z-]*)\(.*?\)/gu,n0={...Ii,getAnimatableNone:t=>{const e=t.match(MO);return e?e.map(LO).join(" "):t}},VO={...Sy,color:cn,backgroundColor:cn,outlineColor:cn,fill:cn,stroke:cn,borderColor:cn,borderTopColor:cn,borderRightColor:cn,borderBottomColor:cn,borderLeftColor:cn,filter:n0,WebkitFilter:n0},Rk=t=>VO[t];function Nk(t,e){let n=Rk(t);return n!==n0&&(n=Ii),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const $O=new Set(["auto","none","0"]);function FO(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!$O.has(o)&&xc(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=Nk(n,s)}const Ao=t=>t*180/Math.PI,r0=t=>{const e=Ao(Math.atan2(t[1],t[0]));return s0(e)},UO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:r0,rotateZ:r0,skewX:t=>Ao(Math.atan(t[1])),skewY:t=>Ao(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},s0=t=>(t=t%360,t<0&&(t+=360),t),cb=r0,db=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),BO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:db,scaleY:hb,scale:t=>(db(t)+hb(t))/2,rotateX:t=>s0(Ao(Math.atan2(t[6],t[5]))),rotateY:t=>s0(Ao(Math.atan2(-t[2],t[0]))),rotateZ:cb,rotate:cb,skewX:t=>Ao(Math.atan(t[4])),skewY:t=>Ao(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function fb(t){return t.includes("scale")?1:0}function i0(t,e){if(!t||t==="none")return fb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=BO,s=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=UO,s=u}if(!s)return fb(e);const o=r[e],l=s[1].split(",").map(WO);return typeof o=="function"?o(l):l[o]}const zO=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return i0(n,e)};function WO(t){return parseFloat(t.trim())}const pb=t=>t===Nl||t===Ie,HO=new Set(["x","y","z"]),qO=Rl.filter(t=>!HO.has(t));function KO(t){const e=[];return qO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>i0(e,"x"),y:(t,{transform:e})=>i0(e,"y")};yl.translateX=yl.x;yl.translateY=yl.y;const No=new Set;let o0=!1,a0=!1;function jk(){if(a0){const t=Array.from(No).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=KO(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,l])=>{var u;(u=r.getValue(o))==null||u.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}a0=!1,o0=!1,No.forEach(t=>t.complete()),No.clear()}function Dk(){No.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(a0=!0)})}function GO(){Dk(),jk()}class My{constructor(e,n,r,s,o,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(No.add(this),o0||(o0=!0,ot.read(Dk),ot.resolveKeyframes(jk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const l=s==null?void 0:s.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(r&&n){const c=r.readValue(n,u);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=u),s&&l===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),No.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,No.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ok=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),QO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JO(t){const e=QO.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function Lk(t,e,n=1){const[r,s]=JO(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return Ok(l)?parseFloat(l):l}return Ty(s)?Lk(s,e,n+1):s}const Mk=t=>e=>e.test(t),YO={test:t=>t==="auto",parse:t=>t},Vk=[Nl,Ie,Xr,pi,GD,KD,YO],mb=t=>Vk.find(Mk(t));class $k extends My{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),Ty(h))){const g=Lk(h,n.current);g!==void 0&&(e[c]=g),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!mk.has(r)||e.length!==2)return;const[s,o]=e,l=mb(s),u=mb(o);if(l!==u)if(pb(l)&&pb(u))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)EO(e[s])&&r.push(s);r.length&&FO(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var u;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=yl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(u=this.removedTransforms)!=null&&u.length&&this.removedTransforms.forEach(([c,h])=>{e.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const gb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ii.test(t)||t==="0")&&!t.startsWith("url("));function XO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function ZO(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=gb(s,e),u=gb(o,e);return!l||!u?!1:XO(t)||(n==="spring"||my(n))&&r}const e4=t=>t!==null;function Vf(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(e4),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const t4=40;class Fk{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Yr.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:l,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>t4?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&GO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Yr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:l,onComplete:u,onUpdate:c,isGenerator:h}=this.options;if(!h&&!ZO(e,r,s,o))if(l)this.options.duration=0;else{c&&c(Vf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const g=this.initPlayback(e,n);g!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...g},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mt=(t,e,n)=>t+(e-t)*n;function ug(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n4({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,l=0;if(!e)s=o=l=n;else{const u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;s=ug(c,u,t+1/3),o=ug(c,u,t),l=ug(c,u,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function tf(t,e){return n=>n>0?e:t}const cg=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},r4=[t0,Po,el],s4=t=>r4.find(e=>e.test(t));function yb(t){const e=s4(t);if(!e)return!1;let n=e.parse(t);return e===el&&(n=n4(n)),n}const vb=(t,e)=>{const n=yb(t),r=yb(e);if(!n||!r)return tf(t,e);const s={...n};return o=>(s.red=cg(n.red,r.red,o),s.green=cg(n.green,r.green,o),s.blue=cg(n.blue,r.blue,o),s.alpha=mt(n.alpha,r.alpha,o),Po.transform(s))},i4=(t,e)=>n=>e(t(n)),Mc=(...t)=>t.reduce(i4),l0=new Set(["none","hidden"]);function o4(t,e){return l0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function a4(t,e){return n=>mt(t,e,n)}function Vy(t){return typeof t=="number"?a4:typeof t=="string"?Ty(t)?tf:cn.test(t)?vb:c4:Array.isArray(t)?Uk:typeof t=="object"?cn.test(t)?vb:l4:tf}function Uk(t,e){const n=[...t],r=n.length,s=t.map((o,l)=>Vy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)n[l]=s[l](o);return n}}function l4(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Vy(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function u4(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=t.indexes[o][r[o]],u=t.values[l]??0;n[s]=u,r[o]++}return n}const c4=(t,e)=>{const n=Ii.createTransformer(e),r=xc(t),s=xc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?l0.has(t)&&!s.values.length||l0.has(e)&&!r.values.length?o4(t,e):Mc(Uk(u4(r,s),s.values),n):tf(t,e)};function Bk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mt(t,e,n):Vy(t)(t,e)}const d4=5;function zk(t,e,n){const r=Math.max(e-d4,0);return WS(n-t(r),e-r)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xb=.001;function h4({duration:t=vt.duration,bounce:e=vt.bounce,velocity:n=vt.velocity,mass:r=vt.mass}){let s,o,l=1-e;l=js(vt.minDamping,vt.maxDamping,l),t=js(vt.minDuration,vt.maxDuration,Jr(t)),l<1?(s=h=>{const g=h*l,v=g*t,x=g-n,b=u0(h,l),k=Math.exp(-v);return xb-x/b*k},o=h=>{const v=h*l*t,x=v*n+n,b=Math.pow(l,2)*Math.pow(h,2)*t,k=Math.exp(-v),D=u0(Math.pow(h,2),l);return(-s(h)+xb>0?-1:1)*((x-b)*k)/D}):(s=h=>{const g=Math.exp(-h*t),v=(h-n)*t+1;return-.001+g*v},o=h=>{const g=Math.exp(-h*t),v=(n-h)*(t*t);return g*v});const u=5/t,c=p4(s,o,u);if(t=Qr(t),isNaN(c))return{stiffness:vt.stiffness,damping:vt.damping,duration:t};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:l*2*Math.sqrt(r*h),duration:t}}}const f4=12;function p4(t,e,n){let r=n;for(let s=1;s<f4;s++)r=r-t(r)/e(r);return r}function u0(t,e){return t*Math.sqrt(1-e*e)}const m4=["duration","bounce"],g4=["stiffness","damping","mass"];function wb(t,e){return e.some(n=>t[n]!==void 0)}function y4(t){let e={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...t};if(!wb(t,g4)&&wb(t,m4))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*js(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:vt.mass,stiffness:s,damping:o}}else{const n=h4(t);e={...e,...n,mass:vt.mass},e.isResolvedFromDuration=!0}return e}function nf(t=vt.visualDuration,e=vt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:c,damping:h,mass:g,duration:v,velocity:x,isResolvedFromDuration:b}=y4({...n,velocity:-Jr(n.velocity||0)}),k=x||0,D=h/(2*Math.sqrt(c*g)),P=l-o,j=Jr(Math.sqrt(c/g)),V=Math.abs(P)<5;r||(r=V?vt.restSpeed.granular:vt.restSpeed.default),s||(s=V?vt.restDelta.granular:vt.restDelta.default);let $;if(D<1){const H=u0(j,D);$=Y=>{const R=Math.exp(-D*j*Y);return l-R*((k+D*j*P)/H*Math.sin(H*Y)+P*Math.cos(H*Y))}}else if(D===1)$=H=>l-Math.exp(-j*H)*(P+(k+j*P)*H);else{const H=j*Math.sqrt(D*D-1);$=Y=>{const R=Math.exp(-D*j*Y),E=Math.min(H*Y,300);return l-R*((k+D*j*P)*Math.sinh(E)+H*P*Math.cosh(E))/H}}const z={calculatedDuration:b&&v||null,next:H=>{const Y=$(H);if(b)u.done=H>=v;else{let R=0;D<1&&(R=H===0?Qr(k):zk($,H,Y));const E=Math.abs(R)<=r,S=Math.abs(l-Y)<=s;u.done=E&&S}return u.value=u.done?l:Y,u},toString:()=>{const H=Math.min(yy(z),Zh),Y=HS(R=>z.next(H*R).value,H,30);return H+"ms "+Y},toTransition:()=>{}};return z}nf.applyToOptions=t=>{const e=mD(t,100,nf);return t.ease=fc()?e.ease:"easeOut",t.duration=Qr(e.duration),t.type="keyframes",t};function _b({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:c,restDelta:h=.5,restSpeed:g}){const v=t[0],x={done:!1,value:v},b=E=>u!==void 0&&E<u||c!==void 0&&E>c,k=E=>u===void 0?c:c===void 0||Math.abs(u-E)<Math.abs(c-E)?u:c;let D=n*e;const P=v+D,j=l===void 0?P:l(P);j!==P&&(D=j-v);const V=E=>-D*Math.exp(-E/r),$=E=>j+V(E),z=E=>{const S=V(E),I=$(E);x.done=Math.abs(S)<=h,x.value=x.done?j:I};let H,Y;const R=E=>{b(x.value)&&(H=E,Y=nf({keyframes:[x.value,k(x.value)],velocity:zk($,E,x.value),damping:s,stiffness:o,restDelta:h,restSpeed:g}))};return R(0),{calculatedDuration:null,next:E=>{let S=!1;return!Y&&H===void 0&&(S=!0,z(E),R(E)),H!==void 0&&E>=H?Y.next(E-H):(!S&&z(E),x)}}}const v4=Lc(.42,0,1,1),x4=Lc(0,0,.58,1),Wk=Lc(.42,0,.58,1),w4=t=>Array.isArray(t)&&typeof t[0]!="number",_4={linear:ur,easeIn:v4,easeInOut:Wk,easeOut:x4,circIn:Dy,circInOut:Tk,circOut:Ek,backIn:jy,backInOut:_k,backOut:wk,anticipate:bk},bb=t=>{if(py(t)){zS(t.length===4);const[e,n,r,s]=t;return Lc(e,n,r,s)}else if(typeof t=="string")return _4[t];return t};function b4(t,e,n){const r=[],s=n||Bk,o=t.length-1;for(let l=0;l<o;l++){let u=s(t[l],t[l+1]);if(e){const c=Array.isArray(e)?e[l]||ur:e;u=Mc(c,u)}r.push(u)}return r}function E4(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(zS(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=b4(e,r,s),c=u.length,h=g=>{if(l&&g<t[0])return e[0];let v=0;if(c>1)for(;v<t.length-2&&!(g<t[v+1]);v++);const x=hc(t[v],t[v+1],g);return u[v](x)};return n?g=>h(js(t[0],t[o-1],g)):h}function T4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=hc(0,e,r);t.push(mt(n,1,s))}}function S4(t){const e=[0];return T4(e,t.length-1),e}function k4(t,e){return t.map(n=>n*e)}function C4(t,e){return t.map(()=>e||Wk).splice(0,t.length-1)}function rf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=w4(r)?r.map(bb):bb(r),o={done:!1,value:e[0]},l=k4(n&&n.length===e.length?n:S4(e),t),u=E4(l,e,{ease:Array.isArray(s)?s:C4(e,s)});return{calculatedDuration:t,next:c=>(o.value=u(c),o.done=c>=t,o)}}const P4=t=>{const e=({timestamp:n})=>t(n);return{start:()=>ot.update(e,!0),stop:()=>Ai(e),now:()=>Xt.isProcessing?Xt.timestamp:Yr.now()}},A4={decay:_b,inertia:_b,tween:rf,keyframes:rf,spring:nf},I4=t=>t/100;class $y extends Fk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,l=(s==null?void 0:s.KeyframeResolver)||My,u=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new l(o,u,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=this.options,u=my(n)?n:A4[n]||rf;let c,h;u!==rf&&typeof e[0]!="number"&&(c=Mc(I4,Bk(e[0],e[1])),e=[0,100]);const g=u({...this.options,keyframes:e});o==="mirror"&&(h=u({...this.options,keyframes:[...e].reverse(),velocity:-l})),g.calculatedDuration===null&&(g.calculatedDuration=yy(g));const{calculatedDuration:v}=g,x=v+s,b=x*(r+1)-s;return{generator:g,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:v,resolvedDuration:x,totalDuration:b}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:l,mapPercentToKeyframes:u,keyframes:c,calculatedDuration:h,totalDuration:g,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:x,repeat:b,repeatType:k,repeatDelay:D,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-g/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const j=this.currentTime-x*(this.speed>=0?1:-1),V=this.speed>=0?j<0:j>g;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=g);let $=this.currentTime,z=o;if(b){const E=Math.min(this.currentTime,g)/v;let S=Math.floor(E),I=E%1;!I&&E>=1&&(I=1),I===1&&S--,S=Math.min(S,b+1),!!(S%2)&&(k==="reverse"?(I=1-I,D&&(I-=D/v)):k==="mirror"&&(z=l)),$=js(0,1,I)*v}const H=V?{done:!1,value:c[0]}:z.next($);u&&(H.value=u(H.value));let{done:Y}=H;!V&&h!==null&&(Y=this.speed>=0?this.currentTime>=g:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return R&&s!==void 0&&(H.value=Vf(c,this.options,s)),P&&P(H.value),R&&this.finish(),H}get duration(){const{resolved:e}=this;return e?Jr(e.calculatedDuration):0}get time(){return Jr(this.currentTime)}set time(e){e=Qr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=P4,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}get finished(){return this.currentFinishedPromise}}const R4=new Set(["opacity","clipPath","filter","transform"]),N4=hy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sf=10,j4=2e4;function D4(t){return my(t.type)||t.type==="spring"||!KS(t.ease)}function O4(t,e){const n=new $y({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<j4;)r=n.sample(o),s.push(r.value),o+=sf;return{times:void 0,keyframes:s,duration:o-sf,ease:"linear"}}const Hk={anticipate:bk,backInOut:_k,circInOut:Tk};function L4(t){return t in Hk}class Eb extends Fk{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new $k(o,(l,u)=>this.onKeyframesResolved(l,u),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:s,ease:o,type:l,motionValue:u,name:c,startTime:h}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&fc()&&L4(o)&&(o=Hk[o]),D4(this.options)){const{onComplete:v,onUpdate:x,motionValue:b,element:k,...D}=this.options,P=O4(e,D);e=P.keyframes,e.length===1&&(e[1]=e[0]),r=P.duration,s=P.times,o=P.ease,l="keyframes"}const g=pD(u.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return g.startTime=h??this.calcStartTime(),this.pendingTimeline?(Y_(g,this.pendingTimeline),this.pendingTimeline=void 0):g.onfinish=()=>{const{onComplete:v}=this.options;u.set(Vf(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:g,duration:r,times:s,type:l,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Jr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Jr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Qr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ur;const{animation:r}=n;Y_(r,e)}return ur}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:l,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:g,onComplete:v,element:x,...b}=this.options,k=new $y({...b,keyframes:r,duration:s,type:o,ease:l,times:u,isGenerator:!0}),D=Qr(this.time);h.setWithVelocity(k.sample(D-sf).value,k.sample(D).value,sf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:l,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=n.owner.getProps();return N4()&&r&&R4.has(r)&&(r!=="transform"||!h)&&!c&&!s&&o!=="mirror"&&l!==0&&u!=="inertia"}}const M4={type:"spring",stiffness:500,damping:25,restSpeed:10},V4=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$4={type:"keyframes",duration:.8},F4={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},U4=(t,{keyframes:e})=>e.length>2?$4:Bo.has(t)?t.startsWith("scale")?V4(e[1]):M4:F4;function B4({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:c,elapsed:h,...g}){return!!Object.keys(g).length}const Fy=(t,e,n,r={},s,o)=>l=>{const u=gy(r,t)||{},c=u.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Qr(c);let g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-h,onUpdate:x=>{e.set(x),u.onUpdate&&u.onUpdate(x)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:s};B4(u)||(g={...g,...U4(t,g)}),g.duration&&(g.duration=Qr(g.duration)),g.repeatDelay&&(g.repeatDelay=Qr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let v=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(v=!0)),g.allowFlatten=!u.type&&!u.ease,v&&!o&&e.get()!==void 0){const x=Vf(g.keyframes,u);if(x!==void 0)return ot.update(()=>{g.onUpdate(x),g.onComplete()}),new dD([])}return!o&&Eb.supports(g)?new Eb(g):new $y(g)};function z4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function qk(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...u}=e;r&&(o=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const g in u){const v=t.getValue(g,t.latestValues[g]??null),x=u[g];if(x===void 0||h&&z4(h,g))continue;const b={delay:n,...gy(o||{},g)};let k=!1;if(window.MotionHandoffAnimation){const P=gk(t);if(P){const j=window.MotionHandoffAnimation(P,g,ot);j!==null&&(b.startTime=j,k=!0)}}e0(t,g),v.start(Fy(g,v,x,t.shouldReduceMotion&&mk.has(g)?{type:!1}:b,t,k));const D=v.animation;D&&c.push(D)}return l&&Promise.all(c).then(()=>{ot.update(()=>{l&&vO(t,l)})}),c}function c0(t,e,n={}){var c;const r=vc(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const o=r?()=>Promise.all(qk(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(h=0)=>{const{delayChildren:g=0,staggerChildren:v,staggerDirection:x}=s;return W4(t,e,g+h,v,x,n)}:()=>Promise.resolve(),{when:u}=s;if(u){const[h,g]=u==="beforeChildren"?[o,l]:[l,o];return h().then(()=>g())}else return Promise.all([o(),l(n.delay)])}function W4(t,e,n=0,r=0,s=1,o){const l=[],u=(t.variantChildren.size-1)*r,c=s===1?(h=0)=>h*r:(h=0)=>u-h*r;return Array.from(t.variantChildren).sort(H4).forEach((h,g)=>{h.notify("AnimationStart",e),l.push(c0(h,e,{...o,delay:n+c(g)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function H4(t,e){return t.sortNodePosition(e)}function q4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>c0(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=c0(t,e,n);else{const s=typeof e=="function"?vc(t,e,n.custom):e;r=Promise.all(qk(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Kk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const K4=_y.length;function Gk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Gk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<K4;n++){const r=_y[n],s=t.props[r];(mc(s)||s===!1)&&(e[r]=s)}return e}const G4=[...wy].reverse(),Q4=wy.length;function J4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>q4(t,n,r)))}function Y4(t){let e=J4(t),n=Tb(),r=!0;const s=c=>(h,g)=>{var x;const v=vc(t,g,c==="exit"?(x=t.presenceContext)==null?void 0:x.custom:void 0);if(v){const{transition:b,transitionEnd:k,...D}=v;h={...h,...D,...k}}return h};function o(c){e=c(t)}function l(c){const{props:h}=t,g=Gk(t.parent)||{},v=[],x=new Set;let b={},k=1/0;for(let P=0;P<Q4;P++){const j=G4[P],V=n[j],$=h[j]!==void 0?h[j]:g[j],z=mc($),H=j===c?V.isActive:null;H===!1&&(k=P);let Y=$===g[j]&&$!==h[j]&&z;if(Y&&r&&t.manuallyAnimateOnMount&&(Y=!1),V.protectedKeys={...b},!V.isActive&&H===null||!$&&!V.prevProp||Lf($)||typeof $=="boolean")continue;const R=X4(V.prevProp,$);let E=R||j===c&&V.isActive&&!Y&&z||P>k&&z,S=!1;const I=Array.isArray($)?$:[$];let O=I.reduce(s(j),{});H===!1&&(O={});const{prevResolvedValues:F={}}=V,L={...F,...O},re=_e=>{E=!0,x.has(_e)&&(S=!0,x.delete(_e)),V.needsAnimating[_e]=!0;const ne=t.getValue(_e);ne&&(ne.liveStyle=!1)};for(const _e in L){const ne=O[_e],me=F[_e];if(b.hasOwnProperty(_e))continue;let fe=!1;Zg(ne)&&Zg(me)?fe=!Kk(ne,me):fe=ne!==me,fe?ne!=null?re(_e):x.add(_e):ne!==void 0&&x.has(_e)?re(_e):V.protectedKeys[_e]=!0}V.prevProp=$,V.prevResolvedValues=O,V.isActive&&(b={...b,...O}),r&&t.blockInitialAnimation&&(E=!1),E&&(!(Y&&R)||S)&&v.push(...I.map(_e=>({animation:_e,options:{type:j}})))}if(x.size){const P={};if(typeof h.initial!="boolean"){const j=vc(t,Array.isArray(h.initial)?h.initial[0]:h.initial);j&&j.transition&&(P.transition=j.transition)}x.forEach(j=>{const V=t.getBaseTarget(j),$=t.getValue(j);$&&($.liveStyle=!0),P[j]=V??null}),v.push({animation:P})}let D=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(D=!1),r=!1,D?e(v):Promise.resolve()}function u(c,h){var v;if(n[c].isActive===h)return Promise.resolve();(v=t.variantChildren)==null||v.forEach(x=>{var b;return(b=x.animationState)==null?void 0:b.setActive(c,h)}),n[c].isActive=h;const g=l(c);for(const x in n)n[x].protectedKeys={};return g}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=Tb(),r=!0}}}function X4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Kk(e,t):!1}function wo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tb(){return{animate:wo(!0),whileInView:wo(),whileHover:wo(),whileTap:wo(),whileDrag:wo(),whileFocus:wo(),exit:wo()}}class Fi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Z4 extends Fi{constructor(e){super(e),e.animationState||(e.animationState=Y4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let eL=0;class tL extends Fi{constructor(){super(...arguments),this.id=eL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const nL={animation:{Feature:Z4},exit:{Feature:tL}};function wc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Vc(t){return{point:{x:t.pageX,y:t.pageY}}}const rL=t=>e=>xy(e)&&t(e,Vc(e));function tc(t,e,n,r){return wc(t,e,rL(n),r)}function Qk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function sL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function iL(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Jk=1e-4,oL=1-Jk,aL=1+Jk,Yk=.01,lL=0-Yk,uL=0+Yk;function wn(t){return t.max-t.min}function cL(t,e,n){return Math.abs(t-e)<=n}function Sb(t,e,n,r=.5){t.origin=r,t.originPoint=mt(e.min,e.max,t.origin),t.scale=wn(n)/wn(e),t.translate=mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=oL&&t.scale<=aL||isNaN(t.scale))&&(t.scale=1),(t.translate>=lL&&t.translate<=uL||isNaN(t.translate))&&(t.translate=0)}function nc(t,e,n,r){Sb(t.x,e.x,n.x,r?r.originX:void 0),Sb(t.y,e.y,n.y,r?r.originY:void 0)}function kb(t,e,n){t.min=n.min+e.min,t.max=t.min+wn(e)}function dL(t,e,n){kb(t.x,e.x,n.x),kb(t.y,e.y,n.y)}function Cb(t,e,n){t.min=e.min-n.min,t.max=t.min+wn(e)}function rc(t,e,n){Cb(t.x,e.x,n.x),Cb(t.y,e.y,n.y)}const Pb=()=>({translate:0,scale:1,origin:0,originPoint:0}),tl=()=>({x:Pb(),y:Pb()}),Ab=()=>({min:0,max:0}),St=()=>({x:Ab(),y:Ab()});function ir(t){return[t("x"),t("y")]}function dg(t){return t===void 0||t===1}function d0({scale:t,scaleX:e,scaleY:n}){return!dg(t)||!dg(e)||!dg(n)}function To(t){return d0(t)||Xk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Xk(t){return Ib(t.x)||Ib(t.y)}function Ib(t){return t&&t!=="0%"}function of(t,e,n){const r=t-n,s=e*r;return n+s}function Rb(t,e,n,r,s){return s!==void 0&&(t=of(t,s,r)),of(t,n,r)+e}function h0(t,e=0,n=1,r,s){t.min=Rb(t.min,e,n,r,s),t.max=Rb(t.max,e,n,r,s)}function Zk(t,{x:e,y:n}){h0(t.x,e.translate,e.scale,e.originPoint),h0(t.y,n.translate,n.scale,n.originPoint)}const Nb=.999999999999,jb=1.0000000000001;function hL(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,l;for(let u=0;u<s;u++){o=n[u],l=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&rl(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Zk(t,l)),r&&To(o.latestValues)&&rl(t,o.latestValues))}e.x<jb&&e.x>Nb&&(e.x=1),e.y<jb&&e.y>Nb&&(e.y=1)}function nl(t,e){t.min=t.min+e,t.max=t.max+e}function Db(t,e,n,r,s=.5){const o=mt(t.min,t.max,s);h0(t,e,n,o,r)}function rl(t,e){Db(t.x,e.x,e.scaleX,e.scale,e.originX),Db(t.y,e.y,e.scaleY,e.scale,e.originY)}function eC(t,e){return Qk(iL(t.getBoundingClientRect(),e))}function fL(t,e,n){const r=eC(t,n),{scroll:s}=e;return s&&(nl(r.x,s.offset.x),nl(r.y,s.offset.y)),r}const tC=({current:t})=>t?t.ownerDocument.defaultView:null,Ob=(t,e)=>Math.abs(t-e);function pL(t,e){const n=Ob(t.x,e.x),r=Ob(t.y,e.y);return Math.sqrt(n**2+r**2)}class nC{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=fg(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,b=pL(v.offset,{x:0,y:0})>=3;if(!x&&!b)return;const{point:k}=v,{timestamp:D}=Xt;this.history.push({...k,timestamp:D});const{onStart:P,onMove:j}=this.handlers;x||(P&&P(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=hg(x,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{this.end();const{onEnd:b,onSessionEnd:k,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=fg(v.type==="pointercancel"?this.lastMoveEventInfo:hg(x,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,P),k&&k(v,P)},!xy(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const l=Vc(e),u=hg(l,this.transformPagePoint),{point:c}=u,{timestamp:h}=Xt;this.history=[{...c,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,fg(u,this.history)),this.removeListeners=Mc(tc(this.contextWindow,"pointermove",this.handlePointerMove),tc(this.contextWindow,"pointerup",this.handlePointerUp),tc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ai(this.updatePoint)}}function hg(t,e){return e?{point:e(t.point)}:t}function Lb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function fg({point:t},e){return{point:t,delta:Lb(t,rC(e)),offset:Lb(t,mL(e)),velocity:gL(e,.1)}}function mL(t){return t[0]}function rC(t){return t[t.length-1]}function gL(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=rC(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Qr(e)));)n--;if(!r)return{x:0,y:0};const o=Jr(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function yL(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?mt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?mt(n,t,r.max):Math.min(t,n)),t}function Mb(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vL(t,{top:e,left:n,bottom:r,right:s}){return{x:Mb(t.x,n,s),y:Mb(t.y,e,r)}}function Vb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xL(t,e){return{x:Vb(t.x,e.x),y:Vb(t.y,e.y)}}function wL(t,e){let n=.5;const r=wn(t),s=wn(e);return s>r?n=hc(e.min,e.max-r,t.min):r>s&&(n=hc(t.min,t.max-s,e.min)),js(0,1,n)}function _L(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const f0=.35;function bL(t=f0){return t===!1?t=0:t===!0&&(t=f0),{x:$b(t,"left","right"),y:$b(t,"top","bottom")}}function $b(t,e,n){return{min:Fb(t,e),max:Fb(t,n)}}function Fb(t,e){return typeof t=="number"?t:t[e]||0}const EL=new WeakMap;class TL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Vc(g).point)},o=(g,v)=>{const{drag:x,dragPropagation:b,onDragStart:k}=this.getProps();if(x&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xD(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ir(P=>{let j=this.getAxisMotionValue(P).get()||0;if(Xr.test(j)){const{projection:V}=this.visualElement;if(V&&V.layout){const $=V.layout.layoutBox[P];$&&(j=wn($)*(parseFloat(j)/100))}}this.originPoint[P]=j}),k&&ot.postRender(()=>k(g,v)),e0(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},l=(g,v)=>{const{dragPropagation:x,dragDirectionLock:b,onDirectionLock:k,onDrag:D}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:P}=v;if(b&&this.currentDirection===null){this.currentDirection=SL(P),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",v.point,P),this.updateAxis("y",v.point,P),this.visualElement.render(),D&&D(g,v)},u=(g,v)=>this.stop(g,v),c=()=>ir(g=>{var v;return this.getAnimationState(g)==="paused"&&((v=this.getAxisMotionValue(g).animation)==null?void 0:v.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new nC(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:tC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ot.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!_h(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=yL(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&Za(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vL(r.layoutBox,e):this.constraints=!1,this.elastic=bL(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ir(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=_L(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Za(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=fL(r,s.root,this.visualElement.getTransformPagePoint());let l=xL(s.layout.layoutBox,o);if(n){const u=n(sL(l));this.hasMutatedConstraints=!!u,u&&(l=Qk(u))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),c=this.constraints||{},h=ir(g=>{if(!_h(g,n,this.currentDirection))return;let v=c&&c[g]||{};l&&(v={min:0,max:0});const x=s?200:1e6,b=s?40:1e7,k={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(g,k)});return Promise.all(h).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return e0(this.visualElement,e),r.start(Fy(e,r,0,n,this.visualElement,!1))}stopAnimation(){ir(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ir(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ir(n=>{const{drag:r}=this.getProps();if(!_h(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[n];o.set(e[n]-mt(l,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Za(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ir(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const c=u.get();s[l]=wL({min:c,max:c},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ir(l=>{if(!_h(l,e,null))return;const u=this.getAxisMotionValue(l),{min:c,max:h}=this.constraints[l];u.set(mt(c,h,s[l]))})}addListeners(){if(!this.visualElement.current)return;EL.set(this.visualElement,this);const e=this.visualElement.current,n=tc(e,"pointerdown",c=>{const{drag:h,dragListener:g=!0}=this.getProps();h&&g&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Za(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ot.read(r);const l=wc(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(ir(g=>{const v=this.getAxisMotionValue(g);v&&(this.originPoint[g]+=c[g].translate,v.set(v.get()+c[g].translate))}),this.visualElement.render())});return()=>{l(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=f0,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function _h(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function SL(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kL extends Fi{constructor(e){super(e),this.removeGroupControls=ur,this.removeListeners=ur,this.controls=new TL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ub=t=>(e,n)=>{t&&ot.postRender(()=>t(e,n))};class CL extends Fi{constructor(){super(...arguments),this.removePointerDownListener=ur}onPointerDown(e){this.session=new nC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:tC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Ub(e),onStart:Ub(n),onMove:r,onEnd:(o,l)=>{delete this.session,s&&ot.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=tc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Oh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $u={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=Bb(t,e.target.x),r=Bb(t,e.target.y);return`${n}% ${r}%`}},PL={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ii.parse(t);if(s.length>5)return r;const o=Ii.createTransformer(t),l=typeof s[0]!="number"?1:0,u=n.x.scale*e.x,c=n.y.scale*e.y;s[0+l]/=u,s[1+l]/=c;const h=mt(u,c,.5);return typeof s[2+l]=="number"&&(s[2+l]/=h),typeof s[3+l]=="number"&&(s[3+l]/=h),o(s)}};class AL extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;qD(IL),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Oh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,l=r.projection;return l&&(l.isPresent=o,s||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||ot.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),vy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sC(t){const[e,n]=BS(),r=A.useContext(oy);return p.jsx(AL,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(nk),isPresent:e,safeToRemove:n})}const IL={borderRadius:{...$u,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$u,borderTopRightRadius:$u,borderBottomLeftRadius:$u,borderBottomRightRadius:$u,boxShadow:PL};function RL(t,e,n){const r=fn(t)?t:pc(t);return r.start(Fy("",r,e,n)),r.animation}function NL(t){return t instanceof SVGElement&&t.tagName!=="svg"}const jL=(t,e)=>t.depth-e.depth;class DL{constructor(){this.children=[],this.isDirty=!1}add(e){cy(this.children,e),this.isDirty=!0}remove(e){dy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jL),this.isDirty=!1,this.children.forEach(e)}}function OL(t,e){const n=Yr.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(Ai(r),t(o-e))};return ot.read(r,!0),()=>Ai(r)}const iC=["TopLeft","TopRight","BottomLeft","BottomRight"],LL=iC.length,zb=t=>typeof t=="string"?parseFloat(t):t,Wb=t=>typeof t=="number"||Ie.test(t);function ML(t,e,n,r,s,o){s?(t.opacity=mt(0,n.opacity??1,VL(r)),t.opacityExit=mt(e.opacity??1,0,$L(r))):o&&(t.opacity=mt(e.opacity??1,n.opacity??1,r));for(let l=0;l<LL;l++){const u=`border${iC[l]}Radius`;let c=Hb(e,u),h=Hb(n,u);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||Wb(c)===Wb(h)?(t[u]=Math.max(mt(zb(c),zb(h),r),0),(Xr.test(h)||Xr.test(c))&&(t[u]+="%")):t[u]=h}(e.rotate||n.rotate)&&(t.rotate=mt(e.rotate||0,n.rotate||0,r))}function Hb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const VL=oC(0,.5,Ek),$L=oC(.5,.95,ur);function oC(t,e,n){return r=>r<t?0:r>e?1:n(hc(t,e,r))}function qb(t,e){t.min=e.min,t.max=e.max}function sr(t,e){qb(t.x,e.x),qb(t.y,e.y)}function Kb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Gb(t,e,n,r,s){return t-=e,t=of(t,1/n,r),s!==void 0&&(t=of(t,1/s,r)),t}function FL(t,e=0,n=1,r=.5,s,o=t,l=t){if(Xr.test(e)&&(e=parseFloat(e),e=mt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let u=mt(o.min,o.max,r);t===o&&(u-=e),t.min=Gb(t.min,e,n,u,s),t.max=Gb(t.max,e,n,u,s)}function Qb(t,e,[n,r,s],o,l){FL(t,e[n],e[r],e[s],e.scale,o,l)}const UL=["x","scaleX","originX"],BL=["y","scaleY","originY"];function Jb(t,e,n,r){Qb(t.x,e,UL,n?n.x:void 0,r?r.x:void 0),Qb(t.y,e,BL,n?n.y:void 0,r?r.y:void 0)}function Yb(t){return t.translate===0&&t.scale===1}function aC(t){return Yb(t.x)&&Yb(t.y)}function Xb(t,e){return t.min===e.min&&t.max===e.max}function zL(t,e){return Xb(t.x,e.x)&&Xb(t.y,e.y)}function Zb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function lC(t,e){return Zb(t.x,e.x)&&Zb(t.y,e.y)}function eE(t){return wn(t.x)/wn(t.y)}function tE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class WL{constructor(){this.members=[]}add(e){cy(this.members,e),e.scheduleRender()}remove(e){if(dy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HL(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:g,rotateX:v,rotateY:x,skewX:b,skewY:k}=n;h&&(r=`perspective(${h}px) ${r}`),g&&(r+=`rotate(${g}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `),b&&(r+=`skewX(${b}deg) `),k&&(r+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,c=t.y.scale*e.y;return(u!==1||c!==1)&&(r+=`scale(${u}, ${c})`),r||"none"}const pg=["","X","Y","Z"],qL={visibility:"hidden"},nE=1e3;let KL=0;function mg(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function uC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=gk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ot,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&uC(r)}function cC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},u=e==null?void 0:e()){this.id=KL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(JL),this.nodes.forEach(tM),this.nodes.forEach(nM),this.nodes.forEach(YL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new DL)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new fy),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const c=this.eventHandlers.get(l);c&&c.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=NL(l),this.instance=l;const{layoutId:c,layout:h,visualElement:g}=this.options;if(g&&!g.current&&g.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(h||c)&&(this.isLayoutDirty=!0),t){let v;const x=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=OL(x,250),Oh.hasAnimatedSinceResize&&(Oh.hasAnimatedSinceResize=!1,this.nodes.forEach(sE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&g&&(c||h)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:x,hasRelativeLayoutChanged:b,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||g.getDefaultTransition()||aM,{onLayoutAnimationStart:P,onLayoutAnimationComplete:j}=g.getProps(),V=!this.targetLayout||!lC(this.targetLayout,k),$=!x&&b;if(this.options.layoutRoot||this.resumeFrom||$||x&&(V||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,$);const z={...gy(D,"layout"),onPlay:P,onComplete:j};(g.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z)}else x||sE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ai(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rM),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&uC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const v=this.path[g];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:u,layout:c}=this.options;if(u===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rE);return}this.isUpdating||this.nodes.forEach(ZL),this.isUpdating=!1,this.nodes.forEach(eM),this.nodes.forEach(GL),this.nodes.forEach(QL),this.clearAllSnapshots();const u=Yr.now();Xt.delta=js(0,1e3/60,u-Xt.timestamp),Xt.timestamp=u,Xt.isProcessing=!0,og.update.process(Xt),og.preRender.process(Xt),og.render.process(Xt),Xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(XL),this.sharedNodes.forEach(sM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!aC(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,g=h!==this.prevTransformTemplateValue;l&&(u||To(this.latestValues)||g)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let c=this.removeElementScroll(u);return l&&(c=this.removeTransform(c)),lM(c),{animationId:this.root.animationId,measuredBox:u,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var h;const{visualElement:l}=this.options;if(!l)return St();const u=l.measureViewportBox();if(!(((h=this.scroll)==null?void 0:h.wasRoot)||this.path.some(uM))){const{scroll:g}=this.root;g&&(nl(u.x,g.offset.x),nl(u.y,g.offset.y))}return u}removeElementScroll(l){var c;const u=St();if(sr(u,l),(c=this.scroll)!=null&&c.wasRoot)return u;for(let h=0;h<this.path.length;h++){const g=this.path[h],{scroll:v,options:x}=g;g!==this.root&&v&&x.layoutScroll&&(v.wasRoot&&sr(u,l),nl(u.x,v.offset.x),nl(u.y,v.offset.y))}return u}applyTransform(l,u=!1){const c=St();sr(c,l);for(let h=0;h<this.path.length;h++){const g=this.path[h];!u&&g.options.layoutScroll&&g.scroll&&g!==g.root&&rl(c,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),To(g.latestValues)&&rl(c,g.latestValues)}return To(this.latestValues)&&rl(c,this.latestValues),c}removeTransform(l){const u=St();sr(u,l);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!To(h.latestValues))continue;d0(h.latestValues)&&h.updateSnapshot();const g=St(),v=h.measurePageBox();sr(g,v),Jb(u,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,g)}return To(this.latestValues)&&Jb(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var x;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(l||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:v}=this.options;if(!(!this.layout||!(g||v))){if(this.resolvedRelativeTargetAt=Xt.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),rc(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sr(this.target,this.layout.layoutBox),Zk(this.target,this.targetDelta)):sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),rc(this.relativeTargetOrigin,this.target,b.target),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||d0(this.parent.latestValues)||Xk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var k;const l=this.getLead(),u=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Xt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||g))return;sr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,x=this.treeScale.y;hL(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=St());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Kb(this.prevProjectionDelta.x,this.projectionDelta.x),Kb(this.prevProjectionDelta.y,this.projectionDelta.y)),nc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==x||!tE(this.projectionDelta.x,this.prevProjectionDelta.x)||!tE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var u;if((u=this.options.visualElement)==null||u.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tl(),this.projectionDelta=tl(),this.projectionDeltaWithTransform=tl()}setAnimationOrigin(l,u=!1){const c=this.snapshot,h=c?c.latestValues:{},g={...this.latestValues},v=tl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=St(),b=c?c.source:void 0,k=this.layout?this.layout.source:void 0,D=b!==k,P=this.getStack(),j=!P||P.members.length<=1,V=!!(D&&!j&&this.options.crossfade===!0&&!this.path.some(oM));this.animationProgress=0;let $;this.mixTargetDelta=z=>{const H=z/1e3;iE(v.x,l.x,H),iE(v.y,l.y,H),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rc(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iM(this.relativeTarget,this.relativeTargetOrigin,x,H),$&&zL(this.relativeTarget,$)&&(this.isProjectionDirty=!1),$||($=St()),sr($,this.relativeTarget)),D&&(this.animationValues=g,ML(g,h,this.latestValues,H,V,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ai(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Oh.hasAnimatedSinceResize=!0,this.currentAnimation=RL(0,nE,{...l,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:c,layout:h,latestValues:g}=l;if(!(!u||!c||!h)){if(this!==l&&this.layout&&h&&dC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||St();const v=wn(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+v;const x=wn(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+x}sr(u,c),rl(u,g),nc(this.projectionDeltaWithTransform,this.layoutCorrected,u,g)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new WL),this.sharedNodes.get(l).add(u);const h=u.options.initialPromotionConfig;u.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var u;const{layoutId:l}=this.options;return l?((u=this.getStack())==null?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:l}=this.options;return l?(u=this.getStack())==null?void 0:u.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(u=!0),!u)return;const h={};c.z&&mg("z",l,h,this.animationValues);for(let g=0;g<pg.length;g++)mg(`rotate${pg[g]}`,l,h,this.animationValues),mg(`skew${pg[g]}`,l,h,this.animationValues);l.render();for(const g in h)l.setStaticValue(g,h[g]),this.animationValues&&(this.animationValues[g]=h[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return qL;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Dh(l==null?void 0:l.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Dh(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!To(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1),b}const g=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=HL(this.projectionDeltaWithTransform,this.treeScale,g),c&&(u.transform=c(g,u.transform));const{x:v,y:x}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=h===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const b in gc){if(g[b]===void 0)continue;const{correct:k,applyTo:D,isCSSVariable:P}=gc[b],j=u.transform==="none"?g[b]:k(g[b],h);if(D){const V=D.length;for(let $=0;$<V;$++)u[D[$]]=j}else P?this.options.visualElement.renderState.vars[b]=j:u[b]=j}return this.options.layoutId&&(u.pointerEvents=h===this?Dh(l==null?void 0:l.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var u;return(u=l.currentAnimation)==null?void 0:u.stop()}),this.root.nodes.forEach(rE),this.root.sharedNodes.clear()}}}function GL(t){t.updateLayout()}function QL(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?ir(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],b=wn(x);x.min=r[v].min,x.max=x.min+b}):dC(o,e.layoutBox,r)&&ir(v=>{const x=l?e.measuredBox[v]:e.layoutBox[v],b=wn(r[v]);x.max=x.min+b,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+b)});const u=tl();nc(u,r,e.layoutBox);const c=tl();l?nc(c,t.applyTransform(s,!0),e.measuredBox):nc(c,r,e.layoutBox);const h=!aC(u);let g=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:x,layout:b}=v;if(x&&b){const k=St();rc(k,e.layoutBox,x.layoutBox);const D=St();rc(D,r,b.layoutBox),lC(k,D)||(g=!0),v.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=k,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function JL(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YL(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function XL(t){t.clearSnapshot()}function rE(t){t.clearMeasurements()}function ZL(t){t.isLayoutDirty=!1}function eM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tM(t){t.resolveTargetDelta()}function nM(t){t.calcProjection()}function rM(t){t.resetSkewAndRotation()}function sM(t){t.removeLeadSnapshot()}function iE(t,e,n){t.translate=mt(e.translate,0,n),t.scale=mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function oE(t,e,n,r){t.min=mt(e.min,n.min,r),t.max=mt(e.max,n.max,r)}function iM(t,e,n,r){oE(t.x,e.x,n.x,r),oE(t.y,e.y,n.y,r)}function oM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const aM={duration:.45,ease:[.4,0,.1,1]},aE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lE=aE("applewebkit/")&&!aE("chrome/")?Math.round:ur;function uE(t){t.min=lE(t.min),t.max=lE(t.max)}function lM(t){uE(t.x),uE(t.y)}function dC(t,e,n){return t==="position"||t==="preserve-aspect"&&!cL(eE(e),eE(n),.2)}function uM(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const cM=cC({attachResizeListener:(t,e)=>wc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),gg={current:void 0},hC=cC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!gg.current){const t=new cM({});t.mount(window),t.setOptions({layoutScroll:!0}),gg.current=t}return gg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dM={pan:{Feature:CL},drag:{Feature:kL,ProjectionNode:hC,MeasureLayout:sC}};function cE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,o=r[s];o&&ot.postRender(()=>o(e,Vc(e)))}class hM extends Fi{mount(){const{current:e}=this.node;e&&(this.unmount=_D(e,(n,r)=>(cE(this.node,r,"Start"),s=>cE(this.node,s,"End"))))}unmount(){}}class fM extends Fi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mc(wc(this.node.current,"focus",()=>this.onFocus()),wc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dE(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),o=r[s];o&&ot.postRender(()=>o(e,Vc(e)))}class pM extends Fi{mount(){const{current:e}=this.node;e&&(this.unmount=SD(e,(n,r)=>(dE(this.node,r,"Start"),(s,{success:o})=>dE(this.node,s,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const p0=new WeakMap,yg=new WeakMap,mM=t=>{const e=p0.get(t.target);e&&e(t)},gM=t=>{t.forEach(mM)};function yM({root:t,...e}){const n=t||document;yg.has(n)||yg.set(n,{});const r=yg.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(gM,{root:t,...e})),r[s]}function vM(t,e,n){const r=yM(e);return p0.set(t,n),r.observe(t),()=>{p0.delete(t),r.unobserve(t)}}const xM={some:0,all:1};class wM extends Fi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:xM[s]},u=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:g,onViewportLeave:v}=this.node.getProps(),x=h?g:v;x&&x(c)};return vM(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_M(e,n))&&this.startObserver()}unmount(){}}function _M({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const bM={inView:{Feature:wM},tap:{Feature:pM},focus:{Feature:fM},hover:{Feature:hM}},EM={layout:{ProjectionNode:hC,MeasureLayout:sC}},m0={current:null},fC={current:!1};function TM(){if(fC.current=!0,!!ly)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>m0.current=t.matches;t.addListener(e),e()}else m0.current=!1}const SM=[...Vk,cn,Ii],kM=t=>SM.find(Mk(t)),CM=new WeakMap;function PM(t,e,n){for(const r in e){const s=e[r],o=n[r];if(fn(s))t.addValue(r,s);else if(fn(o))t.addValue(r,pc(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=t.getStaticValue(r);t.addValue(r,pc(l!==void 0?l:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const hE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class AM{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:l},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=My,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Yr.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,ot.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:g}=l;this.onUpdate=g,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Mf(n),this.isVariantNode=ek(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{},this);for(const b in x){const k=x[b];c[b]!==void 0&&fn(k)&&k.set(c[b],!1)}}mount(e){this.current=e,CM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),fC.current||TM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:m0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ai(this.notifyUpdate),Ai(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Bo.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in gl){const n=gl[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<hE.length;r++){const s=hE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=PM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=pc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Ok(r)||Sk(r))?r=parseFloat(r):!kM(r)&&Ii.test(n)&&(r=Nk(e,n)),this.setBaseTarget(e,fn(r)?r.get():r)),fn(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const l=Ry(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!fn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new fy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class pC extends AM{constructor(){super(...arguments),this.KeyframeResolver=$k}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function IM(t){return window.getComputedStyle(t)}class RM extends pC{constructor(){super(...arguments),this.type="html",this.renderInstance=dk}readValueFromInstance(e,n){if(Bo.has(n))return zO(e,n);{const r=IM(e),s=(Ey(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return eC(e,n)}build(e,n,r){ky(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ny(e,n,r)}}class NM extends pC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&ck(this.current,this.renderState)}}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Bo.has(n)){const r=Rk(n);return r&&r.default||0}return n=hk.has(n)?n:by(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return pk(e,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&ot.postRender(this.updateDimensions)}build(e,n,r){Ay(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){fk(e,n,r,s)}mount(e){this.isSVGTag=Iy(e.tagName),super.mount(e)}}const jM=(t,e)=>Py(t)?new NM(e):new RM(e,{allowProjection:t!==A.Fragment}),DM=gO({...nL,...bM,...dM,...EM},jM),af=ND(DM),OM=()=>{};var fE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],u=t[n++],c=((s&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],l=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},gC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,u=l?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,g=o>>2,v=(o&3)<<4|u>>4;let x=(u&15)<<2|h>>6,b=h&63;c||(b=64,l||(x=64)),r.push(n[g],n[v],n[x],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||h==null||v==null)throw new MM;const x=o<<2|u>>4;if(r.push(x),h!==64){const b=u<<4&240|h>>2;if(r.push(b),v!==64){const k=h<<6&192|v;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VM=function(t){const e=mC(t);return gC.encodeByteArray(e,!0)},lf=function(t){return VM(t).replace(/\./g,"")},yC=function(t){try{return gC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=()=>$M().__FIREBASE_DEFAULTS__,UM=()=>{if(typeof process>"u"||typeof fE>"u")return;const t=fE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},BM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yC(t[1]);return e&&JSON.parse(e)},$f=()=>{try{return OM()||FM()||UM()||BM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vC=t=>{var e,n;return(n=(e=$f())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xC=t=>{const e=vC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wC=()=>{var t;return(t=$f())===null||t===void 0?void 0:t.config},_C=t=>{var e;return(e=$f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lf(JSON.stringify(n)),lf(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function HM(){var t;const e=(t=$f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QM(){const t=pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function JM(){return!HM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YM(){try{return typeof indexedDB=="object"}catch{return!1}}function XM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="FirebaseError";class os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZM,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?eV(o,r):"Error",u=`${this.serviceName}: ${l} (${s}).`;return new os(s,u,r)}}function eV(t,e){return t.replace(tV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tV=/\{\$([^}]+)}/g;function nV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],l=e[s];if(pE(o)&&pE(l)){if(!Do(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function pE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function qu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rV(t,e){const n=new sV(t,e);return n.subscribe.bind(n)}class sV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vg),s.error===void 0&&(s.error=vg),s.complete===void 0&&(s.complete=vg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class Ri{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lV(e))try{this.getOrInitializeService({instanceIdentifier:So})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=So){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=So){return this.instances.has(e)}getOptions(e=So){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&l.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=So){return this.component?this.component.multipleInstances?e:So:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aV(t){return t===So?void 0:t}function lV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ze||(ze={}));const cV={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},dV=ze.INFO,hV={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},fV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=hV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Uy{constructor(e){this.name=e,this._logLevel=dV,this._logHandler=fV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const pV=(t,e)=>e.some(n=>t instanceof n);let mE,gE;function mV(){return mE||(mE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gV(){return gE||(gE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EC=new WeakMap,g0=new WeakMap,TC=new WeakMap,xg=new WeakMap,By=new WeakMap;function yV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(Ei(t.result)),s()},l=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&EC.set(n,t)}).catch(()=>{}),By.set(e,t),e}function vV(t){if(g0.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});g0.set(t,e)}let y0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return g0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xV(t){y0=t(y0)}function wV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wg(this),e,...n);return TC.set(r,e.sort?e.sort():[e]),Ei(r)}:gV().includes(t)?function(...e){return t.apply(wg(this),e),Ei(EC.get(this))}:function(...e){return Ei(t.apply(wg(this),e))}}function _V(t){return typeof t=="function"?wV(t):(t instanceof IDBTransaction&&vV(t),pV(t,mV())?new Proxy(t,y0):t)}function Ei(t){if(t instanceof IDBRequest)return yV(t);if(xg.has(t))return xg.get(t);const e=_V(t);return e!==t&&(xg.set(t,e),By.set(e,t)),e}const wg=t=>By.get(t);function bV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),u=Ei(l);return r&&l.addEventListener("upgradeneeded",c=>{r(Ei(l.result),c.oldVersion,c.newVersion,Ei(l.transaction),c)}),n&&l.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}const EV=["get","getKey","getAll","getAllKeys","count"],TV=["put","add","delete","clear"],_g=new Map;function yE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_g.get(e))return _g.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=TV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||EV.includes(n)))return;const o=async function(l,...u){const c=this.transaction(l,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(u.shift())),(await Promise.all([h[n](...u),s&&c.done]))[0]};return _g.set(e,o),o}xV(t=>({...t,get:(e,n,r)=>yE(e,n)||t.get(e,n,r),has:(e,n)=>!!yE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const v0="@firebase/app",vE="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Uy("@firebase/app"),CV="@firebase/app-compat",PV="@firebase/analytics-compat",AV="@firebase/analytics",IV="@firebase/app-check-compat",RV="@firebase/app-check",NV="@firebase/auth",jV="@firebase/auth-compat",DV="@firebase/database",OV="@firebase/data-connect",LV="@firebase/database-compat",MV="@firebase/functions",VV="@firebase/functions-compat",$V="@firebase/installations",FV="@firebase/installations-compat",UV="@firebase/messaging",BV="@firebase/messaging-compat",zV="@firebase/performance",WV="@firebase/performance-compat",HV="@firebase/remote-config",qV="@firebase/remote-config-compat",KV="@firebase/storage",GV="@firebase/storage-compat",QV="@firebase/firestore",JV="@firebase/vertexai",YV="@firebase/firestore-compat",XV="firebase",ZV="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="[DEFAULT]",e$={[v0]:"fire-core",[CV]:"fire-core-compat",[AV]:"fire-analytics",[PV]:"fire-analytics-compat",[RV]:"fire-app-check",[IV]:"fire-app-check-compat",[NV]:"fire-auth",[jV]:"fire-auth-compat",[DV]:"fire-rtdb",[OV]:"fire-data-connect",[LV]:"fire-rtdb-compat",[MV]:"fire-fn",[VV]:"fire-fn-compat",[$V]:"fire-iid",[FV]:"fire-iid-compat",[UV]:"fire-fcm",[BV]:"fire-fcm-compat",[zV]:"fire-perf",[WV]:"fire-perf-compat",[HV]:"fire-rc",[qV]:"fire-rc-compat",[KV]:"fire-gcs",[GV]:"fire-gcs-compat",[QV]:"fire-fst",[YV]:"fire-fst-compat",[JV]:"fire-vertex","fire-js":"fire-js",[XV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,t$=new Map,w0=new Map;function xE(t,e){try{t.container.addComponent(e)}catch(n){Ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oo(t){const e=t.name;if(w0.has(e))return Ds.debug(`There were multiple attempts to register component ${e}.`),!1;w0.set(e,t);for(const n of uf.values())xE(n,t);for(const n of t$.values())xE(n,t);return!0}function Ff(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ar(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new $c("app","Firebase",n$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r${constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=ZV;function zy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:x0,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ti.create("bad-app-name",{appName:String(s)});if(n||(n=wC()),!n)throw Ti.create("no-options");const o=uf.get(s);if(o){if(Do(n,o.options)&&Do(r,o.config))return o;throw Ti.create("duplicate-app",{appName:s})}const l=new uV(s);for(const c of w0.values())l.addComponent(c);const u=new r$(n,r,l);return uf.set(s,u),u}function Wy(t=x0){const e=uf.get(t);if(!e&&t===x0&&wC())return zy();if(!e)throw Ti.create("no-app",{appName:t});return e}function Zr(t,e,n){var r;let s=(r=e$[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const u=[`Unable to register library "${s}" with version "${e}":`];o&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ds.warn(u.join(" "));return}Oo(new Ri(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$="firebase-heartbeat-database",i$=1,_c="firebase-heartbeat-store";let bg=null;function SC(){return bg||(bg=bV(s$,i$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_c)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ti.create("idb-open",{originalErrorMessage:t.message})})),bg}async function o$(t){try{const n=(await SC()).transaction(_c),r=await n.objectStore(_c).get(kC(t));return await n.done,r}catch(e){if(e instanceof os)Ds.warn(e.message);else{const n=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ds.warn(n.message)}}}async function wE(t,e){try{const r=(await SC()).transaction(_c,"readwrite");await r.objectStore(_c).put(e,kC(t)),await r.done}catch(n){if(n instanceof os)Ds.warn(n.message);else{const r=Ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ds.warn(r.message)}}}function kC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=1024,l$=30;class u${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_E();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>l$){const l=h$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ds.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_E(),{heartbeatsToSend:r,unsentEntries:s}=c$(this._heartbeatsCache.heartbeats),o=lf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ds.warn(n),""}}}function _E(){return new Date().toISOString().substring(0,10)}function c$(t,e=a$){const n=[];let r=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),bE(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YM()?XM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await o$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return wE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bE(t){return lf(JSON.stringify({version:2,heartbeats:t})).length}function h$(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f$(t){Oo(new Ri("platform-logger",e=>new SV(e),"PRIVATE")),Oo(new Ri("heartbeat",e=>new u$(e),"PRIVATE")),Zr(v0,vE,t),Zr(v0,vE,"esm2017"),Zr("fire-js","")}f$("");var p$="firebase",m$="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zr(p$,m$,"app");var EE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Si,CC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,E){function S(){}S.prototype=E.prototype,R.D=E.prototype,R.prototype=new S,R.prototype.constructor=R,R.C=function(I,O,F){for(var L=Array(arguments.length-2),re=2;re<arguments.length;re++)L[re-2]=arguments[re];return E.prototype[O].apply(I,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,E,S){S||(S=0);var I=Array(16);if(typeof E=="string")for(var O=0;16>O;++O)I[O]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(O=0;16>O;++O)I[O]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=R.g[0],S=R.g[1],O=R.g[2];var F=R.g[3],L=E+(F^S&(O^F))+I[0]+3614090360&4294967295;E=S+(L<<7&4294967295|L>>>25),L=F+(O^E&(S^O))+I[1]+3905402710&4294967295,F=E+(L<<12&4294967295|L>>>20),L=O+(S^F&(E^S))+I[2]+606105819&4294967295,O=F+(L<<17&4294967295|L>>>15),L=S+(E^O&(F^E))+I[3]+3250441966&4294967295,S=O+(L<<22&4294967295|L>>>10),L=E+(F^S&(O^F))+I[4]+4118548399&4294967295,E=S+(L<<7&4294967295|L>>>25),L=F+(O^E&(S^O))+I[5]+1200080426&4294967295,F=E+(L<<12&4294967295|L>>>20),L=O+(S^F&(E^S))+I[6]+2821735955&4294967295,O=F+(L<<17&4294967295|L>>>15),L=S+(E^O&(F^E))+I[7]+4249261313&4294967295,S=O+(L<<22&4294967295|L>>>10),L=E+(F^S&(O^F))+I[8]+1770035416&4294967295,E=S+(L<<7&4294967295|L>>>25),L=F+(O^E&(S^O))+I[9]+2336552879&4294967295,F=E+(L<<12&4294967295|L>>>20),L=O+(S^F&(E^S))+I[10]+4294925233&4294967295,O=F+(L<<17&4294967295|L>>>15),L=S+(E^O&(F^E))+I[11]+2304563134&4294967295,S=O+(L<<22&4294967295|L>>>10),L=E+(F^S&(O^F))+I[12]+1804603682&4294967295,E=S+(L<<7&4294967295|L>>>25),L=F+(O^E&(S^O))+I[13]+4254626195&4294967295,F=E+(L<<12&4294967295|L>>>20),L=O+(S^F&(E^S))+I[14]+2792965006&4294967295,O=F+(L<<17&4294967295|L>>>15),L=S+(E^O&(F^E))+I[15]+1236535329&4294967295,S=O+(L<<22&4294967295|L>>>10),L=E+(O^F&(S^O))+I[1]+4129170786&4294967295,E=S+(L<<5&4294967295|L>>>27),L=F+(S^O&(E^S))+I[6]+3225465664&4294967295,F=E+(L<<9&4294967295|L>>>23),L=O+(E^S&(F^E))+I[11]+643717713&4294967295,O=F+(L<<14&4294967295|L>>>18),L=S+(F^E&(O^F))+I[0]+3921069994&4294967295,S=O+(L<<20&4294967295|L>>>12),L=E+(O^F&(S^O))+I[5]+3593408605&4294967295,E=S+(L<<5&4294967295|L>>>27),L=F+(S^O&(E^S))+I[10]+38016083&4294967295,F=E+(L<<9&4294967295|L>>>23),L=O+(E^S&(F^E))+I[15]+3634488961&4294967295,O=F+(L<<14&4294967295|L>>>18),L=S+(F^E&(O^F))+I[4]+3889429448&4294967295,S=O+(L<<20&4294967295|L>>>12),L=E+(O^F&(S^O))+I[9]+568446438&4294967295,E=S+(L<<5&4294967295|L>>>27),L=F+(S^O&(E^S))+I[14]+3275163606&4294967295,F=E+(L<<9&4294967295|L>>>23),L=O+(E^S&(F^E))+I[3]+4107603335&4294967295,O=F+(L<<14&4294967295|L>>>18),L=S+(F^E&(O^F))+I[8]+1163531501&4294967295,S=O+(L<<20&4294967295|L>>>12),L=E+(O^F&(S^O))+I[13]+2850285829&4294967295,E=S+(L<<5&4294967295|L>>>27),L=F+(S^O&(E^S))+I[2]+4243563512&4294967295,F=E+(L<<9&4294967295|L>>>23),L=O+(E^S&(F^E))+I[7]+1735328473&4294967295,O=F+(L<<14&4294967295|L>>>18),L=S+(F^E&(O^F))+I[12]+2368359562&4294967295,S=O+(L<<20&4294967295|L>>>12),L=E+(S^O^F)+I[5]+4294588738&4294967295,E=S+(L<<4&4294967295|L>>>28),L=F+(E^S^O)+I[8]+2272392833&4294967295,F=E+(L<<11&4294967295|L>>>21),L=O+(F^E^S)+I[11]+1839030562&4294967295,O=F+(L<<16&4294967295|L>>>16),L=S+(O^F^E)+I[14]+4259657740&4294967295,S=O+(L<<23&4294967295|L>>>9),L=E+(S^O^F)+I[1]+2763975236&4294967295,E=S+(L<<4&4294967295|L>>>28),L=F+(E^S^O)+I[4]+1272893353&4294967295,F=E+(L<<11&4294967295|L>>>21),L=O+(F^E^S)+I[7]+4139469664&4294967295,O=F+(L<<16&4294967295|L>>>16),L=S+(O^F^E)+I[10]+3200236656&4294967295,S=O+(L<<23&4294967295|L>>>9),L=E+(S^O^F)+I[13]+681279174&4294967295,E=S+(L<<4&4294967295|L>>>28),L=F+(E^S^O)+I[0]+3936430074&4294967295,F=E+(L<<11&4294967295|L>>>21),L=O+(F^E^S)+I[3]+3572445317&4294967295,O=F+(L<<16&4294967295|L>>>16),L=S+(O^F^E)+I[6]+76029189&4294967295,S=O+(L<<23&4294967295|L>>>9),L=E+(S^O^F)+I[9]+3654602809&4294967295,E=S+(L<<4&4294967295|L>>>28),L=F+(E^S^O)+I[12]+3873151461&4294967295,F=E+(L<<11&4294967295|L>>>21),L=O+(F^E^S)+I[15]+530742520&4294967295,O=F+(L<<16&4294967295|L>>>16),L=S+(O^F^E)+I[2]+3299628645&4294967295,S=O+(L<<23&4294967295|L>>>9),L=E+(O^(S|~F))+I[0]+4096336452&4294967295,E=S+(L<<6&4294967295|L>>>26),L=F+(S^(E|~O))+I[7]+1126891415&4294967295,F=E+(L<<10&4294967295|L>>>22),L=O+(E^(F|~S))+I[14]+2878612391&4294967295,O=F+(L<<15&4294967295|L>>>17),L=S+(F^(O|~E))+I[5]+4237533241&4294967295,S=O+(L<<21&4294967295|L>>>11),L=E+(O^(S|~F))+I[12]+1700485571&4294967295,E=S+(L<<6&4294967295|L>>>26),L=F+(S^(E|~O))+I[3]+2399980690&4294967295,F=E+(L<<10&4294967295|L>>>22),L=O+(E^(F|~S))+I[10]+4293915773&4294967295,O=F+(L<<15&4294967295|L>>>17),L=S+(F^(O|~E))+I[1]+2240044497&4294967295,S=O+(L<<21&4294967295|L>>>11),L=E+(O^(S|~F))+I[8]+1873313359&4294967295,E=S+(L<<6&4294967295|L>>>26),L=F+(S^(E|~O))+I[15]+4264355552&4294967295,F=E+(L<<10&4294967295|L>>>22),L=O+(E^(F|~S))+I[6]+2734768916&4294967295,O=F+(L<<15&4294967295|L>>>17),L=S+(F^(O|~E))+I[13]+1309151649&4294967295,S=O+(L<<21&4294967295|L>>>11),L=E+(O^(S|~F))+I[4]+4149444226&4294967295,E=S+(L<<6&4294967295|L>>>26),L=F+(S^(E|~O))+I[11]+3174756917&4294967295,F=E+(L<<10&4294967295|L>>>22),L=O+(E^(F|~S))+I[2]+718787259&4294967295,O=F+(L<<15&4294967295|L>>>17),L=S+(F^(O|~E))+I[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(O+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+F&4294967295}r.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var S=E-this.blockSize,I=this.B,O=this.h,F=0;F<E;){if(O==0)for(;F<=S;)s(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<E;)if(I[O++]=R.charCodeAt(F++),O==this.blockSize){s(this,I),O=0;break}}else for(;F<E;)if(I[O++]=R[F++],O==this.blockSize){s(this,I),O=0;break}}this.h=O,this.o+=E},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var S=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=S&255,S/=256;for(this.u(R),R=Array(16),E=S=0;4>E;++E)for(var I=0;32>I;I+=8)R[S++]=this.g[E]>>>I&255;return R};function o(R,E){var S=u;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=E(R)}function l(R,E){this.h=E;for(var S=[],I=!0,O=R.length-1;0<=O;O--){var F=R[O]|0;I&&F==E||(S[O]=F,I=!1)}this.g=S}var u={};function c(R){return-128<=R&&128>R?o(R,function(E){return new l([E|0],0>E?-1:0)}):new l([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return v;if(0>R)return P(h(-R));for(var E=[],S=1,I=0;R>=S;I++)E[I]=R/S|0,S*=4294967296;return new l(E,0)}function g(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return P(g(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=h(Math.pow(E,8)),I=v,O=0;O<R.length;O+=8){var F=Math.min(8,R.length-O),L=parseInt(R.substring(O,O+F),E);8>F?(F=h(Math.pow(E,F)),I=I.j(F).add(h(L))):(I=I.j(S),I=I.add(h(L)))}return I}var v=c(0),x=c(1),b=c(16777216);t=l.prototype,t.m=function(){if(D(this))return-P(this).m();for(var R=0,E=1,S=0;S<this.g.length;S++){var I=this.i(S);R+=(0<=I?I:4294967296+I)*E,E*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(k(this))return"0";if(D(this))return"-"+P(this).toString(R);for(var E=h(Math.pow(R,6)),S=this,I="";;){var O=z(S,E).g;S=j(S,O.j(E));var F=((0<S.g.length?S.g[0]:S.h)>>>0).toString(R);if(S=O,k(S))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function k(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function D(R){return R.h==-1}t.l=function(R){return R=j(this,R),D(R)?-1:k(R)?0:1};function P(R){for(var E=R.g.length,S=[],I=0;I<E;I++)S[I]=~R.g[I];return new l(S,~R.h).add(x)}t.abs=function(){return D(this)?P(this):this},t.add=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],I=0,O=0;O<=E;O++){var F=I+(this.i(O)&65535)+(R.i(O)&65535),L=(F>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);I=L>>>16,F&=65535,L&=65535,S[O]=L<<16|F}return new l(S,S[S.length-1]&-2147483648?-1:0)};function j(R,E){return R.add(P(E))}t.j=function(R){if(k(this)||k(R))return v;if(D(this))return D(R)?P(this).j(P(R)):P(P(this).j(R));if(D(R))return P(this.j(P(R)));if(0>this.l(b)&&0>R.l(b))return h(this.m()*R.m());for(var E=this.g.length+R.g.length,S=[],I=0;I<2*E;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var O=0;O<R.g.length;O++){var F=this.i(I)>>>16,L=this.i(I)&65535,re=R.i(O)>>>16,pe=R.i(O)&65535;S[2*I+2*O]+=L*pe,V(S,2*I+2*O),S[2*I+2*O+1]+=F*pe,V(S,2*I+2*O+1),S[2*I+2*O+1]+=L*re,V(S,2*I+2*O+1),S[2*I+2*O+2]+=F*re,V(S,2*I+2*O+2)}for(I=0;I<E;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=E;I<2*E;I++)S[I]=0;return new l(S,0)};function V(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function $(R,E){this.g=R,this.h=E}function z(R,E){if(k(E))throw Error("division by zero");if(k(R))return new $(v,v);if(D(R))return E=z(P(R),E),new $(P(E.g),P(E.h));if(D(E))return E=z(R,P(E)),new $(P(E.g),E.h);if(30<R.g.length){if(D(R)||D(E))throw Error("slowDivide_ only works with positive integers.");for(var S=x,I=E;0>=I.l(R);)S=H(S),I=H(I);var O=Y(S,1),F=Y(I,1);for(I=Y(I,2),S=Y(S,2);!k(I);){var L=F.add(I);0>=L.l(R)&&(O=O.add(S),F=L),I=Y(I,1),S=Y(S,1)}return E=j(R,O.j(E)),new $(O,E)}for(O=v;0<=R.l(E);){for(S=Math.max(1,Math.floor(R.m()/E.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=h(S),L=F.j(E);D(L)||0<L.l(R);)S-=I,F=h(S),L=F.j(E);k(F)&&(F=x),O=O.add(F),R=j(R,L)}return new $(O,R)}t.A=function(R){return z(this,R).h},t.and=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)&R.i(I);return new l(S,this.h&R.h)},t.or=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)|R.i(I);return new l(S,this.h|R.h)},t.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),S=[],I=0;I<E;I++)S[I]=this.i(I)^R.i(I);return new l(S,this.h^R.h)};function H(R){for(var E=R.g.length+1,S=[],I=0;I<E;I++)S[I]=R.i(I)<<1|R.i(I-1)>>>31;return new l(S,R.h)}function Y(R,E){var S=E>>5;E%=32;for(var I=R.g.length-S,O=[],F=0;F<I;F++)O[F]=0<E?R.i(F+S)>>>E|R.i(F+S+1)<<32-E:R.i(F+S);return new l(O,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CC=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=g,Si=l}).apply(typeof EE<"u"?EE:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PC,Ku,AC,Lh,_0,IC,RC,NC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,T){return f==Array.prototype||f==Object.prototype||(f[w]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var w=0;w<f.length;++w){var T=f[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(f,w){if(w)e:{var T=r;f=f.split(".");for(var N=0;N<f.length-1;N++){var K=f[N];if(!(K in T))break e;T=T[K]}f=f[f.length-1],N=T[f],w=w(N),w!=N&&w!=null&&e(T,f,{configurable:!0,writable:!0,value:w})}}function o(f,w){f instanceof String&&(f+="");var T=0,N=!1,K={next:function(){if(!N&&T<f.length){var ee=T++;return{value:w(ee,f[ee]),done:!1}}return N=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}s("Array.prototype.values",function(f){return f||function(){return o(this,function(w,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function c(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function h(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function g(f,w,T){return f.call.apply(f.bind,arguments)}function v(f,w,T){if(!f)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,N),f.apply(w,K)}}return function(){return f.apply(w,arguments)}}function x(f,w,T){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,x.apply(null,arguments)}function b(f,w){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),f.apply(this,N)}}function k(f,w){function T(){}T.prototype=w.prototype,f.aa=w.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(N,K,ee){for(var he=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)he[Xe-2]=arguments[Xe];return w.prototype[K].apply(N,he)}}function D(f){const w=f.length;if(0<w){const T=Array(w);for(let N=0;N<w;N++)T[N]=f[N];return T}return[]}function P(f,w){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(c(N)){const K=f.length||0,ee=N.length||0;f.length=K+ee;for(let he=0;he<ee;he++)f[K+he]=N[he]}else f.push(N)}}class j{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function V(f){return/^[\s\xa0]*$/.test(f)}function $(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function z(f){return z[" "](f),f}z[" "]=function(){};var H=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Y(f,w,T){for(const N in f)w.call(T,f[N],N,f)}function R(f,w){for(const T in f)w.call(void 0,f[T],T,f)}function E(f){const w={};for(const T in f)w[T]=f[T];return w}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(f,w){let T,N;for(let K=1;K<arguments.length;K++){N=arguments[K];for(T in N)f[T]=N[T];for(let ee=0;ee<S.length;ee++)T=S[ee],Object.prototype.hasOwnProperty.call(N,T)&&(f[T]=N[T])}}function O(f){var w=1;f=f.split(":");const T=[];for(;0<w&&f.length;)T.push(f.shift()),w--;return f.length&&T.push(f.join(":")),T}function F(f){u.setTimeout(()=>{throw f},0)}function L(){var f=me;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class re{constructor(){this.h=this.g=null}add(w,T){const N=pe.get();N.set(w,T),this.h?this.h.next=N:this.g=N,this.h=N}}var pe=new j(()=>new Me,f=>f.reset());class Me{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,ne=!1,me=new re,fe=()=>{const f=u.Promise.resolve(void 0);_e=()=>{f.then(W)}};var W=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(T){F(T)}var w=pe;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}ne=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};u.addEventListener("test",T,w),u.removeEventListener("test",T,w)}catch{}return f}();function Ae(f,w){if(be.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,N=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(H){e:{try{z(w.nodeName);var K=!0;break e}catch{}K=!1}K||(w=null)}}else T=="mouseover"?w=f.fromElement:T=="mouseout"&&(w=f.toElement);this.relatedTarget=w,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:ie[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Ae.aa.h.call(this)}}k(Ae,be);var ie={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),Q=0;function q(f,w,T,N,K){this.listener=f,this.proxy=null,this.src=w,this.type=T,this.capture=!!N,this.ha=K,this.key=++Q,this.da=this.fa=!1}function Z(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function xe(f){this.src=f,this.g={},this.h=0}xe.prototype.add=function(f,w,T,N,K){var ee=f.toString();f=this.g[ee],f||(f=this.g[ee]=[],this.h++);var he=It(f,w,N,K);return-1<he?(w=f[he],T||(w.fa=!1)):(w=new q(w,this.src,ee,!!N,K),w.fa=T,f.push(w)),w};function Oe(f,w){var T=w.type;if(T in f.g){var N=f.g[T],K=Array.prototype.indexOf.call(N,w,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(N,K,1),ee&&(Z(w),f.g[T].length==0&&(delete f.g[T],f.h--))}}function It(f,w,T,N){for(var K=0;K<f.length;++K){var ee=f[K];if(!ee.da&&ee.listener==w&&ee.capture==!!T&&ee.ha==N)return K}return-1}var Kn="closure_lm_"+(1e6*Math.random()|0),as={};function Fs(f,w,T,N,K){if(Array.isArray(w)){for(var ee=0;ee<w.length;ee++)Fs(f,w[ee],T,N,K);return null}return T=Ul(T),f&&f[oe]?f.K(w,T,h(N)?!!N.capture:!1,K):ls(f,w,T,!1,N,K)}function ls(f,w,T,N,K,ee){if(!w)throw Error("Invalid event type");var he=h(K)?!!K.capture:!!K,Xe=Go(f);if(Xe||(f[Kn]=Xe=new xe(f)),T=Xe.add(w,T,N,he,ee),T.proxy)return T;if(N=Wi(),T.proxy=N,N.src=f,N.listener=T,f.addEventListener)De||(K=he),K===void 0&&(K=!1),f.addEventListener(w.toString(),N,K);else if(f.attachEvent)f.attachEvent(us(w.toString()),N);else if(f.addListener&&f.removeListener)f.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Wi(){function f(T){return w.call(f.src,f.listener,T)}const w=Fl;return f}function Rt(f,w,T,N,K){if(Array.isArray(w))for(var ee=0;ee<w.length;ee++)Rt(f,w[ee],T,N,K);else N=h(N)?!!N.capture:!!N,T=Ul(T),f&&f[oe]?(f=f.i,w=String(w).toString(),w in f.g&&(ee=f.g[w],T=It(ee,T,N,K),-1<T&&(Z(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete f.g[w],f.h--)))):f&&(f=Go(f))&&(w=f.g[w.toString()],f=-1,w&&(f=It(w,T,N,K)),(T=-1<f?w[f]:null)&&On(T))}function On(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[oe])Oe(w.i,f);else{var T=f.type,N=f.proxy;w.removeEventListener?w.removeEventListener(T,N,f.capture):w.detachEvent?w.detachEvent(us(T),N):w.addListener&&w.removeListener&&w.removeListener(N),(T=Go(w))?(Oe(T,f),T.h==0&&(T.src=null,w[Kn]=null)):Z(f)}}}function us(f){return f in as?as[f]:as[f]="on"+f}function Fl(f,w){if(f.da)f=!0;else{w=new Ae(w,this);var T=f.listener,N=f.ha||f.src;f.fa&&On(f),f=T.call(N,w)}return f}function Go(f){return f=f[Kn],f instanceof xe?f:null}var Qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ul(f){return typeof f=="function"?f:(f[Qo]||(f[Qo]=function(w){return f.handleEvent(w)}),f[Qo])}function Nt(){te.call(this),this.i=new xe(this),this.M=this,this.F=null}k(Nt,te),Nt.prototype[oe]=!0,Nt.prototype.removeEventListener=function(f,w,T,N){Rt(this,f,w,T,N)};function jt(f,w){var T,N=f.F;if(N)for(T=[];N;N=N.F)T.push(N);if(f=f.M,N=w.type||w,typeof w=="string")w=new be(w,f);else if(w instanceof be)w.target=w.target||f;else{var K=w;w=new be(N,f),I(w,K)}if(K=!0,T)for(var ee=T.length-1;0<=ee;ee--){var he=w.g=T[ee];K=cs(he,N,!0,w)&&K}if(he=w.g=f,K=cs(he,N,!0,w)&&K,K=cs(he,N,!1,w)&&K,T)for(ee=0;ee<T.length;ee++)he=w.g=T[ee],K=cs(he,N,!1,w)&&K}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var T=f.g[w],N=0;N<T.length;N++)Z(T[N]);delete f.g[w],f.h--}}this.F=null},Nt.prototype.K=function(f,w,T,N){return this.i.add(String(f),w,!1,T,N)},Nt.prototype.L=function(f,w,T,N){return this.i.add(String(f),w,!0,T,N)};function cs(f,w,T,N){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var K=!0,ee=0;ee<w.length;++ee){var he=w[ee];if(he&&!he.da&&he.capture==T){var Xe=he.listener,Dt=he.ha||he.src;he.fa&&Oe(f.i,he),K=Xe.call(Dt,N)!==!1&&K}}return K&&!N.defaultPrevented}function Bl(f,w,T){if(typeof f=="function")T&&(f=x(f,T));else if(f&&typeof f.handleEvent=="function")f=x(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:u.setTimeout(f,w||0)}function Us(f){f.g=Bl(()=>{f.g=null,f.i&&(f.i=!1,Us(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class Hi extends te{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Us(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(f){te.call(this),this.h=f,this.g={}}k(qi,te);var zl=[];function Wl(f){Y(f.g,function(w,T){this.g.hasOwnProperty(T)&&On(w)},f),f.g={}}qi.prototype.N=function(){qi.aa.N.call(this),Wl(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hl=u.JSON.stringify,ql=u.JSON.parse,Kl=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function Ki(){}Ki.prototype.h=null;function Jo(f){return f.h||(f.h=f.i())}function Yo(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Or(){be.call(this,"d")}k(Or,be);function Xo(){be.call(this,"c")}k(Xo,be);var Lr={},Gl=null;function Gi(){return Gl=Gl||new Nt}Lr.La="serverreachability";function Ql(f){be.call(this,Lr.La,f)}k(Ql,be);function ds(f){const w=Gi();jt(w,new Ql(w))}Lr.STAT_EVENT="statevent";function Jl(f,w){be.call(this,Lr.STAT_EVENT,f),this.stat=w}k(Jl,be);function Et(f){const w=Gi();jt(w,new Jl(w,f))}Lr.Ma="timingevent";function Zo(f,w){be.call(this,Lr.Ma,f),this.size=w}k(Zo,be);function hr(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},w)}function Qi(){this.g=!0}Qi.prototype.xa=function(){this.g=!1};function Ji(f,w,T,N,K,ee){f.info(function(){if(f.g)if(ee)for(var he="",Xe=ee.split("&"),Dt=0;Dt<Xe.length;Dt++){var qe=Xe[Dt].split("=");if(1<qe.length){var Ft=qe[0];qe=qe[1];var Ct=Ft.split("_");he=2<=Ct.length&&Ct[1]=="type"?he+(Ft+"="+qe+"&"):he+(Ft+"=redacted&")}}else he=null;else he=ee;return"XMLHTTP REQ ("+N+") [attempt "+K+"]: "+w+`
`+T+`
`+he})}function ea(f,w,T,N,K,ee,he){f.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+K+"]: "+w+`
`+T+`
`+ee+" "+he})}function fr(f,w,T,N){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+pp(f,T)+(N?" "+N:"")})}function Yl(f,w){f.info(function(){return"TIMEOUT: "+w})}Qi.prototype.info=function(){};function pp(f,w){if(!f.g)return w;if(!w)return null;try{var T=JSON.parse(w);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var N=T[f];if(!(2>N.length)){var K=N[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return Hl(T)}catch{return w}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pr;function Yi(){}k(Yi,Ki),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},pr=new Yi;function mr(f,w,T,N){this.j=f,this.i=w,this.l=T,this.R=N||1,this.U=new qi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jc}function Jc(){this.i=null,this.g="",this.h=!1}var Xl={},na={};function ra(f,w,T){f.L=1,f.v=qs(Mn(w)),f.m=T,f.P=!0,Zl(f,null)}function Zl(f,w){f.F=Date.now(),nt(f),f.A=Mn(f.v);var T=f.A,N=f.R;Array.isArray(N)||(N=[String(N)]),Gs(T.i,"t",N),f.C=0,T=f.j.J,f.h=new Jc,f.g=pd(f.j,T?w:null,!f.m),0<f.O&&(f.M=new Hi(x(f.Y,f,f.g),f.O)),w=f.U,T=f.g,N=f.ca;var K="readystatechange";Array.isArray(K)||(K&&(zl[0]=K.toString()),K=zl);for(var ee=0;ee<K.length;ee++){var he=Fs(T,K[ee],N||w.handleEvent,!1,w.h||w);if(!he)break;w.g[he.key]=he}w=f.H?E(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),ds(),Ji(f.i,f.u,f.A,f.l,f.R,f.m)}mr.prototype.ca=function(f){f=f.target;const w=this.M;w&&bn(f)==3?w.j():this.Y(f)},mr.prototype.Y=function(f){try{if(f==this.g)e:{const Ct=bn(this.g);var w=this.g.Ba();const Yn=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||iu(this.g)))){this.J||Ct!=4||w==7||(w==8||0>=Yn?ds(3):ds(2)),Xi(this);var T=this.g.Z();this.X=T;t:if(Yc(this)){var N=iu(this.g);f="";var K=N.length,ee=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),Bs(this);var he="";break t}this.h.i=new u.TextDecoder}for(w=0;w<K;w++)this.h.h=!0,f+=this.h.i.decode(N[w],{stream:!(ee&&w==K-1)});N.length=0,this.h.g+=f,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=T==200,ea(this.i,this.u,this.A,this.l,this.R,Ct,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,Dt=this.g;if((Xe=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Xe)){var qe=Xe;break t}}qe=null}if(T=qe)fr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eu(this,T);else{this.o=!1,this.s=3,Et(12),Qn(this),Bs(this);break e}}if(this.P){T=!0;let $n;for(;!this.J&&this.C<he.length;)if($n=mp(this,he),$n==na){Ct==4&&(this.s=4,Et(14),T=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if($n==Xl){this.s=4,Et(15),fr(this.i,this.l,he,"[Invalid Chunk]"),T=!1;break}else fr(this.i,this.l,$n,null),eu(this,$n);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||he.length!=0||this.h.h||(this.s=1,Et(16),T=!1),this.o=this.o&&T,!T)fr(this.i,this.l,he,"[Invalid Chunked Response]"),Qn(this),Bs(this);else if(0<he.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),au(Ft),Ft.M=!0,Et(11))}}else fr(this.i,this.l,he,null),eu(this,he);Ct==4&&Qn(this),this.o&&!this.J&&(Ct==4?pa(this.j,this):(this.o=!1,nt(this)))}else ua(this.g),T==400&&0<he.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),Qn(this),Bs(this)}}}catch{}finally{}};function Yc(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function mp(f,w){var T=f.C,N=w.indexOf(`
`,T);return N==-1?na:(T=Number(w.substring(T,N)),isNaN(T)?Xl:(N+=1,N+T>w.length?na:(w=w.slice(N,N+T),f.C=N+T,w)))}mr.prototype.cancel=function(){this.J=!0,Qn(this)};function nt(f){f.S=Date.now()+f.I,Xc(f,f.I)}function Xc(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=hr(x(f.ba,f),w)}function Xi(f){f.B&&(u.clearTimeout(f.B),f.B=null)}mr.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Yl(this.i,this.A),this.L!=2&&(ds(),Et(17)),Qn(this),this.s=2,Bs(this)):Xc(this,this.S-f)};function Bs(f){f.j.G==0||f.J||pa(f.j,f)}function Qn(f){Xi(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,Wl(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function eu(f,w){try{var T=f.j;if(T.G!=0&&(T.g==f||mn(T.h,f))){if(!f.K&&mn(T.h,f)&&T.G==3){try{var N=T.Da.g.parse(w)}catch{N=null}if(Array.isArray(N)&&N.length==3){var K=N;if(K[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)fa(T),wr(T);else break e;ha(T),Et(18)}}else T.za=K[1],0<T.za-T.T&&37500>K[2]&&T.F&&T.v==0&&!T.C&&(T.C=hr(x(T.Za,T),6e3));if(1>=ed(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else gs(T,11)}else if((f.K||T.g==f)&&fa(T),!V(w))for(K=T.Da.g.parse(w),w=0;w<K.length;w++){let qe=K[w];if(T.T=qe[0],qe=qe[1],T.G==2)if(qe[0]=="c"){T.K=qe[1],T.ia=qe[2];const Ft=qe[3];Ft!=null&&(T.la=Ft,T.j.info("VER="+T.la));const Ct=qe[4];Ct!=null&&(T.Aa=Ct,T.j.info("SVER="+T.Aa));const Yn=qe[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(N=1.5*Yn,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const $n=f.g;if($n){const io=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var ee=N.h;ee.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(tu(ee,ee.h),ee.h=null))}if(N.D){const ga=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;ga&&(N.ya=ga,et(N.I,N.D,ga))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var he=f;if(N.qa=fd(N,N.J?N.ia:null,N.W),he.K){td(N.h,he);var Xe=he,Dt=N.L;Dt&&(Xe.I=Dt),Xe.B&&(Xi(Xe),nt(Xe)),N.g=he}else so(N);0<T.i.length&&Fr(T)}else qe[0]!="stop"&&qe[0]!="close"||gs(T,7);else T.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?gs(T,7):Qt(T):qe[0]!="noop"&&T.l&&T.l.ta(qe),T.v=0)}}ds(4)}catch{}}var Zc=class{constructor(f,w){this.g=f,this.map=w}};function Zi(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ln(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ed(f){return f.h?1:f.g?f.g.size:0}function mn(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function tu(f,w){f.g?f.g.add(w):f.h=w}function td(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}Zi.prototype.cancel=function(){if(this.i=nd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function nd(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const T of f.g.values())w=w.concat(T.D);return w}return D(f.i)}function sa(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var w=[],T=f.length,N=0;N<T;N++)w.push(f[N]);return w}w=[],T=0;for(N in f)w[T++]=f[N];return w}function ia(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var w=[];f=f.length;for(var T=0;T<f;T++)w.push(T);return w}w=[],T=0;for(const N in f)w[T++]=N;return w}}}function zs(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var T=ia(f),N=sa(f),K=N.length,ee=0;ee<K;ee++)w.call(void 0,N[ee],T&&T[ee],f)}var eo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gp(f,w){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var N=f[T].indexOf("="),K=null;if(0<=N){var ee=f[T].substring(0,N);K=f[T].substring(N+1)}else ee=f[T];w(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function hs(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof hs){this.h=f.h,to(this,f.j),this.o=f.o,this.g=f.g,Ws(this,f.s),this.l=f.l;var w=f.i,T=new Mr;T.i=w.i,w.g&&(T.g=new Map(w.g),T.h=w.h),Hs(this,T),this.m=f.m}else f&&(w=String(f).match(eo))?(this.h=!1,to(this,w[1]||"",!0),this.o=He(w[2]||""),this.g=He(w[3]||"",!0),Ws(this,w[4]),this.l=He(w[5]||"",!0),Hs(this,w[6]||"",!0),this.m=He(w[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}hs.prototype.toString=function(){var f=[],w=this.j;w&&f.push(Ks(w,oa,!0),":");var T=this.g;return(T||w=="file")&&(f.push("//"),(w=this.o)&&f.push(Ks(w,oa,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(Ks(T,T.charAt(0)=="/"?id:sd,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",Ks(T,nu)),f.join("")};function Mn(f){return new hs(f)}function to(f,w,T){f.j=T?He(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function Ws(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Hs(f,w,T){w instanceof Mr?(f.i=w,Vr(f.i,f.h)):(T||(w=Ks(w,od)),f.i=new Mr(w,f.h))}function et(f,w,T){f.i.set(w,T)}function qs(f){return et(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function He(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ks(f,w,T){return typeof f=="string"?(f=encodeURI(f).replace(w,rd),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function rd(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var oa=/[#\/\?@]/g,sd=/[#\?:]/g,id=/[#\?]/g,od=/[#\?@]/g,nu=/#/g;function Mr(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Gt(f){f.g||(f.g=new Map,f.h=0,f.i&&gp(f.i,function(w,T){f.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}t=Mr.prototype,t.add=function(f,w){Gt(this),this.i=null,f=Jn(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(w),this.h+=1,this};function gr(f,w){Gt(f),w=Jn(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function yr(f,w){return Gt(f),w=Jn(f,w),f.g.has(w)}t.forEach=function(f,w){Gt(this),this.g.forEach(function(T,N){T.forEach(function(K){f.call(w,K,N,this)},this)},this)},t.na=function(){Gt(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),T=[];for(let N=0;N<w.length;N++){const K=f[N];for(let ee=0;ee<K.length;ee++)T.push(w[N])}return T},t.V=function(f){Gt(this);let w=[];if(typeof f=="string")yr(this,f)&&(w=w.concat(this.g.get(Jn(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)w=w.concat(f[T])}return w},t.set=function(f,w){return Gt(this),this.i=null,f=Jn(this,f),yr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},t.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Gs(f,w,T){gr(f,w),0<T.length&&(f.i=null,f.g.set(Jn(f,w),D(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var T=0;T<w.length;T++){var N=w[T];const ee=encodeURIComponent(String(N)),he=this.V(N);for(N=0;N<he.length;N++){var K=ee;he[N]!==""&&(K+="="+encodeURIComponent(String(he[N]))),f.push(K)}}return this.i=f.join("&")};function Jn(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Vr(f,w){w&&!f.j&&(Gt(f),f.i=null,f.g.forEach(function(T,N){var K=N.toLowerCase();N!=K&&(gr(this,N),Gs(this,K,T))},f)),f.j=w}function yp(f,w){const T=new Qi;if(u.Image){const N=new Image;N.onload=b(_n,T,"TestLoadImage: loaded",!0,w,N),N.onerror=b(_n,T,"TestLoadImage: error",!1,w,N),N.onabort=b(_n,T,"TestLoadImage: abort",!1,w,N),N.ontimeout=b(_n,T,"TestLoadImage: timeout",!1,w,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=f}else w(!1)}function ad(f,w){const T=new Qi,N=new AbortController,K=setTimeout(()=>{N.abort(),_n(T,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:N.signal}).then(ee=>{clearTimeout(K),ee.ok?_n(T,"TestPingServer: ok",!0,w):_n(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(K),_n(T,"TestPingServer: error",!1,w)})}function _n(f,w,T,N,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),N(T)}catch{}}function vp(){this.g=new Kl}function ld(f,w,T){const N=T||"";try{zs(f,function(K,ee){let he=K;h(K)&&(he=Hl(K)),w.push(N+ee+"="+encodeURIComponent(he))})}catch(K){throw w.push(N+"type="+encodeURIComponent("_badmap")),K}}function fs(f){this.l=f.Ub||null,this.j=f.eb||!1}k(fs,Ki),fs.prototype.g=function(){return new no(this.l,this.j)},fs.prototype.i=function(f){return function(){return f}}({});function no(f,w){Nt.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(no,Nt),t=no.prototype,t.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,xr(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||u).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vr(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,xr(this)),this.g&&(this.readyState=3,xr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ud(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ud(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?vr(this):xr(this),this.readyState==3&&ud(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,vr(this))},t.Qa=function(f){this.g&&(this.response=f,vr(this))},t.ga=function(){this.g&&vr(this)};function vr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,xr(f)}t.setRequestHeader=function(f,w){this.u.append(f,w)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=w.next();return f.join(`\r
`)};function xr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ps(f){let w="";return Y(f,function(T,N){w+=N,w+=":",w+=T,w+=`\r
`}),w}function Qs(f,w,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=ps(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):et(f,w,T))}function ut(f){Nt.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ut,Nt);var xp=/^https?$/i,ru=["POST","PUT"];t=ut.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,w,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pr.g(),this.v=this.o?Jo(this.o):Jo(pr),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(ee){ro(this,ee);return}if(f=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var K in N)T.set(K,N[K]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ee of N.keys())T.set(ee,N.get(ee));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ru,w,void 0))||N||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,he]of T)this.g.setRequestHeader(ee,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{la(this),this.u=!0,this.g.send(f),this.u=!1}catch(ee){ro(this,ee)}};function ro(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,aa(f),Vn(f)}function aa(f){f.A||(f.A=!0,jt(f,"complete"),jt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,jt(this,"complete"),jt(this,"abort"),Vn(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vn(this,!0)),ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?su(this):this.bb())},t.bb=function(){su(this)};function su(f){if(f.h&&typeof l<"u"&&(!f.v[1]||bn(f)!=4||f.Z()!=2)){if(f.u&&bn(f)==4)Bl(f.Ea,0,f);else if(jt(f,"readystatechange"),bn(f)==4){f.h=!1;try{const he=f.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var N;if(N=he===0){var K=String(f.D).match(eo)[1]||null;!K&&u.self&&u.self.location&&(K=u.self.location.protocol.slice(0,-1)),N=!xp.test(K?K.toLowerCase():"")}T=N}if(T)jt(f,"complete"),jt(f,"success");else{f.m=6;try{var ee=2<bn(f)?f.g.statusText:""}catch{ee=""}f.l=ee+" ["+f.Z()+"]",aa(f)}}finally{Vn(f)}}}}function Vn(f,w){if(f.g){la(f);const T=f.g,N=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||jt(f,"ready");try{T.onreadystatechange=N}catch{}}}function la(f){f.I&&(u.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function bn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),ql(w)}};function iu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ua(f){const w={};f=(f.g&&2<=bn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<f.length;N++){if(V(f[N]))continue;var T=O(f[N]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=w[K]||[];w[K]=ee,ee.push(T)}R(w,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(f,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||w}function ou(f){this.Aa=0,this.i=[],this.j=new Qi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,f),this.cb=$r("retryDelaySeedMs",1e4,f),this.Wa=$r("forwardChannelMaxRetries",2,f),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Zi(f&&f.concurrentRequestLimit),this.Da=new vp,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ou.prototype,t.la=8,t.G=1,t.connect=function(f,w,T,N){Et(0),this.W=f,this.H=w||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=fd(this,null,this.W),Fr(this)};function Qt(f){if(ca(f),f.G==3){var w=f.U++,T=Mn(f.I);if(et(T,"SID",f.K),et(T,"RID",w),et(T,"TYPE","terminate"),ms(f,T),w=new mr(f,f.j,w),w.L=2,w.v=qs(Mn(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(w.v.toString(),"")}catch{}!T&&u.Image&&(new Image().src=w.v,T=!0),T||(w.g=pd(w.j,null),w.g.ea(w.v)),w.F=Date.now(),nt(w)}hd(f)}function wr(f){f.g&&(au(f),f.g.cancel(),f.g=null)}function ca(f){wr(f),f.u&&(u.clearTimeout(f.u),f.u=null),fa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function Fr(f){if(!Ln(f.h)&&!f.s){f.s=!0;var w=f.Ga;_e||fe(),ne||(_e(),ne=!0),me.add(w,f),f.B=0}}function wp(f,w){return ed(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=hr(x(f.Ga,f,w),dd(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const K=new mr(this,this.j,f);let ee=this.o;if(this.S&&(ee?(ee=E(ee),I(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(w+=N,4096<w){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Js(this,K,w),T=Mn(this.I),et(T,"RID",f),et(T,"CVER",22),this.D&&et(T,"X-HTTP-Session-Id",this.D),ms(this,T),ee&&(this.O?w="headers="+encodeURIComponent(String(ps(ee)))+"&"+w:this.m&&Qs(T,this.m,ee)),tu(this.h,K),this.Ua&&et(T,"TYPE","init"),this.P?(et(T,"$req",w),et(T,"SID","null"),K.T=!0,ra(K,T,null)):ra(K,T,w),this.G=2}}else this.G==3&&(f?da(this,f):this.i.length==0||Ln(this.h)||da(this))};function da(f,w){var T;w?T=w.l:T=f.U++;const N=Mn(f.I);et(N,"SID",f.K),et(N,"RID",T),et(N,"AID",f.T),ms(f,N),f.m&&f.o&&Qs(N,f.m,f.o),T=new mr(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),w&&(f.i=w.D.concat(f.i)),w=Js(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),tu(f.h,T),ra(T,N,w)}function ms(f,w){f.H&&Y(f.H,function(T,N){et(w,N,T)}),f.l&&zs({},function(T,N){et(w,N,T)})}function Js(f,w,T){T=Math.min(f.i.length,T);var N=f.l?x(f.l.Na,f.l,f):null;e:{var K=f.i;let ee=-1;for(;;){const he=["count="+T];ee==-1?0<T?(ee=K[0].g,he.push("ofs="+ee)):ee=0:he.push("ofs="+ee);let Xe=!0;for(let Dt=0;Dt<T;Dt++){let qe=K[Dt].g;const Ft=K[Dt].map;if(qe-=ee,0>qe)ee=Math.max(0,K[Dt].g-100),Xe=!1;else try{ld(Ft,he,"req"+qe+"_")}catch{N&&N(Ft)}}if(Xe){N=he.join("&");break e}}}return f=f.i.splice(0,T),w.D=f,N}function so(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;_e||fe(),ne||(_e(),ne=!0),me.add(w,f),f.v=0}}function ha(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=hr(x(f.Fa,f),dd(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,cd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=hr(x(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),wr(this),cd(this))};function au(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function cd(f){f.g=new mr(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=Mn(f.qa);et(w,"RID","rpc"),et(w,"SID",f.K),et(w,"AID",f.T),et(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&et(w,"TO",f.ja),et(w,"TYPE","xmlhttp"),ms(f,w),f.m&&f.o&&Qs(w,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=qs(Mn(w)),T.m=null,T.P=!0,Zl(T,f)}t.Za=function(){this.C!=null&&(this.C=null,wr(this),ha(this),Et(19))};function fa(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function pa(f,w){var T=null;if(f.g==w){fa(f),au(f),f.g=null;var N=2}else if(mn(f.h,w))T=w.D,td(f.h,w),N=1;else return;if(f.G!=0){if(w.o)if(N==1){T=w.m?w.m.length:0,w=Date.now()-w.F;var K=f.B;N=Gi(),jt(N,new Zo(N,T)),Fr(f)}else so(f);else if(K=w.s,K==3||K==0&&0<w.X||!(N==1&&wp(f,w)||N==2&&ha(f)))switch(T&&0<T.length&&(w=f.h,w.i=w.i.concat(T)),K){case 1:gs(f,5);break;case 4:gs(f,10);break;case 3:gs(f,6);break;default:gs(f,2)}}}function dd(f,w){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*w}function gs(f,w){if(f.j.info("Error code "+w),w==2){var T=x(f.fb,f),N=f.Xa;const K=!N;N=new hs(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||to(N,"https"),qs(N),K?yp(N.toString(),T):ad(N.toString(),T)}else Et(2);f.G=0,f.l&&f.l.sa(w),hd(f),ca(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function hd(f){if(f.G=0,f.ka=[],f.l){const w=nd(f.h);(w.length!=0||f.i.length!=0)&&(P(f.ka,w),P(f.ka,f.i),f.h.i.length=0,D(f.i),f.i.length=0),f.l.ra()}}function fd(f,w,T){var N=T instanceof hs?Mn(T):new hs(T);if(N.g!="")w&&(N.g=w+"."+N.g),Ws(N,N.s);else{var K=u.location;N=K.protocol,w=w?w+"."+K.hostname:K.hostname,K=+K.port;var ee=new hs(null);N&&to(ee,N),w&&(ee.g=w),K&&Ws(ee,K),T&&(ee.l=T),N=ee}return T=f.D,w=f.ya,T&&w&&et(N,T,w),et(N,"VER",f.la),ms(f,N),N}function pd(f,w,T){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new ut(new fs({eb:T})):new ut(f.pa),w.Ha(f.J),w}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lu(){}t=lu.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ma(){}ma.prototype.g=function(f,w){return new gn(f,w)};function gn(f,w){Nt.call(this),this.g=new ou(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!V(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!V(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new Ur(this)}k(gn,Nt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=Hl(f),f=T);w.i.push(new Zc(w.Ya++,f)),w.G==3&&Fr(w)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)};function md(f){Or.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const T in w){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}k(md,Or);function gd(){Xo.call(this),this.status=1}k(gd,Xo);function Ur(f){this.g=f}k(Ur,lu),Ur.prototype.ua=function(){jt(this.g,"a")},Ur.prototype.ta=function(f){jt(this.g,new md(f))},Ur.prototype.sa=function(f){jt(this.g,new gd)},Ur.prototype.ra=function(){jt(this.g,"b")},ma.prototype.createWebChannel=ma.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,NC=function(){return new ma},RC=function(){return Gi()},IC=Lr,_0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Lh=ta,Qc.COMPLETE="complete",AC=Qc,Yo.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Ku=Yo,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,PC=ut}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const TE="@firebase/firestore",SE="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jl="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Uy("@firebase/firestore");function Qa(){return Lo.logLevel}function ye(t,...e){if(Lo.logLevel<=ze.DEBUG){const n=e.map(Hy);Lo.debug(`Firestore (${jl}): ${t}`,...n)}}function Os(t,...e){if(Lo.logLevel<=ze.ERROR){const n=e.map(Hy);Lo.error(`Firestore (${jl}): ${t}`,...n)}}function vl(t,...e){if(Lo.logLevel<=ze.WARN){const n=e.map(Hy);Lo.warn(`Firestore (${jl}): ${t}`,...n)}}function Hy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t="Unexpected state"){const e=`FIRESTORE (${jl}) INTERNAL ASSERTION FAILED: `+t;throw Os(e),new Error(e)}function Ye(t,e){t||Ne()}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class g${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class y${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class v${constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Rs,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Rs)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string"),new jC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new dn(e)}}class x${constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class w${constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new x$(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _${constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ar(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0);const r=o=>{o.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ye("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new kE(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string"),this.R=n.token,new kE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=b$(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function b0(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Fe(r,s);{const o=DC(),l=E$(o.encode(CE(t,n)),o.encode(CE(e,n)));return l!==0?l:Fe(r,s)}}n+=r>65535?2:1}return Fe(t.length,e.length)}function CE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function E$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Fe(t[n],e[n]);return Fe(t.length,e.length)}function xl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=-62135596800,AE=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*AE);return new Vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<PE)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AE}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-PE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Vt(0,0))}static max(){return new Le(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__name__";class Kr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ne(),r===void 0?r=e.length-n:r>e.length-n&&Ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Kr.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Fe(e.length,n.length)}static compareSegments(e,n){const r=Kr.isNumericId(e),s=Kr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Kr.extractNumericId(e).compare(Kr.extractNumericId(n)):b0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Si.fromString(e.substring(4,e.length-2))}}class dt extends Kr{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const T$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Kr{construct(e,n,r){return new tn(e,n,r)}static isValidIdentifier(e){return T$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IE}static keyField(){return new tn([IE])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Se(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new Se(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Se(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(l=!l,s++):u!=="."||l?(r+=u,s++):(o(),s++)}if(o(),l)throw new Se(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(n)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.path=e}static fromPath(e){return new Pe(dt.fromString(e))}static fromName(e){return new Pe(dt.fromString(e).popFirst(5))}static empty(){return new Pe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pe(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=-1;function S$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new Ni(s,Pe.empty(),e)}function k$(t){return new Ni(t.readTime,t.key,bc)}class Ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ni(Le.min(),Pe.empty(),bc)}static max(){return new Ni(Le.max(),Pe.empty(),bc)}}function C$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Pe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dl(t){if(t.code!==ue.FAILED_PRECONDITION||t.message!==P$)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,r)=>{n(e)})}static reject(e){return new se((n,r)=>{r(e)})}static waitFor(e){return new se((n,r)=>{let s=0,o=0,l=!1;e.forEach(u=>{++s,u.next(()=>{++o,l&&o===s&&n()},c=>r(c))}),l=!0,o===s&&n()})}static or(e){let n=se.resolve(!1);for(const r of e)n=n.next(s=>s?se.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new se((r,s)=>{const o=e.length,l=new Array(o);let u=0;for(let c=0;c<o;c++){const h=c;n(e[h]).next(g=>{l[h]=g,++u,u===o&&r(l)},g=>s(g))}})}static doWhile(e,n){return new se((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function I$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Uf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=-1;function Bf(t){return t==null}function cf(t){return t===0&&1/t==-1/0}function R$(t){return typeof t=="number"&&Number.isInteger(t)&&!cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="";function N$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=RE(e)),e=j$(t.get(n),e);return RE(e)}function j$(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case LC:n+="";break;default:n+=o}}return n}function RE(t){return t+LC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eh(this.root,e,this.comparator,!0)}}class Eh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=s??Zt.EMPTY,this.right=o??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Zt(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,n,r,s,o){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jE(this.data.getIterator())}getIteratorFrom(e){return new jE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $t(this.comparator);return n.data=e,n}}class jE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new $t(tn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new VC("Invalid base64 string: "+o):o}}(e);return new nn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const D$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(Ye(!!t),typeof t=="string"){let e=0;const n=D$.exec(t);if(Ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:kt(t.seconds),nanos:kt(t.nanos)}}function kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Di(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="server_timestamp",FC="__type__",UC="__previous_value__",BC="__local_write_time__";function Ky(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[FC])===null||n===void 0?void 0:n.stringValue)===$C}function zf(t){const e=t.mapValue.fields[UC];return Ky(e)?zf(e):e}function Ec(t){const e=ji(t.mapValue.fields[BC].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n,r,s,o,l,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=h}}const df="(default)";class Tc{constructor(e,n){this.projectId=e,this.database=n||df}static empty(){return new Tc("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__type__",L$="__max__",Th={mapValue:{}},WC="__vector__",hf="value";function Oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ky(t)?4:V$(t)?9007199254740991:M$(t)?10:11:Ne()}function ss(t,e){if(t===e)return!0;const n=Oi(t);if(n!==Oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ec(t).isEqual(Ec(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=ji(s.timestampValue),u=ji(o.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Di(s.bytesValue).isEqual(Di(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return kt(s.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return kt(s.integerValue)===kt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=kt(s.doubleValue),u=kt(o.doubleValue);return l===u?cf(l)===cf(u):isNaN(l)&&isNaN(u)}return!1}(t,e);case 9:return xl(t.arrayValue.values||[],e.arrayValue.values||[],ss);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},u=o.mapValue.fields||{};if(NE(l)!==NE(u))return!1;for(const c in l)if(l.hasOwnProperty(c)&&(u[c]===void 0||!ss(l[c],u[c])))return!1;return!0}(t,e);default:return Ne()}}function Sc(t,e){return(t.values||[]).find(n=>ss(n,e))!==void 0}function wl(t,e){if(t===e)return 0;const n=Oi(t),r=Oi(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(o,l){const u=kt(o.integerValue||o.doubleValue),c=kt(l.integerValue||l.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return DE(t.timestampValue,e.timestampValue);case 4:return DE(Ec(t),Ec(e));case 5:return b0(t.stringValue,e.stringValue);case 6:return function(o,l){const u=Di(o),c=Di(l);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const u=o.split("/"),c=l.split("/");for(let h=0;h<u.length&&h<c.length;h++){const g=Fe(u[h],c[h]);if(g!==0)return g}return Fe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const u=Fe(kt(o.latitude),kt(l.latitude));return u!==0?u:Fe(kt(o.longitude),kt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OE(t.arrayValue,e.arrayValue);case 10:return function(o,l){var u,c,h,g;const v=o.fields||{},x=l.fields||{},b=(u=v[hf])===null||u===void 0?void 0:u.arrayValue,k=(c=x[hf])===null||c===void 0?void 0:c.arrayValue,D=Fe(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((g=k==null?void 0:k.values)===null||g===void 0?void 0:g.length)||0);return D!==0?D:OE(b,k)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===Th.mapValue&&l===Th.mapValue)return 0;if(o===Th.mapValue)return 1;if(l===Th.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),h=l.fields||{},g=Object.keys(h);c.sort(),g.sort();for(let v=0;v<c.length&&v<g.length;++v){const x=b0(c[v],g[v]);if(x!==0)return x;const b=wl(u[c[v]],h[g[v]]);if(b!==0)return b}return Fe(c.length,g.length)}(t.mapValue,e.mapValue);default:throw Ne()}}function DE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=ji(t),r=ji(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function OE(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=wl(n[s],r[s]);if(o)return o}return Fe(n.length,r.length)}function _l(t){return E0(t)}function E0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Di(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=E0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${E0(n.fields[l])}`;return s+"}"}(t.mapValue):Ne()}function Mh(t){switch(Oi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zf(t);return e?16+Mh(e):16;case 5:return 2*t.stringValue.length;case 6:return Di(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+Mh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ui(r.fields,(o,l)=>{s+=o.length+Mh(l)}),s}(t.mapValue);default:throw Ne()}}function T0(t){return!!t&&"integerValue"in t}function Gy(t){return!!t&&"arrayValue"in t}function LE(t){return!!t&&"nullValue"in t}function ME(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vh(t){return!!t&&"mapValue"in t}function M$(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||n===void 0?void 0:n.stringValue)===WC}function sc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function V$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===L$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=tn.emptyPath(),r={},s=[];e.forEach((l,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}l?r[u.lastSegment()]=sc(l):s.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ss(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Vh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Nn(sc(this.value))}}function HC(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new tn([n]);if(Vh(r)){const o=HC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n,r,s,o,l,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=u}static newInvalidDocument(e){return new hn(e,0,Le.min(),Le.min(),Le.min(),Nn.empty(),0)}static newFoundDocument(e,n,r,s){return new hn(e,1,n,Le.min(),r,s,0)}static newNoDocument(e,n){return new hn(e,2,n,Le.min(),Le.min(),Nn.empty(),0)}static newUnknownDocument(e,n){return new hn(e,3,n,Le.min(),Le.min(),Nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.position=e,this.inclusive=n}}function VE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?r=Pe.comparator(Pe.fromName(l.referenceValue),n.key):r=wl(l,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $E(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ss(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n="asc"){this.field=e,this.dir=n}}function $$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{}class Mt extends qC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new U$(e,n,r):n==="array-contains"?new W$(e,r):n==="in"?new H$(e,r):n==="not-in"?new q$(e,r):n==="array-contains-any"?new K$(e,r):new Mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B$(e,r):new z$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wl(n,this.value)):n!==null&&Oi(this.value)===Oi(n)&&this.matchesComparison(wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class is extends qC{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new is(e,n)}matches(e){return KC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function KC(t){return t.op==="and"}function GC(t){return F$(t)&&KC(t)}function F$(t){for(const e of t.filters)if(e instanceof is)return!1;return!0}function S0(t){if(t instanceof Mt)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(GC(t))return t.filters.map(e=>S0(e)).join(",");{const e=t.filters.map(n=>S0(n)).join(",");return`${t.op}(${e})`}}function QC(t,e){return t instanceof Mt?function(r,s){return s instanceof Mt&&r.op===s.op&&r.field.isEqual(s.field)&&ss(r.value,s.value)}(t,e):t instanceof is?function(r,s){return s instanceof is&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,l,u)=>o&&QC(l,s.filters[u]),!0):!1}(t,e):void Ne()}function JC(t){return t instanceof Mt?function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`}(t):t instanceof is?function(n){return n.op.toString()+" {"+n.getFilters().map(JC).join(" ,")+"}"}(t):"Filter"}class U$ extends Mt{constructor(e,n,r){super(e,n,r),this.key=Pe.fromName(r.referenceValue)}matches(e){const n=Pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class B$ extends Mt{constructor(e,n){super(e,"in",n),this.keys=YC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z$ extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=YC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Pe.fromName(r.referenceValue))}class W$ extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Gy(n)&&Sc(n.arrayValue,this.value)}}class H$ extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Sc(this.value.arrayValue,n)}}class q$ extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Sc(this.value.arrayValue,n)}}class K$ extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Gy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e,n=null,r=[],s=[],o=null,l=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=u,this.le=null}}function FE(t,e=null,n=[],r=[],s=null,o=null,l=null){return new G$(t,e,n,r,s,o,l)}function Qy(t){const e=Ve(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>S0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Bf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),e.le=n}return e.le}function Jy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$E(t.startAt,e.startAt)&&$E(t.endAt,e.endAt)}function k0(t){return Pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n=null,r=[],s=[],o=null,l="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=u,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Q$(t,e,n,r,s,o,l,u){return new Wf(t,e,n,r,s,o,l,u)}function Yy(t){return new Wf(t)}function UE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function J$(t){return t.collectionGroup!==null}function ic(t){const e=Ve(t);if(e.he===null){e.he=[];const n=new Set;for(const o of e.explicitOrderBy)e.he.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let u=new $t(tn.comparator);return l.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(u=u.add(h.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.he.push(new pf(o,r))}),n.has(tn.keyField().canonicalString())||e.he.push(new pf(tn.keyField(),r))}return e.he}function es(t){const e=Ve(t);return e.Pe||(e.Pe=Y$(e,ic(t))),e.Pe}function Y$(t,e){if(t.limitType==="F")return FE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new pf(s.field,o)});const n=t.endAt?new ff(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ff(t.startAt.position,t.startAt.inclusive):null;return FE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function C0(t,e,n){return new Wf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hf(t,e){return Jy(es(t),es(e))&&t.limitType===e.limitType}function XC(t){return`${Qy(es(t))}|lt:${t.limitType}`}function Ja(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>JC(s)).join(", ")}]`),Bf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_l(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_l(s)).join(",")),`Target(${r})`}(es(t))}; limitType=${t.limitType})`}function qf(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of ic(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(l,u,c){const h=VE(l,u,c);return l.inclusive?h<=0:h<0}(r.startAt,ic(r),s)||r.endAt&&!function(l,u,c){const h=VE(l,u,c);return l.inclusive?h>=0:h>0}(r.endAt,ic(r),s))}(t,e)}function X$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZC(t){return(e,n)=>{let r=!1;for(const s of ic(t)){const o=Z$(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function Z$(t,e,n){const r=t.field.isKeyField()?Pe.comparator(e.key,n.key):function(o,l,u){const c=l.data.field(o),h=u.data.field(o);return c!==null&&h!==null?wl(c,h):Ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return MC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new gt(Pe.comparator);function Ls(){return e3}const eP=new gt(Pe.comparator);function Gu(...t){let e=eP;for(const n of t)e=e.insert(n.key,n);return e}function tP(t){let e=eP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Io(){return oc()}function nP(){return oc()}function oc(){return new Wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const t3=new gt(Pe.comparator),n3=new $t(Pe.comparator);function We(...t){let e=n3;for(const n of t)e=e.add(n);return e}const r3=new $t(Fe);function s3(){return r3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cf(e)?"-0":e}}function rP(t){return{integerValue:""+t}}function i3(t,e){return R$(e)?rP(e):Xy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this._=void 0}}function o3(t,e,n){return t instanceof mf?function(s,o){const l={fields:{[FC]:{stringValue:$C},[BC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Ky(o)&&(o=zf(o)),o&&(l.fields[UC]=o),{mapValue:l}}(n,e):t instanceof kc?iP(t,e):t instanceof Cc?oP(t,e):function(s,o){const l=sP(s,o),u=BE(l)+BE(s.Ie);return T0(l)&&T0(s.Ie)?rP(u):Xy(s.serializer,u)}(t,e)}function a3(t,e,n){return t instanceof kc?iP(t,e):t instanceof Cc?oP(t,e):n}function sP(t,e){return t instanceof gf?function(r){return T0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class mf extends Kf{}class kc extends Kf{constructor(e){super(),this.elements=e}}function iP(t,e){const n=aP(e);for(const r of t.elements)n.some(s=>ss(s,r))||n.push(r);return{arrayValue:{values:n}}}class Cc extends Kf{constructor(e){super(),this.elements=e}}function oP(t,e){let n=aP(e);for(const r of t.elements)n=n.filter(s=>!ss(s,r));return{arrayValue:{values:n}}}class gf extends Kf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function BE(t){return kt(t.integerValue||t.doubleValue)}function aP(t){return Gy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function l3(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof kc&&s instanceof kc||r instanceof Cc&&s instanceof Cc?xl(r.elements,s.elements,ss):r instanceof gf&&s instanceof gf?ss(r.Ie,s.Ie):r instanceof mf&&s instanceof mf}(t.transform,e.transform)}class u3{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $h(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gf{}function lP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Zy(t.key,cr.none()):new Uc(t.key,t.data,cr.none());{const n=t.data,r=Nn.empty();let s=new $t(tn.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Bi(t.key,r,new Wn(s.toArray()),cr.none())}}function c3(t,e,n){t instanceof Uc?function(s,o,l){const u=s.value.clone(),c=WE(s.fieldTransforms,o,l.transformResults);u.setAll(c),o.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Bi?function(s,o,l){if(!$h(s.precondition,o))return void o.convertToUnknownDocument(l.version);const u=WE(s.fieldTransforms,o,l.transformResults),c=o.data;c.setAll(uP(s)),c.setAll(u),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function ac(t,e,n,r){return t instanceof Uc?function(o,l,u,c){if(!$h(o.precondition,l))return u;const h=o.value.clone(),g=HE(o.fieldTransforms,c,l);return h.setAll(g),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Bi?function(o,l,u,c){if(!$h(o.precondition,l))return u;const h=HE(o.fieldTransforms,c,l),g=l.data;return g.setAll(uP(o)),g.setAll(h),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,l,u){return $h(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u}(t,e,n)}function d3(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=sP(r.transform,s||null);o!=null&&(n===null&&(n=Nn.empty()),n.set(r.field,o))}return n||null}function zE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xl(r,s,(o,l)=>l3(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uc extends Gf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Bi extends Gf{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function uP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function WE(t,e,n){const r=new Map;Ye(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,u=e.data.field(o.field);r.set(o.field,a3(l,u,n[s]))}return r}function HE(t,e,n){const r=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);r.set(s.field,o3(o,l,e))}return r}class Zy extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h3 extends Gf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&c3(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ac(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nP();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let u=this.applyToLocalView(l,o.mutatedFields);u=n.has(s.key)?null:u;const c=lP(l,u);c!==null&&r.set(s.key,c),l.isValidDocument()||l.convertToNoDocument(Le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,(n,r)=>zE(n,r))&&xl(this.baseMutations,e.baseMutations,(n,r)=>zE(n,r))}}class ev{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ye(e.mutations.length===r.length);let s=function(){return t3}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new ev(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,Ke;function g3(t){switch(t){case ue.OK:return Ne();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ne()}}function cP(t){if(t===void 0)return Os("GRPC error has no .code"),ue.UNKNOWN;switch(t){case At.OK:return ue.OK;case At.CANCELLED:return ue.CANCELLED;case At.UNKNOWN:return ue.UNKNOWN;case At.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case At.INTERNAL:return ue.INTERNAL;case At.UNAVAILABLE:return ue.UNAVAILABLE;case At.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case At.NOT_FOUND:return ue.NOT_FOUND;case At.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case At.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case At.ABORTED:return ue.ABORTED;case At.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case At.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case At.DATA_LOSS:return ue.DATA_LOSS;default:return Ne()}}(Ke=At||(At={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y3=new Si([4294967295,4294967295],0);function qE(t){const e=DC().encode(t),n=new CC;return n.update(e),new Uint8Array(n.digest())}function KE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Si([n,r],0),new Si([s,o],0)]}class tv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qu(`Invalid padding: ${n}`);if(r<0)throw new Qu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qu(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Si.fromNumber(this.Ee)}Ae(e,n,r){let s=e.add(n.multiply(Si.fromNumber(r)));return s.compare(y3)===1&&(s=new Si([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=qE(e),[r,s]=KE(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);if(!this.Re(l))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new tv(o,s,n);return r.forEach(u=>l.insert(u)),l}insert(e){if(this.Ee===0)return;const n=qE(e),[r,s]=KE(n);for(let o=0;o<this.hashCount;o++){const l=this.Ae(r,s,o);this.Ve(l)}}Ve(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Bc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qf(Le.min(),s,new gt(Fe),Ls(),We())}}class Bc{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bc(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,n,r,s){this.me=e,this.removedTargetIds=n,this.key=r,this.fe=s}}class dP{constructor(e,n){this.targetId=e,this.ge=n}}class hP{constructor(e,n,r=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class GE{constructor(){this.pe=0,this.ye=QE(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=We(),n=We(),r=We();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ne()}}),new Bc(this.we,this.Se,e,n,r)}Me(){this.be=!1,this.ye=QE()}xe(e,n){this.be=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ye(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class v3{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ls(),this.$e=Sh(),this.Ue=Sh(),this.Ke=new gt(Fe)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const r=this.He(n);switch(e.state){case 0:this.Je(n)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(n);break;case 3:this.Je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),r.Ce(e.resumeToken));break;default:Ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((r,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,r=e.ge.count,s=this.Xe(n);if(s){const o=s.target;if(k0(o))if(r===0){const l=new Pe(o.path);this.ze(n,l,hn.newNoDocument(l,Le.min()))}else Ye(r===1);else{const l=this.et(n);if(l!==r){const u=this.tt(e),c=u?this.nt(u,e,l):1;if(c!==0){this.Ye(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let l,u;try{l=Di(r).toUint8Array()}catch(c){if(c instanceof VC)return vl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new tv(l,s,o)}catch(c){return vl(c instanceof Qu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ee===0?null:u}nt(e,n,r){return n.ge.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.ke.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const l=this.ke.it(),u=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.ze(n,o,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((o,l)=>{const u=this.Xe(l);if(u){if(o.current&&k0(u.target)){const c=new Pe(u.target.path);this._t(c).has(l)||this.ut(l,c)||this.ze(l,c,hn.newNoDocument(c,e))}o.ve&&(n.set(l,o.Fe()),o.Me())}});let r=We();this.Ue.forEach((o,l)=>{let u=!0;l.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.Qe.forEach((o,l)=>l.setReadTime(e));const s=new Qf(e,n,this.Ke,this.Qe,r);return this.Qe=Ls(),this.$e=Sh(),this.Ue=Sh(),this.Ke=new gt(Fe),s}Ge(e,n){if(!this.Je(e))return;const r=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,r),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ue=this.Ue.insert(n.key,this.ct(n.key).add(e))}ze(e,n,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ue=this.Ue.insert(n,this.ct(n).delete(e)),this.Ue=this.Ue.insert(n,this.ct(n).add(e)),r&&(this.Qe=this.Qe.insert(n,r))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new GE,this.qe.set(e,n)),n}ct(e){let n=this.Ue.get(e);return n||(n=new $t(Fe),this.Ue=this.Ue.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new $t(Fe),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new GE),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Sh(){return new gt(Pe.comparator)}function QE(){return new gt(Pe.comparator)}const x3={asc:"ASCENDING",desc:"DESCENDING"},w3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_3={and:"AND",or:"OR"};class b3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function P0(t,e){return t.useProto3Json||Bf(e)?e:{value:e}}function yf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function E3(t,e){return yf(t,e.toTimestamp())}function ts(t){return Ye(!!t),Le.fromTimestamp(function(n){const r=ji(n);return new Vt(r.seconds,r.nanos)}(t))}function nv(t,e){return A0(t,e).canonicalString()}function A0(t,e){const n=function(s){return new dt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pP(t){const e=dt.fromString(t);return Ye(xP(e)),e}function I0(t,e){return nv(t.databaseId,e.path)}function Eg(t,e){const n=pP(e);if(n.get(1)!==t.databaseId.projectId)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Se(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Pe(gP(n))}function mP(t,e){return nv(t.databaseId,e)}function T3(t){const e=pP(t);return e.length===4?dt.emptyPath():gP(e)}function R0(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gP(t){return Ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function JE(t,e,n){return{name:I0(t,e),fields:n.value.mapValue.fields}}function S3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Ye(g===void 0||typeof g=="string"),nn.fromBase64String(g||"")):(Ye(g===void 0||g instanceof Buffer||g instanceof Uint8Array),nn.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,u=l&&function(h){const g=h.code===void 0?ue.UNKNOWN:cP(h.code);return new Se(g,h.message||"")}(l);n=new hP(r,s,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Eg(t,r.document.name),o=ts(r.document.updateTime),l=r.document.createTime?ts(r.document.createTime):Le.min(),u=new Nn({mapValue:{fields:r.document.fields}}),c=hn.newFoundDocument(s,o,l,u),h=r.targetIds||[],g=r.removedTargetIds||[];n=new Fh(h,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Eg(t,r.document),o=r.readTime?ts(r.readTime):Le.min(),l=hn.newNoDocument(s,o),u=r.removedTargetIds||[];n=new Fh([],u,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Eg(t,r.document),o=r.removedTargetIds||[];n=new Fh([],o,s,null)}else{if(!("filter"in e))return Ne();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new m3(s,o),u=r.targetId;n=new dP(u,l)}}return n}function k3(t,e){let n;if(e instanceof Uc)n={update:JE(t,e.key,e.value)};else if(e instanceof Zy)n={delete:I0(t,e.key)};else if(e instanceof Bi)n={update:JE(t,e.key,e.data),updateMask:O3(e.fieldMask)};else{if(!(e instanceof h3))return Ne();n={verify:I0(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const u=l.transform;if(u instanceof mf)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof kc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Cc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof gf)return{fieldPath:l.field.canonicalString(),increment:u.Ie};throw Ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:E3(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ne()}(t,e.precondition)),n}function C3(t,e){return t&&t.length>0?(Ye(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?ts(s.updateTime):ts(o);return l.isEqual(Le.min())&&(l=ts(o)),new u3(l,s.transformResults||[])}(n,e))):[]}function P3(t,e){return{documents:[mP(t,e.path)]}}function A3(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mP(t,s);const o=function(h){if(h.length!==0)return vP(is.create(h,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(h){if(h.length!==0)return h.map(g=>function(x){return{field:Ya(x.field),direction:N3(x.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const u=P0(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:s}}function I3(t){let e=T3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ye(r===1);const g=n.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let o=[];n.where&&(o=function(v){const x=yP(v);return x instanceof is&&GC(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(v){return v.map(x=>function(k){return new pf(Xa(k.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(x))}(n.orderBy));let u=null;n.limit&&(u=function(v){let x;return x=typeof v=="object"?v.value:v,Bf(x)?null:x}(n.limit));let c=null;n.startAt&&(c=function(v){const x=!!v.before,b=v.values||[];return new ff(b,x)}(n.startAt));let h=null;return n.endAt&&(h=function(v){const x=!v.before,b=v.values||[];return new ff(b,x)}(n.endAt)),Q$(e,s,l,o,u,"F",c,h)}function R3(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xa(n.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xa(n.unaryFilter.field);return Mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Xa(n.unaryFilter.field);return Mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Xa(n.unaryFilter.field);return Mt.create(l,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(t):t.fieldFilter!==void 0?function(n){return Mt.create(Xa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return is.create(n.compositeFilter.filters.map(r=>yP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne()}}(n.compositeFilter.op))}(t):Ne()}function N3(t){return x3[t]}function j3(t){return w3[t]}function D3(t){return _3[t]}function Ya(t){return{fieldPath:t.canonicalString()}}function Xa(t){return tn.fromServerFormat(t.fieldPath)}function vP(t){return t instanceof Mt?function(n){if(n.op==="=="){if(ME(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NAN"}};if(LE(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ME(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NAN"}};if(LE(n.value))return{unaryFilter:{field:Ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(n.field),op:j3(n.op),value:n.value}}}(t):t instanceof is?function(n){const r=n.getFilters().map(s=>vP(s));return r.length===1?r[0]:{compositeFilter:{op:D3(n.op),filters:r}}}(t):Ne()}function O3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,r,s,o=Le.min(),l=Le.min(),u=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.Tt=e}}function M3(t){const e=I3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?C0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(){this.Tn=new $3}addToCollectionParentIndex(e,n){return this.Tn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Ni.min())}updateCollectionGroup(e,n,r){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class $3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new $t(dt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new $t(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wP=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(wP,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new bl(0)}static Kn(){return new bl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",F3=1048576;function ZE([t,e],[n,r]){const s=Fe(t,n);return s===0?Fe(e,r):s}class U3{constructor(e){this.Hn=e,this.buffer=new $t(ZE),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ZE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class B3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ye(XE,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ol(n)?ye(XE,"Ignoring IndexedDB error during garbage collection: ",n):await Dl(n)}await this.er(3e5)})}}class z3{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Uf.ae);const r=new U3(n);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.tr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(YE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let r,s,o,l,u,c,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,n))).next(v=>(o=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),Qa()<=ze.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${s} in `+(u-l)+`ms
	Removed ${o} targets in `+(c-u)+`ms
	Removed ${v} documents in `+(h-c)+`ms
Total Duration: ${h-g}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:v})))}}function W3(t,e){return new z3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){this.changes=new Wo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?se.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ac(r.mutation,s,Wn.empty(),Vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const s=Io();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let l=Gu();return o.forEach((u,c)=>{l=l.insert(u,c.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Io();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,u)=>{n.set(l,u)})})}computeViews(e,n,r,s){let o=Ls();const l=oc(),u=function(){return oc()}();return n.forEach((c,h)=>{const g=r.get(h.key);s.has(h.key)&&(g===void 0||g.mutation instanceof Bi)?o=o.insert(h.key,h):g!==void 0?(l.set(h.key,g.mutation.getFieldMask()),ac(g.mutation,h,g.mutation.getFieldMask(),Vt.now())):l.set(h.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,g)=>l.set(h,g)),n.forEach((h,g)=>{var v;return u.set(h,new q3(g,(v=l.get(h))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=oc();let s=new gt((l,u)=>l-u),o=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const u of l)u.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let g=r.get(c)||Wn.empty();g=u.applyToLocalView(h,g),r.set(c,g);const v=(s.get(u.batchId)||We()).add(c);s=s.insert(u.batchId,v)})}).next(()=>{const l=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),h=c.key,g=c.value,v=nP();g.forEach(x=>{if(!o.has(x)){const b=lP(n.get(x),r.get(x));b!==null&&v.set(x,b),o=o.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,h,v))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(l){return Pe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):J$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):se.resolve(Io());let u=bc,c=o;return l.next(h=>se.forEach(h,(g,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(g)?se.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{c=c.insert(g,x)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,We())).next(g=>({batchId:u,changes:tP(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Pe(n)).next(r=>{let s=Gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let l=Gu();return this.indexManager.getCollectionParents(e,o).next(u=>se.forEach(u,c=>{const h=function(v,x){return new Wf(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(g=>{g.forEach((v,x)=>{l=l.insert(v,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(l=>{o.forEach((c,h)=>{const g=h.getKey();l.get(g)===null&&(l=l.insert(g,hn.newInvalidDocument(g)))});let u=Gu();return l.forEach((c,h)=>{const g=o.get(c);g!==void 0&&ac(g.mutation,h,Wn.empty(),Vt.now()),qf(n,h)&&(u=u.insert(c,h))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return se.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ts(s.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:M3(s.bundledQuery),readTime:ts(s.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.overlays=new gt(Pe.comparator),this.Rr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Io();return se.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.Et(e,n,o)}),se.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),se.resolve()}getOverlaysForCollection(e,n,r){const s=Io(),o=n.length+1,l=new Pe(n.child("")),u=this.overlays.getIteratorFrom(l);for(;u.hasNext();){const c=u.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return se.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new gt((h,g)=>h-g);const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=Io(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const u=Io(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,g)=>u.set(h,g)),!(u.size()>=s)););return se.resolve(u)}Et(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new p3(n,r));let o=this.Rr.get(n);o===void 0&&(o=We(),this.Rr.set(n,o)),this.Rr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.Vr=new $t(qt.mr),this.gr=new $t(qt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const r=new qt(e,n);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.wr(new qt(e,n))}Sr(e,n){e.forEach(r=>this.removeReference(r,n))}br(e){const n=new Pe(new dt([])),r=new qt(n,e),s=new qt(n,e+1),o=[];return this.gr.forEachInRange([r,s],l=>{this.wr(l),o.push(l.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Pe(new dt([])),r=new qt(n,e),s=new qt(n,e+1);let o=We();return this.gr.forEachInRange([r,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new qt(e,0),r=this.Vr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Pe.comparator(e.key,n.key)||Fe(e.Cr,n.Cr)}static pr(e,n){return Fe(e.Cr,n.Cr)||Pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new $t(qt.mr)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new f3(o,n,r,s);this.mutationQueue.push(l);for(const u of s)this.Mr=this.Mr.add(new qt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,n){return se.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Nr(r),o=s<0?0:s;return se.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?qy:this.Fr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qt(n,0),s=new qt(n,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,s],l=>{const u=this.Or(l.Cr);o.push(u)}),se.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $t(Fe);return n.forEach(s=>{const o=new qt(s,0),l=new qt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,l],u=>{r=r.add(u.Cr)})}),se.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Pe.isDocumentKey(o)||(o=o.child(""));const l=new qt(new Pe(o),0);let u=new $t(Fe);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(u=u.add(c.Cr)),!0)},l),se.resolve(this.Br(u))}Br(e){const n=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ye(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return se.forEach(n.mutations,s=>{const o=new qt(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,n){const r=new qt(n,0),s=this.Mr.firstAfterOrEqual(r);return se.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.kr=e,this.docs=function(){return new gt(Pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,l=this.kr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return se.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(n))}getEntries(e,n){let r=Ls();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():hn.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Ls();const l=n.path,u=new Pe(l.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||C$(k$(g),r)<=0||(s.has(g.key)||qf(n,g))&&(o=o.insert(g.key,g.mutableCopy()))}return se.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ne()}qr(e,n){return se.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Z3(this)}getSize(e){return se.resolve(this.size)}}class Z3 extends H3{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),se.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e){this.persistence=e,this.Qr=new Wo(n=>Qy(n),Jy),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.$r=0,this.Ur=new rv,this.targetCount=0,this.Kr=bl.Un()}forEachTarget(e,n){return this.Qr.forEach((r,s)=>n(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.$r&&(this.$r=n),se.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Kr=new bl(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.zn(n),se.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Ur.br(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Qr.forEach((l,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Qr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),se.waitFor(o).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const r=this.Qr.get(n)||null;return se.resolve(r)}addMatchingKeys(e,n,r){return this.Ur.yr(n,r),se.resolve()}removeMatchingKeys(e,n,r){this.Ur.Sr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Ur.br(n),se.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ur.vr(n);return se.resolve(r)}containsKey(e,n){return se.resolve(this.Ur.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Uf(0),this.zr=!1,this.zr=!0,this.jr=new J3,this.referenceDelegate=e(this),this.Hr=new e6(this),this.indexManager=new V3,this.remoteDocumentCache=function(s){return new X3(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new L3(n),this.Yr=new G3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Q3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Wr[e.toKey()];return r||(r=new Y3(n,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const s=new t6(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,n){return se.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,n)))}}class t6 extends A${constructor(e){super(),this.currentSequenceNumber=e}}class sv{constructor(e){this.persistence=e,this.ti=new rv,this.ni=null}static ri(e){return new sv(e)}get ii(){if(this.ni)return this.ni;throw Ne()}addReference(e,n,r){return this.ti.addReference(r,n),this.ii.delete(r.toString()),se.resolve()}removeReference(e,n,r){return this.ti.removeReference(r,n),this.ii.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),se.resolve()}removeTarget(e,n){this.ti.br(n.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.ii,r=>{const s=Pe.fromPath(r);return this.si(e,s).next(o=>{o||n.removeEntry(s,Le.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(r=>{r?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return se.or([()=>se.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class vf{constructor(e,n){this.persistence=e,this.oi=new Wo(r=>N$(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=W3(this,n)}static ri(e,n){return new vf(e,n)}Zr(){}Xr(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}sr(e){let n=0;return this.rr(e,r=>{n++}).next(()=>n)}rr(e,n){return se.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(o=>o?se.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,l=>this.ar(e,l,n).next(u=>{u||(r++,o.removeEntry(l,Le.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,n,r){return this.oi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),se.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}ar(e,n,r){return se.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return se.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Hi=r,this.Ji=s}static Yi(e,n){let r=We(),s=We();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new iv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return JM()?8:I$(pn())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.rs(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.ss(e,n,s,r).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new n6;return this._s(e,n,l).next(u=>{if(o.result=u,this.Xi)return this.us(e,n,l,u.size)})}).next(()=>o.result)}us(e,n,r,s){return r.documentReadCount<this.es?(Qa()<=ze.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),se.resolve()):(Qa()<=ze.DEBUG&&ye("QueryEngine","Query:",Ja(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Qa()<=ze.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(n))):se.resolve())}rs(e,n){if(UE(n))return se.resolve(null);let r=es(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=C0(n,null,"F"),r=es(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const l=We(...o);return this.ns.getDocuments(e,l).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.cs(n,u);return this.ls(n,h,l,c.readTime)?this.rs(e,C0(n,null,"F")):this.hs(e,h,n,c)}))})))}ss(e,n,r,s){return UE(n)||s.isEqual(Le.min())?se.resolve(null):this.ns.getDocuments(e,r).next(o=>{const l=this.cs(n,o);return this.ls(n,l,r,s)?se.resolve(null):(Qa()<=ze.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ja(n)),this.hs(e,l,n,S$(s,bc)).next(u=>u))})}cs(e,n){let r=new $t(ZC(e));return n.forEach((s,o)=>{qf(e,o)&&(r=r.add(o))}),r}ls(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,n,r){return Qa()<=ze.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ja(n)),this.ns.getDocumentsMatchingQuery(e,n,Ni.min(),r)}hs(e,n,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="LocalStore",s6=3e8;class i6{constructor(e,n,r,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new gt(Fe),this.Is=new Wo(o=>Qy(o),Jy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new K3(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function o6(t,e,n,r){return new i6(t,e,n,r)}async function bP(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.As(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const l=[],u=[];let c=We();for(const h of s){l.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}for(const h of o){u.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}return n.localDocuments.getDocuments(r,c).next(h=>({Rs:h,removedBatchIds:l,addedBatchIds:u}))})})}function a6(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.ds.newChangeBuffer({trackRemovals:!0});return function(u,c,h,g){const v=h.batch,x=v.keys();let b=se.resolve();return x.forEach(k=>{b=b.next(()=>g.getEntry(c,k)).next(D=>{const P=h.docVersions.get(k);Ye(P!==null),D.version.compareTo(P)<0&&(v.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),g.addEntry(D)))})}),b.next(()=>u.mutationQueue.removeMutationBatch(c,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=We();for(let h=0;h<u.mutationResults.length;++h)u.mutationResults[h].transformResults.length>0&&(c=c.add(u.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function EP(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function l6(t,e){const n=Ve(t),r=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const u=[];e.targetChanges.forEach((g,v)=>{const x=s.get(v);if(!x)return;u.push(n.Hr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>n.Hr.addMatchingKeys(o,g.addedDocuments,v)));let b=x.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?b=b.withResumeToken(nn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,r)),s=s.insert(v,b),function(D,P,j){return D.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=s6?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(x,b,g)&&u.push(n.Hr.updateTargetData(o,b))});let c=Ls(),h=We();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(u6(o,l,e.documentUpdates).next(g=>{c=g.Vs,h=g.fs})),!r.isEqual(Le.min())){const g=n.Hr.getLastRemoteSnapshotVersion(o).next(v=>n.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return se.waitFor(u).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(n.Ts=s,o))}function u6(t,e,n){let r=We(),s=We();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let l=Ls();return n.forEach((u,c)=>{const h=o.get(u);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(Le.min())?(e.removeEntry(u,c.readTime),l=l.insert(u,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),l=l.insert(u,c)):ye(ov,"Ignoring outdated watch update for ",u,". Current version:",h.version," Watch version:",c.version)}),{Vs:l,fs:s}})}function c6(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=qy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function d6(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Hr.getTargetData(r,e).next(o=>o?(s=o,se.resolve(s)):n.Hr.allocateTargetId(r).next(l=>(s=new bi(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(r.targetId,r),n.Is.set(e,r.targetId)),r})}async function N0(t,e,n){const r=Ve(t),s=r.Ts.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ol(l))throw l;ye(ov,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function eT(t,e,n){const r=Ve(t);let s=Le.min(),o=We();return r.persistence.runTransaction("Execute query","readwrite",l=>function(c,h,g){const v=Ve(c),x=v.Is.get(g);return x!==void 0?se.resolve(v.Ts.get(x)):v.Hr.getTargetData(h,g)}(r,l,es(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(l,u.targetId).next(c=>{o=c})}).next(()=>r.Ps.getDocumentsMatchingQuery(l,e,n?s:Le.min(),n?o:We())).next(u=>(h6(r,X$(e),u),{documents:u,gs:o})))}function h6(t,e,n){let r=t.Es.get(e)||Le.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Es.set(e,r)}class tT{constructor(){this.activeTargetIds=s3()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f6{constructor(){this.ho=new tT,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,r){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new tT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="ConnectivityMonitor";class rT{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ye(nT,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ye(nT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh=null;function j0(){return kh===null?kh=function(){return 268435456+Math.round(2147483648*Math.random())}():kh++,"0x"+kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="RestConnection",m6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class g6{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===df?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,n,r,s,o){const l=j0(),u=this.bo(e,n.toUriEncodedString());ye(Tg,`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,s,o),this.vo(e,u,c,r).then(h=>(ye(Tg,`Received RPC '${e}' ${l}: `,h),h),h=>{throw vl(Tg,`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}Co(e,n,r,s,o,l){return this.So(e,n,r,s,o)}Do(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}bo(e,n){const r=m6[e];return`${this.po}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class v6 extends g6{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,r,s){const o=j0();return new Promise((l,u)=>{const c=new PC;c.setWithCredentials(!0),c.listenOnce(AC.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Lh.NO_ERROR:const g=c.getResponseJson();ye(un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),l(g);break;case Lh.TIMEOUT:ye(un,`RPC '${e}' ${o} timed out`),u(new Se(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Lh.HTTP_ERROR:const v=c.getStatus();if(ye(un,`RPC '${e}' ${o} failed with status:`,v,"response text:",c.getResponseText()),v>0){let x=c.getResponseJson();Array.isArray(x)&&(x=x[0]);const b=x==null?void 0:x.error;if(b&&b.status&&b.message){const k=function(P){const j=P.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(j)>=0?j:ue.UNKNOWN}(b.status);u(new Se(k,b.message))}else u(new Se(ue.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new Se(ue.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ye(un,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ye(un,`RPC '${e}' ${o} sending request:`,s),c.send(n,"POST",h,r,15)})}Wo(e,n,r){const s=j0(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=NC(),u=RC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const g=o.join("");ye(un,`Creating RPC '${e}' stream ${s}: ${g}`,c);const v=l.createWebChannel(g,c);let x=!1,b=!1;const k=new y6({Fo:P=>{b?ye(un,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(x||(ye(un,`Opening RPC '${e}' stream ${s} transport.`),v.open(),x=!0),ye(un,`RPC '${e}' stream ${s} sending:`,P),v.send(P))},Mo:()=>v.close()}),D=(P,j,V)=>{P.listen(j,$=>{try{V($)}catch(z){setTimeout(()=>{throw z},0)}})};return D(v,Ku.EventType.OPEN,()=>{b||(ye(un,`RPC '${e}' stream ${s} transport opened.`),k.Qo())}),D(v,Ku.EventType.CLOSE,()=>{b||(b=!0,ye(un,`RPC '${e}' stream ${s} transport closed`),k.Uo())}),D(v,Ku.EventType.ERROR,P=>{b||(b=!0,vl(un,`RPC '${e}' stream ${s} transport errored:`,P),k.Uo(new Se(ue.UNAVAILABLE,"The operation could not be completed")))}),D(v,Ku.EventType.MESSAGE,P=>{var j;if(!b){const V=P.data[0];Ye(!!V);const $=V,z=($==null?void 0:$.error)||((j=$[0])===null||j===void 0?void 0:j.error);if(z){ye(un,`RPC '${e}' stream ${s} received error:`,z);const H=z.status;let Y=function(S){const I=At[S];if(I!==void 0)return cP(I)}(H),R=z.message;Y===void 0&&(Y=ue.INTERNAL,R="Unknown error status: "+H+" with message "+z.message),b=!0,k.Uo(new Se(Y,R)),v.close()}else ye(un,`RPC '${e}' stream ${s} received:`,V),k.Ko(V)}}),D(u,IC.STAT_EVENT,P=>{P.stat===_0.PROXY?ye(un,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===_0.NOPROXY&&ye(un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{k.$o()},0),k}}function Sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t){return new b3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=n,this.Go=r,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="PersistentStream";class SP{constructor(e,n,r,s,o,l,u,c){this.Ti=e,this.n_=r,this.r_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new TP(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Os(n.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===n&&this.V_(r,s)},r=>{e(()=>{const s=new Se(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,n){const r=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ye(sT,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(ye(sT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x6 extends SP{constructor(e,n,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=S3(this.serializer,e),r=function(o){if(!("targetChange"in o))return Le.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Le.min():l.readTime?ts(l.readTime):Le.min()}(e);return this.listener.p_(n,r)}y_(e){const n={};n.database=R0(this.serializer),n.addTarget=function(o,l){let u;const c=l.target;if(u=k0(c)?{documents:P3(o,c)}:{query:A3(o,c).ht},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=fP(o,l.resumeToken);const h=P0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}else if(l.snapshotVersion.compareTo(Le.min())>0){u.readTime=yf(o,l.snapshotVersion.toTimestamp());const h=P0(o,l.expectedCount);h!==null&&(u.expectedCount=h)}return u}(this.serializer,e);const r=R3(this.serializer,e);r&&(n.labels=r),this.I_(n)}w_(e){const n={};n.database=R0(this.serializer),n.removeTarget=e,this.I_(n)}}class w6 extends SP{constructor(e,n,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,l),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=C3(e.writeResults,e.commitTime),r=ts(e.commitTime);return this.listener.v_(r,n)}C_(){const e={};e.database=R0(this.serializer),this.I_(e)}b_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>k3(this.serializer,r))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{}class b6 extends _6{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.So(e,A0(n,r),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ue.UNKNOWN,o.toString())})}Co(e,n,r,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.Co(e,A0(n,r),s,l,u,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ue.UNKNOWN,l.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class E6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Os(n),this.N_=!1):ye("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="RemoteStore";class T6{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(l=>{r.enqueueAndForget(async()=>{Ho(this)&&(ye(Mo,"Restarting streams for network reachability change."),await async function(c){const h=Ve(c);h.W_.add(4),await zc(h),h.j_.set("Unknown"),h.W_.delete(4),await Yf(h)}(this))})}),this.j_=new E6(r,s)}}async function Yf(t){if(Ho(t))for(const e of t.G_)await e(!0)}async function zc(t){for(const e of t.G_)await e(!1)}function kP(t,e){const n=Ve(t);n.K_.has(e.targetId)||(n.K_.set(e.targetId,e),cv(n)?uv(n):Ll(n).c_()&&lv(n,e))}function av(t,e){const n=Ve(t),r=Ll(n);n.K_.delete(e),r.c_()&&CP(n,e),n.K_.size===0&&(r.c_()?r.P_():Ho(n)&&n.j_.set("Unknown"))}function lv(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).y_(e)}function CP(t,e){t.H_.Ne(e),Ll(t).w_(e)}function uv(t){t.H_=new v3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.K_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.j_.B_()}function cv(t){return Ho(t)&&!Ll(t).u_()&&t.K_.size>0}function Ho(t){return Ve(t).W_.size===0}function PP(t){t.H_=void 0}async function S6(t){t.j_.set("Online")}async function k6(t){t.K_.forEach((e,n)=>{lv(t,e)})}async function C6(t,e){PP(t),cv(t)?(t.j_.q_(e),uv(t)):t.j_.set("Unknown")}async function P6(t,e,n){if(t.j_.set("Online"),e instanceof hP&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const u of o.targetIds)s.K_.has(u)&&(await s.remoteSyncer.rejectListen(u,l),s.K_.delete(u),s.H_.removeTarget(u))}(t,e)}catch(r){ye(Mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xf(t,r)}else if(e instanceof Fh?t.H_.We(e):e instanceof dP?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Le.min()))try{const r=await EP(t.localStore);n.compareTo(r)>=0&&await function(o,l){const u=o.H_.ot(l);return u.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const g=o.K_.get(h);g&&o.K_.set(h,g.withResumeToken(c.resumeToken,l))}}),u.targetMismatches.forEach((c,h)=>{const g=o.K_.get(c);if(!g)return;o.K_.set(c,g.withResumeToken(nn.EMPTY_BYTE_STRING,g.snapshotVersion)),CP(o,c);const v=new bi(g.target,c,h,g.sequenceNumber);lv(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){ye(Mo,"Failed to raise snapshot:",r),await xf(t,r)}}async function xf(t,e,n){if(!Ol(e))throw e;t.W_.add(1),await zc(t),t.j_.set("Offline"),n||(n=()=>EP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye(Mo,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Yf(t)})}function AP(t,e){return e().catch(n=>xf(t,n,e))}async function Xf(t){const e=Ve(t),n=Li(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:qy;for(;A6(e);)try{const s=await c6(e.localStore,r);if(s===null){e.U_.length===0&&n.P_();break}r=s.batchId,I6(e,s)}catch(s){await xf(e,s)}IP(e)&&RP(e)}function A6(t){return Ho(t)&&t.U_.length<10}function I6(t,e){t.U_.push(e);const n=Li(t);n.c_()&&n.S_&&n.b_(e.mutations)}function IP(t){return Ho(t)&&!Li(t).u_()&&t.U_.length>0}function RP(t){Li(t).start()}async function R6(t){Li(t).C_()}async function N6(t){const e=Li(t);for(const n of t.U_)e.b_(n.mutations)}async function j6(t,e,n){const r=t.U_.shift(),s=ev.from(r,e,n);await AP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Xf(t)}async function D6(t,e){e&&Li(t).S_&&await async function(r,s){if(function(l){return g3(l)&&l!==ue.ABORTED}(s.code)){const o=r.U_.shift();Li(r).h_(),await AP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Xf(r)}}(t,e),IP(t)&&RP(t)}async function iT(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),ye(Mo,"RemoteStore received new credentials");const r=Ho(n);n.W_.add(3),await zc(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Yf(n)}async function O6(t,e){const n=Ve(t);e?(n.W_.delete(2),await Yf(n)):e||(n.W_.add(2),await zc(n),n.j_.set("Unknown"))}function Ll(t){return t.J_||(t.J_=function(n,r,s){const o=Ve(n);return o.M_(),new x6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:S6.bind(null,t),No:k6.bind(null,t),Lo:C6.bind(null,t),p_:P6.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),cv(t)?uv(t):t.j_.set("Unknown")):(await t.J_.stop(),PP(t))})),t.J_}function Li(t){return t.Y_||(t.Y_=function(n,r,s){const o=Ve(n);return o.M_(),new w6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:R6.bind(null,t),Lo:D6.bind(null,t),D_:N6.bind(null,t),v_:j6.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Xf(t)):(await t.Y_.stop(),t.U_.length>0&&(ye(Mo,`Stopping write stream with ${t.U_.length} pending writes`),t.U_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const l=Date.now()+r,u=new dv(e,n,l,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hv(t,e){if(Os("AsyncQueue",`${e}: ${t}`),Ol(t))return new Se(ue.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{static emptySet(e){return new ll(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Pe.comparator(n.key,r.key):(n,r)=>Pe.comparator(n.key,r.key),this.keyedMap=Gu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ll)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ll;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.Z_=new gt(Pe.comparator)}track(e){const n=e.doc.key,r=this.Z_.get(n);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(n):e.type===1&&r.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Ne():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class El{constructor(e,n,r,s,o,l,u,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,o){const l=[];return n.forEach(u=>{l.push({type:0,doc:u})}),new El(e,n,ll.emptySet(n),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class M6{constructor(){this.queries=aT(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,r){const s=Ve(n),o=s.queries;s.queries=aT(),o.forEach((l,u)=>{for(const c of u.ta)c.onError(r)})})(this,new Se(ue.ABORTED,"Firestore shutting down"))}}function aT(){return new Wo(t=>XC(t),Hf)}async function NP(t,e){const n=Ve(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.na()&&e.ra()&&(r=2):(o=new L6,r=e.ra()?0:1);try{switch(r){case 0:o.ea=await n.onListen(s,!0);break;case 1:o.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const u=hv(l,`Initialization of query '${Ja(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,o),o.ta.push(e),e.sa(n.onlineState),o.ea&&e.oa(o.ea)&&fv(n)}async function jP(t,e){const n=Ve(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const l=o.ta.indexOf(e);l>=0&&(o.ta.splice(l,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function V6(t,e){const n=Ve(t);let r=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const u of l.ta)u.oa(s)&&(r=!0);l.ea=s}}r&&fv(n)}function $6(t,e,n){const r=Ve(t),s=r.queries.get(e);if(s)for(const o of s.ta)o.onError(n);r.queries.delete(e)}function fv(t){t.ia.forEach(e=>{e.next()})}var D0,lT;(lT=D0||(D0={}))._a="default",lT.Cache="cache";class DP{constructor(e,n,r){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new El(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const r=n!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==D0.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.key=e}}class LP{constructor(e){this.key=e}}class F6{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=We(),this.mutatedKeys=We(),this.ya=ZC(e),this.wa=new ll(this.ya)}get Sa(){return this.fa}ba(e,n){const r=n?n.Da:new oT,s=n?n.wa:this.wa;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((g,v)=>{const x=s.get(g),b=qf(this.query,v)?v:null,k=!!x&&this.mutatedKeys.has(x.key),D=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let P=!1;x&&b?x.data.isEqual(b.data)?k!==D&&(r.track({type:3,doc:b}),P=!0):this.va(x,b)||(r.track({type:2,doc:b}),P=!0,(c&&this.ya(b,c)>0||h&&this.ya(b,h)<0)&&(u=!0)):!x&&b?(r.track({type:0,doc:b}),P=!0):x&&!b&&(r.track({type:1,doc:x}),P=!0,(c||h)&&(u=!0)),P&&(b?(l=l.add(b),o=D?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{wa:l,Da:r,ls:u,mutatedKeys:o}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const l=e.Da.X_();l.sort((g,v)=>function(b,k){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return D(b)-D(k)}(g.type,v.type)||this.ya(g.doc,v.doc)),this.Ca(r),s=s!=null&&s;const u=n&&!s?this.Fa():[],c=this.pa.size===0&&this.current&&!s?1:0,h=c!==this.ga;return this.ga=c,l.length!==0||h?{snapshot:new El(this.query,e.wa,o,l,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:u}:{Ma:u}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new oT,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=We(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const n=[];return e.forEach(r=>{this.pa.has(r)||n.push(new LP(r))}),this.pa.forEach(r=>{e.has(r)||n.push(new OP(r))}),n}Oa(e){this.fa=e.gs,this.pa=We();const n=this.ba(e.documents);return this.applyChanges(n,!0)}Na(){return El.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const pv="SyncEngine";class U6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class B6{constructor(e){this.key=e,this.Ba=!1}}class z6{constructor(e,n,r,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.La={},this.ka=new Wo(u=>XC(u),Hf),this.qa=new Map,this.Qa=new Set,this.$a=new gt(Pe.comparator),this.Ua=new Map,this.Ka=new rv,this.Wa={},this.Ga=new Map,this.za=bl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function W6(t,e,n=!0){const r=BP(t);let s;const o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await MP(r,e,n,!0),s}async function H6(t,e){const n=BP(t);await MP(n,e,!0,!1)}async function MP(t,e,n,r){const s=await d6(t.localStore,es(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await q6(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&kP(t.remoteStore,s),u}async function q6(t,e,n,r,s){t.Ha=(v,x,b)=>async function(D,P,j,V){let $=P.view.ba(j);$.ls&&($=await eT(D.localStore,P.query,!1).then(({documents:R})=>P.view.ba(R,$)));const z=V&&V.targetChanges.get(P.targetId),H=V&&V.targetMismatches.get(P.targetId)!=null,Y=P.view.applyChanges($,D.isPrimaryClient,z,H);return cT(D,P.targetId,Y.Ma),Y.snapshot}(t,v,x,b);const o=await eT(t.localStore,e,!0),l=new F6(e,o.gs),u=l.ba(o.documents),c=Bc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=l.applyChanges(u,t.isPrimaryClient,c);cT(t,n,h.Ma);const g=new U6(e,n,l);return t.ka.set(e,g),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function K6(t,e,n){const r=Ve(t),s=r.ka.get(e),o=r.qa.get(s.targetId);if(o.length>1)return r.qa.set(s.targetId,o.filter(l=>!Hf(l,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await N0(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&av(r.remoteStore,s.targetId),O0(r,s.targetId)}).catch(Dl)):(O0(r,s.targetId),await N0(r.localStore,s.targetId,!0))}async function G6(t,e){const n=Ve(t),r=n.ka.get(e),s=n.qa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),av(n.remoteStore,r.targetId))}async function Q6(t,e,n){const r=nF(t);try{const s=await function(l,u){const c=Ve(l),h=Vt.now(),g=u.reduce((b,k)=>b.add(k.key),We());let v,x;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let k=Ls(),D=We();return c.ds.getEntries(b,g).next(P=>{k=P,k.forEach((j,V)=>{V.isValidDocument()||(D=D.add(j))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,k)).next(P=>{v=P;const j=[];for(const V of u){const $=d3(V,v.get(V.key).overlayedDocument);$!=null&&j.push(new Bi(V.key,$,HC($.value.mapValue),cr.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,j,u)}).next(P=>{x=P;const j=P.applyToLocalDocumentSet(v,D);return c.documentOverlayCache.saveOverlays(b,P.batchId,j)})}).then(()=>({batchId:x.batchId,changes:tP(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,u,c){let h=l.Wa[l.currentUser.toKey()];h||(h=new gt(Fe)),h=h.insert(u,c),l.Wa[l.currentUser.toKey()]=h}(r,s.batchId,n),await Wc(r,s.changes),await Xf(r.remoteStore)}catch(s){const o=hv(s,"Failed to persist write");n.reject(o)}}async function VP(t,e){const n=Ve(t);try{const r=await l6(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Ua.get(o);l&&(Ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.Ba=!0:s.modifiedDocuments.size>0?Ye(l.Ba):s.removedDocuments.size>0&&(Ye(l.Ba),l.Ba=!1))}),await Wc(n,r,e)}catch(r){await Dl(r)}}function uT(t,e,n){const r=Ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ka.forEach((o,l)=>{const u=l.view.sa(e);u.snapshot&&s.push(u.snapshot)}),function(l,u){const c=Ve(l);c.onlineState=u;let h=!1;c.queries.forEach((g,v)=>{for(const x of v.ta)x.sa(u)&&(h=!0)}),h&&fv(c)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function J6(t,e,n){const r=Ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ua.get(e),o=s&&s.key;if(o){let l=new gt(Pe.comparator);l=l.insert(o,hn.newNoDocument(o,Le.min()));const u=We().add(o),c=new Qf(Le.min(),new Map,new gt(Fe),l,u);await VP(r,c),r.$a=r.$a.remove(o),r.Ua.delete(e),mv(r)}else await N0(r.localStore,e,!1).then(()=>O0(r,e,n)).catch(Dl)}async function Y6(t,e){const n=Ve(t),r=e.batch.batchId;try{const s=await a6(n.localStore,e);FP(n,r,null),$P(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wc(n,s)}catch(s){await Dl(s)}}async function X6(t,e,n){const r=Ve(t);try{const s=await function(l,u){const c=Ve(l);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return c.mutationQueue.lookupMutationBatch(h,u).next(v=>(Ye(v!==null),g=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,g,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>c.localDocuments.getDocuments(h,g))})}(r.localStore,e);FP(r,e,n),$P(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wc(r,s)}catch(s){await Dl(s)}}function $P(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function FP(t,e,n){const r=Ve(t);let s=r.Wa[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function O0(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.qa.get(e))t.ka.delete(r),n&&t.La.Ja(r,n);t.qa.delete(e),t.isPrimaryClient&&t.Ka.br(e).forEach(r=>{t.Ka.containsKey(r)||UP(t,r)})}function UP(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(av(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ua.delete(n),mv(t))}function cT(t,e,n){for(const r of n)r instanceof OP?(t.Ka.addReference(r.key,e),Z6(t,r)):r instanceof LP?(ye(pv,"Document no longer in limbo: "+r.key),t.Ka.removeReference(r.key,e),t.Ka.containsKey(r.key)||UP(t,r.key)):Ne()}function Z6(t,e){const n=e.key,r=n.path.canonicalString();t.$a.get(n)||t.Qa.has(r)||(ye(pv,"New document in limbo: "+n),t.Qa.add(r),mv(t))}function mv(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Pe(dt.fromString(e)),r=t.za.next();t.Ua.set(r,new B6(n)),t.$a=t.$a.insert(n,r),kP(t.remoteStore,new bi(es(Yy(n.path)),r,"TargetPurposeLimboResolution",Uf.ae))}}async function Wc(t,e,n){const r=Ve(t),s=[],o=[],l=[];r.ka.isEmpty()||(r.ka.forEach((u,c)=>{l.push(r.Ha(c,e,n).then(h=>{var g;if((h||n)&&r.isPrimaryClient){const v=h?!h.fromCache:(g=n==null?void 0:n.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(h){s.push(h);const v=iv.Yi(c.targetId,h);o.push(v)}}))}),await Promise.all(l),r.La.p_(s),await async function(c,h){const g=Ve(c);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>se.forEach(h,x=>se.forEach(x.Hi,b=>g.persistence.referenceDelegate.addReference(v,x.targetId,b)).next(()=>se.forEach(x.Ji,b=>g.persistence.referenceDelegate.removeReference(v,x.targetId,b)))))}catch(v){if(!Ol(v))throw v;ye(ov,"Failed to update sequence numbers: "+v)}for(const v of h){const x=v.targetId;if(!v.fromCache){const b=g.Ts.get(x),k=b.snapshotVersion,D=b.withLastLimboFreeSnapshotVersion(k);g.Ts=g.Ts.insert(x,D)}}}(r.localStore,o))}async function eF(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){ye(pv,"User change. New user:",e.toKey());const r=await bP(n.localStore,e);n.currentUser=e,function(o,l){o.Ga.forEach(u=>{u.forEach(c=>{c.reject(new Se(ue.CANCELLED,l))})}),o.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wc(n,r.Rs)}}function tF(t,e){const n=Ve(t),r=n.Ua.get(e);if(r&&r.Ba)return We().add(r.key);{let s=We();const o=n.qa.get(e);if(!o)return s;for(const l of o){const u=n.ka.get(l);s=s.unionWith(u.view.Sa)}return s}}function BP(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J6.bind(null,e),e.La.p_=V6.bind(null,e.eventManager),e.La.Ja=$6.bind(null,e.eventManager),e}function nF(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Y6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=X6.bind(null,e),e}class wf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Jf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return o6(this.persistence,new r6,e.initialUser,this.serializer)}Xa(e){return new _P(sv.ri,this.serializer)}Za(e){return new f6}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wf.provider={build:()=>new wf};class rF extends wf{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){Ye(this.persistence.referenceDelegate instanceof vf);const r=this.persistence.referenceDelegate.garbageCollector;return new B3(r,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new _P(r=>vf.ri(r,n),this.serializer)}}class L0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eF.bind(null,this.syncEngine),await O6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new M6}()}createDatastore(e){const n=Jf(e.databaseInfo.databaseId),r=function(o){return new v6(o)}(e.databaseInfo);return function(o,l,u,c){return new b6(o,l,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,l,u){return new T6(r,s,o,l,u)}(this.localStore,this.datastore,e.asyncQueue,n=>uT(this.syncEngine,n,0),function(){return rT.D()?new rT:new p6}())}createSyncEngine(e,n){return function(s,o,l,u,c,h,g){const v=new z6(s,o,l,u,c,h);return g&&(v.ja=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Ve(s);ye(Mo,"RemoteStore shutting down."),o.W_.add(5),await zc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}L0.provider={build:()=>new L0};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class sF{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=OC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async l=>{ye(Mi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(ye(Mi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kg(t,e){t.asyncQueue.verifyOperationInProgress(),ye(Mi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iF(t);ye(Mi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>iT(e.remoteStore,s)),t._onlineComponents=e}async function iF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(Mi,"Using user provided OfflineComponentProvider");try{await kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vl("Error using user provided cache. Falling back to memory cache: "+n),await kg(t,new wf)}}else ye(Mi,"Using default OfflineComponentProvider"),await kg(t,new rF(void 0));return t._offlineComponents}async function WP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(Mi,"Using user provided OnlineComponentProvider"),await dT(t,t._uninitializedComponentsProvider._online)):(ye(Mi,"Using default OnlineComponentProvider"),await dT(t,new L0))),t._onlineComponents}function oF(t){return WP(t).then(e=>e.syncEngine)}async function HP(t){const e=await WP(t),n=e.eventManager;return n.onListen=W6.bind(null,e.syncEngine),n.onUnlisten=K6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=G6.bind(null,e.syncEngine),n}function aF(t,e,n={}){const r=new Rs;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new zP({next:x=>{g.su(),l.enqueueAndForget(()=>jP(o,v));const b=x.docs.has(u);!b&&x.fromCache?h.reject(new Se(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&c&&c.source==="server"?h.reject(new Se(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new DP(Yy(u.path),g,{includeMetadataChanges:!0,Ta:!0});return NP(o,v)}(await HP(t),t.asyncQueue,e,n,r)),r.promise}function lF(t,e,n={}){const r=new Rs;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,u,c,h){const g=new zP({next:x=>{g.su(),l.enqueueAndForget(()=>jP(o,v)),x.fromCache&&c.source==="server"?h.reject(new Se(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),v=new DP(u,g,{includeMetadataChanges:!0,Ta:!0});return NP(o,v)}(await HP(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t,e,n){if(!n)throw new Se(ue.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uF(t,e,n,r){if(e===!0&&r===!0)throw new Se(ue.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fT(t){if(!Pe.isDocumentKey(t))throw new Se(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pT(t){if(Pe.isDocumentKey(t))throw new Se(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ne()}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Se(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gv(t);throw new Se(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="firestore.googleapis.com",mT=!0;class gT{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GP,this.ssl=mT}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:mT;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F3)throw new Se(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Se(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new g$;switch(r.type){case"firstParty":return new w$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Se(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hT.get(n);r&&(ye("ComponentProvider","Removing Datastore"),hT.delete(n),r.terminate())}(this),Promise.resolve()}}function cF(t,e,n,r={}){var s;const o=(t=Rr(t,Zf))._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o.host!==GP&&o.host!==u&&vl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:u,ssl:!1,emulatorOptions:r});if(!Do(c,l)&&(t._setSettings(c),r.mockUserToken)){let h,g;if(typeof r.mockUserToken=="string")h=r.mockUserToken,g=dn.MOCK_USER;else{h=bC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Se(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new dn(v)}t._authCredentials=new y$(new jC(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ep(this.firestore,e,this._query)}}class Dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dn(this.firestore,e,this._key)}}class ki extends ep{constructor(e,n,r){super(e,n,Yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dn(this.firestore,null,new Pe(e))}withConverter(e){return new ki(this.firestore,e,this._path)}}function Kt(t,e,...n){if(t=wt(t),KP("collection","path",e),t instanceof Zf){const r=dt.fromString(e,...n);return pT(r),new ki(t,null,r)}{if(!(t instanceof Dn||t instanceof ki))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return pT(r),new ki(t.firestore,null,r)}}function lr(t,e,...n){if(t=wt(t),arguments.length===1&&(e=OC.newId()),KP("doc","path",e),t instanceof Zf){const r=dt.fromString(e,...n);return fT(r),new Dn(t,null,new Pe(r))}{if(!(t instanceof Dn||t instanceof ki))throw new Se(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return fT(r),new Dn(t.firestore,t instanceof ki?t.converter:null,new Pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="AsyncQueue";class vT{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new TP(this,"async_queue_retry"),this.Su=()=>{const r=Sg();r&&ye(yT,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const n=Sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Rs;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ol(e))throw e;ye(yT,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),u}(r);throw Os("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=n,n}enqueueAfterDelay(e,n,r){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=dv.createAndSchedule(this,e,n,r,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ne()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class qo extends Zf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vT(e),this._firestoreClient=void 0,await e}}}function Vi(t,e){const n=typeof t=="object"?t:Wy(),r=typeof t=="string"?t:e||df,s=Ff(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=xC("firestore");o&&cF(s,...o)}return s}function yv(t){if(t._terminated)throw new Se(ue.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dF(t),t._firestoreClient}function dF(t){var e,n,r;const s=t._freezeSettings(),o=function(u,c,h,g){return new O$(u,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,qP(g.experimentalLongPollingOptions),g.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new sF(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tl(nn.fromBase64String(e))}catch(n){throw new Se(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tl(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=/^__.*__$/;class fF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uc(e,this.data,n,this.fieldTransforms)}}class QP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Bi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function JP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class _v{constructor(e,n,r,s,o,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new _v(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return _f(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(JP(this.Lu)&&hF.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class pF{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Jf(e)}ju(e,n,r,s=!1){return new _v({Lu:e,methodName:n,zu:r,path:tn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bv(t){const e=t._freezeSettings(),n=Jf(t._databaseId);return new pF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YP(t,e,n,r,s,o={}){const l=t.ju(o.merge||o.mergeFields?2:0,e,n,s);Ev("Data must be an object, but it was:",l,r);const u=XP(r,l);let c,h;if(o.merge)c=new Wn(l.fieldMask),h=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const x=M0(e,v,n);if(!l.contains(x))throw new Se(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);eA(g,x)||g.push(x)}c=new Wn(g),h=l.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,h=l.fieldTransforms;return new fF(new Nn(u),c,h)}class np extends vv{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof np}}function mF(t,e,n,r){const s=t.ju(1,e,n);Ev("Data must be an object, but it was:",s,r);const o=[],l=Nn.empty();Ui(r,(c,h)=>{const g=Tv(e,c,n);h=wt(h);const v=s.Uu(g);if(h instanceof np)o.push(g);else{const x=rp(h,v);x!=null&&(o.push(g),l.set(g,x))}});const u=new Wn(o);return new QP(l,u,s.fieldTransforms)}function gF(t,e,n,r,s,o){const l=t.ju(1,e,n),u=[M0(e,r,n)],c=[s];if(o.length%2!=0)throw new Se(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)u.push(M0(e,o[x])),c.push(o[x+1]);const h=[],g=Nn.empty();for(let x=u.length-1;x>=0;--x)if(!eA(h,u[x])){const b=u[x];let k=c[x];k=wt(k);const D=l.Uu(b);if(k instanceof np)h.push(b);else{const P=rp(k,D);P!=null&&(h.push(b),g.set(b,P))}}const v=new Wn(h);return new QP(g,v,l.fieldTransforms)}function rp(t,e){if(ZP(t=wt(t)))return Ev("Unsupported field value:",e,t),XP(t,e);if(t instanceof vv)return function(r,s){if(!JP(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const o=[];let l=0;for(const u of r){let c=rp(u,s.Ku(l));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),l++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i3(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Vt.fromDate(r);return{timestampValue:yf(s.serializer,o)}}if(r instanceof Vt){const o=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yf(s.serializer,o)}}if(r instanceof xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tl)return{bytesValue:fP(s.serializer,r._byteString)};if(r instanceof Dn){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.Wu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof wv)return function(l,u){return{mapValue:{fields:{[zC]:{stringValue:WC},[hf]:{arrayValue:{values:l.toArray().map(h=>{if(typeof h!="number")throw u.Wu("VectorValues must only contain numeric values.");return Xy(u.serializer,h)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${gv(r)}`)}(t,e)}function XP(t,e){const n={};return MC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const o=rp(s,e.qu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ZP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof xv||t instanceof Tl||t instanceof Dn||t instanceof vv||t instanceof wv)}function Ev(t,e,n){if(!ZP(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=gv(n);throw r==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+r)}}function M0(t,e,n){if((e=wt(e))instanceof tp)return e._internalPath;if(typeof e=="string")return Tv(t,e);throw _f("Field path arguments must be of type string or ",t,!1,void 0,n)}const yF=new RegExp("[~\\*/\\[\\]]");function Tv(t,e,n){if(e.search(yF)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tp(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _f(t,e,n,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||l)&&(c+=" (found",o&&(c+=` in field ${r}`),l&&(c+=` in document ${s}`),c+=")"),new Se(ue.INVALID_ARGUMENT,u+t+c)}function eA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(nA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vF extends tA{data(){return super.data()}}function nA(t,e){return typeof e=="string"?Tv(t,e):e instanceof tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Se(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wF{convertValue(e,n="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[hf].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>kt(l.doubleValue));return new wv(o)}convertGeoPoint(e){return new xv(kt(e.latitude),kt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const n=ji(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);Ye(xP(r));const s=new Tc(r.get(1),r.get(3)),o=new Pe(r.popFirst(5));return s.isEqual(n)||Os(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sA extends tA{constructor(e,n,r,s,o,l){super(e,n,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(nA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uh extends sA{data(e={}){return super.data(e)}}class _F{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ju(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uh(this._firestore,this._userDataWriter,r.key,r,new Ju(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(u=>{const c=new Uh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ju(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new Uh(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ju(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,g=-1;return u.type!==0&&(h=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),u.type!==1&&(l=l.add(u.doc),g=l.indexOf(u.doc.key)),{type:bF(u.type),doc:c,oldIndex:h,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){t=Rr(t,Dn);const e=Rr(t.firestore,qo);return aF(yv(e),t._key).then(n=>EF(e,t,n))}class iA extends wF{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dn(this.firestore,null,n)}}function qn(t){t=Rr(t,ep);const e=Rr(t.firestore,qo),n=yv(e),r=new iA(e);return xF(t._query),lF(n,t._query).then(s=>new _F(e,r,t,s))}function Sv(t,e,n){t=Rr(t,Dn);const r=Rr(t.firestore,qo),s=rA(t.converter,e,n);return ip(r,[YP(bv(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,cr.none())])}function xT(t,e,n,...r){t=Rr(t,Dn);const s=Rr(t.firestore,qo),o=bv(s);let l;return l=typeof(e=wt(e))=="string"||e instanceof tp?gF(o,"updateDoc",t._key,e,n,r):mF(o,"updateDoc",t._key,e),ip(s,[l.toMutation(t._key,cr.exists(!0))])}function Bh(t){return ip(Rr(t.firestore,qo),[new Zy(t._key,cr.none())])}function Pc(t,e){const n=Rr(t.firestore,qo),r=lr(t),s=rA(t.converter,e);return ip(n,[YP(bv(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}function ip(t,e){return function(r,s){const o=new Rs;return r.asyncQueue.enqueueAndForget(async()=>Q6(await oF(r),s,o)),o.promise}(yv(t),e)}function EF(t,e,n){const r=n.docs.get(e._key),s=new iA(t);return new sA(t,s,e._key,r,new Ju(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){jl=s})(zo),Oo(new Ri("firestore",(r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),u=new qo(new v$(r.getProvider("auth-internal")),new _$(l,r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Se(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(h.options.projectId,g)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Zr(TE,SE,e),Zr(TE,SE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firebasestorage.googleapis.com",aA="storageBucket",TF=2*60*1e3,SF=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends os{constructor(e,n,r=0){super(Cg(e),`Firebase Storage: ${n} (${Cg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _t;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_t||(_t={}));function Cg(t){return"storage/"+t}function kv(){const t="An unknown error occurred, please check the error payload for server response.";return new bt(_t.UNKNOWN,t)}function kF(t){return new bt(_t.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function CF(t){return new bt(_t.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PF(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new bt(_t.UNAUTHENTICATED,t)}function AF(){return new bt(_t.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IF(t){return new bt(_t.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function RF(){return new bt(_t.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NF(){return new bt(_t.CANCELED,"User canceled the upload/download.")}function jF(t){return new bt(_t.INVALID_URL,"Invalid URL '"+t+"'.")}function DF(t){return new bt(_t.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OF(){return new bt(_t.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aA+"' property when initializing the app?")}function LF(){return new bt(_t.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MF(){return new bt(_t.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VF(t){return new bt(_t.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function V0(t){return new bt(_t.INVALID_ARGUMENT,t)}function lA(){return new bt(_t.APP_DELETED,"The Firebase app was deleted.")}function $F(t){return new bt(_t.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lc(t,e){return new bt(_t.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fu(t){throw new bt(_t.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Hn.makeFromUrl(e,n)}catch{return new Hn(e,"")}if(r.path==="")return r;throw DF(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const l="(/(.*))?$",u=new RegExp("^gs://"+s+l,"i"),c={bucket:1,path:3};function h(z){z.path_=decodeURIComponent(z.path)}const g="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",b=new RegExp(`^https?://${v}/${g}/b/${s}/o${x}`,"i"),k={bucket:1,path:3},D=n===oA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",j=new RegExp(`^https?://${D}/${s}/${P}`,"i"),$=[{regex:u,indices:c,postModify:o},{regex:b,indices:k,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let z=0;z<$.length;z++){const H=$[z],Y=H.regex.exec(e);if(Y){const R=Y[H.indices.bucket];let E=Y[H.indices.path];E||(E=""),r=new Hn(R,E),H.postModify(r);break}}if(r==null)throw jF(e);return r}}class FF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t,e,n){let r=1,s=null,o=null,l=!1,u=0;function c(){return u===2}let h=!1;function g(...P){h||(h=!0,e.apply(null,P))}function v(P){s=setTimeout(()=>{s=null,t(b,c())},P)}function x(){o&&clearTimeout(o)}function b(P,...j){if(h){x();return}if(P){x(),g.call(null,P,...j);return}if(c()||l){x(),g.call(null,P,...j);return}r<64&&(r*=2);let $;u===1?(u=2,$=0):$=(r+Math.random())*1e3,v($)}let k=!1;function D(P){k||(k=!0,x(),!h&&(s!==null?(P||(u=2),clearTimeout(s),v(0)):P||(u=1)))}return v(0),o=setTimeout(()=>{l=!0,D(!0)},n),D}function BF(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zF(t){return t!==void 0}function WF(t){return typeof t=="object"&&!Array.isArray(t)}function Cv(t){return typeof t=="string"||t instanceof String}function wT(t){return Pv()&&t instanceof Blob}function Pv(){return typeof Blob<"u"}function _T(t,e,n,r){if(r<e)throw V0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw V0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function uA(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var jo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(jo||(jo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HF(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n,r,s,o,l,u,c,h,g,v,x=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=u,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,k)=>{this.resolve_=b,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ch(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=u=>{const c=u.loaded,h=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const u=o.getErrorCode()===jo.NO_ERROR,c=o.getStatus();if(!u||HF(c,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===jo.ABORT;r(!1,new Ch(!1,null,g));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Ch(h,o))})},n=(r,s)=>{const o=this.resolve_,l=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());zF(c)?o(c):o()}catch(c){l(c)}else if(u!==null){const c=kv();c.serverResponse=u.getErrorText(),this.errorCallback_?l(this.errorCallback_(u,c)):l(c)}else if(s.canceled){const c=this.appDelete_?lA():NF();l(c)}else{const c=RF();l(c)}};this.canceled_?n(!1,new Ch(!1,null,!0)):this.backoffId_=UF(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ch{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function KF(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function GF(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QF(t,e){e&&(t["X-Firebase-GMPID"]=e)}function JF(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function YF(t,e,n,r,s,o,l=!0){const u=uA(t.urlParams),c=t.url+u,h=Object.assign({},t.headers);return QF(h,e),KF(h,n),GF(h,o),JF(h,r),new qF(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function ZF(...t){const e=XF();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Pv())return new Blob(t);throw new bt(_t.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){if(typeof atob>"u")throw VF("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pg{constructor(e,n){this.data=e,this.contentType=n||null}}function nU(t,e){switch(t){case Gr.RAW:return new Pg(cA(e));case Gr.BASE64:case Gr.BASE64URL:return new Pg(dA(t,e));case Gr.DATA_URL:return new Pg(sU(e),iU(e))}throw kv()}function cA(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=t.charCodeAt(++n);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function rU(t){let e;try{e=decodeURIComponent(t)}catch{throw lc(Gr.DATA_URL,"Malformed data URL.")}return cA(e)}function dA(t,e){switch(t){case Gr.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw lc(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Gr.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw lc(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=tU(e)}catch(s){throw s.message.includes("polyfill")?s:lc(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class hA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw lc(Gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=oU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function sU(t){const e=new hA(t);return e.base64?dA(Gr.BASE64,e.rest):rU(e.rest)}function iU(t){return new hA(t).contentType}function oU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){let r=0,s="";wT(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(wT(this.data_)){const r=this.data_,s=eU(r,e,n);return s===null?null:new yi(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new yi(r,!0)}}static getBlob(...e){if(Pv()){const n=e.map(r=>r instanceof yi?r.data_:r);return new yi(ZF.apply(null,n))}else{const n=e.map(l=>Cv(l)?nU(Gr.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(l=>{for(let u=0;u<l.length;u++)s[o++]=l[u]}),new yi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){let e;try{e=JSON.parse(t)}catch{return null}return WF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function pA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t,e){return e}class xn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||uU}}let Ph=null;function cU(t){return!Cv(t)||t.length<2?t:pA(t)}function mA(){if(Ph)return Ph;const t=[];t.push(new xn("bucket")),t.push(new xn("generation")),t.push(new xn("metageneration")),t.push(new xn("name","fullPath",!0));function e(o,l){return cU(l)}const n=new xn("name");n.xform=e,t.push(n);function r(o,l){return l!==void 0?Number(l):l}const s=new xn("size");return s.xform=r,t.push(s),t.push(new xn("timeCreated")),t.push(new xn("updated")),t.push(new xn("md5Hash",null,!0)),t.push(new xn("cacheControl",null,!0)),t.push(new xn("contentDisposition",null,!0)),t.push(new xn("contentEncoding",null,!0)),t.push(new xn("contentLanguage",null,!0)),t.push(new xn("contentType",null,!0)),t.push(new xn("metadata","customMetadata",!0)),Ph=t,Ph}function dU(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new Hn(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function hU(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const l=n[o];r[l.local]=l.xform(r,e[l.server])}return dU(r,t),r}function gA(t,e,n){const r=fA(e);return r===null?null:hU(t,r,n)}function fU(t,e,n,r){const s=fA(e);if(s===null||!Cv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(h=>{const g=t.bucket,v=t.fullPath,x="/b/"+l(g)+"/o/"+l(v),b=op(x,n,r),k=uA({alt:"media",token:h});return b+k})[0]}function pU(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class Av{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){if(!t)throw kv()}function mU(t,e){function n(r,s){const o=gA(t,s,e);return yA(o!==null),o}return n}function gU(t,e){function n(r,s){const o=gA(t,s,e);return yA(o!==null),fU(o,s,t.host,t._protocol)}return n}function vA(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=AF():s=PF():n.getStatus()===402?s=CF(t.bucket):n.getStatus()===403?s=IF(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function xA(t){const e=vA(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=kF(t.path)),o.serverResponse=s.serverResponse,o}return n}function yU(t,e,n){const r=e.fullServerUrl(),s=op(r,t.host,t._protocol),o="GET",l=t.maxOperationRetryTime,u=new Av(s,o,gU(t,n),l);return u.errorHandler=xA(e),u}function vU(t,e){const n=e.fullServerUrl(),r=op(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function l(c,h){}const u=new Av(r,s,l,o);return u.successCodes=[200,204],u.errorHandler=xA(e),u}function xU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=xU(null,e)),r}function _U(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function u(){let $="";for(let z=0;z<2;z++)$=$+Math.random().toString().slice(2);return $}const c=u();l["Content-Type"]="multipart/related; boundary="+c;const h=wU(e,r,s),g=pU(h,n),v="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,x=`\r
--`+c+"--",b=yi.getBlob(v,r,x);if(b===null)throw LF();const k={name:h.fullPath},D=op(o,t.host,t._protocol),P="POST",j=t.maxUploadRetryTime,V=new Av(D,P,mU(t,n),j);return V.urlParams=k,V.headers=l,V.body=b.uploadData(),V.errorHandler=vA(e),V}class bU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Fu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class EU extends bU{initXhr(){this.xhr_.responseType="text"}}function Iv(){return new EU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this._service=e,n instanceof Hn?this._location=n:this._location=Hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Vo(e,n)}get root(){const e=new Hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pA(this._location.path)}get storage(){return this._service}get parent(){const e=aU(this._location.path);if(e===null)return null;const n=new Hn(this._location.bucket,e);return new Vo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $F(e)}}function TU(t,e,n){t._throwIfRoot("uploadBytes");const r=_U(t.storage,t._location,mA(),new yi(e,!0),n);return t.storage.makeRequestWithTokens(r,Iv).then(s=>({metadata:s,ref:t}))}function SU(t){t._throwIfRoot("getDownloadURL");const e=yU(t.storage,t._location,mA());return t.storage.makeRequestWithTokens(e,Iv).then(n=>{if(n===null)throw MF();return n})}function kU(t){t._throwIfRoot("deleteObject");const e=vU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Iv)}function CU(t,e){const n=lU(t._location.path,e),r=new Hn(t._location.bucket,n);return new Vo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){return/^[A-Za-z]+:\/\//.test(t)}function AU(t,e){return new Vo(t,e)}function wA(t,e){if(t instanceof Rv){const n=t;if(n._bucket==null)throw OF();const r=new Vo(n,n._bucket);return e!=null?wA(r,e):r}else return e!==void 0?CU(t,e):t}function IU(t,e){if(e&&PU(e)){if(t instanceof Rv)return AU(t,e);throw V0("To use ref(service, url), the first argument must be a Storage instance.")}else return wA(t,e)}function bT(t,e){const n=e==null?void 0:e[aA];return n==null?null:Hn.makeFromBucketSpec(n,t)}function RU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:bC(s,t.app.options.projectId))}class Rv{constructor(e,n,r,s,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=oA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=TF,this._maxUploadRetryTime=SF,this._requests=new Set,s!=null?this._bucket=Hn.makeFromBucketSpec(s,this._host):this._bucket=bT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Hn.makeFromBucketSpec(this._url,e):this._bucket=bT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vo(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new FF(lA());{const l=YF(e,this._appId,r,s,n,this._firebaseVersion,o);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const ET="@firebase/storage",TT="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="storage";function NU(t,e,n){return t=wt(t),TU(t,e,n)}function jU(t){return t=wt(t),SU(t)}function ST(t){return t=wt(t),kU(t)}function Ag(t,e){return t=wt(t),IU(t,e)}function DU(t=Wy(),e){t=wt(t);const r=Ff(t,_A).getImmediate({identifier:e}),s=xC("storage");return s&&OU(r,...s),r}function OU(t,e,n,r={}){RU(t,e,n,r)}function LU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Rv(n,r,s,e,zo)}function MU(){Oo(new Ri(_A,LU,"PUBLIC").setMultipleInstances(!0)),Zr(ET,TT,""),Zr(ET,TT,"esm2017")}MU();function Nv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function bA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VU=bA,EA=new $c("auth","Firebase",bA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new Uy("@firebase/auth");function $U(t,...e){bf.logLevel<=ze.WARN&&bf.warn(`Auth (${zo}): ${t}`,...e)}function zh(t,...e){bf.logLevel<=ze.ERROR&&bf.error(`Auth (${zo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(t,...e){throw jv(t,...e)}function ns(t,...e){return jv(t,...e)}function TA(t,e,n){const r=Object.assign(Object.assign({},VU()),{[e]:n});return new $c("auth","Firebase",r).create(e,{appName:t.name})}function Ci(t){return TA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return EA.create(t,...e)}function Re(t,e,...n){if(!t)throw jv(e,...n)}function Cs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zh(e),new Error(e)}function Ms(t,e){t||Cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FU(){return kT()==="http:"||kT()==="https:"}function kT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FU()||KM()||"connection"in navigator)?navigator.onLine:!0}function BU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ms(n>e,"Short delay should be less than long delay!"),this.isMobile=WM()||GM()}get(){return UU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t,e){Ms(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU=new Hc(3e4,6e4);function Ko(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zi(t,e,n,r,s={}){return kA(t,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const u=Fc(Object.assign({key:t.config.apiKey},l)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},o);return qM()||(h.referrerPolicy="no-referrer"),SA.fetch()(CA(t,t.config.apiHost,n,u),h)})}async function kA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zU),e);try{const s=new qU(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Ah(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const u=o.ok?l.errorMessage:l.error.message,[c,h]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(t,"credential-already-in-use",l);if(c==="EMAIL_EXISTS")throw Ah(t,"email-already-in-use",l);if(c==="USER_DISABLED")throw Ah(t,"user-disabled",l);const g=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw TA(t,g,h);Nr(t,g)}}catch(s){if(s instanceof os)throw s;Nr(t,"network-request-failed",{message:String(s)})}}async function ap(t,e,n,r,s={}){const o=await zi(t,e,n,r,s);return"mfaPendingCredential"in o&&Nr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function CA(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Dv(t.config,s):`${t.config.apiScheme}://${s}`}function HU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ns(this.auth,"network-request-failed")),WU.get())})}}function Ah(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ns(t,e,r);return s.customData._tokenResponse=n,s}function CT(t){return t!==void 0&&t.enterprise!==void 0}class KU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GU(t,e){return zi(t,"GET","/v2/recaptchaConfig",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t,e){return zi(t,"POST","/v1/accounts:delete",e)}async function PA(t,e){return zi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JU(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=Ov(r);Re(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:uc(Ig(s.auth_time)),issuedAtTime:uc(Ig(s.iat)),expirationTime:uc(Ig(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ig(t){return Number(t)*1e3}function Ov(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const s=yC(n);return s?JSON.parse(s):(zh("Failed to decode base64 JWT payload"),null)}catch(s){return zh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function PT(t){const e=Ov(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof os&&YU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ac(t,PA(n,{idToken:r}));Re(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?AA(o.providerUserInfo):[],u=e8(t.providerData,l),c=t.isAnonymous,h=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),g=c?h:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new F0(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(t,v)}async function ZU(t){const e=wt(t);await Ef(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e8(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function AA(t){return t.map(e=>{var{providerId:n}=e,r=Nv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(t,e){const n=await kA(t,{},async()=>{const r=Fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=CA(t,s,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",SA.fetch()(l,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function n8(t,e){return zi(t,"POST","/v2/accounts:revokeToken",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=PT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await t8(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,l=new ul;return r&&(Re(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(Re(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return Cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ps{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Nv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new F0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JU(this,e)}reload(){return ZU(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ps(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ef(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await Ac(this,QU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,l,u,c,h,g;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(s=n.email)!==null&&s!==void 0?s:void 0,b=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,k=(l=n.photoURL)!==null&&l!==void 0?l:void 0,D=(u=n.tenantId)!==null&&u!==void 0?u:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,j=(h=n.createdAt)!==null&&h!==void 0?h:void 0,V=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:$,emailVerified:z,isAnonymous:H,providerData:Y,stsTokenManager:R}=n;Re($&&R,e,"internal-error");const E=ul.fromJSON(this.name,R);Re(typeof $=="string",e,"internal-error"),di(v,e.name),di(x,e.name),Re(typeof z=="boolean",e,"internal-error"),Re(typeof H=="boolean",e,"internal-error"),di(b,e.name),di(k,e.name),di(D,e.name),di(P,e.name),di(j,e.name),di(V,e.name);const S=new Ps({uid:$,auth:e,email:x,emailVerified:z,displayName:v,isAnonymous:H,photoURL:k,phoneNumber:b,tenantId:D,stsTokenManager:E,createdAt:j,lastLoginAt:V});return Y&&Array.isArray(Y)&&(S.providerData=Y.map(I=>Object.assign({},I))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ul;s.updateFromServerResponse(n);const o=new Ps({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ef(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Re(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?AA(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),u=new ul;u.updateFromIdToken(r);const c=new Ps({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:l}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new F0(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=new Map;function As(t){Ms(t instanceof Function,"Expected a class definition");let e=AT.get(t);return e?(Ms(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,AT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IA.type="NONE";const IT=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e,n){return`firebase:${t}:${e}:${n}`}class cl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Wh(this.userKey,s.apiKey,o),this.fullPersistenceKey=Wh("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ps._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cl(As(IT),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let o=s[0]||As(IT);const l=Wh(r,e.config.apiKey,e.name);let u=null;for(const h of n)try{const g=await h._get(l);if(g){const v=Ps._fromJSON(e,g);h!==o&&(u=v),o=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new cl(o,e,r):(o=c[0],u&&await o._set(l,u.toJSON()),await Promise.all(n.map(async h=>{if(h!==o)try{await h._remove(l)}catch{}})),new cl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LA(e))return"Blackberry";if(MA(e))return"Webos";if(NA(e))return"Safari";if((e.includes("chrome/")||jA(e))&&!e.includes("edge/"))return"Chrome";if(OA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RA(t=pn()){return/firefox\//i.test(t)}function NA(t=pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jA(t=pn()){return/crios\//i.test(t)}function DA(t=pn()){return/iemobile/i.test(t)}function OA(t=pn()){return/android/i.test(t)}function LA(t=pn()){return/blackberry/i.test(t)}function MA(t=pn()){return/webos/i.test(t)}function Lv(t=pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function r8(t=pn()){var e;return Lv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s8(){return QM()&&document.documentMode===10}function VA(t=pn()){return Lv(t)||OA(t)||MA(t)||LA(t)||/windows phone/i.test(t)||DA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e=[]){let n;switch(t){case"Browser":n=RT(pn());break;case"Worker":n=`${RT(pn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((l,u)=>{try{const c=e(o);l(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8(t,e={}){return zi(t,"GET","/v2/passwordPolicy",Ko(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=6;class l8{constructor(e){var n,r,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:a8,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,l,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNumericCharacter)!==null&&l!==void 0?l:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NT(this),this.idTokenSubscription=new NT(this),this.beforeStateQueue=new i8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=EA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=As(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await cl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await PA(this,{idToken:e}),r=await Ps._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ar(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!l||l===u)&&(c!=null&&c.user)&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ef(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(Ci(this));const n=e?wt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(As(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o8(this),n=new l8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await n8(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&As(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[As(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(u,this,"internal-error"),u.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{l=!0,c()}}else{const c=e.addObserver(n);return()=>{l=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$A(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$U(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ml(t){return wt(t)}class NT{constructor(e){this.auth=e,this.observer=null,this.addObserver=rV(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c8(t){lp=t}function FA(t){return lp.loadJS(t)}function d8(){return lp.recaptchaEnterpriseScript}function h8(){return lp.gapiScript}function f8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class p8{constructor(){this.enterprise=new m8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class m8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const g8="recaptcha-enterprise",UA="NO_RECAPTCHA";class y8{constructor(e){this.type=g8,this.auth=Ml(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,u)=>{GU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const h=new KU(c);return o.tenantId==null?o._agentRecaptchaConfig=h:o._tenantRecaptchaConfigs[o.tenantId]=h,l(h.siteKey)}}).catch(c=>{u(c)})})}function s(o,l,u){const c=window.grecaptcha;CT(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(h=>{l(h)}).catch(()=>{l(UA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new p8().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(u=>{if(!n&&CT(window.grecaptcha))s(u,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let c=d8();c.length!==0&&(c+=u),FA(c).then(()=>{s(u,o,l)}).catch(h=>{l(h)})}}).catch(u=>{l(u)})})}}async function jT(t,e,n,r=!1,s=!1){const o=new y8(t);let l;if(s)l=UA;else try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const c=u.phoneEnrollmentInfo.phoneNumber,h=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const c=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function DT(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await jT(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await jT(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v8(t,e){const n=Ff(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Do(o,e??{}))return s;Nr(s,"already-initialized")}return n.initialize({options:e})}function x8(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(As);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function w8(t,e,n){const r=Ml(t);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=BA(e),{host:l,port:u}=_8(e),c=u===null?"":`:${u}`,h={url:`${o}//${l}${c}/`},g=Object.freeze({host:l,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Do(h,r.config.emulator)&&Do(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,b8()}function BA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _8(t){const e=BA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:OT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:OT(l)}}}function OT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function b8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cs("not implemented")}_getIdTokenResponse(e){return Cs("not implemented")}_linkToIdToken(e,n){return Cs("not implemented")}_getReauthenticationResolver(e){return Cs("not implemented")}}async function E8(t,e){return zi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(t,e){return ap(t,"POST","/v1/accounts:signInWithPassword",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S8(t,e){return ap(t,"POST","/v1/accounts:signInWithEmailLink",Ko(t,e))}async function k8(t,e){return ap(t,"POST","/v1/accounts:signInWithEmailLink",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Mv{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ic(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ic(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DT(e,n,"signInWithPassword",T8);case"emailLink":return S8(e,{email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return DT(e,r,"signUpPassword",E8);case"emailLink":return k8(e,{idToken:n,email:this._email,oobCode:this._password});default:Nr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(t,e){return ap(t,"POST","/v1/accounts:signInWithIdp",Ko(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8="http://localhost";class $o extends Mv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Nv(n,["providerId","signInMethod"]);if(!r||!s)return null;const l=new $o(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return dl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,dl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,dl(e,n)}buildRequest(){const e={requestUri:C8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function A8(t){const e=Hu(qu(t)).link,n=e?Hu(qu(e)).deep_link_id:null,r=Hu(qu(t)).deep_link_id;return(r?Hu(qu(r)).link:null)||r||n||e||t}class Vv{constructor(e){var n,r,s,o,l,u;const c=Hu(qu(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,g=(r=c.oobCode)!==null&&r!==void 0?r:null,v=P8((s=c.mode)!==null&&s!==void 0?s:null);Re(h&&g&&v,"argument-error"),this.apiKey=h,this.operation=v,this.code=g,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=c.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=A8(e);try{return new Vv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.providerId=Vl.PROVIDER_ID}static credential(e,n){return Ic._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vv.parseLink(n);return Re(r,"argument-error"),Ic._fromEmailAndCode(e,r.code,r.tenantId)}}Vl.PROVIDER_ID="password";Vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends zA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends qc{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com";vi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $o._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xi.credential(n,r)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends qc{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.GITHUB_SIGN_IN_METHOD="github.com";wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends qc{constructor(){super("twitter.com")}static credential(e,n){return $o._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return _i.credential(n,r)}catch{return null}}}_i.TWITTER_SIGN_IN_METHOD="twitter.com";_i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Ps._fromIdTokenResponse(e,r,s),l=LT(r);return new Sl({user:o,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=LT(r);return new Sl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function LT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf extends os{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Tf.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Tf(e,n,r,s)}}function WA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Tf._fromErrorAndOperation(t,o,e,r):o})}async function I8(t,e,n=!1){const r=await Ac(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Sl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(t,e,n=!1){const{auth:r}=t;if(ar(r.app))return Promise.reject(Ci(r));const s="reauthenticate";try{const o=await Ac(t,WA(r,s,e,t),n);Re(o.idToken,r,"internal-error");const l=Ov(o.idToken);Re(l,r,"internal-error");const{sub:u}=l;return Re(t.uid===u,r,"user-mismatch"),Sl._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Nr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t,e,n=!1){if(ar(t.app))return Promise.reject(Ci(t));const r="signIn",s=await WA(t,r,e),o=await Sl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function N8(t,e){return HA(Ml(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(t){const e=Ml(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function D8(t,e,n){return ar(t.app)?Promise.reject(Ci(t)):N8(wt(t),Vl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&j8(t),r})}function O8(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function L8(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function up(t,e,n,r){return wt(t).onAuthStateChanged(e,n,r)}function cp(t){return wt(t).signOut()}const Sf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Sf,"1"),this.storage.removeItem(Sf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=1e3,V8=10;class KA extends qA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=VA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,c)=>{this.notifyListeners(l,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);s8()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,V8):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},M8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}KA.type="LOCAL";const $8=KA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends qA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GA.type="SESSION";const QA=GA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new dp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(l).map(async h=>h(n.origin,o)),c=await F8(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((u,c)=>{const h=$v("",20);s.port1.start();const g=setTimeout(()=>{c(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const x=v;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(x.data.response);break;default:clearTimeout(g),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function B8(t){rs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function z8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function H8(){return JA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="firebaseLocalStorageDb",q8=1,kf="firebaseLocalStorage",XA="fbase_key";class Kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hp(t,e){return t.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function K8(){const t=indexedDB.deleteDatabase(YA);return new Kc(t).toPromise()}function U0(){const t=indexedDB.open(YA,q8);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kf,{keyPath:XA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kf)?e(r):(r.close(),await K8(),e(await U0()))})})}async function MT(t,e,n){const r=hp(t,!0).put({[XA]:e,value:n});return new Kc(r).toPromise()}async function G8(t,e){const n=hp(t,!1).get(e),r=await new Kc(n).toPromise();return r===void 0?null:r.value}function VT(t,e){const n=hp(t,!0).delete(e);return new Kc(n).toPromise()}const Q8=800,J8=3;class ZA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>J8)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dp._getInstance(H8()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await z8(),!this.activeServiceWorker)return;this.sender=new U8(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await U0();return await MT(e,Sf,"1"),await VT(e,Sf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>MT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G8(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>VT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=hp(s,!1).getAll();return new Kc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Q8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ZA.type="LOCAL";const Y8=ZA;new Hc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X8(t,e){return e?As(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv extends Mv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return dl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return dl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Z8(t){return HA(t.auth,new Fv(t),t.bypassAuthState)}function e9(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),R8(n,new Fv(t),t.bypassAuthState)}async function t9(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),I8(n,new Fv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:l,type:u}=e;if(l){this.reject(l);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Z8;case"linkViaPopup":case"linkViaRedirect":return t9;case"reauthViaPopup":case"reauthViaRedirect":return e9;default:Nr(this.auth,"internal-error")}}resolve(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ms(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9=new Hc(2e3,1e4);class sl extends e1{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ms(this.filter.length===1,"Popup operations only handle one event");const e=$v();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n9.get())};e()}}sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="pendingRedirect",Hh=new Map;class s9 extends e1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const r=await i9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function i9(t,e){const n=l9(e),r=a9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function o9(t,e){Hh.set(t._key(),e)}function a9(t){return As(t._redirectPersistence)}function l9(t){return Wh(r9,t.config.apiKey,t.name)}async function u9(t,e,n=!1){if(ar(t.app))return Promise.reject(Ci(t));const r=Ml(t),s=X8(r,e),l=await new s9(r,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=10*60*1e3;class d9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!t1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ns(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c9&&this.cachedEventUids.clear(),this.cachedEventUids.has($T(e))}saveEventToCache(e){this.cachedEventUids.add($T(e)),this.lastProcessedEventTime=Date.now()}}function $T(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function t1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return t1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f9(t,e={}){return zi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m9=/^https?/;async function g9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f9(t);for(const n of e)try{if(y9(n))return}catch{}Nr(t,"unauthorized-domain")}function y9(t){const e=$0(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!m9.test(n))return!1;if(p9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=new Hc(3e4,6e4);function FT(){const t=rs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function x9(t){return new Promise((e,n)=>{var r,s,o;function l(){FT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{FT(),n(ns(t,"network-request-failed"))},timeout:v9.get()})}if(!((s=(r=rs().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=rs().gapi)===null||o===void 0)&&o.load)l();else{const u=f8("iframefcb");return rs()[u]=()=>{gapi.load?l():n(ns(t,"network-request-failed"))},FA(`${h8()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw qh=null,e})}let qh=null;function w9(t){return qh=qh||x9(t),qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new Hc(5e3,15e3),b9="__/auth/iframe",E9="emulator/auth/iframe",T9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},S9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function k9(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Dv(e,E9):`https://${t.config.authDomain}/${b9}`,r={apiKey:e.apiKey,appName:t.name,v:zo},s=S9.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Fc(r).slice(1)}`}async function C9(t){const e=await w9(t),n=rs().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:k9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:T9,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=ns(t,"network-request-failed"),u=rs().setTimeout(()=>{o(l)},_9.get());function c(){rs().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A9=500,I9=600,R9="_blank",N9="http://localhost";class UT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j9(t,e,n,r=A9,s=I9){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},P9),{width:r.toString(),height:s.toString(),top:o,left:l}),h=pn().toLowerCase();n&&(u=jA(h)?R9:n),RA(h)&&(e=e||N9,c.scrollbars="yes");const g=Object.entries(c).reduce((x,[b,k])=>`${x}${b}=${k},`,"");if(r8(h)&&u!=="_self")return D9(e||"",u),new UT(null);const v=window.open(e||"",u,g);Re(v,t,"popup-blocked");try{v.focus()}catch{}return new UT(v)}function D9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="__/auth/handler",L9="emulator/auth/handler",M9=encodeURIComponent("fac");async function BT(t,e,n,r,s,o){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zo,eventId:s};if(e instanceof zA){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",nV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof qc){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const c=await t._getAppCheckToken(),h=c?`#${M9}=${encodeURIComponent(c)}`:"";return`${V9(t)}?${Fc(u).slice(1)}${h}`}function V9({config:t}){return t.emulator?Dv(t,L9):`https://${t.authDomain}/${O9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="webStorageSupport";class $9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QA,this._completeRedirectFn=u9,this._overrideRedirectResult=o9}async _openPopup(e,n,r,s){var o;Ms((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await BT(e,n,r,$0(),s);return j9(e,l,$v())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await BT(e,n,r,$0(),s);return B8(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Ms(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await C9(e),r=new d9(e);return n.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rg,{type:Rg},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Rg];l!==void 0&&n(!!l),Nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return VA()||NA()||Lv()}}const F9=$9;var zT="@firebase/auth",WT="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function z9(t){Oo(new Ri("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Re(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$A(t)},h=new u8(r,s,o,c);return x8(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Oo(new Ri("auth-internal",e=>{const n=Ml(e.getProvider("auth").getImmediate());return(r=>new U9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(zT,WT,B9(t)),Zr(zT,WT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=5*60,H9=_C("authIdTokenMaxAge")||W9;let HT=null;const q9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>H9)return;const s=n==null?void 0:n.token;HT!==s&&(HT=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K9(t=Wy()){const e=Ff(t,"auth");if(e.isInitialized())return e.getImmediate();const n=v8(t,{popupRedirectResolver:F9,persistence:[Y8,$8,QA]}),r=_C("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=q9(o.toString());L8(n,l,()=>l(n.currentUser)),O8(n,u=>l(u))}}const s=vC("auth");return s&&w8(n,`http://${s}`),n}function G9(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}c8({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=ns("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",G9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});z9("Browser");console.log("initializeApp:",typeof zy);console.log("getFirestore:",typeof Vi);const Q9={apiKey:"AIzaSyBOM041d620q5TBYfl7E6SexEqR8NGrWQE",authDomain:"aussie-gut-pack.firebaseapp.com",projectId:"aussie-gut-pack",storageBucket:"aussie-gut-pack.firebasestorage.app",messagingSenderId:"834797498886",appId:"1:834797498886:web:cb2f88ab4523480400c987"},fp=zy(Q9);console.log("Firebase app:",fp);const xt=Vi(fp);console.log("Firestore db:",xt);const Ng=DU(fp),Ns=K9(fp);function J9(){const{isDarkMode:t}=A.useContext(Ze),e=A.useRef(null),n=A.useRef(null),r=Dr(),[s,o]=A.useState(!1),[l,u]=A.useState(!1),[c,h]=A.useState({quotes:[],currentWorkout:{description:"",warmup:[],main:[]},scheduledWorkouts:[],aboutUs:"",dailyChallenges:[],lastUpdated:null}),[g,v]=A.useState(0),[x,b]=A.useState(null),[k,D]=A.useState(null),[P,j]=A.useState(()=>JSON.parse(localStorage.getItem("completedChallenges"))||[]);A.useEffect(()=>{(async()=>{var Me,_e;const I=lr(xt,"content","home"),O=await sp(I);let F={quotes:["An athlete won't judge you for working out.","A millionaire won't judge you for starting a business.","A musician won't judge you for trying to sing a song.","It's always the people going nowhere that have something to say.","Idle hands do the devil's work"],currentWorkout:{description:"A quick 20-minute routine to kickstart your metabolism and improve digestion.",warmup:["5-minute brisk walk or jog","3 sets of 15 squats"],main:["3 sets of 10 push-ups","2 sets of 20 jumping jacks","1-minute plank hold"]},scheduledWorkouts:[],aboutUs:"because your dog is demanding breakfast, but because you actually feel good. Were obsessed with gut health, movement, and all the little things that keep your body running like a well-oiled machine (or at least a decently maintained bicycle). Because lets be realwhen your digestion is on point and your energy isnt tanking by noon, life is just better. So whether youre here for the health tips, Aussie Shepherd appreciation, or just to figure out out why youre tired again, welcome to the party. Lets make wellness feel less like a chore and more like an adventure.",dailyChallenges:["Drink 8 glasses of water.","Take a 10-minute digestion-boosting walk with your Aussie.","Try a gut-friendly snack like yogurt or pumpkin."],lastUpdated:null};if(O.exists()){const ne=O.data();F={...F,...ne,currentWorkout:{...F.currentWorkout,...ne.currentWorkout,warmup:((Me=ne.currentWorkout)==null?void 0:Me.warmup)||F.currentWorkout.warmup,main:((_e=ne.currentWorkout)==null?void 0:_e.main)||F.currentWorkout.main},scheduledWorkouts:ne.scheduledWorkouts||[],dailyChallenges:ne.dailyChallenges||F.dailyChallenges}}const L=new Date,re=[...F.scheduledWorkouts];let pe=!1;if(re.sort((ne,me)=>new Date(ne.updateDateTime)-new Date(me.updateDateTime)),re.length>0){const ne=re[0],me=new Date(ne.updateDateTime);L>=me&&(!F.lastUpdated||new Date(F.lastUpdated)<me)&&(F.currentWorkout={description:ne.description||"",warmup:ne.warmup||[],main:ne.main||[]},re.shift(),F.scheduledWorkouts=re,F.lastUpdated=L.toISOString(),pe=!0)}pe&&await Sv(I,F,{merge:!0}),h(F);try{const ne=Kt(xt,"content","blog","posts"),fe=(await qn(ne)).docs.map(W=>({id:W.id,...W.data()}));if(fe.length>0){fe.sort((Ae,ie)=>new Date(ie.date)-new Date(Ae.date));const W=fe[0],te=V(W);b({...W,excerpt:te});const be=new Date("2025-04-16T00:00:00Z"),De=fe.filter(Ae=>new Date(Ae.date)>be).sort((Ae,ie)=>new Date(Ae.date)-new Date(ie.date));if(De.length>0){const Ae=De[0],ie=V(Ae);D({...Ae,excerpt:ie})}}else b({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}catch(ne){console.error("Error fetching blog posts:",ne),b({id:"1",title:"The Importance of Gut Health",date:"January 15, 2025",blocks:[{type:"paragraph",content:"Gut health is crucial for overall well-being..."}],excerpt:"Gut health is crucial for overall well-being..."})}})()},[]),console.log("Supabase client initialized:",Rn);const V=S=>{if(!S||!S.blocks||S.blocks.length===0)return"Read more...";const I=S.blocks.find(O=>O.type==="paragraph"||O.type==="list"||O.type==="bullet");return I?I.type==="paragraph"&&I.content?I.content.split(" ").slice(0,30).join(" ")+"...":Array.isArray(I.content)&&I.content.length>0?I.content[0]+(I.content.length>1?"...":""):"Read more...":"Read more..."};A.useEffect(()=>{const S=new IntersectionObserver(I=>{I.forEach(O=>{const F=O.isIntersecting;O.target===e.current&&o(F),O.target===n.current&&u(F)})},{threshold:.2});return e.current&&S.observe(e.current),n.current&&S.observe(n.current),()=>{e.current&&S.unobserve(e.current),n.current&&S.unobserve(n.current)}},[]),A.useEffect(()=>{const S=setInterval(()=>{v(I=>(I+1)%c.quotes.length)},4e3);return()=>clearInterval(S)},[c.quotes.length]),A.useEffect(()=>{localStorage.setItem("completedChallenges",JSON.stringify(P))},[P]);const $={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,y:-20,transition:{duration:.5,ease:"easeIn"}}},z={hidden:{opacity:0,scale:.8,y:20},visible:{opacity:1,scale:1,y:0,transition:{duration:.5,ease:"easeOut"}},exit:{opacity:0,scale:.8,y:-20,transition:{duration:.5,ease:"easeIn"}}},H=S=>{j(I=>I.includes(S)?I.filter(O=>O!==S):[...I,S])},Y=c.dailyChallenges.length>0&&P.length===c.dailyChallenges.length&&c.dailyChallenges.every((S,I)=>P.includes(I)),R="https://aussiegutpack.com",E=`${R}${r.pathname==="/"?"":r.pathname}`;return p.jsxs(p.Fragment,{children:[p.jsxs(kN,{children:[p.jsx("title",{children:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),p.jsx("meta",{name:"description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),p.jsx("meta",{name:"keywords",content:"gut health, digestive health, Australian Shepherd, wellness, fitness, daily challenges, Aussie Gut Pack"}),p.jsx("meta",{name:"robots",content:"index, follow"}),p.jsx("meta",{property:"og:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),p.jsx("meta",{property:"og:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),p.jsx("meta",{property:"og:type",content:"website"}),p.jsx("meta",{property:"og:url",content:E}),p.jsx("meta",{property:"og:image",content:`${R}/images/og-image.jpg`}),p.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),p.jsx("meta",{name:"twitter:title",content:"Aussie Gut Pack - Empowering Digestive Health Naturally"}),p.jsx("meta",{name:"twitter:description",content:"Join Aussie Gut Pack to improve your gut health and overall wellness with natural tips, workouts, and challenges inspired by Australian Shepherds."}),p.jsx("meta",{name:"twitter:image",content:`${R}/images/og-image.jpg`}),x&&p.jsx("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"BlogPosting",headline:x.title,datePublished:x.date,description:x.excerpt,author:{"@type":"Organization",name:"Aussie Gut Pack"},publisher:{"@type":"Organization",name:"Aussie Gut Pack",logo:{"@type":"ImageObject",url:`${R}/images/creatine.png`}},mainEntityOfPage:{"@type":"WebPage","@id":`${R}/blog/${x.id}`}})})]}),p.jsxs("main",{id:"main-content",className:`min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[p.jsx("section",{ref:e,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"container mx-auto text-center",children:[p.jsxs("header",{children:[p.jsx("h1",{className:`text-5xl md:text-6xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Welcome to Aussie Gut Pack"}),p.jsx("p",{className:`text-2xl max-w-2xl mx-auto mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Empowering Your Digestive Health, Naturally."})]}),p.jsxs("div",{className:`flex flex-col md:flex-row gap-6 transition-all duration-700 ease-in-out ${s?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[p.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[p.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"About Us"}),p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:c.aboutUs}),p.jsx("div",{className:"flex justify-center gap-4 mt-6",children:p.jsx(jn,{to:"/login",variant:"primary",className:"join-the-pack-button","aria-label":"Join the Aussie Gut Pack community",children:"Join the Pack"})})]}),p.jsx("div",{className:"md:w-1/2 flex justify-center items-center",children:p.jsx("div",{className:"h-80 w-80 md:h-[400px] md:w-[400px] overflow-hidden relative rounded-full",children:p.jsx(sD,{className:"w-full h-full object-cover"})})})]})]})}),p.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),p.jsx("section",{ref:n,className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:`container mx-auto text-center transition-all duration-700 ease-in-out ${l?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[p.jsx("h2",{className:`text-3xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Wisdom to Win The Day"}),p.jsx("div",{className:"max-w-2xl mx-auto mb-8",style:{minHeight:"80px"},children:p.jsx(Jg,{mode:"wait",children:p.jsxs(af.p,{variants:$,initial:"hidden",animate:"visible",exit:"exit",className:`text-xl italic transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:['"',c.quotes[g],'"']},g)})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[p.jsxs("section",{className:"workout-section","aria-labelledby":"workout-heading",children:[p.jsx("h3",{id:"workout-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Workout of the Day"}),p.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:c.currentWorkout.description}),p.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Warm Up"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-6 transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"}`,children:(c.currentWorkout.warmup||[]).map((S,I)=>p.jsx("li",{className:"mb-2 text-lg",children:S},`warmup-${I}`))}),(c.currentWorkout.sections||[]).map((S,I)=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-xl font-semibold mb-3 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:S.title||"Untitled Section"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:(S.exercises||[]).map((O,F)=>p.jsx("li",{className:"mb-2 text-lg",children:O},`section-${I}-exercise-${F}`))})]},`section-${I}`)),p.jsx(jn,{to:"/fitness-tips",variant:"primary",className:"mx-auto btn-primary bg-red-800 text-white hover:bg-red-900","aria-label":"View more fitness tips",children:"More Fitness Tips"})]}),p.jsxs("section",{className:"challenges-section","aria-labelledby":"challenges-heading",children:[p.jsx("h3",{id:"challenges-heading",className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Daily Gut Health Challenges"}),p.jsx("ul",{className:`text-left list-disc pl-6 mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,role:"list",children:(c.dailyChallenges||[]).map((S,I)=>p.jsxs("li",{className:"mb-2 text-lg flex items-center",children:[p.jsx("input",{type:"checkbox",id:`challenge-${I}`,checked:P.includes(I),onChange:()=>H(I),className:"mr-2","aria-label":`Mark challenge as completed: ${S}`,"aria-checked":P.includes(I)}),p.jsx("label",{htmlFor:`challenge-${I}`,children:S})]},`challenge-${I}`))}),p.jsx(Jg,{children:Y&&p.jsx(af.p,{variants:z,initial:"hidden",animate:"visible",exit:"exit",className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-green-400":"text-green-600"}`,"aria-live":"polite",children:"Great job, Pack Leader!"})})]})]})]})}),p.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),p.jsx("section",{className:`py-20 px-6 ${t?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"container mx-auto text-center",children:[p.jsx("h2",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Latest From Our Blog"}),x&&p.jsxs("article",{className:"mb-8",children:[p.jsx("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.title}),p.jsx("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:x.date}),p.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:x.excerpt}),p.jsx(jn,{to:`/blog/${x.id}`,variant:"primary",className:"mx-auto bg-red-800 text-white hover:bg-red-900","aria-label":`Read more about ${x.title}`,children:"Read More"})]}),k?p.jsxs("article",{children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Upcoming: ",k.title]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-600"}`,children:["Coming on"," ",new Date(k.date).toLocaleDateString()]}),p.jsx("p",{className:`text-lg mb-6 max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:k.excerpt}),p.jsx("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-gray-400":"text-gray-500"}`,children:"Stay tuned for this upcoming post!"})]}):p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"No upcoming blog posts at this time."})]})}),p.jsx("hr",{className:`my-12 ${t?"border-stone-700":"border-stone-300"}`}),p.jsxs("section",{className:`py-8 ${t?"bg-stone-800":"bg-stone-100"} text-center`,children:[p.jsx("p",{className:`text-lg mb-4 ${t?"text-white":"text-red-600"}`,children:"Want more? Sign up with us today!"}),p.jsx(jn,{to:"/login",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900","aria-label":"Sign up for Aussie Gut Pack",children:"Sign Up"})]})]})]})}const n1=A.createContext(),Y9=({children:t})=>{const[e,n]=A.useState([]),r=c=>{n(h=>h.find(v=>v.id===c.id)?h.map(v=>v.id===c.id?{...v,quantity:v.quantity+1}:v):[...h,{...c,quantity:1}])},s=(c,h)=>{h<=0?o(c):n(g=>g.map(v=>v.id===c?{...v,quantity:h}:v))},o=c=>{n(h=>h.filter(g=>g.id!==c))},l=()=>{n([])},u=()=>e.reduce((c,h)=>c+h.price*h.quantity,0);return p.jsx(n1.Provider,{value:{cart:e,addToCart:r,updateQuantity:s,removeFromCart:o,clearCart:l,getTotalPrice:u},children:t})},Uv=()=>A.useContext(n1);function X9(){var L;const{isDarkMode:t}=A.useContext(Ze),{cart:e,addToCart:n,updateQuantity:r,removeFromCart:s,getTotalPrice:o}=Uv(),[l,u]=A.useState([]),[c,h]=A.useState([]),[g,v]=A.useState(!1),[x,b]=A.useState(""),[k,D]=A.useState(""),[P,j]=A.useState(!1),[V,$]=A.useState(!0),[z,H]=A.useState(!1),Y=A.useRef(null),R=A.useRef(null),E=rn();A.useEffect(()=>{console.log("isMiniCartOpen updated to:",P)},[P]),A.useEffect(()=>{console.log("showAll updated to:",g)},[g]),A.useEffect(()=>{const re=pe=>{const Me=document.querySelector(".cart-button"),_e=pe.target.closest(".add-to-cart-button"),ne=Date.now(),me=R.current?ne-R.current:1/0;console.log("Outside click handler triggered, target:",pe.target),console.log("Is target an Add to Cart button?",!!_e),console.log("Time since last Add to Cart click:",me),console.log("IsMiniCartOpen?",P),console.log("OpenedByAdd?",z),P&&!pe.target.closest(".mini-cart-sidebar")&&!(Me!=null&&Me.contains(pe.target))&&!_e&&me>100&&!z&&(console.log("Outside click detected, closing sidebar"),j(!1))};return document.addEventListener("click",re),()=>document.removeEventListener("click",re)},[P,z]),A.useEffect(()=>{(async()=>{try{$(!0);const Me=(await qn(Kt(xt,"categories"))).docs.map(me=>({id:me.id,...me.data()}));u(Me);const ne=(await qn(Kt(xt,"products"))).docs.map(me=>({id:me.id,...me.data()}));h(ne)}catch(pe){console.error("Error fetching data from Firestore:",pe)}finally{$(!1)}})()},[]),A.useEffect(()=>(e.length>0&&(Y.current&&clearTimeout(Y.current),console.log("Cart updated, opening sidebar, cart length:",e.length),H(!0),j(!0),e.length!==1&&(Y.current=setTimeout(()=>{console.log("Auto-closing sidebar after 3 seconds"),j(!1),H(!1)},3e3))),()=>{Y.current&&clearTimeout(Y.current)}),[e]),A.useEffect(()=>{e.length===0&&P&&(console.log("Cart is empty, closing sidebar"),j(!1),H(!1))},[e,P]);const S=re=>{R.current=Date.now(),n(re)},I=re=>{const pe=[...re];switch(x){case"price-asc":return pe.sort((Me,_e)=>Me.price-_e.price);case"price-desc":return pe.sort((Me,_e)=>_e.price-Me.price);case"name-asc":return pe.sort((Me,_e)=>Me.name.localeCompare(_e.name));case"name-desc":return pe.sort((Me,_e)=>_e.name.localeCompare(Me.name));default:return pe}},O=k?c.filter(re=>re.categoryId===k):c,F=I(O);return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 flex ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:`text-4xl font-bold transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Products"}),p.jsxs("button",{className:"cart-button relative flex items-center gap-2 px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 active:bg-red-950",onClick:re=>{re.stopPropagation(),console.log("Cart button clicked, isMiniCartOpen:",P),j(!P)},children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 transition-transform duration-300 ease-in-out group-hover:scale-110",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),p.jsx("span",{children:"Cart"}),Array.isArray(e)&&e.length>0&&p.jsx("span",{className:`absolute -top-2 -right-2 bg-yellow-500 text-black rounded-full h-6 w-6 flex items-center justify-center text-sm transition-all duration-300 ease-in-out ${e.length>0?"animate-bounce":""}`,children:e.reduce((re,pe)=>re+pe.quantity,0)})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Filter by Section:"}),p.jsxs("select",{value:k,onChange:re=>D(re.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[p.jsx("option",{value:"",children:"All Sections"}),l.map(re=>p.jsx("option",{value:re.id,children:re.name},re.id))]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:`text-lg font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Sort By:"}),p.jsxs("select",{value:x,onChange:re=>b(re.target.value),className:`px-4 py-2 border rounded-md focus:outline-none transition-all duration-300 ease-in-out ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500 focus:border-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500 focus:border-red-500"}`,children:[p.jsx("option",{value:"",children:"None"}),p.jsx("option",{value:"price-asc",children:"Price: Low to High"}),p.jsx("option",{value:"price-desc",children:"Price: High to Low"}),p.jsx("option",{value:"name-asc",children:"Name: A-Z"}),p.jsx("option",{value:"name-desc",children:"Name: Z-A"})]})]})]}),p.jsx("button",{onClick:()=>{console.log("Show All button clicked, current showAll:",g),v(re=>{const pe=!re;return console.log("Setting showAll to:",pe),pe&&(console.log("Resetting filterCategory to show all products"),D("")),pe})},className:`px-4 py-2 rounded-md font-semibold transition-all duration-300 ease-in-out ${t?"bg-red-600 text-white hover:bg-red-700 active:bg-red-800":"bg-red-800 text-white hover:bg-red-900 active:bg-red-950"}`,children:g?"Group by Category":"Show All Products"})]}),V?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-600"})}):k?p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:((L=l.find(re=>re.id===k))==null?void 0:L.name)||"Section"}),F.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No products found in this section."}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:F.map(re=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:pe=>{pe.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${re.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:re.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:re.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",re.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Color: ",re.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Size: ",re.size]}),p.jsx("button",{onClick:pe=>{pe.stopPropagation(),R.current=Date.now(),S(re)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},re.id))})]}):g?p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:F.map(re=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:pe=>{pe.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${re.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:re.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:re.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",re.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Color: ",re.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Size: ",re.size]}),p.jsx("button",{onClick:pe=>{pe.stopPropagation(),R.current=Date.now(),S(re)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},re.id))}):l.map(re=>p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:re.name}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:I(c.filter(pe=>pe.categoryId===re.id)).map(pe=>p.jsxs("div",{className:`p-4 border rounded-md shadow-md transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:pe.image,alt:pe.name,className:"w-full h-48 object-cover rounded-md mb-4 transition-transform duration-300 ease-in-out hover:scale-105",onError:Me=>{Me.target.src="https://via.placeholder.com/80",console.error(`Failed to load image for ${pe.name}`)}}),p.jsx("h3",{className:`text-lg font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:pe.name}),p.jsx("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:pe.description}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",pe.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm mb-2 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Color: ",pe.color]}),p.jsxs("p",{className:`text-sm mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["Size: ",pe.size]}),p.jsx("button",{onClick:Me=>{Me.stopPropagation(),R.current=Date.now(),S(pe)},className:"add-to-cart-button bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out w-full",children:"Add to Cart"})]},pe.id))})]},re.id))]}),P&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mini-cart-backdrop fixed inset-0 bg-black bg-opacity-50 z-40 active",onClick:re=>{re.stopPropagation(),console.log("Backdrop clicked, closing sidebar"),j(!1)}}),p.jsx("div",{className:`mini-cart-sidebar w-80 p-6 border-l shadow-lg h-screen fixed right-0 top-0 z-50 overflow-y-auto transition-transform duration-300 ease-in-out transform ${P?"translate-x-0":"translate-x-full"} ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:p.jsxs("div",{className:`mini-cart-content ${P?"active":""}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Your Cart"}),p.jsx("button",{onClick:re=>{re.stopPropagation(),console.log("Close button clicked, closing sidebar"),j(!1)},className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300 hover:text-red-400":"text-stone-600 hover:text-red-600"}`,children:""})]}),!Array.isArray(e)||e.length===0?p.jsx("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}):p.jsxs("div",{className:"space-y-4",children:[p.jsx(jf,{component:null,children:e.map(re=>p.jsx(Nf,{timeout:300,classNames:"cart-item",children:p.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-md transition-all duration-300 ease-in-out ${t?"border-stone-600":"border-red-300"}`,children:[p.jsx("img",{src:re.image,alt:re.name,className:"w-16 h-16 object-cover rounded-md",onError:pe=>{pe.target.src="https://via.placeholder.com/80"}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:`text-sm font-medium transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:re.name}),p.jsxs("p",{className:`text-xs transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:["$",re.price.toFixed(2)," x ",re.quantity]}),p.jsx("div",{className:"flex items-center gap-2 mt-2",children:p.jsxs("div",{className:"flex items-center border-2 border-red-300 rounded-full px-2 py-1",children:[re.quantity===1?p.jsx("button",{onClick:pe=>{pe.stopPropagation(),s(re.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-all duration-300 ease-in-out",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4M9 7h6m-5 4v6m4-6v6"})})}):p.jsx("button",{onClick:pe=>{pe.stopPropagation(),r(re.id,re.quantity-1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"-"}),p.jsx("span",{className:`text-sm mx-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:re.quantity}),p.jsx("button",{onClick:pe=>{pe.stopPropagation(),r(re.id,re.quantity+1)},className:"text-black px-2 py-1 rounded-full hover:bg-gray-200 active:bg-gray-300 transition-all duration-300 ease-in-out",children:"+"})]})})]}),p.jsx("button",{onClick:pe=>{pe.stopPropagation(),s(re.id)},className:"text-red-600 hover:text-red-800 active:text-red-900 transition-colors duration-300 ease-in-out",children:""})]})},re.id))}),p.jsxs("div",{className:"border-t pt-4 mt-4",children:[p.jsxs("p",{className:`text-lg font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Subtotal: $",o().toFixed(2)]}),p.jsx("button",{onClick:re=>{re.stopPropagation(),j(!1),E("/cart")},className:"w-full bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 active:bg-red-950 transition-all duration-300 ease-in-out mt-4",children:"Go to Cart"}),p.jsx("button",{onClick:re=>{re.stopPropagation(),j(!1),E("/cart")},className:"w-full bg-red-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-700 active:bg-red-800 transition-all duration-300 ease-in-out mt-2",children:"Proceed to Checkout"})]})]})]})})]})]})}function Z9(){const{isDarkMode:t}=A.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r,clearCart:s,getTotalPrice:o}=Uv(),[l,u]=A.useState(!1),[c,h]=A.useState({name:"",email:"",address:""}),g=rn(),v=async x=>{if(x.preventDefault(),!c.name||!c.email||!c.address){alert("Please fill in all fields to proceed with checkout.");return}u(!0);try{const b={items:e,total:o(),customer:c,createdAt:new Date().toISOString(),status:"pending"};await Pc(Kt(xt,"orders"),b),s(),alert("Order placed successfully! Thank you for your purchase."),g("/")}catch(b){console.error("Error placing order:",b),alert("Failed to place order. Please try again.")}finally{u(!1),h({name:"",email:"",address:""})}};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-8 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Your Cart"}),e.length===0?p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),p.jsx("button",{onClick:()=>g("/products"),className:"bg-red-800 text-white px-6 py-3 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Shop Now"})]}):p.jsxs("div",{className:"space-y-8",children:[p.jsx("div",{className:"space-y-4",children:e.map(x=>p.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("img",{src:x.image,alt:x.name,className:"w-20 h-20 object-cover rounded-md",onError:b=>{b.target.src="https://via.placeholder.com/80"}}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:x.name}),p.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",x.price.toFixed(2)]}),p.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Subtotal: $",(x.price*x.quantity).toFixed(2)]})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{onClick:()=>n(x.id,x.quantity-1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"-"}),p.jsx("span",{className:`text-lg ${t?"text-white":"text-red-600"}`,children:x.quantity}),p.jsx("button",{onClick:()=>n(x.id,x.quantity+1),className:"bg-gray-300 text-black px-2 py-1 rounded-md hover:bg-gray-400 transition-colors duration-300 ease-in-out",disabled:l,children:"+"})]}),p.jsx("button",{onClick:()=>r(x.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",disabled:l,children:"Remove"})]},x.id))}),p.jsxs("div",{className:`p-6 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-white":"text-red-600"}`,children:"Order Summary"}),p.jsxs("p",{className:`text-lg mb-4 ${t?"text-stone-300":"text-stone-600"}`,children:["Total: $",o().toFixed(2)]}),p.jsxs("form",{onSubmit:v,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Full Name"}),p.jsx("input",{type:"text",value:c.name,onChange:x=>h({...c,name:x.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"John Doe",disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Email"}),p.jsx("input",{type:"email",value:c.email,onChange:x=>h({...c,email:x.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"john.doe@example.com",disabled:l})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${t?"text-white":"text-red-600"}`,children:"Shipping Address"}),p.jsx("textarea",{value:c.address,onChange:x=>h({...c,address:x.target.value}),required:!0,rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"123 Main St, City, Country",disabled:l})]}),p.jsx("button",{type:"submit",className:`w-full px-4 py-2 rounded-md font-semibold transition-colors duration-300 ease-in-out ${l?"bg-gray-500 text-white cursor-not-allowed":"bg-red-800 text-white hover:bg-red-900"}`,disabled:l,children:l?"Processing...":"Place Order"})]})]})]})]})}function e5(){const{isDarkMode:t}=A.useContext(Ze),{cart:e,updateQuantity:n,removeFromCart:r}=Uv(),s=Object.values(e).reduce((l,u)=>l+u.price*u.quantity,0),o=()=>{alert("Order placed successfully!"),Object.keys(e).forEach(l=>r(l))};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsxs("header",{className:"text-center mb-12",children:[p.jsx("h1",{className:`text-4xl font-bold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Checkout"}),p.jsx("p",{className:`text-lg max-w-2xl mx-auto transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Review your cart and place your order."})]}),Object.keys(e).length===0?p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"Your cart is empty."}),p.jsx(jn,{to:"/shop",variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Continue Shopping"})]}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([l,u])=>p.jsxs("div",{className:"flex items-center py-3 transition-colors duration-300 ease-in-out",children:[p.jsx("div",{className:"w-20 h-20 flex-shrink-0",children:p.jsx("img",{src:u.image||"https://via.placeholder.com/80",alt:u.name,className:"w-full h-full object-cover rounded"})}),p.jsxs("div",{className:"flex-1 ml-4",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsxs("div",{children:[p.jsx("h3",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:u.name}),p.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Color: ",u.color]}),p.jsxs("p",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Size: ",u.size]})]}),p.jsx("button",{onClick:()=>r(l),className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-400 hover:text-stone-300":"text-stone-500 hover:text-stone-600"}`,children:""})]}),p.jsxs("div",{className:"flex items-center mt-2",children:[p.jsx("button",{onClick:()=>n(l,-1),className:`w-8 h-8 flex items-center justify-center border rounded-l transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"-"}),p.jsx("span",{className:`w-10 h-8 flex items-center justify-center border-t border-b transition-colors duration-300 ease-in-out ${t?"border-stone-600 text-white":"border-stone-300 text-stone-600"}`,children:u.quantity}),p.jsx("button",{onClick:()=>n(l,1),className:`w-8 h-8 flex items-center justify-center border rounded-r transition-colors duration-300 ease-in-out ${t?"border-stone-600 bg-stone-700 text-white hover:bg-stone-600":"border-stone-300 bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:"+"})]})]}),p.jsx("div",{className:"text-right ml-4",children:u.originalPrice?p.jsxs("div",{children:[p.jsxs("p",{className:`text-sm line-through transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["$",(u.originalPrice*u.quantity).toFixed(2)]}),p.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})]}):p.jsxs("p",{className:`text-base font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["$",(u.price*u.quantity).toFixed(2)]})})]},l))}),p.jsxs("div",{className:"mt-12 text-right",children:[p.jsxs("p",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:["Total: $",s.toFixed(2)]}),p.jsx(jn,{onClick:o,variant:"primary",className:"mt-4 bg-red-800 text-white hover:bg-red-900",children:"Place Order"})]})]})]})}const B0=[{id:1,title:"Microbiome Basics",content:"Your gut contains over 100 trillion bacteria, with more than 1000 different species playing crucial roles in digestion, immunity, and overall health.",category:"Fundamentals"},{id:2,title:"Probiotics Matter",content:"Probiotics are live bacteria that can improve digestive health, boost immune function, and potentially help with mental health.",category:"Nutrition"},{id:3,title:"This means nothing to me",content:"This is all just filler crap",category:"Nutrition"},{id:4,title:"Worst for Gut Microbiome",content:["The following harm gut health (in order of severity):"," Stress: Elevates cortisol, disrupting gut flora and increasing permeability"," Glyphosate: Kills beneficial bacteria, feeds pathogenic ones"," Antibiotics: Kills good and bad bacteria; pair with spore-based probiotics to avoid yeast infections"," Seed Oils: Feed pathogenic bacteria, have a long half-life"," Refined Sugars: Feed harmful bacteria, promote dysbiosis"," Long-term Restrictive Diets: Reduce microbiome diversity"," Processed Foods: Contain antibiotics, glyphosate, and dyes that feed pathogenic bacteria and cancer cells"],category:"Gut Microbiome Education"},{id:5,title:"Types of Probiotics",content:`Key probiotic types include:
 Bacillus (subtilis, coagulans, clausii, indicus): Endospore-protected, survives gastric system and antibiotics, colonizes all gut areas, called 'next-generation probiotics'
 Lactobacillus (acidophilus, rhamnosus, reuteri, plantarum, casei, gasseri): Some strains survive gastric system, mainly colonize upper intestines
 Bifidobacterium (longum, infantis, bifidum, animalis, lactis): Doesnt survive gastric system or antibiotics, functions in lower intestines; seek exopolysaccharide strains for dendritic cell communication
 Saccharomyces (boulardii, cerevisiae): Gram-positive yeast, survives antibiotics but not gastric system, aids antibiotic-associated diarrhea`,category:"Gut Microbiome Education"},{id:6,title:"Pillars of a Healthy Gut",content:`Build a resilient gut with:
 A nutrient-dense, diverse, unprocessed diet with prebiotics
 Healthy exercise, sleep, and an uplifting social life worth enjoying
 Sun exposure and skin contact with nature
 Research-backed, third-party-tested supplements tailored to your needs`,category:"Gut Microbiome Education"},{id:7,title:"Boosts Cognition",content:"A healthy gut strengthens your immune system and helps fight off infections.",category:"Benefits"},{id:8,title:"Improves Digestion",content:"Proper gut health aids digestion, prevents bloating, and reduces stomach discomfort.",category:"Benefits"},{id:9,title:"Enhances Mental Health",content:"Your gut and brain are connectedgood gut health can help reduce anxiety and improve mood.",category:"Benefits"}];function Cf({title:t,content:e,footer:n,className:r}){const{isDarkMode:s}=A.useContext(Ze);return p.jsxs("div",{className:`p-4 border rounded-lg shadow-md ${s?"bg-stone-800 border-stone-700":"bg-white border-red-300"} ${r}`,children:[p.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${s?"text-red-400":"text-red-800"}`,children:t}),e&&p.jsx("p",{className:`mt-2 transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:e}),n&&p.jsx("p",{className:`mt-2 text-sm transition-colors duration-300 ease-in-out ${s?"text-white":"text-red-600"}`,children:n})]})}function t5(){const{isDarkMode:t}=A.useContext(Ze);A.useEffect(()=>{});const e=B0.filter(r=>r.category==="Benefits"),n=B0.filter(r=>r.category!=="Benefits");return p.jsxs("div",{className:`container mx-auto px-4 py-8 min-h-screen flex flex-col ${t?"bg-stone-900":"bg-white"}`,children:[p.jsx("div",{className:"pt-16"}),p.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Understanding Gut Health"}),p.jsxs("section",{className:"mb-8 flex-grow",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"What is Gut Health?"}),p.jsx("p",{className:`leading-relaxed transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Gut health refers to the balance and function of bacteria in the digestive system..."})]}),p.jsxs("section",{className:"py-12 px-6 flex-grow",children:[p.jsx("h2",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Why Gut Health Matters"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:e.map(r=>p.jsx(it,{to:`/gut-health/${r.id}`,children:p.jsx(Cf,{title:r.title,content:r.content,className:"hover:shadow-lg transition-shadow duration-300 ease-in-out"})},r.id))})]}),p.jsxs("section",{className:"flex-grow",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Gut Health Facts"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 gap-4",children:n.map(r=>p.jsx(it,{to:`/gut-health/${r.id}`,children:p.jsx(Cf,{title:r.title,content:r.content,footer:`Category: ${r.category}`,className:`border-l-4 border-red-500 hover:shadow-lg transition-shadow duration-300 ease-in-out ${t?"bg-stone-800":"bg-stone-50"}`})},r.id))})]})]})}function n5(){const{id:t}=If(),{isDarkMode:e}=A.useContext(Ze);rn();const n=B0.find(r=>r.id.toString()===t);return n?p.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[p.jsx("h1",{className:`text-3xl font-bold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),p.jsxs("p",{className:`mb-4 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:["Category: ",n.category]}),Array.isArray(n.content)?p.jsx("ul",{className:`text-lg mb-6 list-disc pl-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content.map((r,s)=>p.jsx("li",{className:"mb-2",children:r},s))}):p.jsx("p",{className:`text-lg mb-6 transition-colors duration-300 ease-in-out ${e?"text-white":"text-red-600"}`,children:n.content}),p.jsx(jn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]}):p.jsxs("div",{className:`min-h-screen container mx-auto p-6 ${e?"bg-stone-900":"bg-white"}`,children:[p.jsx("h1",{className:`text-3xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Fact Not Found"}),p.jsx(jn,{to:"/gut-health",variant:"primary",className:"bg-red-800 text-white hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Gut Health"})]})}const r5=[{id:1,name:"Enterogermina",description:"spore-forming probiotic that survives antibiotics and stomach acids, promoting gut health and recovery.",price:"",category:"Long Term",benefits:["Improve Digestion","Boost Immunity","Balance Gut Microbiome"],url:"https://a.co/d/ePluKSI"},{id:2,name:"Just thrive probiotic",description:"Something here about the product",price:29.99,category:"Long Term",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]},{id:3,name:"Megasporebiotic",description:"Something here about the product",price:29.99,category:"Fiber",benefits:["Support Gut Flora","Improve Digestion","Enhance Nutrient Absorption"]}];function s5(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),r=l=>n([...e,l]),s=l=>n(e.filter(u=>u.id!==l)),o=e.reduce((l,u)=>l+u.price,0);return p.jsxs("div",{className:"container mx-auto px-4 py-8",children:[p.jsx("h1",{className:`text-3xl font-bold mb-6 ${t?"text-green-300":"text-green-800"}`,children:"Purchase Gut Health Supplements"}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Available Products"}),r5.map(l=>p.jsxs("div",{className:`border p-4 mb-4 rounded-lg flex justify-between items-center ${t?"border-gray-700 bg-gray-800":"border-gray-300 bg-white"}`,children:[p.jsxs("div",{children:[p.jsx("h3",{className:`font-bold ${t?"text-gray-300":"text-gray-800"}`,children:l.name}),p.jsxs("p",{className:`${t?"text-green-400":"text-green-700"}`,children:["$",l.price]})]}),p.jsx(jn,{onClick:()=>r(l),variant:"primary",children:"Add to Cart"})]},l.id))]}),p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${t?"text-green-200":"text-green-700"}`,children:"Your Cart"}),e.length===0?p.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Your cart is empty"}):p.jsxs(p.Fragment,{children:[e.map(l=>p.jsxs("div",{className:`flex justify-between items-center border-b py-2 ${t?"border-gray-700":"border-gray-300"}`,children:[p.jsx("span",{className:`${t?"text-gray-300":"text-gray-800"}`,children:l.name}),p.jsxs("div",{children:[p.jsxs("span",{className:`mr-4 ${t?"text-green-400":"text-green-700"}`,children:["$",l.price]}),p.jsx("button",{onClick:()=>s(l.id),className:"text-red-500 hover:text-red-600",children:"Remove"})]})]},l.id)),p.jsxs("div",{className:`mt-4 font-bold ${t?"text-green-300":"text-green-800"}`,children:["Total: $",o.toFixed(2)]}),p.jsx(jn,{className:"mt-4 w-full",variant:"primary",disabled:e.length===0,children:"Checkout"})]})]})]})]})}var i5={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function o5(t){if(typeof t=="number")return{value:t,unit:"px"};var e,n=(t.match(/^[0-9.]*/)||"").toString();n.includes(".")?e=parseFloat(n):e=parseInt(n,10);var r=(t.match(/[^0-9]*$/)||"").toString();return i5[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function qT(t){var e=o5(t);return"".concat(e.value).concat(e.unit)}var a5=function(t,e,n){var r="react-spinners-".concat(t,"-").concat(n);if(typeof window>"u"||!window.document)return r;var s=document.createElement("style");document.head.appendChild(s);var o=s.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return o&&o.insertRule(l,0),r},Pf=function(){return Pf=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Pf.apply(this,arguments)},l5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n},u5=a5("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");function Rc(t){var e=t.loading,n=e===void 0?!0:e,r=t.color,s=r===void 0?"#000000":r,o=t.speedMultiplier,l=o===void 0?1:o,u=t.cssOverride,c=u===void 0?{}:u,h=t.size,g=h===void 0?35:h,v=l5(t,["loading","color","speedMultiplier","cssOverride","size"]),x=Pf({background:"transparent !important",width:qT(g),height:qT(g),borderRadius:"100%",border:"2px solid",borderTopColor:s,borderBottomColor:"transparent",borderLeftColor:s,borderRightColor:s,display:"inline-block",animation:"".concat(u5," ").concat(.75/l,"s 0s infinite linear"),animationFillMode:"both"},c);return n?A.createElement("span",Pf({style:x},v)):null}const c5=()=>{const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState(!0),[o,l]=A.useState(null);A.useEffect(()=>{(async()=>{try{const b=Kt(xt,"content","blog","posts"),D=(await qn(b)).docs.map(P=>{var j,V;return{id:P.id,title:P.data().title,blocks:P.data().blocks||[{type:"paragraph",content:""}],date:P.data().date||"",lastEdited:P.data().lastEdited||"",image:((V=(j=P.data().blocks)==null?void 0:j.find($=>$.type==="image"))==null?void 0:V.content)||""}});if(console.log("Fetched blog posts:",D),D.length>0){const P=D.sort((j,V)=>{const $=j.date?new Date(j.date):null,z=V.date?new Date(V.date):null;return console.log(`Sorting: ${j.title} (${j.date}) -> ${$}, ${V.title} (${V.date}) -> ${z}`),!$||isNaN($.getTime())?1:!z||isNaN(z.getTime())?-1:z-$});console.log("Sorted blog posts:",P),n(P)}else n([])}catch(b){console.error("Error fetching blog posts:",b),l("Failed to load blog posts. Please try again later."),n([])}finally{s(!1)}})()},[]);const u=x=>{if(!x)return"Date not set";const b=new Date(x);return isNaN(b.getTime())?"Invalid Date":b.toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"})},c=x=>{if(!x)return"Never edited";const b=new Date(x);return isNaN(b.getTime())?"Invalid Timestamp":b.toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},h=x=>{if(!x.blocks||x.blocks.length===0)return"Read more...";const b=x.blocks.find(k=>k.type==="paragraph"||k.type==="list"||k.type==="bullet");return b?b.type==="paragraph"?b.content.split(" ").slice(0,15).join(" ")+"...":Array.isArray(b.content)?b.content[0]+(b.content.length>1?"...":""):"Read more...":"Read more..."},g=x=>{if(!x.date)return!1;const b=new Date("2025-04-16T00:00:00Z"),k=new Date(x.date);return isNaN(k.getTime())?!1:k>b},v={hidden:{opacity:0,y:20},visible:x=>({opacity:1,y:0,transition:{delay:x*.1,duration:.5,ease:"easeOut"}})};return r?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),p.jsx("div",{className:"text-center",children:p.jsx(Rc,{color:t?"#f87171":"#b91c1c"})})]}):o?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o})]}):p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-12 text-center transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Our Blog"}),e.length===0?p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available yet. Check back soon!"}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:p.jsx(Jg,{children:e.map((x,b)=>{const k=g(x);return p.jsx(af.div,{custom:b,initial:"hidden",animate:"visible",variants:v,className:"group",children:k?p.jsx(Cf,{title:p.jsxs("span",{className:"flex items-center",children:[p.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-700"} group-hover:underline`,children:x.title}),p.jsx("span",{className:`ml-2 text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:"(Coming Soon)"})]}),footer:p.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[p.jsxs("p",{children:["Publish Date: ",u(x.date)]}),p.jsxs("p",{children:["Last Edited: ",c(x.lastEdited)]})]}),content:p.jsxs(p.Fragment,{children:[x.image&&p.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:p.jsx("img",{src:x.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out"})}),p.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(x)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 opacity-50":"bg-white border-red-800/50 opacity-50"} cursor-not-allowed overflow-hidden`}):p.jsx(it,{to:`/blog/${x.id}`,className:"block",children:p.jsx(Cf,{title:p.jsx("span",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-stone-200":"text-stone-800"} group-hover:underline`,children:x.title}),footer:p.jsxs("div",{className:`text-sm transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:[p.jsxs("p",{children:["Published: ",u(x.date)]}),p.jsxs("p",{children:["Last Edited: ",c(x.lastEdited)]})]}),content:p.jsxs(p.Fragment,{children:[x.image&&p.jsx("div",{className:"mb-4 h-48 w-full overflow-hidden rounded-lg",children:p.jsx("img",{src:x.image,alt:"Blog preview",className:"h-full w-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"})}),p.jsx("p",{className:`text-base transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"} line-clamp-3`,children:h(x)})]}),className:`relative p-6 rounded-xl shadow-lg transition-all duration-300 ease-in-out border-t-4 ${t?"bg-stone-800 border-red-400/50 hover:bg-stone-700 hover:shadow-xl":"bg-white border-red-800/50 hover:bg-stone-100 hover:shadow-xl"} overflow-hidden`})})},x.id)})})})]})},d5=()=>{const{id:t}=If(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0),[l,u]=A.useState(null),[c,h]=A.useState(!1);A.useEffect(()=>{(async()=>{try{o(!0),u(null);const k=lr(xt,"content","blog","posts",t),D=await sp(k);if(D.exists()){const P={id:D.id,...D.data()},j=new Date("2025-04-16T00:00:00Z"),V=P.date?new Date(P.date):null;V&&V>j?h(!0):h(!1),r(P)}else r(null)}catch(k){console.error("Error fetching blog post:",k),u("Failed to load blog post. Please try again later.")}finally{o(!1)}})()},[t]);const g=b=>b?new Date(b).toLocaleDateString([],{year:"numeric",month:"numeric",day:"numeric"}):"Date not set",v=b=>b?new Date(b).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",x={hidden:{opacity:0,y:20},visible:b=>({opacity:1,y:0,transition:{delay:b*.1,duration:.5,ease:"easeOut"}})};return s?p.jsx("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:p.jsx("div",{className:"text-center",children:p.jsx(Rc,{color:e?"#f87171":"b91c1c"})})}):l?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Error"}),p.jsx("p",{className:`text-lg text-center transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-600"}`,children:l}),p.jsx(jn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):n?c?p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Coming Soon"}),p.jsxs("p",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-300":"text-stone-600"}`,children:["This blog post will be available on ",g(n.date),"."]}),p.jsx(jn,{to:"/blog",variant:"primary",className:"mt-4 bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]}):p.jsx("div",{className:`min-h-screen container mx-auto px-4 sm:px-6 lg:px-8 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:p.jsxs("div",{className:"max-w-5xl mx-auto",children:[p.jsxs("div",{className:`relative rounded-xl shadow-lg p-8 mb-12 overflow-hidden border-t-4 ${e?"bg-gradient-to-r from-stone-800 to-stone-700 border-red-400/50":"bg-gradient-to-r from-white to-stone-100 border-red-800/50"}`,children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold mb-4 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:n.title}),p.jsxs("div",{className:`text-lg transition-colors duration-300 ease-in-out ${e?"text-stone-400":"text-stone-500"} flex flex-col sm:flex-row sm:items-center sm:space-x-4`,children:[p.jsxs("p",{children:["Published: ",g(n.date)]}),p.jsxs("p",{children:["Last Edited: ",v(n.lastEdited)]})]})]}),p.jsx("div",{className:`prose prose-lg max-w-none transition-colors duration-300 ease-in-out ${e?"text-stone-200 prose-invert":"text-stone-700"}`,children:n.blocks&&n.blocks.length>0?n.blocks.map((b,k)=>p.jsx(af.div,{custom:k,initial:"hidden",animate:"visible",variants:x,className:"mb-8",children:b.type==="paragraph"?p.jsx("p",{className:"leading-relaxed",children:b.content}):b.type==="list"&&Array.isArray(b.content)?p.jsx("ol",{className:"list-decimal pl-6 space-y-2",children:b.content.map((D,P)=>p.jsx("li",{className:"leading-relaxed",children:D},P))}):b.type==="bullet"&&Array.isArray(b.content)?p.jsx("ul",{className:"list-disc pl-6 space-y-2",children:b.content.map((D,P)=>p.jsx("li",{className:"leading-relaxed",children:D},P))}):b.type==="image"&&b.content?p.jsx("div",{className:"my-6",children:p.jsx("img",{src:b.content,alt:"Blog content",className:"w-full max-w-lg mx-auto rounded-lg shadow-md"})}):b.type==="link"&&b.content.url?p.jsx(it,{to:b.content.url,target:"_blank",rel:"noopener noreferrer",className:`underline transition-colors duration-300 ease-in-out ${e?"text-red-400 hover:text-red-300":"text-red-600 hover:text-red-500"}`,children:b.content.text||b.content.url}):p.jsx("p",{className:"text-red-500",children:"Invalid block format"})},k)):p.jsx("p",{children:"No content available."})}),p.jsxs(jn,{to:"/blog",variant:"primary",className:"mt-12 inline-flex items-center px-6 py-3 rounded-lg shadow-md transition-all duration-300 ease-in-out bg-red-800 text-white hover:bg-red-900 hover:shadow-lg",children:[p.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),"Back to Blog"]})]})}):p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${e?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${e?"text-red-400":"text-red-800"}`,children:"Post Not Found"}),p.jsx(jn,{to:"/blog",variant:"primary",className:"bg-red-800 text-white px-6 py-2 rounded-lg hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Blog"})]})},h5=[{question:"What is gut health?",answer:"Gut health refers to the balance of microorganisms in your digestive tract."},{question:"How can I improve my gut health?",answer:"Eating fiber-rich foods, fermented foods, and avoiding processed sugars can help."},{question:"What foods are good for gut health?",answer:"Fermented foods like yogurt, kimchi, and kefir, along with fiber-rich vegetables like broccoli and beans, are great for gut health."},{question:"Can stress affect gut health?",answer:"Yes, stress can alter the balance of gut bacteria and affect digestion, leading to issues like bloating or stomach discomfort."}];function f5(){const{isDarkMode:t}=A.useContext(Ze);return p.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[p.jsx("h1",{className:`text-4xl font-extrabold text-center mb-6 ${t?"text-green-300":"text-green-700"}`,children:"Frequently Asked Questions"}),p.jsx("div",{className:"space-y-4",children:h5.map((e,n)=>p.jsxs("details",{className:`group border p-4 rounded-lg shadow-md transition-all duration-300 ease-in-out ${t?"bg-gray-800 border-gray-700 text-gray-300":"bg-white border-gray-300 text-gray-800"}`,children:[p.jsxs("summary",{className:`cursor-pointer font-semibold text-lg flex justify-between items-center ${t?"group-open:text-green-400":"group-open:text-green-600"}`,children:[e.question,p.jsx("span",{className:"text-green-500 group-open:rotate-180 transition-transform duration-300",children:""})]}),p.jsx("p",{className:"mt-2 text-gray-600",children:e.answer})]},n))})]})}class Gc{constructor(e=0,n="Network Error"){this.status=e,this.text=n}}const p5=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},en={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:p5()},Bv=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},m5=(t,e="https://api.emailjs.com")=>{if(!t)return;const n=Bv(t);en.publicKey=n.publicKey,en.blockHeadless=n.blockHeadless,en.storageProvider=n.storageProvider,en.blockList=n.blockList,en.limitRate=n.limitRate,en.origin=n.origin||e},r1=async(t,e,n={})=>{const r=await fetch(en.origin+t,{method:"POST",headers:n,body:e}),s=await r.text(),o=new Gc(r.status,s);if(r.ok)return o;throw o},s1=(t,e,n)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n||typeof n!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},g5=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},i1=t=>t.webdriver||!t.languages||t.languages.length===0,o1=()=>new Gc(451,"Unavailable For Headless Browser"),y5=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},v5=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},x5=(t,e)=>t instanceof FormData?t.get(e):t[e],a1=(t,e)=>{if(v5(t))return!1;y5(t.list,t.watchVariable);const n=x5(e,t.watchVariable);return typeof n!="string"?!1:t.list.includes(n)},l1=()=>new Gc(403,"Forbidden"),w5=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},_5=async(t,e,n)=>{const r=Number(await n.get(t)||0);return e-Date.now()+r},u1=async(t,e,n)=>{if(!e.throttle||!n)return!1;w5(e.throttle,e.id);const r=e.id||t;return await _5(r,e.throttle,n)>0?!0:(await n.set(r,Date.now().toString()),!1)},c1=()=>new Gc(429,"Too Many Requests"),b5=async(t,e,n,r)=>{const s=Bv(r),o=s.publicKey||en.publicKey,l=s.blockHeadless||en.blockHeadless,u=s.storageProvider||en.storageProvider,c={...en.blockList,...s.blockList},h={...en.limitRate,...s.limitRate};return l&&i1(navigator)?Promise.reject(o1()):(s1(o,t,e),g5(n),n&&a1(c,n)?Promise.reject(l1()):await u1(location.pathname,h,u)?Promise.reject(c1()):r1("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"}))},E5=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},T5=t=>typeof t=="string"?document.querySelector(t):t,S5=async(t,e,n,r)=>{const s=Bv(r),o=s.publicKey||en.publicKey,l=s.blockHeadless||en.blockHeadless,u=en.storageProvider||s.storageProvider,c={...en.blockList,...s.blockList},h={...en.limitRate,...s.limitRate};if(l&&i1(navigator))return Promise.reject(o1());const g=T5(n);s1(o,t,e),E5(g);const v=new FormData(g);return a1(c,v)?Promise.reject(l1()):await u1(location.pathname,h,u)?Promise.reject(c1()):(v.append("lib_version","4.4.1"),v.append("service_id",t),v.append("template_id",e),v.append("user_id",o),r1("/api/v1.0/email/send-form",v))},k5={init:m5,send:b5,sendForm:S5,EmailJSResponseStatus:Gc};function C5(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState({name:"",email:"",message:""}),[r,s]=A.useState(""),o=u=>{const{name:c,value:h}=u.target;n(g=>({...g,[c]:h}))},l=u=>{u.preventDefault(),s("Sending..."),k5.send("service_abc123","template_xyz789",{from_name:e.name,from_email:e.email,message:e.message,to_email:"ThomasScales13@yahoo.com"},"user_123456").then(c=>{s("Thank you! Your inquiry has been sent."),n({name:"",email:"",message:""}),setTimeout(()=>s(""),3e3)},c=>{s("Failed to send message. Please try again."),console.error("EmailJS error:",c.text),setTimeout(()=>s(""),3e3)})};return p.jsx("div",{className:`min-h-screen py-12 px-4 ${t?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Contact Us"}),p.jsx("p",{className:`mb-8 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Have any questions or inquiries? Fill out the form below, and we'll get back to you as soon as possible!"}),p.jsxs("form",{onSubmit:l,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"name",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your Name"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Email"}),p.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"your@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"message",className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Message"}),p.jsx("textarea",{id:"message",name:"message",value:e.message,onChange:o,required:!0,rows:"5",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Your inquiry or message..."})]}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Send Message"}),r&&p.jsx("p",{className:`mt-4 text-center transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:r})]})]})})}function P5(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState(""),[r,s]=A.useState(""),[o,l]=A.useState(!1),[u,c]=A.useState(null),h=rn();A.useEffect(()=>{const x=up(Ns,b=>{l(!!b)});return()=>x()},[]);const g=async x=>{x.preventDefault(),c(null);try{await D8(Ns,e,r),l(!0)}catch(b){c("Failed to log in: "+b.message)}},v=async()=>{try{await cp(Ns),l(!1),h("/admin")}catch(x){c("Failed to log out: "+x.message)}};return o?p.jsxs("div",{className:`min-h-screen flex flex-col items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-8`,children:"Admin Dashboard"}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("button",{onClick:()=>h("/admin/home"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Edit Home Page Content"}),p.jsx("button",{onClick:()=>h("/admin/blog"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Blog Posts"}),p.jsx("button",{onClick:()=>h("/admin/products"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Manage Products"}),p.jsx("button",{onClick:()=>h("/"),className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Home"}),p.jsx("button",{onClick:v,className:"bg-red-800 text-white px-6 py-3 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]}):p.jsx("div",{className:`min-h-screen flex items-center justify-center ${t?"bg-stone-900":"bg-white"}`,children:p.jsxs("div",{className:`p-6 ${t?"bg-stone-800":"bg-stone-100"} rounded shadow`,children:[p.jsx("h2",{className:`text-2xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-4`,children:"Admin Login"}),u&&p.jsx("p",{className:`text-red-500 mb-4 ${t?"text-red-400":"text-red-600"}`,children:u}),p.jsxs("form",{onSubmit:g,children:[p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"email",value:e,onChange:x=>n(x.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter email",required:!0})}),p.jsx("div",{className:"mb-4",children:p.jsx("input",{type:"password",value:r,onChange:x=>s(x.target.value),className:`border p-2 w-full mb-4 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Enter password",required:!0})}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Login"})]})]})})}function A5(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([""]),[r,s]=A.useState(""),[o,l]=A.useState([""]),[u,c]=A.useState([{title:"Main Workout",exercises:[""]}]),[h,g]=A.useState([]),[v,x]=A.useState(""),[b,k]=A.useState([""]),[D,P]=A.useState(null),j=rn();A.useEffect(()=>{const Q=up(Ns,q=>{q||j("/admin")});return()=>Q()},[j]),A.useEffect(()=>{(async()=>{var q,Z,xe,Oe,It,Kn,as,Fs;try{const ls=lr(xt,"content","home"),Wi=await sp(ls);if(Wi.exists()){const Rt=Wi.data();n((q=Rt.quotes)!=null&&q.length?Rt.quotes:[""]),s(((Z=Rt.currentWorkout)==null?void 0:Z.description)||""),l((Oe=(xe=Rt.currentWorkout)==null?void 0:xe.warmup)!=null&&Oe.length?Rt.currentWorkout.warmup:[""]),c((Kn=(It=Rt.currentWorkout)==null?void 0:It.sections)!=null&&Kn.length?Rt.currentWorkout.sections:[{title:"Main Workout",exercises:[""]}]),g((as=Rt.scheduledWorkouts)!=null&&as.length?Rt.scheduledWorkouts.map(On=>({...On,warmup:On.warmup||[""],main:On.main||[""]})):[{description:"",warmup:[""],main:[""],updateDateTime:""}]),x(Rt.aboutUs||""),k((Fs=Rt.dailyChallenges)!=null&&Fs.length?Rt.dailyChallenges:[""])}}catch(ls){P("Failed to load content: "+ls.message)}})()},[]);const V=async()=>{P(null);const Q={quotes:e.filter(q=>q.trim()!==""),currentWorkout:{description:r,warmup:o.filter(q=>q.trim()!==""),sections:u.filter(q=>q.title.trim()&&q.exercises.some(Z=>Z.trim())).map(q=>({title:q.title,exercises:q.exercises.filter(Z=>Z.trim()!=="")}))},scheduledWorkouts:h.filter(q=>q.description.trim()&&(q.warmup.length>0||q.main.length>0)&&q.updateDateTime.trim()).map(q=>({description:q.description,warmup:q.warmup.filter(Z=>Z.trim()!==""),main:q.main.filter(Z=>Z.trim()!==""),updateDateTime:q.updateDateTime})),aboutUs:v.trim(),dailyChallenges:b.filter(q=>q.trim()!==""),lastUpdated:new Date().toISOString()};try{await Sv(lr(xt,"content","home"),Q),alert("Home page content saved successfully!"),j("/admin")}catch(q){P("Error saving changes: "+q.message)}},$=async()=>{try{await cp(Ns),j("/admin")}catch(Q){P("Failed to log out: "+Q.message)}},z=()=>n([...e,""]),H=Q=>n(e.filter((q,Z)=>Z!==Q)),Y=(Q,q)=>{const Z=[...e];Z[Q]=q,n(Z)},R=()=>l([...o,""]),E=Q=>l(o.filter((q,Z)=>Z!==Q)),S=(Q,q)=>{const Z=[...o];Z[Q]=q,l(Z)},I=()=>c([...u,{title:"",exercises:[""]}]),O=Q=>c(u.filter((q,Z)=>Z!==Q)),F=(Q,q)=>{const Z=[...u];Z[Q].title=q,c(Z)},L=Q=>{const q=[...u];q[Q].exercises.push(""),c(q)},re=(Q,q)=>{const Z=[...u];Z[Q].exercises=Z[Q].exercises.filter((xe,Oe)=>Oe!==q),c(Z)},pe=(Q,q,Z)=>{const xe=[...u];xe[Q].exercises[q]=Z,c(xe)},Me=()=>g([...h,{description:"",warmup:[""],main:[""],updateDateTime:""}]),_e=Q=>g(h.filter((q,Z)=>Z!==Q)),ne=(Q,q,Z)=>{const xe=[...h];xe[Q][q]=Z,g(xe)},me=Q=>{const q=[...h];q[Q].warmup.push(""),g(q)},fe=(Q,q)=>{const Z=[...h];Z[Q].warmup=Z[Q].warmup.filter((xe,Oe)=>Oe!==q),g(Z)},W=(Q,q,Z)=>{const xe=[...h];xe[Q].warmup[q]=Z,g(xe)},te=Q=>{const q=[...h];q[Q].main.push(""),g(q)},be=(Q,q)=>{const Z=[...h];Z[Q].main=Z[Q].main.filter((xe,Oe)=>Oe!==q),g(Z)},De=(Q,q,Z)=>{const xe=[...h];xe[Q].main[q]=Z,g(xe)},Ae=()=>k([...b,""]),ie=Q=>k(b.filter((q,Z)=>Z!==Q)),oe=(Q,q)=>{const Z=[...b];Z[Q]=q,k(Z)};return p.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Edit Home Page Content"}),D&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:D}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Quotes"}),e.map((Q,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:Z=>Y(q,Z.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Quote ${q+1}`}),p.jsx("button",{onClick:()=>H(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e.length===1,children:"Remove"})]},q)),p.jsx("button",{onClick:z,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Quote"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"About Us"}),p.jsx("textarea",{value:v,onChange:Q=>x(Q.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"About Us text"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Current Workout of the Day"}),p.jsx("textarea",{value:r,onChange:Q=>s(Q.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Current workout description"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-4 mb-2`,children:"Warm Up Exercises"}),o.map((Q,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:Z=>S(q,Z.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${q+1}`}),p.jsx("button",{onClick:()=>E(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:o.length===1,children:"Remove"})]},`warmup-${q}`)),p.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),u.map((Q,q)=>p.jsxs("div",{className:"mt-4",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx("input",{type:"text",value:Q.title,onChange:Z=>F(q,Z.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Section Title (e.g., Strength, Conditioning)"}),p.jsx("button",{onClick:()=>O(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:u.length===1,children:"Remove Section"})]}),Q.exercises.map((Z,xe)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Z,onChange:Oe=>pe(q,xe,Oe.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Exercise ${xe+1}`}),p.jsx("button",{onClick:()=>re(q,xe),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Q.exercises.length===1,children:"Remove"})]},`section-${q}-exercise-${xe}`)),p.jsx("button",{onClick:()=>L(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Exercise"})]},`section-${q}`)),p.jsx("button",{onClick:I,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Workout Section"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Scheduled Workouts"}),h.map((Q,q)=>p.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[p.jsx("input",{type:"datetime-local",value:Q.updateDateTime?Q.updateDateTime.slice(0,16):"",onChange:Z=>ne(q,"updateDateTime",new Date(Z.target.value).toISOString()),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Update Date and Time"}),p.jsx("textarea",{value:Q.description,onChange:Z=>ne(q,"description",Z.target.value),className:`border p-2 w-full h-24 mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Workout Description"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-blue-300":"text-blue-600"} mt-2 mb-2`,children:"Warm Up Exercises"}),Q.warmup.map((Z,xe)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Z,onChange:Oe=>W(q,xe,Oe.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Warm Up ${xe+1}`}),p.jsx("button",{onClick:()=>fe(q,xe),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Q.warmup.length===1,children:"Remove"})]},`warmup-${q}-${xe}`)),p.jsx("button",{onClick:()=>me(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mb-4",children:"Add Warm Up Exercise"}),p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mt-2 mb-2`,children:"Main Workout Exercises"}),Q.main.map((Z,xe)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Z,onChange:Oe=>De(q,xe,Oe.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Main Exercise ${xe+1}`}),p.jsx("button",{onClick:()=>be(q,xe),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:Q.main.length===1,children:"Remove"})]},`main-${q}-${xe}`)),p.jsx("button",{onClick:()=>te(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-2",children:"Add Main Exercise"}),p.jsx("button",{onClick:()=>_e(q),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",disabled:h.length===1&&!h[0].description,children:"Remove Workout"})]},q)),p.jsx("button",{onClick:Me,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Scheduled Workout"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:`text-xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-2`,children:"Daily Gut Health Challenges"}),b.map((Q,q)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:Q,onChange:Z=>oe(q,Z.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Challenge ${q+1}`}),p.jsx("button",{onClick:()=>ie(q),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:b.length===1,children:"Remove"})]},q)),p.jsx("button",{onClick:Ae,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add Challenge"})]}),p.jsx("button",{onClick:V,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),p.jsx("button",{onClick:()=>j("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:$,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})}function I5(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState(null),[o,l]=A.useState(null),u=rn();A.useEffect(()=>{const R=up(Ns,E=>{E||u("/admin")});return()=>R()},[u]),A.useEffect(()=>{(async()=>{try{const E=Kt(xt,"content","blog","posts"),O=(await qn(E)).docs.map(F=>({id:F.id,title:F.data().title||"",blocks:F.data().blocks||[{type:"paragraph",content:""}],date:F.data().date||"",lastEdited:F.data().lastEdited||""})).sort((F,L)=>{const re=F.date?new Date(F.date):new Date(0);return(L.date?new Date(L.date):new Date(0))-re});n(O.length?O:[{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:""}])}catch(E){l("Failed to load blog posts: "+E.message)}})()},[]);const c=async()=>{l(null);try{const R=Kt(xt,"content","blog","posts"),E=await qn(R);for(const S of E.docs)await Bh(S.ref);for(const S of e)if(S.title.trim()&&S.blocks.some(I=>I.type==="paragraph"||I.type==="image"||I.type==="link"?I.content.trim():I.content.some(O=>O.trim()))){const I=S.id||Date.now().toString();await Sv(lr(R,I),{id:I,title:S.title,blocks:S.blocks.map(O=>({type:O.type,content:O.type==="paragraph"||O.type==="image"?O.content:O.type==="link"?{url:O.content.url,text:O.content.text}:O.content.filter(F=>F.trim()!=="")})),date:S.date||new Date().toISOString(),lastEdited:S.lastEdited||new Date().toISOString()})}alert("Blog posts saved successfully!"),s(null),u("/admin")}catch(R){l("Error saving blog posts: "+R.message)}},h=async()=>{try{await cp(Ns),u("/admin")}catch(R){l("Failed to log out: "+R.message)}},g=()=>{const R=[...e,{id:"",title:"",blocks:[{type:"paragraph",content:""}],date:new Date().toISOString().split("T")[0],lastEdited:new Date().toISOString()}];n(R),s(R.length-1)},v=R=>{const E=e.filter((S,I)=>I!==R);n(E),s(null)},x=(R,E,S)=>{const I=[...e];I[R]={...I[R],[E]:S,lastEdited:new Date().toISOString()},n(I)},b=(R,E)=>{const S=[...e];S[R].blocks.push({type:E,content:E==="paragraph"||E==="image"?"":E==="link"?{url:"",text:""}:[""]}),S[R].lastEdited=new Date().toISOString(),n(S)},k=(R,E)=>{const S=[...e];S[R].blocks=S[R].blocks.filter((I,O)=>O!==E),S[R].lastEdited=new Date().toISOString(),n(S)},D=(R,E,S)=>{const I=[...e];I[R].blocks[E]={type:S,content:S==="paragraph"||S==="image"?"":S==="link"?{url:"",text:""}:[""]},I[R].lastEdited=new Date().toISOString(),n(I)},P=(R,E,S)=>{const I=[...e];I[R].blocks[E].content=S,I[R].lastEdited=new Date().toISOString(),n(I)},j=(R,E,S,I)=>{const O=[...e];O[R].blocks[E].content[S]=I,O[R].lastEdited=new Date().toISOString(),n(O)},V=(R,E)=>{const S=[...e];S[R].blocks[E].content.push(""),S[R].lastEdited=new Date().toISOString(),n(S)},$=(R,E,S)=>{const I=[...e];I[R].blocks[E].content=I[R].blocks[E].content.filter((O,F)=>F!==S),I[R].lastEdited=new Date().toISOString(),n(I)},z=(R,E,S,I)=>{const O=[...e];O[R].blocks[E].content[S]=I,O[R].lastEdited=new Date().toISOString(),n(O)},H=R=>R?new Date(R).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"Never edited",Y=R=>R?new Date(R).toLocaleDateString():"Not set";return p.jsxs("div",{className:`min-h-screen p-6 ${t?"bg-stone-900":"bg-white"}`,children:[p.jsx("h2",{className:`text-3xl transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"} mb-6`,children:"Manage Blog Posts"}),o&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:o}),r===null?p.jsxs("div",{className:"mb-6",children:[e.length===0?p.jsx("p",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-stone-300":"text-stone-600"}`,children:"No blog posts available. Add a new post to get started."}):p.jsx("div",{className:"grid gap-4",children:e.map((R,E)=>p.jsxs("div",{className:`p-4 border rounded cursor-pointer transition-all duration-300 ease-in-out hover:shadow-lg ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,onClick:()=>s(E),children:[p.jsx("h3",{className:`text-xl font-semibold transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:R.title||"Untitled Post"}),p.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Publish Date: ",Y(R.date)]}),p.jsxs("p",{className:`text-sm italic transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited: ",H(R.lastEdited)]})]},E))}),p.jsx("button",{onClick:g,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4",children:"Add Blog Post"}),p.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-4 ml-4",children:"Log Out"})]}):p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:`mb-4 border p-4 rounded ${t?"border-stone-600":"border-red-300"}`,children:[p.jsx("input",{type:"text",value:e[r].title,onChange:R=>x(r,"title",R.target.value),className:`border p-2 w-full mb-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Blog Title"}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block mb-1 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Publish Date:"}),p.jsx("input",{type:"date",value:e[r].date.split("T")[0]||"",onChange:R=>x(r,"date",R.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`})]}),p.jsxs("p",{className:`text-sm italic mb-4 transition-colors duration-300 ease-in-out ${t?"text-stone-400":"text-stone-500"}`,children:["Last Edited:"," ",H(e[r].lastEdited)]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("h4",{className:`text-lg transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Content Blocks"}),e[r].blocks.map((R,E)=>p.jsxs("div",{className:"mb-4 border-t pt-2 mt-2 border-stone-400",children:[p.jsxs("div",{className:"flex items-center mb-2",children:[p.jsx("label",{className:`mr-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Block Type:"}),p.jsxs("select",{value:R.type,onChange:S=>D(r,E,S.target.value),className:`border p-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,children:[p.jsx("option",{value:"paragraph",children:"Paragraph"}),p.jsx("option",{value:"list",children:"Numbered List"}),p.jsx("option",{value:"bullet",children:"Bullet Points"}),p.jsx("option",{value:"image",children:"Image"}),p.jsx("option",{value:"link",children:"Link"})]}),p.jsx("button",{onClick:()=>k(r,E),className:"ml-2 bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks.length===1,children:"Remove Block"})]}),R.type==="paragraph"?p.jsx("textarea",{value:R.content,onChange:S=>P(r,E,S.target.value),className:`border p-2 w-full h-24 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Paragraph Content"}):R.type==="image"?p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",value:R.content,onChange:S=>P(r,E,S.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Image URL (e.g., https://example.com/image.jpg)"}),R.content&&p.jsx("img",{src:R.content,alt:"Preview",className:"w-full max-w-xs rounded-lg shadow-md"})]}):R.type==="link"?p.jsxs("div",{className:"space-y-2",children:[p.jsx("input",{type:"text",value:R.content.url,onChange:S=>j(r,E,"url",S.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link URL (e.g., https://example.com)"}),p.jsx("input",{type:"text",value:R.content.text,onChange:S=>j(r,E,"text",S.target.value),className:`border p-2 w-full ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:"Link Text (e.g., Click here)"})]}):p.jsxs("div",{children:[R.content.map((S,I)=>p.jsxs("div",{className:"flex mb-2",children:[p.jsx("input",{type:"text",value:S,onChange:O=>z(r,E,I,O.target.value),className:`border p-2 w-full mr-2 ${t?"bg-stone-700 border-stone-600 text-white":"bg-white border-red-300 text-red-600"}`,placeholder:`Item ${I+1}`}),p.jsx("button",{onClick:()=>$(r,E,I),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",disabled:e[r].blocks[E].content.length===1,children:"Remove"})]},I)),p.jsx("button",{onClick:()=>V(r,E),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Add List Item"})]})]},E)),p.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[p.jsx("button",{onClick:()=>b(r,"paragraph"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Paragraph"}),p.jsx("button",{onClick:()=>b(r,"list"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Numbered List"}),p.jsx("button",{onClick:()=>b(r,"bullet"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Bullet Points"}),p.jsx("button",{onClick:()=>b(r,"image"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 easement-in-out",children:"Add Image"}),p.jsx("button",{onClick:()=>b(r,"link"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Link"})]})]}),p.jsx("button",{onClick:()=>v(r),className:"bg-red-800 text-white px-2 py-1 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2 mr-4",disabled:e.length===1,children:"Remove Post"}),p.jsx("button",{onClick:()=>s(null),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mt-2",children:"Back to List"})]}),p.jsx("button",{onClick:c,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Save Changes"}),p.jsx("button",{onClick:()=>u("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out mr-4",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:h,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}function R5(){const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]),[r,s]=A.useState([]),[o,l]=A.useState(""),[u,c]=A.useState({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""}),[h,g]=A.useState(null),[v,x]=A.useState(null),[b,k]=A.useState(null),D=rn();A.useEffect(()=>{const E=up(Ns,S=>{S||D("/admin")});return()=>E()},[D]),A.useEffect(()=>{(async()=>{try{const I=(await qn(Kt(xt,"categories"))).docs.map(L=>({id:L.id,...L.data()}));n(I);const F=(await qn(Kt(xt,"products"))).docs.map(L=>({id:L.id,...L.data()}));s(F)}catch(S){k("Error fetching data from Firestore: "+S.message)}})()},[]);const P=async E=>{if(E.preventDefault(),!!o)try{const S=await Pc(Kt(xt,"categories"),{name:o});n([...e,{id:S.id,name:o}]),l("")}catch(S){k("Error adding category: "+S.message)}},j=async E=>{try{const S=lr(xt,"categories",E.id);await xT(S,{name:E.name}),n(e.map(I=>I.id===E.id?{...I,name:E.name}:I)),g(null)}catch(S){k("Error updating category: "+S.message)}},V=async E=>{try{await Bh(lr(xt,"categories",E)),n(e.filter(I=>I.id!==E));const S=r.filter(I=>I.categoryId===E);for(const I of S){if(I.image&&I.image!=="https://via.placeholder.com/80"){const O=I.image.split("/products%2F")[1].split("?")[0],F=Ag(Ng,`products/${decodeURIComponent(O)}`);await ST(F).catch(L=>{k(`Error deleting image for product ${I.id}: `+L.message)})}await Bh(lr(xt,"products",I.id))}s(r.filter(I=>I.categoryId!==E))}catch(S){k("Error deleting category: "+S.message)}},$=async E=>{if(!E)return null;const S=Ag(Ng,`products/${E.name}`);return await NU(S,E),await jU(S)},z=async E=>{if(E.preventDefault(),!(!u.categoryId||!u.name||!u.price))try{const S=await $(u.image),I=await Pc(Kt(xt,"products"),{categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:S||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"});s([...r,{id:I.id,categoryId:u.categoryId,name:u.name,price:parseFloat(u.price),description:u.description||"No description available",image:S||"https://via.placeholder.com/80",color:u.color||"N/A",size:u.size||"N/A"}]),c({categoryId:"",name:"",price:"",description:"",image:null,color:"",size:""})}catch(S){k("Error adding product: "+S.message),alert("Failed to add product. Check Firebase Storage rules and ensure Storage is enabled.")}},H=async E=>{try{const S=E.image instanceof File?await $(E.image):E.image,I=lr(xt,"products",E.id);await xT(I,{categoryId:E.categoryId,name:E.name,price:parseFloat(E.price),description:E.description,image:S||"https://via.placeholder.com/80",color:E.color,size:E.size}),s(r.map(O=>O.id===E.id?{...O,categoryId:E.categoryId,name:E.name,price:parseFloat(E.price),description:E.description,image:S||"https://via.placeholder.com/80",color:E.color,size:E.size}:O)),x(null)}catch(S){k("Error updating product: "+S.message),alert("Failed to update product. Check Firebase Storage rules and ensure Storage is enabled.")}},Y=async E=>{try{const S=r.find(I=>I.id===E);if(S.image&&S.image!=="https://via.placeholder.com/80"){const I=S.image.split("/products%2F")[1].split("?")[0],O=Ag(Ng,`products/${decodeURIComponent(I)}`);await ST(O).catch(F=>{k(`Error deleting image for product ${E}: `+F.message)})}await Bh(lr(xt,"products",E)),s(r.filter(I=>I.id!==E))}catch(S){k("Error deleting product: "+S.message)}},R=async()=>{try{await cp(Ns),D("/admin")}catch(E){k("Failed to log out: "+E.message)}};return p.jsxs("div",{className:`min-h-screen container mx-auto px-6 py-12 ${t?"bg-stone-900":"bg-stone-50"}`,children:[p.jsx("h1",{className:`text-4xl font-bold mb-6 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-800"}`,children:"Admin - Manage Products"}),b&&p.jsx("p",{className:`text-red-500 mb-4 transition-colors duration-300 ease-in-out ${t?"text-red-400":"text-red-600"}`,children:b}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Category"}),p.jsxs("form",{onSubmit:P,className:"flex gap-4",children:[p.jsx("input",{type:"text",value:o,onChange:E=>l(E.target.value),placeholder:"Category Name",className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Add Category"})]})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Categories"}),p.jsx("div",{className:"space-y-4",children:e.map(E=>p.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(h==null?void 0:h.id)===E.id?p.jsxs("div",{className:"flex gap-4",children:[p.jsx("input",{type:"text",value:h.name,onChange:S=>g({...h,name:S.target.value}),className:`flex-1 px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),p.jsx("button",{onClick:()=>j(h),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out",children:"Save"}),p.jsx("button",{onClick:()=>g(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out",children:"Cancel"})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:E.name}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>g(E),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),p.jsx("button",{onClick:()=>V(E.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},E.id))})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Add New Product"}),p.jsxs("form",{onSubmit:z,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),p.jsxs("select",{value:u.categoryId,onChange:E=>c({...u,categoryId:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[p.jsx("option",{value:"",children:"Select a category"}),e.map(E=>p.jsx("option",{value:E.id,children:E.name},E.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",value:u.name,onChange:E=>c({...u,name:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Product Name"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:u.price,onChange:E=>c({...u,price:E.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Price (e.g., 29.99)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),p.jsx("textarea",{value:u.description,onChange:E=>c({...u,description:E.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-purple-300 text-purple-600 focus:ring-purple-500"}`,placeholder:"Product Description"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:E=>c({...u,image:E.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Color"}),p.jsx("input",{type:"text",value:u.color,onChange:E=>c({...u,color:E.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Color (optional)"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Size"}),p.jsx("input",{type:"text",value:u.size,onChange:E=>c({...u,size:E.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,placeholder:"Size (optional)"})]}),p.jsx("button",{type:"submit",className:"bg-red-800 text-white px-4 py-2 rounded-md font-semibold hover:bg-red-900 transition-colors duration-300 ease-in-out w-full",children:"Add Product"})]})]}),p.jsxs("div",{children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Manage Products"}),p.jsx("div",{className:"space-y-4",children:r.map(E=>{var S;return p.jsx("div",{className:`p-4 border rounded-md ${t?"border-stone-600 bg-stone-800":"border-red-300 bg-white"}`,children:(v==null?void 0:v.id)===E.id?p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Category"}),p.jsxs("select",{value:v.categoryId,onChange:I=>x({...v,categoryId:I.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`,children:[p.jsx("option",{value:"",children:"Select a category"}),e.map(I=>p.jsx("option",{value:I.id,children:I.name},I.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Name"}),p.jsx("input",{type:"text",value:v.name,onChange:I=>x({...v,name:I.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:v.price,onChange:I=>x({...v,price:I.target.value}),required:!0,className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Description"}),p.jsx("textarea",{value:v.description,onChange:I=>x({...v,description:I.target.value}),rows:"3",className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:I=>x({...v,image:I.target.files[0]}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`}),v.image&&typeof v.image=="string"&&p.jsx("img",{src:v.image,alt:"Current product",className:"w-32 h-32 object-cover mt-2 rounded-md"})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Color"}),p.jsx("input",{type:"text",value:v.color,onChange:I=>x({...v,color:I.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-2 transition-colors duration-300 ease-in-out ${t?"text-white":"text-red-600"}`,children:"Size"}),p.jsx("input",{type:"text",value:v.size,onChange:I=>x({...v,size:I.target.value}),className:`w-full px-4 py-2 border rounded-md focus:outline-none ${t?"bg-stone-700 border-stone-600 text-white focus:ring-red-500":"bg-white border-red-300 text-red-600 focus:ring-red-500"}`})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>H(v),className:"bg-green-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-green-700 transition-colors duration-300 ease-in-out w-full",children:"Save"}),p.jsx("button",{onClick:()=>x(null),className:"bg-gray-600 text-white px-4 py-2 rounded-md font-semibold hover:bg-gray-700 transition-colors duration-300 ease-in-out w-full",children:"Cancel"})]})]}):p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[E.image&&E.image!=="https://via.placeholder.com/80"&&p.jsx("img",{src:E.image,alt:E.name,className:"w-16 h-16 object-cover rounded-md"}),p.jsxs("div",{children:[p.jsx("span",{className:`text-lg font-medium ${t?"text-white":"text-red-600"}`,children:E.name}),p.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Category:"," ",((S=e.find(I=>I.id===E.categoryId))==null?void 0:S.name)||"Unknown"]}),p.jsxs("p",{className:`text-sm ${t?"text-stone-300":"text-stone-600"}`,children:["Price: $",E.price.toFixed(2)]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>x(E),className:"bg-blue-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-blue-700 transition-colors duration-300 ease-in-out",children:"Edit"}),p.jsx("button",{onClick:()=>Y(E.id),className:"bg-red-600 text-white px-4 py-1 rounded-md font-semibold hover:bg-red-700 transition-colors duration-300 ease-in-out",children:"Delete"})]})]})},E.id)})})]}),p.jsxs("div",{className:"mt-6 flex gap-4",children:[p.jsx("button",{onClick:()=>D("/admin"),className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Back to Admin Dashboard"}),p.jsx("button",{onClick:R,className:"bg-red-800 text-white px-4 py-2 rounded hover:bg-red-900 transition-colors duration-300 ease-in-out",children:"Log Out"})]})]})}const N5=()=>{const t=rn(),{isDarkMode:e}=A.useContext(Ze),n=()=>{t("/fitness-tracker/create-custom-plan")};return p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Fitness Tracker"}),p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Create a Custom Plan"}),p.jsx("div",{className:"text-center",children:p.jsx("button",{onClick:n,className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Create Custom Plan"})})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold text-center mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Track Your Progress"}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx(it,{to:"/fitness-tracker/log",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Log Meals & Workouts"}),p.jsx(it,{to:"/fitness-tracker/history",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"View History"})]})]})]})]})})},j5=()=>{const{id:t}=If(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0);A.useEffect(()=>{(async()=>{const h=Vi(),g=await sp(lr(h,"customPlans",t));g.exists()&&r({id:g.id,...g.data()}),o(!1)})()},[t]);const l=c=>{if(!(n!=null&&n.startDate))return"";const h=new Date(n.startDate);return h.setDate(h.getDate()+c*7),h.toLocaleDateString()},u=(c,h)=>{if(!(n!=null&&n.startDate))return"";const g=new Date(n.startDate);return g.setDate(g.getDate()+c*7+h),g.toLocaleDateString()};return s?p.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsx("p",{className:"text-xl",children:"Loading..."})}):n?p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:n.name}),p.jsx("div",{className:"max-w-4xl mx-auto",children:n.weeks.map((c,h)=>p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsxs("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:["Week ",c.week," (",l(h),")"]}),c.days.map((g,v)=>p.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[g.day," (",u(h,v),")"]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h4",{className:`font-semibold mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),p.jsx("ul",{className:"list-disc pl-5",children:g.workouts.map((x,b)=>p.jsxs("li",{children:[x.name,": ",x.sets," sets x ",x.reps," ","reps"]},b))})]})]},v))]},h))})]})}):p.jsx("div",{className:`min-h-screen pt-20 flex items-center justify-center ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsx("p",{className:"text-xl",children:"Plan not found."})})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var O5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...u},c)=>A.createElement("svg",{ref:c,...O5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:d1("lucide",s),...u},[...l.map(([h,g])=>A.createElement(h,g)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=(t,e)=>{const n=A.forwardRef(({className:r,...s},o)=>A.createElement(L5,{ref:o,iconNode:e,className:d1(`lucide-${D5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zv=$l("ChevronDown",M5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wv=$l("ChevronUp",V5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],hl=$l("CircleCheckBig",$5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fl=$l("CircleX",F5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],B5=$l("SquarePen",U5);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],W5=$l("Trash2",z5),H5=()=>{const t=rn(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(""),[s,o]=A.useState(new Date().toISOString().split("T")[0]),[l,u]=A.useState([]),[c,h]=A.useState({}),[g,v]=A.useState(Array.from({length:6},(z,H)=>({week:H+1,days:[{day:"Monday",workouts:[]},{day:"Tuesday",workouts:[]},{day:"Wednesday",workouts:[]},{day:"Thursday",workouts:[]},{day:"Friday",workouts:[]},{day:"Saturday",workouts:[]},{day:"Sunday",workouts:[]}]}))),[x,b]=A.useState(Array(6).fill(!1));A.useEffect(()=>{(async()=>{const H=Vi(),R=(await qn(Kt(H,"workouts"))).docs.map(S=>({id:S.id,...S.data()})),E=R.reduce((S,I)=>{const O=I.muscleGroup||"Other";return S[O]||(S[O]=[]),S[O].push(I),S},{});u(R),h(E)})()},[]);const k=z=>{const H=[...x];H[z]=!H[z],b(H)},D=(z,H)=>{var R;const Y=[...g];Y[z].days[H].workouts.push({name:((R=l[0])==null?void 0:R.name)||"",sets:3,reps:10}),v(Y)},P=(z,H,Y,R,E)=>{const S=[...g];S[z].days[H].workouts[Y][R]=E,v(S)},j=async z=>{z.preventDefault();const H=Vi(),Y={userId:"anonymous",name:n,startDate:new Date(s).toISOString(),weeks:g},R=await Pc(Kt(H,"customPlans"),Y);t(`/fitness-tracker/plan/${R.id}`)},V=z=>{const H=new Date(s);return H.setDate(H.getDate()+z*7),H.toLocaleDateString()},$=(z,H)=>{const Y=new Date(s);return Y.setDate(Y.getDate()+z*7+H),Y.toLocaleDateString()};return p.jsx("div",{className:`min-h-screen pt-20 ${e?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Create Custom Plan"}),p.jsxs("form",{onSubmit:j,children:[p.jsx("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Plan Name"}),p.jsx("input",{type:"text",value:n,onChange:z=>r(z.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Start Date"}),p.jsx("input",{type:"date",value:s,onChange:z=>o(z.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]})]})}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((z,H)=>p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-2 rounded-md transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>k(H),children:[p.jsxs("h2",{className:`text-2xl font-semibold ${e?"text-red-400":"text-red-800"}`,children:["Week ",z.week," (",V(H),")"]}),x[H]?p.jsx(Wv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`}):p.jsx(zv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"}`})]}),x[H]&&p.jsx("div",{className:"mt-4",children:z.days.map((Y,R)=>p.jsxs("div",{className:`border p-4 rounded-md mb-4 ${e?"border-stone-600":"border-red-200"}`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:[Y.day," (",$(H,R),")"]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("h4",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Workouts:"}),Y.workouts.length>0?Y.workouts.map((E,S)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:E.name,onChange:I=>P(H,R,S,"name",I.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:Object.keys(c).map(I=>p.jsx("optgroup",{label:I,children:c[I].map(O=>p.jsx("option",{value:O.name,children:O.name},O.id))},I))}),p.jsx("input",{type:"number",value:E.sets,onChange:I=>P(H,R,S,"sets",Number(I.target.value)),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),p.jsx("input",{type:"text",value:E.reps,onChange:I=>P(H,R,S,"reps",I.target.value),className:`w-full sm:w-20 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},S)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),p.jsx("button",{type:"button",onClick:()=>D(H,R),className:"mt-2 w-full p-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]})]},R))})]},H))}),p.jsx("div",{className:"mt-8 max-w-md mx-auto",children:p.jsx("button",{type:"submit",className:"w-full p-3 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Plan"})})]})]})})},q5=()=>{const t=rn(),{isDarkMode:e}=A.useContext(Ze),{user:n,loading:r}=A.useContext($s),[s,o]=A.useState([]),[l,u]=A.useState([]),[c,h]=A.useState([]),[g,v]=A.useState([]),[x,b]=A.useState(new Date().toISOString().split("T")[0]);A.useEffect(()=>{(async()=>{try{const R=Vi(),E=await qn(Kt(R,"workouts")),S=await qn(Kt(R,"foods")),I=E.docs.map(F=>({id:F.id,...F.data()})),O=S.docs.map(F=>({id:F.id,...F.data()}));console.log("Fetched workouts from 'workouts' collection:",I),console.log("Fetched meals from 'foods' collection:",O),o(I),u(O),I.length===0&&console.warn("No workouts found in Firestore 'workouts' collection."),O.length===0&&console.warn("No meals found in Firestore 'foods' collection.")}catch(R){console.error("Error fetching data:",R)}})()},[]);const k=l.reduce((Y,R)=>{const E=R.category||"Misc";return Y[E]||(Y[E]=[]),Y[E].push(R),Y},{}),D=["Meat","Fruit","Vegetable","Starch","Misc"],P=()=>{if(s.length===0){alert("No workouts available to add. Please add workouts in Firestore.");return}h([...c,{name:s[0].name,sets:0,reps:0}])},j=(Y,R,E)=>{const S=[...c];S[Y][R]=R==="sets"||R==="reps"?Number(E):E,h(S)},V=()=>{if(l.length===0){alert("No meals available to add. Please add meals in Firestore.");return}v([...g,{name:l[0].name,quantity:1}])},$=(Y,R,E)=>{const S=[...g];S[Y][R]=R==="quantity"?Number(E):E,v(S)},z=Y=>{const R=l.find(E=>E.name===Y.name);return R?{protein:R.macros.protein*Y.quantity,carbs:R.macros.carbs*Y.quantity,fats:R.macros.fats*Y.quantity}:{protein:0,carbs:0,fats:0}},H=async Y=>{if(Y.preventDefault(),!n){alert("Please log in to save a fitness log."),t("/login");return}const R=Vi(),E={userId:n.uid,date:new Date(x).toISOString(),workouts:c,meals:g.map(S=>({...S,macros:z(S)}))};await Pc(Kt(R,"userLogs"),E),t("/fitness-tracker/history")};return r?p.jsx("div",{className:"container mx-auto px-4 py-10",children:"Loading..."}):p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${e?"text-red-400":"text-red-800"}`,children:"Log Fitness"}),p.jsxs("form",{onSubmit:H,className:"max-w-4xl mx-auto",children:[p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("label",{className:`block text-xl font-semibold mb-2 ${e?"text-red-400":"text-red-800"}`,children:"Date"}),p.jsx("input",{type:"date",value:x,onChange:Y=>b(Y.target.value),className:`w-full p-3 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,required:!0})]}),p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Workouts"}),s.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts available. Please add workouts in Firestore."}):c.length>0?c.map((Y,R)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:Y.name,onChange:E=>j(R,"name",E.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:s.map(E=>p.jsx("option",{value:E.name,children:E.name},E.id))}),p.jsx("input",{type:"number",value:Y.sets,onChange:E=>j(R,"sets",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Sets"}),p.jsx("input",{type:"number",value:Y.reps,onChange:E=>j(R,"reps",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Reps"})]},R)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No workouts added yet."}),p.jsx("button",{type:"button",onClick:P,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Workout"})]}),p.jsxs("div",{className:`mb-8 p-6 rounded-lg shadow-md ${e?"bg-stone-800":"bg-red-50"}`,children:[p.jsx("h2",{className:`text-2xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"}`,children:"Meals"}),l.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Firestore."}):g.length>0?g.map((Y,R)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-3",children:[p.jsx("select",{value:Y.name,onChange:E=>$(R,"name",E.target.value),className:`w-full sm:w-1/3 p-2 border rounded-md focus:outline-none focus:ring-2 mb-2 sm:mb-0 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,children:D.map(E=>k[E]&&p.jsx("optgroup",{label:E,children:k[E].map(S=>p.jsx("option",{value:S.name,children:S.name},S.id))},E))}),p.jsx("input",{type:"number",value:Y.quantity,onChange:E=>$(R,"quantity",E.target.value),className:`w-full sm:w-24 p-2 border rounded-md focus:outline-none focus:ring-2 ${e?"bg-stone-800 border-stone-600 text-red-400 focus:ring-red-800":"bg-white border-red-200 text-red-800 focus:ring-red-800"}`,placeholder:"Quantity"})]},R)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),p.jsx("button",{type:"button",onClick:V,className:"mt-2 px-4 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Add Meal"})]}),p.jsx("div",{className:"text-center",children:p.jsx("button",{type:"submit",className:"px-6 py-2 rounded-md transition-colors duration-200 bg-red-800 text-white hover:bg-red-900",children:"Save Log"})})]})]})},K5=()=>{const{isDarkMode:t}=A.useContext(Ze),[e,n]=A.useState([]);return A.useEffect(()=>{(async()=>{const s=Vi(),l=(await qn(Kt(s,"userLogs"))).docs.map(u=>({id:u.id,...u.data()}));n(l.sort((u,c)=>new Date(c.date)-new Date(u.date)))})()},[]),p.jsx("div",{className:`min-h-screen pt-20 ${t?"bg-stone-900 text-red-400":"bg-white text-red-800"}`,children:p.jsxs("div",{className:"container mx-auto px-4 py-10",children:[p.jsx("h1",{className:`text-4xl font-bold text-center mb-8 ${t?"text-red-400":"text-red-800"}`,children:"Fitness History"}),p.jsx("div",{className:"max-w-2xl mx-auto",children:e.length>0?e.map(r=>p.jsxs("div",{className:`border p-6 rounded-lg shadow-md mb-6 ${t?"border-stone-600 bg-stone-800":"border-red-200 bg-red-50"}`,children:[p.jsx("h2",{className:`text-xl font-semibold mb-2 ${t?"text-red-400":"text-red-800"}`,children:new Date(r.date).toLocaleDateString()}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Workouts:"}),p.jsx("ul",{className:"list-disc pl-5",children:r.workouts.map((s,o)=>p.jsxs("li",{children:[s.name,": ",s.sets," sets x ",s.reps," ","reps"]},o))})]}),p.jsxs("div",{className:"mt-2",children:[p.jsx("h3",{className:`font-semibold mb-1 ${t?"text-red-400":"text-red-800"}`,children:"Meals:"}),p.jsx("ul",{className:"list-disc pl-5",children:r.meals.map((s,o)=>p.jsxs("li",{children:[s.name," (",s.quantity,"g): Protein"," ",s.macros.protein.toFixed(1),"g, Carbs"," ",s.macros.carbs.toFixed(1),"g, Fats"," ",s.macros.fats.toFixed(1),"g"]},o))})]})]},r.id)):p.jsx("p",{className:`text-center text-lg ${t?"text-red-400":"text-red-800"}`,children:"No logs found."})})]})})},G5=()=>{const t=rn(),{isDarkMode:e}=A.useContext(Ze),{user:n,loading:r}=A.useContext($s),[s,o]=A.useState(""),[l,u]=A.useState(new Date().toISOString().split("T")[0]),[c,h]=A.useState([]),[g,v]=A.useState([]),[x,b]=A.useState(!0),[k,D]=A.useState(!0),[P,j]=A.useState(null),[V,$]=A.useState(null),[z,H]=A.useState(Array.from({length:6},(ie,oe)=>({week:oe+1,days:[{day:"Monday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Tuesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Wednesday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Thursday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Friday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Saturday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}},{day:"Sunday",meals:[],macros:{protein:0,carbs:0,fats:0},loggedMeals:{Breakfast:[],Lunch:[],Dinner:[],Snacks:[]}}]}))),[Y,R]=A.useState(Array(6).fill(!1)),[E,S]=A.useState(null);A.useEffect(()=>{(async()=>{try{b(!0),j(null);const{data:oe,error:Q}=await Rn.from("foods").select("*");if(Q)throw Q;console.log("Fetched meals from Supabase 'foods' table:",oe),h(oe),oe.length===0&&console.warn("No meals found in Supabase 'foods' table.")}catch(oe){console.error("Error fetching meals:",oe),j("Failed to load meals. Please try again later.")}finally{b(!1)}})()},[]),A.useEffect(()=>{(async()=>{if(n)try{D(!0),$(null);const{data:oe,error:Q}=await Rn.from("nutrition_plans").select("*").eq("user_id",n.id);if(Q)throw Q;console.log("Fetched nutrition plans from Supabase:",oe),v(oe)}catch(oe){console.error("Error fetching nutrition plans:",oe),$("Failed to load your nutrition plans. Please try again later.")}finally{D(!1)}})()},[n]);const I=c.reduce((ie,oe)=>{const Q=oe.category||"Misc";return ie[Q]||(ie[Q]=[]),ie[Q].push(oe),ie},{}),O=["Meat","Fruit","Vegetable","Starch","Misc"],F=["Breakfast","Lunch","Dinner","Snacks"],L=ie=>{const oe=[...Y];oe[ie]=!oe[ie],R(oe)},re=(ie,oe)=>{if(c.length===0){alert("No meals available to add. Please add meals in Supabase.");return}const Q=[...z];Q[ie].days[oe].meals.push({name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"}),H(Q)},pe=(ie,oe,Q,q,Z)=>{const xe=[...z],Oe=xe[ie].days[oe].meals[Q];if(q==="name"){const It=c.find(Kn=>Kn.name===Z);Oe.name=Z,Oe.grams=It.portion||100,Oe.referencePortion=It.portion||100,Oe.macros=It.macros}else Oe[q]=q==="grams"?Number(Z):Z;H(xe)},Me=(ie,oe,Q,q)=>{const Z=[...z];Z[ie].days[oe].macros[Q]=Number(q),H(Z)},_e=(ie,oe)=>{const Q=[...z],q=Q[ie].days[oe],Z={...q.meals[q.meals.length-1]};Z.name&&(q.loggedMeals[Z.mealTime].push(Z),q.meals[q.meals.length-1]={name:c[0].name,grams:c[0].portion||100,referencePortion:c[0].portion||100,macros:c[0].macros,mealTime:"Breakfast"},H(Q))},ne=(ie,oe,Q,q,Z)=>{S({weekIndex:ie,dayIndex:oe,mealTime:Q,mealIndex:q,meal:Z})},me=()=>{if(!E)return;const{weekIndex:ie,dayIndex:oe,mealTime:Q,mealIndex:q,meal:Z}=E,xe=[...z];xe[ie].days[oe].loggedMeals[Q][q]=Z,H(xe),S(null)},fe=(ie,oe,Q,q)=>{const Z=[...z];Z[ie].days[oe].loggedMeals[Q].splice(q,1),H(Z)},W=ie=>Object.values(ie).flat().reduce((Q,q)=>{const Z=q.grams/q.referencePortion;return{protein:Q.protein+q.macros.protein*Z,carbs:Q.carbs+q.macros.carbs*Z,fats:Q.fats+q.macros.fats*Z}},{protein:0,carbs:0,fats:0}),te=(ie,oe)=>({protein:ie.protein>=oe.protein,carbs:ie.carbs>=oe.carbs,fats:ie.fats>=oe.fats}),be=ie=>{const oe=new Date(l);return oe.setDate(oe.getDate()+ie*7),oe.toLocaleDateString()},De=(ie,oe)=>{const Q=new Date(l);return Q.setDate(Q.getDate()+ie*7+oe),Q.toLocaleDateString()},Ae=async ie=>{if(ie.preventDefault(),!n){alert("Please log in to save a nutrition plan."),t("/login");return}try{const oe={user_id:n.id,name:s,start_date:new Date(l).toISOString().split("T")[0],weeks:JSON.stringify(z)},{data:Q,error:q}=await Rn.from("nutrition_plans").insert(oe).select();if(q)throw q;t(`/nutrition-plan/${Q[0].id}`)}catch(oe){console.error("Error saving nutrition plan:",oe),alert("Failed to save nutrition plan. Please try again.")}};return r?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(Rc,{color:e?"#f87171":"#b91c1c"})}):x||k?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(Rc,{color:e?"#f87171":"#b91c1c"})}):P?p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:P}):p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Create Your Nutrition Plan"}),V?p.jsx("div",{className:"text-center text-red-500 mb-12",children:V}):g.length>0?p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:`text-3xl font-bold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Your Nutrition Plans"}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(ie=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg cursor-pointer transition-all duration-200 ${e?"bg-stone-800/90 hover:bg-stone-700":"bg-red-50/90 hover:bg-red-100"} border ${e?"border-stone-700":"border-red-200"}`,onClick:()=>t(`/nutrition-plan/${ie.id}`),children:[p.jsx("h3",{className:`text-xl font-semibold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:ie.name}),p.jsxs("p",{className:`text-sm mt-2 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",ie.start_date]})]},ie.id))})]}):p.jsx("div",{className:"text-center text-lg mb-12",children:"No nutrition plans yet. Create one below!"}),p.jsxs("form",{onSubmit:Ae,children:[p.jsx("div",{className:`mb-10 p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"}`,children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan Name"}),p.jsx("input",{type:"text",value:s,onChange:ie=>o(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter plan name",required:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Start Date"}),p.jsx("input",{type:"date",value:l,onChange:ie=>u(ie.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,required:!0})]})]})}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:z.map((ie,oe)=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>L(oe),children:[p.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",ie.week," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",be(oe),")"]})]}),Y[oe]?p.jsx(Wv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):p.jsx(zv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),Y[oe]&&p.jsx("div",{className:"mt-6 space-y-6",children:ie.days.map((Q,q)=>p.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[Q.day," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",De(oe,q),")"]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),p.jsx("input",{type:"number",value:Q.macros.protein,onChange:Z=>Me(oe,q,"protein",Z.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),p.jsx("input",{type:"number",value:Q.macros.carbs,onChange:Z=>Me(oe,q,"carbs",Z.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),p.jsx("input",{type:"number",value:Q.macros.fats,onChange:Z=>Me(oe,q,"fats",Z.target.value),className:`w-full p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]})]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Plan a Meal"}),c.length===0?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals available. Please add meals in Supabase."}):Q.meals.length>0?Q.meals.map((Z,xe)=>p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 mb-4 p-4 rounded-lg bg-opacity-50 border border-opacity-30",children:[p.jsx("select",{value:Z.name,onChange:Oe=>pe(oe,q,xe,"name",Oe.target.value),className:`w-full sm:w-1/3 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:O.map(Oe=>I[Oe]&&p.jsx("optgroup",{label:Oe,children:I[Oe].map(It=>p.jsx("option",{value:It.name,children:It.name},It.id))},Oe))}),p.jsx("input",{type:"number",value:Z.grams,onChange:Oe=>pe(oe,q,xe,"grams",Oe.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,placeholder:"Grams"}),p.jsx("select",{value:Z.mealTime,onChange:Oe=>pe(oe,q,xe,"mealTime",Oe.target.value),className:`w-full sm:w-24 p-2 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(Oe=>p.jsx("option",{value:Oe,children:Oe},Oe))}),p.jsx("button",{type:"button",onClick:()=>_e(oe,q),className:`mt-2 sm:mt-0 px-3 py-1 text-sm rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Log"})]},xe)):p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals added yet."}),p.jsx("button",{type:"button",onClick:()=>re(oe,q),className:`mt-4 w-full p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Add Meal"})]}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(Q.loggedMeals).every(Z=>Q.loggedMeals[Z].length===0)?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):F.map(Z=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:Z}),Q.loggedMeals[Z].length>0?p.jsx("ul",{className:"space-y-2",children:Q.loggedMeals[Z].map((xe,Oe)=>p.jsxs("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:[p.jsxs("span",{className:"text-sm",children:[xe.name,": ",xe.grams,"g"]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{type:"button",onClick:()=>ne(oe,q,Z,Oe,{...xe}),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:p.jsx(B5,{className:"w-5 h-5"})}),p.jsx("button",{type:"button",onClick:()=>fe(oe,q,Z,Oe),className:`p-1 rounded-md transition-colors duration-200 ${e?"text-red-400 hover:bg-stone-500":"text-red-800 hover:bg-red-200"}`,children:p.jsx(W5,{className:"w-5 h-5"})})]})]},Oe))}):p.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",Z.toLowerCase()," logged."]})]},Z)),p.jsxs("div",{className:"mt-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const Z=W(Q.loggedMeals),xe=te(Z,Q.macros);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${xe.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Z.protein/Q.macros.protein*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[Z.protein.toFixed(1),"g /"," ",Q.macros.protein,"g"]}),xe.protein?p.jsx(hl,{className:"w-5 h-5 text-green-500"}):p.jsx(fl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${xe.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Z.carbs/Q.macros.carbs*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[Z.carbs.toFixed(1),"g /"," ",Q.macros.carbs,"g"]}),xe.carbs?p.jsx(hl,{className:"w-5 h-5 text-green-500"}):p.jsx(fl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${xe.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Z.fats/Q.macros.fats*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[Z.fats.toFixed(1),"g /"," ",Q.macros.fats,"g"]}),xe.fats?p.jsx(hl,{className:"w-5 h-5 text-green-500"}):p.jsx(fl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},q))})]},oe))}),p.jsx("div",{className:"mt-12 max-w-md mx-auto",children:p.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Save Plan"})})]}),E&&p.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:p.jsxs("div",{className:`p-8 rounded-xl shadow-2xl max-w-md w-full ${e?"bg-stone-800":"bg-red-50"} border ${e?"border-stone-700":"border-red-200"}`,children:[p.jsx("h3",{className:`text-2xl font-semibold mb-6 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:"Edit Meal"}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal"}),p.jsx("select",{value:E.meal.name,onChange:ie=>{const oe=c.find(Q=>Q.name===ie.target.value);S({...E,meal:{...E.meal,name:ie.target.value,grams:oe.portion||100,referencePortion:oe.portion||100,macros:oe.macros}})},className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:O.map(ie=>I[ie]&&p.jsx("optgroup",{label:ie,children:I[ie].map(oe=>p.jsx("option",{value:oe.name,children:oe.name},oe.id))},ie))})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Grams"}),p.jsx("input",{type:"number",value:E.meal.grams,onChange:ie=>S({...E,meal:{...E.meal,grams:Number(ie.target.value)}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-sm font-medium mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Meal Time"}),p.jsx("select",{value:E.meal.mealTime,onChange:ie=>S({...E,meal:{...E.meal,mealTime:ie.target.value}}),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"}`,children:F.map(ie=>p.jsx("option",{value:ie,children:ie},ie))})]}),p.jsxs("div",{className:"flex space-x-4",children:[p.jsx("button",{type:"button",onClick:me,className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-sm hover:shadow-md`,children:"Save"}),p.jsx("button",{type:"button",onClick:()=>S(null),className:`flex-1 p-3 rounded-lg transition-all duration-200 font-medium ${e?"bg-stone-600 text-white hover:bg-stone-700":"bg-red-200 text-red-800 hover:bg-red-300"} shadow-sm hover:shadow-md`,children:"Cancel"})]})]})})]})},Q5=()=>{const{id:t}=If(),{isDarkMode:e}=A.useContext(Ze),[n,r]=A.useState(null),[s,o]=A.useState(!0),[l,u]=A.useState(null),[c,h]=A.useState([]);A.useEffect(()=>{(async()=>{try{o(!0),u(null);const{data:j,error:V}=await Rn.from("nutrition_plans").select("*").eq("id",t).single();if(V)throw V;const $=JSON.parse(j.weeks);r({...j,weeks:$}),h(Array($.length).fill(!1))}catch(j){console.error("Error fetching nutrition plan:",j),u("Failed to load nutrition plan. Please try again later.")}finally{o(!1)}})()},[t]);const g=P=>{const j=[...c];j[P]=!j[P],h(j)},v=P=>Object.values(P).flat().reduce((V,$)=>{const z=$.grams/$.referencePortion;return{protein:V.protein+$.macros.protein*z,carbs:V.carbs+$.macros.carbs*z,fats:V.fats+$.macros.fats*z}},{protein:0,carbs:0,fats:0}),x=(P,j)=>({protein:P.protein>=j.protein,carbs:P.carbs>=j.carbs,fats:P.fats>=j.fats}),b=P=>{const j=new Date(n.start_date);return j.setDate(j.getDate()+P*7),j.toLocaleDateString()},k=(P,j)=>{const V=new Date(n.start_date);return V.setDate(V.getDate()+P*7+j),V.toLocaleDateString()};if(s)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:p.jsx(Rc,{color:e?"#f87171":"#b91c1c"})});if(l)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg text-red-500",children:l});if(!n)return p.jsx("div",{className:"container mx-auto px-4 py-10 text-center text-lg",children:"Nutrition plan not found."});const D=["Breakfast","Lunch","Dinner","Snacks"];return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:n.name}),p.jsxs("p",{className:`text-center text-lg mb-10 ${e?"text-stone-400":"text-stone-600"}`,children:["Start Date: ",new Date(n.start_date).toLocaleDateString()]}),p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:n.weeks.map((P,j)=>p.jsxs("div",{className:`p-6 rounded-xl shadow-lg ${e?"bg-stone-800/90":"bg-red-50/90"} backdrop-blur-sm border ${e?"border-stone-700":"border-red-200"} transition-all duration-300`,children:[p.jsxs("div",{className:`flex justify-between items-center cursor-pointer p-4 rounded-lg transition-colors duration-200 ${e?"hover:bg-stone-700":"hover:bg-red-100"}`,onClick:()=>g(j),children:[p.jsxs("h2",{className:`text-2xl font-bold ${e?"text-red-400":"text-red-800"} tracking-tight`,children:["Week ",P.week," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",b(j),")"]})]}),c[j]?p.jsx(Wv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`}):p.jsx(zv,{className:`w-6 h-6 ${e?"text-red-400":"text-red-800"} transition-transform duration-200`})]}),c[j]&&p.jsx("div",{className:"mt-6 space-y-6",children:P.days.map((V,$)=>p.jsxs("div",{className:`border p-6 rounded-lg ${e?"border-stone-600 bg-stone-700/50":"border-red-200 bg-white/50"} transition-all duration-200`,children:[p.jsxs("h3",{className:`text-xl font-semibold mb-4 ${e?"text-red-400":"text-red-800"} tracking-tight`,children:[V.day," ",p.jsxs("span",{className:"text-sm font-normal",children:["(",k(j,$),")"]})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Macro Goals"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Protein (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.protein,"g"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Carbs (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.carbs,"g"]})]}),p.jsxs("div",{children:[p.jsx("label",{className:`block text-sm font-medium mb-1 ${e?"text-red-400":"text-red-800"}`,children:"Fats (g)"}),p.jsxs("p",{className:`text-sm ${e?"text-stone-400":"text-stone-600"}`,children:[V.macros.fats,"g"]})]})]})]}),p.jsxs("div",{children:[p.jsx("h4",{className:`text-lg font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Logged Meals"}),Object.keys(V.loggedMeals).every(z=>V.loggedMeals[z].length===0)?p.jsx("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:"No meals logged yet."}):D.map(z=>p.jsxs("div",{className:"mb-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:z}),V.loggedMeals[z].length>0?p.jsx("ul",{className:"space-y-2",children:V.loggedMeals[z].map((H,Y)=>p.jsx("li",{className:`flex items-center justify-between p-2 rounded-lg ${e?"bg-stone-600/30":"bg-red-100/30"} transition-all duration-200 hover:bg-opacity-50`,children:p.jsxs("span",{className:"text-sm",children:[H.name,": ",H.grams,"g"]})},Y))}):p.jsxs("p",{className:`text-sm italic ${e?"text-red-400":"text-red-800"}`,children:["No ",z.toLowerCase()," logged."]})]},z)),p.jsxs("div",{className:"mt-6",children:[p.jsx("h5",{className:`text-base font-semibold mb-3 ${e?"text-red-400":"text-red-800"} tracking-wide border-b ${e?"border-stone-600":"border-red-200"} pb-1`,children:"Total Macros"}),(()=>{const z=v(V.loggedMeals),H=x(z,V.macros);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Protein:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${H.protein?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(z.protein/V.macros.protein*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[z.protein.toFixed(1),"g /"," ",V.macros.protein,"g"]}),H.protein?p.jsx(hl,{className:"w-5 h-5 text-green-500"}):p.jsx(fl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Carbs:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${H.carbs?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(z.carbs/V.macros.carbs*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[z.carbs.toFixed(1),"g /"," ",V.macros.carbs,"g"]}),H.carbs?p.jsx(hl,{className:"w-5 h-5 text-green-500"}):p.jsx(fl,{className:"w-5 h-5 text-red-500"})]}),p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("span",{className:"w-24 font-medium",children:"Fats:"}),p.jsx("div",{className:"flex-1 bg-stone-200 dark:bg-stone-600 rounded-full h-4 overflow-hidden",children:p.jsx("div",{className:`h-full ${H.fats?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(z.fats/V.macros.fats*100,100)}%`}})}),p.jsxs("span",{className:"text-sm",children:[z.fats.toFixed(1),"g /"," ",V.macros.fats,"g"]}),H.fats?p.jsx(hl,{className:"w-5 h-5 text-green-500"}):p.jsx(fl,{className:"w-5 h-5 text-red-500"})]})]})})()]})]})]},$))})]},j))})]})},J5=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(null),[l,u]=A.useState(!1),{login:c}=A.useContext($s),{isDarkMode:h}=A.useContext(Ze),g=rn(),v=async x=>{var b,k;x.preventDefault(),o(null),u(!0);try{await c(t,n);const D=((k=(b=location.state)==null?void 0:b.from)==null?void 0:k.pathname)||"/profile";g(D,{replace:!0})}catch(D){o(D.message),console.error("Login error:",D.message)}finally{u(!1)}};return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${h?"text-red-400":"text-red-800"}`,children:"Login"}),p.jsxs("div",{className:`max-w-md mx-auto p-6 rounded-lg shadow-md ${h?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsxs("form",{onSubmit:v,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),p.jsx("input",{type:"email",value:t,onChange:x=>e(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${h?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),p.jsx("input",{type:"password",value:n,onChange:x=>r(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${h?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),s&&p.jsx("p",{className:`text-center text-sm mb-4 ${h?"text-red-400":"text-red-800"}`,children:s}),p.jsx("button",{type:"submit",disabled:l,className:`w-full p-3 rounded-lg font-semibold text-lg flex items-center justify-center ${h?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed`,children:l?p.jsxs(p.Fragment,{children:[p.jsx(eD,{className:"animate-spin mr-2"}),"Logging in..."]}):"Login"})]}),p.jsx("div",{className:"mt-4 text-center",children:p.jsx(it,{to:"/forgot-password",className:`text-sm hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Forgot Password?"})}),p.jsx("div",{className:"mt-2 text-center",children:p.jsxs("p",{className:`text-sm ${h?"text-stone-300":"text-stone-600"}`,children:["Don't have an account?"," ",p.jsx(it,{to:"/signup",className:`hover:underline ${h?"text-red-400 hover:text-red-300":"text-red-800 hover:text-red-600"}`,children:"Sign up"})]})})]})]})},Y5=()=>{const t=rn(),{isDarkMode:e}=A.useContext(Ze),{signup:n,user:r,loading:s}=A.useContext($s),[o,l]=A.useState(""),[u,c]=A.useState(""),[h,g]=A.useState(null),v=async x=>{x.preventDefault(),g(null);try{await n(o,u),t("/login")}catch(b){b.message.includes("User already exists")?g("Email already in use. A confirmation email has been resent."):b.message.includes("rate limit")?g("Too many signup attempts. Please wait and try again later."):g("An error occurred during signup. Please try again.")}};return s?p.jsx("div",{children:"Loading..."}):r?(t("/nutrition"),null):p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsx("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-10 tracking-tight ${e?"text-red-400":"text-red-800"}`,children:"Sign Up"}),p.jsxs("form",{onSubmit:v,className:"max-w-md mx-auto",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Email"}),p.jsx("input",{type:"email",value:o,onChange:x=>l(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your email",required:!0})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${e?"text-red-400":"text-red-800"} tracking-wide`,children:"Password"}),p.jsx("input",{type:"password",value:u,onChange:x=>c(x.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${e?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your password",required:!0})]}),h&&p.jsx("p",{className:`text-center text-sm mb-6 ${e?"text-red-400":"text-red-800"}`,children:h}),p.jsx("button",{type:"submit",className:`w-full p-4 rounded-lg transition-all duration-200 font-semibold text-lg ${e?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} shadow-md hover:shadow-lg`,children:"Sign Up"})]}),p.jsxs("p",{className:`text-center mt-6 text-sm ${e?"text-stone-400":"text-stone-600"}`,children:["Already have an account?"," ",p.jsx("a",{href:"/login",className:"text-red-600 hover:underline",children:"Log in"})]})]})},X5=()=>{var D,P,j;const{user:t,loading:e,refreshUser:n}=A.useContext($s),{isDarkMode:r}=A.useContext(Ze),s=rn(),[o,l]=A.useState(((D=t==null?void 0:t.user_metadata)==null?void 0:D.displayName)||""),[u,c]=A.useState([]),[h,g]=A.useState(null),[v,x]=A.useState(null);if(A.useEffect(()=>{(async()=>{if(t)try{const{data:$,error:z}=await Rn.from("nutrition_plans").select("*").eq("user_id",t.id);if(z)throw z;c($||[])}catch($){console.error("Error fetching nutrition plans:",$.message)}})()},[t]),e)return p.jsx("div",{children:"Loading..."});if(!t)return s("/login"),null;const b=async V=>{V.preventDefault(),g(null),x(null);try{const{error:$}=await Rn.auth.updateUser({data:{displayName:o}});if($)throw $;x("Profile updated successfully!"),await n()}catch($){g("Failed to update profile. Please try again."),console.error("Update profile error:",$.message)}},k=(P=t==null?void 0:t.user_metadata)!=null&&P.displayName?t.user_metadata.displayName.charAt(0).toUpperCase()+t.user_metadata.displayName.slice(1):"User";return p.jsxs("div",{className:"container mx-auto px-4 py-12",children:[p.jsxs("h1",{className:`text-4xl md:text-5xl font-extrabold text-center mb-4 tracking-tight ${r?"text-red-400":"text-red-800"}`,children:[k," - Dashboard "]}),p.jsxs("p",{className:`text-center text-lg mb-10 ${r?"text-stone-300":"text-stone-600"}`,children:["Welcome back, ",k,"!"]}),p.jsxs("div",{className:"max-w-2xl mx-auto",children:[p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Profile Information"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Email:"})," ",t.email]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Username:"})," ",((j=t.user_metadata)==null?void 0:j.displayName)||"Not set"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Account Created:"})," ",new Date(t.created_at).toLocaleDateString()]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Last Updated:"})," ",new Date(t.updated_at).toLocaleDateString()]}),t.user_metadata&&Object.keys(t.user_metadata).length>0?p.jsxs("div",{children:[p.jsx("span",{className:"font-medium",children:"Additional Info:"}),p.jsx("ul",{className:"list-disc list-inside ml-4",children:Object.entries(t.user_metadata).map(([V,$])=>p.jsxs("li",{children:[V,": ",$]},V))})]}):p.jsx("p",{children:"No additional user metadata available."})]})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Nutrition Plans"}),u.length>0?p.jsx("ul",{className:"space-y-2",children:u.map(V=>p.jsx("li",{children:p.jsx(Link,{to:`/nutrition-plan/${V.id}`,className:"hover:text-red-600 transition-colors duration-200",children:V.name||`Plan ${V.id}`})},V.id))}):p.jsx("p",{children:"No nutrition plans found."})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md mb-6 ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update Profile"}),p.jsxs("form",{onSubmit:b,children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:`block text-lg font-semibold mb-2 ${r?"text-red-400":"text-red-800"} tracking-wide`,children:"Display Name"}),p.jsx("input",{type:"text",value:o,onChange:V=>l(V.target.value),className:`w-full p-3 border rounded-lg focus:outline-none focus:ring-2 transition-all duration-200 ${r?"bg-stone-700 border-stone-600 text-red-400 focus:ring-red-600":"bg-white border-red-200 text-red-800 focus:ring-red-600"} placeholder-stone-400`,placeholder:"Enter your display name"})]}),h&&p.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-red-400":"text-red-800"}`,children:h}),v&&p.jsx("p",{className:`text-center text-sm mb-4 ${r?"text-green-400":"text-green-600"}`,children:v}),p.jsx("button",{type:"submit",className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Update Profile"})]})]}),p.jsxs("div",{className:`p-6 rounded-lg shadow-md ${r?"bg-stone-800 text-red-400":"bg-white text-red-800"}`,children:[p.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Account Actions"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Create Nutrition Plan"}),p.jsx("button",{onClick:()=>s("/fitness-tracker"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Fitness Tracker"}),p.jsx("button",{onClick:()=>s("/nutrition"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"View Nutrition Plans"}),p.jsx("button",{onClick:()=>s("/reset-password"),className:`w-full p-3 rounded-lg font-semibold text-lg ${r?"bg-red-700 text-white hover:bg-red-800":"bg-red-600 text-white hover:bg-red-700"} transition-all duration-200 shadow-md hover:shadow-lg`,children:"Change Password"})]})]})]})]})},Z5=()=>{const{user:t,loading:e}=A.useContext($s),n=Dr();return e?p.jsx("div",{children:"Loading..."}):t?p.jsx(rS,{}):p.jsx(yR,{to:"/login",state:{from:n},replace:!0})},eB=()=>(A.useEffect(()=>{(async()=>{try{const e=Kt(xt,"content","blog","posts"),r=(await qn(e)).docs.map(h=>({id:h.id,date:h.data().date||new Date().toISOString()})),o=`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  ${[{url:"https://yourdomain.com/",date:new Date().toISOString()},{url:"https://yourdomain.com/about",date:new Date().toISOString()},{url:"https://yourdomain.com/contact",date:new Date().toISOString()}].map(h=>`
  <url>
    <loc>${h.url}</loc>
    <lastmod>${h.date}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>`).join("")}
  ${r.map(h=>`
  <url>
    <loc>https://yourdomain.com/blog/${h.id}</loc>
    <lastmod>${new Date(h.date).toISOString()}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>`).join("")}
</urlset>`,l=new Blob([o],{type:"application/xml"}),u=URL.createObjectURL(l),c=document.createElement("a");c.href=u,c.download="sitemap.xml",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),console.log("Sitemap generated:",o)}catch(e){console.error("Error generating sitemap:",e)}})()},[]),p.jsx("div",{children:"Generating sitemap..."})),Ze=A.createContext();function tB(){const[t,e]=A.useState(()=>{const s=localStorage.getItem("theme");return s?JSON.parse(s):!0});A.useEffect(()=>{localStorage.setItem("theme",JSON.stringify(t))},[t]);const n=()=>e(s=>!s),r="/aussie-gut-pack/";return console.log("Basename:",r),p.jsx(pS,{children:p.jsx(Y9,{children:p.jsx(Fj,{children:p.jsx(Ze.Provider,{value:{isDarkMode:t,toggleTheme:n},children:p.jsx(zR,{basename:r,children:p.jsx(jf,{children:p.jsx(Nf,{classNames:"fade",timeout:300,children:p.jsx(xR,{children:p.jsxs(Je,{path:"/",element:p.jsx(tD,{}),children:[p.jsx(Je,{index:!0,element:p.jsx(J9,{})}),p.jsx(Je,{path:"products",element:p.jsx(X9,{})}),p.jsx(Je,{path:"cart",element:p.jsx(Z9,{})}),p.jsx(Je,{path:"checkout",element:p.jsx(e5,{})}),p.jsx(Je,{path:"gut-health",element:p.jsx(t5,{})}),p.jsx(Je,{path:"gut-health/:id",element:p.jsx(n5,{})}),p.jsx(Je,{path:"purchase",element:p.jsx(s5,{})}),p.jsx(Je,{path:"blog",element:p.jsx(c5,{})}),p.jsx(Je,{path:"blog/:id",element:p.jsx(d5,{})}),p.jsx(Je,{path:"/sitemap.xml",element:p.jsx(eB,{})}),p.jsx(Je,{path:"faq",element:p.jsx(f5,{})}),p.jsx(Je,{path:"contact",element:p.jsx(C5,{})}),p.jsx(Je,{path:"admin",element:p.jsx(P5,{})}),p.jsx(Je,{path:"admin/home",element:p.jsx(A5,{})}),p.jsx(Je,{path:"admin/blog",element:p.jsx(I5,{})}),p.jsx(Je,{path:"admin/products",element:p.jsx(R5,{})}),p.jsx(Je,{path:"fitness-tracker",element:p.jsx(N5,{})}),p.jsx(Je,{path:"fitness-tracker/plan/:id",element:p.jsx(j5,{})}),p.jsx(Je,{path:"fitness-tracker/create-custom-plan",element:p.jsx(H5,{})}),p.jsx(Je,{path:"fitness-tracker/log",element:p.jsx(q5,{})}),p.jsx(Je,{path:"fitness-tracker/history",element:p.jsx(K5,{})}),p.jsx(Je,{path:"nutrition",element:p.jsx(G5,{})}),p.jsx(Je,{path:"nutrition-plan/:id",element:p.jsx(Q5,{})}),p.jsx(Je,{path:"login",element:p.jsx(J5,{})}),p.jsx(Je,{path:"signup",element:p.jsx(Y5,{})}),p.jsx(Je,{element:p.jsx(Z5,{}),children:p.jsx(Je,{path:"profile",element:p.jsx(X5,{})})}),p.jsx(Je,{path:"*",element:p.jsx("div",{children:"404 - Page Not Found"})})]})})},window.location.pathname)})})})})})})}console.log("Main.jsx is running");kI.createRoot(document.getElementById("root")).render(p.jsx(tt.StrictMode,{children:p.jsx(tB,{})}));export{Fo as g};
